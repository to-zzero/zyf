<!DOCTYPE html>
<html>

<head>
    <!-- Load Leaflet from CDN -->
    <link rel="stylesheet" href="./css/leaflet.css" />
    <script src="./js/leaflet.js"></script>
    <script src="https://cdn.bootcss.com/jquery/3.4.1/jquery.min.js"></script>
    <!-- Load Esri Leaflet from CDN -->
    <script src="./js/esri-leaflet.js"></script>

    <style>
        html,
        body,
        #map {
            margin: 0;
            padding: 0;
            width: 100%;
            height: 100%;
        }
    </style>
</head>

<body>
    <div id="map"></div>
    <script>
        $(document).ready(function () {
            var search = window.location.search.substr(1)
            var obj = {}
            search.split('&').map(r => {
                var pair = r.split('=')
                obj[pair[0]] = pair[1]
            })

            var map = L.map('map');//.setView([36.528, 108.680], 3);
            window.map = map
            L.esri.basemapLayer("Gray").addTo(map);

            new L.esri
                .TiledMapLayer({ url: `/rest/services/${obj.service}` })
                .addTo(map)
        })
    </script>
</body>

</html>