// All material copyright ESRI, All Rights Reserved, unless otherwise specified.
// See https://js.arcgis.com/4.5/esri/copyright.txt for details.
//>>built
require({cache:{"esri/identity/IdentityManagerDialog":function(){define("dojo/_base/kernel ../core/declare dojo/Deferred dojo/_base/lang dojo/dom-attr dojo/keys dijit/registry dijit/Dialog ../kernel ../core/lang ../core/Error ../core/domUtils ./Credential ./IdentityManagerBase dojo/i18n!./nls/identity dojo/query dijit/form/Button dijit/form/Form dijit/form/ValidationTextBox".split(" "),function(n,m,g,h,d,l,c,k,b,a,e,u,w,v,A){return m([v],{declaredClass:"esri.identity.IdentityManager",constructor:function(a){h.mixin(this,
a)},_dialogContent:"\x3cdiv data-dojo-type\x3d'dijit.form.Form' data-dojo-props\x3d'\"class\":\"esriIdForm\"'\x3e\x3cdiv class\x3d'dijitDialogPaneContentArea'\x3e\x3cdiv style\x3d'padding-bottom: 5px; word-wrap: break-word;'\x3e{info}\x3c/div\x3e\x3cdiv style\x3d'margin: 0px; padding: 0px; height: 10px;'\x3e\x3c/div\x3e\x3cdiv class\x3d'esriErrorMsg' style\x3d'display: none; color: white; background-color: #D46464; text-align: center; padding-top: 3px; padding-bottom: 3px;'\x3e{invalidUser}\x3c/div\x3e\x3cdiv style\x3d'margin: 0px; padding: 0px; height: 10px;'\x3e\x3c/div\x3e\x3ctable style\x3d'width: 100%;'\x3e\x3ctr\x3e\x3ctd\x3e\x3clabel\x3e{lblUser}\x3c/label\x3e\x3cbr/\x3e\x3cinput data-dojo-type\x3d'dijit.form.ValidationTextBox' data-dojo-props\x3d'type:\"text\", \"class\":\"esriIdUser\", required:true, trim:true, style:\"width: 100%;\", autocapitalize:\"none\", autocorrect:\"off\", spellcheck:false' /\x3e\x3c/td\x3e\x3c/tr\x3e\x3ctr\x3e\x3ctd\x3e\x3clabel\x3e{lblPwd}\x3c/label\x3e\x3cbr/\x3e\x3cinput data-dojo-type\x3d'dijit.form.ValidationTextBox' data-dojo-props\x3d'type:\"password\", \"class\":\"esriIdPwd\", required:true, style:\"width: 100%;\"' /\x3e\x3c/td\x3e\x3c/tr\x3e\x3c/table\x3e\x3c/div\x3e\x3cdiv class\x3d'dijitDialogPaneActionBar'\x3e\x3cbutton data-dojo-type\x3d'dijit.form.Button' data-dojo-props\x3d'type:\"button\", \"class\":\"esriIdSubmit\"'\x3e{lblOk}\x3c/button\x3e\x3cbutton data-dojo-type\x3d'dijit.form.Button' data-dojo-props\x3d'type:\"button\", \"class\":\"esriIdCancel\"'\x3e{lblCancel}\x3c/button\x3e\x3c/div\x3e\x3c/div\x3e",
signIn:function(a,b,k){this._nls||(this._nls=A);this._loginDialog||(this._loginDialog=this.dialog=this._createLoginDialog(),this.emit("dialog-create"));var c=this._loginDialog,h=k&&k.error,v=k&&k.token,p=new g(function(){c.onCancel()});if(c.open)return a=new e("identity-manager:busy","BUSY"),p.reject(a),p.promise;u.hide(c.errMsg_);h&&h.details&&403==h.details.httpStatus&&v&&(d.set(c.errMsg_,"innerHTML",this._nls.forbidden),u.show(c.errMsg_));c.dfd_=p;c.serverInfo_=b;c.resUrl_=a;c.admin_=k&&k.isAdmin;
d.set(c.resLink_,{title:a,innerHTML:"("+(this.getResourceName(a)||this._nls.lblItem)+")"});d.set(c.serverLink_,{title:b.server,innerHTML:(-1!==b.server.toLowerCase().indexOf("arcgis.com")?"ArcGIS Online":b.server)+" "});c.txtPwd_.set("value","");c.show();return p.promise},_createLoginDialog:function(){var h=this._nls,v=a.substitute(h,this._dialogContent),v=a.substitute({resource:"\x3cspan class\x3d'resLink' style\x3d'word-wrap: break-word;'\x3e\x3c/span\x3e",server:"\x3cspan class\x3d'serverLink' style\x3d'word-wrap: break-word;'\x3e\x3c/span\x3e"},
v),g=new k({title:h.title,content:v,"class":" esri-widget esriSignInDialog esriIdentityDialog",style:"width: 18em;",esriIdMgr_:this,onShow:function(){this.domNode.classList.add("esriIdentityDialog--visible")},onHide:function(){this.domNode.classList.remove("esriIdentityDialog--visible")},keypressed_:function(a){a.charOrCode===l.ENTER&&this.execute_()},execute_:function(){var e=this.txtUser_.get("value"),c=this.txtPwd_.get("value"),v=this.dfd_,p=this;if(this.form_.validate()&&e&&c){this.btnSubmit_.set("label",
h.lblSigning);var g=b.id.findCredential(p.resUrl_,e),l=function(b){p.btnSubmit_.set("label",h.lblOk);p.btnSubmit_.set("disabled",!1);u.hide(p.errMsg_);p.hide();k._DialogLevelManager.hide(p);var d=p.serverInfo_;p.dfd_=p.serverInfo_=p.generateDfd_=p.resUrl_=null;var f,q,c=g,l;b&&(f=b.token,q=a.isDefined(b.expires)?Number(b.expires):null,l=!!b.ssl,c?(c.userId=e,c.token=f,c.expires=q,c.validity=b.validity,c.ssl=l,c.creationTime=(new Date).getTime()):c=new w({userId:e,server:d.server,token:f,expires:q,
ssl:l,isAdmin:p.admin_,validity:b.validity}));v.resolve(c)};g&&!g._enqueued?l():(p.btnSubmit_.set("disabled",!0),p.generateDfd_=b.id.generateToken(this.serverInfo_,{username:e,password:c},{isAdmin:this.admin_}).then(l).then(null,function(a){p.btnSubmit_.set("disabled",!1);p.generateDfd_=null;p.btnSubmit_.set("label",h.lblOk);d.set(p.errMsg_,"innerHTML",a&&a.details&&a.details.httpStatus?h.invalidUser:h.noAuthService);u.show(p.errMsg_)}))}},cancel_:function(){g.generateDfd_&&g.generateDfd_.cancel();
var a=g.dfd_,b=g.resUrl_,c=g.serverInfo_;g.btnSubmit_.set("disabled",!1);g.dfd_=g.serverInfo_=g.generateDfd_=g.resUrl_=null;u.hide(g.errMsg_);k._DialogLevelManager.hide(g);g.esriIdMgr_.emit("dialog-cancel",{resourceUrl:b,serverInfo:c});b=new e("identity-manager:user-aborted","ABORTED");a.reject(b)}}),v=g.domNode;g.form_=c.byNode(n.query(".esriIdForm",v)[0]);g.txtUser_=c.byNode(n.query(".esriIdUser",v)[0]);g.txtPwd_=c.byNode(n.query(".esriIdPwd",v)[0]);g.btnSubmit_=c.byNode(n.query(".esriIdSubmit",
v)[0]);g.btnCancel_=c.byNode(n.query(".esriIdCancel",v)[0]);g.resLink_=n.query(".resLink",v)[0];g.serverLink_=n.query(".serverLink",v)[0];g.errMsg_=n.query(".esriErrorMsg",v)[0];g.connect(g.txtUser_,"onKeyPress",g.keypressed_);g.connect(g.txtPwd_,"onKeyPress",g.keypressed_);g.connect(g.btnSubmit_,"onClick",g.execute_);g.connect(g.btnCancel_,"onClick",g.onCancel);g.connect(g,"onCancel",g.cancel_);return g}})})},"dijit/registry":function(){define(["dojo/_base/array","dojo/_base/window","./main"],function(n,
m,g){var h={},d={},l={length:0,add:function(c){if(d[c.id])throw Error("Tried to register widget with id\x3d\x3d"+c.id+" but that id is already registered");d[c.id]=c;this.length++},remove:function(c){d[c]&&(delete d[c],this.length--)},byId:function(c){return"string"==typeof c?d[c]:c},byNode:function(c){return d[c.getAttribute("widgetId")]},toArray:function(){var c=[],k;for(k in d)c.push(d[k]);return c},getUniqueId:function(c){var k;do k=c+"_"+(c in h?++h[c]:h[c]=0);while(d[k]);return"dijit"==g._scopeName?
k:g._scopeName+"_"+k},findWidgets:function(c,k){function b(e){for(e=e.firstChild;e;e=e.nextSibling)if(1==e.nodeType){var c=e.getAttribute("widgetId");c?(c=d[c])&&a.push(c):e!==k&&b(e)}}var a=[];b(c);return a},_destroyAll:function(){g._curFocus=null;g._prevFocus=null;g._activeStack=[];n.forEach(l.findWidgets(m.body()),function(c){c._destroyed||(c.destroyRecursive?c.destroyRecursive():c.destroy&&c.destroy())})},getEnclosingWidget:function(c){for(;c;){var k=1==c.nodeType&&c.getAttribute("widgetId");
if(k)return d[k];c=c.parentNode}return null},_hash:d};return g.registry=l})},"dijit/main":function(){define(["dojo/_base/kernel"],function(n){return n.dijit})},"dijit/Dialog":function(){define("require dojo/_base/array dojo/aspect dojo/_base/declare dojo/Deferred dojo/dom dojo/dom-class dojo/dom-geometry dojo/dom-style dojo/_base/fx dojo/i18n dojo/keys dojo/_base/lang dojo/on dojo/ready dojo/sniff dojo/touch dojo/window dojo/dnd/Moveable dojo/dnd/TimedMoveable ./focus ./_base/manager ./_Widget ./_TemplatedMixin ./_CssStateMixin ./form/_FormMixin ./_DialogMixin ./DialogUnderlay ./layout/ContentPane ./layout/utils dojo/text!./templates/Dialog.html ./a11yclick dojo/i18n!./nls/common".split(" "),
function(n,m,g,h,d,l,c,k,b,a,e,u,w,v,A,r,G,D,x,t,y,p,z,F,E,B,f,q,H,N,Q){function I(){}var J=new d;J.resolve(!0);p=h("dijit._DialogBase"+(r("dojo-bidi")?"_NoBidi":""),[F,B,f,E],{templateString:Q,baseClass:"dijitDialog",cssStateNodes:{closeButtonNode:"dijitDialogCloseIcon"},_setTitleAttr:{node:"titleNode",type:"innerHTML"},open:!1,duration:p.defaultDuration,refocus:!0,autofocus:!0,_firstFocusItem:null,_lastFocusItem:null,draggable:!0,_setDraggableAttr:function(f){this._set("draggable",f)},maxRatio:.9,
closable:!0,_setClosableAttr:function(f){this.closeButtonNode.style.display=f?"":"none";this._set("closable",f)},postMixInProperties:function(){var f=e.getLocalization("dijit","common");w.mixin(this,f);this.inherited(arguments)},postCreate:function(){b.set(this.domNode,{display:"none",position:"absolute"});this.ownerDocumentBody.appendChild(this.domNode);this.inherited(arguments);g.after(this,"onExecute",w.hitch(this,"hide"),!0);g.after(this,"onCancel",w.hitch(this,"hide"),!0);v(this.closeButtonNode,
G.press,function(f){f.stopPropagation()});this._modalconnects=[]},onLoad:function(){this.resize();this._position();this.autofocus&&O.isTop(this)&&(this._getFocusItems(),y.focus(this._firstFocusItem));this.inherited(arguments)},focus:function(){this._getFocusItems();y.focus(this._firstFocusItem)},_endDrag:function(){var f=k.position(this.domNode),a=D.getBox(this.ownerDocument);f.y=Math.min(Math.max(f.y,0),a.h-f.h);f.x=Math.min(Math.max(f.x,0),a.w-f.w);this._relativePosition=f;this._position()},_setup:function(){var f=
this.domNode;this.titleBar&&this.draggable?(this._moveable=new (6==r("ie")?t:x)(f,{handle:this.titleBar}),g.after(this._moveable,"onMoveStop",w.hitch(this,"_endDrag"),!0)):c.add(f,"dijitDialogFixed");this.underlayAttrs={dialogId:this.id,"class":m.map(this["class"].split(/\s/),function(f){return f+"_underlay"}).join(" "),_onKeyDown:w.hitch(this,"_onKey"),ownerDocument:this.ownerDocument}},_size:function(){this.resize()},_position:function(){if(!c.contains(this.ownerDocumentBody,"dojoMove")){var f=
this.domNode,a=D.getBox(this.ownerDocument),q=this._relativePosition,e=k.position(f);b.set(f,{left:Math.floor(a.l+(q?Math.min(q.x,a.w-e.w):(a.w-e.w)/2))+"px",top:Math.floor(a.t+(q?Math.min(q.y,a.h-e.h):(a.h-e.h)/2))+"px"})}},_onKey:function(f){if(f.keyCode==u.TAB){this._getFocusItems();var a=f.target;this._firstFocusItem==this._lastFocusItem?(f.stopPropagation(),f.preventDefault()):a==this._firstFocusItem&&f.shiftKey?(y.focus(this._lastFocusItem),f.stopPropagation(),f.preventDefault()):a!=this._lastFocusItem||
f.shiftKey||(y.focus(this._firstFocusItem),f.stopPropagation(),f.preventDefault())}else this.closable&&f.keyCode==u.ESCAPE&&(this.onCancel(),f.stopPropagation(),f.preventDefault())},show:function(){if(this.open)return J.promise;this._started||this.startup();this._alreadyInitialized||(this._setup(),this._alreadyInitialized=!0);this._fadeOutDeferred&&(this._fadeOutDeferred.cancel(),O.hide(this));var f=D.get(this.ownerDocument);this._modalconnects.push(v(f,"scroll",w.hitch(this,"resize",null)));this._modalconnects.push(v(this.domNode,
"keydown",w.hitch(this,"_onKey")));b.set(this.domNode,{opacity:0,display:""});this._set("open",!0);this._onShow();this.resize();this._position();var q;this._fadeInDeferred=new d(w.hitch(this,function(){q.stop();delete this._fadeInDeferred}));this._fadeInDeferred.then(void 0,I);f=this._fadeInDeferred.promise;q=a.fadeIn({node:this.domNode,duration:this.duration,beforeBegin:w.hitch(this,function(){O.show(this,this.underlayAttrs)}),onEnd:w.hitch(this,function(){this.autofocus&&O.isTop(this)&&(this._getFocusItems(),
y.focus(this._firstFocusItem));this._fadeInDeferred.resolve(!0);delete this._fadeInDeferred})}).play();return f},hide:function(){if(!this._alreadyInitialized||!this.open)return J.promise;this._fadeInDeferred&&this._fadeInDeferred.cancel();var f;this._fadeOutDeferred=new d(w.hitch(this,function(){f.stop();delete this._fadeOutDeferred}));this._fadeOutDeferred.then(void 0,I);this._fadeOutDeferred.then(w.hitch(this,"onHide"));var q=this._fadeOutDeferred.promise;f=a.fadeOut({node:this.domNode,duration:this.duration,
onEnd:w.hitch(this,function(){this.domNode.style.display="none";O.hide(this);this._fadeOutDeferred.resolve(!0);delete this._fadeOutDeferred})}).play();this._scrollConnected&&(this._scrollConnected=!1);for(var e;e=this._modalconnects.pop();)e.remove();this._relativePosition&&delete this._relativePosition;this._set("open",!1);return q},resize:function(f){if("none"!=this.domNode.style.display){this._checkIfSingleChild();if(!f){this._shrunk&&(this._singleChild&&"undefined"!=typeof this._singleChildOriginalStyle&&
(this._singleChild.domNode.style.cssText=this._singleChildOriginalStyle,delete this._singleChildOriginalStyle),m.forEach([this.domNode,this.containerNode,this.titleBar,this.actionBarNode],function(f){f&&b.set(f,{position:"static",width:"auto",height:"auto"})}),this.domNode.style.position="absolute");var a=D.getBox(this.ownerDocument);a.w*=this.maxRatio;a.h*=this.maxRatio;var q=k.position(this.domNode);q.w>=a.w||q.h>=a.h?(f={w:Math.min(q.w,a.w),h:Math.min(q.h,a.h)},this._shrunk=!0):this._shrunk=!1}if(f){k.setMarginBox(this.domNode,
f);a=[];this.titleBar&&a.push({domNode:this.titleBar,region:"top"});this.actionBarNode&&a.push({domNode:this.actionBarNode,region:"bottom"});q={domNode:this.containerNode,region:"center"};a.push(q);var e=N.marginBox2contentBox(this.domNode,f);N.layoutChildren(this.domNode,e,a);this._singleChild?(a=N.marginBox2contentBox(this.containerNode,q),this._singleChild.resize({w:a.w,h:a.h})):(this.containerNode.style.overflow="auto",this._layoutChildren())}else this._layoutChildren();r("touch")||f||this._position()}},
_layoutChildren:function(){m.forEach(this.getChildren(),function(f){f.resize&&f.resize()})},destroy:function(){this._fadeInDeferred&&this._fadeInDeferred.cancel();this._fadeOutDeferred&&this._fadeOutDeferred.cancel();this._moveable&&this._moveable.destroy();for(var f;f=this._modalconnects.pop();)f.remove();O.hide(this);this.inherited(arguments)}});r("dojo-bidi")&&(p=h("dijit._DialogBase",p,{_setTitleAttr:function(f){this._set("title",f);this.titleNode.innerHTML=f;this.applyTextDir(this.titleNode)},
_setTextDirAttr:function(f){this._created&&this.textDir!=f&&(this._set("textDir",f),this.set("title",this.title))}}));var M=h("dijit.Dialog",[H,p],{});M._DialogBase=p;var O=M._DialogLevelManager={_beginZIndex:950,show:function(f,a){C[C.length-1].focus=y.curNode;var e=C[C.length-1].dialog?C[C.length-1].zIndex+2:M._DialogLevelManager._beginZIndex;b.set(f.domNode,"zIndex",e);q.show(a,e-1);C.push({dialog:f,underlayAttrs:a,zIndex:e})},hide:function(f){if(C[C.length-1].dialog==f){C.pop();var a=C[C.length-
1];1==C.length?q.hide():q.show(a.underlayAttrs,a.zIndex-1);if(f.refocus&&(f=a.focus,!a.dialog||f&&l.isDescendant(f,a.dialog.domNode)||(a.dialog._getFocusItems(),f=a.dialog._firstFocusItem),f))try{f.focus()}catch(S){}}else a=m.indexOf(m.map(C,function(f){return f.dialog}),f),-1!=a&&C.splice(a,1)},isTop:function(f){return C[C.length-1].dialog==f}},C=M._dialogStack=[{dialog:null,focus:null,underlayAttrs:null}];y.watch("curNode",function(f,a,q){f=C[C.length-1].dialog;if(q&&f&&!f._fadeOutDeferred&&q.ownerDocument==
f.ownerDocument){do if(q==f.domNode||c.contains(q,"dijitPopup"))return;while(q=q.parentNode);f.focus()}});r("dijit-legacy-requires")&&A(0,function(){n(["dijit/TooltipDialog"])});return M})},"dojo/touch":function(){define("./_base/kernel ./aspect ./dom ./dom-class ./_base/lang ./on ./has ./mouse ./domReady ./_base/window".split(" "),function(n,m,g,h,d,l,c,k,b,a){function e(a,q,e){return A&&e?function(f,a){return l(f,e,a)}:G?function(e,b){var c=l(e,q,function(a){b.call(this,a);f=(new Date).getTime()}),
d=l(e,a,function(a){(!f||(new Date).getTime()>f+1E3)&&b.call(this,a)});return{remove:function(){c.remove();d.remove()}}}:function(f,q){return l(f,a,q)}}function u(f){do if(void 0!==f.dojoClick)return f;while(f=f.parentNode)}function w(f,q,e){if(!k.isRight(f)){var b=u(f.target);if(x=!f.target.disabled&&b&&b.dojoClick)if(y=(t="useTarget"==x)?b:f.target,t&&f.preventDefault(),p=f.changedTouches?f.changedTouches[0].pageX-a.global.pageXOffset:f.clientX,z=f.changedTouches?f.changedTouches[0].pageY-a.global.pageYOffset:
f.clientY,F=("object"==typeof x?x.x:"number"==typeof x?x:0)||4,E=("object"==typeof x?x.y:"number"==typeof x?x:0)||4,!D){f=function(f){a.doc.addEventListener(f,function(a){var q=a.target;x&&!a._dojo_click&&(new Date).getTime()<=B+1E3&&("INPUT"!=q.tagName||!h.contains(q,"dijitOffScreen"))&&(a.stopPropagation(),a.stopImmediatePropagation&&a.stopImmediatePropagation(),"click"==f&&("INPUT"!=q.tagName||"radio"==q.type&&(h.contains(q,"dijitCheckBoxInput")||h.contains(q,"mblRadioButton"))||"checkbox"==q.type&&
(h.contains(q,"dijitCheckBoxInput")||h.contains(q,"mblCheckBox")))&&"TEXTAREA"!=q.tagName&&"AUDIO"!=q.tagName&&"VIDEO"!=q.tagName&&a.preventDefault())},!0)};var c=function(f){x=t?g.isDescendant(a.doc.elementFromPoint(f.changedTouches?f.changedTouches[0].pageX-a.global.pageXOffset:f.clientX,f.changedTouches?f.changedTouches[0].pageY-a.global.pageYOffset:f.clientY),y):x&&(f.changedTouches?f.changedTouches[0].target:f.target)==y&&Math.abs((f.changedTouches?f.changedTouches[0].pageX-a.global.pageXOffset:
f.clientX)-p)<=F&&Math.abs((f.changedTouches?f.changedTouches[0].pageY-a.global.pageYOffset:f.clientY)-z)<=E};D=!0;a.doc.addEventListener(q,function(f){k.isRight(f)||(c(f),t&&f.preventDefault())},!0);a.doc.addEventListener(e,function(f){if(!k.isRight(f)&&(c(f),x)){var a=function(a){var q=document.createEvent("MouseEvents");q._dojo_click=!0;q.initMouseEvent(a,!0,!0,f.view,f.detail,e.screenX,e.screenY,e.clientX,e.clientY,f.ctrlKey,f.altKey,f.shiftKey,f.metaKey,0,null);return q};B=(new Date).getTime();
var q=t?y:f.target;"LABEL"===q.tagName&&(q=g.byId(q.getAttribute("for"))||q);var e=f.changedTouches?f.changedTouches[0]:f,b=a("mousedown"),d=a("mouseup"),p=a("click");setTimeout(function(){l.emit(q,"mousedown",b);l.emit(q,"mouseup",d);l.emit(q,"click",p);B=(new Date).getTime()},0)}},!0);f("click");f("mousedown");f("mouseup")}}}var v=5>c("ios"),A=c("pointer-events")||c("MSPointer"),r=function(){var f={},a;for(a in{down:1,move:1,up:1,cancel:1,over:1,out:1})f[a]=c("MSPointer")?"MSPointer"+a.charAt(0).toUpperCase()+
a.slice(1):"pointer"+a;return f}(),G=c("touch-events"),D,x,t=!1,y,p,z,F,E,B,f,q;c("touch")&&(A?b(function(){a.doc.addEventListener(r.down,function(f){w(f,r.move,r.up)},!0)}):b(function(){function e(f){var a=d.delegate(f,{bubbles:!0});6<=c("ios")&&(a.touches=f.touches,a.altKey=f.altKey,a.changedTouches=f.changedTouches,a.ctrlKey=f.ctrlKey,a.metaKey=f.metaKey,a.shiftKey=f.shiftKey,a.targetTouches=f.targetTouches);return a}q=a.body();a.doc.addEventListener("touchstart",function(a){f=(new Date).getTime();
var e=q;q=a.target;l.emit(e,"dojotouchout",{relatedTarget:q,bubbles:!0});l.emit(q,"dojotouchover",{relatedTarget:e,bubbles:!0});w(a,"touchmove","touchend")},!0);l(a.doc,"touchmove",function(b){f=(new Date).getTime();var c=a.doc.elementFromPoint(b.pageX-(v?0:a.global.pageXOffset),b.pageY-(v?0:a.global.pageYOffset));c&&(q!==c&&(l.emit(q,"dojotouchout",{relatedTarget:c,bubbles:!0}),l.emit(c,"dojotouchover",{relatedTarget:q,bubbles:!0}),q=c),l.emit(c,"dojotouchmove",e(b))||b.preventDefault())});l(a.doc,
"touchend",function(q){f=(new Date).getTime();var b=a.doc.elementFromPoint(q.pageX-(v?0:a.global.pageXOffset),q.pageY-(v?0:a.global.pageYOffset))||a.body();l.emit(b,"dojotouchend",e(q))})}));m={press:e("mousedown","touchstart",r.down),move:e("mousemove","dojotouchmove",r.move),release:e("mouseup","dojotouchend",r.up),cancel:e(k.leave,"touchcancel",A?r.cancel:null),over:e("mouseover","dojotouchover",r.over),out:e("mouseout","dojotouchout",r.out),enter:k._eventHandler(e("mouseover","dojotouchover",
r.over)),leave:k._eventHandler(e("mouseout","dojotouchout",r.out))};return n.touch=m})},"dojo/window":function(){define("./_base/lang ./sniff ./_base/window ./dom ./dom-geometry ./dom-style ./dom-construct".split(" "),function(n,m,g,h,d,l,c){m.add("rtl-adjust-position-for-verticalScrollBar",function(b,a){b=g.body(a);a=c.create("div",{style:{overflow:"scroll",overflowX:"visible",direction:"rtl",visibility:"hidden",position:"absolute",left:"0",top:"0",width:"64px",height:"64px"}},b,"last");var e=c.create("div",
{style:{overflow:"hidden",direction:"ltr"}},a,"last"),k=0!=d.position(e).x;a.removeChild(e);b.removeChild(a);return k});m.add("position-fixed-support",function(b,a){b=g.body(a);a=c.create("span",{style:{visibility:"hidden",position:"fixed",left:"1px",top:"1px"}},b,"last");var e=c.create("span",{style:{position:"fixed",left:"0",top:"0"}},a,"last"),k=d.position(e).x!=d.position(a).x;a.removeChild(e);b.removeChild(a);return k});var k={getBox:function(b){b=b||g.doc;var a="BackCompat"==b.compatMode?g.body(b):
b.documentElement,e=d.docScroll(b);if(m("touch")){var c=k.get(b);b=c.innerWidth||a.clientWidth;a=c.innerHeight||a.clientHeight}else b=a.clientWidth,a=a.clientHeight;return{l:e.x,t:e.y,w:b,h:a}},get:function(b){if(m("ie")&&k!==document.parentWindow){b.parentWindow.execScript("document._parentWindow \x3d window;","Javascript");var a=b._parentWindow;b._parentWindow=null;return a}return b.parentWindow||b.defaultView},scrollIntoView:function(b,a){try{b=h.byId(b);var e=b.ownerDocument||g.doc,c=g.body(e),
k=e.documentElement||c.parentNode,v=m("ie")||m("trident"),A=m("webkit");if(b!=c&&b!=k)if(!(m("mozilla")||v||A||m("opera")||m("trident")||m("edge"))&&"scrollIntoView"in b)b.scrollIntoView(!1);else{var r="BackCompat"==e.compatMode,G=Math.min(c.clientWidth||k.clientWidth,k.clientWidth||c.clientWidth),n=Math.min(c.clientHeight||k.clientHeight,k.clientHeight||c.clientHeight),e=A||r?c:k,x=a||d.position(b),t=b.parentNode;a=function(f){return 6>=v||7==v&&r?!1:m("position-fixed-support")&&"fixed"==l.get(f,
"position").toLowerCase()};var y=this,A=function(f,a,q){"BODY"==f.tagName||"HTML"==f.tagName?y.get(f.ownerDocument).scrollBy(a,q):(a&&(f.scrollLeft+=a),q&&(f.scrollTop+=q))};if(!a(b))for(;t;){t==c&&(t=e);var p=d.position(t),z=a(t),F="rtl"==l.getComputedStyle(t).direction.toLowerCase();if(t==e)p.w=G,p.h=n,e==k&&(v||m("trident"))&&F&&(p.x+=e.offsetWidth-p.w),p.x=0,p.y=0;else{var E=d.getPadBorderExtents(t);p.w-=E.w;p.h-=E.h;p.x+=E.l;p.y+=E.t;var B=t.clientWidth,f=p.w-B;0<B&&0<f&&(F&&m("rtl-adjust-position-for-verticalScrollBar")&&
(p.x+=f),p.w=B);B=t.clientHeight;f=p.h-B;0<B&&0<f&&(p.h=B)}z&&(0>p.y&&(p.h+=p.y,p.y=0),0>p.x&&(p.w+=p.x,p.x=0),p.y+p.h>n&&(p.h=n-p.y),p.x+p.w>G&&(p.w=G-p.x));var q=x.x-p.x,H=x.y-p.y,N=q+x.w-p.w,Q=H+x.h-p.h,I,J;0<N*q&&(t.scrollLeft||t==e||t.scrollWidth>t.offsetHeight)&&(I=Math[0>q?"max":"min"](q,N),F&&(8==v&&!r||5<=m("trident"))&&(I=-I),J=t.scrollLeft,A(t,I,0),I=t.scrollLeft-J,x.x-=I);0<Q*H&&(t.scrollTop||t==e||t.scrollHeight>t.offsetHeight)&&(I=Math.ceil(Math[0>H?"max":"min"](H,Q)),J=t.scrollTop,
A(t,0,I),I=t.scrollTop-J,x.y-=I);t=t!=e&&!z&&t.parentNode}}}catch(M){console.error("scrollIntoView: "+M),b.scrollIntoView(!1)}}};n.setObject("dojo.window",k);return k})},"dojo/dnd/Moveable":function(){define("../_base/array ../_base/declare ../_base/lang ../dom ../dom-class ../Evented ../has ../on ../topic ../touch ./common ./Mover ../_base/window".split(" "),function(n,m,g,h,d,l,c,k,b,a,e,u,w){function v(a,e){"touchAction"in document.body.style?A="touchAction":"msTouchAction"in document.body.style&&
(A="msTouchAction");r=function(a,e){a.style[A]=e};r(a,e)}var A,r=function(){};c("touch-action")&&(r=v);return m("dojo.dnd.Moveable",[l],{handle:"",delay:0,skip:!1,constructor:function(e,b){this.node=h.byId(e);r(this.node,"none");b||(b={});this.handle=b.handle?h.byId(b.handle):null;this.handle||(this.handle=this.node);this.delay=0<b.delay?b.delay:0;this.skip=b.skip;this.mover=b.mover?b.mover:u;this.events=[k(this.handle,a.press,g.hitch(this,"onMouseDown")),k(this.handle,"dragstart",g.hitch(this,"onSelectStart")),
k(this.handle,"selectstart",g.hitch(this,"onSelectStart"))]},markupFactory:function(a,e,b){return new b(e,a)},destroy:function(){n.forEach(this.events,function(a){a.remove()});r(this.node,"");this.events=this.node=this.handle=null},onMouseDown:function(b){if(!this.skip||!e.isFormElement(b)){if(this.delay)this.events.push(k(this.handle,a.move,g.hitch(this,"onMouseMove")),k(this.handle.ownerDocument,a.release,g.hitch(this,"onMouseUp"))),this._lastX=b.pageX,this._lastY=b.pageY;else this.onDragDetected(b);
b.stopPropagation();b.preventDefault()}},onMouseMove:function(a){if(Math.abs(a.pageX-this._lastX)>this.delay||Math.abs(a.pageY-this._lastY)>this.delay)this.onMouseUp(a),this.onDragDetected(a);a.stopPropagation();a.preventDefault()},onMouseUp:function(a){for(var e=0;2>e;++e)this.events.pop().remove();a.stopPropagation();a.preventDefault()},onSelectStart:function(a){this.skip&&e.isFormElement(a)||(a.stopPropagation(),a.preventDefault())},onDragDetected:function(a){new this.mover(this.node,a,this)},
onMoveStart:function(a){b.publish("/dnd/move/start",a);d.add(w.body(),"dojoMove");d.add(this.node,"dojoMoveItem")},onMoveStop:function(a){b.publish("/dnd/move/stop",a);d.remove(w.body(),"dojoMove");d.remove(this.node,"dojoMoveItem")},onFirstMove:function(){},onMove:function(a,e){this.onMoving(a,e);var b=a.node.style;b.left=e.l+"px";b.top=e.t+"px";this.onMoved(a,e)},onMoving:function(){},onMoved:function(){}})})},"dojo/dnd/common":function(){define(["../sniff","../_base/kernel","../_base/lang","../dom"],
function(n,m,g,h){var d=g.getObject("dojo.dnd",!0);d.getCopyKeyState=function(d){return d[n("mac")?"metaKey":"ctrlKey"]};d._uniqueId=0;d.getUniqueId=function(){var g;do g=m._scopeName+"Unique"+ ++d._uniqueId;while(h.byId(g));return g};d._empty={};d.isFormElement=function(d){d=d.target;3==d.nodeType&&(d=d.parentNode);return 0<=" a button textarea input select option ".indexOf(" "+d.tagName.toLowerCase()+" ")};return d})},"dojo/dnd/Mover":function(){define("../_base/array ../_base/declare ../_base/lang ../sniff ../_base/window ../dom ../dom-geometry ../dom-style ../Evented ../on ../touch ./common ./autoscroll".split(" "),
function(n,m,g,h,d,l,c,k,b,a,e,u,w){return m("dojo.dnd.Mover",[b],{constructor:function(b,c,d){function k(a){a.preventDefault();a.stopPropagation()}this.node=l.byId(b);this.marginBox={l:c.pageX,t:c.pageY};this.mouseButton=c.button;c=this.host=d;b=b.ownerDocument;this.events=[a(b,e.move,g.hitch(this,"onFirstMove")),a(b,e.move,g.hitch(this,"onMouseMove")),a(b,e.release,g.hitch(this,"onMouseUp")),a(b,"dragstart",k),a(b.body,"selectstart",k)];w.autoScrollStart(b);if(c&&c.onMoveStart)c.onMoveStart(this)},
onMouseMove:function(a){w.autoScroll(a);var b=this.marginBox;this.host.onMove(this,{l:b.l+a.pageX,t:b.t+a.pageY},a);a.preventDefault();a.stopPropagation()},onMouseUp:function(a){(h("webkit")&&h("mac")&&2==this.mouseButton?0==a.button:this.mouseButton==a.button)&&this.destroy();a.preventDefault();a.stopPropagation()},onFirstMove:function(a){var b=this.node.style,e,h=this.host;switch(b.position){case "relative":case "absolute":e=Math.round(parseFloat(b.left))||0;b=Math.round(parseFloat(b.top))||0;break;
default:b.position="absolute";b=c.getMarginBox(this.node);e=d.doc.body;var g=k.getComputedStyle(e),u=c.getMarginBox(e,g),g=c.getContentBox(e,g);e=b.l-(g.l-u.l);b=b.t-(g.t-u.t)}this.marginBox.l=e-this.marginBox.l;this.marginBox.t=b-this.marginBox.t;if(h&&h.onFirstMove)h.onFirstMove(this,a);this.events.shift().remove()},destroy:function(){n.forEach(this.events,function(a){a.remove()});var a=this.host;if(a&&a.onMoveStop)a.onMoveStop(this);this.events=this.node=this.host=null}})})},"dojo/dnd/autoscroll":function(){define("../_base/lang ../sniff ../_base/window ../dom-geometry ../dom-style ../window".split(" "),
function(n,m,g,h,d,l){var c={};n.setObject("dojo.dnd.autoscroll",c);c.getViewport=l.getBox;c.V_TRIGGER_AUTOSCROLL=32;c.H_TRIGGER_AUTOSCROLL=32;c.V_AUTOSCROLL_VALUE=16;c.H_AUTOSCROLL_VALUE=16;var k,b=g.doc,a=Infinity,e=Infinity;c.autoScrollStart=function(c){b=c;k=l.getBox(b);c=g.body(b).parentNode;a=Math.max(c.scrollHeight-k.h,0);e=Math.max(c.scrollWidth-k.w,0)};c.autoScroll=function(d){var h=k||l.getBox(b),u=g.body(b).parentNode,m=0,r=0;d.clientX<c.H_TRIGGER_AUTOSCROLL?m=-c.H_AUTOSCROLL_VALUE:d.clientX>
h.w-c.H_TRIGGER_AUTOSCROLL&&(m=Math.min(c.H_AUTOSCROLL_VALUE,e-u.scrollLeft));d.clientY<c.V_TRIGGER_AUTOSCROLL?r=-c.V_AUTOSCROLL_VALUE:d.clientY>h.h-c.V_TRIGGER_AUTOSCROLL&&(r=Math.min(c.V_AUTOSCROLL_VALUE,a-u.scrollTop));window.scrollBy(m,r)};c._validNodes={div:1,p:1,td:1};c._validOverflow={auto:1,scroll:1};c.autoScrollNodes=function(a){for(var b,e,k,l,u,n=0,x=0,t=a.target;t;){if(1==t.nodeType&&t.tagName.toLowerCase()in c._validNodes){k=d.getComputedStyle(t);u=k.overflowX.toLowerCase()in c._validOverflow;
l=k.overflowY.toLowerCase()in c._validOverflow;if(u||l)b=h.getContentBox(t,k),e=h.position(t,!0);if(u){k=Math.min(c.H_TRIGGER_AUTOSCROLL,b.w/2);u=a.pageX-e.x;if(m("webkit")||m("opera"))u+=g.body().scrollLeft;n=0;0<u&&u<b.w&&(u<k?n=-k:u>b.w-k&&(n=k),t.scrollLeft+=n)}if(l){l=Math.min(c.V_TRIGGER_AUTOSCROLL,b.h/2);k=a.pageY-e.y;if(m("webkit")||m("opera"))k+=g.body().scrollTop;x=0;0<k&&k<b.h&&(k<l?x=-l:k>b.h-l&&(x=l),t.scrollTop+=x)}if(n||x)return}try{t=t.parentNode}catch(y){t=null}}c.autoScroll(a)};
return c})},"dojo/dnd/TimedMoveable":function(){define(["../_base/declare","./Moveable"],function(n,m){var g=m.prototype.onMove;return n("dojo.dnd.TimedMoveable",m,{timeout:40,constructor:function(h,d){d||(d={});d.timeout&&"number"==typeof d.timeout&&0<=d.timeout&&(this.timeout=d.timeout)},onMoveStop:function(h){h._timer&&(clearTimeout(h._timer),g.call(this,h,h._leftTop));m.prototype.onMoveStop.apply(this,arguments)},onMove:function(h,d){h._leftTop=d;if(!h._timer){var l=this;h._timer=setTimeout(function(){h._timer=
null;g.call(l,h,h._leftTop)},this.timeout)}}})})},"dijit/focus":function(){define("dojo/aspect dojo/_base/declare dojo/dom dojo/dom-attr dojo/dom-class dojo/dom-construct dojo/Evented dojo/_base/lang dojo/on dojo/domReady dojo/sniff dojo/Stateful dojo/_base/window dojo/window ./a11y ./registry ./main".split(" "),function(n,m,g,h,d,l,c,k,b,a,e,u,w,v,A,r,G){var D,x,t=new (m([u,c],{curNode:null,activeStack:[],constructor:function(){var a=k.hitch(this,function(a){g.isDescendant(this.curNode,a)&&this.set("curNode",
null);g.isDescendant(this.prevNode,a)&&this.set("prevNode",null)});n.before(l,"empty",a);n.before(l,"destroy",a)},registerIframe:function(a){return this.registerWin(a.contentWindow,a)},registerWin:function(a,c){var k=this,d=a.document&&a.document.body;if(d){var p=e("pointer-events")?"pointerdown":e("MSPointer")?"MSPointerDown":e("touch-events")?"mousedown, touchstart":"mousedown",f=b(a.document,p,function(f){f&&f.target&&null==f.target.parentNode||k._onTouchNode(c||f.target,"mouse")}),q=b(d,"focusin",
function(f){if(f.target.tagName){var a=f.target.tagName.toLowerCase();"#document"!=a&&"body"!=a&&(A.isFocusable(f.target)?k._onFocusNode(c||f.target):k._onTouchNode(c||f.target))}}),h=b(d,"focusout",function(f){k._onBlurNode(c||f.target)});return{remove:function(){f.remove();q.remove();h.remove();d=f=q=h=null}}}},_onBlurNode:function(a){a=(new Date).getTime();a<D+100||(this._clearFocusTimer&&clearTimeout(this._clearFocusTimer),this._clearFocusTimer=setTimeout(k.hitch(this,function(){this.set("prevNode",
this.curNode);this.set("curNode",null)}),0),this._clearActiveWidgetsTimer&&clearTimeout(this._clearActiveWidgetsTimer),a<x+100||(this._clearActiveWidgetsTimer=setTimeout(k.hitch(this,function(){delete this._clearActiveWidgetsTimer;this._setStack([])}),0)))},_onTouchNode:function(a,b){x=(new Date).getTime();this._clearActiveWidgetsTimer&&(clearTimeout(this._clearActiveWidgetsTimer),delete this._clearActiveWidgetsTimer);d.contains(a,"dijitPopup")&&(a=a.firstChild);var e=[];try{for(;a;){var c=h.get(a,
"dijitPopupParent");if(c)a=r.byId(c).domNode;else if(a.tagName&&"body"==a.tagName.toLowerCase()){if(a===w.body())break;a=v.get(a.ownerDocument).frameElement}else{var k=a.getAttribute&&a.getAttribute("widgetId"),f=k&&r.byId(k);!f||"mouse"==b&&f.get("disabled")||e.unshift(k);a=a.parentNode}}}catch(q){}this._setStack(e,b)},_onFocusNode:function(a){a&&9!=a.nodeType&&(D=(new Date).getTime(),this._clearFocusTimer&&(clearTimeout(this._clearFocusTimer),delete this._clearFocusTimer),this._onTouchNode(a),a!=
this.curNode&&(this.set("prevNode",this.curNode),this.set("curNode",a)))},_setStack:function(a,b){var e=this.activeStack,c=e.length-1,k=a.length-1;if(a[k]!=e[c]){this.set("activeStack",a);var f;for(f=c;0<=f&&e[f]!=a[f];f--)if(c=r.byId(e[f]))c._hasBeenBlurred=!0,c.set("focused",!1),c._focusManager==this&&c._onBlur(b),this.emit("widget-blur",c,b);for(f++;f<=k;f++)if(c=r.byId(a[f]))c.set("focused",!0),c._focusManager==this&&c._onFocus(b),this.emit("widget-focus",c,b)}},focus:function(a){if(a)try{a.focus()}catch(z){}}}));
a(function(){var a=t.registerWin(v.get(document));e("ie")&&b(window,"unload",function(){a&&(a.remove(),a=null)})});G.focus=function(a){t.focus(a)};for(var y in t)/^_/.test(y)||(G.focus[y]="function"==typeof t[y]?k.hitch(t,y):t[y]);t.watch(function(a,b,e){G.focus[a]=e});return t})},"dojo/Stateful":function(){define(["./_base/declare","./_base/lang","./_base/array","./when"],function(n,m,g,h){return n("dojo.Stateful",null,{_attrPairNames:{},_getAttrNames:function(d){var h=this._attrPairNames;return h[d]?
h[d]:h[d]={s:"_"+d+"Setter",g:"_"+d+"Getter"}},postscript:function(d){d&&this.set(d)},_get:function(d,h){return"function"===typeof this[h.g]?this[h.g]():this[d]},get:function(d){return this._get(d,this._getAttrNames(d))},set:function(d,g){if("object"===typeof d){for(var c in d)d.hasOwnProperty(c)&&"_watchCallbacks"!=c&&this.set(c,d[c]);return this}c=this._getAttrNames(d);var k=this._get(d,c);c=this[c.s];var b;"function"===typeof c?b=c.apply(this,Array.prototype.slice.call(arguments,1)):this[d]=g;
if(this._watchCallbacks){var a=this;h(b,function(){a._watchCallbacks(d,k,g)})}return this},_changeAttrValue:function(d,h){var c=this.get(d);this[d]=h;this._watchCallbacks&&this._watchCallbacks(d,c,h);return this},watch:function(d,h){var c=this._watchCallbacks;if(!c)var k=this,c=this._watchCallbacks=function(a,b,d,h){var e=function(e){if(e){e=e.slice();for(var c=0,h=e.length;c<h;c++)e[c].call(k,a,b,d)}};e(c["_"+a]);h||e(c["*"])};h||"function"!==typeof d?d="_"+d:(h=d,d="*");var b=c[d];"object"!==typeof b&&
(b=c[d]=[]);b.push(h);d={};d.unwatch=d.remove=function(){var a=g.indexOf(b,h);-1<a&&b.splice(a,1)};return d}})})},"dijit/a11y":function(){define("dojo/_base/array dojo/dom dojo/dom-attr dojo/dom-style dojo/_base/lang dojo/sniff ./main".split(" "),function(n,m,g,h,d,l,c){var k={_isElementShown:function(b){var a=h.get(b);return"hidden"!=a.visibility&&"collapsed"!=a.visibility&&"none"!=a.display&&"hidden"!=g.get(b,"type")},hasDefaultTabStop:function(b){switch(b.nodeName.toLowerCase()){case "a":return g.has(b,
"href");case "area":case "button":case "input":case "object":case "select":case "textarea":return!0;case "iframe":var a;try{var e=b.contentDocument;if("designMode"in e&&"on"==e.designMode)return!0;a=e.body}catch(u){try{a=b.contentWindow.document.body}catch(w){return!1}}return a&&("true"==a.contentEditable||a.firstChild&&"true"==a.firstChild.contentEditable);default:return"true"==b.contentEditable}},effectiveTabIndex:function(b){if(!g.get(b,"disabled"))return g.has(b,"tabIndex")?+g.get(b,"tabIndex"):
k.hasDefaultTabStop(b)?0:void 0},isTabNavigable:function(b){return 0<=k.effectiveTabIndex(b)},isFocusable:function(b){return-1<=k.effectiveTabIndex(b)},_getTabNavigable:function(b){function a(a){return a&&"input"==a.tagName.toLowerCase()&&a.type&&"radio"==a.type.toLowerCase()&&a.name&&a.name.toLowerCase()}function e(b){return D[a(b)]||b}var c,d,h,m,r,n,D={},x=k._isElementShown,t=k.effectiveTabIndex,y=function(b){for(b=b.firstChild;b;b=b.nextSibling)if(!(1!=b.nodeType||9>=l("ie")&&"HTML"!==b.scopeName)&&
x(b)){var e=t(b);if(0<=e){if(0==e)c||(c=b),d=b;else if(0<e){if(!h||e<m)m=e,h=b;if(!r||e>=n)n=e,r=b}e=a(b);g.get(b,"checked")&&e&&(D[e]=b)}"SELECT"!=b.nodeName.toUpperCase()&&y(b)}};x(b)&&y(b);return{first:e(c),last:e(d),lowest:e(h),highest:e(r)}},getFirstInTabbingOrder:function(b,a){b=k._getTabNavigable(m.byId(b,a));return b.lowest?b.lowest:b.first},getLastInTabbingOrder:function(b,a){b=k._getTabNavigable(m.byId(b,a));return b.last?b.last:b.highest}};d.mixin(c,k);return k})},"dijit/_base/manager":function(){define(["dojo/_base/array",
"dojo/_base/config","dojo/_base/lang","../registry","../main"],function(n,m,g,h,d){var l={};n.forEach("byId getUniqueId findWidgets _destroyAll byNode getEnclosingWidget".split(" "),function(c){l[c]=h[c]});g.mixin(l,{defaultDuration:m.defaultDuration||200});g.mixin(d,l);return d})},"dijit/_Widget":function(){define("dojo/aspect dojo/_base/config dojo/_base/connect dojo/_base/declare dojo/has dojo/_base/kernel dojo/_base/lang dojo/query dojo/ready ./registry ./_WidgetBase ./_OnDijitClickMixin ./_FocusMixin dojo/uacss ./hccss".split(" "),
function(n,m,g,h,d,l,c,k,b,a,e,u,w){function v(){}function A(a){return function(b,e,k,d){return b&&"string"==typeof e&&b[e]==v?b.on(e.substring(2).toLowerCase(),c.hitch(k,d)):a.apply(g,arguments)}}n.around(g,"connect",A);l.connect&&n.around(l,"connect",A);n=h("dijit._Widget",[e,u,w],{onClick:v,onDblClick:v,onKeyDown:v,onKeyPress:v,onKeyUp:v,onMouseDown:v,onMouseMove:v,onMouseOut:v,onMouseOver:v,onMouseLeave:v,onMouseEnter:v,onMouseUp:v,constructor:function(a){this._toConnect={};for(var b in a)this[b]===
v&&(this._toConnect[b.replace(/^on/,"").toLowerCase()]=a[b],delete a[b])},postCreate:function(){this.inherited(arguments);for(var a in this._toConnect)this.on(a,this._toConnect[a]);delete this._toConnect},on:function(a,b){return this[this._onMap(a)]===v?g.connect(this.domNode,a.toLowerCase(),this,b):this.inherited(arguments)},_setFocusedAttr:function(a){this._focused=a;this._set("focused",a)},setAttribute:function(a,b){l.deprecated(this.declaredClass+"::setAttribute(attr, value) is deprecated. Use set() instead.",
"","2.0");this.set(a,b)},attr:function(a,b){return 2<=arguments.length||"object"===typeof a?this.set.apply(this,arguments):this.get(a)},getDescendants:function(){l.deprecated(this.declaredClass+"::getDescendants() is deprecated. Use getChildren() instead.","","2.0");return this.containerNode?k("[widgetId]",this.containerNode).map(a.byNode):[]},_onShow:function(){this.onShow()},onShow:function(){},onHide:function(){},onClose:function(){return!0}});d("dijit-legacy-requires")&&b(0,function(){require(["dijit/_base"])});
return n})},"dijit/_WidgetBase":function(){define("require dojo/_base/array dojo/aspect dojo/_base/config dojo/_base/connect dojo/_base/declare dojo/dom dojo/dom-attr dojo/dom-class dojo/dom-construct dojo/dom-geometry dojo/dom-style dojo/has dojo/_base/kernel dojo/_base/lang dojo/on dojo/ready dojo/Stateful dojo/topic dojo/_base/window ./Destroyable dojo/has!dojo-bidi?./_BidiMixin ./registry".split(" "),function(n,m,g,h,d,l,c,k,b,a,e,u,w,v,A,r,G,D,x,t,y,p,z){function F(a){return function(f){k[f?
"set":"remove"](this.domNode,a,f);this._set(a,f)}}w.add("dijit-legacy-requires",!v.isAsync);w.add("dojo-bidi",!1);w("dijit-legacy-requires")&&G(0,function(){n(["dijit/_base/manager"])});var E={};h=l("dijit._WidgetBase",[D,y],{id:"",_setIdAttr:"domNode",lang:"",_setLangAttr:F("lang"),dir:"",_setDirAttr:F("dir"),"class":"",_setClassAttr:{node:"domNode",type:"class"},_setTypeAttr:null,style:"",title:"",tooltip:"",baseClass:"",srcNodeRef:null,domNode:null,containerNode:null,ownerDocument:null,_setOwnerDocumentAttr:function(a){this._set("ownerDocument",
a)},attributeMap:{},_blankGif:h.blankGif||n.toUrl("dojo/resources/blank.gif"),textDir:"",_introspect:function(){var a=this.constructor;if(!a._setterAttrs){var f=a.prototype,b=a._setterAttrs=[],a=a._onMap={},e;for(e in f.attributeMap)b.push(e);for(e in f)/^on/.test(e)&&(a[e.substring(2).toLowerCase()]=e),/^_set[A-Z](.*)Attr$/.test(e)&&(e=e.charAt(4).toLowerCase()+e.substr(5,e.length-9),f.attributeMap&&e in f.attributeMap||b.push(e))}},postscript:function(a,f){this.create(a,f)},create:function(a,f){this._introspect();
this.srcNodeRef=c.byId(f);this._connects=[];this._supportingWidgets=[];this.srcNodeRef&&this.srcNodeRef.id&&"string"==typeof this.srcNodeRef.id&&(this.id=this.srcNodeRef.id);a&&(this.params=a,A.mixin(this,a));this.postMixInProperties();this.id||(this.id=z.getUniqueId(this.declaredClass.replace(/\./g,"_")),this.params&&delete this.params.id);this.ownerDocument=this.ownerDocument||(this.srcNodeRef?this.srcNodeRef.ownerDocument:document);this.ownerDocumentBody=t.body(this.ownerDocument);z.add(this);
this.buildRendering();var b;this.domNode&&(this._applyAttributes(),(a=this.srcNodeRef)&&a.parentNode&&this.domNode!==a&&(a.parentNode.replaceChild(this.domNode,a),b=!0),this.domNode.setAttribute("widgetId",this.id));this.postCreate();b&&delete this.srcNodeRef;this._created=!0},_applyAttributes:function(){var a={},f;for(f in this.params||{})a[f]=this._get(f);m.forEach(this.constructor._setterAttrs,function(f){if(!(f in a)){var b=this._get(f);b&&this.set(f,b)}},this);for(f in a)this.set(f,a[f])},postMixInProperties:function(){},
buildRendering:function(){this.domNode||(this.domNode=this.srcNodeRef||this.ownerDocument.createElement("div"));if(this.baseClass){var a=this.baseClass.split(" ");this.isLeftToRight()||(a=a.concat(m.map(a,function(f){return f+"Rtl"})));b.add(this.domNode,a)}},postCreate:function(){},startup:function(){this._started||(this._started=!0,m.forEach(this.getChildren(),function(a){a._started||a._destroyed||!A.isFunction(a.startup)||(a.startup(),a._started=!0)}))},destroyRecursive:function(a){this._beingDestroyed=
!0;this.destroyDescendants(a);this.destroy(a)},destroy:function(a){function f(f){f.destroyRecursive?f.destroyRecursive(a):f.destroy&&f.destroy(a)}this._beingDestroyed=!0;this.uninitialize();m.forEach(this._connects,A.hitch(this,"disconnect"));m.forEach(this._supportingWidgets,f);this.domNode&&m.forEach(z.findWidgets(this.domNode,this.containerNode),f);this.destroyRendering(a);z.remove(this.id);this._destroyed=!0},destroyRendering:function(b){this.bgIframe&&(this.bgIframe.destroy(b),delete this.bgIframe);
this.domNode&&(b?k.remove(this.domNode,"widgetId"):a.destroy(this.domNode),delete this.domNode);this.srcNodeRef&&(b||a.destroy(this.srcNodeRef),delete this.srcNodeRef)},destroyDescendants:function(a){m.forEach(this.getChildren(),function(f){f.destroyRecursive&&f.destroyRecursive(a)})},uninitialize:function(){return!1},_setStyleAttr:function(a){var f=this.domNode;A.isObject(a)?u.set(f,a):f.style.cssText=f.style.cssText?f.style.cssText+("; "+a):a;this._set("style",a)},_attrToDom:function(a,f,e){e=3<=
arguments.length?e:this.attributeMap[a];m.forEach(A.isArray(e)?e:[e],function(e){var q=this[e.node||e||"domNode"];switch(e.type||"attribute"){case "attribute":A.isFunction(f)&&(f=A.hitch(this,f));e=e.attribute?e.attribute:/^on[A-Z][a-zA-Z]*$/.test(a)?a.toLowerCase():a;q.tagName?k.set(q,e,f):q.set(e,f);break;case "innerText":q.innerHTML="";q.appendChild(this.ownerDocument.createTextNode(f));break;case "innerHTML":q.innerHTML=f;break;case "class":b.replace(q,f,this[a]);break;case "toggleClass":b.toggle(q,
e.className||a,f)}},this)},get:function(a){var f=this._getAttrNames(a);return this[f.g]?this[f.g]():this._get(a)},set:function(a,f){if("object"===typeof a){for(var b in a)this.set(b,a[b]);return this}b=this._getAttrNames(a);var e=this[b.s];if(A.isFunction(e))var c=e.apply(this,Array.prototype.slice.call(arguments,1));else{var e=this.focusNode&&!A.isFunction(this.focusNode)?"focusNode":"domNode",k=this[e]&&this[e].tagName,d;if((d=k)&&!(d=E[k])){d=this[e];var h={},g;for(g in d)h[g.toLowerCase()]=!0;
d=E[k]=h}g=d;b=a in this.attributeMap?this.attributeMap[a]:b.s in this?this[b.s]:g&&b.l in g&&"function"!=typeof f||/^aria-|^data-|^role$/.test(a)?e:null;null!=b&&this._attrToDom(a,f,b);this._set(a,f)}return c||this},_attrPairNames:{},_getAttrNames:function(a){var f=this._attrPairNames;if(f[a])return f[a];var b=a.replace(/^[a-z]|-[a-zA-Z]/g,function(a){return a.charAt(a.length-1).toUpperCase()});return f[a]={n:a+"Node",s:"_set"+b+"Attr",g:"_get"+b+"Attr",l:b.toLowerCase()}},_set:function(a,f){var b=
this[a];this[a]=f;!this._created||b===f||b!==b&&f!==f||(this._watchCallbacks&&this._watchCallbacks(a,b,f),this.emit("attrmodified-"+a,{detail:{prevValue:b,newValue:f}}))},_get:function(a){return this[a]},emit:function(a,f,b){f=f||{};void 0===f.bubbles&&(f.bubbles=!0);void 0===f.cancelable&&(f.cancelable=!0);f.detail||(f.detail={});f.detail.widget=this;var e,q=this["on"+a];q&&(e=q.apply(this,b?b:[f]));this._started&&!this._beingDestroyed&&r.emit(this.domNode,a.toLowerCase(),f);return e},on:function(a,
f){var b=this._onMap(a);return b?g.after(this,b,f,!0):this.own(r(this.domNode,a,f))[0]},_onMap:function(a){var f=this.constructor,b=f._onMap;if(!b){var b=f._onMap={},e;for(e in f.prototype)/^on/.test(e)&&(b[e.replace(/^on/,"").toLowerCase()]=e)}return b["string"==typeof a&&a.toLowerCase()]},toString:function(){return"[Widget "+this.declaredClass+", "+(this.id||"NO ID")+"]"},getChildren:function(){return this.containerNode?z.findWidgets(this.containerNode):[]},getParent:function(){return z.getEnclosingWidget(this.domNode.parentNode)},
connect:function(a,f,b){return this.own(d.connect(a,f,this,b))[0]},disconnect:function(a){a.remove()},subscribe:function(a,f){return this.own(x.subscribe(a,A.hitch(this,f)))[0]},unsubscribe:function(a){a.remove()},isLeftToRight:function(){return this.dir?"ltr"==this.dir.toLowerCase():e.isBodyLtr(this.ownerDocument)},isFocusable:function(){return this.focus&&"none"!=u.get(this.domNode,"display")},placeAt:function(b,f){var e=!b.tagName&&z.byId(b);!e||!e.addChild||f&&"number"!==typeof f?(b=e&&"domNode"in
e?e.containerNode&&!/after|before|replace/.test(f||"")?e.containerNode:e.domNode:c.byId(b,this.ownerDocument),a.place(this.domNode,b,f),!this._started&&(this.getParent()||{})._started&&this.startup()):e.addChild(this,f);return this},defer:function(a,f){var b=setTimeout(A.hitch(this,function(){b&&(b=null,this._destroyed||A.hitch(this,a)())}),f||0);return{remove:function(){b&&(clearTimeout(b),b=null);return null}}}});w("dojo-bidi")&&h.extend(p);return h})},"dijit/Destroyable":function(){define(["dojo/_base/array",
"dojo/aspect","dojo/_base/declare"],function(n,m,g){return g("dijit.Destroyable",null,{destroy:function(h){this._destroyed=!0},own:function(){var h=["destroyRecursive","destroy","remove"];n.forEach(arguments,function(d){function g(){k.remove();n.forEach(b,function(a){a.remove()})}var c,k=m.before(this,"destroy",function(a){d[c](a)}),b=[];d.then?(c="cancel",d.then(g,g)):n.forEach(h,function(a){"function"===typeof d[a]&&(c||(c=a),b.push(m.after(d,a,g,!0)))})},this);return arguments}})})},"dijit/_OnDijitClickMixin":function(){define("dojo/on dojo/_base/array dojo/keys dojo/_base/declare dojo/has ./a11yclick".split(" "),
function(n,m,g,h,d,l){n=h("dijit._OnDijitClickMixin",null,{connect:function(c,k,b){return this.inherited(arguments,[c,"ondijitclick"==k?l:k,b])}});n.a11yclick=l;return n})},"dijit/a11yclick":function(){define(["dojo/keys","dojo/mouse","dojo/on","dojo/touch"],function(n,m,g,h){function d(c){if((c.keyCode===n.ENTER||c.keyCode===n.SPACE)&&!/input|button|textarea/i.test(c.target.nodeName))for(c=c.target;c;c=c.parentNode)if(c.dojoClick)return!0}var l;g(document,"keydown",function(c){d(c)?(l=c.target,c.preventDefault()):
l=null});g(document,"keyup",function(c){d(c)&&c.target==l&&(l=null,g.emit(c.target,"click",{cancelable:!0,bubbles:!0,ctrlKey:c.ctrlKey,shiftKey:c.shiftKey,metaKey:c.metaKey,altKey:c.altKey,_origType:c.type}))});var c=function(c,b){c.dojoClick=!0;return g(c,"click",b)};c.click=c;c.press=function(c,b){var a=g(c,h.press,function(a){("mousedown"!=a.type||m.isLeft(a))&&b(a)}),e=g(c,"keydown",function(a){a.keyCode!==n.ENTER&&a.keyCode!==n.SPACE||b(a)});return{remove:function(){a.remove();e.remove()}}};
c.release=function(c,b){var a=g(c,h.release,function(a){("mouseup"!=a.type||m.isLeft(a))&&b(a)}),e=g(c,"keyup",function(a){a.keyCode!==n.ENTER&&a.keyCode!==n.SPACE||b(a)});return{remove:function(){a.remove();e.remove()}}};c.move=h.move;return c})},"dijit/_FocusMixin":function(){define(["./focus","./_WidgetBase","dojo/_base/declare","dojo/_base/lang"],function(n,m,g,h){h.extend(m,{focused:!1,onFocus:function(){},onBlur:function(){},_onFocus:function(){this.onFocus()},_onBlur:function(){this.onBlur()}});
return g("dijit._FocusMixin",null,{_focusManager:n})})},"dojo/uacss":function(){define(["./dom-geometry","./_base/lang","./domReady","./sniff","./_base/window"],function(n,m,g,h,d){var l=d.doc.documentElement;d=h("ie");var c=h("trident"),k=h("opera"),b=Math.floor,a=h("ff"),e=n.boxModel.replace(/-/,""),k={dj_quirks:h("quirks"),dj_opera:k,dj_khtml:h("khtml"),dj_webkit:h("webkit"),dj_safari:h("safari"),dj_chrome:h("chrome"),dj_edge:h("edge"),dj_gecko:h("mozilla"),dj_ios:h("ios"),dj_android:h("android")};
d&&(k.dj_ie=!0,k["dj_ie"+b(d)]=!0,k.dj_iequirks=h("quirks"));c&&(k.dj_trident=!0,k["dj_trident"+b(c)]=!0);a&&(k["dj_ff"+b(a)]=!0);k["dj_"+e]=!0;var u="",w;for(w in k)k[w]&&(u+=w+" ");l.className=m.trim(l.className+" "+u);g(function(){if(!n.isBodyLtr()){var a="dj_rtl dijitRtl "+u.replace(/ /g,"-rtl ");l.className=m.trim(l.className+" "+a+"dj_rtl dijitRtl "+u.replace(/ /g,"-rtl "))}});return h})},"dijit/hccss":function(){define(["dojo/dom-class","dojo/hccss","dojo/domReady","dojo/_base/window"],function(n,
m,g,h){g(function(){m("highcontrast")&&n.add(h.body(),"dijit_a11y")});return m})},"dojo/hccss":function(){define("require ./_base/config ./dom-class ./dom-style ./has ./domReady ./_base/window".split(" "),function(n,m,g,h,d,l,c){d.add("highcontrast",function(){var k=c.doc.createElement("div");try{k.style.cssText='border: 1px solid; border-color:red green; position: absolute; height: 5px; top: -999px;background-image: url("'+(m.blankGif||n.toUrl("./resources/blank.gif"))+'");';c.body().appendChild(k);
var b=h.getComputedStyle(k),a=b.backgroundImage;return b.borderTopColor==b.borderRightColor||a&&("none"==a||"url(invalid-url:)"==a)}catch(e){return console.warn("hccss: exception detecting high-contrast mode, document is likely hidden: "+e.toString()),!1}finally{8>=d("ie")?k.outerHTML="":c.body().removeChild(k)}});l(function(){d("highcontrast")&&g.add(c.body(),"dj_a11y")});return d})},"dijit/_TemplatedMixin":function(){define("dojo/cache dojo/_base/declare dojo/dom-construct dojo/_base/lang dojo/on dojo/sniff dojo/string ./_AttachMixin".split(" "),
function(n,m,g,h,d,l,c,k){var b=m("dijit._TemplatedMixin",k,{templateString:null,templatePath:null,_skipNodeCache:!1,searchContainerNode:!0,_stringRepl:function(a){var b=this.declaredClass,d=this;return c.substitute(a,this,function(a,e){"!"==e.charAt(0)&&(a=h.getObject(e.substr(1),!1,d));if("undefined"==typeof a)throw Error(b+" template:"+e);return null==a?"":"!"==e.charAt(0)?a:this._escapeValue(""+a)},this)},_escapeValue:function(a){return a.replace(/["'<>&]/g,function(a){return{"\x26":"\x26amp;",
"\x3c":"\x26lt;","\x3e":"\x26gt;",'"':"\x26quot;","'":"\x26#x27;"}[a]})},buildRendering:function(){if(!this._rendered){this.templateString||(this.templateString=n(this.templatePath,{sanitize:!0}));var a=b.getCachedTemplate(this.templateString,this._skipNodeCache,this.ownerDocument),e;if(h.isString(a)){if(e=g.toDom(this._stringRepl(a),this.ownerDocument),1!=e.nodeType)throw Error("Invalid template: "+a);}else e=a.cloneNode(!0);this.domNode=e}this.inherited(arguments);this._rendered||this._fillContent(this.srcNodeRef);
this._rendered=!0},_fillContent:function(a){var b=this.containerNode;if(a&&b)for(;a.hasChildNodes();)b.appendChild(a.firstChild)}});b._templateCache={};b.getCachedTemplate=function(a,e,d){var k=b._templateCache,h=a,l=k[h];if(l){try{if(!l.ownerDocument||l.ownerDocument==(d||document))return l}catch(r){}g.destroy(l)}a=c.trim(a);if(e||a.match(/\$\{([^\}]+)\}/g))return k[h]=a;e=g.toDom(a,d);if(1!=e.nodeType)throw Error("Invalid template: "+a);return k[h]=e};l("ie")&&d(window,"unload",function(){var a=
b._templateCache,e;for(e in a){var c=a[e];"object"==typeof c&&g.destroy(c);delete a[e]}});return b})},"dojo/cache":function(){define(["./_base/kernel","./text"],function(n){return n.cache})},"dijit/_AttachMixin":function(){define("require dojo/_base/array dojo/_base/connect dojo/_base/declare dojo/_base/lang dojo/mouse dojo/on dojo/touch ./_WidgetBase".split(" "),function(n,m,g,h,d,l,c,k,b){var a=d.delegate(k,{mouseenter:l.enter,mouseleave:l.leave,keypress:g._keypress}),e;g=h("dijit._AttachMixin",
null,{constructor:function(){this._attachPoints=[];this._attachEvents=[]},buildRendering:function(){this.inherited(arguments);this._attachTemplateNodes(this.domNode);this._beforeFillContent()},_beforeFillContent:function(){},_attachTemplateNodes:function(a){for(var b=a;;)if(1==b.nodeType&&(this._processTemplateNode(b,function(a,b){return a.getAttribute(b)},this._attach)||this.searchContainerNode)&&b.firstChild)b=b.firstChild;else{if(b==a)break;for(;!b.nextSibling;)if(b=b.parentNode,b==a)return;b=
b.nextSibling}},_processTemplateNode:function(a,b,e){var c=!0,k=this.attachScope||this,h=b(a,"dojoAttachPoint")||b(a,"data-dojo-attach-point");if(h)for(var g=h.split(/\s*,\s*/);h=g.shift();)d.isArray(k[h])?k[h].push(a):k[h]=a,c="containerNode"!=h,this._attachPoints.push(h);if(b=b(a,"dojoAttachEvent")||b(a,"data-dojo-attach-event"))for(h=b.split(/\s*,\s*/),g=d.trim;b=h.shift();)if(b){var l=null;-1!=b.indexOf(":")?(l=b.split(":"),b=g(l[0]),l=g(l[1])):b=g(b);l||(l=b);this._attachEvents.push(e(a,b,d.hitch(k,
l)))}return c},_attach:function(b,d,k){d=d.replace(/^on/,"").toLowerCase();d="dijitclick"==d?e||(e=n("./a11yclick")):a[d]||d;return c(b,d,k)},_detachTemplateNodes:function(){var a=this.attachScope||this;m.forEach(this._attachPoints,function(b){delete a[b]});this._attachPoints=[];m.forEach(this._attachEvents,function(a){a.remove()});this._attachEvents=[]},destroyRendering:function(){this._detachTemplateNodes();this.inherited(arguments)}});d.extend(b,{dojoAttachEvent:"",dojoAttachPoint:""});return g})},
"dijit/_CssStateMixin":function(){define("dojo/_base/array dojo/_base/declare dojo/dom dojo/dom-class dojo/has dojo/_base/lang dojo/on dojo/domReady dojo/touch dojo/_base/window ./a11yclick ./registry".split(" "),function(n,m,g,h,d,l,c,k,b,a,e,u){m=m("dijit._CssStateMixin",[],{hovering:!1,active:!1,_applyAttributes:function(){this.inherited(arguments);n.forEach("disabled readOnly checked selected focused state hovering active _opened".split(" "),function(a){this.watch(a,l.hitch(this,"_setStateClass"))},
this);for(var a in this.cssStateNodes||{})this._trackMouseState(this[a],this.cssStateNodes[a]);this._trackMouseState(this.domNode,this.baseClass);this._setStateClass()},_cssMouseEvent:function(a){if(!this.disabled)switch(a.type){case "mouseover":case "MSPointerOver":case "pointerover":this._set("hovering",!0);this._set("active",this._mouseDown);break;case "mouseout":case "MSPointerOut":case "pointerout":this._set("hovering",!1);this._set("active",!1);break;case "mousedown":case "touchstart":case "MSPointerDown":case "pointerdown":case "keydown":this._set("active",
!0);break;case "mouseup":case "dojotouchend":case "MSPointerUp":case "pointerup":case "keyup":this._set("active",!1)}},_setStateClass:function(){function a(a){b=b.concat(n.map(b,function(b){return b+a}),"dijit"+a)}var b=this.baseClass.split(" ");this.isLeftToRight()||a("Rtl");var e="mixed"==this.checked?"Mixed":this.checked?"Checked":"";this.checked&&a(e);this.state&&a(this.state);this.selected&&a("Selected");this._opened&&a("Opened");this.disabled?a("Disabled"):this.readOnly?a("ReadOnly"):this.active?
a("Active"):this.hovering&&a("Hover");this.focused&&a("Focused");var e=this.stateNode||this.domNode,c={};n.forEach(e.className.split(" "),function(a){c[a]=!0});"_stateClasses"in this&&n.forEach(this._stateClasses,function(a){delete c[a]});n.forEach(b,function(a){c[a]=!0});var d=[],k;for(k in c)d.push(k);e.className=d.join(" ");this._stateClasses=b},_subnodeCssMouseEvent:function(a,b,e){function c(e){h.toggle(a,b+"Active",e)}if(!this.disabled&&!this.readOnly)switch(e.type){case "mouseover":case "MSPointerOver":case "pointerover":h.toggle(a,
b+"Hover",!0);break;case "mouseout":case "MSPointerOut":case "pointerout":h.toggle(a,b+"Hover",!1);c(!1);break;case "mousedown":case "touchstart":case "MSPointerDown":case "pointerdown":case "keydown":c(!0);break;case "mouseup":case "MSPointerUp":case "pointerup":case "dojotouchend":case "keyup":c(!1);break;case "focus":case "focusin":h.toggle(a,b+"Focused",!0);break;case "blur":case "focusout":h.toggle(a,b+"Focused",!1)}},_trackMouseState:function(a,b){a._cssState=b}});k(function(){function d(a,
b,e){if(!e||!g.isDescendant(e,b))for(;b&&b!=e;b=b.parentNode)if(b._cssState){var c=u.getEnclosingWidget(b);c&&(b==c.domNode?c._cssMouseEvent(a):c._subnodeCssMouseEvent(b,b._cssState,a))}}var k=a.body(),h;c(k,b.over,function(a){d(a,a.target,a.relatedTarget)});c(k,b.out,function(a){d(a,a.target,a.relatedTarget)});c(k,e.press,function(a){h=a.target;d(a,h)});c(k,e.release,function(a){d(a,h);h=null});c(k,"focusin, focusout",function(a){var b=a.target;if(b._cssState&&!b.getAttribute("widgetId")){var e=
u.getEnclosingWidget(b);e&&e._subnodeCssMouseEvent(b,b._cssState,a)}})});return m})},"dijit/form/_FormMixin":function(){define("dojo/_base/array dojo/_base/declare dojo/_base/kernel dojo/_base/lang dojo/on dojo/window".split(" "),function(n,m,g,h,d,l){return m("dijit.form._FormMixin",null,{state:"",_getDescendantFormWidgets:function(c){var d=[];n.forEach(c||this.getChildren(),function(b){"value"in b?d.push(b):d=d.concat(this._getDescendantFormWidgets(b.getChildren()))},this);return d},reset:function(){n.forEach(this._getDescendantFormWidgets(),
function(c){c.reset&&c.reset()})},validate:function(){var c=!1;return n.every(n.map(this._getDescendantFormWidgets(),function(d){d._hasBeenBlurred=!0;var b=d.disabled||!d.validate||d.validate();b||c||(l.scrollIntoView(d.containerNode||d.domNode),d.focus(),c=!0);return b}),function(c){return c})},setValues:function(c){g.deprecated(this.declaredClass+"::setValues() is deprecated. Use set('value', val) instead.","","2.0");return this.set("value",c)},_setValueAttr:function(c){var d={};n.forEach(this._getDescendantFormWidgets(),
function(a){a.name&&(d[a.name]||(d[a.name]=[])).push(a)});for(var b in d)if(d.hasOwnProperty(b)){var a=d[b],e=h.getObject(b,!1,c);void 0!==e&&(e=[].concat(e),"boolean"==typeof a[0].checked?n.forEach(a,function(a){a.set("value",-1!=n.indexOf(e,a._get("value")))}):a[0].multiple?a[0].set("value",e):n.forEach(a,function(a,b){a.set("value",e[b])}))}},getValues:function(){g.deprecated(this.declaredClass+"::getValues() is deprecated. Use get('value') instead.","","2.0");return this.get("value")},_getValueAttr:function(){var c=
{};n.forEach(this._getDescendantFormWidgets(),function(d){var b=d.name;if(b&&!d.disabled){var a=d.get("value");"boolean"==typeof d.checked?/Radio/.test(d.declaredClass)?!1!==a?h.setObject(b,a,c):(a=h.getObject(b,!1,c),void 0===a&&h.setObject(b,null,c)):(d=h.getObject(b,!1,c),d||(d=[],h.setObject(b,d,c)),!1!==a&&d.push(a)):(d=h.getObject(b,!1,c),"undefined"!=typeof d?h.isArray(d)?d.push(a):h.setObject(b,[d,a],c):h.setObject(b,a,c))}});return c},isValid:function(){return""==this.state},onValidStateChange:function(){},
_getState:function(){var c=n.map(this._descendants,function(c){return c.get("state")||""});return 0<=n.indexOf(c,"Error")?"Error":0<=n.indexOf(c,"Incomplete")?"Incomplete":""},disconnectChildren:function(){},connectChildren:function(c){this._descendants=this._getDescendantFormWidgets();n.forEach(this._descendants,function(c){c._started||c.startup()});c||this._onChildChange()},_onChildChange:function(c){c&&"state"!=c&&"disabled"!=c||this._set("state",this._getState());c&&"value"!=c&&"disabled"!=c&&
"checked"!=c||(this._onChangeDelayTimer&&this._onChangeDelayTimer.remove(),this._onChangeDelayTimer=this.defer(function(){delete this._onChangeDelayTimer;this._set("value",this.get("value"))},10))},startup:function(){this.inherited(arguments);this._descendants=this._getDescendantFormWidgets();this.value=this.get("value");this.state=this._getState();var c=this;this.own(d(this.containerNode,"attrmodified-state, attrmodified-disabled, attrmodified-value, attrmodified-checked",function(d){d.target!=c.domNode&&
c._onChildChange(d.type.replace("attrmodified-",""))}));this.watch("state",function(c,b,a){this.onValidStateChange(""==a)})},destroy:function(){this.inherited(arguments)}})})},"dijit/_DialogMixin":function(){define(["dojo/_base/declare","./a11y"],function(n,m){return n("dijit._DialogMixin",null,{actionBarTemplate:"",execute:function(){},onCancel:function(){},onExecute:function(){},_onSubmit:function(){this.onExecute();this.execute(this.get("value"))},_getFocusItems:function(){var g=m._getTabNavigable(this.domNode);
this._firstFocusItem=g.lowest||g.first||this.closeButtonNode||this.domNode;this._lastFocusItem=g.last||g.highest||this._firstFocusItem}})})},"dijit/DialogUnderlay":function(){define("dojo/_base/declare dojo/_base/lang dojo/aspect dojo/dom-attr dojo/dom-style dojo/on dojo/window ./_Widget ./_TemplatedMixin ./BackgroundIframe ./Viewport ./main".split(" "),function(n,m,g,h,d,l,c,k,b,a,e,u){var w=n("dijit.DialogUnderlay",[k,b],{templateString:"\x3cdiv class\x3d'dijitDialogUnderlayWrapper'\x3e\x3cdiv class\x3d'dijitDialogUnderlay' tabIndex\x3d'-1' data-dojo-attach-point\x3d'node'\x3e\x3c/div\x3e\x3c/div\x3e",
dialogId:"","class":"",_modalConnects:[],_setDialogIdAttr:function(a){h.set(this.node,"id",a+"_underlay");this._set("dialogId",a)},_setClassAttr:function(a){this.node.className="dijitDialogUnderlay "+a;this._set("class",a)},postCreate:function(){this.ownerDocumentBody.appendChild(this.domNode);this.own(l(this.domNode,"keydown",m.hitch(this,"_onKeyDown")));this.inherited(arguments)},layout:function(){var a=this.node.style,b=this.domNode.style;b.display="none";var e=c.getBox(this.ownerDocument);b.top=
e.t+"px";b.left=e.l+"px";a.width=e.w+"px";a.height=e.h+"px";b.display="block"},show:function(){this.domNode.style.display="block";this.open=!0;this.layout();this.bgIframe=new a(this.domNode);var b=c.get(this.ownerDocument);this._modalConnects=[e.on("resize",m.hitch(this,"layout")),l(b,"scroll",m.hitch(this,"layout"))]},hide:function(){this.bgIframe.destroy();delete this.bgIframe;for(this.domNode.style.display="none";this._modalConnects.length;)this._modalConnects.pop().remove();this.open=!1},destroy:function(){for(;this._modalConnects.length;)this._modalConnects.pop().remove();
this.inherited(arguments)},_onKeyDown:function(){}});w.show=function(a,b){var e=w._singleton;!e||e._destroyed?e=u._underlay=w._singleton=new w(a):a&&e.set(a);d.set(e.domNode,"zIndex",b);e.open||e.show()};w.hide=function(){var a=w._singleton;a&&!a._destroyed&&a.hide()};return w})},"dijit/BackgroundIframe":function(){define("require ./main dojo/_base/config dojo/dom-construct dojo/dom-style dojo/_base/lang dojo/on dojo/sniff".split(" "),function(n,m,g,h,d,l,c,k){k.add("config-bgIframe",(k("ie")||k("trident"))&&
!/IEMobile\/10\.0/.test(navigator.userAgent));var b=new function(){var a=[];this.pop=function(){var b;a.length?(b=a.pop(),b.style.display=""):(9>k("ie")?(b=g.dojoBlankHtmlUrl||n.toUrl("dojo/resources/blank.html")||'javascript:""',b=document.createElement("\x3ciframe src\x3d'"+b+"' role\x3d'presentation' style\x3d'position: absolute; left: 0px; top: 0px;z-index: -1; filter:Alpha(Opacity\x3d\"0\");'\x3e")):(b=h.create("iframe"),b.src='javascript:""',b.className="dijitBackgroundIframe",b.setAttribute("role",
"presentation"),d.set(b,"opacity",.1)),b.tabIndex=-1);return b};this.push=function(b){b.style.display="none";a.push(b)}};m.BackgroundIframe=function(a){if(!a.id)throw Error("no id");if(k("config-bgIframe")){var e=this.iframe=b.pop();a.appendChild(e);7>k("ie")||k("quirks")?(this.resize(a),this._conn=c(a,"resize",l.hitch(this,"resize",a))):d.set(e,{width:"100%",height:"100%"})}};l.extend(m.BackgroundIframe,{resize:function(a){this.iframe&&d.set(this.iframe,{width:a.offsetWidth+"px",height:a.offsetHeight+
"px"})},destroy:function(){this._conn&&(this._conn.remove(),this._conn=null);this.iframe&&(this.iframe.parentNode.removeChild(this.iframe),b.push(this.iframe),delete this.iframe)}});return m.BackgroundIframe})},"dijit/Viewport":function(){define(["dojo/Evented","dojo/on","dojo/domReady","dojo/sniff","dojo/window"],function(n,m,g,h,d){var l=new n,c;g(function(){var k=d.getBox();l._rlh=m(window,"resize",function(){var a=d.getBox();if(k.h!=a.h||k.w!=a.w)k=a,l.emit("resize")});if(8==h("ie")){var b=screen.deviceXDPI;
setInterval(function(){screen.deviceXDPI!=b&&(b=screen.deviceXDPI,l.emit("resize"))},500)}h("ios")&&(m(document,"focusin",function(a){c=a.target}),m(document,"focusout",function(a){c=null}))});l.getEffectiveBox=function(k){k=d.getBox(k);var b=c&&c.tagName&&c.tagName.toLowerCase();h("ios")&&c&&!c.readOnly&&("textarea"==b||"input"==b&&/^(color|email|number|password|search|tel|text|url)$/.test(c.type))&&(k.h*=0==orientation||180==orientation?.66:.4,b=c.getBoundingClientRect(),k.h=Math.max(k.h,b.top+
b.height));return k};return l})},"dijit/layout/ContentPane":function(){define("dojo/_base/kernel dojo/_base/lang ../_Widget ../_Container ./_ContentPaneResizeMixin dojo/string dojo/html dojo/_base/array dojo/_base/declare dojo/_base/Deferred dojo/dom dojo/dom-attr dojo/dom-construct dojo/_base/xhr dojo/i18n dojo/when dojo/i18n!../nls/loading".split(" "),function(n,m,g,h,d,l,c,k,b,a,e,u,w,v,A,r){return b("dijit.layout.ContentPane",[g,h,d],{href:"",content:"",extractContent:!1,parseOnLoad:!0,parserScope:n._scopeName,
preventCache:!1,preload:!1,refreshOnShow:!1,loadingMessage:"\x3cspan class\x3d'dijitContentPaneLoading'\x3e\x3cspan class\x3d'dijitInline dijitIconLoading'\x3e\x3c/span\x3e${loadingState}\x3c/span\x3e",errorMessage:"\x3cspan class\x3d'dijitContentPaneError'\x3e\x3cspan class\x3d'dijitInline dijitIconError'\x3e\x3c/span\x3e${errorState}\x3c/span\x3e",isLoaded:!1,baseClass:"dijitContentPane",ioArgs:{},onLoadDeferred:null,_setTitleAttr:null,stopParser:!0,template:!1,markupFactory:function(a,b,e){var c=
new e(a,b);return!c.href&&c._contentSetter&&c._contentSetter.parseDeferred&&!c._contentSetter.parseDeferred.isFulfilled()?c._contentSetter.parseDeferred.then(function(){return c}):c},create:function(a,b){if(!(a&&a.template||!b||"href"in a||"content"in a)){b=e.byId(b);for(var c=b.ownerDocument.createDocumentFragment();b.firstChild;)c.appendChild(b.firstChild);a=m.delegate(a,{content:c})}this.inherited(arguments,[a,b])},postMixInProperties:function(){this.inherited(arguments);var a=A.getLocalization("dijit",
"loading",this.lang);this.loadingMessage=l.substitute(this.loadingMessage,a);this.errorMessage=l.substitute(this.errorMessage,a)},buildRendering:function(){this.inherited(arguments);this.containerNode||(this.containerNode=this.domNode);this.domNode.removeAttribute("title")},startup:function(){this.inherited(arguments);this._contentSetter&&k.forEach(this._contentSetter.parseResults,function(a){a._started||a._destroyed||!m.isFunction(a.startup)||(a.startup(),a._started=!0)},this)},_startChildren:function(){k.forEach(this.getChildren(),
function(a){a._started||a._destroyed||!m.isFunction(a.startup)||(a.startup(),a._started=!0)});this._contentSetter&&k.forEach(this._contentSetter.parseResults,function(a){a._started||a._destroyed||!m.isFunction(a.startup)||(a.startup(),a._started=!0)},this)},setHref:function(a){n.deprecated("dijit.layout.ContentPane.setHref() is deprecated. Use set('href', ...) instead.","","2.0");return this.set("href",a)},_setHrefAttr:function(b){this.cancel();this.onLoadDeferred=new a(m.hitch(this,"cancel"));this.onLoadDeferred.then(m.hitch(this,
"onLoad"));this._set("href",b);this.preload||this._created&&this._isShown()?this._load():this._hrefChanged=!0;return this.onLoadDeferred},setContent:function(a){n.deprecated("dijit.layout.ContentPane.setContent() is deprecated.  Use set('content', ...) instead.","","2.0");this.set("content",a)},_setContentAttr:function(b){this._set("href","");this.cancel();this.onLoadDeferred=new a(m.hitch(this,"cancel"));this._created&&this.onLoadDeferred.then(m.hitch(this,"onLoad"));this._setContent(b||"");this._isDownloaded=
!1;return this.onLoadDeferred},_getContentAttr:function(){return this.containerNode.innerHTML},cancel:function(){this._xhrDfd&&-1==this._xhrDfd.fired&&this._xhrDfd.cancel();delete this._xhrDfd;this.onLoadDeferred=null},destroy:function(){this.cancel();this.inherited(arguments)},destroyRecursive:function(a){this._beingDestroyed||this.inherited(arguments)},_onShow:function(){this.inherited(arguments);if(this.href&&!this._xhrDfd&&(!this.isLoaded||this._hrefChanged||this.refreshOnShow))return this.refresh()},
refresh:function(){this.cancel();this.onLoadDeferred=new a(m.hitch(this,"cancel"));this.onLoadDeferred.then(m.hitch(this,"onLoad"));this._load();return this.onLoadDeferred},_load:function(){this._setContent(this.onDownloadStart(),!0);var a=this,b={preventCache:this.preventCache||this.refreshOnShow,url:this.href,handleAs:"text"};m.isObject(this.ioArgs)&&m.mixin(b,this.ioArgs);var e=this._xhrDfd=(this.ioMethod||v.get)(b),c;e.then(function(b){c=b;try{return a._isDownloaded=!0,a._setContent(b,!1)}catch(p){a._onError("Content",
p)}},function(b){e.canceled||a._onError("Download",b);delete a._xhrDfd;return b}).then(function(){a.onDownloadEnd();delete a._xhrDfd;return c});delete this._hrefChanged},_onLoadHandler:function(a){this._set("isLoaded",!0);try{this.onLoadDeferred.resolve(a)}catch(D){console.error("Error "+this.widgetId+" running custom onLoad code: "+D.message)}},_onUnloadHandler:function(){this._set("isLoaded",!1);try{this.onUnload()}catch(G){console.error("Error "+this.widgetId+" running custom onUnload code: "+
G.message)}},destroyDescendants:function(a){this.isLoaded&&this._onUnloadHandler();var b=this._contentSetter;k.forEach(this.getChildren(),function(b){b.destroyRecursive?b.destroyRecursive(a):b.destroy&&b.destroy(a);b._destroyed=!0});b&&(k.forEach(b.parseResults,function(b){b._destroyed||(b.destroyRecursive?b.destroyRecursive(a):b.destroy&&b.destroy(a),b._destroyed=!0)}),delete b.parseResults);a||w.empty(this.containerNode);delete this._singleChild},_setContent:function(a,b){a=this.preprocessContent(a);
this.destroyDescendants();var e=this._contentSetter;e&&e instanceof c._ContentSetter||(e=this._contentSetter=new c._ContentSetter({node:this.containerNode,_onError:m.hitch(this,this._onError),onContentError:m.hitch(this,function(a){a=this.onContentError(a);try{this.containerNode.innerHTML=a}catch(z){console.error("Fatal "+this.id+" could not change content due to "+z.message,z)}})}));var d=m.mixin({cleanContent:this.cleanContent,extractContent:this.extractContent,parseContent:!a.domNode&&this.parseOnLoad,
parserScope:this.parserScope,startup:!1,dir:this.dir,lang:this.lang,textDir:this.textDir},this._contentSetterParams||{}),d=e.set(m.isObject(a)&&a.domNode?a.domNode:a,d),h=this;return r(d&&d.then?d:e.parseDeferred,function(){delete h._contentSetterParams;b||(h._started&&(h._startChildren(),h._scheduleLayout()),h._onLoadHandler(a))})},preprocessContent:function(a){return a},_onError:function(a,b,e){this.onLoadDeferred.reject(b);a=this["on"+a+"Error"].call(this,b);e?console.error(e,b):a&&this._setContent(a,
!0)},onLoad:function(){},onUnload:function(){},onDownloadStart:function(){return this.loadingMessage},onContentError:function(){},onDownloadError:function(){return this.errorMessage},onDownloadEnd:function(){}})})},"dijit/_Container":function(){define(["dojo/_base/array","dojo/_base/declare","dojo/dom-construct","dojo/_base/kernel"],function(n,m,g,h){return m("dijit._Container",null,{buildRendering:function(){this.inherited(arguments);this.containerNode||(this.containerNode=this.domNode)},addChild:function(d,
h){var c=this.containerNode;if(0<h){for(c=c.firstChild;0<h;)1==c.nodeType&&h--,c=c.nextSibling;c?h="before":(c=this.containerNode,h="last")}g.place(d.domNode,c,h);this._started&&!d._started&&d.startup()},removeChild:function(d){"number"==typeof d&&(d=this.getChildren()[d]);d&&(d=d.domNode)&&d.parentNode&&d.parentNode.removeChild(d)},hasChildren:function(){return 0<this.getChildren().length},_getSiblingOfChild:function(d,h){var c=this.getChildren();d=n.indexOf(c,d);return c[d+h]},getIndexOfChild:function(d){return n.indexOf(this.getChildren(),
d)}})})},"dijit/layout/_ContentPaneResizeMixin":function(){define("dojo/_base/array dojo/_base/declare dojo/dom-class dojo/dom-geometry dojo/dom-style dojo/_base/lang dojo/query ../registry ../Viewport ./utils".split(" "),function(n,m,g,h,d,l,c,k,b,a){return m("dijit.layout._ContentPaneResizeMixin",null,{doLayout:!0,isLayoutContainer:!0,startup:function(){if(!this._started){var a=this.getParent();this._childOfLayoutWidget=a&&a.isLayoutContainer;this._needLayout=!this._childOfLayoutWidget;this.inherited(arguments);
this._isShown()&&this._onShow();this._childOfLayoutWidget||this.own(b.on("resize",l.hitch(this,"resize")))}},_checkIfSingleChild:function(){if(this.doLayout){var a=[],b=!1;c("\x3e *",this.containerNode).some(function(e){var c=k.byNode(e);c&&c.resize?a.push(c):!/script|link|style/i.test(e.nodeName)&&e.offsetHeight&&(b=!0)});this._singleChild=1!=a.length||b?null:a[0];g.toggle(this.containerNode,this.baseClass+"SingleChild",!!this._singleChild)}},resize:function(a,b){this._resizeCalled=!0;this._scheduleLayout(a,
b)},_scheduleLayout:function(a,b){this._isShown()?this._layout(a,b):(this._needLayout=!0,this._changeSize=a,this._resultSize=b)},_layout:function(b,c){delete this._needLayout;this._wasShown||!1===this.open||this._onShow();b&&h.setMarginBox(this.domNode,b);var e=this.containerNode;e===this.domNode?(c=c||{},l.mixin(c,b||{}),"h"in c&&"w"in c||(c=l.mixin(h.getMarginBox(e),c)),this._contentBox=a.marginBox2contentBox(e,c)):this._contentBox=h.getContentBox(e);this._layoutChildren()},_layoutChildren:function(){this._checkIfSingleChild();
if(this._singleChild&&this._singleChild.resize){var a=this._contentBox||h.getContentBox(this.containerNode);this._singleChild.resize({w:a.w,h:a.h})}else for(var a=this.getChildren(),b,c=0;b=a[c++];)b.resize&&b.resize()},_isShown:function(){if(this._childOfLayoutWidget)return this._resizeCalled&&"open"in this?this.open:this._resizeCalled;if("open"in this)return this.open;var a=this.domNode,b=this.domNode.parentNode;return"none"!=a.style.display&&"hidden"!=a.style.visibility&&!g.contains(a,"dijitHidden")&&
b&&b.style&&"none"!=b.style.display},_onShow:function(){this._wasShown=!0;this._needLayout&&this._layout(this._changeSize,this._resultSize);this.inherited(arguments)}})})},"dijit/layout/utils":function(){define(["dojo/_base/array","dojo/dom-class","dojo/dom-geometry","dojo/dom-style","dojo/_base/lang"],function(n,m,g,h,d){function l(b){return b.substring(0,1).toUpperCase()+b.substring(1)}function c(b,a){var e=b.resize?b.resize(a):g.setMarginBox(b.domNode,a);e?d.mixin(b,e):(d.mixin(b,g.getMarginBox(b.domNode)),
d.mixin(b,a))}var k={marginBox2contentBox:function(b,a){var e=h.getComputedStyle(b),c=g.getMarginExtents(b,e),d=g.getPadBorderExtents(b,e);return{l:h.toPixelValue(b,e.paddingLeft),t:h.toPixelValue(b,e.paddingTop),w:a.w-(c.w+d.w),h:a.h-(c.h+d.h)}},layoutChildren:function(b,a,e,h,k){a=d.mixin({},a);m.add(b,"dijitLayoutContainer");e=n.filter(e,function(a){return"center"!=a.region&&"client"!=a.layoutAlign}).concat(n.filter(e,function(a){return"center"==a.region||"client"==a.layoutAlign}));n.forEach(e,
function(b){var e=b.domNode,d=b.region||b.layoutAlign;if(!d)throw Error("No region setting for "+b.id);var g=e.style;g.left=a.l+"px";g.top=a.t+"px";g.position="absolute";m.add(e,"dijitAlign"+l(d));e={};h&&h==b.id&&(e["top"==b.region||"bottom"==b.region?"h":"w"]=k);"leading"==d&&(d=b.isLeftToRight()?"left":"right");"trailing"==d&&(d=b.isLeftToRight()?"right":"left");"top"==d||"bottom"==d?(e.w=a.w,c(b,e),a.h-=b.h,"top"==d?a.t+=b.h:g.top=a.t+a.h+"px"):"left"==d||"right"==d?(e.h=a.h,c(b,e),a.w-=b.w,"left"==
d?a.l+=b.w:g.left=a.l+a.w+"px"):"client"!=d&&"center"!=d||c(b,a)})}};d.setObject("dijit.layout.utils",k);return k})},"dojo/html":function(){define("./_base/kernel ./_base/lang ./_base/array ./_base/declare ./dom ./dom-construct ./parser".split(" "),function(n,m,g,h,d,l,c){var k=0,b={_secureForInnerHtml:function(a){return a.replace(/(?:\s*<!DOCTYPE\s[^>]+>|<title[^>]*>[\s\S]*?<\/title>)/ig,"")},_emptyNode:l.empty,_setNodeContent:function(a,b){l.empty(a);if(b)if("number"==typeof b&&(b=b.toString()),
"string"==typeof b&&(b=l.toDom(b,a.ownerDocument)),!b.nodeType&&m.isArrayLike(b))for(var e=b.length,c=0;c<b.length;c=e==b.length?c+1:0)l.place(b[c],a,"last");else l.place(b,a,"last");return a},_ContentSetter:h("dojo.html._ContentSetter",null,{node:"",content:"",id:"",cleanContent:!1,extractContent:!1,parseContent:!1,parserScope:n._scopeName,startup:!0,constructor:function(a,b){m.mixin(this,a||{});b=this.node=d.byId(this.node||b);this.id||(this.id=["Setter",b?b.id||b.tagName:"",k++].join("_"))},set:function(a,
b){void 0!==a&&(this.content=a);"number"==typeof a&&(a=a.toString());b&&this._mixin(b);this.onBegin();this.setContent();return(a=this.onEnd())&&a.then?a:this.node},setContent:function(){var a=this.node;if(!a)throw Error(this.declaredClass+": setContent given no node");try{a=b._setNodeContent(a,this.content)}catch(u){var e=this.onContentError(u);try{a.innerHTML=e}catch(w){console.error("Fatal "+this.declaredClass+".setContent could not change content due to "+w.message,w)}}this.node=a},empty:function(){this.parseDeferred&&
(this.parseDeferred.isResolved()||this.parseDeferred.cancel(),delete this.parseDeferred);this.parseResults&&this.parseResults.length&&(g.forEach(this.parseResults,function(a){a.destroy&&a.destroy()}),delete this.parseResults);l.empty(this.node)},onBegin:function(){var a=this.content;if(m.isString(a)&&(this.cleanContent&&(a=b._secureForInnerHtml(a)),this.extractContent)){var e=a.match(/<body[^>]*>\s*([\s\S]+)\s*<\/body>/im);e&&(a=e[1])}this.empty();this.content=a;return this.node},onEnd:function(){this.parseContent&&
this._parse();return this.node},tearDown:function(){delete this.parseResults;delete this.parseDeferred;delete this.node;delete this.content},onContentError:function(a){return"Error occurred setting content: "+a},onExecError:function(a){return"Error occurred executing scripts: "+a},_mixin:function(a){var b={},c;for(c in a)c in b||(this[c]=a[c])},_parse:function(){var a=this.node;try{var b={};g.forEach(["dir","lang","textDir"],function(a){this[a]&&(b[a]=this[a])},this);var d=this;this.parseDeferred=
c.parse({rootNode:a,noStart:!this.startup,inherited:b,scope:this.parserScope}).then(function(a){return d.parseResults=a},function(a){d._onError("Content",a,"Error parsing in _ContentSetter#"+this.id)})}catch(w){this._onError("Content",w,"Error parsing in _ContentSetter#"+this.id)}},_onError:function(a,e,c){a=this["on"+a+"Error"].call(this,e);c?console.error(c,e):a&&b._setNodeContent(this.node,a,!0)}}),set:function(a,c,d){void 0==c&&(console.warn("dojo.html.set: no cont argument provided, using empty string"),
c="");"number"==typeof c&&(c=c.toString());return d?(new b._ContentSetter(m.mixin(d,{content:c,node:a}))).set():b._setNodeContent(a,c,!0)}};m.setObject("dojo.html",b);return b})},"dojo/parser":function(){define("require ./_base/kernel ./_base/lang ./_base/array ./_base/config ./dom ./_base/window ./_base/url ./aspect ./promise/all ./date/stamp ./Deferred ./has ./query ./on ./ready".split(" "),function(n,m,g,h,d,l,c,k,b,a,e,u,w,v,A,r){function G(a){return eval("("+a+")")}function D(a){var b=a._nameCaseMap,
c=a.prototype;if(!b||b._extendCnt<t){var b=a._nameCaseMap={},e;for(e in c)"_"!==e.charAt(0)&&(b[e.toLowerCase()]=e);b._extendCnt=t}return b}function x(a,b){b||(b=n);var c=b._dojoParserCtorMap||(b._dojoParserCtorMap={}),e=a.join();if(!c[e]){for(var d=[],f=0,q=a.length;f<q;f++){var h=a[f];d[d.length]=c[h]=c[h]||g.getObject(h)||~h.indexOf("/")&&b(h)}a=d.shift();c[e]=d.length?a.createSubclass?a.createSubclass(d):a.extend.apply(a,d):a}return c[e]}new Date("X");var t=0;b.after(g,"extend",function(){t++},
!0);var y={_clearCache:function(){t++;_ctorMap={}},_functionFromScript:function(a,b){var c="",e="",d=a.getAttribute(b+"args")||a.getAttribute("args");b=a.getAttribute("with");d=(d||"").split(/\s*,\s*/);b&&b.length&&h.forEach(b.split(/\s*,\s*/),function(a){c+="with("+a+"){";e+="}"});return new Function(d,c+a.innerHTML+e)},instantiate:function(a,b,c){b=b||{};c=c||{};var e=(c.scope||m._scopeName)+"Type",d="data-"+(c.scope||m._scopeName)+"-",f=d+"type",q=d+"mixins",k=[];h.forEach(a,function(a){var c=
e in b?b[e]:a.getAttribute(f)||a.getAttribute(e);if(c){var d=a.getAttribute(q),c=d?[c].concat(d.split(/\s*,\s*/)):[c];k.push({node:a,types:c})}});return this._instantiate(k,b,c)},_instantiate:function(b,c,e,d){function k(a){c._started||e.noStart||h.forEach(a,function(a){"function"!==typeof a.startup||a._started||a.startup()});return a}b=h.map(b,function(a){var b=a.ctor||x(a.types,e.contextRequire);if(!b)throw Error("Unable to resolve constructor for: '"+a.types.join()+"'");return this.construct(b,
a.node,c,e,a.scripts,a.inherited)},this);return d?a(b).then(k):k(b)},construct:function(a,c,d,l,n,f){function q(a){C&&g.setObject(C,a);for(t=0;t<L.length;t++)b[L[t].advice||"after"](a,L[t].method,g.hitch(a,L[t].func),!0);for(t=0;t<F.length;t++)F[t].call(a);for(t=0;t<E.length;t++)a.watch(E[t].prop,E[t].func);for(t=0;t<P.length;t++)A(a,P[t].event,P[t].func);return a}var H=a&&a.prototype;l=l||{};var p={};l.defaults&&g.mixin(p,l.defaults);f&&g.mixin(p,f);var u;w("dom-attributes-explicit")?u=c.attributes:
w("dom-attributes-specified-flag")?u=h.filter(c.attributes,function(a){return a.specified}):(f=(/^input$|^img$/i.test(c.nodeName)?c:c.cloneNode(!1)).outerHTML.replace(/=[^\s"']+|="[^"]*"|='[^']*'/g,"").replace(/^\s*<[a-zA-Z0-9]*\s*/,"").replace(/\s*>.*$/,""),u=h.map(f.split(/\s+/),function(a){var b=a.toLowerCase();return{name:a,value:"LI"==c.nodeName&&"value"==a||"enctype"==b?c.getAttribute(b):c.getAttributeNode(b).value}}));var r=l.scope||m._scopeName;f="data-"+r+"-";var z={};"dojo"!==r&&(z[f+"props"]=
"data-dojo-props",z[f+"type"]="data-dojo-type",z[f+"mixins"]="data-dojo-mixins",z[r+"type"]="dojotype",z[f+"id"]="data-dojo-id");for(var t=0,x,r=[],C,K;x=u[t++];){var y=x.name,B=y.toLowerCase();x=x.value;switch(z[B]||B){case "data-dojo-type":case "dojotype":case "data-dojo-mixins":break;case "data-dojo-props":K=x;break;case "data-dojo-id":case "jsid":C=x;break;case "data-dojo-attach-point":case "dojoattachpoint":p.dojoAttachPoint=x;break;case "data-dojo-attach-event":case "dojoattachevent":p.dojoAttachEvent=
x;break;case "class":p["class"]=c.className;break;case "style":p.style=c.style&&c.style.cssText;break;default:if(y in H||(y=D(a)[B]||y),y in H)switch(typeof H[y]){case "string":p[y]=x;break;case "number":p[y]=x.length?Number(x):NaN;break;case "boolean":p[y]="false"!=x.toLowerCase();break;case "function":""===x||-1!=x.search(/[^\w\.]+/i)?p[y]=new Function(x):p[y]=g.getObject(x,!1)||new Function(x);r.push(y);break;default:B=H[y],p[y]=B&&"length"in B?x?x.split(/\s*,\s*/):[]:B instanceof Date?""==x?new Date(""):
"now"==x?new Date:e.fromISOString(x):B instanceof k?m.baseUrl+x:G(x)}else p[y]=x}}for(u=0;u<r.length;u++)z=r[u].toLowerCase(),c.removeAttribute(z),c[z]=null;if(K)try{K=G.call(l.propsThis,"{"+K+"}"),g.mixin(p,K)}catch(R){throw Error(R.toString()+" in data-dojo-props\x3d'"+K+"'");}g.mixin(p,d);n||(n=a&&(a._noScript||H._noScript)?[]:v("\x3e script[type^\x3d'dojo/']",c));var L=[],F=[],E=[],P=[];if(n)for(t=0;t<n.length;t++)z=n[t],c.removeChild(z),d=z.getAttribute(f+"event")||z.getAttribute("event"),l=
z.getAttribute(f+"prop"),K=z.getAttribute(f+"method"),r=z.getAttribute(f+"advice"),u=z.getAttribute("type"),z=this._functionFromScript(z,f),d?"dojo/connect"==u?L.push({method:d,func:z}):"dojo/on"==u?P.push({event:d,func:z}):p[d]=z:"dojo/aspect"==u?L.push({method:K,advice:r,func:z}):"dojo/watch"==u?E.push({prop:l,func:z}):F.push(z);a=(n=a.markupFactory||H.markupFactory)?n(p,c,a):new a(p,c);return a.then?a.then(q):q(a)},scan:function(a,b){function c(a){if(!a.inherited){a.inherited={};var b=a.node,f=
c(a.parent),b={dir:b.getAttribute("dir")||f.dir,lang:b.getAttribute("lang")||f.lang,textDir:b.getAttribute(l)||f.textDir},e;for(e in b)b[e]&&(a.inherited[e]=b[e])}return a.inherited}var e=[],d=[],f={},q=(b.scope||m._scopeName)+"Type",k="data-"+(b.scope||m._scopeName)+"-",g=k+"type",l=k+"textdir",k=k+"mixins",p=a.firstChild,v=b.inherited;if(!v){var r=function(a,b){return a.getAttribute&&a.getAttribute(b)||a.parentNode&&r(a.parentNode,b)},v={dir:r(a,"dir"),lang:r(a,"lang"),textDir:r(a,l)},t;for(t in v)v[t]||
delete v[t]}t={inherited:v};for(var C,w;;)if(p)if(1!=p.nodeType)p=p.nextSibling;else if(C&&"script"==p.nodeName.toLowerCase())(v=p.getAttribute("type"))&&/^dojo\/\w/i.test(v)&&C.push(p),p=p.nextSibling;else if(w)p=p.nextSibling;else if(v=p.getAttribute(g)||p.getAttribute(q),a=p.firstChild,v||a&&(3!=a.nodeType||a.nextSibling)){w=null;if(v){var z=p.getAttribute(k);C=z?[v].concat(z.split(/\s*,\s*/)):[v];try{w=x(C,b.contextRequire)}catch(L){}w||h.forEach(C,function(a){~a.indexOf("/")&&!f[a]&&(f[a]=!0,
d[d.length]=a)});z=w&&!w.prototype._noScript?[]:null;t={types:C,ctor:w,parent:t,node:p,scripts:z};t.inherited=c(t);e.push(t)}else t={node:p,scripts:C,parent:t};C=z;w=p.stopParser||w&&w.prototype.stopParser&&!b.template;p=a}else p=p.nextSibling;else{if(!t||!t.node)break;p=t.node.nextSibling;w=!1;t=t.parent;C=t.scripts}var A=new u;d.length?(b.contextRequire||n)(d,function(){A.resolve(h.filter(e,function(a){if(!a.ctor)try{a.ctor=x(a.types,b.contextRequire)}catch(P){}for(var f=a.parent;f&&!f.types;)f=
f.parent;var c=a.ctor&&a.ctor.prototype;a.instantiateChildren=!(c&&c.stopParser&&!b.template);a.instantiate=!f||f.instantiate&&f.instantiateChildren;return a.instantiate}))}):A.resolve(e);return A.promise},_require:function(a,b){a=G("{"+a.innerHTML+"}");var c=[],e=[],d=new u;b=b&&b.contextRequire||n;for(var f in a)c.push(f),e.push(a[f]);b(e,function(){for(var a=0;a<c.length;a++)g.setObject(c[a],arguments[a]);d.resolve(arguments)});return d.promise},_scanAmd:function(a,b){var c=new u,e=c.promise;c.resolve(!0);
var d=this;v("script[type\x3d'dojo/require']",a).forEach(function(a){e=e.then(function(){return d._require(a,b)});a.parentNode.removeChild(a)});return e},parse:function(a,b){!a||"string"==typeof a||"nodeType"in a||(b=a,a=b.rootNode);var e=a?l.byId(a):c.body();b=b||{};var d=b.template?{template:!0}:{},h=[],f=this;a=this._scanAmd(e,b).then(function(){return f.scan(e,b)}).then(function(a){return f._instantiate(a,d,b,!0)}).then(function(a){return h=h.concat(a)}).otherwise(function(a){console.error("dojo/parser::parse() error",
a);throw a;});g.mixin(h,a);return h}};m.parser=y;d.parseOnLoad&&r(100,y,"parse");return y})},"dojo/date/stamp":function(){define(["../_base/lang","../_base/array"],function(n,m){var g={};n.setObject("dojo.date.stamp",g);g.fromISOString=function(h,d){g._isoRegExp||(g._isoRegExp=/^(?:(\d{4})(?:-(\d{2})(?:-(\d{2}))?)?)?(?:T(\d{2}):(\d{2})(?::(\d{2})(.\d+)?)?((?:[+-](\d{2}):(\d{2}))|Z)?)?$/);var l=g._isoRegExp.exec(h);h=null;if(l){l.shift();l[1]&&l[1]--;l[6]&&(l[6]*=1E3);d&&(d=new Date(d),m.forEach(m.map("FullYear Month Date Hours Minutes Seconds Milliseconds".split(" "),
function(b){return d["get"+b]()}),function(b,a){l[a]=l[a]||b}));h=new Date(l[0]||1970,l[1]||0,l[2]||1,l[3]||0,l[4]||0,l[5]||0,l[6]||0);100>l[0]&&h.setFullYear(l[0]||1970);var c=0,k=l[7]&&l[7].charAt(0);"Z"!=k&&(c=60*(l[8]||0)+(Number(l[9])||0),"-"!=k&&(c*=-1));k&&(c-=h.getTimezoneOffset());c&&h.setTime(h.getTime()+6E4*c)}return h};g.toISOString=function(h,d){var g=function(a){return 10>a?"0"+a:a};d=d||{};var c=[],k=d.zulu?"getUTC":"get",b="";"time"!=d.selector&&(b=h[k+"FullYear"](),b=["0000".substr((b+
"").length)+b,g(h[k+"Month"]()+1),g(h[k+"Date"]())].join("-"));c.push(b);"date"!=d.selector&&(b=[g(h[k+"Hours"]()),g(h[k+"Minutes"]()),g(h[k+"Seconds"]())].join(":"),k=h[k+"Milliseconds"](),d.milliseconds&&(b+="."+(100>k?"0":"")+g(k)),d.zulu?b+="Z":"time"!=d.selector&&(h=h.getTimezoneOffset(),d=Math.abs(h),b+=(0<h?"-":"+")+g(Math.floor(d/60))+":"+g(d%60)),c.push(b));return c.join("T")};return g})},"esri/core/domUtils":function(){define(["dojo/on","dojo/dom-style","dojo/has"],function(n,m,g){var h=
{show:function(d){if(d=h.getNode(d))d.style.display="block"},getNode:function(d){return d&&d.domNode||d},hide:function(d){if(d=h.getNode(d))d.style.display="none"},toggle:function(d){if(d=h.getNode(d))d.style.display="none"===d.style.display?"block":"none"},documentBox:8>=g("ie")?{w:document.documentElement.clientWidth,h:document.documentElement.clientHeight}:{w:window.innerWidth,h:window.innerHeight},setScrollable:function(d){if(d=this.getNode(d)){var h=0,c=0,k=0,b=0,a=0,e=0;return[n(d,"touchstart",
function(g){h=g.touches[0].screenX;c=g.touches[0].screenY;k=d.scrollWidth;b=d.scrollHeight;a=d.clientWidth;e=d.clientHeight}),n(d,"touchmove",function(g){g.preventDefault();var l=d.firstChild;l instanceof Text&&(l=d.childNodes[1]);var n=l._currentX||0,u=l._currentY||0,n=n+(g.touches[0].screenX-h);0<n?n=0:0>n&&Math.abs(n)+a>k&&(n=-1*(k-a));l._currentX=n;u+=g.touches[0].screenY-c;0<u?u=0:0>u&&Math.abs(u)+e>b&&(u=-1*(b-e));l._currentY=u;m.set(l,{"-webkit-transition-property":"-webkit-transform","-webkit-transform":"translate("+
n+"px, "+u+"px)"});h=g.touches[0].screenX;c=g.touches[0].screenY})]}}};return h})},"esri/identity/Credential":function(){define(["./IdentityManagerBase"],function(n){return n.Credential})},"esri/identity/IdentityManagerBase":function(){define("../core/declare dojo/_base/config dojo/_base/lang dojo/_base/array dojo/Deferred dojo/_base/url dojo/sniff dojo/cookie dojo/io-query dojo/regexp ../kernel ../config ../core/lang ./ServerInfo ../core/urlUtils ../core/deferredUtils ../core/Accessor ../request ../core/Error ../core/Evented ./OAuthCredential ./OAuthInfo".split(" "),
function(n,m,g,h,d,l,c,k,b,a,e,u,w,v,A,r,G,D,x,t,y,p){var z={},F=function(a){var b=(new l(a.owningSystemUrl)).host;a=(new l(a.server)).host;var f=/.+\.arcgis\.com$/i;return f.test(b)&&f.test(a)},E=function(a,b){return!!(F(a)&&b&&h.some(b,function(b){return b.test(a.server)}))},B;n=n(t,{declaredClass:"esri.identity.IdentityManagerBase",constructor:function(){this._portalConfig=g.getObject("esriGeowConfig");this.serverInfos=[];this.oAuthInfos=[];this.credentials=[];this._soReqs=[];this._xoReqs=[];this._portals=
[];this._getOAuthHash()},defaultOAuthInfo:null,defaultTokenValidity:60,tokenValidity:null,signInPage:null,useSignInPage:!0,normalizeWebTierAuth:!1,_busy:null,_oAuthHash:null,_gwTokenUrl:"/sharing/generateToken",_agsRest:"/rest/services",_agsPortal:/\/sharing(\/|$)/i,_agsAdmin:/https?:\/\/[^\/]+\/[^\/]+\/admin\/?(\/.*)?$/i,_adminSvcs:/\/admin\/services(\/|$)/i,_agolSuffix:".arcgis.com",_gwDomains:[{regex:/https?:\/\/www\.arcgis\.com/i,tokenServiceUrl:"https://www.arcgis.com/sharing/generateToken"},
{regex:/https?:\/\/dev\.arcgis\.com/i,tokenServiceUrl:"https://dev.arcgis.com/sharing/generateToken"},{regex:/https?:\/\/.*dev[^.]*\.arcgis\.com/i,tokenServiceUrl:"https://devext.arcgis.com/sharing/generateToken"},{regex:/https?:\/\/.*qa[^.]*\.arcgis\.com/i,tokenServiceUrl:"https://qaext.arcgis.com/sharing/generateToken"},{regex:/https?:\/\/.*.arcgis\.com/i,tokenServiceUrl:"https://www.arcgis.com/sharing/generateToken"}],_legacyFed:[],_regexSDirUrl:/http.+\/rest\/services\/?/ig,_regexServerType:/(\/(MapServer|GeocodeServer|GPServer|GeometryServer|ImageServer|NAServer|FeatureServer|GeoDataServer|GlobeServer|MobileServer|GeoenrichmentServer|VectorTileServer|SceneServer)).*/ig,
_gwUser:/http.+\/users\/([^\/]+)\/?.*/i,_gwItem:/http.+\/items\/([^\/]+)\/?.*/i,_gwGroup:/http.+\/groups\/([^\/]+)\/?.*/i,_errorCodes:[499,498,403,401],_rePortalTokenSvc:/\/sharing(\/rest)?\/generatetoken/i,_publicUrls:[/\/arcgis\/tokens/i,/\/sharing(\/rest)?\/generatetoken/i,/\/rest\/info/i],_createDefaultOAuthInfo:!0,_hasTestedIfAppIsOnPortal:!1,registerServers:function(a){var b=this.serverInfos;b?(a=h.filter(a,function(a){return!this.findServerInfo(a.server)},this),this.serverInfos=b.concat(a)):
this.serverInfos=a;h.forEach(a,function(a){a.owningSystemUrl&&this._portals.push(a.owningSystemUrl);if(a.hasPortal){this._portals.push(a.server);var b=u.request.corsEnabledServers,f=this._getOrigin(a.tokenServiceUrl);A.canUseXhr(a.server)||b.push(a.server.replace(/^https?:\/\//i,""));A.canUseXhr(f)||b.push(f.replace(/^https?:\/\//i,""))}},this)},registerOAuthInfos:function(a){var b=this.oAuthInfos;b?(a=h.filter(a,function(a){return!this.findOAuthInfo(a.portalUrl)},this),this.oAuthInfos=b.concat(a)):
this.oAuthInfos=a},registerToken:function(a){a=g.mixin({},a);var b=this._sanitizeUrl(a.server),f=this.findServerInfo(b),c=this._isServerRsrc(b),e=!0,d;f||(f=new v,f.server=this._getServerInstanceRoot(b),c?f.hasServer=!0:(f.tokenServiceUrl=this._getTokenSvcUrl(b),f.hasPortal=!0),this.registerServers([f]));(d=this._findCredential(b))?(delete a.server,g.mixin(d,a),e=!1):(d=new B({userId:a.userId,server:f.server,token:a.token,expires:a.expires,ssl:a.ssl,scope:c?"server":"portal"}),d.resources=[b],this.credentials.push(d));
d.emitTokenChange(!1);e||d.refreshServerTokens()},toJSON:function(){return w.fixJson({serverInfos:h.map(this.serverInfos,function(a){return a.toJSON()}),oAuthInfos:h.map(this.oAuthInfos,function(a){return a.toJSON()}),credentials:h.map(this.credentials,function(a){return a.toJSON()})})},initialize:function(a){if(a){g.isString(a)&&(a=JSON.parse(a));var b=a.serverInfos,f=a.oAuthInfos;a=a.credentials;if(b){var c=[];h.forEach(b,function(a){a.server&&a.tokenServiceUrl&&c.push(a.declaredClass?a:new v(a))});
c.length&&this.registerServers(c)}if(f){var e=[];h.forEach(f,function(a){a.appId&&e.push(a.declaredClass?a:new p(a))});e.length&&this.registerOAuthInfos(e)}a&&h.forEach(a,function(a){a.server&&a.token&&a.expires&&a.expires>(new Date).getTime()&&(a=a.declaredClass?a:new B(a),a.emitTokenChange(),this.credentials.push(a))},this)}},findServerInfo:function(a){var b;a=this._sanitizeUrl(a);h.some(this.serverInfos,function(f){this._hasSameServerInstance(f.server,a)&&(b=f);return!!b},this);return b},findOAuthInfo:function(a){var b;
a=this._sanitizeUrl(a);h.some(this.oAuthInfos,function(f){this._hasSameServerInstance(f.portalUrl,a)&&(b=f);return!!b},this);return b},findCredential:function(a,b){var f,c;a=this._sanitizeUrl(a);c=this._isServerRsrc(a)?"server":"portal";b?h.some(this.credentials,function(e){this._hasSameServerInstance(e.server,a)&&b===e.userId&&e.scope===c&&(f=e);return!!f},this):h.some(this.credentials,function(b){this._hasSameServerInstance(b.server,a)&&-1!==this._getIdenticalSvcIdx(a,b)&&b.scope===c&&(f=b);return!!f},
this);return f},getCredential:function(a,b){var f,c,e=!0;w.isDefined(b)&&(g.isObject(b)?(f=!!b.token,c=b.error,e=!1!==b.prompt):f=b);a=this._sanitizeUrl(a);var d=r.makeDeferredCancellingPending(),h=this._isAdminResource(a),q=f&&this._doPortalSignIn(a)?this._getEsriAuthCookie():null;if((f=f?this.findCredential(a):null)&&c&&498===c.code)f.destroy(),q&&q.token===b.token&&k("esri_auth",null,{expires:-1,path:"/",domain:document.domain});else if(q||f)return a=new x("identity-manager:not-authorized","You are currently signed in as: '"+
(q&&q.email||f&&f.userId)+"'. You do not have access to this resource: "+a,{error:c}),d.reject(a),d.promise;if(c=this._findCredential(a,b))return d.resolve(c),d.promise;c=this.findServerInfo(a);if(c)!c.hasServer&&this._isServerRsrc(a)&&(c._restInfoPms=this._getTokenSvcUrl(a),c.hasServer=!0);else{q=this._getTokenSvcUrl(a);if(!q)return a=new x("identity-manager:unknown-resource","Unknown resource - could not find token service endpoint."),d.reject(a),d.promise;c=new v;c.server=this._getServerInstanceRoot(a);
g.isString(q)?(c.tokenServiceUrl=q,c.hasPortal=!0):(c._restInfoPms=q,c.hasServer=!0);this.registerServers([c])}e&&c.hasPortal&&void 0===c._selfReq&&!this._findOAuthInfo(a)&&(c._selfReq={owningTenant:b&&b.owningTenant,selfDfd:this._getPortalSelf(c.tokenServiceUrl.replace(this._rePortalTokenSvc,"/sharing/rest/portals/self"),a)});return this._enqueue(a,c,b,d,h)},getResourceName:function(a){return this._isRESTService(a)?a.replace(this._regexSDirUrl,"").replace(this._regexServerType,"")||"":this._gwUser.test(a)&&
a.replace(this._gwUser,"$1")||this._gwItem.test(a)&&a.replace(this._gwItem,"$1")||this._gwGroup.test(a)&&a.replace(this._gwGroup,"$1")||""},generateToken:function(a,b,c){var f,d,h,q,k,m,n=this._rePortalTokenSvc.test(a.tokenServiceUrl),p=new l(window.location.href.toLowerCase()),u=this._getEsriAuthCookie(),r,v=!b;q=a.shortLivedTokenValidity;var H;b&&(H=e.id.tokenValidity||q||e.id.defaultTokenValidity,H>q&&(H=q));c&&(f=c.isAdmin,d=c.serverUrl,h=c.token,m=c.ssl,a.customParameters=c.customParameters);
f?q=a.adminTokenServiceUrl:(q=a.tokenServiceUrl,k=new l(q.toLowerCase()),u&&(r=(r=u.auth_tier)&&r.toLowerCase()),("web"===r||a.webTierAuth)&&c&&c.serverUrl&&!m&&"http"===p.scheme&&(A.hasSameOrigin(p.uri,q,!0)||"https"===k.scheme&&p.host===k.host&&"7080"===p.port&&"7443"===k.port)&&(q=q.replace(/^https:/i,"http:").replace(/:7443/i,":7080")),v&&n&&(q=q.replace(/\/rest/i,"")));c=g.mixin({query:g.mixin({request:"getToken",username:b&&b.username,password:b&&b.password,serverUrl:d,token:h,expiration:H,
referer:f||n?window.location.host:null,client:f?"referer":null,f:"json"},a.customParameters),method:v?"auto":"post",authMode:"anonymous",useProxy:this._useProxy(a,c),responseType:"json",callbackParamName:v?"callback":void 0},c&&c.ioArgs);n||(c.withCredentials=!1);return D(q,c).then(function(f){f=f.data;if(!f||!f.token)return new x("identity-manager:authentication-failed","Unable to generate token");var c=a.server;z[c]||(z[c]={});b&&(z[c][b.username]=b.password);f.validity=H;return f})},isBusy:function(){return!!this._busy},
checkSignInStatus:function(a){return this.getCredential(a,{prompt:!1}).then(function(a){return a.token?D(a.server+("portal"===a.scope?"/sharing/rest":"/rest/services"),{query:{f:"json",token:a.token},callbackParamName:"callback",authMode:"anonymous"}).then(function(){return a}).otherwise(function(b){if(498===b.code)throw a.destroy(),b=Error("User is not signed in."),b.code="IdentityManagerBase.6",b.log=!!m.isDebug,b;return a}):a})},setRedirectionHandler:function(a){this._redirectFunc=a},setProtocolErrorHandler:function(a){this._protocolFunc=
a},signIn:function(){},oAuthSignIn:function(){},destroyCredentials:function(){if(this.credentials){var a=this.credentials.slice();h.forEach(a,function(a){a.destroy()})}this.emit("credentials-destroy")},_getOAuthHash:function(){var a=window.location.hash;if(a){"#"===a.charAt(0)&&(a=a.substring(1));var a=b.queryToObject(a),e=!1;a.access_token&&a.expires_in&&a.state&&a.hasOwnProperty("username")?(a.state=JSON.parse(a.state),this._oAuthHash=a,e=!0):a.error&&a.error_description&&(console.log("IdentityManager OAuth Error: ",
a.error," - ",a.error_description),"access_denied"===a.error&&(e=!0));e&&(!c("ie")||8<c("ie"))&&(window.location.hash="")}},_findCredential:function(a,b){var f=-1,c,e,d,q=b&&b.token;b=b&&b.resource;var k=this._isServerRsrc(a)?"server":"portal",g=h.filter(this.credentials,function(b){return this._hasSameServerInstance(b.server,a)&&b.scope===k},this);a=b||a;if(g.length)if(1===g.length)if(b=g[0],e=(c=(d=this.findServerInfo(b.server))&&d.owningSystemUrl)&&this.findCredential(c,b.userId),f=this._getIdenticalSvcIdx(a,
b),q)-1!==f&&(b.resources.splice(f,1),this._removeResource(a,e));else return-1===f&&b.resources.push(a),this._addResource(a,e),b;else{var l,m;h.some(g,function(b){m=this._getIdenticalSvcIdx(a,b);return-1!==m?(l=b,e=(c=(d=this.findServerInfo(l.server))&&d.owningSystemUrl)&&this.findCredential(c,l.userId),f=m,!0):!1},this);if(q)l&&(l.resources.splice(f,1),this._removeResource(a,e));else if(l)return this._addResource(a,e),l}},_findOAuthInfo:function(a){var b=this.findOAuthInfo(a);b||h.some(this.oAuthInfos,
function(f){this._isIdProvider(f.portalUrl,a)&&(b=f);return!!b},this);return b},_addResource:function(a,b){b&&-1===this._getIdenticalSvcIdx(a,b)&&b.resources.push(a)},_removeResource:function(a,b){var f=-1;b&&(f=this._getIdenticalSvcIdx(a,b),-1<f&&b.resources.splice(f,1))},_useProxy:function(a,b){return b&&b.isAdmin&&!A.hasSameOrigin(a.adminTokenServiceUrl,window.location.href)||!this._isPortalDomain(a.tokenServiceUrl)&&10.1==a.currentVersion&&!A.hasSameOrigin(a.tokenServiceUrl,window.location.href)},
_getOrigin:function(a){a=new l(a);return a.scheme+"://"+a.host+(w.isDefined(a.port)?":"+a.port:"")},_getServerInstanceRoot:function(a){var b=a.toLowerCase(),f=b.indexOf(this._agsRest);-1===f&&this._isAdminResource(a)&&(f=b.indexOf("/admin"));-1===f&&(f=b.indexOf("/sharing"));-1===f&&"/"===b.substr(-1)&&(f=b.length-1);return-1<f?a.substring(0,f):a},_hasSameServerInstance:function(a,b){"/"===a.substr(-1)&&(a=a.slice(0,-1));a=a.toLowerCase();b=this._getServerInstanceRoot(b).toLowerCase();a=a.substr(a.indexOf(":"));
b=b.substr(b.indexOf(":"));return a===b},_sanitizeUrl:function(a){a=A.normalize(g.trim(a));var b=(u.request.proxyUrl||"").toLowerCase(),f=b?a.toLowerCase().indexOf(b+"?"):-1;-1!==f&&(a=a.substring(f+b.length+1));return A.urlToObject(a).path},_isRESTService:function(a){return-1<a.indexOf(this._agsRest)},_isAdminResource:function(a){return this._agsAdmin.test(a)||this._adminSvcs.test(a)},_isServerRsrc:function(a){return this._isRESTService(a)||this._isAdminResource(a)},_isIdenticalService:function(a,
b){var c;this._isRESTService(a)&&this._isRESTService(b)?(a=this._getSuffix(a).toLowerCase(),b=this._getSuffix(b).toLowerCase(),c=a===b,c||(c=/(.*)\/(MapServer|FeatureServer).*/ig,c=a.replace(c,"$1")===b.replace(c,"$1"))):this._isAdminResource(a)&&this._isAdminResource(b)?c=!0:this._isServerRsrc(a)||this._isServerRsrc(b)||!this._isPortalDomain(a)||(c=!0);return c},_isPortalDomain:function(a){a=a.toLowerCase();var b=(new l(a)).authority,c=this._portalConfig,f=-1!==b.indexOf(this._agolSuffix);!f&&c&&
(f=this._hasSameServerInstance(this._getServerInstanceRoot(c.restBaseUrl),a));f||(!this._arcgisUrl&&(c=g.getObject("esri.arcgis.utils.arcgisUrl"))&&(this._arcgisUrl=(new l(c)).authority),this._arcgisUrl&&(f=this._arcgisUrl.toLowerCase()===b));f||(f=h.some(this._portals,function(b){return this._hasSameServerInstance(b,a)},this));return f=f||this._agsPortal.test(a)},_isIdProvider:function(a,b){var c=-1,f=-1;h.forEach(this._gwDomains,function(e,d){-1===c&&e.regex.test(a)&&(c=d);-1===f&&e.regex.test(b)&&
(f=d)});var e=!1;if(-1<c&&-1<f)if(0===c||4===c){if(0===f||4===f)e=!0}else if(1===c){if(1===f||2===f)e=!0}else 2===c?2===f&&(e=!0):3===c&&3===f&&(e=!0);if(!e){var d=this.findServerInfo(b),k=d&&d.owningSystemUrl;k&&F(d)&&this._isPortalDomain(k)&&this._isIdProvider(a,k)&&(e=!0)}return e},_isPublic:function(a){a=this._sanitizeUrl(a);return h.some(this._publicUrls,function(b){return b.test(a)})},_getIdenticalSvcIdx:function(a,b){var c=-1;h.some(b.resources,function(b,f){return this._isIdenticalService(a,
b)?(c=f,!0):!1},this);return c},_getSuffix:function(a){return a.replace(this._regexSDirUrl,"").replace(this._regexServerType,"$1")},_getTokenSvcUrl:function(a){var b,c;if((b=this._isRESTService(a))||this._isAdminResource(a))return c=a.toLowerCase().indexOf(b?this._agsRest:"/admin/"),b=a.substring(0,c)+"/admin/generateToken",a=a.substring(0,c)+"/rest/info",c=D(a,{query:{f:"json"},responseType:"json",callbackParamName:"callback"}).then(function(a){return a.data}),{adminUrl:b,promise:c};if(this._isPortalDomain(a)){var f=
"";h.some(this._gwDomains,function(b){b.regex.test(a)&&(f=b.tokenServiceUrl);return!!f});f||h.some(this._portals,function(b){this._hasSameServerInstance(b,a)&&(f=b+this._gwTokenUrl);return!!f},this);f||(c=a.toLowerCase().indexOf("/sharing"),-1!==c&&(f=a.substring(0,c)+this._gwTokenUrl));f||(f=this._getOrigin(a)+this._gwTokenUrl);f&&(b=(new l(a)).port,/^http:\/\//i.test(a)&&"7080"===b&&(f=f.replace(/:7080/i,":7443")),f=f.replace(/http:/i,"https:"));return f}if(-1!==a.toLowerCase().indexOf("premium.arcgisonline.com"))return"https://premium.arcgisonline.com/server/tokens"},
_getPortalSelf:function(a,b){"https:"===window.location.protocol?a=a.replace(/^http:/i,"https:").replace(/:7080/i,":7443"):/^http:/i.test(b)&&(a=a.replace(/^https:/i,"http:").replace(/:7443/i,":7080"));return D(a,{query:{f:"json"},responseType:"json",callbackParamName:"callback",crossOrigin:!1,authMode:"anonymous"}).then(function(a){return a.data})},_hasPortalSession:function(){return!!this._getEsriAuthCookie()},_getEsriAuthCookie:function(){var a=null;if(k.isSupported()){var b=this._getAllCookies("esri_auth"),
c;for(c=0;c<b.length;c++){var e=JSON.parse(b[c]);if(e.portalApp){a=e;break}}}a&&(b=null,a.expires&&("number"===typeof a.expires?b=a.expires:"string"===typeof a.expires&&(b=Date.parse(a.expires)),isNaN(b)&&(b=null),a.expires=b),b&&b<Date.now()&&(a=null));return a},_getAllCookies:function(b){var c=[],f=document.cookie.match(new RegExp("(?:^|; )"+a.escapeString(b)+"\x3d([^;]*)","g"));if(f)for(b=0;b<f.length;b++){var e=f[b],d=e.indexOf("\x3d");-1<d&&(e=e.substring(d+1),c.push(decodeURIComponent(e)))}return c},
_doPortalSignIn:function(a){if(k.isSupported()){var b=this._getEsriAuthCookie(),c=this._portalConfig,f=window.location.href,e=this.findServerInfo(a);if(this.useSignInPage&&(c||this._isPortalDomain(f)||b)&&(e?e.hasPortal||e.owningSystemUrl&&this._isPortalDomain(e.owningSystemUrl):this._isPortalDomain(a))&&(this._isIdProvider(f,a)||c&&(this._hasSameServerInstance(this._getServerInstanceRoot(c.restBaseUrl),a)||this._isIdProvider(c.restBaseUrl,a))||A.hasSameOrigin(f,a,!0)))return!0}return!1},_checkProtocol:function(a,
b,c,e){var f=!0;e=e?b.adminTokenServiceUrl:b.tokenServiceUrl;0!==g.trim(e).toLowerCase().indexOf("https:")||0===window.location.href.toLowerCase().indexOf("https:")||u.request.useCors&&(A.canUseXhr(e)||A.canUseXhr(A.getProxyUrl(!0).path))||(f=this._protocolFunc?!!this._protocolFunc({resourceUrl:a,serverInfo:b}):!1,f||(a=new x("identity-manager:aborted","Aborted the Sign-In process to avoid sending password over insecure connection."),c(a)));return f},_enqueue:function(a,b,c,e,d,h){e||(e=r.makeDeferredCancellingPending());
e.resUrl_=a;e.sinfo_=b;e.options_=c;e.admin_=d;e.refresh_=h;this._busy?this._hasSameServerInstance(this._getServerInstanceRoot(a),this._busy.resUrl_)?(this._oAuthDfd&&this._oAuthDfd.oAuthWin_&&this._oAuthDfd.oAuthWin_.focus(),this._soReqs.push(e)):this._xoReqs.push(e):this._doSignIn(e);return e.promise},_doSignIn:function(a){this._busy=a;var b=this,c=function(c){var e=a.options_&&a.options_.resource,f=a.resUrl_,d=a.refresh_,k=!1;-1===h.indexOf(b.credentials,c)&&(d&&-1!==h.indexOf(b.credentials,d)?
(d.userId=c.userId,d.token=c.token,d.expires=c.expires,d.validity=c.validity,d.ssl=c.ssl,d.creationTime=c.creationTime,k=!0,c=d):b.credentials.push(c));c.resources||(c.resources=[]);c.resources.push(e||f);c.scope=b._isServerRsrc(f)?"server":"portal";c.emitTokenChange();var e=b._soReqs,g={};b._soReqs=[];h.forEach(e,function(a){if(!this._isIdenticalService(f,a.resUrl_)){var b=this._getSuffix(a.resUrl_);g[b]||(g[b]=!0,c.resources.push(a.resUrl_))}},b);a.resolve(c);h.forEach(e,function(a){this._hasSameServerInstance(this._getServerInstanceRoot(f),
a.resUrl_)?a.resolve(c):this._soReqs.push(a)},b);b._busy=a.resUrl_=a.sinfo_=a.refresh_=null;k||b.emit("credential-create",{credential:c});b._soReqs.length?b._doSignIn(b._soReqs.shift()):b._xoReqs.length&&b._doSignIn(b._xoReqs.shift())},e=function(c){a.reject(c);b._busy=a.resUrl_=a.sinfo_=a.refresh_=null;b._soReqs.length?b._doSignIn(b._soReqs.shift()):b._xoReqs.length&&b._doSignIn(b._xoReqs.shift())},f=function(f,d,h,k){var g=a.sinfo_,l=!a.options_||!1!==a.options_.prompt,m=g.hasPortal&&b._findOAuthInfo(a.resUrl_);
b._doPortalSignIn(a.resUrl_)?(f=b._getEsriAuthCookie(),m=b._portalConfig,f?(g.webTierAuth||"web"!==(f.auth_tier&&f.auth_tier.toLowerCase())||(g.webTierAuth=!0),c(new B({userId:f.email,server:g.server,token:f.token,expires:f.expires}))):l?(l="",f=window.location.href,l=b.signInPage?b.signInPage:m?m.baseUrl+m.signin:b._isIdProvider(f,a.resUrl_)?b._getOrigin(f)+"/home/signin.html":g.tokenServiceUrl.replace(b._rePortalTokenSvc,"")+"/home/signin.html",l=l.replace(/http:/i,"https:"),m&&!1===m.useSSL&&(l=
l.replace(/https:/i,"http:")),0===f.toLowerCase().replace("https","http").indexOf(l.toLowerCase().replace("https","http"))?(g=new x("identity-manager:unexpected-error","Cannot redirect to Sign-In page from within Sign-In page. URL of the resource that triggered this workflow: "+a.resUrl_),e(g)):b._redirectFunc?b._redirectFunc({signInPage:l,returnUrlParamName:"returnUrl",returnUrl:f,resourceUrl:a.resUrl_,serverInfo:g}):window.location=l+"?returnUrl\x3d"+window.escape(f)):(g=new x("identity-manager:not-authenticated",
"User is not signed in."),e(g))):f?c(new B({userId:f,server:g.server,token:h,expires:w.isDefined(k)?Number(k):null,ssl:!!d})):m?(f=m._oAuthCred,f||(d=new y(m,window.localStorage),h=new y(m,window.sessionStorage),d.isValid()&&h.isValid()?d.expires>h.expires?(f=d,h.destroy()):(f=h,d.destroy()):f=d.isValid()?d:h,m._oAuthCred=f),f.isValid()?c(new B({userId:f.userId,server:g.server,token:f.token,expires:f.expires,ssl:f.ssl,_oAuthCred:f})):b._oAuthHash&&b._oAuthHash.state.portalUrl===m.portalUrl?(l=b._oAuthHash,
g=new B({userId:l.username,server:g.server,token:l.access_token,expires:(new Date).getTime()+1E3*Number(l.expires_in),ssl:"true"===l.ssl,oAuthState:l.state,_oAuthCred:f}),f.storage=l.persist?window.localStorage:window.sessionStorage,f.token=g.token,f.expires=g.expires,f.userId=g.userId,f.ssl=g.ssl,f.save(),b._oAuthHash=null,c(g)):l?a._pendingDfd=b.oAuthSignIn(a.resUrl_,g,m,a.options_).then(c,e):(g=new x("identity-manager:not-authenticated","User is not signed in."),e(g))):l?b._checkProtocol(a.resUrl_,
g,e,a.admin_)&&(l=a.options_,a.admin_&&(l=l||{},l.isAdmin=!0),a._pendingDfd=b.signIn(a.resUrl_,g,l).then(c,e)):(g=new x("identity-manager:not-authenticated","User is not signed in."),e(g))},d=function(){var f=a.sinfo_,d=f.owningSystemUrl,g=a.options_,k,l,m,n;g&&(k=g.token,l=g.error,m=g.prompt);n=b._findCredential(d,{token:k,resource:a.resUrl_});!n&&F(f)&&h.some(b.credentials,function(a){this._isIdProvider(d,a.server)&&(n=a);return!!n},b);n?(g=b.findCredential(a.resUrl_,n.userId))?c(g):E(f,b._legacyFed)?
(g=n.toJSON(),g.server=f.server,g.resources=null,c(new B(g))):(a._pendingDfd=b.generateToken(b.findServerInfo(n.server),null,{serverUrl:a.resUrl_,token:n.token,ssl:n.ssl})).then(function(b){c(new B({userId:n.userId,server:f.server,token:b.token,expires:w.isDefined(b.expires)?Number(b.expires):null,ssl:!!b.ssl,isAdmin:a.admin_,validity:b.validity}))},e):(b._busy=null,k&&(a.options_.token=null),(a._pendingDfd=b.getCredential(d.replace(/\/?$/,"/sharing"),{resource:a.resUrl_,owningTenant:f.owningTenant,
token:k,error:l,prompt:m})).then(function(c){b._enqueue(a.resUrl_,a.sinfo_,a.options_,a,a.admin_)},function(a){e(a)}))},k=a.sinfo_.owningSystemUrl,l=this._isServerRsrc(a.resUrl_),m=a.sinfo_._restInfoPms;m?m.promise.then(function(c){var e=a.sinfo_;e.adminTokenServiceUrl=e._restInfoPms.adminUrl;e._restInfoPms=null;e.tokenServiceUrl=g.getObject("authInfo.tokenServicesUrl",!1,c)||g.getObject("authInfo.tokenServiceUrl",!1,c)||g.getObject("tokenServiceUrl",!1,c);e.shortLivedTokenValidity=g.getObject("authInfo.shortLivedTokenValidity",
!1,c);e.currentVersion=c.currentVersion;e.owningTenant=c.owningTenant;(c=e.owningSystemUrl=c.owningSystemUrl)&&b._portals.push(c);l&&c?d():f()},function(){a.sinfo_._restInfoPms=null;var b=new x("identity-manager:server-identification-failed","Unknown resource - could not find token service endpoint.");e(b)}):l&&k?d():a.sinfo_._selfReq?a.sinfo_._selfReq.selfDfd.then(function(c){var e={},f,d,h,g;c&&(f=c.user&&c.user.username,e.username=f,e.allSSL=c.allSSL,d=c.supportsOAuth,h=c.currentVersion,"multitenant"===
c.portalMode&&(g=c.customBaseUrl));a.sinfo_.webTierAuth=!!f;return f&&b.normalizeWebTierAuth?b.generateToken(a.sinfo_,null,{ssl:e.allSSL}).always(function(a){e.portalToken=a&&a.token;e.tokenExpiration=a&&a.expires;return e}):!f&&d&&4.4<=parseFloat(h)&&!b._doPortalSignIn(a.resUrl_)?b._generateOAuthInfo({portalUrl:a.sinfo_.server,customBaseUrl:g,owningTenant:a.sinfo_._selfReq.owningTenant}).always(function(){return e}):e}).always(function(b){a.sinfo_._selfReq=null;b?f(b.username,b.allSSL,b.portalToken,
b.tokenExpiration):f()}):f()},_generateOAuthInfo:function(a){var b=this,c,e=a.portalUrl,f=a.customBaseUrl,h=a.owningTenant;if(a=!this.defaultOAuthInfo&&this._createDefaultOAuthInfo&&!this._hasTestedIfAppIsOnPortal){c=window.location.href;var g=c.indexOf("?");-1<g&&(c=c.slice(0,g));g=c.search(/\/(apps|home)\//);c=-1<g?c.slice(0,g):null}a&&c?(this._hasTestedIfAppIsOnPortal=!0,a=D(c+"/sharing/rest",{query:{f:"json"},responseType:"json"}).then(function(){b.defaultOAuthInfo=new p({appId:"arcgisonline",
popup:!0,popupCallbackUrl:c+"/home/oauth-callback.html"})})):(a=new d,a.resolve(),a=a.promise);return a.then(function(){if(b.defaultOAuthInfo)return e=e.replace(/^http:/i,"https:"),D(e+"/sharing/rest/oauth2/validateRedirectUri",{query:{accountId:h,client_id:b.defaultOAuthInfo.appId,redirect_uri:A.makeAbsolute(b.defaultOAuthInfo.popupCallbackUrl),f:"json"},responseType:"json",callbackParamName:"callback"}).then(function(a){if(a.data.valid){var c=b.defaultOAuthInfo.clone();c.portalUrl=a.data.urlKey&&
f?"https://"+a.data.urlKey+"."+f:e;b.oAuthInfos.push(c)}})})}});B=G.createSubclass([t],{declaredClass:"esri.identity.Credential",constructor:function(a){a&&a._oAuthCred&&(this._oAuthCred=a._oAuthCred)},initialize:function(){this.resources=this.resources||[];w.isDefined(this.creationTime)||(this.creationTime=(new Date).getTime())},_oAuthCred:null,properties:{creationTime:{},expires:{},isAdmin:{},oAuthState:{},resources:{},scope:{},server:{},ssl:{},token:{},tokenRefreshBuffer:2,userId:{},validity:{}},
refreshToken:function(){var a=this,b=this.resources&&this.resources[0],c=e.id.findServerInfo(this.server),d=c&&c.owningSystemUrl,g=!!d&&"server"===this.scope,k=g&&E(c,e.id._legacyFed),l=g&&e.id.findServerInfo(d),m,n=(m=c.webTierAuth)&&e.id.normalizeWebTierAuth,p=z[this.server],p=p&&p[this.userId],u={username:this.userId,password:p},r;if(!m||n)if(g&&!l&&h.some(e.id.serverInfos,function(a){e.id._isIdProvider(d,a.server)&&(l=a);return!!l}),m=l&&e.id.findCredential(l.server,this.userId),!g||m)if(k)m.refreshToken();
else{if(g)r={serverUrl:b,token:m&&m.token,ssl:m&&m.ssl};else if(n)u=null,r={ssl:this.ssl};else if(p)this.isAdmin&&(r={isAdmin:!0});else{var v;b&&(b=e.id._sanitizeUrl(b),this._enqueued=1,v=e.id._enqueue(b,c,null,null,this.isAdmin,this),v.then(function(){a._enqueued=0;a.refreshServerTokens()}).then(null,function(){a._enqueued=0}));return v}return e.id.generateToken(g?l:c,g?null:u,r).then(function(b){a.token=b.token;a.expires=w.isDefined(b.expires)?Number(b.expires):null;a.creationTime=(new Date).getTime();
a.validity=b.validity;a.emitTokenChange();a.refreshServerTokens()}).then(null,function(){})}},refreshServerTokens:function(){"portal"===this.scope&&h.forEach(e.id.credentials,function(a){var b=e.id.findServerInfo(a.server),c=b&&b.owningSystemUrl;a!==this&&a.userId===this.userId&&c&&"server"===a.scope&&(e.id._hasSameServerInstance(this.server,c)||e.id._isIdProvider(c,this.server))&&(E(b,e.id._legacyFed)?(a.token=this.token,a.expires=this.expires,a.creationTime=this.creationTime,a.validity=this.validity,
a.emitTokenChange()):a.refreshToken())},this)},emitTokenChange:function(a){clearTimeout(this._refreshTimer);var b=this.server&&e.id.findServerInfo(this.server),c=(b=b&&b.owningSystemUrl)&&e.id.findServerInfo(b);!1!==a&&(!b||"portal"===this.scope||c&&c.webTierAuth&&!e.id.normalizeWebTierAuth)&&(w.isDefined(this.expires)||w.isDefined(this.validity))&&this._startRefreshTimer();this.emit("token-change")},destroy:function(){this.userId=this.server=this.token=this.expires=this.validity=this.resources=this.creationTime=
null;this._oAuthCred&&(this._oAuthCred.destroy(),this._oAuthCred=null);var a=h.indexOf(e.id.credentials,this);-1<a&&e.id.credentials.splice(a,1);this.emitTokenChange();this.emit("destroy")},toJSON:function(){var a=w.fixJson({userId:this.userId,server:this.server,token:this.token,expires:this.expires,validity:this.validity,ssl:this.ssl,isAdmin:this.isAdmin,creationTime:this.creationTime,scope:this.scope}),b=this.resources;b&&0<b.length&&(a.resources=b.slice());return a},_startRefreshTimer:function(){clearTimeout(this._refreshTimer);
var a=6E4*this.tokenRefreshBuffer,b=(this.validity?this.creationTime+6E4*this.validity:this.expires)-(new Date).getTime();0>b&&(b=0);this._refreshTimer=setTimeout(g.hitch(this,this.refreshToken),b>a?b-a:b)}});n.Credential=B;return n})},"dojo/cookie":function(){define(["./_base/kernel","./regexp"],function(n,m){n.cookie=function(g,h,d){var l=document.cookie,c;if(1==arguments.length)c=(c=l.match(new RegExp("(?:^|; )"+m.escapeString(g)+"\x3d([^;]*)")))?decodeURIComponent(c[1]):void 0;else{d=d||{};l=
d.expires;if("number"==typeof l){var k=new Date;k.setTime(k.getTime()+864E5*l);l=d.expires=k}l&&l.toUTCString&&(d.expires=l.toUTCString());h=encodeURIComponent(h);var l=g+"\x3d"+h,b;for(b in d)l+="; "+b,k=d[b],!0!==k&&(l+="\x3d"+k);document.cookie=l}return c};n.cookie.isSupported=function(){"cookieEnabled"in navigator||(this("__djCookieTest__","CookiesAllowed"),navigator.cookieEnabled="CookiesAllowed"==this("__djCookieTest__"),navigator.cookieEnabled&&this("__djCookieTest__","",{expires:-1}));return navigator.cookieEnabled};
return n.cookie})},"esri/identity/ServerInfo":function(){define("require exports ../core/tsSupport/declareExtendsHelper ../core/tsSupport/decorateHelper ../core/accessorSupport/decorators ../core/JSONSupport".split(" "),function(n,m,g,h,d,l){return function(c){function k(b){b=c.call(this)||this;b.adminTokenServiceUrl=null;b.currentVersion=null;b.hasPortal=null;b.hasServer=null;b.owningSystemUrl=null;b.owningTenant=null;b.server=null;b.shortLivedTokenValidity=null;b.tokenServiceUrl=null;b.webTierAuth=
null;return b}g(k,c);h([d.property({json:{write:!0}})],k.prototype,"adminTokenServiceUrl",void 0);h([d.property({json:{write:!0}})],k.prototype,"currentVersion",void 0);h([d.property({json:{write:!0}})],k.prototype,"hasPortal",void 0);h([d.property({json:{write:!0}})],k.prototype,"hasServer",void 0);h([d.property({json:{write:!0}})],k.prototype,"owningSystemUrl",void 0);h([d.property({json:{write:!0}})],k.prototype,"owningTenant",void 0);h([d.property({json:{write:!0}})],k.prototype,"server",void 0);
h([d.property({json:{write:!0}})],k.prototype,"shortLivedTokenValidity",void 0);h([d.property({json:{write:!0}})],k.prototype,"tokenServiceUrl",void 0);h([d.property({json:{write:!0}})],k.prototype,"webTierAuth",void 0);return k=h([d.subclass("esri.identity.ServerInfo")],k)}(d.declared(l))})},"esri/identity/OAuthCredential":function(){define(["../core/declare"],function(n){return n(null,{declaredClass:"esri.identity.OAuthCredential",oAuthInfo:null,storage:null,expires:null,ssl:null,token:null,userId:null,
constructor:function(m,g){this.oAuthInfo=m;this.storage=g;this._init()},isValid:function(){var m=!1;if(this.oAuthInfo&&this.token&&this.userId){var g=(new Date).getTime();this.expires>g&&(this.expires-g)/1E3>60*this.oAuthInfo.minTimeUntilExpiration&&(m=!0)}return m},save:function(){if(this.storage){var m=this._load(),g=this.oAuthInfo;if(g&&g.authNamespace&&g.portalUrl){var h=m[g.authNamespace];h||(h=m[g.authNamespace]={});h[g.portalUrl]={expires:this.expires,ssl:this.ssl,token:this.token,userId:this.userId};
try{this.storage.setItem("esriJSAPIOAuth",JSON.stringify(m))}catch(d){console.log(d)}}}},destroy:function(){var m=this._load(),g=this.oAuthInfo;if(g&&g.authNamespace&&g.portalUrl&&this.storage){var h=m[g.authNamespace];if(h){delete h[g.portalUrl];try{this.storage.setItem("esriJSAPIOAuth",JSON.stringify(m))}catch(d){console.log(d)}}}g&&(this.oAuthInfo=g._oAuthCred=null)},_init:function(){var m=this._load(),g=this.oAuthInfo;g&&g.authNamespace&&g.portalUrl&&(m=m[g.authNamespace])&&(m=m[g.portalUrl])&&
(this.expires=m.expires,this.ssl=m.ssl,this.token=m.token,this.userId=m.userId)},_load:function(){var m={};if(this.storage){var g=this.storage.getItem("esriJSAPIOAuth");if(g)try{m=JSON.parse(g)}catch(h){console.log(h)}}return m}})})},"esri/identity/OAuthInfo":function(){define("require exports ../core/tsSupport/declareExtendsHelper ../core/tsSupport/decorateHelper ../core/accessorSupport/decorators ../core/JSONSupport".split(" "),function(n,m,g,h,d,l){return function(c){function k(a){a=c.call(this)||
this;a._oAuthCred=null;a.appId=null;a.authNamespace="/";a.expiration=20160;a.forceLogin=!1;a.locale=null;a.minTimeUntilExpiration=30;a.popup=!1;a.popupCallbackUrl="oauth-callback.html";a.popupWindowFeatures="height\x3d490,width\x3d800,resizable,scrollbars,status";a.portalUrl="https://www.arcgis.com";return a}g(k,c);b=k;k.prototype.clone=function(){return b.fromJSON(this.toJSON())};h([d.property({json:{write:!0}})],k.prototype,"appId",void 0);h([d.property({json:{write:!0}})],k.prototype,"authNamespace",
void 0);h([d.property({json:{write:!0}})],k.prototype,"expiration",void 0);h([d.property({json:{write:!0}})],k.prototype,"forceLogin",void 0);h([d.property({json:{write:!0}})],k.prototype,"locale",void 0);h([d.property({json:{write:!0}})],k.prototype,"minTimeUntilExpiration",void 0);h([d.property({json:{write:!0}})],k.prototype,"popup",void 0);h([d.property({json:{write:!0}})],k.prototype,"popupCallbackUrl",void 0);h([d.property({json:{write:!0}})],k.prototype,"popupWindowFeatures",void 0);h([d.property({json:{write:!0}})],
k.prototype,"portalUrl",void 0);return k=b=h([d.subclass("esri.identity.OAuthInfo")],k);var b}(d.declared(l))})},"dijit/form/Button":function(){define("require dojo/_base/declare dojo/dom-class dojo/has dojo/_base/kernel dojo/_base/lang dojo/ready ./_FormWidget ./_ButtonMixin dojo/text!./templates/Button.html ../a11yclick".split(" "),function(n,m,g,h,d,l,c,k,b,a){h("dijit-legacy-requires")&&c(0,function(){n(["dijit/form/DropDownButton","dijit/form/ComboButton","dijit/form/ToggleButton"])});c=m("dijit.form.Button"+
(h("dojo-bidi")?"_NoBidi":""),[k,b],{showLabel:!0,iconClass:"dijitNoIcon",_setIconClassAttr:{node:"iconNode",type:"class"},baseClass:"dijitButton",templateString:a,_setValueAttr:"valueNode",_setNameAttr:function(a){this.valueNode&&this.valueNode.setAttribute("name",a)},postCreate:function(){this.inherited(arguments);this._setLabelFromContainer()},_setLabelFromContainer:function(){this.containerNode&&!this.label&&(this.label=l.trim(this.containerNode.innerHTML),this.onLabelSet())},_setShowLabelAttr:function(a){this.containerNode&&
g.toggle(this.containerNode,"dijitDisplayNone",!a);this._set("showLabel",a)},setLabel:function(a){d.deprecated("dijit.form.Button.setLabel() is deprecated.  Use set('label', ...) instead.","","2.0");this.set("label",a)},onLabelSet:function(){this.inherited(arguments);this.showLabel||"title"in this.params||(this.titleNode.title=l.trim(this.containerNode.innerText||this.containerNode.textContent||""))}});h("dojo-bidi")&&(c=m("dijit.form.Button",c,{onLabelSet:function(){this.inherited(arguments);this.titleNode.title&&
this.applyTextDir(this.titleNode,this.titleNode.title)},_setTextDirAttr:function(a){this._created&&this.textDir!=a&&(this._set("textDir",a),this._setLabelAttr(this.label))}}));return c})},"dijit/form/_FormWidget":function(){define("dojo/_base/declare dojo/sniff dojo/_base/kernel dojo/ready ../_Widget ../_CssStateMixin ../_TemplatedMixin ./_FormWidgetMixin".split(" "),function(n,m,g,h,d,l,c,k){m("dijit-legacy-requires")&&h(0,function(){require(["dijit/form/_FormValueWidget"])});return n("dijit.form._FormWidget",
[d,c,l,k],{setDisabled:function(b){g.deprecated("setDisabled("+b+") is deprecated. Use set('disabled',"+b+") instead.","","2.0");this.set("disabled",b)},setValue:function(b){g.deprecated("dijit.form._FormWidget:setValue("+b+") is deprecated.  Use set('value',"+b+") instead.","","2.0");this.set("value",b)},getValue:function(){g.deprecated(this.declaredClass+"::getValue() is deprecated. Use get('value') instead.","","2.0");return this.get("value")},postMixInProperties:function(){this.nameAttrSetting=
this.name&&!m("msapp")?'name\x3d"'+this.name.replace(/"/g,"\x26quot;")+'"':"";this.inherited(arguments)}})})},"dijit/form/_FormWidgetMixin":function(){define("dojo/_base/array dojo/_base/declare dojo/dom-attr dojo/dom-style dojo/_base/lang dojo/mouse dojo/on dojo/sniff dojo/window ../a11y".split(" "),function(n,m,g,h,d,l,c,k,b,a){return m("dijit.form._FormWidgetMixin",null,{name:"",alt:"",value:"",type:"text","aria-label":"focusNode",tabIndex:"0",_setTabIndexAttr:"focusNode",disabled:!1,intermediateChanges:!1,
scrollOnFocus:!0,_setIdAttr:"focusNode",_setDisabledAttr:function(b){this._set("disabled",b);/^(button|input|select|textarea|optgroup|option|fieldset)$/i.test(this.focusNode.tagName)?g.set(this.focusNode,"disabled",b):this.focusNode.setAttribute("aria-disabled",b?"true":"false");this.valueNode&&g.set(this.valueNode,"disabled",b);b?(this._set("hovering",!1),this._set("active",!1),b="tabIndex"in this.attributeMap?this.attributeMap.tabIndex:"_setTabIndexAttr"in this?this._setTabIndexAttr:"focusNode",
n.forEach(d.isArray(b)?b:[b],function(b){b=this[b];k("webkit")||a.hasDefaultTabStop(b)?b.setAttribute("tabIndex","-1"):b.removeAttribute("tabIndex")},this)):""!=this.tabIndex&&this.set("tabIndex",this.tabIndex)},_onFocus:function(a){if("mouse"==a&&this.isFocusable())var e=this.own(c(this.focusNode,"focus",function(){h.remove();e.remove()}))[0],g=k("pointer-events")?"pointerup":k("MSPointer")?"MSPointerUp":k("touch-events")?"touchend, mouseup":"mouseup",h=this.own(c(this.ownerDocumentBody,g,d.hitch(this,
function(a){h.remove();e.remove();this.focused&&("touchend"==a.type?this.defer("focus"):this.focus())})))[0];this.scrollOnFocus&&this.defer(function(){b.scrollIntoView(this.domNode)});this.inherited(arguments)},isFocusable:function(){return!this.disabled&&this.focusNode&&"none"!=h.get(this.domNode,"display")},focus:function(){if(!this.disabled&&this.focusNode.focus)try{this.focusNode.focus()}catch(e){}},compare:function(a,b){return"number"==typeof a&&"number"==typeof b?isNaN(a)&&isNaN(b)?0:a-b:a>
b?1:a<b?-1:0},onChange:function(){},_onChangeActive:!1,_handleOnChange:function(a,b){void 0!=this._lastValueReported||null!==b&&this._onChangeActive||(this._resetValue=this._lastValueReported=a);this._pendingOnChange=this._pendingOnChange||typeof a!=typeof this._lastValueReported||0!=this.compare(a,this._lastValueReported);(this.intermediateChanges||b||void 0===b)&&this._pendingOnChange&&(this._lastValueReported=a,this._pendingOnChange=!1,this._onChangeActive&&(this._onChangeHandle&&this._onChangeHandle.remove(),
this._onChangeHandle=this.defer(function(){this._onChangeHandle=null;this.onChange(a)})))},create:function(){this.inherited(arguments);this._onChangeActive=!0},destroy:function(){this._onChangeHandle&&(this._onChangeHandle.remove(),this.onChange(this._lastValueReported));this.inherited(arguments)}})})},"dijit/form/_ButtonMixin":function(){define(["dojo/_base/declare","dojo/dom","dojo/has","../registry"],function(n,m,g,h){var d=n("dijit.form._ButtonMixin"+(g("dojo-bidi")?"_NoBidi":""),null,{label:"",
type:"button",__onClick:function(d){d.stopPropagation();d.preventDefault();this.disabled||this.valueNode.click(d);return!1},_onClick:function(d){if(this.disabled)return d.stopPropagation(),d.preventDefault(),!1;!1===this.onClick(d)&&d.preventDefault();var c=d.defaultPrevented;if(!c&&"submit"==this.type&&!(this.valueNode||this.focusNode).form)for(var g=this.domNode;g.parentNode;g=g.parentNode){var b=h.byNode(g);if(b&&"function"==typeof b._onSubmit){b._onSubmit(d);d.preventDefault();c=!0;break}}return!c},
postCreate:function(){this.inherited(arguments);m.setSelectable(this.focusNode,!1)},onClick:function(){return!0},_setLabelAttr:function(d){this._set("label",d);(this.containerNode||this.focusNode).innerHTML=d;this.onLabelSet()},onLabelSet:function(){}});g("dojo-bidi")&&(d=n("dijit.form._ButtonMixin",d,{onLabelSet:function(){this.inherited(arguments);this.applyTextDir(this.containerNode||this.focusNode)}}));return d})},"dijit/form/Form":function(){define("dojo/_base/declare dojo/dom-attr dojo/_base/kernel dojo/sniff ../_Widget ../_TemplatedMixin ./_FormMixin ../layout/_ContentPaneResizeMixin".split(" "),
function(n,m,g,h,d,l,c,k){return n("dijit.form.Form",[d,l,c,k],{name:"",action:"",method:"",encType:"","accept-charset":"",accept:"",target:"",templateString:"\x3cform data-dojo-attach-point\x3d'containerNode' data-dojo-attach-event\x3d'onreset:_onReset,onsubmit:_onSubmit' ${!nameAttrSetting}\x3e\x3c/form\x3e",postMixInProperties:function(){this.nameAttrSetting=this.name?"name\x3d'"+this.name+"'":"";this.inherited(arguments)},execute:function(){},onExecute:function(){},_setEncTypeAttr:function(b){m.set(this.domNode,
"encType",b);h("ie")&&(this.domNode.encoding=b);this._set("encType",b)},reset:function(b){var a={returnValue:!0,preventDefault:function(){this.returnValue=!1},stopPropagation:function(){},currentTarget:b?b.target:this.domNode,target:b?b.target:this.domNode};!1!==this.onReset(a)&&a.returnValue&&this.inherited(arguments,[])},onReset:function(){return!0},_onReset:function(b){this.reset(b);b.stopPropagation();b.preventDefault();return!1},_onSubmit:function(b){var a=this.constructor.prototype;if(this.execute!=
a.execute||this.onExecute!=a.onExecute)g.deprecated("dijit.form.Form:execute()/onExecute() are deprecated. Use onSubmit() instead.","","2.0"),this.onExecute(),this.execute(this.getValues());!1===this.onSubmit(b)&&(b.stopPropagation(),b.preventDefault())},onSubmit:function(){return this.isValid()},submit:function(){!1!==this.onSubmit()&&this.containerNode.submit()}})})},"dijit/form/ValidationTextBox":function(){define("dojo/_base/declare dojo/_base/kernel dojo/_base/lang dojo/i18n ./TextBox ../Tooltip dojo/text!./templates/ValidationTextBox.html dojo/i18n!./nls/validate".split(" "),
function(n,m,g,h,d,l,c){var k=n("dijit.form.ValidationTextBox",d,{templateString:c,required:!1,promptMessage:"",invalidMessage:"$_unset_$",missingMessage:"$_unset_$",message:"",constraints:{},pattern:".*",regExp:"",regExpGen:function(){},state:"",tooltipPosition:[],_deprecateRegExp:function(b,a){a!=k.prototype[b]&&(m.deprecated("ValidationTextBox id\x3d"+this.id+", set('"+b+"', ...) is deprecated.  Use set('pattern', ...) instead.","","2.0"),this.set("pattern",a))},_setRegExpGenAttr:function(b){this._deprecateRegExp("regExpGen",
b);this._set("regExpGen",this._computeRegexp)},_setRegExpAttr:function(b){this._deprecateRegExp("regExp",b)},_setValueAttr:function(){this.inherited(arguments);this._refreshState()},validator:function(b,a){return(new RegExp("^(?:"+this._computeRegexp(a)+")"+(this.required?"":"?")+"$")).test(b)&&(!this.required||!this._isEmpty(b))&&(this._isEmpty(b)||void 0!==this.parse(b,a))},_isValidSubset:function(){return 0==this.textbox.value.search(this._partialre)},isValid:function(){return this.validator(this.textbox.value,
this.get("constraints"))},_isEmpty:function(b){return(this.trim?/^\s*$/:/^$/).test(b)},getErrorMessage:function(){var b="$_unset_$"==this.invalidMessage?this.messages.invalidMessage:this.invalidMessage?this.invalidMessage:this.promptMessage,a="$_unset_$"==this.missingMessage?this.messages.missingMessage:this.missingMessage?this.missingMessage:b;return this.required&&this._isEmpty(this.textbox.value)?a:b},getPromptMessage:function(){return this.promptMessage},_maskValidSubsetError:!0,validate:function(b){var a=
"",c=this.disabled||this.isValid(b);c&&(this._maskValidSubsetError=!0);var d=this._isEmpty(this.textbox.value),g=!c&&b&&this._isValidSubset();this._set("state",c?"":((!this._hasBeenBlurred||b)&&d||g)&&(this._maskValidSubsetError||g&&!this._hasBeenBlurred&&b)?"Incomplete":"Error");this.focusNode.setAttribute("aria-invalid","Error"==this.state?"true":"false");"Error"==this.state?(this._maskValidSubsetError=b&&g,a=this.getErrorMessage(b)):"Incomplete"==this.state?(a=this.getPromptMessage(b),this._maskValidSubsetError=
!this._hasBeenBlurred||b):d&&(a=this.getPromptMessage(b));this.set("message",a);return c},displayMessage:function(b){b&&this.focused?l.show(b,this.domNode,this.tooltipPosition,!this.isLeftToRight()):l.hide(this.domNode)},_refreshState:function(){this._created&&this.validate(this.focused);this.inherited(arguments)},constructor:function(b){this.constraints=g.clone(this.constraints);this.baseClass+=" dijitValidationTextBox"},startup:function(){this.inherited(arguments);this._refreshState()},_setConstraintsAttr:function(b){!b.locale&&
this.lang&&(b.locale=this.lang);this._set("constraints",b);this._refreshState()},_setPatternAttr:function(b){this._set("pattern",b);this._refreshState()},_computeRegexp:function(b){var a=this.pattern;"function"==typeof a&&(a=a.call(this,b));if(a!=this._lastRegExp){var c="";this._lastRegExp=a;".*"!=a&&a.replace(/\\.|\[\]|\[.*?[^\\]{1}\]|\{.*?\}|\(\?[=:!]|./g,function(a){switch(a.charAt(0)){case "{":case "+":case "?":case "*":case "^":case "$":case "|":case "(":c+=a;break;case ")":c+="|$)";break;default:c+=
"(?:"+a+"|$)"}});try{"".search(c)}catch(u){c=this.pattern,console.warn("RegExp error in "+this.declaredClass+": "+this.pattern)}this._partialre="^(?:"+c+")$"}return a},postMixInProperties:function(){this.inherited(arguments);this.messages=h.getLocalization("dijit.form","validate",this.lang);this._setConstraintsAttr(this.constraints)},_setDisabledAttr:function(b){this.inherited(arguments);this._refreshState()},_setRequiredAttr:function(b){this._set("required",b);this.focusNode.setAttribute("aria-required",
b);this._refreshState()},_setMessageAttr:function(b){this._set("message",b);this.displayMessage(b)},reset:function(){this._maskValidSubsetError=!0;this.inherited(arguments)},_onBlur:function(){this.displayMessage("");this.inherited(arguments)},destroy:function(){l.hide(this.domNode);this.inherited(arguments)}});return k})},"dijit/form/TextBox":function(){define("dojo/_base/declare dojo/dom-construct dojo/dom-style dojo/_base/kernel dojo/_base/lang dojo/on dojo/sniff ./_FormValueWidget ./_TextBoxMixin dojo/text!./templates/TextBox.html ../main".split(" "),
function(n,m,g,h,d,l,c,k,b,a,e){k=n("dijit.form.TextBox"+(c("dojo-bidi")?"_NoBidi":""),[k,b],{templateString:a,_singleNodeTemplate:'\x3cinput class\x3d"dijit dijitReset dijitLeft dijitInputField" data-dojo-attach-point\x3d"textbox,focusNode" autocomplete\x3d"off" type\x3d"${type}" ${!nameAttrSetting} /\x3e',_buttonInputDisabled:c("ie")?"disabled":"",baseClass:"dijitTextBox",postMixInProperties:function(){var a=this.type.toLowerCase();if(this.templateString&&"input"==this.templateString.toLowerCase()||
("hidden"==a||"file"==a)&&this.templateString==this.constructor.prototype.templateString)this.templateString=this._singleNodeTemplate;this.inherited(arguments)},postCreate:function(){this.inherited(arguments);9>c("ie")&&this.defer(function(){try{var a=g.getComputedStyle(this.domNode);if(a){var b=a.fontFamily;if(b){var c=this.domNode.getElementsByTagName("INPUT");if(c)for(a=0;a<c.length;a++)c[a].style.fontFamily=b}}}catch(A){}})},_setPlaceHolderAttr:function(a){this._set("placeHolder",a);this._phspan||
(this._attachPoints.push("_phspan"),this._phspan=m.create("span",{className:"dijitPlaceHolder dijitInputField"},this.textbox,"after"),this.own(l(this._phspan,"mousedown",function(a){a.preventDefault()}),l(this._phspan,"touchend, pointerup, MSPointerUp",d.hitch(this,function(){this.focus()}))));this._phspan.innerHTML="";this._phspan.appendChild(this._phspan.ownerDocument.createTextNode(a));this._updatePlaceHolder()},_onInput:function(a){this.inherited(arguments);this._updatePlaceHolder()},_updatePlaceHolder:function(){this._phspan&&
(this._phspan.style.display=this.placeHolder&&!this.textbox.value?"":"none")},_setValueAttr:function(a,b,c){this.inherited(arguments);this._updatePlaceHolder()},getDisplayedValue:function(){h.deprecated(this.declaredClass+"::getDisplayedValue() is deprecated. Use get('displayedValue') instead.","","2.0");return this.get("displayedValue")},setDisplayedValue:function(a){h.deprecated(this.declaredClass+"::setDisplayedValue() is deprecated. Use set('displayedValue', ...) instead.","","2.0");this.set("displayedValue",
a)},_onBlur:function(a){this.disabled||(this.inherited(arguments),this._updatePlaceHolder(),c("mozilla")&&this.selectOnClick&&(this.textbox.selectionStart=this.textbox.selectionEnd=void 0))},_onFocus:function(a){this.disabled||this.readOnly||(this.inherited(arguments),this._updatePlaceHolder())}});9>c("ie")&&(k.prototype._isTextSelected=function(){var a=this.ownerDocument.selection.createRange();return a.parentElement()==this.textbox&&0<a.text.length},e._setSelectionRange=b._setSelectionRange=function(a,
b,c){a.createTextRange&&(a=a.createTextRange(),a.collapse(!0),a.moveStart("character",-99999),a.moveStart("character",b),a.moveEnd("character",c-b),a.select())});c("dojo-bidi")&&(k=n("dijit.form.TextBox",k,{_setPlaceHolderAttr:function(a){this.inherited(arguments);this.applyTextDir(this._phspan)}}));return k})},"dijit/form/_FormValueWidget":function(){define(["dojo/_base/declare","dojo/sniff","./_FormWidget","./_FormValueMixin"],function(n,m,g,h){return n("dijit.form._FormValueWidget",[g,h],{_layoutHackIE7:function(){if(7==
m("ie"))for(var d=this.domNode,g=d.parentNode,c=d.firstChild||d,h=c.style.filter,b=this;g&&0==g.clientHeight;)(function(){var a=b.connect(g,"onscroll",function(){b.disconnect(a);c.style.filter=(new Date).getMilliseconds();b.defer(function(){c.style.filter=h})})})(),g=g.parentNode}})})},"dijit/form/_FormValueMixin":function(){define("dojo/_base/declare dojo/dom-attr dojo/keys dojo/_base/lang dojo/on ./_FormWidgetMixin".split(" "),function(n,m,g,h,d,l){return n("dijit.form._FormValueMixin",l,{readOnly:!1,
_setReadOnlyAttr:function(c){m.set(this.focusNode,"readOnly",c);this._set("readOnly",c)},postCreate:function(){this.inherited(arguments);void 0===this._resetValue&&(this._lastValueReported=this._resetValue=this.value)},_setValueAttr:function(c,d){this._handleOnChange(c,d)},_handleOnChange:function(c,d){this._set("value",c);this.inherited(arguments)},undo:function(){this._setValueAttr(this._lastValueReported,!1)},reset:function(){this._hasBeenBlurred=!1;this._setValueAttr(this._resetValue,!0)}})})},
"dijit/form/_TextBoxMixin":function(){define("dojo/_base/array dojo/_base/declare dojo/dom dojo/sniff dojo/keys dojo/_base/lang dojo/on ../main".split(" "),function(n,m,g,h,d,l,c,k){var b=m("dijit.form._TextBoxMixin"+(h("dojo-bidi")?"_NoBidi":""),null,{trim:!1,uppercase:!1,lowercase:!1,propercase:!1,maxLength:"",selectOnClick:!1,placeHolder:"",_getValueAttr:function(){return this.parse(this.get("displayedValue"),this.constraints)},_setValueAttr:function(a,b,c){var e;void 0!==a&&(e=this.filter(a),
"string"!=typeof c&&(c=null===e||"number"==typeof e&&isNaN(e)?"":this.filter(this.format(e,this.constraints)),0!=this.compare(e,this.filter(this.parse(c,this.constraints)))&&(c=null)));null==c||"number"==typeof c&&isNaN(c)||this.textbox.value==c||(this.textbox.value=c,this._set("displayedValue",this.get("displayedValue")));this.inherited(arguments,[e,b])},displayedValue:"",_getDisplayedValueAttr:function(){return this.filter(this.textbox.value)},_setDisplayedValueAttr:function(a){null==a?a="":"string"!=
typeof a&&(a=String(a));this.textbox.value=a;this._setValueAttr(this.get("value"),void 0);this._set("displayedValue",this.get("displayedValue"))},format:function(a){return null==a?"":a.toString?a.toString():a},parse:function(a){return a},_refreshState:function(){},onInput:function(){},_onInput:function(a){this._lastInputEventValue=this.textbox.value;this._processInput(this._lastInputProducingEvent||a);delete this._lastInputProducingEvent;this.intermediateChanges&&this._handleOnChange(this.get("value"),
!1)},_processInput:function(){this._refreshState();this._set("displayedValue",this.get("displayedValue"))},postCreate:function(){this.textbox.setAttribute("value",this.textbox.value);this.inherited(arguments);this.own(c(this.textbox,"keydown, keypress, paste, cut, compositionend",l.hitch(this,function(a){var b;if("keydown"==a.type&&229!=a.keyCode){b=a.keyCode;switch(b){case d.SHIFT:case d.ALT:case d.CTRL:case d.META:case d.CAPS_LOCK:case d.NUM_LOCK:case d.SCROLL_LOCK:return}if(!a.ctrlKey&&!a.metaKey&&
!a.altKey){switch(b){case d.NUMPAD_0:case d.NUMPAD_1:case d.NUMPAD_2:case d.NUMPAD_3:case d.NUMPAD_4:case d.NUMPAD_5:case d.NUMPAD_6:case d.NUMPAD_7:case d.NUMPAD_8:case d.NUMPAD_9:case d.NUMPAD_MULTIPLY:case d.NUMPAD_PLUS:case d.NUMPAD_ENTER:case d.NUMPAD_MINUS:case d.NUMPAD_PERIOD:case d.NUMPAD_DIVIDE:return}if(65<=b&&90>=b||48<=b&&57>=b||b==d.SPACE)return;b=!1;for(var g in d)if(d[g]===a.keyCode){b=!0;break}if(!b)return}}(b=32<=a.charCode?String.fromCharCode(a.charCode):a.charCode)||(b=65<=a.keyCode&&
90>=a.keyCode||48<=a.keyCode&&57>=a.keyCode||a.keyCode==d.SPACE?String.fromCharCode(a.keyCode):a.keyCode);b||(b=229);if("keypress"==a.type){if("string"!=typeof b)return;if("a"<=b&&"z">=b||"A"<=b&&"Z">=b||"0"<=b&&"9">=b||" "===b)if(a.ctrlKey||a.metaKey||a.altKey)return}var k={faux:!0},m;for(m in a)/^(layer[XY]|returnValue|keyLocation)$/.test(m)||(g=a[m],"function"!=typeof g&&"undefined"!=typeof g&&(k[m]=g));l.mixin(k,{charOrCode:b,_wasConsumed:!1,preventDefault:function(){k._wasConsumed=!0;a.preventDefault()},
stopPropagation:function(){a.stopPropagation()}});this._lastInputProducingEvent=k;!1===this.onInput(k)&&(k.preventDefault(),k.stopPropagation());if(!k._wasConsumed&&9>=h("ie"))switch(a.keyCode){case d.TAB:case d.ESCAPE:case d.DOWN_ARROW:case d.UP_ARROW:case d.LEFT_ARROW:case d.RIGHT_ARROW:break;default:a.keyCode==d.ENTER&&"textarea"!=this.textbox.tagName.toLowerCase()||this.defer(function(){this.textbox.value!==this._lastInputEventValue&&c.emit(this.textbox,"input",{bubbles:!0})})}})),c(this.textbox,
"input",l.hitch(this,"_onInput")),c(this.domNode,"keypress",function(a){a.stopPropagation()}))},_blankValue:"",filter:function(a){if(null===a)return this._blankValue;if("string"!=typeof a)return a;this.trim&&(a=l.trim(a));this.uppercase&&(a=a.toUpperCase());this.lowercase&&(a=a.toLowerCase());this.propercase&&(a=a.replace(/[^\s]+/g,function(a){return a.substring(0,1).toUpperCase()+a.substring(1)}));return a},_setBlurValue:function(){this._setValueAttr(this.get("value"),!0)},_onBlur:function(a){this.disabled||
(this._setBlurValue(),this.inherited(arguments))},_isTextSelected:function(){return this.textbox.selectionStart!=this.textbox.selectionEnd},_onFocus:function(a){this.disabled||this.readOnly||(this.selectOnClick&&"mouse"==a&&(this._selectOnClickHandle=c.once(this.domNode,"mouseup, touchend",l.hitch(this,function(a){this._isTextSelected()||b.selectInputText(this.textbox)})),this.own(this._selectOnClickHandle),this.defer(function(){this._selectOnClickHandle&&(this._selectOnClickHandle.remove(),this._selectOnClickHandle=
null)},500)),this.inherited(arguments),this._refreshState())},reset:function(){this.textbox.value="";this.inherited(arguments)}});h("dojo-bidi")&&(b=m("dijit.form._TextBoxMixin",b,{_setValueAttr:function(){this.inherited(arguments);this.applyTextDir(this.focusNode)},_setDisplayedValueAttr:function(){this.inherited(arguments);this.applyTextDir(this.focusNode)},_onInput:function(){this.applyTextDir(this.focusNode);this.inherited(arguments)}}));b._setSelectionRange=k._setSelectionRange=function(a,b,
c){a.setSelectionRange&&a.setSelectionRange(b,c)};b.selectInputText=k.selectInputText=function(a,c,d){a=g.byId(a);isNaN(c)&&(c=0);isNaN(d)&&(d=a.value?a.value.length:0);try{a.focus(),b._setSelectionRange(a,c,d)}catch(w){}};return b})},"dijit/Tooltip":function(){define("dojo/_base/array dojo/_base/declare dojo/_base/fx dojo/dom dojo/dom-class dojo/dom-geometry dojo/dom-style dojo/_base/lang dojo/mouse dojo/on dojo/sniff ./_base/manager ./place ./_Widget ./_TemplatedMixin ./BackgroundIframe dojo/text!./templates/Tooltip.html ./main".split(" "),
function(n,m,g,h,d,l,c,k,b,a,e,u,w,v,A,r,G,D){function x(){}var t=m("dijit._MasterTooltip",[v,A],{duration:u.defaultDuration,templateString:G,postCreate:function(){this.ownerDocumentBody.appendChild(this.domNode);this.bgIframe=new r(this.domNode);this.fadeIn=g.fadeIn({node:this.domNode,duration:this.duration,onEnd:k.hitch(this,"_onShow")});this.fadeOut=g.fadeOut({node:this.domNode,duration:this.duration,onEnd:k.hitch(this,"_onHide")})},show:function(a,b,d,e,g,f,h){if(!this.aroundNode||this.aroundNode!==
b||this.containerNode.innerHTML!=a)if("playing"==this.fadeOut.status())this._onDeck=arguments;else{this.containerNode.innerHTML=a;g&&this.set("textDir",g);this.containerNode.align=e?"right":"left";var l=w.around(this.domNode,b,d&&d.length?d:y.defaultPosition,!e,k.hitch(this,"orient")),m=l.aroundNodePos;"M"==l.corner.charAt(0)&&"M"==l.aroundCorner.charAt(0)?(this.connectorNode.style.top=m.y+(m.h-this.connectorNode.offsetHeight>>1)-l.y+"px",this.connectorNode.style.left=""):"M"==l.corner.charAt(1)&&
"M"==l.aroundCorner.charAt(1)?this.connectorNode.style.left=m.x+(m.w-this.connectorNode.offsetWidth>>1)-l.x+"px":(this.connectorNode.style.left="",this.connectorNode.style.top="");c.set(this.domNode,"opacity",0);this.fadeIn.play();this.isShowingNow=!0;this.aroundNode=b;this.onMouseEnter=f||x;this.onMouseLeave=h||x}},orient:function(a,b,c,d,g){this.connectorNode.style.top="";var f=d.h;d=d.w;a.className="dijitTooltip "+{"MR-ML":"dijitTooltipRight","ML-MR":"dijitTooltipLeft","TM-BM":"dijitTooltipAbove",
"BM-TM":"dijitTooltipBelow","BL-TL":"dijitTooltipBelow dijitTooltipABLeft","TL-BL":"dijitTooltipAbove dijitTooltipABLeft","BR-TR":"dijitTooltipBelow dijitTooltipABRight","TR-BR":"dijitTooltipAbove dijitTooltipABRight","BR-BL":"dijitTooltipRight","BL-BR":"dijitTooltipLeft"}[b+"-"+c];this.domNode.style.width="auto";var h=l.position(this.domNode);if(e("ie")||e("trident"))h.w+=2;l.setMarginBox(this.domNode,{w:Math.min(Math.max(d,1),h.w)});"B"==c.charAt(0)&&"B"==b.charAt(0)?(a=l.position(a),b=this.connectorNode.offsetHeight,
a.h>f?(this.connectorNode.style.top=f-(g.h+b>>1)+"px",this.connectorNode.style.bottom=""):(this.connectorNode.style.bottom=Math.min(Math.max(g.h/2-b/2,0),a.h-b)+"px",this.connectorNode.style.top="")):(this.connectorNode.style.top="",this.connectorNode.style.bottom="");return Math.max(0,h.w-d)},_onShow:function(){e("ie")&&(this.domNode.style.filter="")},hide:function(a){this._onDeck&&this._onDeck[1]==a?this._onDeck=null:this.aroundNode===a&&(this.fadeIn.stop(),this.isShowingNow=!1,this.aroundNode=
null,this.fadeOut.play());this.onMouseEnter=this.onMouseLeave=x},_onHide:function(){this.domNode.style.cssText="";this.containerNode.innerHTML="";this._onDeck&&(this.show.apply(this,this._onDeck),this._onDeck=null)}});e("dojo-bidi")&&t.extend({_setAutoTextDir:function(a){this.applyTextDir(a);n.forEach(a.children,function(a){this._setAutoTextDir(a)},this)},_setTextDirAttr:function(a){this._set("textDir",a);"auto"==a?this._setAutoTextDir(this.containerNode):this.containerNode.dir=this.textDir}});D.showTooltip=
function(a,b,c,d,e,f,g){c&&(c=n.map(c,function(a){return{after:"after-centered",before:"before-centered"}[a]||a}));y._masterTT||(D._masterTT=y._masterTT=new t);return y._masterTT.show(a,b,c,d,e,f,g)};D.hideTooltip=function(a){return y._masterTT&&y._masterTT.hide(a)};var y=m("dijit.Tooltip",v,{label:"",showDelay:400,hideDelay:400,connectId:[],position:[],selector:"",_setConnectIdAttr:function(c){n.forEach(this._connections||[],function(a){n.forEach(a,function(a){a.remove()})},this);this._connectIds=
n.filter(k.isArrayLike(c)?c:c?[c]:[],function(a){return h.byId(a,this.ownerDocument)},this);this._connections=n.map(this._connectIds,function(c){c=h.byId(c,this.ownerDocument);var d=this.selector,e=d?function(b){return a.selector(d,b)}:function(a){return a},g=this;return[a(c,e(b.enter),function(){g._onHover(this)}),a(c,e("focusin"),function(){g._onHover(this)}),a(c,e(b.leave),k.hitch(g,"_onUnHover")),a(c,e("focusout"),k.hitch(g,"set","state","DORMANT"))]},this);this._set("connectId",c)},addTarget:function(a){a=
a.id||a;-1==n.indexOf(this._connectIds,a)&&this.set("connectId",this._connectIds.concat(a))},removeTarget:function(a){a=n.indexOf(this._connectIds,a.id||a);0<=a&&(this._connectIds.splice(a,1),this.set("connectId",this._connectIds))},buildRendering:function(){this.inherited(arguments);d.add(this.domNode,"dijitTooltipData")},startup:function(){this.inherited(arguments);var a=this.connectId;n.forEach(k.isArrayLike(a)?a:[a],this.addTarget,this)},getContent:function(a){return this.label||this.domNode.innerHTML},
state:"DORMANT",_setStateAttr:function(a){if(!(this.state==a||"SHOW TIMER"==a&&"SHOWING"==this.state||"HIDE TIMER"==a&&"DORMANT"==this.state)){this._hideTimer&&(this._hideTimer.remove(),delete this._hideTimer);this._showTimer&&(this._showTimer.remove(),delete this._showTimer);switch(a){case "DORMANT":this._connectNode&&(y.hide(this._connectNode),delete this._connectNode,this.onHide());break;case "SHOW TIMER":"SHOWING"!=this.state&&(this._showTimer=this.defer(function(){this.set("state","SHOWING")},
this.showDelay));break;case "SHOWING":var b=this.getContent(this._connectNode);if(!b){this.set("state","DORMANT");return}y.show(b,this._connectNode,this.position,!this.isLeftToRight(),this.textDir,k.hitch(this,"set","state","SHOWING"),k.hitch(this,"set","state","HIDE TIMER"));this.onShow(this._connectNode,this.position);break;case "HIDE TIMER":this._hideTimer=this.defer(function(){this.set("state","DORMANT")},this.hideDelay)}this._set("state",a)}},_onHover:function(a){this._connectNode&&a!=this._connectNode&&
this.set("state","DORMANT");this._connectNode=a;this.set("state","SHOW TIMER")},_onUnHover:function(a){this.set("state","HIDE TIMER")},open:function(a){this.set("state","DORMANT");this._connectNode=a;this.set("state","SHOWING")},close:function(){this.set("state","DORMANT")},onShow:function(){},onHide:function(){},destroy:function(){this.set("state","DORMANT");n.forEach(this._connections||[],function(a){n.forEach(a,function(a){a.remove()})},this);this.inherited(arguments)}});y._MasterTooltip=t;y.show=
D.showTooltip;y.hide=D.hideTooltip;y.defaultPosition=["after-centered","before-centered"];return y})},"dijit/place":function(){define("dojo/_base/array dojo/dom-geometry dojo/dom-style dojo/_base/kernel dojo/_base/window ./Viewport ./main".split(" "),function(n,m,g,h,d,l,c){function k(a,b,c,h){var e=l.getEffectiveBox(a.ownerDocument);a.parentNode&&"body"==String(a.parentNode.tagName).toLowerCase()||d.body(a.ownerDocument).appendChild(a);var k=null;n.some(b,function(b){var d=b.corner,g=b.pos,l=0,n=
{w:{L:e.l+e.w-g.x,R:g.x-e.l,M:e.w}[d.charAt(1)],h:{T:e.t+e.h-g.y,B:g.y-e.t,M:e.h}[d.charAt(0)]},r=a.style;r.left=r.right="auto";c&&(l=c(a,b.aroundCorner,d,n,h),l="undefined"==typeof l?0:l);var v=a.style,u=v.display,w=v.visibility;"none"==v.display&&(v.visibility="hidden",v.display="");r=m.position(a);v.display=u;v.visibility=w;u={L:g.x,R:g.x-r.w,M:Math.max(e.l,Math.min(e.l+e.w,g.x+(r.w>>1))-r.w)}[d.charAt(1)];w={T:g.y,B:g.y-r.h,M:Math.max(e.t,Math.min(e.t+e.h,g.y+(r.h>>1))-r.h)}[d.charAt(0)];g=Math.max(e.l,
u);v=Math.max(e.t,w);u=Math.min(e.l+e.w,u+r.w)-g;w=Math.min(e.t+e.h,w+r.h)-v;l+=r.w-u+(r.h-w);if(null==k||l<k.overflow)k={corner:d,aroundCorner:b.aroundCorner,x:g,y:v,w:u,h:w,overflow:l,spaceAvailable:n};return!l});k.overflow&&c&&c(a,k.aroundCorner,k.corner,k.spaceAvailable,h);b=k.y;var r=k.x,u=d.body(a.ownerDocument);/relative|absolute/.test(g.get(u,"position"))&&(b-=g.get(u,"marginTop"),r-=g.get(u,"marginLeft"));u=a.style;u.top=b+"px";u.left=r+"px";u.right="auto";return k}var b={TL:"BR",TR:"BL",
BL:"TR",BR:"TL"};return c.place={at:function(a,c,d,g,h){d=n.map(d,function(a){var d={corner:a,aroundCorner:b[a],pos:{x:c.x,y:c.y}};g&&(d.pos.x+="L"==a.charAt(1)?g.x:-g.x,d.pos.y+="T"==a.charAt(0)?g.y:-g.y);return d});return k(a,d,h)},around:function(a,b,c,d,l){function e(a,b){B.push({aroundCorner:a,corner:b,pos:{x:{L:p,R:p+F,M:p+(F>>1)}[a.charAt(1)],y:{T:z,B:z+E,M:z+(E>>1)}[a.charAt(0)]}})}var r;if("string"==typeof b||"offsetWidth"in b||"ownerSVGElement"in b){if(r=m.position(b,!0),/^(above|below)/.test(c[0])){var v=
m.getBorderExtents(b),u=b.firstChild?m.getBorderExtents(b.firstChild):{t:0,l:0,b:0,r:0},x=m.getBorderExtents(a),t=a.firstChild?m.getBorderExtents(a.firstChild):{t:0,l:0,b:0,r:0};r.y+=Math.min(v.t+u.t,x.t+t.t);r.h-=Math.min(v.t+u.t,x.t+t.t)+Math.min(v.b+u.b,x.b+t.b)}}else r=b;if(b.parentNode)for(v="absolute"==g.getComputedStyle(b).position,b=b.parentNode;b&&1==b.nodeType&&"BODY"!=b.nodeName;){u=m.position(b,!0);x=g.getComputedStyle(b);/relative|absolute/.test(x.position)&&(v=!1);if(!v&&/hidden|auto|scroll/.test(x.overflow)){var t=
Math.min(r.y+r.h,u.y+u.h),w=Math.min(r.x+r.w,u.x+u.w);r.x=Math.max(r.x,u.x);r.y=Math.max(r.y,u.y);r.h=t-r.y;r.w=w-r.x}"absolute"==x.position&&(v=!0);b=b.parentNode}var p=r.x,z=r.y,F="w"in r?r.w:r.w=r.width,E="h"in r?r.h:(h.deprecated("place.around: dijit/place.__Rectangle: { x:"+p+", y:"+z+", height:"+r.height+", width:"+F+" } has been deprecated.  Please use { x:"+p+", y:"+z+", h:"+r.height+", w:"+F+" }","","2.0"),r.h=r.height),B=[];n.forEach(c,function(a){var b=d;switch(a){case "above-centered":e("TM",
"BM");break;case "below-centered":e("BM","TM");break;case "after-centered":b=!b;case "before-centered":e(b?"ML":"MR",b?"MR":"ML");break;case "after":b=!b;case "before":e(b?"TL":"TR",b?"TR":"TL");e(b?"BL":"BR",b?"BR":"BL");break;case "below-alt":b=!b;case "below":e(b?"BL":"BR",b?"TL":"TR");e(b?"BR":"BL",b?"TR":"TL");break;case "above-alt":b=!b;case "above":e(b?"TL":"TR",b?"BL":"BR");e(b?"TR":"TL",b?"BR":"BL");break;default:e(a.aroundCorner,a.corner)}});a=k(a,B,l,{w:F,h:E});a.aroundNodePos=r;return a}}})},
"esri/identity/OAuthSignInHandler":function(){define("./Credential ../core/domUtils ../core/lang ../core/Error ../core/urlUtils dijit/Dialog dijit/registry dojo/Deferred dojo/_base/kernel dojo/dom-attr dojo/i18n!./nls/identity dojo/io-query dojo/sniff dijit/form/Button dojo/query".split(" "),function(n,m,g,h,d,l,c,k,b,a,e,u,w){return{_oAuthDfd:null,_oAuthIntervalId:0,_oAuthDialogContent:"\x3cdiv class\x3d'dijitDialogPaneContentArea'\x3e\x3cdiv style\x3d'padding-bottom: 5px; word-wrap: break-word;'\x3e{oAuthInfo}\x3c/div\x3e\x3cdiv style\x3d'margin: 0px; padding: 0px; height: 10px;'\x3e\x3c/div\x3e\x3cdiv class\x3d'esriErrorMsg' style\x3d'display: none; color: white; background-color: #D46464; text-align: center; padding-top: 3px; padding-bottom: 3px;'\x3e{invalidUser}\x3c/div\x3e\x3cdiv style\x3d'margin: 0px; padding: 0px; height: 10px;'\x3e\x3c/div\x3e\x3cdiv class\x3d'dijitDialogPaneActionBar'\x3e\x3cbutton data-dojo-type\x3d'dijit.form.Button' data-dojo-props\x3d'type:\"button\", \"class\":\"esriIdSubmit\"'\x3e{lblOk}\x3c/button\x3e\x3cbutton data-dojo-type\x3d'dijit.form.Button' data-dojo-props\x3d'type:\"button\", \"class\":\"esriIdCancel\"'\x3e{lblCancel}\x3c/button\x3e\x3c/div\x3e",
setOAuthRedirectionHandler:function(a){this._oAuthRedirectFunc=a},oAuthSignIn:function(b,c,d,g){var h=this._oAuthDfd=new k;h.resUrl_=b;h.sinfo_=c;h.oinfo_=d;var l=!g||!1!==g.oAuthPopupConfirmation;if(!d.popup||!l)return this._doOAuthSignIn(b,c,d),h.promise;this._nls||(this._nls=e);this.oAuthDialog||(this.oAuthDialog=this._createOAuthDialog());b=this.oAuthDialog;c=g&&g.error;g=g&&g.token;m.hide(b.errMsg_);c&&c.details&&403==c.details.httpStatus&&g&&(a.set(b.errMsg_,"innerHTML",this._nls.forbidden),
m.show(b.errMsg_));b.show();return h.promise},setOAuthResponseHash:function(a){var b=this._oAuthDfd;this._oAuthDfd=null;if(b&&a)if(clearInterval(this._oAuthIntervalId),"#"===a.charAt(0)&&(a=a.substring(1)),a=u.queryToObject(a),a.error){var c="access_denied"===a.error;a=new h(c?"identity-manager:user-aborted":"identity-manager:authentication-failed",c?"ABORTED":"OAuth: "+a.error+" - "+a.error_description);b.reject(a)}else{var c=b.oinfo_._oAuthCred,d=new n({userId:a.username,server:b.sinfo_.server,
token:a.access_token,expires:(new Date).getTime()+1E3*Number(a.expires_in),ssl:"true"===a.ssl,_oAuthCred:c});c.storage=a.persist?window.localStorage:window.sessionStorage;c.token=d.token;c.expires=d.expires;c.userId=d.userId;c.ssl=d.ssl;c.save();b.resolve(d)}},_createOAuthDialog:function(){var a=this._nls,d=g.substitute(a,this._oAuthDialogContent),e=new l({title:a.title,content:d,"class":"esri-widget esriOAuthSignInDialog esriIdentityDialog",style:"min-width: 18em;",esriIdMgr_:this,execute_:function(){var a=
e.esriIdMgr_._oAuthDfd;e.hide_();e.esriIdMgr_._doOAuthSignIn(a.resUrl_,a.sinfo_,a.oinfo_)},cancel_:function(){var a=e.esriIdMgr_._oAuthDfd;e.esriIdMgr_._oAuthDfd=null;e.hide_();var b=new h("identity-manager:user-aborted","ABORTED");a.reject(b)},hide_:function(){m.hide(e.errMsg_);e.hide();l._DialogLevelManager.hide(e)}}),a=e.domNode;e.btnSubmit_=c.byNode(b.query(".esriIdSubmit",a)[0]);e.btnCancel_=c.byNode(b.query(".esriIdCancel",a)[0]);e.errMsg_=b.query(".esriErrorMsg",a)[0];e.connect(e.btnSubmit_,
"onClick",e.execute_);e.connect(e.btnCancel_,"onClick",e.onCancel);e.connect(e,"onCancel",e.cancel_);return e},_doOAuthSignIn:function(a,b,c){var e=this,g={client_id:c.appId,response_type:"token",state:JSON.stringify({portalUrl:c.portalUrl}),expiration:c.expiration,locale:c.locale,redirect_uri:c.popup?d.makeAbsolute(c.popupCallbackUrl):window.location.href.replace(/#.*$/,"")};c.forceLogin&&(g.force_login=!0);var k=c.portalUrl.replace(/^http:/i,"https:")+"/sharing/oauth2/authorize",l=k+"?"+u.objectToQuery(g);
if(c.popup){var m;7===w("ie")?(m=window.open(c.popupCallbackUrl,"esriJSAPIOAuth",c.popupWindowFeatures),m.location=l):m=window.open(l,"esriJSAPIOAuth",c.popupWindowFeatures);m?(m.focus(),this._oAuthDfd.oAuthWin_=m,this._oAuthIntervalId=setInterval(function(){if(m.closed){clearInterval(e._oAuthIntervalId);var a=e._oAuthDfd;if(a){var b=new h("identity-manager:user-aborted","ABORTED");a.reject(b)}}},500)):(a=new h("identity-manager:popup-blocked","ABORTED"),this._oAuthDfd.reject(a))}else this._oAuthRedirectFunc?
this._oAuthRedirectFunc({authorizeParams:g,authorizeUrl:k,resourceUrl:a,serverInfo:b,oAuthInfo:c}):window.location=l}}})},"url:dijit/templates/Dialog.html":'\x3cdiv class\x3d"dijitDialog" role\x3d"dialog" aria-labelledby\x3d"${id}_title"\x3e\r\n\t\x3cdiv data-dojo-attach-point\x3d"titleBar" class\x3d"dijitDialogTitleBar"\x3e\r\n\t\t\x3cspan data-dojo-attach-point\x3d"titleNode" class\x3d"dijitDialogTitle" id\x3d"${id}_title"\r\n\t\t\t\trole\x3d"heading" level\x3d"1"\x3e\x3c/span\x3e\r\n\t\t\x3cspan data-dojo-attach-point\x3d"closeButtonNode" class\x3d"dijitDialogCloseIcon" data-dojo-attach-event\x3d"ondijitclick: onCancel" title\x3d"${buttonCancel}" role\x3d"button" tabindex\x3d"-1"\x3e\r\n\t\t\t\x3cspan data-dojo-attach-point\x3d"closeText" class\x3d"closeText" title\x3d"${buttonCancel}"\x3ex\x3c/span\x3e\r\n\t\t\x3c/span\x3e\r\n\t\x3c/div\x3e\r\n\t\x3cdiv data-dojo-attach-point\x3d"containerNode" class\x3d"dijitDialogPaneContent"\x3e\x3c/div\x3e\r\n\t${!actionBarTemplate}\r\n\x3c/div\x3e\r\n\r\n',
"url:dijit/form/templates/Button.html":'\x3cspan class\x3d"dijit dijitReset dijitInline" role\x3d"presentation"\r\n\t\x3e\x3cspan class\x3d"dijitReset dijitInline dijitButtonNode"\r\n\t\tdata-dojo-attach-event\x3d"ondijitclick:__onClick" role\x3d"presentation"\r\n\t\t\x3e\x3cspan class\x3d"dijitReset dijitStretch dijitButtonContents"\r\n\t\t\tdata-dojo-attach-point\x3d"titleNode,focusNode"\r\n\t\t\trole\x3d"button" aria-labelledby\x3d"${id}_label"\r\n\t\t\t\x3e\x3cspan class\x3d"dijitReset dijitInline dijitIcon" data-dojo-attach-point\x3d"iconNode"\x3e\x3c/span\r\n\t\t\t\x3e\x3cspan class\x3d"dijitReset dijitToggleButtonIconChar"\x3e\x26#x25CF;\x3c/span\r\n\t\t\t\x3e\x3cspan class\x3d"dijitReset dijitInline dijitButtonText"\r\n\t\t\t\tid\x3d"${id}_label"\r\n\t\t\t\tdata-dojo-attach-point\x3d"containerNode"\r\n\t\t\t\x3e\x3c/span\r\n\t\t\x3e\x3c/span\r\n\t\x3e\x3c/span\r\n\t\x3e\x3cinput ${!nameAttrSetting} type\x3d"${type}" value\x3d"${value}" class\x3d"dijitOffScreen"\r\n\t\tdata-dojo-attach-event\x3d"onclick:_onClick"\r\n\t\ttabIndex\x3d"-1" aria-hidden\x3d"true" data-dojo-attach-point\x3d"valueNode"\r\n/\x3e\x3c/span\x3e\r\n',
"url:dijit/form/templates/TextBox.html":'\x3cdiv class\x3d"dijit dijitReset dijitInline dijitLeft" id\x3d"widget_${id}" role\x3d"presentation"\r\n\t\x3e\x3cdiv class\x3d"dijitReset dijitInputField dijitInputContainer"\r\n\t\t\x3e\x3cinput class\x3d"dijitReset dijitInputInner" data-dojo-attach-point\x3d\'textbox,focusNode\' autocomplete\x3d"off"\r\n\t\t\t${!nameAttrSetting} type\x3d\'${type}\'\r\n\t/\x3e\x3c/div\r\n\x3e\x3c/div\x3e\r\n',"url:dijit/templates/Tooltip.html":'\x3cdiv class\x3d"dijitTooltip dijitTooltipLeft" id\x3d"dojoTooltip" data-dojo-attach-event\x3d"mouseenter:onMouseEnter,mouseleave:onMouseLeave"\r\n\t\x3e\x3cdiv class\x3d"dijitTooltipConnector" data-dojo-attach-point\x3d"connectorNode"\x3e\x3c/div\r\n\t\x3e\x3cdiv class\x3d"dijitTooltipContainer dijitTooltipContents" data-dojo-attach-point\x3d"containerNode" role\x3d\'alert\'\x3e\x3c/div\r\n\x3e\x3c/div\x3e\r\n',
"url:dijit/form/templates/ValidationTextBox.html":'\x3cdiv class\x3d"dijit dijitReset dijitInline dijitLeft"\r\n\tid\x3d"widget_${id}" role\x3d"presentation"\r\n\t\x3e\x3cdiv class\x3d\'dijitReset dijitValidationContainer\'\r\n\t\t\x3e\x3cinput class\x3d"dijitReset dijitInputField dijitValidationIcon dijitValidationInner" value\x3d"\x26#935; " type\x3d"text" tabIndex\x3d"-1" readonly\x3d"readonly" role\x3d"presentation"\r\n\t/\x3e\x3c/div\r\n\t\x3e\x3cdiv class\x3d"dijitReset dijitInputField dijitInputContainer"\r\n\t\t\x3e\x3cinput class\x3d"dijitReset dijitInputInner" data-dojo-attach-point\x3d\'textbox,focusNode\' autocomplete\x3d"off"\r\n\t\t\t${!nameAttrSetting} type\x3d\'${type}\'\r\n\t/\x3e\x3c/div\r\n\x3e\x3c/div\x3e\r\n',
"*now":function(n){n(['dojo/i18n!*preload*esri/identity/nls/IdentityManager*["ar","ca","cs","da","de","el","en-gb","en-us","es-es","fi-fi","fr-fr","he-il","hu","it-it","ja-jp","ko-kr","nl-nl","nb","pl","pt-br","pt-pt","ru","sk","sl","sv","th","tr","zh-tw","zh-cn","ROOT"]'])},"*noref":1}});define(["./IdentityManagerDialog","../kernel","./OAuthSignInHandler","../core/declare"],function(n,m,g,h){n=new n;m.id=h.safeMixin(n,g);return m.id});