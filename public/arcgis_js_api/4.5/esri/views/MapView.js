// All material copyright ESRI, All Rights Reserved, unless otherwise specified.
// See https://js.arcgis.com/4.5/esri/copyright.txt for details.
//>>built
require({cache:{"esri/views/MapViewBase":function(){define("require exports ../core/tsSupport/declareExtendsHelper ../core/tsSupport/decorateHelper dojo/_base/lang ../core/accessorSupport/decorators ../core/HandleRegistry ../core/Logger ../core/promiseUtils ../Viewpoint ../geometry/Point ../geometry/ScreenPoint ../geometry/Extent ../geometry/SpatialReference ../geometry/support/webMercatorUtils ./View ./ViewAnimation ./2d/FrameTask ./2d/PaddedViewState ./2d/MapViewConstraints ./2d/AnimationManager ./2d/viewpointUtils".split(" "),
function(A,t,f,a,d,h,p,m,l,q,r,v,x,y,C,E,D,F,H,K,w,L){var J=m.getLogger("esri.views.MapView");return function(m){function E(d){var a=m.call(this,d)||this;a._frameTask=new F(a);a._mapViewBaseHandles=new p;a._setup=!1;a.fullOpacity=1;a.interacting=!1;a.initialExtent=null;a.resizeAlign="center";a.type="2d";a.constraints=new K;a.padding={top:0,right:0,bottom:0,left:0};var f=function(){this._set("updating",this.layerViewManager.factory.working||this.allLayerViews.some(function(d){return!0===d.updating}))}.bind(a),
h=a._mapViewBaseHandles;h.add([a.watch("viewpoint",function(d){return a._flipStationary()},!0),a.on("resize",function(d){return a._resizeHandler(d)}),a.watch("animationManager.animation",function(d){a.animation=d}),a.allLayerViews.on("change",function(){f();h.remove("layerViewsUpdating");h.add(a.allLayerViews.map(function(d){return d.watch("updating",f)}).toArray(),"layerViewsUpdating")})]);a.watch("ready",function(d){d?a._startup():a._tearDown()});return a}f(E,m);E.prototype.destroy=function(){this.destroyed||
(this._set("ready",!1),this._mapViewBaseHandles.removeAll(),this.layerViewManager.empty(),this._frameTask.destroy(),this._tearDown(),this._gotoTask=this._mapViewBaseHandles=this._frameTask=null)};Object.defineProperty(E.prototype,"animation",{set:function(d){var a=this,f=this._get("animation");d!==f&&(f&&f.stop(),!d||d.isFulfilled()?this._set("animation",null):(this._set("animation",d),f=function(){d===a._get("animation")&&(a._set("animation",null),a._frameTask.requestFrame())},d.then(f,f,function(d){a.state&&
(a.state.viewpoint=d)})))},enumerable:!0,configurable:!0});Object.defineProperty(E.prototype,"center",{get:function(){if(!this._setup)return this._get("center");var d=this.content.center;return new r({x:d[0],y:d[1],spatialReference:this.content.spatialReference})},set:function(d){if(null!=d)if(this._normalizeInput(d))if(this._setup){var a=this.viewpoint;L.centerAt(a,a,d);this.viewpoint=a}else this._set("center",d),this.notifyChange("initialExtentRequired");else J.error("#center","incompatible spatialReference "+
JSON.stringify(d.spatialReference)+" with view's spatialReference "+JSON.stringify(this.spatialReference))},enumerable:!0,configurable:!0});Object.defineProperty(E.prototype,"constraints",{set:function(d){var a=this,f=this._get("constraints");f&&(this._mapViewBaseHandles.remove("constraints"),f.destroy());this._set("constraints",d);d&&(this._setup&&(d.view=this,this.state.viewpoint=d.fit(this.content.viewpoint)),this._mapViewBaseHandles.add(d.on("update",function(){a._setup&&a.state&&(a.state.viewpoint=
d.fit(a.content.viewpoint))}),"constraints"))},enumerable:!0,configurable:!0});Object.defineProperty(E.prototype,"extent",{get:function(){return this._setup?this.content.extent.clone():this._get("extent")},set:function(d){if(null!=d){var a=this._normalizeInput(d);a?a.width&&a.height?this._setup?(d=this.viewpoint,L.setExtent(d,d,a,this.size,{constraints:this.constraints}),this.viewpoint=d):(this._set("extent",a),this._set("center",null),this._set("viewpoint",null),this._set("scale",0),this._set("zoom",
-1),this.notifyChange("initialExtentRequired")):J.error("#extent","invalid extent size"):J.error("#center","incompatible spatialReference "+JSON.stringify(d.spatialReference)+" with view's spatialReference "+JSON.stringify(this.spatialReference))}},enumerable:!0,configurable:!0});Object.defineProperty(E.prototype,"initialExtentRequired",{get:function(){var d=this.extent,a=this.center,f=this.scale,h=this.viewpoint,l=this.zoom;return this.get("map.initialViewProperties.viewpoint")||d||a&&(0!==f||-1!==
l)||h?!1:!0},enumerable:!0,configurable:!0});Object.defineProperty(E.prototype,"padding",{get:function(){return this._setup?this.state.padding:this._get("padding")},set:function(d){this._setup?(this.state.padding=d,this._set("padding",this.state.padding)):this._set("padding",d)},enumerable:!0,configurable:!0});Object.defineProperty(E.prototype,"rotation",{get:function(){return this._setup?this.content.rotation:this._get("rotation")},set:function(d){if(!isNaN(d))if(this._setup){var a=this.viewpoint;
L.rotateTo(a,a,d);this.viewpoint=a}else this._set("rotation",d)},enumerable:!0,configurable:!0});Object.defineProperty(E.prototype,"scale",{get:function(){return this._setup?this.content.scale:this._get("scale")},set:function(d){if(d&&!isNaN(d))if(this._setup){var a=this.viewpoint;L.scaleTo(a,a,d);this.viewpoint=a}else{this._set("scale",d);this._set("zoom",-1);if(d=this._get("extent"))this._set("extent",null),this._set("center",d.center);this.notifyChange("initialExtentRequired")}},enumerable:!0,
configurable:!0});Object.defineProperty(E.prototype,"stationary",{get:function(){return!this.animation&&!this.interacting&&!this._get("resizing")&&!this._stationaryTimer},enumerable:!0,configurable:!0});Object.defineProperty(E.prototype,"viewpoint",{get:function(){if(!this._setup)return this._get("viewpoint");var d=this.content;return d&&d.viewpoint.clone()},set:function(d){if(null!=d){var a=this._normalizeInput(d);a?this._setup?(d=L.create(),L.copy(d,a),this.constraints.constrain(d,this.content.viewpoint),
this.state.viewpoint=d,this._frameTask.requestFrame(),this._set("viewpoint",d)):(this._set("viewpoint",a),this._set("extent",null),this._set("center",null),this._set("zoom",-1),this._set("scale",0),this.notifyChange("initialExtentRequired")):!d.scale||isNaN(d.scale)?J.error("#viewpoint","invalid scale value of "+d.scale):d.targetGeometry?J.error("#viewpoint","incompatible spatialReference "+JSON.stringify(d.targetGeometry.spatialReference)+" with view's spatialReference "+JSON.stringify(this.spatialReference)):
J.error("#viewpoint","geometry not defined")}},enumerable:!0,configurable:!0});Object.defineProperty(E.prototype,"zoom",{get:function(){return this._setup?this.constraints.scaleToZoom(this.scale):this._get("zoom")},set:function(d){if(null!=d){if(!this._setup){this.notifyChange("initialExtentRequired");this._set("zoom",d);this._set("scale",0);var a=this._get("extent");a&&(this._set("extent",null),this._set("center",a.center))}this.constraints.effectiveLODs&&(a=this.viewpoint,L.scaleTo(a,a,this.constraints.zoomToScale(d)),
this.viewpoint=a,this._set("zoom",this.constraints.scaleToZoom(this.scale)))}},enumerable:!0,configurable:!0});E.prototype.goTo=function(a,f){if(this._setup)return f=d.mixin({animate:!0},f),a=L.createAsync(a,this),this._gotoTask={},f.animate?this._gotoAnimated(a,f):this._gotoImmediate(a,f);J.error("#goTo()","MapView cannot be used before it is ready")};E.prototype.hitTest=function(d,a){return l.reject("Should be implemented by subclasses")};E.prototype.toMap=function(d,a,f){if(!this._setup)return null;
d&&null!=d.x&&(f=a,a=d.y,d=d.x);var h=[0,0];this.state.toMap(h,[d,a]);f=f||new r;f.x=h[0];f.y=h[1];f.spatialReference=this.spatialReference;return f};E.prototype.isTileInfoRequired=function(){return!0};E.prototype.toScreen=function(d,a,f,h){if(!this._setup)return null;d&&null!=d.x&&(h=a,a=d.y,d=d.x);h=f||h||new v;d=[d,a];this.state.toScreen(d,d);h.x=d[0];h.y=d[1];return h};E.prototype.pixelSizeAt=function(d,a){if(!this._setup)return NaN;d&&null!=d.x&&(a=d.y,d=d.x);return this.content.pixelSizeAt([d,
a])};E.prototype.requestLayerViewUpdate=function(d){this._setup&&this._frameTask.requestLayerViewUpdate(d)};E.prototype.getDefaultSpatialReference=function(){return this.get("map.initialViewProperties.spatialReference")||this.get("defaultsFromMap.spatialReference")||null};E.prototype.isSpatialReferenceSupported=function(d,a){if(a||this._get("ready"))return!0;a=this._normalizeInput(this._get("center"),d);var f=this._normalizeInput(this._get("extent"),d),h=this._normalizeInput(this._get("viewpoint"),
d),l=this._userSpatialReference,m=null,p=null;(h=h&&h.targetGeometry)&&("extent"===h.type?m=h:"point"===h.type&&(p=h));h=this._normalizeInput(this.get("map.initialViewProperties.viewpoint.targetGeometry.extent"),d);d=this._normalizeInput(this.initialExtent,d);d=f||m||h||d;return a||p||d&&d.center?!0:(l&&J.error("The view could not be initialized with the spatialReference "+l.wkid+".","Try specifying an extent or a center and scale"),!1)};E.prototype._gotoImmediate=function(d,a){var f=this,h=this._gotoTask;
!this.animation||"running"!==this.animation.state&&"waiting-for-target"!==this.animation.state?this.animation=new D({target:d}):this.animation.target=d;d.then(function(d){h===f._gotoTask&&(f.viewpoint=f.animation.target=d,f.animation.finish())});return this.animation};E.prototype._gotoAnimated=function(d,a){var f=this;!this.animation||"running"!==this.animation.state&&"waiting-for-target"!==this.animation.state?this.animation=new D({target:d}):this.animation.target=d;var h=this.animation;h.state=
"waiting-for-target";d.then(function(l){h.target===d&&f.animation===h&&(h.target=l,h.state="running",f.animationManager.animate(h,f.viewpoint,a),h.state===D.State.STOPPED&&h.stop())}).otherwise(function(){h.target===d&&f.animation===h&&(f.animation=null,h.finish())});return h};E.prototype._resizeHandler=function(d){var a=this.state;if(a){var f=this.content.viewpoint,h=this.content.size.concat();a.size=[d.width,d.height];L.resize(f,f,h,this.content.size,this.resizeAlign);f=this.constraints.constrain(f,
null);this.state.viewpoint=f}};E.prototype._startup=function(){if(!this._setup){var d=this.constraints,a=this._get("zoom"),f=this._get("scale"),h=this._normalizeInput(this._get("center")),l=this._normalizeInput(this._get("extent")),m=this._get("rotation"),p=this._normalizeInput(this._get("viewpoint"));d.view=this;d.effectiveLODs?-1!==a&&(f=d.zoomToScale(a)):a=-1;var r=null,g=null,v=0,a=p&&p.rotation,z=p&&p.targetGeometry;z&&("extent"===z.type?r=z:"point"===z.type&&(g=z,v=p.scale));p=this._normalizeInput(this.get("map.initialViewProperties.viewpoint.targetGeometry.extent"));
z=this._normalizeInput(this.initialExtent);l=l||r||p||z;h=h||g||l&&l.center;f=f||v||l&&L.extentToScale(l,this.size);m=new q({targetGeometry:h,scale:f,rotation:m||a||0});d.fit(m);this._set("animationManager",new w);this._set("state",new H({padding:this._get("padding"),size:this.size,viewpoint:m}));this._set("content",this.state.content);this._setup=!0}};E.prototype._tearDown=function(){if(this._setup){this._setup=!1;this._stationaryTimer&&(clearTimeout(this._stationaryTimer),this._stationaryTimer=
null,this.notifyChange("stationary"));var d=this._get("content"),a=d.center,f=d.spatialReference,a=new r({x:a[0],y:a[1],spatialReference:f});this._set("viewpoint",null);this._set("extent",null);this._set("center",a);this._set("zoom",-1);this._set("rotation",d.rotation);this._set("scale",d.scale);this._set("spatialReference",f);this.constraints.view=null;this.animationManager.destroy();this._set("animationManager",null);this._set("state",null);this._set("content",null);this.animation=null}};E.prototype._flipStationary=
function(){var d=this;this._stationaryTimer&&clearTimeout(this._stationaryTimer);this._stationaryTimer=setTimeout(function(){d._stationaryTimer=null;d.notifyChange("stationary")},160);this.notifyChange("stationary")};E.prototype._normalizeInput=function(d,a){void 0===a&&(a=this.spatialReference);var f=d&&d.targetGeometry||d;return a?f?a.equals(f.spatialReference)?d:C.canProject(f,a)?d&&"esri.Viewpoint"===d.declaredClass?(d.targetGeometry=C.project(f,a),d):C.project(f,a):null:null:d};a([h.property()],
E.prototype,"animation",null);a([h.property({readOnly:!0})],E.prototype,"animationManager",void 0);a([h.property({value:null,type:r,dependsOn:["content.center"]})],E.prototype,"center",null);a([h.property({type:K})],E.prototype,"constraints",null);a([h.property({readOnly:!0})],E.prototype,"content",void 0);a([h.property({value:null,type:x,dependsOn:["content.extent"]})],E.prototype,"extent",null);a([h.property()],E.prototype,"fullOpacity",void 0);a([h.property({readOnly:!0})],E.prototype,"interacting",
void 0);a([h.property({type:x})],E.prototype,"initialExtent",void 0);a([h.property({dependsOn:["map.initialViewProperties.viewpoint"]})],E.prototype,"initialExtentRequired",null);a([h.property({value:{top:0,right:0,bottom:0,left:0},cast:function(a){return d.mixin({top:0,right:0,bottom:0,left:0},a)}})],E.prototype,"padding",null);a([h.property()],E.prototype,"resizeAlign",void 0);a([h.property({value:0,type:Number,dependsOn:["content.rotation"]})],E.prototype,"rotation",null);a([h.property({value:0,
type:Number,dependsOn:["content.scale"]})],E.prototype,"scale",null);a([h.property({type:y,dependsOn:["map.initialViewProperties.spatialReference","defaultsFromMap.isSpatialReferenceDone"]})],E.prototype,"spatialReference",void 0);a([h.property({readOnly:!0})],E.prototype,"state",void 0);a([h.property()],E.prototype,"stationary",null);a([h.property({readOnly:!0})],E.prototype,"type",void 0);a([h.property({value:null,type:q,dependsOn:["content.viewpoint"]})],E.prototype,"viewpoint",null);a([h.property({value:-1,
dependsOn:["content.scale"]})],E.prototype,"zoom",null);return E=a([h.subclass("esri.views.MapViewBase")],E)}(h.declared(E))})},"esri/geometry/ScreenPoint":function(){define(["./Point"],function(A){return A.createSubclass({declaredClass:"esri.geometry.ScreenPoint",verifySR:function(){}})})},"esri/views/2d/FrameTask":function(){define(["require","exports","../../core/Scheduler","./FrameBudget"],function(A,t,f,a){return function(){function d(d){var f=this;this.view=d;this._frameTaskHandle=null;this._budget=
new a(6);this.budget=6;this.updateEnabled=this.stationary=!0;this.prepare=function(){f._updateParameters.state=f.view.state;f._updateParameters.stationary=f.view.stationary;f._updateParameters.devicePixelRatio=window.devicePixelRatio;f._budget.reset(f.budget)};this.update=function(){if(f.updateEnabled){for(var d=f._budget,a=f.view,h=a.allLayerViews.toArray().filter(function(d){return d.isFulfilled()&&null==d.layerViews}),p=h.length,v=a.state,x=0;x<h.length;x++)if(a=h[x],a.attached){var y=f._layerViewsState[a.uid];
if(null==y||!f.stationary&&!a.moving)a.moving=!0,a.moveStart();y!==v.id&&a.viewChange();f.stationary&&a.moving&&(a.moving=!1,a.moveEnd());f._layerViewsState[a.uid]=v.id}v=f._layerViewsTrash;for(x=0;x<v.length;x++)a=v[x],f._detachLayerView(a);for(x=v.length=0;x<p;x++)a=h[x],a.isFulfilled()&&!a.attached&&f._attachLayerView(a);h=f._layerViewsToUpdate;p=h.slice();a=f._updateParameters;for(f._layerViewsToUpdate.length=0;!d.done&&0<p.length;)p.shift().processUpdate(a);0<p.length&&h.unshift.apply(h,p);0===
h.length&&0===v.length&&f._frameTaskHandle.pause()}};d.watch("ready",function(d){d?f.start():f.stop()})}d.prototype.destroy=function(){this.stop()};d.prototype.start=function(){var d=this;this._updateParameters={budget:this._budget,state:this.view.state,devicePixelRatio:window.devicePixelRatio,stationary:!0};this._layerViewsTrash=[];this._layerViewsToUpdate=[];this._layerViewsState={};this._allLayerViewsChangeHandle=this.view.allLayerViews.on("change",function(a){Array.prototype.push.apply(d._layerViewsTrash,
a.removed);d.requestFrame()});this._stationaryHandle=this.view.watch("stationary",function(a){d.stationary=a;d.requestFrame()});this._frameTaskHandle=f.addFrameTask(this)};d.prototype.stop=function(){var d=this;this._frameTaskHandle&&(this.view.allLayerViews.forEach(function(a){return d._detachLayerView(a)}),this._stationaryHandle.remove(),this._allLayerViewsChangeHandle.remove(),this._frameTaskHandle.remove(),this._updateParameters=this._stationaryHandle=this._allLayerViewsChangeHandle=this._frameTaskHandle=
this._layerViewsTrash=this._layerViewsToUpdate=this._layerViewsState=null,this.stationary=!0)};d.prototype.requestLayerViewUpdate=function(d){this._layerViewsToUpdate.push(d);this.requestFrame()};d.prototype.requestFrame=function(){this._frameTaskHandle&&this._frameTaskHandle.isPaused()&&this._frameTaskHandle.resume()};d.prototype._attachLayerView=function(d){d.attached||(d.attached=!0,d.moving=!1,d.attach())};d.prototype._detachLayerView=function(d){d.attached&&(d.detach(),d.attached=!1,d.moving=
!1)};return d}()})},"esri/views/2d/FrameBudget":function(){define(["require","exports","../../core/now"],function(A,t,f){return function(){function a(d){void 0===d&&(d=Number.MAX_VALUE);this._budget=this._begin=0;this.enabled=!0;this.reset(d)}a.now=function(){return f()};Object.defineProperty(a.prototype,"done",{get:function(){return this.enabled&&this.elapsed>=this._budget},enumerable:!0,configurable:!0});Object.defineProperty(a.prototype,"elapsed",{get:function(){return f()-this._begin},enumerable:!0,
configurable:!0});Object.defineProperty(a.prototype,"remaining",{get:function(){return Math.max(this._budget-this.elapsed,0)},enumerable:!0,configurable:!0});a.prototype.reset=function(d){void 0===d&&(d=Number.MAX_VALUE);this._begin=f();this._budget=this.enabled?d:Number.MAX_VALUE};return a}()})},"esri/views/2d/PaddedViewState":function(){define("require exports ../../core/tsSupport/declareExtendsHelper ../../core/tsSupport/decorateHelper ../../core/accessorSupport/decorators ./viewpointUtils ./ViewState ./libs/gl-matrix/vec2 ./libs/gl-matrix/mat2d ./libs/gl-matrix/common ../../core/Accessor".split(" "),
function(A,t,f,a,d,h,p,m,l,q,r){var v=function(h){function m(){var d=null!==h&&h.apply(this,arguments)||this;d.left=0;d.top=0;d.right=0;d.bottom=0;return d}f(m,h);a([d.property()],m.prototype,"left",void 0);a([d.property()],m.prototype,"top",void 0);a([d.property()],m.prototype,"right",void 0);a([d.property()],m.prototype,"bottom",void 0);return m=a([d.subclass("esri.views.2d.PaddedViewState.Padding")],m)}(d.declared(r));return function(r){function x(){for(var d=[],a=0;a<arguments.length;a++)d[a]=
arguments[a];d=r.apply(this,d)||this;d.content=new p;d.padding=new v;d.size=m.fromValues(0,0);return d}f(x,r);Object.defineProperty(x.prototype,"clipRect",{get:function(){var d=this.worldScreenWidth;if(!d)return null;var a=q.toRadian(this.rotation),f=this.width*Math.abs(Math.cos(a))+this.height*Math.abs(Math.sin(a));if(d>f)return null;var h=m.clone(this.screenCenter),p=l.fromTranslation(l.create(),h);l.rotate(p,p,a);m.negate(h,h);l.translate(p,p,h);m.transformMat2d(h,this.paddedScreenCenter,p);return{top:-Math.round(f),
left:Math.round(h[0]-.5*d),right:Math.round(h[0]+.5*d),bottom:+Math.round(f)}},enumerable:!0,configurable:!0});Object.defineProperty(x.prototype,"padding",{set:function(d){this._set("padding",d||new v);this._updateContent()},enumerable:!0,configurable:!0});Object.defineProperty(x.prototype,"size",{set:function(d){this._set("size",d);this._updateContent()},enumerable:!0,configurable:!0});Object.defineProperty(x.prototype,"paddedScreenCenter",{get:function(){var d=this.content.size,a=this.padding,d=
m.scale(m.create(),d,.5);d[0]+=a.left;d[1]+=a.top;return d},enumerable:!0,configurable:!0});Object.defineProperty(x.prototype,"viewpoint",{set:function(d){var a=d.clone();this.content.viewpoint=d;h.addPadding(a,d,this._get("size"),this._get("padding"));this._set("viewpoint",h.addPadding(a.clone(),d,this._get("size"),this._get("padding")))},enumerable:!0,configurable:!0});x.prototype._updateContent=function(){var d=m.create(),a=this._get("size"),f=this._get("padding");if(a&&f){var h=this.content;m.set(d,
f.left+f.right,f.top+f.bottom);m.subtract(d,a,d);h.size=d;if(d=h.viewpoint)this.viewpoint=d}};a([d.shared({transform:{dependsOn:["padding"]}})],x.prototype,"properties",void 0);a([d.property({dependsOn:["worldScreenWidth","rotation","paddedScreenCenter","screenCenter"],readOnly:!0})],x.prototype,"clipRect",null);a([d.property()],x.prototype,"content",void 0);a([d.property({type:v})],x.prototype,"padding",null);a([d.property()],x.prototype,"size",null);a([d.property({dependsOn:["size","padding"],readOnly:!0})],
x.prototype,"paddedScreenCenter",null);a([d.property()],x.prototype,"viewpoint",null);return x=a([d.subclass("esri.views.2d.PaddedViewState")],x)}(d.declared(p))})},"esri/views/2d/viewpointUtils":function(){define("require exports ./libs/gl-matrix/common ./libs/gl-matrix/mat2d ./libs/gl-matrix/vec2 ../../Viewpoint ../../core/promiseUtils ../../core/Error ../../geometry/SpatialReference ../../geometry/Geometry ../../geometry/Point ../../geometry/Extent ../../geometry/support/webMercatorUtils ../../geometry/support/scaleUtils ../../geometry/support/spatialReferenceUtils ../../geometry/support/webMercatorUtils".split(" "),
function(A,t,f,a,d,h,p,m,l,q,r,v,x,y,C,E){function D(g,a,z,c){return c&&z&&!c.equals(z)&&x.canProject(c,z)&&c.isWebMercator?(c.isWebMercator?(z=a[1],89.99999<z?z=89.99999:-89.99999>z&&(z=-89.99999),z=Math.sin(f.toRadian(z)),g=d.set(g,6378137*f.toRadian(a[0]),3189068.5*Math.log((1+z)/(1-z)))):(z=f.toDegree(a[0]/6378137),g=d.set(g,z-360*Math.floor((z+180)/360),f.toDegree(.5*Math.PI-2*Math.atan(Math.exp(-1*a[1]/6378137))))),g):d.copy(g,a)}function F(g){return g.wkid?g:g.spatialReference||l.WGS84}function H(g,
a){return a.type?d.set(g,a.x,a.y):d.copy(g,a)}function K(g,d){return Math.max(g.width/d[0],g.height/d[1])*T(g.spatialReference)}function w(g,d,a){var c;if(!g)return null;if(Array.isArray(g)&&2===g.length&&"number"===typeof g[0]&&"number"===typeof g[1])return new r(g);if(g.reduce)return g.reduce(function(b,e){return w(e,d,b)},a);g instanceof q?c=g:g.geometry&&(c=g.geometry);if(!c)return null;g="point"===c.type?new v({xmin:c.x,ymin:c.y,xmax:c.x,ymax:c.y,spatialReference:c.spatialReference}):c.extent;
if(!g)return null;c=x.canProject(g,d);if(!g.spatialReference.equals(d)&&c)g=x.project(g,d);else if(!c)return null;return a=a?a.union(g):g.clone()}function L(g,a){if(!g)return new h({targetGeometry:new r,scale:0,rotation:0});var z=a.spatialReference,c=a.size,b=a.viewpoint,e=a.constraints,k=null;"esri.Viewpoint"===g.declaredClass?k=g:g.viewpoint?k=g.viewpoint:g.target&&"esri.Viewpoint"===g.target.declaredClass&&(k=g.target);var n=null;if(k&&k.targetGeometry)n=k.targetGeometry;else if(g instanceof q)n=
g;else if(g||g&&(g.hasOwnProperty("center")||g.hasOwnProperty("extent")||g.hasOwnProperty("target")))n=w(g.center,z)||w(g.extent,z)||w(g.target,z)||w(g,z);!n&&b&&b.targetGeometry?n=b.targetGeometry:!n&&a.extent&&(n=a.extent);var u=F(n);z||(z=F(a.spatialReference||a.extent||n));if(!E.canProject(n,z)&&u&&!u.equals(z))return null;var B=H(d.create(),n.center?n.center:n),z=new r(D(B,B,u,z),z),u=null,u=k&&k.targetGeometry&&"point"===k.targetGeometry.type?k.scale:g.hasOwnProperty("scale")&&g.scale?g.scale:
g.hasOwnProperty("zoom")&&-1!==g.zoom&&e&&e.effectiveLODs?e.zoomToScale(g.zoom):Array.isArray(n)||"point"===n.type||"extent"===n.type&&0===n.width&&0===n.height?a.extent?K(a.extent,c):b.scale:K(n.extent,c);a=0;k?a=k.rotation:g.hasOwnProperty("rotation")?a=g.rotation:b&&(a=b.rotation);g=new h({targetGeometry:z,scale:u,rotation:a});e&&(g=e.fit(g),e.rotationEnabled||(g.rotation=0));return g}function J(g,d){var a=g.targetGeometry,c=d.targetGeometry;a.x=c.x;a.y=c.y;a.spatialReference=c.spatialReference;
g.scale=d.scale;g.rotation=d.rotation;return g}function M(g,a,z){return z?d.set(g,.5*(a[0]-z.right+z.left),.5*(a[1]-z.bottom+z.top)):d.scale(g,a,.5)}function S(g,d,z,c){t.getTransform(g,d,z,c);return a.invert(g,g)}function N(g,a,z){var c=f.toRadian(a.rotation)||0;a=Math.abs(Math.cos(c));c=Math.abs(Math.sin(c));return d.set(g,Math.round(z[1]*c+z[0]*a),Math.round(z[1]*a+z[0]*c))}function O(g){return g.scale*(1/(39.37*(y.getMetersPerUnitForSR(g.targetGeometry.spatialReference)||U)*96))}function T(g){return 39.37*
(y.getMetersPerUnitForSR(g)||U)*96}function R(g){return g.isWrappable?(g=C.getInfo(g),g.valid[1]-g.valid[0]):0}function W(g,d){return Math.round(R(g)/d)}Object.defineProperty(t,"__esModule",{value:!0});var U=6370997*Math.PI/180,P=180/Math.PI;t.extentToScale=K;t.create=L;t.copy=J;t.getAnchor=M;t.getExtent=function(){var g=d.create();return function(d,a,c){var b=a.targetGeometry;H(g,b);a=.5*O(a);d.xmin=g[0]-a*c[0];d.ymin=g[1]-a*c[1];d.xmax=g[0]+a*c[0];d.ymax=g[1]+a*c[1];d.spatialReference=b.spatialReference;
return d}}();t.setExtent=function(g,d,a,c,b){t.centerAt(g,d,a.center);g.scale=K(a,c);b&&b.constraints&&b.constraints.constrain(g);return g};t.getOuterExtent=function(){var g=d.create(),a=d.create();return function(d,c,b){H(g,c.targetGeometry);N(a,c,b);b=.5*O(c);d.set({xmin:g[0]-b*a[0],ymin:g[1]-b*a[1],xmax:g[0]+b*a[0],ymax:g[1]+b*a[1],spatialReference:c.targetGeometry.spatialReference});return d}}();t.getClippedExtent=function(){var g=d.create(),a=d.create();return function(d,c,b){var e=O(c),k=c.targetGeometry.spatialReference,
n=W(k,e);H(g,c.targetGeometry);N(a,c,b);k.isWrappable&&a[0]>n&&(a[0]=n);c=.5*e;d.set({xmin:g[0]-c*a[0],ymin:g[1]-c*a[1],xmax:g[0]+c*a[0],ymax:g[1]+c*a[1],spatialReference:k});return d}}();t.getOuterSize=N;t.getPaddingScreenTranslation=function(){var g=d.create();return function(a,z,c){return d.sub(a,d.scale(a,z,.5),M(g,z,c))}}();var Y=function(){var g=a.create(),h=d.create();return function(z,c,b,e){var k=O(c);c=f.toRadian(c.rotation)||0;d.set(h,k,k);a.fromScaling(g,h);a.rotate(g,g,c);a.translate(g,
g,t.getPaddingScreenTranslation(h,b,e));a.translate(g,g,[0,e.top-e.bottom]);return d.set(z,g[4],g[5])}}();t.getResolution=O;t.getResolutionToScaleFactor=T;t.getMatrix=function(){var g=d.create(),f=d.create(),z=d.create();return function(c,b,e,k,n,u){d.negate(g,b);d.scale(f,e,.5*u);d.set(z,1/k*u,-1/k*u);a.identity(c);a.translate(c,c,f);n&&a.rotate(c,c,n);a.scale(c,c,z);a.translate(c,c,g);return c}}();t.getTransform=function(){var g=d.create();return function(d,a,c,b){var e=O(a),k=f.toRadian(a.rotation)||
0;H(g,a.targetGeometry);return t.getMatrix(d,g,c,e,k,b)}}();t.getTransformNoRotation=function(){var g=d.create();return function(d,a,c,b){var e=O(a);H(g,a.targetGeometry);return t.getMatrix(d,g,c,e,0,b)}}();t.getWorldWidth=R;t.getWorldScreenWidth=W;t.createAsync=function(g,d){if(g=L(g,d))return p.resolve(g);g=new m("viewpointUtils-createAsync:different-spatialReference","Target spatialReference cannot be projected and is different from out spatialReference");return p.reject(g)};t.angleBetween=function(){var g=
d.create(),a=d.create(),z=d.create();return function(c,b,e){d.subtract(g,c,b);d.normalize(g,g);d.subtract(a,c,e);d.normalize(a,a);d.cross(z,g,a);c=Math.acos(d.dot(g,a)/(d.length(g)*d.length(a)))*P;0>z[2]&&(c=-c);isNaN(c)&&(c=0);return c}}();t.addPadding=function(){var g=d.create();return function(d,a,c,b){var e=d.targetGeometry;J(d,a);Y(g,a,c,b);e.x+=g[0];e.y+=g[1];return d}}();t.removePadding=function(){var g=d.create();return function(d,a,c,b){var e=d.targetGeometry;J(d,a);Y(g,a,c,b);e.x-=g[0];
e.y-=g[1];return d}}();t.centerAt=function(){var g=d.create();return function(d,a,c){J(d,a);a=d.targetGeometry;var b=F(c),e=F(a);H(g,c);D(g,g,b,e);a.x=g[0];a.y=g[1];return d}}();t.pixelSizeAt=function(g,d,a){return O(d)};t.resize=function(){var g=d.create();return function(a,z,c,b,e){e||(e="center");d.sub(g,c,b);d.scale(g,g,.5);c=g[0];b=g[1];switch(e){case "center":d.set(g,0,0);break;case "left":d.set(g,-c,0);break;case "top":d.set(g,0,b);break;case "right":d.set(g,c,0);break;case "bottom":d.set(g,
0,-b);break;case "top-left":d.set(g,-c,b);break;case "bottom-left":d.set(g,-c,-b);break;case "top-right":d.set(g,c,b);break;case "bottom-right":d.set(g,c,-b)}t.translateBy(a,z,g);return a}}();t.rotateBy=function(g,d,a){J(g,d);g.rotation+=a;return g};t.rotateTo=function(g,d,a){J(g,d);g.rotation=a;return g};t.scaleBy=function(){var g=d.create();return function(a,z,c,b,e){J(a,z);0!==c&&(t.toMap(g,b,z,e),a.scale=z.scale*c,t.toScreen(g,g,a,e),t.translateBy(a,a,d.set(g,g[0]-b[0],b[1]-g[1])));return a}}();
t.scaleTo=function(g,d,a){J(g,d);g.scale=a;return g};t.scaleAndRotateBy=function(){var g=d.create();return function(a,z,c,b,e,k){J(a,z);0!==c&&(t.toMap(g,e,z,k),a.scale=z.scale*c,a.rotation+=b,t.toScreen(g,g,a,k),t.translateBy(a,a,d.set(g,g[0]-e[0],e[1]-g[1])));return a}}();t.padAndScaleAndRotateBy=function(){var g=d.create(),a=d.create();return function(z,c,b,e,k,n,u){t.getPaddingScreenTranslation(a,n,u);d.add(g,k,a);return e?t.scaleAndRotateBy(z,c,b,e,g,n):t.scaleBy(z,c,b,g,n)}}();t.toMap=function(){var g=
a.create();return function(a,z,c,b){return d.transformMat2d(a,z,S(g,c,b,1))}}();t.toScreen=function(){var g=a.create();return function(a,z,c,b){return d.transformMat2d(a,z,t.getTransform(g,c,b,1))}}();t.translateBy=function(){var g=d.create(),h=a.create();return function(z,c,b){J(z,c);var e=O(c),k=z.targetGeometry;a.fromRotation(h,f.toRadian(c.rotation)||0);a.scale(h,h,d.fromValues(e,e));d.transformMat2d(g,b,h);k.x+=g[0];k.y+=g[1];return z}}()})},"esri/views/2d/libs/gl-matrix/common":function(){define([],
function(){if(!A)var A=1E-6;if(!t)var t="undefined"!==typeof Float32Array?Float32Array:Array;if(!f)var f=Math.random;var a={GLMAT_EPSILON:A,GLMAT_ARRAY_TYPE:t,GLMAT_RANDOM:f,setMatrixArrayType:function(d){a.GLMAT_ARRAY_TYPE=d}},d=Math.PI/180,h=180/Math.PI;a.toRadian=function(a){return a*d};a.toDegree=function(d){return d*h};a.setMatrixArrayType(Array);return a})},"esri/views/2d/libs/gl-matrix/mat2d":function(){define(["./common"],function(A){var t=A.GLMAT_ARRAY_TYPE;A={create:function(){var f=new t(6);
f[0]=1;f[1]=0;f[2]=0;f[3]=1;f[4]=0;f[5]=0;return f},clone:function(f){var a=new t(6);a[0]=f[0];a[1]=f[1];a[2]=f[2];a[3]=f[3];a[4]=f[4];a[5]=f[5];return a},copy:function(f,a){f[0]=a[0];f[1]=a[1];f[2]=a[2];f[3]=a[3];f[4]=a[4];f[5]=a[5];return f},identity:function(f){f[0]=1;f[1]=0;f[2]=0;f[3]=1;f[4]=0;f[5]=0;return f},invert:function(f,a){var d=a[0],h=a[1],p=a[2],m=a[3],l=a[4];a=a[5];var q=d*m-h*p;if(!q)return null;q=1/q;f[0]=m*q;f[1]=-h*q;f[2]=-p*q;f[3]=d*q;f[4]=(p*a-m*l)*q;f[5]=(h*l-d*a)*q;return f},
determinant:function(f){return f[0]*f[3]-f[1]*f[2]},multiply:function(f,a,d){var h=a[0],p=a[1],m=a[2],l=a[3],q=a[4];a=a[5];var r=d[0],v=d[1],x=d[2],y=d[3],C=d[4];d=d[5];f[0]=h*r+m*v;f[1]=p*r+l*v;f[2]=h*x+m*y;f[3]=p*x+l*y;f[4]=h*C+m*d+q;f[5]=p*C+l*d+a;return f}};A.mul=A.multiply;A.rotate=function(f,a,d){var h=a[0],p=a[1],m=a[2],l=a[3],q=a[4];a=a[5];var r=Math.sin(d);d=Math.cos(d);f[0]=h*d+m*r;f[1]=p*d+l*r;f[2]=h*-r+m*d;f[3]=p*-r+l*d;f[4]=q;f[5]=a;return f};A.scale=function(f,a,d){var h=a[1],p=a[2],
m=a[3],l=a[4],q=a[5],r=d[0];d=d[1];f[0]=a[0]*r;f[1]=h*r;f[2]=p*d;f[3]=m*d;f[4]=l;f[5]=q;return f};A.translate=function(f,a,d){var h=a[0],p=a[1],m=a[2],l=a[3],q=a[4];a=a[5];var r=d[0];d=d[1];f[0]=h;f[1]=p;f[2]=m;f[3]=l;f[4]=h*r+m*d+q;f[5]=p*r+l*d+a;return f};A.fromRotation=function(f,a){var d=Math.sin(a);a=Math.cos(a);f[0]=a;f[1]=d;f[2]=-d;f[3]=a;f[4]=0;f[5]=0;return f};A.fromScaling=function(f,a){f[0]=a[0];f[1]=0;f[2]=0;f[3]=a[1];f[4]=0;f[5]=0;return f};A.fromTranslation=function(f,a){f[0]=1;f[1]=
0;f[2]=0;f[3]=1;f[4]=a[0];f[5]=a[1];return f};A.str=function(f){return"mat2d("+f[0]+", "+f[1]+", "+f[2]+", "+f[3]+", "+f[4]+", "+f[5]+")"};A.frob=function(f){return Math.sqrt(Math.pow(f[0],2)+Math.pow(f[1],2)+Math.pow(f[2],2)+Math.pow(f[3],2)+Math.pow(f[4],2)+Math.pow(f[5],2)+1)};return A})},"esri/views/2d/libs/gl-matrix/vec2":function(){define(["./common"],function(A){var t=A.GLMAT_ARRAY_TYPE,f=A.GLMAT_RANDOM,a={create:function(){var d=new t(2);d[0]=0;d[1]=0;return d},clone:function(d){var a=new t(2);
a[0]=d[0];a[1]=d[1];return a},fromValues:function(d,a){var f=new t(2);f[0]=d;f[1]=a;return f},copy:function(d,a){d[0]=a[0];d[1]=a[1];return d},set:function(d,a,f){d[0]=a;d[1]=f;return d},add:function(d,a,f){d[0]=a[0]+f[0];d[1]=a[1]+f[1];return d},subtract:function(d,a,f){d[0]=a[0]-f[0];d[1]=a[1]-f[1];return d}};a.sub=a.subtract;a.multiply=function(d,a,f){d[0]=a[0]*f[0];d[1]=a[1]*f[1];return d};a.mul=a.multiply;a.divide=function(d,a,f){d[0]=a[0]/f[0];d[1]=a[1]/f[1];return d};a.div=a.divide;a.min=function(d,
a,f){d[0]=Math.min(a[0],f[0]);d[1]=Math.min(a[1],f[1]);return d};a.max=function(d,a,f){d[0]=Math.max(a[0],f[0]);d[1]=Math.max(a[1],f[1]);return d};a.scale=function(d,a,f){d[0]=a[0]*f;d[1]=a[1]*f;return d};a.scaleAndAdd=function(d,a,f,m){d[0]=a[0]+f[0]*m;d[1]=a[1]+f[1]*m;return d};a.distance=function(d,a){var f=a[0]-d[0];d=a[1]-d[1];return Math.sqrt(f*f+d*d)};a.dist=a.distance;a.squaredDistance=function(d,a){var f=a[0]-d[0];d=a[1]-d[1];return f*f+d*d};a.sqrDist=a.squaredDistance;a.length=function(d){var a=
d[0];d=d[1];return Math.sqrt(a*a+d*d)};a.len=a.length;a.squaredLength=function(d){var a=d[0];d=d[1];return a*a+d*d};a.sqrLen=a.squaredLength;a.negate=function(d,a){d[0]=-a[0];d[1]=-a[1];return d};a.inverse=function(d,a){d[0]=1/a[0];d[1]=1/a[1];return d};a.normalize=function(a,f){var d=f[0],h=f[1],d=d*d+h*h;0<d&&(d=1/Math.sqrt(d),a[0]=f[0]*d,a[1]=f[1]*d);return a};a.dot=function(a,f){return a[0]*f[0]+a[1]*f[1]};a.cross=function(a,f,p){f=f[0]*p[1]-f[1]*p[0];a[0]=a[1]=0;a[2]=f;return a};a.lerp=function(a,
f,p,m){var d=f[0];f=f[1];a[0]=d+m*(p[0]-d);a[1]=f+m*(p[1]-f);return a};a.random=function(a,h){h=h||1;var d=2*f()*Math.PI;a[0]=Math.cos(d)*h;a[1]=Math.sin(d)*h;return a};a.transformMat2=function(a,f,p){var d=f[0];f=f[1];a[0]=p[0]*d+p[2]*f;a[1]=p[1]*d+p[3]*f;return a};a.transformMat2d=function(a,f,p){var d=f[0];f=f[1];a[0]=p[0]*d+p[2]*f+p[4];a[1]=p[1]*d+p[3]*f+p[5];return a};a.transformMat3=function(a,f,p){var d=f[0];f=f[1];a[0]=p[0]*d+p[3]*f+p[6];a[1]=p[1]*d+p[4]*f+p[7];return a};a.transformMat4=function(a,
f,p){var d=f[0];f=f[1];a[0]=p[0]*d+p[4]*f+p[12];a[1]=p[1]*d+p[5]*f+p[13];return a};a.forEach=function(){var d=a.create();return function(a,f,m,l,q,r){f||(f=2);m||(m=0);for(l=l?Math.min(l*f+m,a.length):a.length;m<l;m+=f)d[0]=a[m],d[1]=a[m+1],q(d,d,r),a[m]=d[0],a[m+1]=d[1];return a}}();a.str=function(a){return"vec2("+a[0]+", "+a[1]+")"};return a})},"esri/views/2d/ViewState":function(){define("require exports ../../core/tsSupport/declareExtendsHelper ../../core/tsSupport/decorateHelper ../../core/accessorSupport/decorators ../../core/Accessor ../../geometry/Extent ./viewpointUtils ./libs/gl-matrix/vec2 ./libs/gl-matrix/mat2d".split(" "),
function(A,t,f,a,d,h,p,m,l,q){return function(h){function r(){var a=null!==h&&h.apply(this,arguments)||this;a.pixelRatio=1;a.size=[0,0];return a}f(r,h);x=r;Object.defineProperty(r.prototype,"center",{get:function(){var a=this.viewpoint.targetGeometry;return l.set(l.create(),a.x,a.y)},enumerable:!0,configurable:!0});Object.defineProperty(r.prototype,"extent",{get:function(){return m.getExtent(new p,this.viewpoint,this.size)},enumerable:!0,configurable:!0});Object.defineProperty(r.prototype,"height",
{get:function(){return this.size?this.size[1]:0},enumerable:!0,configurable:!0});Object.defineProperty(r.prototype,"id",{get:function(){return this._get("id")+1},enumerable:!0,configurable:!0});Object.defineProperty(r.prototype,"inverseTransform",{get:function(){return q.invert(q.create(),this.transform)},enumerable:!0,configurable:!0});Object.defineProperty(r.prototype,"latitude",{get:function(){return this.viewpoint.targetGeometry.latitude},enumerable:!0,configurable:!0});Object.defineProperty(r.prototype,
"longitude",{get:function(){return this.viewpoint.targetGeometry.longitude},enumerable:!0,configurable:!0});Object.defineProperty(r.prototype,"resolution",{get:function(){return m.getResolution(this.viewpoint)},enumerable:!0,configurable:!0});Object.defineProperty(r.prototype,"rotation",{get:function(){return this.viewpoint.rotation},enumerable:!0,configurable:!0});Object.defineProperty(r.prototype,"scale",{get:function(){return this.viewpoint.scale},enumerable:!0,configurable:!0});Object.defineProperty(r.prototype,
"screenCenter",{get:function(){return l.scale(l.create(),this.size,.5)},enumerable:!0,configurable:!0});Object.defineProperty(r.prototype,"spatialReference",{get:function(){return this.viewpoint.targetGeometry.spatialReference},enumerable:!0,configurable:!0});Object.defineProperty(r.prototype,"transform",{get:function(){return m.getTransform(q.create(),this.viewpoint,this.size,this.pixelRatio)},enumerable:!0,configurable:!0});Object.defineProperty(r.prototype,"transformNoRotation",{get:function(){return m.getTransformNoRotation(q.create(),
this.viewpoint,this.size,this.pixelRatio)},enumerable:!0,configurable:!0});Object.defineProperty(r.prototype,"clippedExtent",{get:function(){return m.getClippedExtent(new p,this.viewpoint,this.size)},enumerable:!0,configurable:!0});Object.defineProperty(r.prototype,"width",{get:function(){return this.size?this.size[0]:0},enumerable:!0,configurable:!0});Object.defineProperty(r.prototype,"worldScreenWidth",{get:function(){return m.getWorldScreenWidth(this.spatialReference,this.resolution)},enumerable:!0,
configurable:!0});Object.defineProperty(r.prototype,"worldWidth",{get:function(){return m.getWorldWidth(this.spatialReference)},enumerable:!0,configurable:!0});Object.defineProperty(r.prototype,"wrappable",{get:function(){return!!this.spatialReference&&this.spatialReference.isWrappable},enumerable:!0,configurable:!0});Object.defineProperty(r.prototype,"x",{get:function(){return this.center[0]},enumerable:!0,configurable:!0});Object.defineProperty(r.prototype,"y",{get:function(){return this.center[1]},
enumerable:!0,configurable:!0});r.prototype.copy=function(a){this.viewpoint&&this.size?(this._set("viewpoint",m.copy(this.viewpoint,a.viewpoint)),this._set("size",l.copy(this.size,a.size))):(this.viewpoint=a.viewpoint.clone(),l.copy(this.size,a.size));this._set("pixelRatio",a.pixelRatio);return this};r.prototype.clone=function(){return new x({viewpoint:this.viewpoint.clone(),size:l.clone(this.size)})};r.prototype.toMap=function(a,d){return l.transformMat2d(a,d,this.inverseTransform)};r.prototype.toScreen=
function(a,d){return l.transformMat2d(a,d,this.transform)};r.prototype.pixelSizeAt=function(a){return m.pixelSizeAt(a,this.viewpoint,this.size)};a([d.property({dependsOn:["viewpoint"]})],r.prototype,"center",null);a([d.property({readOnly:!0,dependsOn:["viewpoint","size"]})],r.prototype,"extent",null);a([d.property({readOnly:!0,dependsOn:["size"]})],r.prototype,"height",null);a([d.property({value:0,readOnly:!0,dependsOn:["transform"]})],r.prototype,"id",null);a([d.property({readOnly:!0,dependsOn:["transform"]})],
r.prototype,"inverseTransform",null);a([d.property({readOnly:!0,dependsOn:["viewpoint"]})],r.prototype,"latitude",null);a([d.property({readOnly:!0,dependsOn:["viewpoint"]})],r.prototype,"longitude",null);a([d.property()],r.prototype,"pixelRatio",void 0);a([d.property({readOnly:!0,dependsOn:["viewpoint"]})],r.prototype,"resolution",null);a([d.property({readOnly:!0,dependsOn:["viewpoint"]})],r.prototype,"rotation",null);a([d.property({readOnly:!0,dependsOn:["viewpoint"]})],r.prototype,"scale",null);
a([d.property({readOnly:!0,dependsOn:["size"]})],r.prototype,"screenCenter",null);a([d.property()],r.prototype,"size",void 0);a([d.property({readOnly:!0,dependsOn:["viewpoint"]})],r.prototype,"spatialReference",null);a([d.property({readOnly:!0,dependsOn:["viewpoint","size","pixelRatio"]})],r.prototype,"transform",null);a([d.property({readOnly:!0,dependsOn:["viewpoint","size","pixelRatio"]})],r.prototype,"transformNoRotation",null);a([d.property()],r.prototype,"viewpoint",void 0);a([d.property({readOnly:!0,
dependsOn:["viewpoint","size"]})],r.prototype,"clippedExtent",null);a([d.property({readOnly:!0,dependsOn:["size"]})],r.prototype,"width",null);a([d.property({readOnly:!0,dependsOn:["worldWidth","resolution"]})],r.prototype,"worldScreenWidth",null);a([d.property({readOnly:!0,dependsOn:["spatialReference"]})],r.prototype,"worldWidth",null);a([d.property({readOnly:!0,dependsOn:["spatialReference"]})],r.prototype,"wrappable",null);a([d.property({readOnly:!0,dependsOn:["center"]})],r.prototype,"x",null);
a([d.property({readOnly:!0,dependsOn:["center"]})],r.prototype,"y",null);return r=x=a([d.subclass("esri.views.2d.ViewState")],r);var x}(d.declared(h))})},"esri/views/2d/MapViewConstraints":function(){define("require exports ../../core/tsSupport/declareExtendsHelper ../../core/tsSupport/decorateHelper ../../core/accessorSupport/decorators ../../core/Accessor ../../core/Evented ../../layers/support/LOD ./constraints/ZoomConstraint ./constraints/RotationConstraint".split(" "),function(A,t,f,a,d,h,p,
m,l,q){return function(h){function p(){var a=null!==h&&h.apply(this,arguments)||this;a.enabled=!0;a.lods=null;a.minScale=0;a.maxScale=0;a.minZoom=-1;a.maxZoom=-1;a.rotationEnabled=!0;a.snapToZoom=!0;return a}f(p,h);p.prototype.initialize=function(){this.watch("_zoom, _rotation",this.emit.bind(this,"update"),!0)};p.prototype.destroy=function(){this.view=null;this._set("_zoom",null);this._set("_rotation",null)};Object.defineProperty(p.prototype,"_rotation",{get:function(){return new q({rotationEnabled:this.rotationEnabled})},
enumerable:!0,configurable:!0});Object.defineProperty(p.prototype,"_defaultLODs",{get:function(){var a=this.get("view.defaultsFromMap.tileInfo"),d=this.get("view.spatialReference");return a&&d&&a.spatialReference.equals(d)?a.lods:null},enumerable:!0,configurable:!0});Object.defineProperty(p.prototype,"_zoom",{get:function(){return new l({lods:this.lods||this._defaultLODs,minZoom:this.minZoom,maxZoom:this.maxZoom,minScale:this.minScale,maxScale:this.maxScale,snapToZoom:this.snapToZoom})},enumerable:!0,
configurable:!0});p.prototype.canZoomInTo=function(a){var d=this.effectiveMaxScale;return 0===d||a>=d};p.prototype.canZoomOutTo=function(a){var d=this.effectiveMinScale;return 0===d||a<=d};p.prototype.constrain=function(a,d){if(!this.enabled)return a;this._zoom.constrain(a,d);this._rotation.constrain(a,d);return a};p.prototype.fit=function(a){if(!this.enabled||!this.snapToZoom)return a;this._zoom.fit(a);return a};p.prototype.zoomToScale=function(a){return this._zoom.zoomToScale(a)};p.prototype.scaleToZoom=
function(a){return this._zoom.scaleToZoom(a)};p.prototype.snapScale=function(a){return this._zoom.snapToClosestScale(a)};p.prototype.snapToNextScale=function(a){return this._zoom.snapToNextScale(a)};p.prototype.snapToPreviousScale=function(a){return this._zoom.snapToPreviousScale(a)};a([d.property({readOnly:!0,aliasOf:"_zoom.effectiveLODs"})],p.prototype,"effectiveLODs",void 0);a([d.property({readOnly:!0,aliasOf:"_zoom.effectiveMinScale"})],p.prototype,"effectiveMinScale",void 0);a([d.property({readOnly:!0,
aliasOf:"_zoom.effectiveMaxScale"})],p.prototype,"effectiveMaxScale",void 0);a([d.property({readOnly:!0,aliasOf:"_zoom.effectiveMinZoom"})],p.prototype,"effectiveMinZoom",void 0);a([d.property({readOnly:!0,aliasOf:"_zoom.effectiveMaxZoom"})],p.prototype,"effectiveMaxZoom",void 0);a([d.property()],p.prototype,"enabled",void 0);a([d.property({type:[m]})],p.prototype,"lods",void 0);a([d.property()],p.prototype,"minScale",void 0);a([d.property()],p.prototype,"maxScale",void 0);a([d.property()],p.prototype,
"minZoom",void 0);a([d.property()],p.prototype,"maxZoom",void 0);a([d.property()],p.prototype,"rotationEnabled",void 0);a([d.property()],p.prototype,"snapToZoom",void 0);a([d.property()],p.prototype,"view",void 0);a([d.property({type:q,dependsOn:["rotationEnabled"]})],p.prototype,"_rotation",null);a([d.property({dependsOn:["view.spatialReference","view.defaultsFromMap.tileInfo"]})],p.prototype,"_defaultLODs",null);a([d.property({readOnly:!0,type:l,dependsOn:"lods minZoom maxZoom minScale maxScale snapToZoom _defaultLODs".split(" ")})],
p.prototype,"_zoom",null);return p=a([d.subclass("esri.views.2d.MapViewConstraints")],p)}(d.declared(h,p))})},"esri/views/2d/constraints/ZoomConstraint":function(){define("require exports ../../../core/tsSupport/declareExtendsHelper ../../../core/tsSupport/decorateHelper ../../../core/accessorSupport/decorators ../../../core/Accessor ../../../layers/support/LOD".split(" "),function(A,t,f,a,d,h,p){return function(h){function l(){var a=null!==h&&h.apply(this,arguments)||this;a._lodByScale={};a._scales=
[];a.effectiveLODs=null;a.effectiveMinZoom=-1;a.effectiveMaxZoom=-1;a.effectiveMinScale=0;a.effectiveMaxScale=0;a.enabled=!0;a.lods=null;a.minZoom=-1;a.maxZoom=-1;a.minScale=0;a.maxScale=0;a.snapToZoom=!0;return a}f(l,h);m=l;l.prototype.initialize=function(){var a=this,d=this.lods,f=this.minScale,h=this.maxScale,m=this.minZoom,l=this.maxZoom,p=-1,q=-1,t=!1,K=!1;0!==f&&0!==h&&f<h&&(h=[h,f],f=h[0],h=h[1]);if(d&&d.length){d=d.map(function(a){return a.clone()});d.sort(function(a,d){return d.scale-a.scale});
d.forEach(function(a,d){return a.level=d});for(var w,L=0,J=d;L<J.length;L++){var M=J[L];!t&&0<f&&f>=M.scale&&(p=M.level,t=!0);!K&&0<h&&h>=M.scale&&(q=w?w.level:-1,K=!0);w=M}-1===m&&(m=0===f?0:p);-1===l&&(l=0===h?d.length-1:q);m=Math.max(m,0);m=Math.min(m,d.length-1);l=Math.max(l,0);l=Math.min(l,d.length-1);m>l&&(f=[l,m],m=f[0],l=f[1]);f=d[m].scale;h=d[l].scale;d.splice(0,m);d.splice(l-m+1,d.length);d.forEach(function(d,f){a._lodByScale[d.scale]=d;a._scales[f]=d.scale});this._set("effectiveLODs",d);
this._set("effectiveMinZoom",m);this._set("effectiveMaxZoom",l)}this._set("effectiveMinScale",f);this._set("effectiveMaxScale",h)};l.prototype.constrain=function(a,d){if(!this.enabled||d&&a.scale===d.scale)return a;var f=this.effectiveMinScale,h=this.effectiveMaxScale,m=a.targetGeometry,l=d&&d.targetGeometry,p=0!==f&&a.scale>f;if(0!==h&&a.scale<h||p)f=p?f:h,l&&(d=(f-d.scale)/(a.scale-d.scale),m.x=l.x+(m.x-l.x)*d,m.y=l.y+(m.y-l.y)*d),a.scale=f;this.snapToZoom&&this.effectiveLODs&&(a.scale=this._getClosestScale(a.scale));
return a};l.prototype.fit=function(a){if(!this.effectiveLODs)return this.constrain(a,null);var d=a.scale,f=Math.round(this.scaleToZoom(d));a.scale=.95<Math.abs(f-Math.round(f))?this.snapToPreviousScale(d):this.zoomToScale(Math.round(f));return a};l.prototype.zoomToScale=function(a){if(!this.effectiveLODs)return 0;a-=this.effectiveMinZoom;a=Math.max(0,a);var d=this._scales;if(0>=a)return d[0];if(a>=d.length)return d[d.length-1];var f=Math.round(a);return d[f]+(f-a)*(d[Math.round(a-.5)]-d[f])};l.prototype.scaleToZoom=
function(a){if(!this.effectiveLODs)return-1;var d=this._scales,f=0,h=d.length-1,m,l;for(f;f<h;f++){m=d[f];l=d[f+1];if(m<=a)return f+this.effectiveMinZoom;if(l===a)return f+1+this.effectiveMinZoom;if(m>a&&l<a)return f+1-(a-l)/(m-l)+this.effectiveMinZoom}return f};l.prototype.snapToClosestScale=function(a){if(!this.effectiveLODs)return a;a=this.scaleToZoom(a);return this.zoomToScale(Math.round(a))};l.prototype.snapToNextScale=function(a,d){void 0===d&&(d=.5);if(!this.effectiveLODs)return a*d;a=Math.round(this.scaleToZoom(a));
return this.zoomToScale(a+1)};l.prototype.snapToPreviousScale=function(a,d){void 0===d&&(d=2);if(!this.effectiveLODs)return a*d;a=Math.round(this.scaleToZoom(a));return this.zoomToScale(a-1)};l.prototype.clone=function(){return new m({enabled:this.enabled,lods:this.lods,minZoom:this.minZoom,maxZoom:this.maxZoom,minScale:this.minScale,maxScale:this.maxScale})};l.prototype._getClosestScale=function(a){if(this._lodByScale[a])return this._lodByScale[a].scale;a=this._scales.reduce(function(d,f,h,m){return Math.abs(f-
a)<=Math.abs(d-a)?f:d},this._scales[0]);return this._lodByScale[a].scale};a([d.property({readOnly:!0})],l.prototype,"effectiveLODs",void 0);a([d.property({readOnly:!0})],l.prototype,"effectiveMinZoom",void 0);a([d.property({readOnly:!0})],l.prototype,"effectiveMaxZoom",void 0);a([d.property({readOnly:!0})],l.prototype,"effectiveMinScale",void 0);a([d.property({readOnly:!0})],l.prototype,"effectiveMaxScale",void 0);a([d.property()],l.prototype,"enabled",void 0);a([d.property({type:[p]})],l.prototype,
"lods",void 0);a([d.property()],l.prototype,"minZoom",void 0);a([d.property()],l.prototype,"maxZoom",void 0);a([d.property()],l.prototype,"minScale",void 0);a([d.property()],l.prototype,"maxScale",void 0);a([d.property()],l.prototype,"snapToZoom",void 0);return l=m=a([d.subclass("esri.views.2d.constraints.ZoomConstraint")],l);var m}(d.declared(h))})},"esri/views/2d/constraints/RotationConstraint":function(){define("require exports ../../../core/tsSupport/declareExtendsHelper ../../../core/tsSupport/decorateHelper ../../../core/accessorSupport/decorators ../../../core/Accessor".split(" "),
function(A,t,f,a,d,h){return function(h){function m(){var a=null!==h&&h.apply(this,arguments)||this;a.enabled=!0;a.rotationEnabled=!0;return a}f(m,h);l=m;m.prototype.constrain=function(a,d){if(!this.enabled)return a;this.rotationEnabled||(a.rotation=0);return a};m.prototype.clone=function(){return new l({enabled:this.enabled,rotationEnabled:this.rotationEnabled})};a([d.property()],m.prototype,"enabled",void 0);a([d.property()],m.prototype,"rotationEnabled",void 0);return m=l=a([d.subclass("esri.views.2d.constraints.RotationConstraint")],
m);var l}(d.declared(h))})},"esri/views/2d/AnimationManager":function(){define("../../core/Accessor ../../core/Scheduler ../../core/now ../ViewAnimation ./unitBezier ./viewpointUtils".split(" "),function(A,t,f,a,d,h){var p=function(a,f,h,p){var m=a.targetGeometry,l=f.targetGeometry;p?"string"===typeof p&&(p=d.parse(p)||d.ease):p=d.ease;this.easing=p;this.duration=h;this.sCenterX=m.x;this.sCenterY=m.y;this.sScale=a.scale;this.sRotation=a.rotation;this.tCenterX=l.x;this.tCenterY=l.y;this.tScale=f.scale;
this.tRotation=f.rotation;this.dCenterX=this.tCenterX-this.sCenterX;this.dCenterY=this.tCenterY-this.sCenterY;this.dScale=this.tScale-this.sScale;this.dRotation=this.tRotation-this.sRotation;180<this.dRotation?this.dRotation-=360:-180>this.dRotation&&(this.dRotation+=360)};p.prototype.applyRatio=function(a,d){var f=this.easing(d),h,m;1<=d?(d=this.tCenterX,h=this.tCenterY,m=this.tRotation,f=this.tScale):(d=this.sCenterX+f*this.dCenterX,h=this.sCenterY+f*this.dCenterY,m=this.sRotation+f*this.dRotation,
f=this.sScale+f*this.dScale);a.targetGeometry.x=d;a.targetGeometry.y=h;a.scale=f;a.rotation=m};return A.createSubclass({constructor:function(){this._updateTask=t.addFrameTask({postRender:this._postRender.bind(this)});this._updateTask.pause()},getDefaults:function(){return{viewpoint:h.create()}},properties:{animation:null,duration:{value:200},transition:{value:null},easing:{value:d.ease},viewpoint:null},animate:function(a,d,q){this.stop();h.copy(this.viewpoint,d);this.transition=new p(this.viewpoint,
a.target,q&&q.duration||this.duration,q&&q.easing||this.easing);a.always(function(){this.animation===a&&this._updateTask&&(this._updateTask.pause(),this.updateFunction=this.animation=null)}.bind(this));this._startTime=f();this._updateTask.resume();return this.animation=a},animateContinous:function(d,h){this.stop();this.updateFunction=h;this.viewpoint=d;var m=new a({target:d.clone()});m.always(function(){this.animation===m&&this._updateTask&&(this._updateTask.pause(),this.updateFunction=this.animation=
null)}.bind(this));this._startTime=f();this._updateTask.resume();return this.animation=m},stop:function(){this.animation&&(this.animation.stop(),this.updateFunction=this.animation=null)},_postRender:function(d){var h=this.animation;h&&h.state!==a.STOPPED?(this.updateFunction?this.updateFunction(this.viewpoint,d.deltaTime):(d=(f()-this._startTime)/this.transition.duration,h=1<=d,this.transition.applyRatio(this.viewpoint,d),h&&this.animation.finish()),this.animation._dfd.progress(this.viewpoint)):this._updateTask.pause()}})})},
"esri/views/2d/unitBezier":function(){define([],function(){var A=function(f,a,d,h){function p(a,d){var f,h,p,r;d=null==d?1E-6:d;p=a;for(h=0;8>h;h++){r=((q*p+l)*p+m)*p-a;if(Math.abs(r)<d)return p;f=(3*q*p+2*l)*p+m;if(1E-6>Math.abs(f))break;p-=r/f}f=0;h=1;p=a;if(p<f)return f;if(p>h)return h;for(;f<h;){r=((q*p+l)*p+m)*p;if(Math.abs(r-a)<d)break;a>r?f=p:h=p;p=.5*(h-f)+f}return p}var m=3*f,l=3*(d-f)-m,q=1-m-l,r=3*a,v=3*(h-a)-r,x=1-r-v;return function(a,d){a=p(a,d);return((x*a+v)*a+r)*a}},t=/^cubic-bezier\((.*)\)/;
A.parse=function(f){var a=A[f]||null;!a&&(f=t.exec(f))&&(f=f[1].split(",").map(function(a){return parseFloat(a.trim())}),4!==f.length||f.some(function(a){return isNaN(a)})||(a=A.apply(A,f)));return a};A.ease=A(.25,.1,.25,1);A.linear=A(0,0,1,1);A.easeIn=A["ease-in"]=A(.42,0,1,1);A.easeOut=A["ease-out"]=A(0,0,.58,1);A.easeInOut=A["ease-in-out"]=A(.42,0,.58,1);return A})},"esri/views/DOMContainer":function(){define("require exports ../core/tsSupport/declareExtendsHelper ../core/tsSupport/decorateHelper dojo/_base/lang dojo/on dojo/dom dojo/dom-construct ../core/Accessor ../core/Evented ../core/HandleRegistry ../core/Scheduler ../core/watchUtils ../widgets/Popup ./PopupManager ./ui/DefaultUI ../core/accessorSupport/decorators".split(" "),
function(A,t,f,a,d,h,p,m,l,q,r,v,x,y,C,E,D){var F=[0,0];return function(l){function q(){var a=l.call(this)||this;a.height=0;a.position=null;a.resizing=!1;a.root=null;a.surface=null;a.suspended=!0;a.width=0;Object.defineProperty(a,"_measureInfo",{enumerable:!1,writable:!1,value:{task:null,freq:16,time:750}});a._domHandles=new r;a.watch("interacting",function(d){var f=a.surface;f&&f.setAttribute("data-interacting",d.toString())});return a}f(q,l);q.prototype.getDefaults=function(){return d.mixin(this.inherited(arguments),
{popup:{},ui:{}})};q.prototype.initialize=function(){var a=this,d=this._measureInfo,f=null;x.init(this,"container",function(m,l,p,q){if(null!=m||null!=l)f&&(f.remove(),f=null,d.freq=16,d.time=750),d.task&&(d.task.remove(),d.task=null),m?(f=h(window,"resize",function(){d.freq=16;d.time=750}),d.task=v.addFrameTask({prepare:function(d){var f=a._measureInfo;f.time+=d.deltaTime;f.time<f.freq||(f.time=0,a._measure()?(f.freq=16,a._set("resizing",!0)):(f.freq=Math.min(750,2*f.freq),512<=f.freq&&a._set("resizing",
!1)))}})):a._set("resizing",!1),a._measure(),m=a.root,l=a.surface,p=a.width,q=a.height,m&&l&&p&&q&&(m.style.width=l.style.width=p+"px",m.style.height=l.style.height=q+"px")})};q.prototype.destroy=function(){this.ui.destroy();this.popup&&this.popup.destroy();this.container=null};Object.defineProperty(q.prototype,"container",{set:function(a){var d=this._get("container");if(d!==a){d&&(d.classList.remove("esri-view"),this.popupManager.destroy(),this.popupManager=null,m.destroy(this.root),this._set("root",
null));if(a){a.classList.add("esri-view");d=document.createElement("div");d.className="esri-view-root";a.insertBefore(d,a.firstChild);this._set("root",d);var f=document.createElement("div");f.className="esri-view-surface";p.setSelectable(f,!1);d.appendChild(f);this._set("surface",f);this._forceReadyCycle();this.popupManager=new C({enabled:!0,view:this})}else this._set("width",0),this._set("height",0),this._set("position",null),this._set("suspended",!0),this._set("surface",null);this._set("container",
a)}},enumerable:!0,configurable:!0});Object.defineProperty(q.prototype,"popup",{set:function(a){var d=this._get("popup");a!==d&&(a||(a=new y({container:document.createElement("div")})),this._domHandles.remove("view-popup"),d&&d.destroy(),a&&(a.viewModel.view=this,this._domHandles.add([x.init(this,"root",function(d,f){var h=a.container;h||(a.container=document.createElement("div"));var l=h&&h.parentNode;p.isDescendant(l,f)&&l.removeChild(h);d&&!l&&m.place(a.container,d)})],"view-popup")),this._set("popup",
a))},enumerable:!0,configurable:!0});Object.defineProperty(q.prototype,"size",{get:function(){return[this.width,this.height]},enumerable:!0,configurable:!0});Object.defineProperty(q.prototype,"ui",{set:function(a){var d=this._get("ui");a!==d&&(this._domHandles.remove("ui"),d&&d.destroy(),a&&(a.view=this,this._domHandles.add([x.init(this,"root",function(d){a.container=d?m.create("div",null,d):null})],"ui")),this._set("ui",a))},enumerable:!0,configurable:!0});q.prototype.focus=function(){this.surface&&
this.surface.focus()};q.prototype.pageToContainer=function(a,d,f){var h=this.position;a-=h[0];d-=h[1];f?(f[0]=a,f[1]=d):f=[a,d];return f};q.prototype.containerToPage=function(a,d,f){var h=this.position;a+=h[0];d+=h[1];f?(f[0]=a,f[1]=d):f=[a,d];return f};q.prototype._measure=function(){var a=this.container,d=a?a.clientWidth:0,f=a?a.clientHeight:0;if(0===d||0===f||"hidden"===window.getComputedStyle(a).visibility)return this.suspended||this._set("suspended",!0),!1;var h=this.root,m=this.surface,l=this.width,
p=this.height,q=this.position;if(d===l&&f===p)return this.suspended&&this._set("suspended",!1),!1;h&&m&&(h.style.width=m.style.width=d+"px",h.style.height=m.style.height=f+"px");this._set("width",d);this._set("height",f);this._set("suspended",!1);h=(a.ownerDocument||window.document).defaultView;a=a.getBoundingClientRect();F[0]=a.left+h.pageXOffset;F[1]=a.top+h.pageYOffset;q&&F[0]===q[0]&&F[1]===q[1]||this._set("position",F.slice());this.emit("resize",{oldWidth:l,oldHeight:p,width:d,height:f});return!0};
a([D.property({value:null,cast:function(a){return p.byId(a)}})],q.prototype,"container",null);a([D.property({readOnly:!0})],q.prototype,"height",void 0);a([D.property({type:y})],q.prototype,"popup",null);a([D.property({readOnly:!0})],q.prototype,"position",void 0);a([D.property({readOnly:!0})],q.prototype,"resizing",void 0);a([D.property({readOnly:!0})],q.prototype,"root",void 0);a([D.property({value:null,dependsOn:["width","height"],readOnly:!0})],q.prototype,"size",null);a([D.property({readOnly:!0})],
q.prototype,"surface",void 0);a([D.property({readOnly:!0})],q.prototype,"suspended",void 0);a([D.property({type:E})],q.prototype,"ui",null);a([D.property({readOnly:!0})],q.prototype,"width",void 0);return q=a([D.subclass("esri.views.DOMContainer")],q)}(D.declared(l,q))})},"esri/widgets/Popup":function(){define("require exports ../core/tsSupport/declareExtendsHelper ../core/tsSupport/decorateHelper ../core/tsSupport/assignHelper ./support/widget ../core/accessorSupport/decorators ../core/lang ../core/HandleRegistry ../core/watchUtils ./Widget ../widgets/support/widgetUtils ./Popup/PopupRenderer ./Popup/PopupViewModel dojo/i18n!./Popup/nls/Popup ./Spinner dojo/dom-geometry".split(" "),
function(A,t,f,a,d,h,p,m,l,q,r,v,x,y,C,E,D){function F(a,d){return void 0===d?"esri-popup__"+a:"esri-popup__"+a+"-"+d}var H=A.toUrl("./Popup/images/default-action.svg"),K={buttonEnabled:!0,position:"auto",breakpoint:{width:544}};return function(t){function w(a){a=t.call(this)||this;a._containerNode=null;a._mainContainerNode=null;a._featureMenuButtonNode=null;a._featureMenuViewportNode=null;a._handleRegistry=new l;a._displayActionTextLimit=2;a._pointerOffsetInPx=16;a._spinner=null;a._closeFeatureMenuHandle=
null;a.actions=null;a.alignment="auto";a.autoCloseEnabled=null;a.content=null;a.collapsed=!1;a.collapseEnabled=!0;a.dockEnabled=!1;a.featureCount=null;a.featureMenuOpen=!1;a.features=null;a.featureNavigationEnabled=!0;a.highlightEnabled=null;a.location=null;a.popupRenderers=[];a.promises=null;a.selectedFeature=null;a.selectedFeatureIndex=null;a.selectedPopupRenderer=null;a.spinnerEnabled=!0;a.title=null;a.updateLocationEnabled=null;a.view=null;a.viewModel=new y;a.visible=null;return a}f(w,t);w.prototype.postInitialize=
function(){var a=this,d=q.pausable(this,"\n      viewModel.visible,\n      dockEnabled,\n      viewModel.selectedFeature\n    ",function(){return a._closeFeatureMenu()});this._closeFeatureMenuHandle=d;this.own(q.watch(this,"viewModel.screenLocation",function(){return a._positionContainer()}),q.watch(this,["viewModel.visible","dockEnabled"],function(){return a._toggleScreenLocationEnabled()}),q.watch(this,"viewModel.screenLocation",function(d,f){!!d!==!!f&&a.reposition()}),q.watch(this,"viewModel.features",
function(d){return a._createPopupRenderers(d)}),q.watch(this,"viewModel.view.padding viewModel.view.size viewModel.visible viewModel.waitingForResult viewModel.location alignment".split(" "),function(){return a.reposition()}),d,q.watch(this,"spinnerEnabled",function(d){return a._spinnerEnabledChange(d)}),q.watch(this,["title","content"],function(){return a._hasFeatureUpdated()}),q.watch(this,"viewModel.view.size",function(d,f){return a._updateDockEnabledForViewSize(d,f)}),q.watch(this,"viewModel.view",
function(d,f){return a._viewChange(d,f)}),q.watch(this,"viewModel.view.ready",function(d,f){return a._viewReadyChange(d,f)}),q.watch(this,["viewModel.waitingForResult","viewModel.location"],function(){return a._displaySpinner()}),q.watch(this,["popupRenderers","viewModel.selectedFeatureIndex"],function(){return a._updatePopupRenderer()}),q.watch(this,"selectedPopupRenderer.viewModel.title",function(d){return a._setTitleFromPopupRenderer(d)}),q.watch(this,["selectedPopupRenderer.viewModel.content",
"selectedPopupRenderer.viewModel.waitingForContent"],function(){return a._setContentFromPopupRenderer()}),q.on(this,"viewModel","trigger-action",function(d){return a._zoomToAction(d)}))};w.prototype.destroy=function(){this._destroyPopupRenderers();this._destroySpinner();this._handleRegistry.destroy();this._handleRegistry=null};Object.defineProperty(w.prototype,"currentAlignment",{get:function(){return this._getCurrentAlignment()},enumerable:!0,configurable:!0});Object.defineProperty(w.prototype,"currentDockPosition",
{get:function(){return this._getCurrentDockPosition()},enumerable:!0,configurable:!0});Object.defineProperty(w.prototype,"dockOptions",{get:function(){return this._get("dockOptions")||K},set:function(a){var f=d({},K),h=this.get("viewModel.view.breakpoints"),m={};h&&(m.width=h.xsmall,m.height=h.xsmall);a=d({},f,a);f=d({},f.breakpoint,m);m=a.breakpoint;!0===m?a.breakpoint=f:"object"===typeof m&&(a.breakpoint=d({},f,m));this._set("dockOptions",a);this._setCurrentDockPosition();this.reposition()},enumerable:!0,
configurable:!0});w.prototype.clear=function(){};w.prototype.close=function(){this.visible=!1};w.prototype.next=function(){return null};w.prototype.open=function(a){a=d({visible:!0},{featureMenuOpen:!1,updateLocationEnabled:!1,promises:[]},a);a.featureMenuOpen&&this._closeFeatureMenuHandle.pause();this.set(a)};w.prototype.previous=function(){return null};w.prototype.reposition=function(){this.renderNow();this._positionContainer();this._setCurrentAlignment()};w.prototype.triggerAction=function(a){return null};
w.prototype.render=function(){var a=this.collapsed,d=this.collapseEnabled,f=this.dockEnabled,l=this.dockOptions,p=this.actions,q=this.featureMenuOpen,r=this.featureNavigationEnabled,x=this.popupRenderers,y=this.visible,D=this.viewModel,E=D.featureCount,g=D.promiseCount,w=D.pendingPromisesCount,z=D.selectedFeatureIndex,c=D.title,D=D.waitingForResult,r=1<E&&r,q=1<E&&q,b=d&&!q&&a,e=p&&p.length,k=r&&this._getPageText(E,z),n=this._renderContent(),u=v.isRtl(),B=this.get("selectedPopupRenderer")?this.get("selectedPopupRenderer.viewModel.waitingForContent")||
this.get("selectedPopupRenderer.viewModel.content"):n,I=f?C.undock:C.dock,p=this.currentAlignment,a=this.currentDockPosition,w=w?h.tsx("div",{key:F("loading-container"),role:"presentation",class:"esri-popup__loading-container","aria-label":C.loading,title:C.loading},h.tsx("span",{"aria-hidden":"true",class:h.join("esri-popup__icon","esri-rotating esri-icon-loading-indicator")})):null,G=(V={},V["esri-icon-layer-list"]=!q,V["esri-icon-close"]=q,V),V=h.tsx("span",{"aria-hidden":"true",class:"esri-popup__icon",
classes:G}),G=(Z={},Z["esri-icon-right-triangle-arrow"]=u,Z["esri-popup__pagination-previous-icon--rtl"]=u,Z["esri-icon-left-triangle-arrow"]=!u,Z["esri-popup__pagination-previous-icon"]=!u,Z),Z=h.tsx("span",{"aria-hidden":"true",class:"esri-popup__icon",classes:G}),Z=h.tsx("div",{role:"button",tabIndex:0,bind:this,onclick:this._previous,onkeydown:this._previous,class:h.join("esri-popup__button","esri-popup__pagination-previous"),"aria-label":C.previous,title:C.previous},Z),u=(aa={},aa["esri-icon-left-triangle-arrow"]=
u,aa["esri-popup__pagination-next-icon--rtl"]=u,aa["esri-icon-right-triangle-arrow"]=!u,aa["esri-popup__pagination-next-icon"]=!u,aa),aa=h.tsx("span",{"aria-hidden":"true",class:"esri-popup__icon",classes:u}),aa=h.tsx("div",{role:"button",tabIndex:0,bind:this,onclick:this._next,onkeydown:this._next,class:h.join("esri-popup__button","esri-popup__pagination-next"),"aria-label":C.next,title:C.next},aa),V=h.tsx("div",{role:"button",tabIndex:0,bind:this,onclick:this._toggleFeatureMenu,onkeydown:this._toggleFeatureMenu,
afterCreate:this._storeFeatureMenuButtonNode,afterUpdate:this._storeFeatureMenuButtonNode,class:h.join("esri-popup__button","esri-popup__feature-menu-button"),"aria-label":C.menu,title:C.menu},V),k=h.tsx("div",{class:"esri-popup__pagination-page-text"},k),aa=r?h.tsx("div",{class:"esri-popup__navigation-buttons"},Z,k,aa,V):null,k=this._wouldDockTo(),V="top-left"===k||"bottom-left"===k,u="top-center"===k,Z="bottom-center"===k,k="top-right"===k||"bottom-right"===k?h.tsx("span",{"aria-hidden":"true",
key:F("dock-right-icon"),class:h.join("esri-popup__icon","esri-popup__icon--dock-icon","esri-icon-dock-right")}):null,V=V?h.tsx("span",{"aria-hidden":"true",key:F("dock-left-icon"),class:h.join("esri-popup__icon","esri-popup__icon--dock-icon","esri-icon-dock-left")}):null,u=u?h.tsx("span",{"aria-hidden":"true",key:F("dock-top-icon"),class:h.join("esri-popup__icon","esri-popup__icon--dock-icon","esri-icon-maximize")}):null,Z=Z?h.tsx("span",{"aria-hidden":"true",key:F("dock-bottom-icon"),class:h.join("esri-popup__icon",
"esri-popup__icon--dock-icon","esri-icon-dock-bottom")}):null,G=f?h.tsx("span",{"aria-hidden":"true",key:F("undocked-icon"),class:h.join("esri-popup__icon","esri-icon-minimize")}):null,l=l.buttonEnabled?h.tsx("div",{role:"button","aria-label":I,title:I,tabIndex:0,bind:this,onclick:this._toggleDockEnabled,onkeydown:this._toggleDockEnabled,class:h.join("esri-popup__button","esri-popup__button--dock")},k,u,V,Z,G):null,d=d&&(B||e||r),I=(ca={},ca["esri-popup__header-title--button"]=d,ca),ca=d?b?C.expand:
C.collapse:"",c=c?h.tsx("h1",{class:"esri-popup__header-title",role:d?"button":"heading","aria-label":ca,title:ca,classes:I,bind:this,tabIndex:d?0:-1,onclick:this._toggleCollapsed,onkeydown:this._toggleCollapsed,innerHTML:c}):null,ca=h.tsx("span",{"aria-hidden":"true",class:h.join("esri-popup__icon","esri-icon-close")}),ca=h.tsx("div",{role:"button",tabIndex:0,bind:this,onclick:this._close,onkeydown:this._close,class:"esri-popup__button","aria-label":C.close,title:C.close},ca),c=h.tsx("header",{class:"esri-popup__header"},
c,h.tsx("div",{class:"esri-popup__header-buttons"},l,ca)),n=B&&!b?h.tsx("article",{key:F("content-container"),class:"esri-popup__content"},n):null,B=!b&&("bottom-left"===p||"bottom-center"===p||"bottom-right"===p||"top-left"===a||"top-center"===a||"top-right"===a),b=!b&&("top-left"===p||"top-center"===p||"top-right"===p||"bottom-left"===a||"bottom-center"===a||"bottom-right"===a),ca=q?null:h.tsx("div",{key:F("actions"),class:"esri-popup__actions"},this._renderActions()),w=h.tsx("section",{key:F("navigation"),
class:"esri-popup__navigation"},w,aa),r=r||e?h.tsx("div",{key:F("feature-buttons"),class:"esri-popup__feature-buttons"},ca,w):null;(z=this._renderFeatureMenuNode(x,z,q))&&this._closeFeatureMenuHandle.resume();x=m.substitute({total:x.length},C.selectedFeatures);z=h.tsx("section",{key:F("menu"),class:"esri-popup__feature-menu"},h.tsx("h2",{class:"esri-popup__feature-menu-header"},x),h.tsx("nav",{class:"esri-popup__feature-menu-viewport",afterCreate:this._storeFeatureMenuViewportNode,afterUpdate:this._storeFeatureMenuViewportNode},
z));this._featureMenuViewportNode&&(this._featureMenuViewportNode.scrollTop=0);x=f?null:h.tsx("div",{key:F("pointer"),class:"esri-popup__pointer",role:"presentation"},h.tsx("div",{class:h.join("esri-popup__pointer-direction","esri-popup--shadow")}));q=(ba={},ba["esri-popup--aligned-top-center"]="top-center"===p,ba["esri-popup--aligned-bottom-center"]="bottom-center"===p,ba["esri-popup--aligned-top-left"]="top-left"===p,ba["esri-popup--aligned-bottom-left"]="bottom-left"===p,ba["esri-popup--aligned-top-right"]=
"top-right"===p,ba["esri-popup--aligned-bottom-right"]="bottom-right"===p,ba["esri-popup--is-docked"]=f,ba["esri-popup--shadow"]=!f,ba["esri-popup--feature-updated"]=y,ba["esri-popup--is-docked-top-left"]="top-left"===a,ba["esri-popup--is-docked-top-center"]="top-center"===a,ba["esri-popup--is-docked-top-right"]="top-right"===a,ba["esri-popup--is-docked-bottom-left"]="bottom-left"===a,ba["esri-popup--is-docked-bottom-center"]="bottom-center"===a,ba["esri-popup--is-docked-bottom-right"]="bottom-right"===
a,ba["esri-popup--feature-menu-open"]=q,ba);ba=this.get("selectedFeature.layer.title");p=this.get("selectedFeature.layer.id");f=(t={},t["esri-popup--shadow"]=f,t);t=B?z:null;z=b?z:null;a=B?r:null;r=b?r:null;y=y&&!D&&(g?E:1)?h.tsx("div",{key:F("container"),class:"esri-popup__position-container",classes:q,"data-layer-title":ba,"data-layer-id":p,bind:this,afterCreate:this._positionContainer,afterUpdate:this._positionContainer},h.tsx("div",{class:h.join("esri-popup__main-container","esri-widget"),classes:f,
bind:this,afterCreate:this._storeMainContainerNode,afterUpdate:this._storeMainContainerNode},a,t,c,n,r,z),x):null;return h.tsx("div",{key:F("base"),class:"esri-popup",role:"presentation"},y);var V,Z,aa,ca,ba,t};w.prototype._setTitleFromPopupRenderer=function(a){this.viewModel.title=a||""};w.prototype._setContentFromPopupRenderer=function(){this.viewModel.content=this.selectedPopupRenderer||null;this.scheduleRender()};w.prototype._zoomToAction=function(a){a.action&&"zoom-to"===a.action.id&&this.viewModel.zoomToLocation()};
w.prototype._spinnerEnabledChange=function(a){this._destroySpinner();a&&(a=this.get("viewModel.view"),this._createSpinner(a))};w.prototype._displaySpinner=function(){var a=this._spinner;if(a){var d=this.viewModel,f=d.location;d.waitingForResult?a.show({location:f}):a.hide()}};w.prototype._getIconStyles=function(a){return{"background-image":a?"url("+a+")":""}};w.prototype._renderAction=function(a,d,f,l){var p=this,r=q.watch(a,["id","className","title","image","visible"],function(){return p.scheduleRender()});
this._handleRegistry.add(r,l);r=this.get("selectedFeature.attributes");"zoom-to"===a.id&&(a.title=C.zoom,a.className="esri-icon-zoom-in-magnifying-glass");l=a.title;var v=a.className,x=a.image||v?a.image:H;l=l&&r?m.substitute(r,l):l;v=v&&r?m.substitute(r,v):v;r=x&&r?m.substitute(r,x):x;x=(y={},y[v]=!!v,y["esri-popup__action-image"]=!!r,y);f=f<=this._displayActionTextLimit?h.tsx("span",{key:F("action-text-"+d+"-"+a.uid),class:"esri-popup__action-text"},l):null;return a.visible?h.tsx("div",{key:F("action-"+
d+"-"+a.uid),role:"button",tabIndex:0,title:l,"aria-label":l,class:h.join("esri-popup__button","esri-popup__action"),bind:this,"data-action-index":d,onclick:this._triggerAction,onkeydown:this._triggerAction},h.tsx("span",{key:F("action-icon-"+d+"-"+a.uid),"aria-hidden":"true",class:"esri-popup__icon",classes:x,styles:this._getIconStyles(r)}),f):null;var y};w.prototype._renderActions=function(){var a=this;this._handleRegistry.remove("actions");var d=this.actions;if(d){var f=d.length,d=d.toArray().map(function(d,
h){return a._renderAction(d,h,f,"actions")});return h.tsx("div",{key:F("actions"),class:"esri-popup__actions"},d)}};w.prototype._updatePopupRenderer=function(){var a=this.popupRenderers[this.viewModel.selectedFeatureIndex]||null;a&&!a.contentEnabled&&(a.contentEnabled=!0);this._set("selectedPopupRenderer",a)};w.prototype._destroyPopupRenderers=function(){this.popupRenderers.forEach(function(a){return a.destroy()});this._set("popupRenderers",[])};w.prototype._createPopupRenderers=function(a){var d=
this;this._destroyPopupRenderers();var f=[];a&&a.forEach(function(a){a=new x({contentEnabled:!1,graphic:a,view:d.get("viewModel.view")});f.push(a)});this._set("popupRenderers",f)};w.prototype._isScreenLocationWithinView=function(a,d){return-1<a.x&&-1<a.y&&a.x<=d.width&&a.y<=d.height};w.prototype._isOutsideView=function(a){var d=a.popupHeight,f=a.popupWidth,h=a.screenLocation,l=a.side;a=a.view;if(isNaN(f)||isNaN(d)||!a||!h)return!1;var m=a.padding;return"right"===l&&h.x+f/2>a.width-m.right||"left"===
l&&h.x-f/2<m.left||"top"===l&&h.y-d<m.top||"bottom"===l&&h.y+d>a.height-m.bottom?!0:!1};w.prototype._determineCurrentAlignment=function(){var a=this._pointerOffsetInPx,d=this._containerNode,f=this._mainContainerNode,h=this.viewModel,l=h.screenLocation,h=h.view;if(!l||!h||!d)return"top-center";if(!this._isScreenLocationWithinView(l,h))return this._get("currentAlignment")||"top-center";var m=f?window.getComputedStyle(f,null):null,f=m?parseInt(m.getPropertyValue("max-height").replace(/[^-\d\.]/g,""),
10):0,m=m?parseInt(m.getPropertyValue("height").replace(/[^-\d\.]/g,""),10):0,p=D.getContentBox(d),d=p.w+a,p=Math.max(p.h,f,m)+a,a=this._isOutsideView({popupHeight:p,popupWidth:d,screenLocation:l,side:"right",view:h}),f=this._isOutsideView({popupHeight:p,popupWidth:d,screenLocation:l,side:"left",view:h}),m=this._isOutsideView({popupHeight:p,popupWidth:d,screenLocation:l,side:"top",view:h}),l=this._isOutsideView({popupHeight:p,popupWidth:d,screenLocation:l,side:"bottom",view:h});return f?m?"bottom-right":
"top-right":a?m?"bottom-left":"top-left":m?l?"top-center":"bottom-center":"top-center"};w.prototype._getCurrentAlignment=function(){var a=this.alignment;return this.dockEnabled?null:"auto"===a?this._determineCurrentAlignment():"function"===typeof a?a.call(this):a};w.prototype._setCurrentAlignment=function(){this._set("currentAlignment",this._getCurrentAlignment())};w.prototype._setCurrentDockPosition=function(){this._set("currentDockPosition",this._getCurrentDockPosition())};w.prototype._getDockPosition=
function(){var a=this.get("dockOptions.position");return"auto"===a?this._determineCurrentDockPosition():"function"===typeof a?a.call(this):a};w.prototype._getCurrentDockPosition=function(){return this.dockEnabled?this._getDockPosition():null};w.prototype._wouldDockTo=function(){return this.dockEnabled?null:this._getDockPosition()};w.prototype._renderFeatureMenuItemNode=function(a,d,f,l){var m=d===f,p=(q={},q["esri-popup__feature-menu-item--selected"]=m,q);a=a.title||C.untitled;q=m?h.tsx("span",{key:F("feature-menu-selected-feature-"+
f),title:C.selectedFeature,"aria-label":C.selectedFeature,class:"esri-icon-check-mark"}):null;return h.tsx("li",{role:"menuitem",tabIndex:m||!l?-1:0,key:F("feature-menu-feature-"+f),classes:p,class:"esri-popup__feature-menu-item",title:a,"aria-label":a,bind:this,"data-feature-index":d,onclick:this._selectFeature,onkeydown:this._selectFeature},h.tsx("span",{class:"esri-popup__feature-menu-title"},a,q));var q};w.prototype._renderFeatureMenuNode=function(a,d,f){var l=this;return 1<a.length?h.tsx("ol",
{class:"esri-popup__feature-menu-list",role:"menu"},a.map(function(a,h){return l._renderFeatureMenuItemNode(a,h,d,f)})):null};w.prototype._determineCurrentDockPosition=function(){var a=this.get("viewModel.view"),d=v.isRtl()?"top-left":"top-right";if(!a)return d;var f=a.padding||{left:0,right:0,top:0,bottom:0},f=a.width-f.left-f.right;return(a=a.get("breakpoints"))&&f<=a.xsmall?"bottom-center":d};w.prototype._renderContent=function(){var a=this.get("viewModel.content");if("string"===typeof a)return h.tsx("div",
{key:F("content-string"),innerHTML:a});if(a&&a.isInstanceOf&&a.isInstanceOf(r))return h.tsx("div",{key:F("content-widget")},a.render());if(a instanceof HTMLElement)return h.tsx("div",{key:F("content-html-element"),bind:a,afterUpdate:this._attachToNode,afterCreate:this._attachToNode});if(a&&"function"===typeof a.postMixInProperties&&"function"===typeof a.buildRendering&&"function"===typeof a.postCreate&&"function"===typeof a.startup)return h.tsx("div",{key:F("content-dijit"),bind:a.domNode,afterUpdate:this._attachToNode,
afterCreate:this._attachToNode})};w.prototype._attachToNode=function(a){a.appendChild(this)};w.prototype._positionContainer=function(a){void 0===a&&(a=this._containerNode);a&&(this._containerNode=a);if(a){var d=this.viewModel.screenLocation,f=D.getContentBox(a);if(d=this._calculatePositionStyle(d,f))a.style.top=d.top,a.style.left=d.left,a.style.bottom=d.bottom,a.style.right=d.right}};w.prototype._calculateFullWidth=function(a){var d=this.currentAlignment,f=this._pointerOffsetInPx;return"top-left"===
d||"bottom-left"===d||"top-right"===d||"bottom-right"===d?a+f:a};w.prototype._calculateAlignmentPosition=function(a,d,f,h){var l=this.currentAlignment,m=this._pointerOffsetInPx;h/=2;var p=f.height-d;f=f.width-a;if("bottom-center"===l)return{top:d+m,left:a-h};if("top-left"===l)return{bottom:p+m,right:f+m};if("bottom-left"===l)return{top:d+m,right:f+m};if("top-right"===l)return{bottom:p+m,left:a+m};if("bottom-right"===l)return{top:d+m,left:a+m};if("top-center"===l)return{bottom:p+m,left:a-h}};w.prototype._calculatePositionStyle=
function(a,d){var f=this.view;if(f){var h=f.padding;if(this.dockEnabled)return{left:h.left?h.left+"px":"",top:h.top?h.top+"px":"",right:h.right?h.right+"px":"",bottom:h.bottom?h.bottom+"px":""};if(a&&d&&(d=this._calculateFullWidth(d.w),a=this._calculateAlignmentPosition(a.x,a.y,f,d)))return{top:void 0!==a.top?a.top+"px":"auto",left:void 0!==a.left?a.left+"px":"auto",bottom:void 0!==a.bottom?a.bottom+"px":"auto",right:void 0!==a.right?a.right+"px":"auto"}}};w.prototype._viewChange=function(a,d){a&&
d&&(this.close(),this.clear())};w.prototype._viewReadyChange=function(a,d){a?(a=this.get("viewModel.view"),this._wireUpView(a)):d&&(this.close(),this.clear())};w.prototype._wireUpView=function(a){this._destroySpinner();a&&(this.spinnerEnabled&&this._createSpinner(a),this._setDockEnabledForViewSize(this.dockOptions))};w.prototype._dockingThresholdCrossed=function(a,d,f){var h=a[0];a=a[1];var m=d[0];d=d[1];var l=f.width;f=f.height;return h<=l&&m>l||h>l&&m<=l||a<=f&&d>f||a>f&&d<=f};w.prototype._updateDockEnabledForViewSize=
function(a,d){if(a&&d){var f=this.get("viewModel.view.padding")||{left:0,right:0,top:0,bottom:0},h=f.left+f.right,l=f.top+f.bottom,f=[],m=[];f[0]=a[0]-h;f[1]=a[1]-l;m[0]=d[0]-h;m[1]=d[1]-l;a=this.dockOptions;this._dockingThresholdCrossed(f,m,a.breakpoint)&&this._setDockEnabledForViewSize(a);this._setCurrentDockPosition()}};w.prototype._hasFeatureUpdated=function(){var a=this._containerNode,d=this.viewModel.pendingPromisesCount,f=this.get("selectedPopupRenderer.viewModel.waitingForContent");!a||d||
f||(a.classList.remove("esri-popup--feature-updated"),a.offsetHeight,a.classList.add("esri-popup--feature-updated"))};w.prototype._storeMainContainerNode=function(a){this._mainContainerNode=a};w.prototype._storeFeatureMenuButtonNode=function(a){this._featureMenuButtonNode=a};w.prototype._storeFeatureMenuViewportNode=function(a){this._featureMenuViewportNode=a};w.prototype._toggleScreenLocationEnabled=function(){var a=this.dockEnabled,d=this.viewModel;d&&(d.screenLocationEnabled=this.visible&&!a)};
w.prototype._shouldDockAtCurrentViewSize=function(a){a=a.breakpoint;var d=this.get("viewModel.view.ui"),f=d.width,d=d.height;if(isNaN(f)||isNaN(d))return!1;f=a.hasOwnProperty("width")&&f<=a.width;a=a.hasOwnProperty("height")&&d<=a.height;return f||a};w.prototype._setDockEnabledForViewSize=function(a){a.breakpoint&&(this.dockEnabled=this._shouldDockAtCurrentViewSize(a))};w.prototype._getPageText=function(a,d){return m.substitute({index:d+1,total:a},C.pageText)};w.prototype._destroySpinner=function(){this._spinner&&
(this._spinner.destroy(),this._spinner=null)};w.prototype._createSpinner=function(a){a&&(this._spinner=new E({container:document.createElement("div"),view:a}),a.root.appendChild(this._spinner.container))};w.prototype._closeFeatureMenu=function(){this.featureMenuOpen=!1};w.prototype._toggleCollapsed=function(){this.collapsed=!this.collapsed};w.prototype._close=function(){this.close()};w.prototype._toggleDockEnabled=function(){this.dockEnabled=!this.dockEnabled};w.prototype._toggleFeatureMenu=function(){this.featureMenuOpen=
!this.featureMenuOpen};w.prototype._triggerAction=function(a){this.viewModel.triggerAction(a.currentTarget["data-action-index"])};w.prototype._selectFeature=function(a){a=a.currentTarget["data-feature-index"];isNaN(a)||(this.viewModel.selectedFeatureIndex=a);this._featureMenuButtonNode&&this._featureMenuButtonNode.focus()};w.prototype._next=function(){this.next()};w.prototype._previous=function(){this.previous()};a([p.aliasOf("viewModel.actions"),h.renderable()],w.prototype,"actions",void 0);a([p.property()],
w.prototype,"alignment",void 0);a([p.aliasOf("viewModel.autoCloseEnabled")],w.prototype,"autoCloseEnabled",void 0);a([p.aliasOf("viewModel.content"),h.renderable()],w.prototype,"content",void 0);a([p.property(),h.renderable()],w.prototype,"collapsed",void 0);a([p.property(),h.renderable()],w.prototype,"collapseEnabled",void 0);a([p.property({readOnly:!0,dependsOn:["dockEnabled","alignment"]}),h.renderable()],w.prototype,"currentAlignment",null);a([p.property({readOnly:!0,dependsOn:["dockEnabled",
"dockOptions"]}),h.renderable()],w.prototype,"currentDockPosition",null);a([p.property(),h.renderable()],w.prototype,"dockOptions",null);a([p.property(),h.renderable()],w.prototype,"dockEnabled",void 0);a([p.aliasOf("viewModel.featureCount"),h.renderable()],w.prototype,"featureCount",void 0);a([p.property(),h.renderable()],w.prototype,"featureMenuOpen",void 0);a([p.aliasOf("viewModel.features"),h.renderable()],w.prototype,"features",void 0);a([p.property(),h.renderable()],w.prototype,"featureNavigationEnabled",
void 0);a([p.aliasOf("viewModel.highlightEnabled")],w.prototype,"highlightEnabled",void 0);a([p.aliasOf("viewModel.location"),h.renderable()],w.prototype,"location",void 0);a([p.property({readOnly:!0}),h.renderable()],w.prototype,"popupRenderers",void 0);a([p.aliasOf("viewModel.promises")],w.prototype,"promises",void 0);a([p.aliasOf("viewModel.selectedFeature"),h.renderable()],w.prototype,"selectedFeature",void 0);a([p.aliasOf("viewModel.selectedFeatureIndex"),h.renderable()],w.prototype,"selectedFeatureIndex",
void 0);a([p.property({readOnly:!0}),h.renderable()],w.prototype,"selectedPopupRenderer",void 0);a([p.property()],w.prototype,"spinnerEnabled",void 0);a([p.aliasOf("viewModel.title"),h.renderable()],w.prototype,"title",void 0);a([p.aliasOf("viewModel.updateLocationEnabled")],w.prototype,"updateLocationEnabled",void 0);a([p.aliasOf("viewModel.view")],w.prototype,"view",void 0);a([p.property({type:y}),h.renderable("viewModel.screenLocation viewModel.screenLocationEnabled viewModel.state viewModel.pendingPromisesCount viewModel.promiseCount viewModel.waitingForResult".split(" ")),
h.vmEvent(["triggerAction","trigger-action"])],w.prototype,"viewModel",void 0);a([p.aliasOf("viewModel.visible"),h.renderable()],w.prototype,"visible",void 0);a([p.aliasOf("viewModel.clear")],w.prototype,"clear",null);a([p.aliasOf("viewModel.next")],w.prototype,"next",null);a([p.aliasOf("viewModel.previous")],w.prototype,"previous",null);a([p.aliasOf("viewModel.triggerAction")],w.prototype,"triggerAction",null);a([h.accessibleHandler()],w.prototype,"_toggleCollapsed",null);a([h.accessibleHandler()],
w.prototype,"_close",null);a([h.accessibleHandler()],w.prototype,"_toggleDockEnabled",null);a([h.accessibleHandler()],w.prototype,"_toggleFeatureMenu",null);a([h.accessibleHandler()],w.prototype,"_triggerAction",null);a([h.accessibleHandler()],w.prototype,"_selectFeature",null);a([h.accessibleHandler()],w.prototype,"_next",null);a([h.accessibleHandler()],w.prototype,"_previous",null);return w=a([p.subclass("esri.widgets.Popup")],w)}(p.declared(r))})},"esri/widgets/support/widget":function(){define(["require",
"exports","./decorators","./jsxFactory","./widgetUtils"],function(A,t,f,a,d){function h(a){for(var d in a)t.hasOwnProperty(d)||(t[d]=a[d])}Object.defineProperty(t,"__esModule",{value:!0});h(f);h(a);h(d)})},"esri/widgets/support/decorators":function(){define(["require","exports","./decorators/accessibleHandler","./decorators/renderable","./decorators/vmEvent"],function(A,t,f,a,d){function h(a){for(var d in a)t.hasOwnProperty(d)||(t[d]=a[d])}Object.defineProperty(t,"__esModule",{value:!0});h(f);h(a);
h(d)})},"esri/widgets/support/decorators/accessibleHandler":function(){define(["require","exports","dojo/keys"],function(A,t,f){function a(a){return function(d){for(var h=[],m=1;m<arguments.length;m++)h[m-1]=arguments[m];m=d.type;if(d instanceof KeyboardEvent||"keyup"===m||"keydown"===m||"keypress"===m){if(d.keyCode===f.ENTER||d.keyCode===f.SPACE)d.preventDefault(),d.target.click()}else a.call.apply(a,[this,d].concat(h))}}Object.defineProperty(t,"__esModule",{value:!0});t.accessibleHandler=function(){return function(d,
f){return{value:a(d[f])}}}})},"esri/widgets/support/decorators/renderable":function(){define(["require","exports","./propUtils"],function(A,t,f){Object.defineProperty(t,"__esModule",{value:!0});t.renderable=function(a){var d="string"===typeof a?f.splitProps(a):a;return function(a,p){a._renderableProps||(a._renderableProps=[]);a=a._renderableProps;d?a.push.apply(a,f.normalizePropNames(d,p)):a.push(p)}}})},"esri/widgets/support/decorators/propUtils":function(){define(["require","exports"],function(A,
t){Object.defineProperty(t,"__esModule",{value:!0});t.splitProps=function(f){return f.split(",").map(function(a){return a.trim()})};t.normalizePropNames=function(f,a){return f.map(function(d){d=0===d.indexOf(a)?d:a+"."+d;return d})}})},"esri/widgets/support/decorators/vmEvent":function(){define(["require","exports","./propUtils"],function(A,t,f){Object.defineProperty(t,"__esModule",{value:!0});t.vmEvent=function(a){return function(d){d._delegatedEventNames||(d._delegatedEventNames=[]);var h=Array.isArray(a)?
a:f.splitProps(a);d._delegatedEventNames=d._delegatedEventNames.concat(h)}}})},"esri/widgets/support/jsxFactory":function(){define(["require","exports","../libs/maquette/maquette"],function(A,t,f){Object.defineProperty(t,"__esModule",{value:!0});t.tsx=f.h})},"esri/widgets/support/widgetUtils":function(){define(["require","exports"],function(A,t){Object.defineProperty(t,"__esModule",{value:!0});t.join=function(){for(var f=[],a=0;a<arguments.length;a++)f[a]=arguments[a];return f.join(" ")};t.isRtl=
function(){return"rtl"===document.dir}})},"esri/widgets/Popup/PopupRenderer":function(){define("require exports ../../core/tsSupport/declareExtendsHelper ../../core/tsSupport/decorateHelper ../../core/accessorSupport/decorators ../support/widget ../Widget ./PopupRendererViewModel ../../core/requireUtils ../support/uriUtils dojo/i18n!./nls/PopupRenderer ../../core/watchUtils".split(" "),function(A,t,f,a,d,h,p,m,l,q,r,v){function x(a,d){return void 0===d?"esri-popup-renderer__"+a:"esri-popup-renderer__"+
a+"-"+d}return function(y){function C(a){a=y.call(this)||this;a._chartMap=new Map;a._activeMediaMap=new Map;a._chartRequirePromise=null;a._refreshTimers=new Map;a._mediaInfo=new Map;a.contentEnabled=null;a.graphic=null;a.title=null;a.view=null;a.viewModel=new m;return a}f(C,y);C.prototype.postInitialize=function(){var a=this;this.own(v.init(this,"viewModel.content",function(){return a._setupMediaRefreshTimers()}))};C.prototype.destroy=function(){this._clearMediaRefreshTimers();this._activeMediaMap.clear();
this._activeMediaMap=null;this._cancelChartModules();this._destroyCharts()};C.prototype.render=function(){var a=h.tsx("div",{key:x("loading-container"),class:"esri-popup-renderer__loading-container"},h.tsx("span",{class:h.join("esri-icon-loading-indicator esri-rotating","esri-popup-renderer__loading-spinner")})),a=this.viewModel.waitingForContent?a:this._renderContent();return h.tsx("div",{class:"esri-popup-renderer"},h.tsx("div",{class:"esri-popup-renderer__size-container"},h.tsx("div",{class:"esri-popup-renderer__main-container"},
a)))};C.prototype.goToMedia=function(a,d){this._setContentElementMedia(a,d)};C.prototype.nextMedia=function(a){this._pageContentElementMedia(a,"next")};C.prototype.previousMedia=function(a){this._pageContentElementMedia(a,"previous")};C.prototype._cancelChartModules=function(){this._chartRequirePromise&&this._chartRequirePromise.cancel()};C.prototype._destroyChart=function(a){var d=this._chartMap.get(a);d&&(d.chart.destroy(),d.tooltip.destroy());this._chartMap.delete(a)};C.prototype._destroyCharts=
function(){this._chartMap.forEach(function(a){a.chart.destroy();a.tooltip.destroy()});this._chartMap.clear()};C.prototype._renderContent=function(){this._destroyCharts();var a=this.viewModel.content;if("string"===typeof a)return h.tsx("div",{key:x("content-string"),innerHTML:a});if(a&&a.isInstanceOf&&a.isInstanceOf(p))return h.tsx("div",{key:x("content-widget")},a.render());if(a instanceof HTMLElement)return h.tsx("div",{key:x("content-html-element"),bind:a,afterUpdate:this._attachToNode,afterCreate:this._attachToNode});
if(a&&"function"===typeof a.postMixInProperties&&"function"===typeof a.buildRendering&&"function"===typeof a.postCreate&&"function"===typeof a.startup)return h.tsx("div",{key:x("content-dijit"),bind:a.domNode,afterUpdate:this._attachToNode,afterCreate:this._attachToNode});if(Array.isArray(a))return a.length?h.tsx("div",{key:x("content-content-elements")},a.map(this._renderContentElement,this)):null};C.prototype._renderContentElement=function(a,d){var f=this.viewModel.contentTypes;switch(a.type){case f.attachments:return this._renderAttachments(a,
d);case f.fields:return this._renderFields(a,d);case f.media:return this._renderMedia(a,d);case f.text:return this._renderText(a,d);default:return null}};C.prototype._renderAttachmentInfo=function(a,d){return h.tsx("li",{class:"esri-popup-renderer__attachments-item",key:x("attachment",d)},h.tsx("a",{class:"esri-popup-renderer__attachments-item-link",href:a.url,target:"_blank"},h.tsx("span",{class:h.join("esri-icon-download","esri-popup-renderer__attachments-item-icon")}),h.tsx("span",{class:"esri-popup-renderer__attachments-item-title"},
a.name||r.noTitle)))};C.prototype._renderAttachments=function(a,d){return(a=a.attachmentInfos)&&a.length?h.tsx("div",{key:x("attachments-element"),class:h.join("esri-popup-renderer__attachments","esri-popup-renderer__content-element")},h.tsx("div",{class:"esri-popup-renderer__attachments-title"},r.attach),h.tsx("ul",{class:"esri-popup-renderer__attachments-items"},a.map(this._renderAttachmentInfo))):null};C.prototype._renderFieldInfo=function(a,d){var f=this.viewModel,l=f.formattedAttributes.content[d]||
f.formattedAttributes.global,m=a.fieldName,f=a.label||m;a=!(!a.format||!a.format.dateFormat);l=q.autoLink(null==l[m]?"":l[m]);a=(p={},p["esri-popup-renderer__field-data--date"]=a,p);return h.tsx("tr",{key:x("fields-element-info-row",d)},h.tsx("th",{key:x("fields-element-info-row-header",d),class:"esri-popup-renderer__field-header",innerHTML:f}),h.tsx("td",{key:x("fields-element-info-row-data",d),class:"esri-popup-renderer__field-data",classes:a,innerHTML:l}));var p};C.prototype._renderFields=function(a,
d){var f=this;return(a=a.fieldInfos)?h.tsx("div",{key:x("fields-element",d),class:h.join("esri-popup-renderer__fields","esri-popup-renderer__content-element")},h.tsx("table",{summary:r.fieldsSummary,key:x("fields-element-table",d)},h.tsx("tbody",{key:x("fields-element-table-body",d)},a.map(function(a){return f._renderFieldInfo(a,d)})))):null};C.prototype._shouldOpenInNewTab=function(a){void 0===a&&(a="");return!/^(?:mailto:|tel:)/.test(a.trim().toLowerCase())};C.prototype._clearMediaRefreshTimers=
function(){this._refreshTimers.forEach(function(a){return clearTimeout(a)});this._refreshTimers.clear()};C.prototype._clearMediaRefreshTimer=function(a){var d=this._refreshTimers.get(a);d&&(clearTimeout(d),this._refreshTimers.delete(a))};C.prototype._getImageSource=function(a,d){var f=-1!==a.indexOf("?")?"\x26":"?";a=a.split("#");var h=a[1],h=void 0===h?"":h;return""+a[0]+f+"timestamp\x3d"+d+(h?"#":"")+h};C.prototype._setupMediaRefreshTimer=function(a){var d=this.get("viewModel.content");if(Array.isArray(d)&&
(d=d[a])&&"media"===d.type){var f=this._activeMediaMap.get(a);isNaN(f)&&(f=0);(d=d.mediaInfos[f])&&"image"===d.type&&d.refreshInterval&&this._setRefreshTimeout(a,d)}};C.prototype._setupMediaRefreshTimers=function(){var a=this;this._clearMediaRefreshTimers();var d=this.get("viewModel.content");Array.isArray(d)&&d.forEach(function(d,f){return a._setupMediaRefreshTimer(f)})};C.prototype._updateMediaInfoTimestamp=function(a,d){var f=Date.now();this._mediaInfo.set(d,{timestamp:f,sourceURL:this._getImageSource(a,
f)});this.scheduleRender()};C.prototype._setRefreshTimeout=function(a,d){var f=this,h=d.refreshInterval,l=d.value;h&&(d=6E4*h,this._updateMediaInfoTimestamp(l.sourceURL,a),d=setInterval(function(){f._updateMediaInfoTimestamp(l.sourceURL,a)},d),this._refreshTimers.set(a,d))};C.prototype._renderMediaInfoType=function(a,d){var f=a.value,l=a.title,l=void 0===l?"":l,m=a.type,p=a.refreshInterval,q=f.sourceURL,f=f.linkURL;if("image"===m)return a=this._shouldOpenInNewTab(f)?"_self":"_blank",q=(p=p?this._mediaInfo.get(d):
null)?p.sourceURL:q,d=h.tsx("img",{alt:l,key:x("media-image-"+(p?p.timestamp:0),d),src:q}),(l=f?h.tsx("a",{title:l,href:f,target:a},d):null)?l:d;if(-1!==m.indexOf("chart"))return h.tsx("div",{key:x("chart",d),bind:this,"data-media-info":a,"data-content-element-index":d,class:"esri-popup-renderer__media-chart",afterCreate:this._getChartDependencies,afterUpdate:this._getChartDependencies})};C.prototype._getChartDependencies=function(a){var d=this,f=a["data-media-info"],h=a["data-content-element-index"],
m=f.value,p=m.theme||"Claro",q=f.type,f=["dojox/charting/Chart2D","dojox/charting/action2d/Tooltip"],r=p;"string"===typeof p&&(r=p.replace(/\./g,"/"),-1===r.indexOf("/")&&(r="dojox/charting/themes/"+r));f.push(r);this._cancelChartModules();this._chartRequirePromise=l.when(A,f).then(function(f){d._renderChart(a,h,q,m,f[0],f[1],f[2]);d._chartRequirePromise=null})};C.prototype._renderChart=function(a,d,f,h,l,m,p){a=new l(a,{margins:{l:4,t:4,r:4,b:4}});p&&a.setTheme(p);switch(f){case "pie-chart":a.addPlot("default",
{type:"Pie",labels:!1});a.addSeries("Series A",h.fields);break;case "line-chart":a.addPlot("default",{type:"Markers"});a.addAxis("x",{min:0,majorTicks:!1,minorTicks:!1,majorLabels:!1,minorLabels:!1});a.addAxis("y",{includeZero:!0,vertical:!0,fixUpper:"minor"});h.fields.forEach(function(a,d){a.x=d+1});a.addSeries("Series A",h.fields);break;case "column-chart":a.addPlot("default",{type:"Columns",gap:3});a.addAxis("y",{includeZero:!0,vertical:!0,fixUpper:"minor"});a.addSeries("Series A",h.fields);break;
case "bar-chart":a.addPlot("default",{type:"Bars",gap:3}),a.addAxis("x",{includeZero:!0,fixUpper:"minor",minorLabels:!1}),a.addAxis("y",{vertical:!0,majorTicks:!1,minorTicks:!1,majorLabels:!1,minorLabels:!1}),a.addSeries("Series A",h.fields)}f=new m(a);a.render();this._chartMap.set(d,{chart:a,tooltip:f})};C.prototype._renderMediaInfo=function(a,d){this._destroyChart(d);var f=this._renderMediaInfoType(a,d),l=a.title?h.tsx("div",{key:x("media-title",d),class:"esri-popup-renderer__media-item-title",
innerHTML:a.title}):null;a=a.caption?h.tsx("div",{key:x("media-caption",d),class:"esri-popup-renderer__media-item-caption",innerHTML:a.caption}):null;return h.tsx("div",{key:x("media-container",d),class:"esri-popup-renderer__media-item-container"},h.tsx("div",{key:x("media-item-container",d),class:"esri-popup-renderer__media-item"},f),l,a)};C.prototype._renderMediaStatsItem=function(a,d,f){f="chart"===f?h.join("esri-popup-renderer__media-chart-icon","esri-icon-chart"):h.join("esri-popup-renderer__media-image-icon",
"esri-icon-media");return h.tsx("li",{class:"esri-popup-renderer__media-image-summary"},h.tsx("span",{class:"esri-popup-renderer__media-count","aria-label":a},"("+d+")"),h.tsx("span",{"aria-hidden":"true",class:f}))};C.prototype._renderMediaPageButton=function(a,d){var f=(a="previous"===a)?r.previous:r.next,l=a?h.join("esri-popup-renderer__button","esri-popup-renderer__media-previous"):h.join("esri-popup-renderer__button","esri-popup-renderer__media-next"),m=a?h.join("esri-popup-renderer__icon","esri-popup-renderer__media-previous-icon",
"esri-icon-left-triangle-arrow"):h.join("esri-popup-renderer__icon","esri-popup-renderer__media-next-icon","esri-icon-right-triangle-arrow"),p=a?h.join("esri-popup-renderer__icon","esri-popup-renderer__media-previous-icon--rtl","esri-icon-right-triangle-arrow"):h.join("esri-popup-renderer__icon","esri-popup-renderer__media-next-icon--rtl","esri-icon-left-triangle-arrow"),q=a?this._previousClick:this._nextClick;return h.tsx("div",{key:x(a?"previous":"next",d),title:f,tabIndex:0,role:"button",class:l,
"data-content-element-index":d,bind:this,onkeydown:q,onclick:q},h.tsx("span",{"aria-hidden":"true",class:m}),h.tsx("span",{"aria-hidden":"true",class:p}),h.tsx("span",{class:"esri-icon-font-fallback-text"},f))};C.prototype._renderMedia=function(a,d){a=a.mediaInfos;var f=this._getMediaStats(a),l=f.total,m=(p={},p["esri-popup-renderer--media-pagination-visible"]=1<f.total,p),p=this._renderMediaStatsItem(r.numImages,f.images,"image"),f=this._renderMediaStatsItem(r.numCharts,f.charts,"chart"),q=this._renderMediaPageButton("previous",
d),v=this._renderMediaPageButton("next",d),y=this._activeMediaMap.get(d);isNaN(y)&&(this._activeMediaMap.set(d,0),y=0);return l?h.tsx("div",{key:x("media-element",d),class:h.join("esri-popup-renderer__media","esri-popup-renderer__content-element"),classes:m},h.tsx("ul",{class:"esri-popup-renderer__media-summary"},p,f),h.tsx("div",{key:x("media-element-container",d),class:"esri-popup-renderer__media-container"},q,this._renderMediaInfo(a[y],d),v)):null;var p};C.prototype._renderText=function(a,d){return a.text?
h.tsx("div",{key:x("text-element",d),innerHTML:a.text,class:h.join("esri-popup-renderer__text","esri-popup-renderer__content-element")}):null};C.prototype._attachToNode=function(a){a.appendChild(this)};C.prototype._getMediaStats=function(a){var d=0,f=0;a.forEach(function(a){a=a.type;"image"===a?d++:-1!==a.indexOf("chart")&&f++});return{total:f+d,images:d,charts:f}};C.prototype._setContentElementMedia=function(a,d){this._clearMediaRefreshTimer(a);var f=this.viewModel.content;(f=(f=f&&f[a])&&f.mediaInfos)&&
f.length&&(this._activeMediaMap.set(a,(d+f.length)%f.length),this._setupMediaRefreshTimer(a),this.scheduleRender())};C.prototype._pageContentElementMedia=function(a,d){d="previous"===d?-1:1;d=this._activeMediaMap.get(a)+d;this._setContentElementMedia(a,d)};C.prototype._previousClick=function(a){this.previousMedia(a.currentTarget["data-content-element-index"])};C.prototype._nextClick=function(a){this.nextMedia(a.currentTarget["data-content-element-index"])};a([d.aliasOf("viewModel.contentEnabled")],
C.prototype,"contentEnabled",void 0);a([d.aliasOf("viewModel.graphic")],C.prototype,"graphic",void 0);a([d.aliasOf("viewModel.title")],C.prototype,"title",void 0);a([d.aliasOf("viewModel.view")],C.prototype,"view",void 0);a([d.property({type:m}),h.renderable(["viewModel.waitingForContent","viewModel.content"])],C.prototype,"viewModel",void 0);a([h.accessibleHandler()],C.prototype,"_previousClick",null);a([h.accessibleHandler()],C.prototype,"_nextClick",null);return C=a([d.subclass("esri.widgets.Popup.PopupRenderer")],
C)}(d.declared(p))})},"esri/widgets/support/uriUtils":function(){define(["require","exports","../../core/lang","dojo/i18n!./nls/uriUtils"],function(A,t,f,a){function d(a){var d=null;h.some(function(f){f.pattern.test(a)&&(d=f);return!!d});return d}Object.defineProperty(t,"__esModule",{value:!0});var h=[{id:"http",pattern:/^\s*(https?:\/\/([^\s]+))\s*$/i,target:"_blank",label:a.view},{id:"tel",pattern:/^\s*(tel:([^\s]+))\s*$/i,label:"{hierPart}"},{id:"mailto",pattern:/^\s*(mailto:([^\s]+))\s*$/i,label:"{hierPart}"},
{id:"arcgis-appstudio-player",pattern:/^\s*(arcgis-appstudio-player:\/\/([^\s]+))\s*$/i,label:a.openInApp,appName:"App Studio Player"},{id:"arcgis-collector",pattern:/^\s*(arcgis-collector:\/\/([^\s]+))\s*$/i,label:a.openInApp,appName:"Collector"},{id:"arcgis-explorer",pattern:/^\s*(arcgis-explorer:\/\/([^\s]+))\s*$/i,label:a.openInApp,appName:"Explorer"},{id:"arcgis-navigator",pattern:/^\s*(arcgis-navigator:\/\/([^\s]+))\s*$/i,label:a.openInApp,appName:"Navigator"},{id:"arcgis-survey123",pattern:/^\s*(arcgis-survey123:\/\/([^\s]+))\s*$/i,
label:a.openInApp,appName:"Survey123"},{id:"arcgis-trek2there",pattern:/^\s*(arcgis-trek2there:\/\/([^\s]+))\s*$/i,label:a.openInApp,appName:"Trek2There"},{id:"arcgis-workforce",pattern:/^\s*(arcgis-workforce:\/\/([^\s]+))\s*$/i,label:a.openInApp,appName:a.workforce},{id:"iform",pattern:/^\s*(iform:\/\/([^\s]+))\s*$/i,label:a.openInApp,appName:"iForm"},{id:"flow",pattern:/^\s*(flow:\/\/([^\s]+))\s*$/i,label:a.openInApp,appName:"FlowFinity"},{id:"lfmobile",pattern:/^\s*(lfmobile:\/\/([^\s]+))\s*$/i,
label:a.openInApp,appName:"Laserfische"},{id:"mspbi",pattern:/^\s*(mspbi:\/\/([^\s]+))\s*$/i,label:a.openInApp,appName:"Microsoft Power Bi"}];t.autoLink=function(a){if("string"!==typeof a||!a)return a;var h=d(a);if(!h)return a;var l=a.match(h.pattern),l=f.substitute({appName:h.appName,hierPart:l&&l[2]},h.label);return a.replace(h.pattern,"\x3ca "+(h.target?'target\x3d"'+h.target+'"':"")+'" href\x3d"$1"\x3e'+l+"\x3c/a\x3e")}})},"esri/widgets/Popup/PopupViewModel":function(){define("../../core/Accessor ../../core/Collection ../../core/Error ../../core/Evented ../../core/HandleRegistry ../../core/promiseUtils ../../core/watchUtils ../../geometry/geometryEngine ../../geometry/support/webMercatorUtils ../../geometry/Point ../../support/Action ../support/AnchorElementViewModel dojo/fx/easing dojo/_base/lang".split(" "),
function(A,t,f,a,d,h,p,m,l,q,r,v,x,y){function C(a,d){return d.allLayerViews.find(function(d){return d.layer===a})}var E={id:"zoom-to"};return A.createSubclass([a,v],{declaredClass:"esri.widgets.Popup.PopupViewModel",properties:{actions:{type:t.ofType(r)},animationOptions:{},autoCloseEnabled:{},clear:{},content:{},featureCount:{readOnly:!0},features:{},location:{type:q},next:{},pendingPromisesCount:{readOnly:!0},previous:{},promiseCount:{readOnly:!0,dependsOn:["promises"],get:function(){return this.promises?
this.promises.length:0}},promises:{},selectedFeature:{readOnly:!0},selectedFeatureIndex:{},state:{dependsOn:["view.ready"],readOnly:!0},title:{},triggerAction:{},updateLocationEnabled:{},view:{},visible:{},waitingForResult:{dependsOn:["pendingPromisesCount","featureCount"],readOnly:!0},zoomFactor:{}},_handles:null,constructor:function(){this._handles=new d},getDefaults:function(a){return y.mixin(this.inherited(arguments),{actions:[E],animationOptions:{duration:300,easing:x.quadInOut},promises:[]})},
initialize:function(){this._handles.add([this.on("view-change",this._autoClose),p.watch(this,"location",this._locationWatcher),p.whenFalse(this,"visible",this._visibleWatcher)])},destroy:function(){this._handles.destroy();this.view=this._handles=null},actions:[E],animationOptions:{duration:300,easing:x.quadInOut},autoCloseEnabled:!1,content:null,featureCount:0,features:null,_featuresSetter:function(a){this._set("features",a);this._updateFeatureCount(a);this.promiseCount||(this.selectedFeatureIndex=
-1,a&&a.length&&(this.selectedFeatureIndex=0))},highlightEnabled:!0,_highlightEnabledSetter:function(a){this._set("highlightEnabled",a);this._highlightFeature(this.selectedFeature,this.view)},location:null,_locationSetter:function(a){var d=this.get("view.spatialReference.isWebMercator");a&&a.get("spatialReference.isWGS84")&&d&&(a=l.geographicToWebMercator(a));this._set("location",a)},pendingPromisesCount:0,waitingForResult:!1,_waitingForResultGetter:function(){return 0<this.pendingPromisesCount&&
0===this.featureCount},promiseCount:0,promises:[],_promisesSetter:function(a){var d=this._get("promises");d&&d.forEach(function(a){a.cancel()});this.features=[];d=a&&a.length;this._set("selectedFeatureIndex",-1);this._set("selectedFeature",null);this._selectedFeatureChange(this.selectedFeature,this.updateLocationEnabled);this._set("pendingPromisesCount",0);this._set("promises",a);a&&a.length&&(this._set("pendingPromisesCount",d),a=a.slice(0),a.forEach(function(a){a.always(function(d){a.isCanceled()||
(this._set("pendingPromisesCount",this.pendingPromisesCount-1),this._updateFeatures(a,d))}.bind(this))},this),h.eachAlways(a).then(function(){this.featureCount||(this.visible=!1)}.bind(this)))},selectedFeature:null,selectedFeatureIndex:-1,_selectedFeatureIndexSetter:function(a){if(isNaN(a)||-1>a)a=-1;var d=null,f=this.features;f&&f.length&&(a=(a+f.length)%f.length,d=f[a]);this._set("selectedFeature",d);this._set("selectedFeatureIndex",a);this._selectedFeatureChange(d,this.updateLocationEnabled)},
state:"disabled",_stateGetter:function(){return this.get("view.ready")?"ready":"disabled"},title:null,updateLocationEnabled:!1,_updateLocationEnabledSetter:function(a){this._selectedFeatureChange(this.selectedFeature,a);this._set("updateLocationEnabled",a)},view:null,visible:!1,zoomFactor:4,centerAtLocation:function(){return this.location&&this.view?this.view.goTo({target:this.location,scale:this.view.scale},this.animationOptions):h.reject(new f(this.declaredClass+"::Cannot center at location without a location and view."))},
clear:function(){this.set({promises:[],features:[],content:null,title:null,location:null})},triggerAction:function(a){(a=this.actions.getItemAt(a))&&this.emit("trigger-action",{action:a})},next:function(){this.selectedFeatureIndex+=1;return this},previous:function(){--this.selectedFeatureIndex;return this},zoomToLocation:function(){var a=this.view,d=this.location;if(!d||!a)return h.reject(new f(this.declaredClass+"::Cannot zoom to location without a location and view."));var l=a.scale/this.zoomFactor,
m=this.selectedFeature,p=m&&m.geometry,q=m&&"3d"===a.type;p||q?(d={target:m},p&&"point"===p.type&&this._isScreenSize(m)&&(d.scale=l,this.location=p)):d={target:d,scale:l};return a.goTo(d,this.animationOptions)},_autoClose:function(){this.autoCloseEnabled&&(this.visible=!1)},_isScreenSize:function(a){if("3d"!==this.view.type||"esri.Graphic"!==a.declaredClass)return!0;var d=!0,f=this.view.getViewForGraphic(a);f&&f.whenGraphicBounds&&f.whenGraphicBounds(a).then(function(a){d=!a||a[0]===a[3]&&a[1]===
a[4]&&a[2]===a[5]});return d},_getSelectedFeatureActions:function(){this._originalActions&&(this.actions=this._originalActions,this._originalActions=null);var a=this.actions.filter(function(a){return!a.temporary},this),d=a,f=this.selectedFeature.popupTemplate;if(f&&f.actions){for(var d=f.actions,h=0;h<d.length;h++)d.getItemAt(h).temporary=!0;f.overwriteActions?this._originalActions=a:d=a.concat(d)}this.actions=d},_getPointFromGeometry:function(a){switch(a&&a.type){case "point":return a;case "extent":return a.center;
case "polygon":return a.centroid;case "multipoint":case "polyline":return a.extent.center;default:return null}},_locationWatcher:function(a,d){var f=this.get("view.extent");this.updateLocationEnabled&&f&&a&&a!==d&&!m.contains(f,a)&&this.centerAtLocation()},_visibleWatcher:function(a){this._handles.remove("highlight")},_highlightFeature:function(a,d){this._handles.remove("highlight");if(a&&d&&this.highlightEnabled){var f=a.layer;if(f&&(d=C(f,d))&&"function"===typeof d.highlight){var f=f.objectIdField,
h=a.attributes;a=d.highlight(h&&h[f]||a);this._handles.add(a,"highlight")}}},_selectedFeatureChange:function(a,d){this._highlightFeature(a,this.view);a&&(d&&(this.location=this._getPointFromGeometry(a.geometry)),this._getSelectedFeatureActions())},_updateFeatureCount:function(a){var d=0;a&&a.length&&(d=a.length);this._set("featureCount",d)},_updateFeatures:function(a,d){a&&this.promises&&!(!this._validatePromise(a)||d instanceof f||d instanceof Error)&&d&&d.length&&(a={},this.features&&this.features.length?
(d=d.filter(function(a){return-1===this.features.indexOf(a)},this),a.features=this.features.concat(d)):(a.features=d,a.selectedFeatureIndex=0),this.set(a))},_validatePromise:function(a){return-1<this.promises.indexOf(a)}})})},"esri/geometry/geometryEngine":function(){define("require exports ../kernel ./Geometry ./Polygon ./Polyline ./Point ./Extent ./Multipoint dojo/_base/lang".split(" "),function(A,t,f,a,d,h,p,m,l,q){function r(g){if(void 0===p.fromJson){if(void 0!==g.x&&void 0!==g.y)return new p(g);
if(void 0!==g.paths)return new h(g);if(void 0!==g.rings)return new d(g);if(void 0!==g.points)return new l(g);if(void 0!==g.xmin&&void 0!==g.ymin&&void 0!==g.xmax&&void 0!==g.ymax)return new m(g)}else{if(void 0!==g.x&&void 0!==g.y)return p.fromJson(g);if(void 0!==g.paths)return h.fromJson(g);if(void 0!==g.rings)return d.fromJson(g);if(void 0!==g.points)return l.fromJson(g);if(void 0!==g.xmin&&void 0!==g.ymin&&void 0!==g.xmax&&void 0!==g.ymax)return m.fromJson(g)}}function v(g){if(void 0===p.fromJson){if(void 0!==
g.x&&void 0!==g.y)return new p(g);if(void 0!==g.paths)return new h(g);if(void 0!==g.rings)return new d(g);if(void 0!==g.points)return new l(g);if(void 0!==g.xmin&&void 0!==g.ymin&&void 0!==g.xmax&&void 0!==g.ymax)return new m(g)}else{if(void 0!==g.x&&void 0!==g.y)return p.fromJSON(g);if(void 0!==g.paths)return h.fromJSON(g);if(void 0!==g.rings)return d.fromJSON(g);if(void 0!==g.points)return l.fromJSON(g);if(void 0!==g.xmin&&void 0!==g.ymin&&void 0!==g.xmax&&void 0!==g.ymax)return m.fromJSON(g)}}
function x(g,a){var d;if(null==g||void 0===g||"number"===typeof g)return g;var c=g.toString();if(""===c)return null;if(2==a){if(d=W[c],void 0!==d)return d}else if(0==a){d=R[c];if(void 0!==d)return d;d=U[g];if(void 0!==d)return d}else if(3==a&&(d=R[c],void 0!==d))return d;if(1==a&&(d=U[g],void 0!==d))return d;if(!0===/^\d+$/.test(c))return parseInt(c);throw Error("Unrecognised Unit Type");}function y(g){if(void 0!==g&&null!==g)switch(g){case "loxodrome":return 1;case "great-elliptic":return 2;case "normal-section":return 3;
case "shape-preserving":return 4}return 0}function C(g,a){if(null===g||void 0===g||g.s())return null;switch(g.D()){case w.Xn.Point:var f=new p(g.lk(),g.mk(),a);if(O){var c=g.hasAttribute(w.xf.M);g.hasAttribute(w.xf.Z)&&f.set("z",g.lO());c&&f.set("m",g.NN())}return f;case w.Xn.Polygon:var f=g.hasAttribute(w.xf.Z),c=g.hasAttribute(w.xf.M),b=E(g,f,c),f=new d({rings:b,hasZ:f,hasM:c});O?f.set("spatialReference",a):f.setSpatialReference(a);f.setCacheValue("_geVersion",g);return f;case w.Xn.Polyline:return f=
g.hasAttribute(w.xf.Z),c=g.hasAttribute(w.xf.M),b=E(g,f,c),f=new h({paths:b,hasZ:f,hasM:c}),O?f.set("spatialReference",a):f.setSpatialReference(a),f.setCacheValue("_geVersion",g),f;case w.Xn.MultiPoint:var f=g.hasAttribute(w.xf.Z),c=g.hasAttribute(w.xf.M),e=b=null;f&&(b=g.mc(w.xf.Z));c&&(e=g.mc(w.xf.M));var k=new w.b,n=g.F();a=new l(a);O&&(a.set("hasZ",f),a.set("hasM",c));for(var u=0;u<n;u++){g.w(u,k);var B=[k.x,k.y];f&&B.push(b.get(u));c&&B.push(e.get(u));a.addPoint(B)}a.setCacheValue("_geVersion",
g);return a;case w.Xn.Envelope:return b=g.hasAttribute(w.xf.Z),f=g.hasAttribute(w.xf.M),c=new m(g.R.v,g.R.C,g.R.B,g.R.G,a),O&&(b&&(b=g.Ah(w.xf.Z,0),c.set("zmin",b.qa),c.set("zmax",b.va)),f&&(b=g.Ah(w.xf.M,0),c.set("mmin",b.qa),c.set("mmax",b.va))),c.setCacheValue("_geVersion",g),c}return null}function E(g,a,d){var c=[],b=g.ea(),e=null,k=null;a&&(e=g.mc(w.xf.Z));d&&(k=g.mc(w.xf.M));for(var n=new w.b,u=0;u<b;u++){for(var B=g.Ea(u),I=g.Ha(u),G=0,f=0,z=NaN,h=NaN,l=NaN,m=NaN,p=g.vc(u),q=[],r=B;r<B+I;r++){g.w(r,
n);var m=l=NaN,v=[n.x,n.y];a&&(l=e.get(r),v.push(l));d&&(m=k.get(r),v.push(m));r==B&&p&&(G=n.x,f=n.y,z=l,h=m);q.push(v)}!p||G==n.x&&f==n.y&&(!a||isNaN(z)&&isNaN(l)||z==l)&&(!d||isNaN(h)&&isNaN(m)||h==m)||q.push(q[0].slice(0));c.push(q)}return c}function D(g){var a=g._geVersion;if(null==a||void 0==a){if(Object.freeze&&Object.isFrozen(g))return 102100===g.wkid?Y:4326===g.wkid?P:a=w.Nf.create(g.wkid);-1!=g.wkid&&null!==g.wkid&&void 0!==g.wkid?(a=w.Nf.create(g.wkid),g._geVersion=a):""!==g.wkt&&void 0!==
g.wkt&&null!==g.wkt&&(a=w.Nf.NL(g.wkt),g._geVersion=a)}return a}function F(g){if(null==g)return null;var a=g.getCacheValue("_geVersion");if(null==a||void 0==a)a=w.Pb.IL(g),g.setCacheValue("_geVersion",a);return a}function H(g){return null===g.spatialReference?null:D(g.spatialReference)}var K=this&&this.__extends||function(g,a){function d(){this.constructor=g}for(var c in a)a.hasOwnProperty(c)&&(g[c]=a[c]);g.prototype=null===a?Object.create(a):(d.prototype=a.prototype,new d)},w;(function(g){var a=
function(){function c(){}c.Sk=!1;c.it=!1;c.$v="";return c}();g.ah=a;if("undefined"!==typeof window)g.ah.$v="browser","Float64Array"in window&&(g.ah.it=!0),"ArrayBuffer"in window&&(g.ah.Sk=!0);else if("undefined"!==typeof process)a.$v="node",g.ah.Sk=!0,g.ah.it=!0;else{a.$v="browser";try{var d=new ArrayBuffer(0);new Uint8Array(d);g.ah.Sk=!0;g.ah.it=!0}catch(c){g.ah.Sk=!1}}})(w||(w={}));(function(g){(function(g){g[g.Unknown=0]="Unknown";g[g.Point=33]="Point";g[g.Line=322]="Line";g[g.Envelope=197]="Envelope";
g[g.MultiPoint=550]="MultiPoint";g[g.Polyline=1607]="Polyline";g[g.Polygon=1736]="Polygon"})(g.Xn||(g.Xn={}));(function(g){g[g.enumMild=0]="enumMild";g[g.enumMedium=1]="enumMedium";g[g.enumHot=2]="enumHot"})(g.rH||(g.rH={}));var a=function(){function a(){this.description=null;this.Ux=0}a.prototype.D=function(){return 0};a.prototype.fb=function(){return-1};a.prototype.Qf=function(c){this.qc();c!=this.description&&this.nm(c)};a.prototype.nm=function(){};a.prototype.Ik=function(c){this.qc();c!=this.description&&
(c=g.Od.QN(this.description,c),c!=this.description&&this.nm(c))};a.prototype.hasAttribute=function(c){return this.description.hasAttribute(c)};a.prototype.Ne=function(c){this.qc();this.description.hasAttribute(c)||(c=g.Od.PN(this.description,c),this.nm(c))};a.prototype.Ah=function(){return null};a.prototype.Fp=function(){};a.prototype.o=function(){};a.prototype.Cn=function(){};a.prototype.dd=function(c){this.o(c)};a.prototype.s=function(){return!0};a.prototype.Ja=function(){};a.prototype.Oe=function(){};
a.prototype.Pa=function(){return null};a.prototype.copyTo=function(){};a.prototype.Mh=function(){return 0};a.prototype.$b=function(){return 0};a.prototype.WC=function(){return this.hasAttribute(1)};a.ve=function(c){return((c&192)>>6)+1>>1};a.Km=function(c){return 0!=(c&32)};a.qT=function(c){return 0!=(c&64)};a.SO=function(c){return 0!=(c&128)};a.Lc=function(c){return 0!=(c&256)};a.Th=function(c){return 0!=(c&512)};a.Kc=function(c){return 0!=(c&1024)};a.prototype.vm=function(){var c=this.Pa();this.copyTo(c);
return c};a.prototype.Rf=function(){return null};a.Yj=function(c){var b=c.Pa();c.copyTo(b);return b};a.prototype.qc=function(){0<=this.Ux&&(this.Ux+=2147483649)};a.Vu=function(c){var b=c.D();if(a.Th(b))return c.F();if(c.s())return 0;if(197==b)return 4;if(33==b)return 1;if(a.Lc(b))return 2;throw g.g.ra("missing type");};return a}();g.T=a})(w||(w={}));(function(g){var a=function(){function a(){this.y=this.x=0}a.Oa=function(c,b){var e=new a;e.x=c;e.y=b;return e};a.prototype.ma=function(c,b){this.x=c;
this.y=b};a.prototype.J=function(c){this.x=c.x;this.y=c.y};a.prototype.Cq=function(c,b){return this.x===c&&this.y===b};a.prototype.Ww=function(c){return 2.220446049250313E-16>=Math.abs(this.x-c.x)&&2.220446049250313E-16>=Math.abs(this.y-c.y)};a.prototype.ub=function(c){return this.x===c.x&&this.y===c.y};a.prototype.lc=function(c){return c==this?!0:c instanceof a?this.x==c.x&&this.y==c.y:!1};a.prototype.sub=function(c){this.x-=c.x;this.y-=c.y};a.prototype.pc=function(c,b){this.x=c.x-b.x;this.y=c.y-
b.y};a.prototype.add=function(c,b){void 0!==b?(this.x=c.x+b.x,this.y=c.y+b.y):(this.x+=c.x,this.y+=c.y)};a.prototype.Bp=function(){this.x=-this.x;this.y=-this.y};a.prototype.qr=function(c){this.x=-c.x;this.y=-c.y};a.prototype.OO=function(c,b,e){this.x=c.x*(1-e)+b.x*e;this.y=c.y*(1-e)+b.y*e};a.prototype.Fr=function(c,b){this.x=this.x*c+b.x;this.y=this.y*c+b.y};a.prototype.DR=function(c,b,e){this.x=b.x*c+e.x;this.y=b.y*c+e.y};a.prototype.scale=function(c){this.x*=c;this.y*=c};a.prototype.compare=function(c){return this.y<
c.y?-1:this.y>c.y?1:this.x<c.x?-1:this.x>c.x?1:0};a.prototype.normalize=function(){var c=this.length();0==c&&(this.x=1,this.y=0);this.x/=c;this.y/=c};a.prototype.length=function(){return Math.sqrt(this.x*this.x+this.y*this.y)};a.prototype.Up=function(){return this.x*this.x+this.y*this.y};a.Fb=function(c,b){return Math.sqrt(this.Zb(c,b))};a.Yv=function(c,b,e,k){c-=e;b-=k;return Math.sqrt(c*c+b*b)};a.prototype.ml=function(c){return this.x*c.x+this.y*c.y};a.prototype.uA=function(c){return Math.abs(this.x*
c.x)+Math.abs(this.y*c.y)};a.prototype.Ai=function(c){return this.x*c.y-this.y*c.x};a.prototype.Er=function(c,b){var e=-this.x*b+this.y*c;this.x=this.x*c+this.y*b;this.y=e};a.prototype.tt=function(){var c=this.x;this.x=-this.y;this.y=c};a.prototype.zD=function(c){this.x=-c.y;this.y=c.x};a.prototype.Kp=function(){var c=this.x;this.x=this.y;this.y=-c};a.prototype.FA=function(){this.y=this.x=NaN};a.prototype.pv=function(){return isNaN(this.x)};a.prototype.ps=function(){return 0<this.x?0<=this.y?1:4:
0<this.y?2:0==this.x?4:3};a.cq=function(c,b){var e=c.ps(),k=b.ps();return k==e?(e=c.Ai(b),0>e?1:0<e?-1:0):e<k?-1:1};a.HT=function(c,b){return a.cq(c,b)};a.Zb=function(c,b){var e=c.x-b.x;c=c.y-b.y;return e*e+c*c};a.prototype.toString=function(){return"("+this.x+" , "+this.y+")"};a.prototype.Eh=function(){this.y=this.x=NaN};a.prototype.yJ=function(){return this.pv()?NaN:Math.abs(this.x)>=Math.abs(this.y)?Math.abs(this.x):Math.abs(this.y)};a.prototype.offset=function(c,b){var e=a.Fb(c,b),k=a.Oa(this.x,
this.y);if(0==e)return a.Fb(k,c);var n=new a;n.J(b);n.sub(c);k.sub(c);return k.Ai(n)/e};a.yn=function(c,b,e){var k=new g.$k;k.set(b.x);k.sub(c.x);var n=new g.$k;n.set(e.y);n.sub(c.y);var u=new g.$k;u.set(b.y);u.sub(c.y);var B=new g.$k;B.set(e.x);B.sub(c.x);k.Ap(n);u.Ap(B);k.sub(u);if(!k.Dq())return e=k.value(),0>e?-1:0<e?1:0;k=new g.Tn(b.x);n=new g.Tn(c.x);u=new g.Tn(c.y);k=k.nr(n);c=new g.Tn(e.y);c=c.nr(u);b=new g.Tn(b.y);b=b.nr(u);e=new g.Tn(e.x);e=e.nr(n);k=k.Wp(c);b=b.Wp(e);k=k.Wp(b);return k.vP()?
-1:k.nO()?1:0};a.prototype.hc=function(){return g.I.Rh(g.I.Rh())};return a}();g.b=a})(w||(w={}));(function(g){var a=function(){function g(c){this.Ov=this.Or=0;this.ES=c}g.prototype.reset=function(){this.Ov=this.Or=0};g.prototype.add=function(c){c-=this.Ov;var b=this.Or+c;this.Ov=b-this.Or-c;this.Or=b};g.prototype.sub=function(c){this.add(-c)};g.prototype.rl=function(){return this.ES+this.Or};return g}();g.av=a;a=function(){function g(){}g.LT=function(c,b){return 0<=b?Math.abs(c):-Math.abs(c)};g.sign=
function(c){return 0>c?-1:0<c?1:0};g.gH=function(c){return c-360*Math.floor(c/360)};g.round=function(c){return Math.floor(c+.5)};g.Ty=function(c){return c*c};g.ut=function(c,b,e){var k;.5>=e?k=c+(b-c)*e:k=b-(b-c)*(1-e);return k};g.BD=function(c,b,e,k){.5>=e?(k.x=c.x+(b.x-c.x)*e,k.y=c.y+(b.y-c.y)*e):(k.x=b.x-(b.x-c.x)*(1-e),k.y=b.y-(b.y-c.y)*(1-e))};g.tP=function(c,b,e,k,n,u){.5>=n?(u.x=c+(e-c)*n,u.y=b+(k-b)*n):(u.x=e-(e-c)*(1-n),u.y=k-(k-b)*(1-n))};return g}();g.vi=a})(w||(w={}));(function(g){var a=
function(a){function c(){a.call(this);this.ha=this.la=this.ja=this.na=0;this.fa=null}K(c,a);c.prototype.Mb=function(){return g.b.Oa(this.na,this.ja)};c.prototype.ht=function(b){b.x=this.na;b.y=this.ja};c.prototype.ed=function(b){this.gl(0,b)};c.prototype.Ny=function(b,e){this.gl(0,g.b.Oa(b,e))};c.prototype.En=function(b){this.wA(0,b)};c.prototype.setStart=function(b){this.CA(0,b)};c.prototype.gt=function(b,e){return this.yd(0,b,e)};c.prototype.My=function(b,e,c){this.om(0,b,e,c)};c.prototype.oc=function(){return g.b.Oa(this.la,
this.ha)};c.prototype.uw=function(b){b.x=this.la;b.y=this.ha};c.prototype.vd=function(b){this.gl(1,b)};c.prototype.Ok=function(b,e){this.gl(1,g.b.Oa(b,e))};c.prototype.Bn=function(b){this.wA(1,b)};c.prototype.setEnd=function(b){this.CA(1,b)};c.prototype.Ws=function(b,e){return this.yd(1,b,e)};c.prototype.Cy=function(b,e,c){this.om(1,b,e,c)};c.prototype.fb=function(){return 1};c.prototype.s=function(){return this.sc()};c.prototype.Ja=function(){};c.prototype.Mh=function(){return 0};c.prototype.Ga=
function(b,e,c,n,u){return this.wJ(b,e,c,n,u)};c.prototype.jc=function(b,e){return 0!=this.fq(b,e,!1)};c.prototype.Eq=function(b,e){return this.qs(b,e,!1)};c.prototype.qs=function(){return null};c.prototype.sc=function(){return!1};c.prototype.rv=function(b){this.qc();if(null==this.fa&&0<b)this.fa=g.I.Lh(2*b);else if(null!=this.fa&&this.fa.length<2*b){for(var e=this.fa.slice(0),c=this.fa.length;c<2*b;c++)e[c]=0;this.fa=e}};c.KI=function(b,e,c){if(0<c)var k=0;for(var u=0;u<c;u++)e[0+k]=b[0],k++};c.prototype.gl=
function(b,e){0!=b?(this.la=e.x,this.ha=e.y):(this.na=e.x,this.ja=e.y)};c.prototype.nm=function(b){if(null!=this.fa){for(var e=g.Od.iu(b,this.description),k=[],n=c.Xk(this.description,0),u=c.Xk(this.description,1),B=c.Xk(b,0),a=c.Xk(b,1),d=0,f=1,h=b.Aa;f<h;f++){var z=b.Hd(f),l=g.pa.Wa(z);if(-1==e[f])for(var m=g.pa.ue(z),z=0;z<l;z++)k[B+d]=m,k[a+d]=m,d++;else for(m=this.description.fj(e[f])-2,z=0;z<l;z++)k[B+d]=this.fa[n+m],k[a+d]=this.fa[u+m],d++,m++}this.fa=k}this.description=b};c.prototype.wA=function(b,
e){if(this.sc())throw g.g.ra("empty geometry");e.Qf(this.description);e.sc()&&e.ko();for(var c=0;c<this.description.Aa;c++)for(var n=this.description.Fd(c),u=0,B=g.pa.Wa(n);u<B;u++){var a=this.yd(b,n,u);e.setAttribute(n,u,a)}};c.prototype.CA=function(b,e){this.qc();if(e.sc())throw g.g.ra("empty geometry");for(var c=e.description,n=0,u=c.Aa;n<u;n++)for(var B=c.Fd(n),a=g.pa.Wa(B),d=0;d<a;d++){var f=e.ld(B,d);this.om(b,B,d,f)}};c.prototype.yd=function(b,e,k){if(this.sc())throw g.g.ra("This operation was performed on an Empty Geometry.");
if(0==e)return 0!=b?0!=k?this.ha:this.la:0!=k?this.ja:this.na;if(k>=g.pa.Wa(e))throw g.g.Uc();var n=this.description.zf(e);return 0<=n?(null!=this.fa&&this.rv(this.description.le.length-2),this.fa[c.Xk(this.description,b)+this.description.fj(n)-2+k]):g.pa.ue(e)};c.prototype.om=function(b,e,k,n){this.qc();if(k>=g.pa.Wa(e))throw g.g.Uc();var u=this.description.zf(e);0>u&&(this.Ne(e),u=this.description.zf(e));0==e?0!=b?0!=k?this.ha=n:this.la=n:0!=k?this.ja=n:this.na=n:(null==this.fa&&this.rv(this.description.le.length-
2),this.fa[c.Xk(this.description,b)+this.description.fj(u)-2+k]=n)};c.prototype.copyTo=function(b){if(b.D()!=this.D())throw g.g.N();b.description=this.description;b.rv(this.description.le.length-2);c.KI(this.fa,b.fa,2*(this.description.le.length-2));b.na=this.na;b.ja=this.ja;b.la=this.la;b.ha=this.ha;b.qc();this.eo(b)};c.prototype.Ah=function(b,e){var c=new g.Nd;if(this.sc())return c.Ja(),c;c.qa=this.yd(0,b,e);c.va=c.qa;c.Oj(this.yd(1,b,e));return c};c.prototype.XE=function(b){this.sc()?b.Ja():(b.qa=
this.yd(0,0,0),b.va=b.qa,b.Oj(this.yd(1,0,0)))};c.prototype.uu=function(b,e){e.Qf(this.description);e.ic(this.Kb(b));for(var c=1,n=this.description.Aa;c<n;c++)for(var u=this.description.Fd(c),B=g.pa.Wa(u),a=0;a<B;a++){var d=this.ld(b,u,a);e.setAttribute(u,a,d)}};c.prototype.sJ=function(b){if(this.description!=b.description||this.na!=b.na||this.la!=b.la||this.ja!=b.ja||this.ha!=b.ha)return!1;for(var e=0;e<2*(this.description.le.length-2);e++)if(this.fa[e]!=b.fa[e])return!1;return!0};c.prototype.kD=
function(){return this.na==this.la&&this.ja==this.ha};c.prototype.reverse=function(){var b=this.na;this.na=this.la;this.la=b;b=this.ja;this.ja=this.ha;this.ha=b;for(var b=1,e=this.description.Aa;b<e;b++)for(var c=this.description.Hd(b),n=0,u=g.pa.Wa(c);n<u;n++){var B=this.yd(0,c,n),a=this.yd(1,c,n);this.om(0,c,n,a);this.om(1,c,n,B)}};c.prototype.fq=function(b,e,c){var k=b.D();switch(this.D()){case 322:if(322==k)return g.yb.xJ(this,b,e,c);throw g.g.wa();default:throw g.g.wa();}};c.prototype.wJ=function(b,
e,c,n,u){var k=b.D();switch(this.D()){case 322:if(322==k)return g.yb.ov(this,b,e,c,n,u);throw g.g.wa();default:throw g.g.wa();}};c.prototype.kv=function(){return null};c.Xk=function(b,e){return e*(b.le.length-2)};c.prototype.Kb=function(b,e){if(void 0===e)return e=new g.b,this.Kb(b,e),e;g.vi.tP(this.na,this.ja,this.la,this.ha,b,e)};c.prototype.Gd=function(){return null};c.prototype.TC=function(){return null};c.prototype.nt=function(){return null};c.prototype.mg=function(){return null};c.prototype.mD=
function(){return null};c.prototype.Pf=function(){return null};c.prototype.rA=function(b,e){return void 0!==e?this.Ru(e)-this.Ru(b):this.Ru(b)};c.prototype.eo=function(){};c.prototype.xm=function(){return null};c.prototype.Bi=function(){};c.prototype.ld=function(){return null};c.prototype.xe=function(){return null};c.prototype.Ru=function(){return null};c.prototype.AD=function(){return null};c.prototype.Fb=function(b,e){if(!e&&0!=this.fq(b,0,!1))return 0;e=1.7976931348623157E308;var c,n;c=this.Mb();
n=b.Gd(c,!1);c.sub(b.Kb(n));c=c.length();c<e&&(e=c);c=this.oc();n=b.Gd(c,!1);c.sub(b.Kb(n));c=c.length();c<e&&(e=c);c=b.Mb();n=this.Gd(c,!1);c.sub(this.Kb(n));c=c.length();c<e&&(e=c);c=b.oc();n=this.Gd(c,!1);c.sub(this.Kb(n));c=c.length();c<e&&(e=c);return e};c.prototype.Rf=function(){return g.Hh.il(this,null)};return c}(g.T);g.fA=a})(w||(w={}));new w.b;(function(g){(function(g){g[g.Unknown=-1]="Unknown";g[g.Not=0]="Not";g[g.Weak=1]="Weak";g[g.Strong=2]="Strong"})(g.tH||(g.tH={}));(function(g){g[g.DirtyIsKnownSimple=
1]="DirtyIsKnownSimple";g[g.IsWeakSimple=2]="IsWeakSimple";g[g.IsStrongSimple=4]="IsStrongSimple";g[g.DirtyOGCFlags=8]="DirtyOGCFlags";g[g.DirtyVerifiedStreams=32]="DirtyVerifiedStreams";g[g.DirtyExactIntervals=64]="DirtyExactIntervals";g[g.DirtyLooseIntervals=128]="DirtyLooseIntervals";g[g.DirtyIntervals=192]="DirtyIntervals";g[g.DirtyIsEnvelope=256]="DirtyIsEnvelope";g[g.DirtyLength2D=512]="DirtyLength2D";g[g.DirtyRingAreas2D=1024]="DirtyRingAreas2D";g[g.DirtyCoordinates=1993]="DirtyCoordinates";
g[g.DirtyAllInternal=65535]="DirtyAllInternal";g[g.DirtyAll=16777215]="DirtyAll"})(g.cH||(g.cH={}));var a=function(a){function c(){a.call(this);this.El=65535;this.ta=0;this.rg=-1;this.pb=null}K(c,a);c.prototype.eo=function(){};c.prototype.qv=function(){};c.prototype.xv=function(){};c.prototype.F=function(){return this.ta};c.prototype.s=function(){return this.sc()};c.prototype.sc=function(){return 0==this.ta};c.prototype.gj=function(b){return 0!=(this.El&b)};c.prototype.yf=function(b,e){this.El=e?
this.El|b:this.El&~b};c.prototype.kc=function(){this.gj(32)&&this.FJ()};c.prototype.Su=function(){if(this.sc())throw g.g.ra("This operation was performed on an Empty Geometry.");};c.prototype.Sd=function(b,e){if(0>b||b>=this.ta)throw g.g.ra("index out of bounds");this.kc();e.Qf(this.description);e.s()&&e.ko();for(var c=0;c<this.description.Aa;c++)for(var n=this.description.Fd(c),u=0,B=g.pa.Wa(n);u<B;u++){var a=this.Ba[c].Bh(B*b+u);e.setAttribute(n,u,a)}};c.prototype.Iu=function(b,e){this.kc();for(var c=
e.description,n=0;n<c.Aa;n++)for(var u=c.Fd(n),B=g.pa.Wa(u),a=0;a<B;a++){var d=e.ld(u,a);this.setAttribute(u,b,a,d)}};c.prototype.w=function(b,e){if(0>b||b>=this.F())throw g.g.Uc();this.kc();this.Ba[0].ec(2*b,e)};c.prototype.Fa=function(b){var e=new g.b;this.w(b,e);return e};c.prototype.uc=function(b,e){this.Ba[0].ec(2*b,e)};c.prototype.ic=function(b,e,c){if(0>b||b>=this.ta)throw g.g.Uc();this.kc();var k=this.Ba[0];void 0!==c?(k.write(2*b,e),k.write(2*b+1,c)):k.Rn(2*b,e);this.ce(1993)};c.prototype.Lw=
function(b){if(0>b||b>=this.F())throw g.g.Uc();this.kc();var e=this.Ba[0],c=new g.ee;c.x=e.read(2*b);c.y=e.read(2*b+1);c.z=this.hasAttribute(1)?this.Ba[1].Bh(b):g.pa.ue(1);return c};c.prototype.Py=function(b,e){if(0>b||b>=this.F())throw g.g.Uc();this.Ne(1);this.kc();this.ce(1993);var c=this.Ba[0];c.write(2*b,e.x);c.write(2*b+1,e.y);this.Ba[1].Uk(b,e.z)};c.prototype.ld=function(b,e,c){if(0>e||e>=this.ta)throw g.g.Uc();var k=g.pa.Wa(b);if(c>=k)throw g.g.Uc();this.kc();var u=this.description.zf(b);return 0<=
u?this.Ba[u].Bh(e*k+c):g.pa.ue(b)};c.prototype.nC=function(b,e,c){return this.ld(b,e,c)};c.prototype.setAttribute=function(b,e,c,n){if(0>e||e>=this.ta)throw g.g.Uc();var k=g.pa.Wa(b);if(c>=k)throw g.g.Uc();this.Ne(b);this.kc();b=this.description.zf(b);this.ce(1993);this.Ba[b].Uk(e*k+c,n)};c.prototype.mc=function(b){this.Su();this.Ne(b);this.kc();return this.Ba[this.description.zf(b)]};c.prototype.bm=function(b,e){if(null!=e&&g.pa.Qh(b)!=e.Qh())throw g.g.N();this.Ne(b);b=this.description.zf(b);null==
this.Ba&&(this.Ba=g.Ac.ay(this.description.Aa));this.Ba[b]=e;this.ce(16777215)};c.prototype.nm=function(b){var e=null;if(null!=this.Ba)for(var c=g.Od.iu(b,this.description),e=[],n=0,u=b.Aa;n<u;n++)-1!=c[n]&&(e[n]=this.Ba[c[n]]);this.description=b;this.Ba=e;this.rg=-1;this.ce(16777215)};c.prototype.IA=function(b){this.ss(!0);b instanceof g.i?this.R.o(b):this.R.Cn(b)};c.prototype.EJ=function(b){this.ss(!1);b instanceof g.i?this.R.o(b):this.R.Cn(b)};c.prototype.Fp=function(b){this.ss(!0);this.R.copyTo(b)};
c.prototype.o=function(b){this.IA(b)};c.prototype.Cn=function(b){this.IA(b)};c.prototype.dd=function(b){this.EJ(b)};c.prototype.Ah=function(b,e){var c=new g.Nd;if(this.sc())return c.Ja(),c;this.ss(!0);return this.R.Ah(b,e)};c.prototype.hc=function(){var b=this.description.hc();if(!this.sc())for(var e=this.F(),c=0,n=this.description.Aa;c<n;c++)b=this.Ba[c].jj(b,0,e*g.pa.Wa(this.description.Fd(c)));return b};c.prototype.lc=function(b){if(b==this)return!0;if(!(b instanceof c&&this.description.lc(b.description))||
this.sc()!=b.sc())return!1;if(this.sc())return!0;var e=this.F();if(e!=b.F())return!1;for(var k=0;k<this.description.Aa;k++){var n=this.description.Hd(k),u=this.mc(n),B=b.mc(n);if(!u.lc(B,0,e*g.pa.Wa(n)))return!1}return!0};c.prototype.copyTo=function(b){if(b.D()!=this.D())throw g.g.N();this.tA(b)};c.prototype.tA=function(b){this.kc();b.description=this.description;b.Ba=null;var e=this.description.Aa,c=null;if(null!=this.Ba)for(var c=[],n=0;n<e;n++)null!=this.Ba[n]&&(c[n]=this.Ba[n].Ip(this.F()*g.pa.Wa(this.description.Fd(n))));
null!=this.R?(b.R=this.R.Pa(),this.R.copyTo(b.R)):b.R=null;b.ta=this.ta;b.El=this.El;b.Ba=c;try{this.eo(b)}catch(u){throw b.Ja(),g.g.BI();}};c.prototype.EA=function(){this.ta=0;this.rg=-1;this.Ba=null;this.ce(16777215)};c.prototype.ce=function(b){16777215==b&&(this.rg=-1,this.qv());this.El|=b;this.kJ();this.qc()};c.prototype.ss=function(b){this.kc();if(this.gj(192))if(null==this.R?this.R=new g.Vj(this.description):this.R.Qf(this.description),this.s())this.R.Ja();else{this.wv(b);for(var e=1;e<this.description.Aa;e++)for(var c=
this.description.Fd(e),n=g.pa.Wa(c),u=this.Ba[e],B=0;B<n;B++){var a=new g.Nd;a.Ja();for(var d=0;d<this.ta;d++){var f=u.Bh(d*n+B);a.Db(f)}this.R.setInterval(c,B,a)}b&&this.yf(192,!1)}};c.prototype.wv=function(){this.R.Ja();for(var b=this.Ba[0],e=new g.b,c=0;c<this.ta;c++)b.ec(2*c,e),this.R.Db(e)};c.prototype.tm=function(b){b.Ja();for(var e=this.Ba[0],c=new g.b,n=0;n<this.ta;n++)e.ec(2*n,c),b.Db(c)};c.prototype.FJ=function(){if(this.rg<this.ta){null==this.Ba&&(this.Ba=g.Ac.ay(this.description.Aa));
this.rg=2147483647;for(var b=0;b<this.description.Aa;b++){var e=this.description.Fd(b);if(null!=this.Ba[b]){var c=g.pa.Wa(e),n=g.I.truncate(this.Ba[b].size/c);n<this.ta&&(n=g.I.truncate(this.rg>this.ta+5?(5*this.ta+3)/4:this.ta),this.Ba[b].resize(n*c,g.pa.ue(e)));n<this.rg&&(this.rg=n)}else this.Ba[b]=g.Ac.Tv(e,this.ta),this.rg=this.ta}}this.xv();this.yf(32,!1)};c.prototype.jo=function(b){if(0>b)throw g.g.N();b!=this.ta&&(this.ta=b,this.ce(65535))};c.prototype.rj=function(b){if(!this.gj(1)){if(!this.gj(2))return 0;
if(this.TP>=b)return this.gj(8)?1:2}return-1};c.prototype.hg=function(b,e){this.TP=e;if(-1==b)this.yf(1,!0),this.yf(8,!0);else if(this.yf(1,!1),this.yf(8,!0),0==b)this.yf(2,!1),this.yf(4,!1);else if(1==b)this.yf(2,!0),this.yf(4,!1);else if(2==b)this.yf(2,!0),this.yf(4,!0);else throw g.g.ra("internal error.");};c.prototype.kJ=function(){null!=this.pb&&(this.pb=null)};c.prototype.vJ=function(b,e,c,n){if(0>b||b>=this.ta)throw g.g.ra("index out of bounds");if(0>e||e>=this.ta)throw g.g.ra("index out of bounds");
this.kc();n.Qf(this.description);n.s()&&n.ko();for(var k=0;k<this.description.Aa;k++)for(var B=this.description.Fd(k),a=0,d=g.pa.Wa(B);a<d;a++){var f=this.Ba[k].Bh(d*b+a),h=this.Ba[k].Bh(d*e+a);n.setAttribute(B,a,g.vi.ut(f,h,c))}};c.prototype.mv=function(b,e){var c=this.Ba[0].f,n=c[2*b]-c[2*e],c=c[2*b+1]-c[2*e+1];return Math.sqrt(n*n+c*c)};c.prototype.bh=function(b,e){if(0>b||b>=this.ta)throw g.g.Uc();if(e.s())throw g.g.N();this.kc();for(var c=e.description,n=0;n<c.Aa;n++)for(var u=c.Hd(n),B=g.pa.Wa(u),
a=0;a<B;a++){var d=e.ld(u,a);this.setAttribute(u,b,a,d)}};c.prototype.jv=function(){return null};c.prototype.dj=function(){return null};return c}(g.T);g.Wr=a})(w||(w={}));(function(g){var a=function(){function a(){this.cb=this.Qm=null;this.Ol=124234251;this.Ct=!0;this.Ae=-1;this.cb=new g.Fc(7);this.Qm=null}a.prototype.Hn=function(c){this.Qm=c};a.prototype.lM=function(){this.Ct=!1};a.prototype.de=function(c){this.cb.de(c)};a.prototype.nq=function(c){var b=this.cb.be();this.mS(b);this.oS(c,b);return b};
a.prototype.fM=function(c){this.cb.Jc(c)};a.prototype.addElement=function(c,b){var e;-1==b?(-1==this.Ae&&(this.Ae=this.nq(-1)),e=this.Ae):e=b;return this.MA(c,0,e)};a.prototype.PA=function(c){-1==this.Ae&&(this.Ae=this.nq(-1));return this.MA(c,1,this.Ae)};a.prototype.qm=function(c){var b;-1==this.Ae&&(this.Ae=this.nq(-1));b=this.Ae;var e=this.cb.f;if(-1==b||-1==e[7*b])return c=this.cb.Pj([-1,-1,-1,c,this.ck(),-1,-1]),e=this.cb.f,e[7*b]=c,this.mo(-1,c,b,e),c;var k=-1==b?-1:e[7*b+2];c=this.cb.Pj([-1,
-1,k,c,this.ck(),-1,-1]);e=this.cb.f;e[7*k+1]=c;this.Fv(c,e);-1===e[7*c+2]&&(e[7*b]=c);this.mo(-1,c,b,e);return c};a.prototype.vs=function(c,b,e,k){var n=-1;-1==n&&(-1==this.Ae&&(this.Ae=this.nq(-1)),n=this.Ae);var u=this.cb.f;if(-1==n||-1==u[7*n])return e=this.cb.Pj([-1,-1,-1,e,this.ck(),-1,-1]),u=this.cb.f,u[7*n]=e,this.mo(-1,e,n,u),e;var B;k?(k=-1!=b?this.Qm.compare(this,e,b):-1,B=-1!=c?this.Qm.compare(this,e,c):1):(k=-1,B=1);if(0==k||0==B)return u[7*n+3]=0==k?b:c,-1;(-1!=b&&-1!=c?this.Ol>g.I.$x(this.Ol)>>
1:-1!=b)?c=b:k=B;for(b=!0;;){if(0>k)if(B=u[7*c],-1!=B)c=B;else{k=c;e=this.cb.Pj([-1,-1,c,e,this.ck(),-1,-1]);u=this.cb.f;u[7*c]=e;break}else if(B=u[7*c+1],-1!=B)c=B;else{k=u[7*c+6];e=this.cb.Pj([-1,-1,c,e,this.ck(),-1,-1]);u=this.cb.f;u[7*c+1]=e;break}b&&(k*=-1,b=!1)}this.Fv(e,u);-1===u[7*e+2]&&(u[7*n]=e);this.mo(k,e,n,u);return e};a.prototype.tC=function(){return this.xN(this.Ae)};a.prototype.kd=function(c,b){b=-1==b?this.Ae:b;this.Ct?this.eM(c,b):this.$S(c,b)};a.prototype.search=function(c,b){for(b=
this.dt(b);-1!=b;){var e=this.Qm.compare(this,c,b);if(0==e)return b;b=0>e?this.ik(b):this.Jo(b)}return-1};a.prototype.GR=function(c){for(var b=this.dt(-1),e=-1;-1!=b;){var k=c.compare(this,b);if(0==k)return b;0>k?b=this.ik(b):(e=b,b=this.Jo(b))}return e};a.prototype.sF=function(c){for(var b=this.dt(-1),e=-1;-1!=b;){var k=c.compare(this,b);if(0==k)return b;0>k?(e=b,b=this.ik(b)):b=this.Jo(b)}return e};a.prototype.da=function(c){return this.cb.O(c,3)};a.prototype.ik=function(c){return this.cb.O(c,0)};
a.prototype.Jo=function(c){return this.cb.O(c,1)};a.prototype.getParent=function(c){return this.cb.O(c,2)};a.prototype.bb=function(c){return this.cb.O(c,6)};a.prototype.ge=function(c){return this.cb.O(c,5)};a.prototype.gc=function(c){return-1==c?this.gk(this.Ae):this.gk(c)};a.prototype.tc=function(c){return-1==c?this.uq(this.Ae):this.uq(c)};a.prototype.hO=function(c){return-1==c?this.QC(this.Ae):this.QC(c)};a.prototype.Vi=function(c,b){this.By(c,b)};a.prototype.dt=function(c){return-1==c?this.MC(this.Ae):
this.MC(c)};a.prototype.clear=function(){this.cb.Nh(!1);this.Ae=-1};a.prototype.size=function(c){return-1==c?this.OC(this.Ae):this.OC(c)};a.prototype.pK=function(c,b){for(var e=b[7*c],k=b[7*c+1],n=b[7*c+4];-1!=e||-1!=k;){var u=-1!=e?b[7*e+4]:2147483647,k=-1!=k?b[7*k+4]:2147483647;if(n<=Math.min(u,k))break;u<=k?this.oF(e,b):this.nF(c,b);e=b[7*c];k=b[7*c+1]}};a.prototype.Fv=function(c,b){if(this.Ct)for(var e=b[7*c+4],k=b[7*c+2];-1!=k&&b[7*k+4]>e;)b[7*k]==c?this.oF(c,b):this.nF(k,b),k=b[7*c+2]};a.prototype.nF=
function(c,b){var e=b[7*c+1],k;b[7*e+2]=b[7*c+2];b[7*c+2]=e;k=b[7*e];b[7*c+1]=k;-1!=k&&(b[7*k+2]=c);b[7*e]=c;k=b[7*e+2];-1!=k&&(b[7*k]==c?b[7*k]=e:b[7*k+1]=e)};a.prototype.oF=function(c,b){var e=b[7*c+2],k;b[7*c+2]=b[7*e+2];b[7*e+2]=c;k=b[7*c+1];b[7*e]=k;-1!=k&&(b[7*k+2]=e);b[7*c+1]=e;k=b[7*c+2];-1!=k&&(b[7*k]===e?b[7*k]=c:b[7*k+1]=c)};a.prototype.Tj=function(c,b){this.cb.L(c,2,b)};a.prototype.Gy=function(c,b){this.cb.L(c,0,b)};a.prototype.Ky=function(c,b){this.cb.L(c,1,b)};a.prototype.Jy=function(c,
b){this.cb.L(c,5,b)};a.prototype.Gu=function(c,b){this.cb.L(c,6,b)};a.prototype.VF=function(c,b){this.cb.L(b,0,c)};a.prototype.mS=function(c){this.cb.L(c,4,0)};a.prototype.oS=function(c,b){this.cb.L(b,5,c)};a.prototype.MC=function(c){return-1==c?-1:this.cb.O(c,0)};a.prototype.gk=function(c){return-1==c?-1:this.cb.O(c,1)};a.prototype.uq=function(c){return-1==c?-1:this.cb.O(c,2)};a.prototype.xN=function(c){return-1==c?-1:this.cb.O(c,3)};a.prototype.OC=function(c){return-1==c?0:this.cb.O(c,4)};a.prototype.QC=
function(c){return this.cb.O(c,5)};a.prototype.ou=function(c){return this.cb.Pj([-1,-1,-1,c,this.ck(),-1,-1])};a.prototype.bk=function(c){-1!=c&&this.cb.Jc(c)};a.prototype.ck=function(){this.Ol=g.I.$x(this.Ol);return this.Ol&1073741823};a.prototype.MA=function(c,b,e){var k=this.cb.f;if(-1==e||-1==k[7*e])return c=this.cb.Pj([-1,-1,-1,c,this.ck(),-1,-1]),k=this.cb.f,k[7*e]=c,this.mo(-1,c,e,k),c;for(var n=-1==e?-1:k[7*e];;){var u=-1==b?1:this.Qm.compare(this,c,n);if(0>u)if(u=this.ik(n),-1!=u)n=u;else{b=
n;c=this.cb.Pj([-1,-1,n,c,this.ck(),-1,-1]);k=this.cb.f;k[7*n]=c;break}else{if(1==b&&0==u)return k[7*e+3]=n,-1;u=k[7*n+1];if(-1!=u)n=u;else{b=k[7*n+6];c=this.cb.Pj([-1,-1,n,c,this.ck(),-1,-1]);k=this.cb.f;k[7*n+1]=c;break}}}this.Fv(c,k);-1===k[7*c+2]&&(k[7*e]=c);this.mo(b,c,e,k);return c};a.prototype.mo=function(c,b,e,k){var n;-1!=c?(n=k[7*c+5],k[7*c+5]=b):n=-1==e?-1:k[7*e+2];k[7*b+5]=n;-1!=n&&(k[7*n+6]=b);k[7*b+6]=c;c==(-1==e?-1:k[7*e+1])&&(k[7*e+1]=b);-1==c&&(k[7*e+2]=b);k[7*e+4]=(-1==e?0:k[7*e+
4])+1};a.prototype.ry=function(c,b){var e=this.cb.f,k=e[7*c+5];c=e[7*c+6];-1!=k?e[7*k+6]=c:e[7*b+1]=c;-1!=c?e[7*c+5]=k:e[7*b+2]=k;e[7*b+4]=-1===b?-1:e[7*b+4]-1};a.prototype.$S=function(c,b){this.ry(c,b);var e=this.ik(c),k=this.Jo(c),n=this.getParent(c),u=c;if(-1!=e&&-1!=k){this.Ol=g.I.$x(this.Ol);var B;B=1073741823<this.Ol?this.bb(c):this.ge(c);var a=this.getParent(B)==c;this.cb.Pu(c,B,0);this.cb.Pu(c,B,1);this.cb.Pu(c,B,2);-1!=n?this.ik(n)==c?this.Gy(n,B):this.Ky(n,B):this.VF(B,b);a?(e==B?(this.Gy(B,
c),this.Tj(k,B)):k==B&&(this.Ky(B,c),this.Tj(e,B)),this.Tj(c,B),n=B):(this.Tj(e,B),this.Tj(k,B),n=this.getParent(c),u=B);e=this.ik(c);k=this.Jo(c);-1!=e&&this.Tj(e,c);-1!=k&&this.Tj(k,c)}e=-1!=e?e:k;-1==n?this.VF(e,b):this.ik(n)==u?this.Gy(n,e):this.Ky(n,e);-1!=e&&this.Tj(e,n);this.bk(c,b)};a.prototype.eM=function(c,b){var e=this.cb.f;e[7*c+4]=2147483647;var k=-1,n=-1,u=-1===b?-1:e[7*b],g=u==c;g&&(k=e[7*u],n=e[7*u+1],-1==k&&-1==n)?(this.ry(u,b),this.bk(u,b),e[7*b]=-1):(this.pK(c,e),u=e[7*c+2],-1!=
u&&(e[7*u]==c?e[7*u]=-1:e[7*u+1]=-1),this.ry(c,b),this.bk(c,b),g&&(e[7*b]=-1==k||-1!=e[7*k+2]?n:k))};a.prototype.By=function(c,b){this.cb.L(c,3,b)};return a}();g.bj=a})(w||(w={}));(function(g){var a=function(){function a(c,b){void 0!==c&&this.K(c,b)}a.prototype.K=function(c,b){this.qa=c;this.va=b;this.normalize()};a.prototype.normalize=function(){if(!isNaN(this.qa)){if(this.qa>this.va){var c=this.qa;this.qa=this.va;this.va=c}isNaN(this.va)&&this.Ja()}};a.prototype.Ja=function(){this.va=this.qa=NaN};
a.prototype.s=function(){return isNaN(this.qa)};a.prototype.Db=function(c){"number"===typeof c?this.s()?this.va=this.qa=c:this.Oj(c):c.s()||(this.s()?(this.qa=c.qa,this.va=c.va):(this.qa>c.qa&&(this.qa=c.qa),this.va<c.va&&(this.va=c.va),this.qa>this.va&&this.Ja()))};a.prototype.Oj=function(c){c<this.qa?this.qa=c:c>this.va&&(this.va=c)};a.prototype.contains=function(c){return"number"===typeof c?c>=this.qa&&c<=this.va:c.qa>=this.qa&&c.va<=this.va};a.prototype.Ga=function(c){this.s()||c.s()?this.Ja():
(this.qa<c.qa&&(this.qa=c.qa),this.va>c.va&&(this.va=c.va),this.qa>this.va&&this.Ja())};a.prototype.P=function(c){this.s()||(this.qa-=c,this.va+=c,this.va<this.qa&&this.Ja())};a.prototype.lv=function(){return this.s()?2.220446049250313E-14:2.220446049250313E-14*(Math.abs(this.qa)+Math.abs(this.va)+1)};a.prototype.yy=function(c,b){c>b?(this.qa=b,this.va=c):(this.qa=c,this.va=b)};a.prototype.Sy=function(c){return g.I.Kr(c,this.qa,this.va)};a.prototype.aa=function(){return this.va-this.qa};a.prototype.Af=
function(){return.5*(this.qa+this.va)};a.prototype.lc=function(c){return c==this?!0:c instanceof a?this.s()&&c.s()?!0:this.qa!=c.qa||this.va!=c.va?!1:!0:!1};a.prototype.hc=function(){return g.I.Rh(g.I.Rh())};return a}();g.Nd=a})(w||(w={}));(function(g){var a=new g.Nd,d=new g.Nd,c=function(){return function(){this.Zd=null;this.Lf=-1;this.ib=new g.yb;this.ux=55555555;this.Et=this.Ft=!1;this.$h=new g.Nd;this.$h.yy(0,0)}}();g.XT=c;var b=function(){function b(b,e,u){this.a=b;this.Mj=NaN;this.mE=this.sp=
0;this.nE=NaN;this.ka=e;this.tp=10*e;this.oE=this.pE=NaN;this.Zf=!1;this.Cl=this.mr=this.un=this.gr=this.fr=-1;this.lx=u;this.Rx=new c;this.vE=new c;g.I.truncate(3*b.pd/2)}b.prototype.$C=function(b,e,c,g){b.Zd=null===g?null:g[c[5*e]];b.Et=null!=b.Zd;b.Et||(g=c[5*e+2],-1!==g&&this.a.gR(c[5*e],c[5*g],b.ib),b.Zd=b.ib,b.$h.yy(b.ib.na,b.ib.la),b.$h.va+=this.ka,b.ib.KE(),b.Ft=b.ib.ha==b.ib.ja,b.Ft||(b.ux=(b.ib.la-b.ib.na)/(b.ib.ha-b.ib.ja)))};b.prototype.tL=function(b,e){var c=b.fq(e,this.ka,!0);if(0!=
c)return 2==c?this.aw():this.Oh();b.ht(J);b.uw(M);e.ht(S);e.uw(N);L.ma(this.sp,this.Mj);J.ub(S)&&this.Mj==J.y?0>M.compare(N)?L.J(M):L.J(N):J.ub(N)&&this.Mj==J.y?0>M.compare(S)?L.J(M):L.J(S):S.ub(M)&&this.Mj==S.y?0>J.compare(N)?L.J(J):L.J(N):M.ub(N)&&this.Mj==M.y&&(0>J.compare(S)?L.J(J):L.J(S));return b.xe(L.y,L.x)<e.xe(L.y,L.x)?-1:1};b.prototype.rL=function(b,e){if(b.ib.ja==e.ib.ja&&b.ib.na==e.ib.na)return b.ib.ha==e.ib.ha&&b.ib.la==e.ib.la?this.lx?this.aw():0:this.HB(b,e);if(b.ib.ha==e.ib.ha&&b.ib.la==
e.ib.la)return this.GB(b,e);var c=this.GB(b,e);b=this.HB(b,e);return 0>c&&0>b?-1:0<c&&0<b?1:this.Oh()};b.prototype.mL=function(b,e){if(b.la>e.la){if(e.la>e.na&&e.ha-e.ja<2*this.ka&&b.Kh(e.la,e.ha,this.ka))return this.Oh()}else if((e.ha-e.ja)/(e.la-e.na)*(b.la-b.na)<this.tp&&e.Kh(b.la,b.ha,this.ka))return this.Oh();return 1};b.prototype.nL=function(b,e){if(b.na<e.na){if(e.la>e.na&&e.ha-e.ja<2*this.ka&&b.Kh(e.la,e.ha,this.ka))return this.Oh()}else if((e.ha-e.ja)/(e.la-e.na)*(b.na-b.la)<this.tp&&e.Kh(b.na,
b.ja,this.ka))return this.Oh();return-1};b.prototype.oL=function(b,e){var c=new g.b;c.pc(e.oc(),e.Mb());c.Kp();c.normalize();var k=new g.b;k.pc(b.Mb(),e.Mb());var n=new g.b;n.pc(b.oc(),e.Mb());var k=k.ml(c),c=n.ml(c),n=Math.abs(k),a=Math.abs(c);if(n<a){if(n<this.tp&&e.Kh(b.na,b.ja,this.ka))return this.Oh()}else if(a<this.tp&&e.Kh(b.la,b.ha,this.ka))return this.Oh();return 0>k&&0>c?-1:0<k&&0<c?1:this.Oh()};b.prototype.FB=function(b,e){return b.ja==e.ja&&b.na==e.na?this.mL(b,e):b.ha==e.ha&&b.la==e.la?
this.nL(b,e):this.oL(b,e)};b.prototype.qL=function(b,e){return b.ha==e.ha&&b.la==e.la&&b.ja==e.ja&&b.na==e.na?this.lx?this.aw():0:this.Oh()};b.prototype.GB=function(b,e){var c=1;if(b.ib.ja<e.ib.ja){var c=-1,k=b;b=e;e=k}k=b.ib;b=e.ib;var n=k.na-b.na;e=e.ux*(k.ja-b.ja);var g=this.tp;return n<e-g?-c:n>e+g?c:b.Kh(k.na,k.ja,this.ka)?this.Oh():n<e?-c:c};b.prototype.HB=function(b,e){var c=1;if(e.ib.ha<b.ib.ha){var c=-1,k=b;b=e;e=k}k=b.ib;b=e.ib;var n=k.la-b.na;e=e.ux*(k.ha-b.ja);var g=this.tp;return n<e-
g?-c:n>e+g?c:b.Kh(k.la,k.ha,this.ka)?this.Oh():n<e?-c:c};b.prototype.aw=function(){this.Zf=!0;this.ei=new g.wd(5,this.un,this.mr);return-1};b.prototype.Oh=function(){this.Zf=!0;this.lx?this.ei=new g.wd(4,this.un,this.mr):this.mr=this.un=this.gr=this.fr=-1;return-1};b.prototype.sL=function(b,e,c,g){if(this.Zf)return-1;var k=this.nE==this.Mj&&this.mE==this.sp,n;k&&b==this.fr?n=this.oE:(n=NaN,this.fr=-1);k&&e==this.gr?k=this.pE:(k=NaN,this.gr=-1);c.Zd.XE(a);g.Zd.XE(d);if(a.va<d.qa)return-1;if(d.va<a.qa)return 1;
this.nE=this.Mj;this.mE=this.sp;isNaN(n)&&(this.fr=b,this.oE=n=b=c.Zd.xe(this.Mj,this.sp));isNaN(k)&&(this.gr=e,this.pE=k=b=g.Zd.xe(this.Mj,this.sp));return Math.abs(n-k)<=this.ka?this.tL(c.Zd,g.Zd):n<k?-1:n>k?1:0};b.prototype.lq=function(){this.Zf=!1};b.prototype.rl=function(){return this.ei};b.prototype.XF=function(b,e){this.Mj=b;this.sp=e;this.mr=this.un=this.gr=this.fr=-1};b.prototype.compare=function(b,e,c){if(this.Zf)return-1;b=b.da(c);this.Cl=c;return this.JB(e,e,b,b)};b.prototype.JB=function(b,
e,c,g){var k;this.un==e?k=this.Rx:(this.un=e,k=this.Rx,this.Rx.Lf=b,this.$C(k,e,this.a.cd.f,this.a.Ge));var n;null==n&&(this.mr=g,n=this.vE,this.vE.Lf=c,this.$C(n,g,this.a.cd.f,this.a.Ge));if(k.Et||n.Et)return this.sL(e,g,k,n);if(k.$h.va<n.$h.qa)return-1;if(n.$h.va<k.$h.qa)return 1;b=k.Ft?1:0;b|=n.Ft?2:0;return 0==b?this.rL(k,n):1==b?this.FB(k.ib,n.ib):2==b?-1*this.FB(n.ib,k.ib):this.qL(k.ib,n.ib)};return b}();g.hA=b})(w||(w={}));(function(g){var a=function(){function a(c,b){this.a=c;this.ka=b;this.Zf=
!1;this.un=-1;this.$h=new g.Nd;this.pp=new g.b;this.pp.Eh();this.Vd=new g.yb;this.Cl=-1;this.Cx=1.7976931348623157E308}a.prototype.lq=function(){this.Zf=!1;this.Cx=1.7976931348623157E308};a.prototype.bh=function(c){this.pp.J(c)};a.prototype.compare=function(c,b){return this.KB(b,c.da(b))};a.prototype.KB=function(c,b){var e=null!=this.a.cc(b);e||(this.a.Oc(b,this.Vd),this.$h.yy(this.Vd.na,this.Vd.la));if(e)throw g.g.ra("not implemented");if(this.pp.x+this.ka<this.$h.qa)return-1;if(this.pp.x-this.ka>
this.$h.va)return 1;if(this.Vd.ja==this.Vd.ha)return this.Cl=c,this.Zf=!0,0;this.Vd.KE();b=this.Vd.Mb();e=new g.b;e.pc(this.Vd.oc(),b);e.Kp();var k=new g.b;k.pc(this.pp,b);b=e.ml(k);b/=e.length();return b<10*-this.ka?-1:b>10*this.ka?1:this.Vd.Eq(this.pp,this.ka)&&(e=Math.abs(b),e<this.Cx&&(this.Cl=c,this.Cx=e),this.Zf=!0,e<.25*this.ka)?0:0>b?-1:1};return a}();g.JI=a})(w||(w={}));(function(g){function a(c,b,e,k){e=new Float64Array(c.subarray(e,k));c.set(e,b)}var d=function(){function c(b){this.Sa=
this.Xf=!1;this.f=[];var e=b;2>e&&(e=2);this.f=g.I.Lh(e,c.ob);this.size=b}c.Yc=function(b,e){c.ob=e;b=new c(b);c.ob=0;return b};c.lj=function(b){var e=new c(0);e.f=b.f.slice(0);e.size=b.size;return e};c.V=function(b,e){var k=new c(0);k.size=b.size;k.size>e&&(k.size=e);k.f=b.f.slice(0,k.size);return k};c.prototype.xb=function(){};c.prototype.read=function(b){return this.f[b]};c.prototype.ec=function(b,e){e.x=this.f[b];e.y=this.f[b+1]};c.prototype.get=function(b){return this.f[b]};c.prototype.write=
function(b,e){if(this.Sa)throw g.g.xa();this.f[b]=e};c.prototype.set=function(b,e){if(this.Sa)throw g.g.xa();this.f[b]=e};c.prototype.Rn=function(b,e){if(this.Sa)throw g.g.xa();this.f[b]=e.x;this.f[b+1]=e.y};c.prototype.add=function(b){this.resize(this.size+1);this.f[this.size-1]=b};c.prototype.Ip=function(b){return c.V(this,b)};c.prototype.Bh=function(b){return this.read(b)};c.prototype.resize=function(b,e){void 0===e&&(e=0);if(this.Xf)throw g.g.ra("invalid call. Attribute Stream is locked and cannot be resized.");
if(b<=this.size){if(g.I.truncate(5*b/4)<this.f.length){var c=this.f.slice(0,b);this.f=c}}else if(b>this.f.length){g.I.truncate(64>b?Math.max(2*b,4):5*b/4);for(var c=this.f.slice(0),n=this.f.length;n<b;n++)c[n]=e;this.f=c}this.size=b};c.prototype.cf=function(b){(null==this.f||b>this.f.length)&&this.resize(b);if(this.Xf)throw g.g.ra("invalid call. Attribute Stream is locked and cannot be resized.");this.size=b};c.prototype.Uk=function(b,e){this.write(b,e)};c.prototype.jj=function(b,e,c){for(var k=this.size;e<
k&&e<c;e++)b=g.I.Rh(this.read(e));return b};c.prototype.lc=function(b,e,k){if(null==b||!(b instanceof c))return!1;var n=this.size,u=b.size;if(k>n||k>u&&n!=u)return!1;for(k>n&&(k=n);e<k;e++)if(this.read(e)!=b.read(e))return!1;return!0};c.prototype.nk=function(b,e,c,n,u,B,a){if(this.Sa)throw g.g.xa();if(!u&&(1>B||0!=n%B))throw g.g.N();var k=this.size-a;k<n&&this.resize(this.size+n-k);for(k=0;k<a-b;k++)this.f[b+n+k]=this.f[b+k];this.f==e.f&&b<c&&(c+=n);if(u)for(k=0;k<n;k++)this.f[k+b]=e.f[c+k];else for(u=
n,a=0;a<n;a+=B)for(u-=B,k=0;k<B;k++)this.f[b+a+k]=e.f[c+u+k]};c.prototype.ul=function(b,e,c,n){if(this.Sa)throw g.g.xa();n-=b;for(var k=this.f.slice(b,b+n),B=0;B<n;B++)this.f[b+c+B]=k[B];for(n=0;n<c;n++)this.f[b+n]=e};c.prototype.lg=function(b,e,c){if(this.Sa)throw g.g.xa();for(var k=this.f.slice(b,b+(c-b)),u=0;u<c-b;u++)this.f[u+b+2]=k[u];this.f[b]=e.x;this.f[b+1]=e.y};c.prototype.km=function(b,e,c,n,u,B){if(0>b||0>e||0>n)throw g.g.N();if(!u&&(0>=B||0!=e%B))throw g.g.N();if(c.size<n+e)throw g.g.N();
if(0!=e)if(this.size<e+b&&this.resize(e+b),c==this)this.xi(b,e,n,u,B);else if(u)for(u=0;u<e;u++)this.f[b]=c.f[n],b++,n++;else if(n=n+e-B,1==B)for(u=0;u<e;u++)this.f[b]=c.f[n],b++,n--;else for(u=0,e=g.I.truncate(e/B);u<e;u++){for(var k=0;k<B;k++)this.f[b+k]=c.f[n+k];b+=B;n-=B}};c.prototype.oj=function(b,e,c){if(this.Sa)throw g.g.xa();if(b+e>this.size)throw g.g.xa();if(0<c-(b+e)){c-=b+e;for(var k=this.f.slice(b+e,b+c+e),u=0;u<c;u++)this.f[b+u]=k[u]}this.size-=e};c.prototype.Jp=function(b,e,c){if(this.Sa)throw g.g.xa();
if(1>c||0!=e%c)throw g.g.xa();for(var k=e>>1,u=0;u<k;u+=c){e-=c;for(var B=0;B<c;B++){var a=this.f[b+u+B];this.f[b+u+B]=this.f[b+e+B];this.f[b+e+B]=a}}};c.prototype.dh=function(b,e,c){if(0>e||0>c||0>e||c+e>this.size)throw g.g.N();for(var k=e;k<e+c;k++)this.f[k]=b};c.prototype.xi=function(b,e,c,n,u){if(!n||b!=c){for(var k=0;k<e;k++)this.f[b+k]=this.f[c+k];if(!n)for(c=b,b=b+e-u,n=0,e=g.I.truncate(e/2);n<e;n++){for(k=0;k<u;k++){var a=this.f[c+k];this.f[c+k]=this.f[b+k];this.f[b+k]=a}c+=u;b-=u}}};c.prototype.$p=
function(b,e,c,n,u){if(0>b||0>e||0>n)throw g.g.N();if(0!=e)for(this.size<(e<<1)+b&&this.resize((e<<1)+b),u||(b+=e-1<<1),u=u?2:-2,e+=n;n<e;n++)this.f[b]=c[n].x,this.f[b+1]=c[n].y,b+=u};c.prototype.Hp=function(b,e,c,n,u){if(0>b||0>e||0>n||this.size<e+b)throw g.g.N();if(u)for(u=0;u<e;u++)c[n+u]=this.f[b+u];else for(n=n+e-1;b<e;b++)c[n]=this.f[b],n--};c.prototype.clear=function(b){b?this.resize(0):this.cf(0)};c.prototype.xd=function(b,e,c){var k=this.f.slice(0,b),u=this.f.slice(e);b=this.f.slice(b,e).sort(c);
this.f.length=0;this.f.push.apply(this.f,k.concat(b).concat(u))};c.prototype.Qh=function(){return 1};c.ob=0;return c}();g.qd=d;d=function(){function c(b){this.Sa=this.Xf=!1;this.f=null;var e=b;2>e&&(e=2);this.f=new Float64Array(e);this.size=b}c.Yc=function(b,e){var k=new c(b),n=k.f;2>b&&(b=2);if(0!==e)for(var u=0;u<b;u++)n[u]=e;return k};c.lj=function(b){var e=new c(0);e.f=new Float64Array(b.f);e.size=b.size;return e};c.V=function(b,e){var k=new c(0);k.size=b.size;k.size>e&&(k.size=e);e=k.size;2>
e&&(e=2);k.f=new Float64Array(e);k.f.set(b.f.length<=e?b.f:b.f.subarray(0,e),0);return k};c.prototype.xb=function(b){0>=b||(null==this.f?this.f=new Float64Array(b):b<=this.f.length||(0<this.f.length?(b=new Float64Array(b),b.set(this.f),this.f=b):this.f=new Float64Array(b)))};c.prototype.read=function(b){return this.f[b]};c.prototype.ec=function(b,e){e.x=this.f[b];e.y=this.f[b+1]};c.prototype.get=function(b){return this.f[b]};c.prototype.write=function(b,e){if(this.Sa)throw g.g.xa();this.f[b]=e};c.prototype.set=
function(b,e){if(this.Sa)throw g.g.xa();this.f[b]=e};c.prototype.Rn=function(b,e){if(this.Sa)throw g.g.xa();this.f[b]=e.x;this.f[b+1]=e.y};c.prototype.add=function(b){this.resize(this.size+1);this.f[this.size-1]=b};c.prototype.Ip=function(b){return c.V(this,b)};c.prototype.Bh=function(b){return this.read(b)};c.prototype.resize=function(b,e){void 0===e&&(e=0);if(this.Xf)throw g.g.ra("invalid call. Attribute Stream is locked and cannot be resized.");if(b<=this.size){if(30<this.f.length&&5*b/4<this.f.length){var c=
new Float64Array(this.f,0,b);this.f=c}}else{b>this.f.length&&(c=g.I.truncate(64>b?Math.max(2*b,4):5*b/4),c=new Float64Array(c),c.set(this.f),this.f=c);for(var c=this.f,n=this.size;n<b;n++)c[n]=e}this.size=b};c.prototype.cf=function(b){(null==this.f||b>this.f.length)&&this.resize(b);if(this.Xf)throw g.g.ra("invalid call. Attribute Stream is locked and cannot be resized.");this.size=b};c.prototype.Uk=function(b,e){this.write(b,e)};c.prototype.jj=function(b,e,c){for(var k=this.size;e<k&&e<c;e++)b=g.I.Rh(this.read(e));
return b};c.prototype.lc=function(b,e,k){if(null==b||!(b instanceof c))return!1;var n=this.size,u=b.size;if(k>n||k>u&&n!=u)return!1;for(k>n&&(k=n);e<k;e++)if(this.read(e)!=b.read(e))return!1;return!0};c.prototype.nk=function(b,e,c,n,u,B,d){if(this.Sa)throw g.g.xa();if(!u&&(1>B||0!=n%B))throw g.g.N();var k=this.size-d;k<n&&this.resize(this.size+n-k);a(this.f,b+n,b,b+(d-b));this.f==e.f&&b<c&&(c+=n);if(u)this.f.set(e.f.subarray(c,c+n),b);else for(u=n,d=0;d<n;d+=B)for(u-=B,k=0;k<B;k++)this.f[b+d+k]=e.f[c+
u+k]};c.prototype.ul=function(b,e,c,n){if(this.Sa)throw g.g.xa();n-=b;a(this.f,b+n,b,b+n);for(n=0;n<c;n++)this.f[b+n]=e};c.prototype.lg=function(b,e,c){if(this.Sa)throw g.g.xa();a(this.f,b+2,b,b+(c-b));this.f[b]=e.x;this.f[b+1]=e.y};c.prototype.km=function(b,e,c,n,u,B){if(0>b||0>e||0>n)throw g.g.N();if(!u&&(0>=B||0!=e%B))throw g.g.N();if(c.size<n+e)throw g.g.N();if(0!=e)if(this.size<e+b&&this.resize(e+b),c==this)this.xi(b,e,n,u,B);else if(u)for(u=0;u<e;u++)this.f[b]=c.f[n],b++,n++;else if(n=n+e-B,
1==B)for(u=0;u<e;u++)this.f[b]=c.f[n],b++,n--;else for(u=0,e=g.I.truncate(e/B);u<e;u++){for(var k=0;k<B;k++)this.f[b+k]=c.f[n+k];b+=B;n-=B}};c.prototype.oj=function(b,e,c){if(this.Sa)throw g.g.xa();if(b+e>this.size)throw g.g.xa();0<c-(b+e)&&a(this.f,b,b+e,b+(c-(b+e))+e);this.size-=e};c.prototype.Jp=function(b,e,c){if(this.Sa)throw g.g.xa();if(1>c||0!=e%c)throw g.g.xa();for(var k=e>>1,u=0;u<k;u+=c){e-=c;for(var B=0;B<c;B++){var a=this.f[b+u+B];this.f[b+u+B]=this.f[b+e+B];this.f[b+e+B]=a}}};c.prototype.dh=
function(b,e,c){if(0>e||0>c||0>e||c+e>this.size)throw g.g.N();for(var k=e;k<e+c;k++)this.f[k]=b};c.prototype.xi=function(b,e,c,n,u){if(!n||b!=c)if(this.f.set(this.f.subarray(c,c+e),b),!n)for(c=b,b=b+e-u,n=0,e=g.I.truncate(e/2);n<e;n++){for(var k=0;k<u;k++){var a=this.f[c+k];this.f[c+k]=this.f[b+k];this.f[b+k]=a}c+=u;b-=u}};c.prototype.$p=function(b,e,c,n,u){if(0>b||0>e||0>n)throw g.g.N();if(0!=e)for(this.size<(e<<1)+b&&this.resize((e<<1)+b),u||(b+=e-1<<1),u=u?2:-2,e+=n;n<e;n++)this.f[b]=c[n].x,this.f[b+
1]=c[n].y,b+=u};c.prototype.Hp=function(b,e,c,n,u){if(0>b||0>e||0>n||this.size<e+b)throw g.g.N();if(u)for(u=0;u<e;u++)c[n+u]=this.f[b+u];else for(n=n+e-1;b<e;b++)c[n]=this.f[b],n--};c.prototype.clear=function(b){b?this.resize(0):this.cf(0)};c.prototype.xd=function(b,e,c){Array.prototype.sort.call(this.f.subarray(b,e),c)};c.prototype.Qh=function(){return 1};return c}();g.QG=d})(w||(w={}));!0===w.ah.Sk&&!0===w.ah.it&&(w.qd=w.QG);(function(g){function a(c,b,e,k){e=new Int32Array(c.subarray(e,k));c.set(e,
b)}g.tT=function(){return function(){this.random=1973}}();var d=function(){function c(b){this.Sa=this.Xf=!1;this.f=[];var e=b;2>e&&(e=2);this.f=this.f=g.I.Lh(e,c.ob);this.size=b}c.Yc=function(b,e){c.ob=e;b=new c(b);c.ob=0;return b};c.lj=function(b){var e=new c(0);e.f=b.f.slice(0);e.size=b.size;return e};c.V=function(b,e){var k=new c(0);k.size=b.size;k.size>e&&(k.size=e);k.f=b.f.slice(0,k.size);return k};c.prototype.xb=function(){};c.prototype.read=function(b){return this.f[b]};c.prototype.ec=function(b,
e){e.x=this.f[b];e.y=this.f[b+1]};c.prototype.get=function(b){return this.f[b]};c.prototype.write=function(b,e){if(this.Sa)throw g.g.xa();this.f[b]=e};c.prototype.set=function(b,e){if(this.Sa)throw g.g.xa();this.f[b]=e};c.prototype.Rn=function(b,e){if(this.Sa)throw g.g.xa();this.f[b]=e.x;this.f[b+1]=e.y};c.prototype.add=function(b){this.resize(this.size+1);this.f[this.size-1]=b};c.prototype.Ip=function(b){return c.V(this,b)};c.prototype.Bh=function(b){return this.read(b)};c.prototype.resize=function(b,
e){void 0===e&&(e=0);if(this.Xf)throw g.g.ra("invalid call. Attribute Stream is locked and cannot be resized.");if(b<=this.size){if(g.I.truncate(5*b/4)<this.f.length){var c=this.f.slice(0,b);this.f=c}}else if(b>this.f.length){g.I.truncate(64>b?Math.max(2*b,4):5*b/4);for(var c=this.f.slice(0),n=this.f.length;n<b;n++)c[n]=e;this.f=c}this.size=b};c.prototype.cf=function(b){(null==this.f||b>this.f.length)&&this.resize(b);if(this.Xf)throw g.g.ra("invalid call. Attribute Stream is locked and cannot be resized.");
this.size=b};c.prototype.Uk=function(b,e){this.write(b,e)};c.prototype.jj=function(b,e,c){for(var k=this.size;e<k&&e<c;e++)b=g.I.kg(this.read(e),b);return b};c.prototype.lc=function(b,e,k){if(null==b||!(b instanceof c))return!1;var n=this.size,u=b.size;if(k>n||k>u&&n!=u)return!1;for(k>n&&(k=n);e<k;e++)if(this.read(e)!=b.read(e))return!1;return!0};c.prototype.nk=function(b,e,c,n,u,B,a){if(this.Sa)throw g.g.xa();if(!u&&(1>B||0!=n%B))throw g.g.N();for(var k=0;k<a-b;k++)this.f[b+n+k]=this.f[b+k];this.f==
e.f&&b<c&&(c+=n);if(u)for(k=0;k<n;k++)this.f[k+b]=e.f[c+k];else for(u=n,a=0;a<n;a+=B)for(u-=B,k=0;k<B;k++)this.f[b+a+k]=e.f[c+u+k]};c.prototype.ul=function(b,e,c,n){if(this.Sa)throw g.g.xa();n-=b;for(var k=this.f.slice(b,b+n),B=0;B<n;B++)this.f[b+c+B]=k[B];for(n=0;n<c;n++)this.f[b+n]=e};c.prototype.lg=function(b,e,c){if(this.Sa)throw g.g.xa();for(var k=this.f.slice(b,b+(c-b)),u=0;u<c-b;u++)this.f[u+b+2]=k[u];this.f[b]=e.x;this.f[b+1]=e.y};c.prototype.km=function(b,e,c,n,u,B){if(0>b||0>e||0>n)throw g.g.N();
if(!u&&(0>=B||0!=e%B))throw g.g.N();if(c.size<n+e)throw g.g.N();if(0!=e)if(this.size<e+b&&this.resize(e+b),c==this)this.xi(b,e,n,u,B);else if(u)for(u=0;u<e;u++)this.f[b]=c.f[n],b++,n++;else if(n=n+e-B,1==B)for(u=0;u<e;u++)this.f[b]=c.f[n],b++,n--;else for(u=0,e=g.I.truncate(e/B);u<e;u++){for(var k=0;k<B;k++)this.f[b+k]=c.f[n+k];b+=B;n-=B}};c.prototype.oj=function(b,e,c){if(this.Sa)throw g.g.xa();if(b+e>this.size)throw g.g.xa();if(0<c-(b+e)){c-=b+e;for(var k=this.f.slice(b+e,b+c+e),u=0;u<c;u++)this.f[b+
u]=k[u]}this.size-=e};c.prototype.Jp=function(b,e,c){if(this.Sa)throw g.g.xa();if(1>c||0!=e%c)throw g.g.xa();for(var k=e>>1,u=0;u<k;u+=c){e-=c;for(var B=0;B<c;B++){var a=this.f[b+u+B];this.f[b+u+B]=this.f[b+e+B];this.f[b+e+B]=a}}};c.prototype.dh=function(b,e,c){if(0>e||0>c||0>e||c+e>this.size)throw g.g.N();for(var k=e;k<e+c;k++)this.f[k]=b};c.prototype.xi=function(b,e,c,n,u){if(!n||b!=c){for(var k=0;k<e;k++)this.f[b+k]=this.f[c+k];if(!n)for(c=b,b=b+e-u,n=0,e=g.I.truncate(e/2);n<e;n++){for(k=0;k<u;k++){var a=
this.f[c+k];this.f[c+k]=this.f[b+k];this.f[b+k]=a}c+=u;b-=u}}};c.prototype.$p=function(b,e,c,n,u){if(0>b||0>e||0>n)throw g.g.N();if(0!=e)for(this.size<(e<<1)+b&&this.resize((e<<1)+b),u||(b+=e-1<<1),u=u?2:-2,e+=n;n<e;n++)this.f[b]=c[n].x,this.f[b+1]=c[n].y,b+=u};c.prototype.Hp=function(b,e,c,n,u){if(0>b||0>e||0>n||this.size<e+b)throw g.g.N();if(u)for(u=0;u<e;u++)c[n+u]=this.f[b+u];else for(n=n+e-1;b<e;b++)c[n]=this.f[b],n--};c.prototype.clear=function(b){b?this.resize(0):this.cf(0)};c.prototype.xd=
function(b,e,c){var k=this.f.slice(0,b),u=this.f.slice(e);b=this.f.slice(b,e).sort(c);this.f.length=0;this.f.push.apply(this.f,k.concat(b).concat(u))};c.prototype.Qh=function(){return 2};c.prototype.tc=function(){return this.f[this.size-1]};c.prototype.af=function(){this.resize(this.size-1)};c.prototype.JF=function(b){this.f[this.size-1]=b};c.prototype.QE=function(b){b<this.size-1&&(this.f[b]=this.f[this.size-1]);this.resize(this.size-1)};c.prototype.Qs=function(b){for(var e=0,c=this.size;e<c;e++)if(this.f[e]==
b)return e;return-1};c.prototype.Nw=function(b){return 0<=this.Qs(b)};c.ob=0;return c}();g.ga=d;d=function(){function c(b){this.Sa=this.Xf=!1;this.f=null;var e=b;2>e&&(e=2);this.f=new Int32Array(e);this.size=b}c.Yc=function(b,e){var k=new c(b),n=k.f;2>b&&(b=2);if(0!==e)for(var u=0;u<b;u++)n[u]=e;return k};c.lj=function(b){var e=new c(0);e.f=new Int32Array(b.f);e.size=b.size;return e};c.V=function(b,e){var k=new c(0);k.size=b.size;k.size>e&&(k.size=e);e=k.size;2>e&&(e=2);k.f=new Int32Array(e);k.f.set(b.f.length<=
e?b.f:b.f.subarray(0,e),0);return k};c.prototype.xb=function(b){0>=b||(null==this.f?this.f=new Int32Array(b):b<=this.f.length||(0<this.f.length?(b=new Int32Array(b),b.set(this.f),this.f=b):this.f=new Int32Array(b)))};c.prototype.read=function(b){return this.f[b]};c.prototype.ec=function(b,e){e.x=this.f[b];e.y=this.f[b+1]};c.prototype.get=function(b){return this.f[b]};c.prototype.write=function(b,e){if(this.Sa)throw g.g.xa();this.f[b]=e};c.prototype.set=function(b,e){if(this.Sa)throw g.g.xa();this.f[b]=
e};c.prototype.Rn=function(b,e){if(this.Sa)throw g.g.xa();this.f[b]=e.x;this.f[b+1]=e.y};c.prototype.add=function(b){this.resize(this.size+1);this.f[this.size-1]=b};c.prototype.Ip=function(b){return c.V(this,b)};c.prototype.Bh=function(b){return this.read(b)};c.prototype.resize=function(b,e){void 0===e&&(e=0);if(this.Xf)throw g.g.ra("invalid call. Attribute Stream is locked and cannot be resized.");if(b<=this.size){if(30<this.f.length&&5*b/4<this.f.length){var c=new Int32Array(this.f,0,b);this.f=
c}}else{b>this.f.length&&(c=g.I.truncate(64>b?Math.max(2*b,4):5*b/4),c=new Int32Array(c),c.set(this.f),this.f=c);for(var c=this.f,n=this.size;n<b;n++)c[n]=e}this.size=b};c.prototype.cf=function(b){(null==this.f||b>this.f.length)&&this.resize(b);if(this.Xf)throw g.g.ra("invalid call. Attribute Stream is locked and cannot be resized.");this.size=b};c.prototype.Uk=function(b,e){this.write(b,e)};c.prototype.jj=function(b,e,c){for(var k=this.size;e<k&&e<c;e++)b=g.I.kg(this.read(e),b);return b};c.prototype.lc=
function(b,e,k){if(null==b||!(b instanceof c))return!1;var n=this.size,u=b.size;if(k>n||k>u&&n!=u)return!1;for(k>n&&(k=n);e<k;e++)if(this.read(e)!=b.read(e))return!1;return!0};c.prototype.nk=function(b,e,c,n,u,B,d){if(this.Sa)throw g.g.xa();if(!u&&(1>B||0!=n%B))throw g.g.N();a(this.f,b+n,b,b+(d-b));this.f==e.f&&b<c&&(c+=n);if(u)this.f.set(e.f.subarray(c,c+n),b);else for(u=n,d=0;d<n;d+=B){u-=B;for(var k=0;k<B;k++)this.f[b+d+k]=e.f[c+u+k]}};c.prototype.ul=function(b,e,c,n){if(this.Sa)throw g.g.xa();
n-=b;a(this.f,b+n,b,b+n);for(n=0;n<c;n++)this.f[b+n]=e};c.prototype.lg=function(b,e,c){if(this.Sa)throw g.g.xa();a(this.f,b+2,b,b+(c-b));this.f[b]=e.x;this.f[b+1]=e.y};c.prototype.km=function(b,e,c,n,u,a){if(0>b||0>e||0>n)throw g.g.N();if(!u&&(0>=a||0!=e%a))throw g.g.N();if(c.size<n+e)throw g.g.N();if(0!=e)if(this.size<e+b&&this.resize(e+b),c==this)this.xi(b,e,n,u,a);else if(u)for(u=0;u<e;u++)this.f[b]=c.f[n],b++,n++;else if(n=n+e-a,1==a)for(u=0;u<e;u++)this.f[b]=c.f[n],b++,n--;else for(u=0,e=g.I.truncate(e/
a);u<e;u++){for(var k=0;k<a;k++)this.f[b+k]=c.f[n+k];b+=a;n-=a}};c.prototype.oj=function(b,e,c){if(this.Sa)throw g.g.xa();if(b+e>this.size)throw g.g.xa();0<c-(b+e)&&a(this.f,b,b+e,b+(c-(b+e))+e);this.size-=e};c.prototype.Jp=function(b,e,c){if(this.Sa)throw g.g.xa();if(1>c||0!=e%c)throw g.g.xa();for(var k=e>>1,u=0;u<k;u+=c){e-=c;for(var a=0;a<c;a++){var d=this.f[b+u+a];this.f[b+u+a]=this.f[b+e+a];this.f[b+e+a]=d}}};c.prototype.dh=function(b,e,c){if(0>e||0>c||0>e||c+e>this.size)throw g.g.N();for(var k=
e;k<e+c;k++)this.f[k]=b};c.prototype.xi=function(b,e,c,n,u){if(!n||b!=c)if(this.f.set(this.f.subarray(c,c+e),b),!n)for(c=b,b=b+e-u,n=0,e=g.I.truncate(e/2);n<e;n++){for(var k=0;k<u;k++){var a=this.f[c+k];this.f[c+k]=this.f[b+k];this.f[b+k]=a}c+=u;b-=u}};c.prototype.$p=function(b,e,c,n,u){if(0>b||0>e||0>n)throw g.g.N();if(0!=e)for(this.size<(e<<1)+b&&this.resize((e<<1)+b),u||(b+=e-1<<1),u=u?2:-2,e+=n;n<e;n++)this.f[b]=c[n].x,this.f[b+1]=c[n].y,b+=u};c.prototype.Hp=function(b,e,c,n,u){if(0>b||0>e||0>
n||this.size<e+b)throw g.g.N();if(u)for(u=0;u<e;u++)c[n+u]=this.f[b+u];else for(n=n+e-1;b<e;b++)c[n]=this.f[b],n--};c.prototype.clear=function(b){b?this.resize(0):this.cf(0)};c.prototype.xd=function(b,e,k){10>e-b?c.$i(this.f,b,e,k):c.$g(this.f,b,e-1,k)};c.prototype.Qh=function(){return 2};c.prototype.tc=function(){return this.f[this.size-1]};c.prototype.af=function(){this.resize(this.size-1)};c.prototype.JF=function(b){this.f[this.size-1]=b};c.prototype.QE=function(b){b<this.size-1&&(this.f[b]=this.f[this.size-
1]);this.resize(this.size-1)};c.prototype.Qs=function(b){for(var e=0,c=this.size;e<c;e++)if(this.f[e]==b)return e;return-1};c.prototype.Nw=function(b){return 0<=this.Qs(b)};c.$i=function(b,e,c,n){for(var k=e;k<c;k++){for(var g=b[k],a=k-1;a>=e&&0<n(b[a],g);)b[a+1]=b[a],a--;b[a+1]=g}};c.Wf=function(b,e,c){var k=b[c];b[c]=b[e];b[e]=k};c.$g=function(b,e,k,n){if(!(e>=k))for(;;){if(9>k-e){c.$i(b,e,k+1,n);break}var u=b[e];c.Wf(b,e,k);for(var g=e,a=e;a<k;a++)0>=n(b[a],u)&&(c.Wf(b,g,a),g+=1);c.Wf(b,g,k);g-
e<k-g?(c.$g(b,e,g-1,n),e=g+1):(c.$g(b,g+1,k,n),k=g-1)}};return c}();g.Xu=d})(w||(w={}));!0===w.ah.Sk&&(w.ga=w.Xu);(function(g){function a(c,b,e,k){e=new Int8Array(c.subarray(e,k));c.set(e,b)}var d=function(){function c(b){this.Sa=this.Xf=!1;this.f=[];var e=b;2>e&&(e=2);this.f=g.I.Lh(e,c.ob);this.size=b}c.Yc=function(b,e){c.ob=e;b=new c(b);c.ob=0;return b};c.lj=function(b){var e=new c(0);e.f=b.f.slice(0);e.size=b.size;return e};c.V=function(b,e){var k=new c(0);k.size=b.size;k.size>e&&(k.size=e);k.f=
b.f.slice(0,k.size);return k};c.prototype.xb=function(){};c.prototype.read=function(b){return this.f[b]};c.prototype.ec=function(b,e){e.x=this.f[b];e.y=this.f[b+1]};c.prototype.get=function(b){return this.f[b]};c.prototype.write=function(b,e){if(this.Sa)throw g.g.xa();this.f[b]=e};c.prototype.set=function(b,e){if(this.Sa)throw g.g.xa();this.f[b]=e};c.prototype.Rn=function(b,e){if(this.Sa)throw g.g.xa();this.f[b]=e.x;this.f[b+1]=e.y};c.prototype.add=function(b){this.resize(this.size+1);this.f[this.size-
1]=b};c.prototype.Ip=function(b){return c.V(this,b)};c.prototype.Bh=function(b){return this.read(b)};c.prototype.resize=function(b,e){void 0===e&&(e=0);if(this.Xf)throw g.g.ra("invalid call. Attribute Stream is locked and cannot be resized.");if(b<=this.size){if(g.I.truncate(5*b/4)<this.f.length){var c=this.f.slice(0,b);this.f=c}}else if(b>this.f.length){g.I.truncate(64>b?Math.max(2*b,4):5*b/4);for(var c=this.f.slice(0),n=this.f.length;n<b;n++)c[n]=e;this.f=c}this.size=b};c.prototype.cf=function(b){(null==
this.f||b>this.f.length)&&this.resize(b);if(this.Xf)throw g.g.ra("invalid call. Attribute Stream is locked and cannot be resized.");this.size=b};c.prototype.Uk=function(b,e){this.write(b,e)};c.prototype.jj=function(b,e,c){for(var k=this.size;e<k&&e<c;e++)b=g.I.kg(this.read(e),b);return b};c.prototype.lc=function(b,e,k){if(null==b||!(b instanceof c))return!1;var n=this.size,u=b.size;if(k>n||k>u&&n!=u)return!1;for(k>n&&(k=n);e<k;e++)if(this.read(e)!=b.read(e))return!1;return!0};c.prototype.nk=function(b,
e,c,n,u,a,d){if(this.Sa)throw g.g.xa();if(!u&&(1>a||0!=n%a))throw g.g.N();for(var k=0;k<d-b;k++)this.f[b+n+k]=this.f[b+k];this.f==e.f&&b<c&&(c+=n);if(u)for(k=0;k<n;k++)this.f[k+b]=e.f[c+k];else for(u=n,d=0;d<n;d+=a)for(u-=a,k=0;k<a;k++)this.f[b+d+k]=e.f[c+u+k]};c.prototype.ul=function(b,e,c,n){if(this.Sa)throw g.g.xa();n-=b;for(var k=this.f.slice(b,b+n),a=0;a<n;a++)this.f[b+c+a]=k[a];for(n=0;n<c;n++)this.f[b+n]=e};c.prototype.lg=function(b,e,c){if(this.Sa)throw g.g.xa();for(var k=this.f.slice(b,b+
(c-b)),u=0;u<c-b;u++)this.f[u+b+2]=k[u];this.f[b]=e.x;this.f[b+1]=e.y};c.prototype.km=function(b,e,c,n,u,a){if(0>b||0>e||0>n)throw g.g.N();if(!u&&(0>=a||0!=e%a))throw g.g.N();if(c.size<n+e)throw g.g.N();if(0!=e)if(this.size<e+b&&this.resize(e+b),c==this)this.xi(b,e,n,u,a);else if(u)for(u=0;u<e;u++)this.f[b]=c.f[n],b++,n++;else if(n=n+e-a,1==a)for(u=0;u<e;u++)this.f[b]=c.f[n],b++,n--;else for(u=0,e=g.I.truncate(e/a);u<e;u++){for(var k=0;k<a;k++)this.f[b+k]=c.f[n+k];b+=a;n-=a}};c.prototype.oj=function(b,
e,c){if(this.Sa)throw g.g.xa();if(b+e>this.size)throw g.g.xa();if(0<c-(b+e)){c-=b+e;for(var k=this.f.slice(b+e,b+c+e),u=0;u<c;u++)this.f[b+u]=k[u]}this.size-=e};c.prototype.Jp=function(b,e,c){if(this.Sa)throw g.g.xa();if(1>c||0!=e%c)throw g.g.xa();for(var k=e>>1,u=0;u<k;u+=c){e-=c;for(var a=0;a<c;a++){var d=this.f[b+u+a];this.f[b+u+a]=this.f[b+e+a];this.f[b+e+a]=d}}};c.prototype.dh=function(b,e,c){if(0>e||0>c||0>e||c+e>this.size)throw g.g.N();for(var k=e;k<e+c;k++)this.f[k]=b};c.prototype.xi=function(b,
e,c,n,u){if(!n||b!=c){for(var k=0;k<e;k++)this.f[b+k]=this.f[c+k];if(!n)for(c=b,b=b+e-u,n=0,e=g.I.truncate(e/2);n<e;n++){for(k=0;k<u;k++){var a=this.f[c+k];this.f[c+k]=this.f[b+k];this.f[b+k]=a}c+=u;b-=u}}};c.prototype.$p=function(b,e,c,n,u){if(0>b||0>e||0>n)throw g.g.N();if(0!=e)for(this.size<(e<<1)+b&&this.resize((e<<1)+b),u||(b+=e-1<<1),u=u?2:-2,e+=n;n<e;n++)this.f[b]=c[n].x,this.f[b+1]=c[n].y,b+=u};c.prototype.Hp=function(b,e,c,n,u){if(0>b||0>e||0>n||this.size<e+b)throw g.g.N();if(u)for(u=0;u<
e;u++)c[n+u]=this.f[b+u];else for(n=n+e-1;b<e;b++)c[n]=this.f[b],n--};c.prototype.clear=function(b){b?this.resize(0):this.cf(0)};c.prototype.xd=function(b,e,c){var k=this.f.slice(0,b),u=this.f.slice(e);b=this.f.slice(b,e).sort(c);this.f.length=0;this.f.push.apply(this.f,k.concat(b).concat(u))};c.prototype.Qh=function(){return 1};c.prototype.xy=function(b,e){if(this.Sa)throw g.g.ra("invalid call. Attribute Stream is read only.");this.f[b]|=e};c.prototype.BB=function(b,e){if(this.Sa)throw g.g.ra("invalid call. Attribute Stream is read only.");
this.f[b]&=~e};c.ob=0;return c}();g.Wk=d;d=function(){function c(b){this.f=null;var e=b;2>e&&(e=2);this.f=new Int8Array(e);this.size=b}c.Yc=function(b,e){var k=new c(b),n=k.f;2>b&&(b=2);if(0!==e)for(var u=0;u<b;u++)n[u]=e;return k};c.lj=function(b){var e=new c(0);e.f=new Int8Array(b.f);e.size=b.size;return e};c.V=function(b,e){var k=new c(0);k.size=b.size;k.size>e&&(k.size=e);e=k.size;2>e&&(e=2);k.f=new Int8Array(e);k.f.set(b.f.length<=e?b.f:b.f.subarray(0,e),0);return k};c.prototype.xb=function(b){0>=
b||(null==this.f?this.f=new Int8Array(b):b<=this.f.length||(0<this.f.length?(b=new Int8Array(b),b.set(this.f),this.f=b):this.f=new Int8Array(b)))};c.prototype.read=function(b){return this.f[b]};c.prototype.ec=function(b,e){e.x=this.f[b];e.y=this.f[b+1]};c.prototype.get=function(b){return this.f[b]};c.prototype.write=function(b,e){if(this.Sa)throw g.g.xa();this.f[b]=e};c.prototype.set=function(b,e){if(this.Sa)throw g.g.xa();this.f[b]=e};c.prototype.Rn=function(b,e){if(this.Sa)throw g.g.xa();this.f[b]=
e.x;this.f[b+1]=e.y};c.prototype.add=function(b){this.resize(this.size+1);this.f[this.size-1]=b};c.prototype.Ip=function(b){return c.V(this,b)};c.prototype.Bh=function(b){return this.read(b)};c.prototype.resize=function(b,e){void 0===e&&(e=0);if(this.Xf)throw g.g.ra("invalid call. Attribute Stream is locked and cannot be resized.");if(b<=this.size){if(30<this.f.length&&5*b/4<this.f.length){var c=new Int8Array(this.f,0,b);this.f=c}}else{b>this.f.length&&(c=g.I.truncate(64>b?Math.max(2*b,4):5*b/4),
c=new Int8Array(c),c.set(this.f),this.f=c);for(var c=this.f,n=this.size;n<b;n++)c[n]=e}this.size=b};c.prototype.cf=function(b){(null==this.f||b>this.f.length)&&this.resize(b);if(this.Xf)throw g.g.ra("invalid call. Attribute Stream is locked and cannot be resized.");this.size=b};c.prototype.Uk=function(b,e){this.write(b,e)};c.prototype.jj=function(b,e,c){for(var k=this.size;e<k&&e<c;e++)b=g.I.kg(this.read(e),b);return b};c.prototype.lc=function(b,e,k){if(null==b||!(b instanceof c))return!1;var n=this.size,
u=b.size;if(k>n||k>u&&n!=u)return!1;for(k>n&&(k=n);e<k;e++)if(this.read(e)!=b.read(e))return!1;return!0};c.prototype.nk=function(b,e,c,n,u,B,d){if(this.Sa)throw g.g.xa();if(!u&&(1>B||0!=n%B))throw g.g.N();a(this.f,b+n,b,b+(d-b));this.f==e.f&&b<c&&(c+=n);if(u)this.f.set(e.f.subarray(c,c+n),b);else for(u=n,d=0;d<n;d+=B){u-=B;for(var k=0;k<B;k++)this.f[b+d+k]=e.f[c+u+k]}};c.prototype.ul=function(b,e,c,n){if(this.Sa)throw g.g.xa();n-=b;a(this.f,b+n,b,b+n);for(n=0;n<c;n++)this.f[b+n]=e};c.prototype.lg=
function(b,e,c){if(this.Sa)throw g.g.xa();a(this.f,b+2,b,b+(c-b));this.f[b]=e.x;this.f[b+1]=e.y};c.prototype.km=function(b,e,c,n,u,a){if(0>b||0>e||0>n)throw g.g.N();if(!u&&(0>=a||0!=e%a))throw g.g.N();if(c.size<n+e)throw g.g.N();if(0!=e)if(this.size<e+b&&this.resize(e+b),c==this)this.xi(b,e,n,u,a);else if(u)for(u=0;u<e;u++)this.f[b]=c.f[n],b++,n++;else if(n=n+e-a,1==a)for(u=0;u<e;u++)this.f[b]=c.f[n],b++,n--;else for(u=0,e=g.I.truncate(e/a);u<e;u++){for(var k=0;k<a;k++)this.f[b+k]=c.f[n+k];b+=a;n-=
a}};c.prototype.oj=function(b,e,c){if(this.Sa)throw g.g.xa();if(b+e>this.size)throw g.g.xa();0<c-(b+e)&&a(this.f,b,b+e,b+(c-(b+e))+e);this.size-=e};c.prototype.Jp=function(b,e,c){if(this.Sa)throw g.g.xa();if(1>c||0!=e%c)throw g.g.xa();for(var k=e>>1,u=0;u<k;u+=c){e-=c;for(var a=0;a<c;a++){var d=this.f[b+u+a];this.f[b+u+a]=this.f[b+e+a];this.f[b+e+a]=d}}};c.prototype.dh=function(b,e,c){if(0>e||0>c||0>e||c+e>this.size)throw g.g.N();for(var k=e;k<e+c;k++)this.f[k]=b};c.prototype.xi=function(b,e,c,n,
u){if(!n||b!=c)if(this.f.set(this.f.subarray(c,c+e),b),!n)for(c=b,b=b+e-u,n=0,e=g.I.truncate(e/2);n<e;n++){for(var k=0;k<u;k++){var a=this.f[c+k];this.f[c+k]=this.f[b+k];this.f[b+k]=a}c+=u;b-=u}};c.prototype.$p=function(b,e,c,n,u){if(0>b||0>e||0>n)throw g.g.N();if(0!=e)for(this.size<(e<<1)+b&&this.resize((e<<1)+b),u||(b+=e-1<<1),u=u?2:-2,e+=n;n<e;n++)this.f[b]=c[n].x,this.f[b+1]=c[n].y,b+=u};c.prototype.Hp=function(b,e,c,n,u){if(0>b||0>e||0>n||this.size<e+b)throw g.g.N();if(u)for(u=0;u<e;u++)c[n+
u]=this.f[b+u];else for(n=n+e-1;b<e;b++)c[n]=this.f[b],n--};c.prototype.clear=function(b){b?this.resize(0):this.cf(0)};c.prototype.xd=function(b,e,c){e=this.f.subarray(b,e);Array.prototype.sort.call(e,c);this.f.set(e,b)};c.prototype.xy=function(b,e){if(this.Sa)throw g.g.ra("invalid call. Attribute Stream is read only.");this.f[b]|=e};c.prototype.BB=function(b,e){if(this.Sa)throw g.g.ra("invalid call. Attribute Stream is read only.");this.f[b]&=~e};c.prototype.Qh=function(){return 1};return c}();g.Yu=
d})(w||(w={}));!0===w.ah.Sk&&(w.Wk=w.Yu);(function(g){var a=function(){function a(){}a.to=function(c,b){return g.Wk.Yc(c,b)};a.kl=function(c,b){return g.qd.Yc(c,b)};a.Sv=function(c,b,e){switch(c){case 1:c=g.qd.Yc(b,e);break;case 2:c=g.ga.Yc(b,e);break;case 4:c=g.Wk.Yc(b,e);break;default:throw g.g.wa();}return c};a.Tv=function(c,b){return a.Sv(g.pa.Qh(c),b*g.pa.Wa(c),g.pa.ue(c))};a.Dg=function(c,b){return g.ga.Yc(c,b)};a.ay=function(c){var b,e=[];for(b=0;b<c;b++)e.push(null);return e};return a}();
g.Ac=a})(w||(w={}));(function(g){var a=function(){function a(){}a.to=function(c,b){return g.Yu.Yc(c,b)};a.kl=function(c,b){return g.qd.Yc(c,b)};a.Sv=function(c,b,e){switch(c){case 1:c=g.qd.Yc(b,e);break;case 2:c=g.Xu.Yc(b,e);break;case 4:c=g.Yu.Yc(b,e);break;default:throw g.g.wa();}return c};a.Tv=function(c,b){return g.Ac.Sv(g.pa.Qh(c),b*g.pa.Wa(c),g.pa.ue(c))};a.Dg=function(c,b){return g.Xu.Yc(c,b)};a.ay=function(c){var b,e=[];for(b=0;b<c;b++)e.push(null);return e};return a}();g.RG=a})(w||(w={}));
!0===w.ah.Sk&&(w.Ac=w.RG);(function(g){g.ca=function(){return function(g){void 0===g&&(g=0);this.l=g}}()})(w||(w={}));(function(g){var a=function(){function c(){}c.nb=function(b,e){return 0<=e?c.H(b):-c.H(b)};c.H=function(b){return 0>b?-b:b};c.Ih=function(b){return 3.552713678800501E-15>b};c.Xz=function(b,e,k){return c.H(b-e)<=k*(1+(c.H(b)+c.H(e))/2)};c.S=function(b,e){return c.Xz(b,e,3.552713678800501E-15)};c.wI=function(b){return 3.552713678800501E-15>=c.H(b)};c.Vc=function(b){return c.wI(b)};return c}();
g.j=a;var d=function(){function c(){}c.Sn=function(b,e){b=a.H(b);e=a.H(e);var c=0;0!=b+e&&(b>e?(c=e/b,c=b*Math.sqrt(1+c*c)):(c=b/e,c=e*Math.sqrt(1+c*c)));return c};c.Ep=function(b,e,k,n,u){for(var g=[0,0,0],d=[0,0,0],G=0;2>=G;G++)e[G]-=b[G],k[G]-=e[G];k=g[1]*d[2]-g[2]*d[1];e=g[2]*d[0]-g[0]*d[2];g=g[0]*d[1]-g[1]*d[0];b=-1*(k*b[0]+e*b[1]+g*b[2]);n[0]=k;n[1]=e;n[2]=g;n[3]=b;d=c.jm(n);n[0]/=d;n[1]/=d;n[2]/=d;n[3]/=d;0!=u&&(d=a.Vc(g)?a.Vc(b)?a.nb(1,e):-a.nb(1,b):a.nb(1,g),d*=a.nb(1,u),n[0]*=d,n[1]*=d,
n[2]*=d,n[3]*=d)};c.Uu=function(b,e,c){c[0]=b[1]*e[2]-e[1]*b[2];c[1]=b[2]*e[0]-e[2]*b[0];c[2]=b[0]*e[1]-e[0]*b[1]};c.Qr=function(b,e){return b[0]*e[0]+b[1]*e[1]+b[2]*e[2]};c.jm=function(b){return c.Sn(c.Sn(b[0],b[1]),b[2])};c.wm=function(b,e,k,n,u,g){var a=c.n(1,b,e),B=Math.cos(e);n.l=(a+0)*B*Math.cos(k);u.l=(a+0)*B*Math.sin(k);g.l=(a*(1-b)+0)*Math.sin(e)};c.JK=function(b,e,k,n,u,g,d){var B=c.Sn(e,k),I=1*Math.sqrt(1-b),f=I/1;if(a.S(B,0))g.l=0,u.l=a.nb(1.570796326794897,n),d.l=a.H(n)-I;else{g.l=Math.atan2(k,
e);k=Math.atan2(1*n,I*B);g=Math.cos(k);var h=Math.sin(k);e=I*b/(1-b);b*=1;k=Math.atan2(n+e*h*h*h,B-b*g*g*g);3.141592653589793<a.H(k)&&(k=a.nb(3.141592653589793,k)-k);k=Math.atan(f*Math.tan(k));h=Math.sin(k);g=Math.cos(k);u.l=Math.atan2(n+e*h*h*h,B-b*g*g*g);1.570796326794897<a.H(u.l)&&(u.l=a.nb(3.141592653589793,u.l)-u.l);k=Math.atan(f*Math.tan(u.l));h=Math.sin(k);g=Math.cos(k);d.l=(n-I*h)*Math.sin(u.l)+(B-1*g)*Math.cos(u.l)}};c.n=function(b,e,c){c=Math.sin(c);return b/Math.sqrt(1-e*c*c)};c.sr=function(b,
e){return Math.atan2(Math.sin(e)*(1-b),Math.cos(e))};c.Si=function(b,e){return Math.atan2(Math.sin(e),Math.cos(e)*(1-b))};c.xn=function(b,e){if(a.Ih(b)||0==e||a.S(a.H(e),1.570796326794897))return e;var k,n,u,g,d,G,f,h,z;if(.006884661117170036>b){g=Math.sqrt(1-b);d=(1-g)/(1+g);G=d*d;f=d*G;h=d*f;k=d*h;z=d*k;n=d*z;u=1.572916666666667*f-3.2578125*k+4.295068359375*n;g=2.142578125*h-6.071484375*z;b=3.129296875*k-11.249837239583334*n;var l=4.775276692708333*z,m=7.958636765252976*n,p=Math.cos(2*e);return e+
Math.sin(2*e)*(1.5*d-.84375*f+.525390625*k-.2688395182291667*n-u+b-m+p*(2*(1.3125*G-1.71875*h+1.650146484375*z)-4*g+6*l+p*(4*u-12*b+24*m+p*(8*g-32*l+p*(16*b-80*m+p*(32*l+64*p*m))))))}g=1-b;d=b/2;G=a.H(e);f=G*c.Yr(b)/(1.570796326794897*g);h=9999;z=G;for(G=0;1E-16<h&&50>G;G++)n=c.Tk(b,z),k=(c.Lz(z,b)-d*Math.sin(2*z)/n)/g-f,n=1/(n*n*n),u=k/n,k=z-u,h=a.H(u),z=k;return 0<=e?z:-z};c.nR=function(b,e){return a.Ih(e)?b:b*c.Yr(e)/1.570796326794897};c.W=function(b){b=c.Hz(b,6.283185307179586);return 0>b?b+6.283185307179586:
3.141592653589793>a.H(b)||a.S(a.H(b),3.141592653589793)?b:b-6.283185307179586};c.Hz=function(b,e){return b-Math.floor(b/e)*e};c.gg=function(b,e){if(.006884661117170036>e){e=Math.sqrt(1-e);e=(1-e)/(1+e);var k=e*e,n=k*k;return b/(1+e)*(1+.25*k+.015625*n+.00390625*k*n)*1.570796326794897}return b*c.Yr(e)};c.Dp=function(b,e){var k=a.nb(1,Math.sin(e));e=a.H(c.Hz(e,3.141592653589793));e=1.570796326794897>=e?e:3.141592653589793-e;var n;a.S(e,1.570796326794897)?n=e:n=Math.atan(Math.sqrt(1-b)*Math.tan(e));
return n*k};c.q=function(b,e,k){if(.006884661117170036>e){e=Math.sqrt(1-e);e=(1-e)/(1+e);var n=e*e,u=e*n,g=e*u,a=e*g,d=e*a,f=e*d,h=-.7291666666666666*u+.2278645833333333*a+.03987630208333334*f,z=.615234375*g-.21533203125*d,l=-.54140625*a+.20302734375*f,m=.48876953125*d,p=-.4488699776785715*f,q=Math.cos(2*k);return b/(1+e)*((1+.25*n+.015625*g+.00390625*d)*k+Math.sin(2*k)*(-1.5*e+.1875*u+.0234375*a+.00732421875*f-h+l-p+q*(2*(.9375*n-.234375*g-.03662109375*d)-4*z+6*m+q*(4*h-12*l+24*p+q*(8*z-32*m+q*(16*
l-80*p+q*(32*m+64*q*p)))))))}return b*(c.Lz(k,e)-.5*e*Math.sin(2*k)/c.Tk(e,k))};c.Tk=function(b,e){e=Math.sin(e);return Math.sqrt(1-b*e*e)};c.Yr=function(b){return a.Xz(b,1,2.220446049250313E-16)?1:1>b?c.js(0,1-b)-b/3*c.hs(0,1-b):NaN};c.Lz=function(b,e){var k=a.nb(1,b);b=a.H(b);var n=Math.floor(b/1.570796326794897),u;if(1<e)u=0==b?0:NaN;else if(a.Vc(n))u=c.sin(b),u=u*c.js(1-u*u,1-e*u*u)-e/3*u*u*u*c.hs(1-u*u,1-e*u*u);else{u=g.I.truncate(n%2);var B=c.Yr(e);0<u?(u=Math.sin(1.570796326794897*(n+1)-b),
u=u*c.js(1-u*u,1-e*u*u)-e/3*u*u*u*c.hs(1-u*u,1-e*u*u),u=B*(n+1)-u):(u=Math.sin(b-1.570796326794897*n),u=u*c.js(1-u*u,1-e*u*u)-e/3*u*u*u*c.hs(1-u*u,1-e*u*u),u=B*n+u)}return u*k};c.sin=function(b){b=c.W(b);var e=a.nb(1,b);b=a.H(b);return a.S(b,3.141592653589793)?0:a.S(b,1.570796326794897)?1*e:Math.sin(b)*e};c.hs=function(b,e){for(var c=1,n=0,u=1,g,d,G,f;;){g=.2*(b+e+3*c);d=(g-b)/g;G=(g-e)/g;f=(g-c)/g;if(1E-4>a.H(d)&&1E-4>a.H(G)&&1E-4>a.H(f))break;f=Math.sqrt(e);g=Math.sqrt(c);f=Math.sqrt(b)*(f+g)+f*
g;n+=u/(g*(c+f));u*=.25;b=.25*(b+f);e=.25*(e+f);c=.25*(c+f)}b=d*G;c=f*f;e=b-c;c=b-6*c;d=c+e+e;return 3*n+u*(1+c*(-.2142857142857143+.10227272727272728*c-.1730769230769231*f*d)+f*(.1666666666666667*d+f*(-.4090909090909091*e+.1153846153846154*f*b)))/(g*Math.sqrt(g))};c.js=function(b,e){for(var c,n,g,B,d=1;;d=.25*(d+c)){c=(b+e+d)/3;n=2-(c+b)/c;g=2-(c+e)/c;B=2-(c+d)/c;if(1E-4>a.H(n)&&1E-4>a.H(g)&&1E-4>a.H(B))break;c=Math.sqrt(e);n=Math.sqrt(d);c=Math.sqrt(b)*(c+n)+c*n;b=.25*(b+c);e=.25*(e+c)}b=n*g-B*
B;e=n*g*B;return(1+(.04166666666666666*b-.1-.06818181818181818*e)*b+.07142857142857142*e)/Math.sqrt(c)};c.qu=function(b,e){if(a.Ih(b)||0==e||a.S(a.H(e),1.570796326794897))return e;var c,n,g;if(.006884661117170036>b){c=b*b;n=b*c;g=b*n;var B=b*g,d=b*B,G=b*d,f=-(.02708333333333333*n+.03430059523809524*g+.03149181547619048*B+.02634359154541446*d+.02156896735835538*G),h=.007669890873015873*g+.01299603174603175*B+.0148051353064374*d+.01454454953803912*G,z=-(.002275545634920635*B+.004830845032667949*d+.006558395368616723*
G),l=6.957236677288761E-4*d+.001775193002406544*G,m=-(2.17324089394402E-4*G),p=Math.cos(2*e);return e+Math.sin(2*e)*(-(.5*b+.2083333333333333*c+.09375*n+.04878472222222222*g+.02916666666666667*B+.01938905423280423*d+.01388255931712963*G)-f+z-m+p*(2*(.1041666666666667*c+.0875*n+.06050347222222222*g+.04151785714285714*B+.02958958540013228*d+.02203667534722222*G)-4*h+6*l+p*(4*f-12*z+24*m+p*(8*h-32*l+p*(16*z-80*m+p*(32*l+64*p*m))))))}0==e||a.S(a.H(e),1.570796326794897)?c=e:(n=Math.sqrt(b),g=n*Math.sin(e),
c=Math.tan(.7853981633974483+e/2)*Math.pow((1-g)/(1+g),n/2),c=2*Math.atan(c)-1.570796326794897);return c};c.$K=function(b,e){if(a.Ih(b)||0==e||a.S(a.H(e),1.570796326794897))return e;var c,n;if(.006884661117170036>b){p=b*b;z=b*p;l=b*z;c=b*l;m=b*c;n=b*m;var g=.05833333333333333*z+.07232142857142858*l+.05634300595238095*c+.0355325796406526*m+.020235546186067*n,B=.02653149801587302*l+.04379960317460317*c+.0429211791776896*m+.03255384637546096*n,d=.01294022817460318*c+.02668104344536636*m+.03155651254609588*
n,G=.00659454790965208*m+.0163075268674227*n,f=.003463473736911237*n,h=Math.cos(2*e);return e+Math.sin(2*e)*(.5*b+.2083333333333333*p+.08333333333333333*z+.03611111111111111*l+.01875*c+.01195601851851852*m+.008863673941798942*n-g+d-f+h*(2*(.1458333333333333*p+.1208333333333333*z+.07039930555555556*l+.03616071428571429*c+.01839451058201058*m+.01017113095238095*n)-4*B+6*G+h*(4*g-12*d+24*f+h*(8*B-32*G+h*(16*d-80*f+h*(32*G+64*h*f))))))}for(var z=Math.sqrt(b),l=z/2,m=Math.tan(.7853981633974483+e/2),g=
0,B=1,p=e;0!=B;p=n)if(c=z*Math.sin(p),n=m*Math.pow((1+c)/(1-c),l),n=2*Math.atan(n)-1.570796326794897,g++,a.S(n,p)||3E4<g)B=0;return p};return c}();g.u=d})(w||(w={}));(function(g){var a=function(){function a(){}a.Fb=function(c,b,e,k,n,u,a,d){if(null!=u||null!=a||null!=d){k=g.u.W(k);b=g.u.W(b);e=g.u.W(e);n=g.u.W(n);1.570796326794897<g.j.H(e)&&(e=g.j.nb(3.141592653589793,e)-e,b=g.u.W(b+3.141592653589793));1.570796326794897<g.j.H(n)&&(n=g.j.nb(3.141592653589793,n)-n,k=g.u.W(k+3.141592653589793));var B=
g.u.W(k-b);if(g.j.S(e,n)&&(g.j.S(b,k)||g.j.S(g.j.H(e),1.570796326794897)))null!=u&&(u.l=0),null!=a&&(a.l=0),null!=d&&(d.l=0);else{if(g.j.S(e,-n)){if(g.j.S(g.j.H(e),1.570796326794897)){null!=u&&(u.l=3.141592653589793*c);null!=a&&(a.l=0<e?g.u.W(3.141592653589793-g.u.W(k)):g.u.W(k));null!=d&&(d.l=0<e?g.u.W(k):g.u.W(3.141592653589793-g.u.W(k)));return}if(g.j.S(g.j.H(B),3.141592653589793)){null!=u&&(u.l=3.141592653589793*c);null!=a&&(a.l=0);null!=d&&(d.l=0);return}}var I=1.570796326794897==g.j.H(e)?0:
Math.cos(e),f=Math.sin(e),h=1.570796326794897==g.j.H(n)?0:Math.cos(n),z=Math.sin(n),l=1.570796326794897==g.j.H(B)?0:Math.cos(B),m=3.141592653589793==g.j.H(B)?0:Math.sin(B);if(null!=u){var p=Math.sin((n-e)/2),B=Math.sin(B/2);u.l=2*Math.asin(Math.sqrt(p*p+I*h*B*B))*c}null!=a&&(g.j.S(g.j.H(e),1.570796326794897)?a.l=0>e?k:g.u.W(3.141592653589793-k):a.l=Math.atan2(h*m,I*z-f*h*l));null!=d&&(g.j.S(g.j.H(n),1.570796326794897)?d.l=0>n?b:g.u.W(3.141592653589793-b):(d.l=Math.atan2(I*m,z*I*l-h*f),d.l=g.u.W(d.l+
3.141592653589793)))}}};a.gf=function(c,b,e,k,n,u,a){if(null!=u||null!=a){b=g.u.W(b);e=g.u.W(e);1.570796326794897<g.j.H(e)&&(e=g.j.nb(3.141592653589793,e)-e,b=g.u.W(b+3.141592653589793));g.j.S(g.j.H(e),1.570796326794897)&&(b=0);n=g.u.W(n);var B=g.j.S(g.j.H(n),1.570796326794897)?0:Math.cos(n),d=g.j.S(g.j.H(n),3.141592653589793)?0:Math.sin(n),f=g.j.S(g.j.H(e),1.570796326794897)?0:Math.cos(e),h=Math.sin(e);c=k/c;k=g.j.S(g.j.H(c),1.570796326794897)?0:Math.cos(c);var z=g.j.S(g.j.H(c),3.141592653589793)?
0:Math.sin(c),l=Math.asin(h*k+f*z*B);null!=a&&(a.l=l);null!=u&&(u.l=g.j.S(g.j.H(l),1.570796326794897)?g.j.S(e,-l)?0>l?n:g.u.W(3.141592653589793-n):b:g.j.S(g.j.H(e),1.570796326794897)&&g.j.S(c,3.141592653589793)?0>e?n:g.u.W(3.141592653589793-n):g.u.W(b+Math.atan2(z*d,f*k-h*z*B)))}};return a}();g.zg=a})(w||(w={}));(function(g){var a=function(){function a(){}a.Fb=function(c,b,e,k,n,u,a,d,G){var B=new g.ca(0),I=new g.ca(0),f=[0,0,0],h=[0,0,0],z=[0,0,0],l=new g.ca(0),m=new g.ca(0),p=new g.ca(0),q=new g.ca(0),
r=new g.ca(0);if(null!=a||null!=d||null!=G)if(g.j.Ih(b))g.zg.Fb(c,e,k,n,u,a,d,G);else{n=g.u.W(n);e=g.u.W(e);var v=g.u.W(n-e);if(g.j.S(k,u)&&(g.j.S(e,n)||g.j.S(g.j.H(k),1.570796326794897)))null!=a&&(a.l=0),null!=d&&(d.l=0),null!=G&&(G.l=0);else{if(g.j.S(k,-u)){if(g.j.S(g.j.H(k),1.570796326794897)){null!=a&&(a.l=2*g.u.gg(c,b));null!=d&&(d.l=0<k?g.u.W(3.141592653589793-g.u.W(n)):g.u.W(n));null!=G&&(G.l=0<k?g.u.W(n):g.u.W(3.141592653589793-g.u.W(n)));return}g.j.S(g.j.H(v),3.141592653589793)&&(null!=a&&
(a.l=2*g.u.gg(c,b)),null!=d&&(d.l=0),null!=G&&(G.l=0))}else if(g.j.S(g.j.H(k),1.570796326794897)||g.j.S(g.j.H(u),1.570796326794897))g.j.S(g.j.H(k),1.570796326794897)?e=n:n=e;var x=0,y;0>v&&(x=1,y=e,e=n,n=y,y=k,k=u,u=y);var v=g.u.sr(b,k),w=g.u.sr(b,u);if(null!=d||null!=G)g.zg.Fb(c,e,v,n,w,null,B,I),B=Math.atan2(Math.sin(B.l)*Math.cos(k-v),Math.cos(B.l)),I=Math.atan2(Math.sin(I.l)*Math.cos(u-w),Math.cos(I.l)),0!=x&&(y=B,B=I,I=y),null!=d&&(d.l=B),null!=G&&(G.l=I);null!=a&&(g.u.wm(b,k,e,p,q,r),f[0]=p.l,
f[1]=q.l,f[2]=r.l,g.u.wm(b,u,n,p,q,r),h[0]=p.l,h[1]=q.l,h[2]=r.l,z[0]=f[1]*h[2]-h[1]*f[2],z[1]=-(f[0]*h[2]-h[0]*f[2]),z[2]=f[0]*h[1]-h[0]*f[1],b=1-g.u.Tk(b,g.u.Dp(b,g.u.Si(b,Math.acos(z[2]/Math.sqrt(z[0]*z[0]+z[1]*z[1]+z[2]*z[2]))))),b*=2-b,d=Math.atan2(-z[1],-z[0]),z=g.u.W(d-1.570796326794897),d=g.u.W(d+1.570796326794897),z=g.j.H(g.u.W(e-z))<=g.j.H(g.u.W(e-d))?z:d,g.zg.Fb(1,z,0,e,v,l,null,null),g.zg.Fb(1,z,0,n,w,m,null,null),3.141592653589793<l.l+m.l&&(z=g.u.W(z+3.141592653589793),g.zg.Fb(1,z,0,
e,v,l,null,null),g.zg.Fb(1,z,0,n,w,m,null,null)),l.l*=g.j.nb(1,k),m.l*=g.j.nb(1,u),l.l=g.u.Si(b,l.l),m.l=g.u.Si(b,m.l),e=g.u.q(c,b,l.l),c=g.u.q(c,b,m.l),a.l=g.j.H(c-e))}}};a.gf=function(c,b,e,k,n,u,a,d){var B=0,I=new g.ca(0),f=new g.ca(0),h=[0,0,0],z=[0,0,0],l=new g.ca(0),m=new g.ca(0),p=new g.ca(0);if(null!=a||null!=d)if(g.j.Ih(b))g.zg.gf(c,e,k,n,u,a,d);else if(g.j.Vc(n))null!=a&&(a.l=e),null!=d&&(d.l=k);else{u=g.u.W(u);0>n&&(n=g.j.H(n),u=g.u.W(u+3.141592653589793));e=g.u.W(e);k=g.u.W(k);1.570796326794897<
g.j.H(k)&&(e=g.u.W(e+3.141592653589793),k=g.j.nb(3.141592653589793,k)-k);g.j.S(g.j.H(k),1.570796326794897)&&(e=0);var q;if(g.j.Vc(k))q=g.j.H(1.570796326794897-g.j.H(u)),q=g.u.Si(b,q),q=1-g.u.Tk(b,g.u.Dp(b,q)),q*=2-q,c=n/g.u.gg(c,q)*1.570796326794897,c=g.u.xn(q,c),c=g.u.sr(q,c),g.zg.gf(1,e,k,c,u,a,I),null!=d&&(B=I.l),null!=d&&(d.l=g.u.Si(b,B));else if(g.j.S(g.j.H(k),1.570796326794897))B=g.u.gg(c,b),I=2*B,c=g.j.nb(1.570796326794897,k),u=0<c?g.u.W(3.141592653589793-u):u,k=B-n,g.j.H(k)<=B?null!=a&&(a.l=
u):(k=Math.floor(n/I),0==g.I.truncate(k%2)?(null!=a&&(a.l=u),k=B-(n-k*I)):(null!=a&&(a.l=g.u.W(u+3.141592653589793)),k=B-((k+1)*I-n))),null!=d&&(d.l=g.u.xn(b,k/B*c));else{q=g.u.sr(b,k);u=Math.atan2(Math.sin(u),Math.cos(u)*Math.cos(k-q));var r=g.I.truncate(g.j.nb(1,q))*(1.570796326794897>=g.j.H(u)?1:-1);u=g.u.W(e+Math.atan(Math.tan(u)*-Math.sin(q)));g.zg.Fb(c,u,0,e,q,null,f,null);q=g.j.H(1.570796326794897-g.j.H(f.l));q=g.u.Si(b,q);q=1-g.u.Tk(b,g.u.Dp(b,q));q*=2-q;g.u.wm(b,0,u,l,m,p);h[0]=l.l;h[1]=
m.l;h[2]=p.l;g.u.wm(b,k,e,l,m,p);z[0]=l.l;z[1]=m.l;z[2]=p.l;k=Math.acos((h[0]*z[0]+h[1]*z[1]+h[2]*z[2])/Math.sqrt(z[0]*z[0]+z[1]*z[1]+z[2]*z[2]));k=g.u.Si(q,k);k=g.u.q(c,q,k)+n*r;n=0<k?f.l:g.u.W(f.l+3.141592653589793);c=g.j.H(k)/g.u.gg(c,q)*1.570796326794897;c=g.u.xn(q,c);c=g.u.sr(q,c);g.zg.gf(1,u,0,c,n,a,I);null!=d&&(B=I.l);null!=d&&(d.l=g.u.Si(b,B))}}};return a}();g.Xj=a})(w||(w={}));(function(g){var a=function(){function a(){}a.Fb=function(c,b,e,k,n,u,a,d,G){var B=0,I=0,f=0;if(null!=a||null!=d||
null!=G)if(g.j.Ih(b))g.zg.Fb(c,e,k,n,u,a,d,G);else{var h=g.u.W(n-e);if(g.j.S(k,u)&&(g.j.Vc(h)||g.j.S(g.j.H(k),1.570796326794897)))null!=a&&(a.l=0),null!=d&&(d.l=0),null!=G&&(G.l=0);else{if(g.j.S(k,-u)){if(g.j.S(g.j.H(k),1.570796326794897)){null!=a&&(a.l=2*g.u.gg(c,b));null!=d&&(d.l=0<k?g.u.W(3.141592653589793-g.u.W(n)):g.u.W(n));null!=G&&(G.l=0<k?g.u.W(n):g.u.W(3.141592653589793-g.u.W(n)));return}g.j.S(g.j.H(h),3.141592653589793)&&(null!=a&&(a.l=2*g.u.gg(c,b)),null!=d&&(d.l=0),null!=G&&(G.l=0))}else{if(g.j.S(g.j.H(k),
1.570796326794897)||g.j.S(g.j.H(u),1.570796326794897)){g.Xj.Fb(c,b,e,k,n,u,a,d,G);return}if(g.j.Vc(h)||g.j.S(g.j.H(h),3.141592653589793)){g.Xj.Fb(c,b,e,k,n,u,a,d,G);return}}var z=1-Math.sqrt(1-b),l=b/(1-b),m=c*(1-z);c=g.u.Dp(b,k);var p=g.u.Dp(b,u);b=1.570796326794897==g.j.H(c)?0:Math.cos(c);var q=Math.sin(c),r=1.570796326794897==g.j.H(p)?0:Math.cos(p),v=Math.sin(p),x=h,y=Math.cos(x),w=Math.sin(x),C=1,t=0,D,E,F,H,Q;do{D=x;E=Math.sqrt(Math.pow(r*w,2)+Math.pow(b*v-q*r*y,2));F=q*v+b*r*y;H=Math.atan2(E,
F);if(0==E){C=0;break}Q=b*r*w/E;B=Math.cos(Math.asin(Q));B*=B;I=F-2*q*v/B;1<g.j.H(I)&&(I=g.j.nb(1,I));f=I*I;x=z/16*B*(4+z*(4-3*B));x=h+(1-x)*z*Q*(H+x*E*(I+x*F*(2*f-1)));y=Math.cos(x);w=Math.sin(x);t++;if(3.141592653589793<g.j.H(x)&&30<t){C=0;break}}while(5E3>=t&&!g.j.S(D,x));if(0!=C)l*=B,z=l*(256+l*(-128+l*(74-47*l)))/1024,null!=a&&(a.l=m*(1+l*(4096+l*(-768+l*(320-175*l)))/16384)*(H-z*E*(I+z/4*(F*(2*f-1)-z/6*I*(4*E*E-3)*(4*f-3))))),null!=d&&(g.j.S(g.j.H(k),1.570796326794897)?d.l=0>k?n:g.u.W(3.141592653589793-
n):d.l=Math.atan2(r*w,b*v-q*r*y)),null!=G&&(g.j.S(g.j.H(u),1.570796326794897)?G.l=0>u?e:g.u.W(3.141592653589793-e):(G.l=Math.atan2(b*w,b*v*y-q*r),G.l=g.u.W(G.l+3.141592653589793)));else{x=g.j.nb(3.141592653589793,h);F=q*v-b*r;H=Math.acos(F);E=Math.sin(H);B=1;t=Q=0;do f=Q,B*=B,y=B*B,Q=z*B*(1+z+z*z),I=z*z*y*(1+2.25*z),C=z*z*z*y*B,y=1-.25*Q+.1875*I-.1953125*C,Q=.25*Q-.25*I+.29296875*C,w=.03125*I-.05859375*C,C*=.00651041666666667,I=F-2*q*v/B,1<g.j.H(I)&&(I=g.j.nb(1,I)),B=Math.acos(I),F=Math.cos(2*B),
D=Math.cos(3*B),Q=g.j.S(k,-u)?g.u.W(3.141592653589793-h)/(3.141592653589793*z*y):g.u.W(x-h)/(z*(y*H+Q*E*I+w*Math.sin(2*H)*F+C*Math.sin(3*H)*D)),w=Q*E/(b*r),x=1.570796326794897<g.j.H(h)?g.j.nb(3.141592653589793,w)-Math.asin(w):Math.asin(w),y=Math.cos(x),E=Math.sqrt(Math.pow(r*w,2)+Math.pow(b*v-q*r*y,2)),H=3.141592653589793-Math.asin(g.j.H(E)),F=Math.cos(H),B=Math.cos(Math.asin(Q)),t++;while(70>=t&&!g.j.S(f,Q));null!=a&&(B*=B,l*=B,y=1+l*(4096+l*(-768+l*(320-175*l)))/16384,g.j.S(k,-u)?a.l=3.141592653589793*
m*y:(I=F-2*q*v/B,B=Math.acos(I),F=Math.cos(2*B),D=Math.cos(3*B),a.l=m*(y*H+l*(-512+l*(128+l*(-60+35*l)))/2048*E*I+l*(-4+5*l)/6144*l*l*Math.sin(2*H)*F+C*Math.sin(3*H)*D+-7.62939453125E-5*l*l*l*l*Math.sin(4*H)*Math.cos(4*B))));null!=d&&(g.j.Vc(k)&&g.j.Vc(u)?(B=Math.sqrt(1-Q*Q),d.l=Math.acos(B),0>h&&(d.l*=-1)):g.j.S(g.j.H(k),1.570796326794897)?d.l=0>k?n:g.u.W(3.141592653589793-n):(a=Q/b,m=Math.sqrt(1-a*a),0>b*v-q*r*Math.cos(x)&&(m*=-1),d.l=Math.atan2(a,m),g.j.S(k,-u)&&g.j.H(g.u.W(e-n))>3.141592653589793*
(1-z*Math.cos(k))&&(0<k&&1.570796326794897>g.j.H(d.l)||0>k&&1.570796326794897<g.j.H(d.l))&&(d.l=g.j.nb(3.141592653589793,d.l)-d.l)));if(null!=G)if(g.j.Vc(k)&&g.j.Vc(u))B=Math.sqrt(1-Q*Q),G.l=Math.acos(B),0<=h&&(G.l*=-1);else if(g.j.S(g.j.H(u),1.570796326794897))G.l=0>u?e:g.u.W(3.141592653589793-e);else if(h=Q/r,a=Math.sqrt(1-h*h),m=Math.sin(x/2),0>Math.sin(p-c)-2*b*v*m*m&&(a*=-1),G.l=Math.atan2(h,a),G.l=g.u.W(G.l+3.141592653589793),g.j.S(k,-u)&&!g.j.Vc(k)&&!g.j.S(g.j.H(k),1.570796326794897)&&g.j.H(g.u.W(e-
n))>3.141592653589793*(1-z*Math.cos(k))&&(null!=d?m=d.l:(a=Q/b,m=Math.sqrt(1-a*a),0>b*v-q*r*Math.cos(x)&&(m*=-1),m=Math.atan2(a,m),g.j.S(k,-u)&&g.j.H(g.u.W(e-n))>3.141592653589793*(1-z*Math.cos(k))&&(0<k&&1.570796326794897>g.j.H(m)||0>k&&1.570796326794897<g.j.H(m))&&(m=g.j.nb(3.141592653589793,m)-m)),1.570796326794897>=g.j.H(m)&&1.570796326794897<g.j.H(G.l)||1.570796326794897<=g.j.H(m)&&1.570796326794897>g.j.H(G.l)))G.l=-1*g.u.W(G.l+3.141592653589793)}}}};a.gf=function(c,b,e,k,n,u,a,d){if(null!=a||
null!=d)if(g.j.Ih(b))g.zg.gf(c,e,k,n,u,a,d);else if(u=g.u.W(u),g.j.S(g.j.H(k),1.570796326794897)||g.j.Vc(u)||g.j.S(g.j.H(u),3.141592653589793))g.Xj.gf(c,b,e,k,n,u,a,d);else{var B=1.570796326794897==g.j.H(u)?0:Math.cos(u),I=3.141592653589793==g.j.H(u)?0:Math.sin(u);g.j.S(g.j.H(k),1.570796326794897)&&(e=0);u=1-Math.sqrt(1-b);var f=g.u.Dp(b,k);k=1.570796326794897==g.j.H(f)?0:Math.cos(f);var h=Math.sin(f),f=Math.atan2(Math.tan(f),B),z=k*I,l=z*z,m=1-l,p=b/(1-b)*m;b=p*(256+p*(-128+p*(74-47*p)))/1024;var q=
b/4,r=b/6,v=n/(c*(1-u)*(1+p*(4096+p*(-768+p*(320-175*p)))/16384)),x=v,y;do{y=x;n=1.570796326794897==g.j.H(x)?0:Math.cos(x);var p=3.141592653589793==g.j.H(x)?0:Math.sin(x),w=p*p;c=Math.cos(2*f+x);x=c*c;x=b*p*(c+q*(n*(2*x-1)-r*c*(4*w-3)*(4*x-3)))+v}while(!g.j.S(y,x));n=1.570796326794897==g.j.H(x)?0:Math.cos(x);p=3.141592653589793==g.j.H(x)?0:Math.sin(x);null!=a&&(I=Math.atan2(p*I,k*n-h*p*B),m=u/16*m*(4+u*(4-3*m)),c=Math.cos(2*f+x),a.l=g.u.W(e+(I-(1-m)*u*z*(x+m*p*(c+m*n*(2*c*c-1))))));null!=d&&(m=h*
p-k*n*B,m=(1-u)*Math.sqrt(l+m*m),d.l=Math.atan2(h*n+k*p*B,m))}};return a}();g.cs=a})(w||(w={}));(function(g){var a=function(){function a(){}a.Fb=function(c,b,e,k,n,u,a,d,G){var B=g.u.W(n-e),I=g.j.S(g.j.H(k),1.570796326794897),f=g.j.S(g.j.H(u),1.570796326794897);if(g.j.S(k,u)&&(g.j.Vc(B)||I))null!=a&&(a.l=0),null!=d&&(d.l=0),null!=G&&(G.l=0);else{var h,z;g.j.Ih(b)?(h=Math.sin(k),z=Math.sin(u),h=Math.sqrt((1+h)/(1-h)),z=Math.sqrt((1+z)/(1-z)),h=Math.log(z)-Math.log(h),h=Math.atan2(B,h),null!=a&&(a.l=
g.j.S(k,u)?g.j.H(c*Math.cos(k)*B):g.j.H((c*u-c*k)/Math.cos(h)))):(z=g.u.qu(b,u),h=Math.sin(g.u.qu(b,k)),z=Math.sin(z),h=Math.sqrt((1+h)/(1-h)),z=Math.sqrt((1+z)/(1-z)),h=Math.log(z)-Math.log(h),h=Math.atan2(B,h),null!=a&&(g.j.S(k,u)?a.l=g.j.H(c*B*Math.cos(k)/g.u.Tk(b,k)):(B=g.u.q(c,b,k),c=g.u.q(c,b,u),a.l=g.j.H((c-B)/Math.cos(h)))));if(null!=d||null!=G)a=g.u.W(h+3.141592653589793),I&&f||!I&&!f||(I?h=0>k?n:g.u.W(3.141592653589793-n):f&&(a=0>u?e:g.u.W(3.141592653589793-e))),null!=d&&(d.l=h),null!=G&&
(G.l=a)}};a.gf=function(c,b,e,k,n,u,a,d){u=g.u.W(u);0>n&&(n=g.j.H(n),u=g.u.W(u+3.141592653589793));g.j.Ih(b)?g.j.S(g.j.H(k),1.570796326794897)?(e=0>k?u:g.u.W(3.141592653589793-u),u=n/c%6.283185307179586,3.141592653589793>=u?c=k-g.j.nb(u,k):(e=g.u.W(e+3.141592653589793),c=-k+g.j.nb(u-3.141592653589793,k))):g.j.S(g.j.H(u),1.570796326794897)?(e=g.u.W(e+g.j.nb(n,u)/(c*Math.cos(k))),c=k):(c=k+n*Math.cos(u)/c,1.570796326794897<g.j.H(c)&&(c=1.570796326794897),g.j.S(g.j.H(c),1.570796326794897)&&(g.j.Vc(u)||
g.j.S(g.j.H(u),3.141592653589793))||(1.570796316258184<g.j.H(c)&&(c=g.j.nb(1.570796316258184,c)),b=Math.sin(k),k=Math.sin(c),b=Math.sqrt((1+b)/(1-b)),k=Math.sqrt((1+k)/(1-k)),b=Math.log(k)-Math.log(b),e=g.u.W(e+Math.tan(u)*b))):g.j.S(g.j.H(k),1.570796326794897)?(e=0>k?u:g.u.W(3.141592653589793-u),u=n/g.u.nR(c,b),u%=6.283185307179586,3.141592653589793>=u?(c=k-g.j.nb(u,k),c=g.u.xn(b,c)):(e=g.u.W(e+3.141592653589793),c=-k+g.j.nb(u-3.141592653589793,k),c=g.u.xn(b,c))):g.j.S(g.j.H(u),1.570796326794897)?
(e=g.u.W(e+g.j.nb(n,u)*g.u.Tk(b,k)/(c*Math.cos(k))),c=k):(c=1.570796326794897*(n*Math.cos(u)+g.u.q(c,b,k))/g.u.gg(c,b),1.570796326794897<g.j.H(c)&&(c=g.j.nb(1.570796326794897,c)),c=g.u.xn(b,c),g.j.S(g.j.H(c),1.570796326794897)&&(g.j.Vc(u)||g.j.S(g.j.H(u),3.141592653589793))||(n=g.u.qu(b,k),k=g.u.qu(b,c),1.570796316258184<g.j.H(k)&&(k=g.j.nb(1.570796316258184,c),c=g.u.$K(b,k)),b=Math.sin(n),k=Math.sin(k),b=Math.sqrt((1+b)/(1-b)),k=Math.sqrt((1+k)/(1-k)),b=Math.log(k)-Math.log(b),e=g.u.W(e+Math.tan(u)*
b)));null!=a&&(a.l=e);null!=d&&(d.l=c)};return a}();g.Zz=a})(w||(w={}));(function(g){var a=function(){function a(){}a.gw=function(c,b,e,k,n,u,a){g.cs.Fb(c,b,e,k,n,u,null,a,null)};a.Ph=function(c,b,e,k,n,u,a,d){g.cs.gf(c,b,e,k,n,u,a,d)};a.Rd=function(c,b,e,k,n,u,a,d,G,f){switch(f){case 2:g.Xj.Fb(c,b,e,k,n,u,a,d,G);break;case 3:g.$z.Fb(c,b,e,k,n,u,a,d,G);break;case 1:g.Zz.Fb(c,b,e,k,n,u,a,d,G);break;default:g.cs.Fb(c,b,e,k,n,u,a,d,G)}};a.dk=function(c,b,e,k,n,u,a,d,G){switch(G){case 2:g.Xj.gf(c,b,e,
k,n,u,a,d);break;case 3:g.$z.gf(c,b,e,k,n,u,a,d);break;case 1:g.Zz.gf(c,b,e,k,n,u,a,d);break;default:g.cs.gf(c,b,e,k,n,u,a,d)}};return a}();g.zb=a})(w||(w={}));(function(g){var a=function(){function a(){}a.QS=function(c,b){var e=8;0>e&&(e=8);var k=[0,0,0,0],n=new g.b;n.J(b);n.scale(9102==g.Ya.Em(c).Se().Qc()?1:g.Ya.Em(c).Se().Dj/3.141592653589793*180);-180>n.x?(n.x-=n.x%360,-180>n.x&&(n.x+=360)):180<n.x&&(n.x-=n.x%360,180<n.x&&(n.x-=360));90<n.y&&(n.y=90);-90>n.y&&(n.y=-90);c=5*e;b=(c+31)/32;for(var u=
-180,B=180,d=c-1,G=b-1;0<=G;G--)for(var f=d-32*G,h=Math.min(32,c-32*G),z=1;z<h;z+=2){var l=.5*(B+u);n.x>=l?(k[G]|=1<<f,u=l):B=l;f-=2;d-=2}u=-90;B=90;d=c-2;for(G=b-1;0<=G;G--)for(f=d-32*G,h=Math.min(32,c-32*G),z=0;z<h;z+=2)l=.5*(B+u),n.y>=l?(k[G]|=1<<f,u=l):B=l,f-=2,d-=2;return a.XS(k,e,e)};a.XS=function(c,b,e){for(var k=[],n=0;n<b;n++)k[n]="";for(var g=n=0,a=0;a<b;a++){var d=c[n]>>g&31,g=g+5;if(31<g){var G=37-g,d=d&(1<<G)-1,g=g-32;n++;d|=(c[n]&(1<<g)-1)<<G}k[b-1-a]="0123456789bcdefghjkmnpqrstuvwxyz".split("")[d]}if(e>
b)for(a=0;a<e-b;a++)k.push("0");else e<b&&(k.length=e);return k.join("")};return a}();g.qH=a})(w||(w={}));(function(g){var a={gcstol:[0,1E-8,1,1.11111E-8,2,1.68845E-8,3,2.17661E-8,4,2.22508E-8,5,2.34848E-8,6,2.37811E-8,7,2.88455E-8,8,3.1456E-8,9,3.29779E-8,10,3.66789E-8,11,4.23597E-8,12,4.79463E-8,13,6.45223E-8,14,7.26274E-8,15,7.49945E-8,16,7.52506E-8,17,7.97991E-8,18,9.66202E-8,19,9.79918E-8,20,9.89735E-8,21,1.02314E-7,22,1.08146E-7,23,2.29734E-7,24,2.42985E-7,25,2.7546E-7,26,3.37034E-7,27,4.30795E-7,
28,5.20871E-7,29,5.50921E-7,30,6.74068E-7,31,6.86177E-7,32,7.25263E-7,33,7.44101E-7,34,7.74267E-7,35,9.62954E-7,36,1.06103E-6,37,1.14363E-6,38,1.16219E-6,39,1.36419E-6,40,1.36744E-6,41,1.43239E-6,42,1.73624E-6,43,1.84825E-6,44,1.90986E-6,45,1.97572E-6,46,2.12207E-6,47,2.72837E-6,48,3.1831E-6,49,3.58099E-6,50,3.81972E-6,51,4.09256E-6,52,4.40737E-6,53,4.77465E-6,54,5.16178E-6,55,5.20871E-6,56,5.72958E-6,57,6.03113E-6,58,6.98729E-6,59,9.24125E-6,60,1.14592E-5],pcstol:[0,6.66667E-9,1,2E-8,2,4.97098E-5,
3,.001,4,.00109362,5,.00328087,6,.00497101],newtoold:[2154,102110,2195,102200,2204,32036,2205,26979,2225,102641,2226,102642,2227,102643,2228,102644,2229,102645,2230,102646,2231,102653,2232,102654,2233,102655,2234,102656,2235,102657,2236,102658,2237,102659,2238,102660,2239,102666,2240,102667,2241,102668,2242,102669,2243,102670,2246,102679,2247,102680,2248,102685,2249,102686,2250,102687,2254,102694,2255,102695,2257,102712,2258,102713,2259,102714,2260,102715,2261,102716,2262,102717,2263,102718,2264,
102719,2267,102724,2268,102725,2271,102728,2272,102729,2274,102736,2275,102737,2276,102738,2277,102739,2278,102740,2279,102741,2283,102746,2284,102747,2285,102748,2286,102749,2287,102752,2288,102753,2289,102754,2312,23433,2326,102140,2395,2091,2396,2092,2397,2166,2398,2167,2399,2168,2759,102229,2760,102230,2761,102248,2762,102249,2763,102250,2764,102251,2765,102252,2766,102241,2767,102242,2768,102243,2769,102244,2770,102245,2771,102246,2772,102253,2773,102254,2774,102255,2775,102256,2776,102257,2777,
102258,2778,102259,2779,102260,2780,102266,2781,102267,2782,102261,2783,102262,2784,102263,2785,102264,2786,102265,2787,102268,2788,102269,2789,102270,2790,102271,2791,102272,2792,102273,2793,102274,2794,102275,2795,102276,2796,102277,2797,102278,2798,102279,2799,102280,2800,102281,2801,102282,2802,102283,2803,102284,2804,102285,2805,102286,2806,102287,2807,102288,2808,102289,2809,102290,2810,102291,2811,102292,2812,102293,2813,102294,2814,102295,2815,102296,2816,102297,2817,102298,2818,102300,2819,
102304,2820,102307,2821,102308,2822,102309,2823,102310,2824,102311,2825,102312,2826,102313,2827,102314,2828,102315,2829,102316,2830,102317,2831,102318,2832,102320,2833,102321,2834,102322,2835,102323,2836,102324,2837,102325,2838,102326,2839,102327,2840,102330,2841,102334,2842,102335,2843,102336,2844,102337,2845,102338,2846,102339,2847,102340,2848,102341,2849,102342,2850,102343,2851,102344,2852,102345,2853,102346,2854,102347,2855,102348,2856,102349,2857,102350,2858,102351,2859,102352,2860,102353,2861,
102354,2862,102355,2863,102356,2864,102357,2865,102358,2866,102361,2942,102167,2943,102169,2944,2139,2945,2140,2946,2141,2947,2142,2948,2143,2949,2144,2950,2145,2951,2146,2952,2147,2953,2036,2954,2291,2955,2153,2956,2152,2957,2151,2958,2150,2959,2149,2960,2037,2961,2038,2962,2148,2965,2244,2966,2245,3003,102091,3004,102092,3005,102190,3060,2982,3067,102139,3072,102606,3074,102608,3075,102208,3077,102210,3078,102123,3080,102119,3081,102603,3082,102602,3083,102601,3088,65163,3089,102763,3090,102363,
3092,102151,3093,102152,3094,102153,3095,102154,3096,102155,3097,102145,3098,102146,3099,102147,3100,102148,3101,102149,3102,2155,3107,102172,3110,102170,3111,102171,3119,2214,3158,102234,3159,102235,3160,102236,3336,2979,3338,102006,3346,2600,3370,102126,3371,102127,3372,102130,3373,102131,3400,102184,3401,102185,3404,3359,3407,3366,3417,102675,3418,102676,3419,102677,3420,102678,3421,102707,3422,102708,3423,102709,3424,102711,3433,102651,3434,102652,3435,102671,3436,102672,3437,102710,3438,102730,
3448,102095,3451,102681,3452,102682,3455,102735,3461,2063,3462,2064,3463,3073,3464,3076,3560,102742,3566,102743,3567,102744,3734,102722,3735,102723,3736,102755,3737,102756,3738,102757,3739,102758,3741,102205,3742,102206,3743,102207,3748,102211,3750,102202,3751,102203,3759,102663,3760,102463,3764,102112,3770,102090,3771,102180,3772,102181,3773,102182,3775,102186,3776,102187,3777,102188,3800,102183,3801,102189,3812,102199,3814,102609,3815,102469,3819,104990,3821,104136,3824,104137,3825,102444,3826,
102443,3827,102442,3828,102441,3857,102100,3889,104991,3906,104992,4048,103201,4049,103202,4050,103203,4051,103204,4056,103205,4057,103206,4058,103207,4059,103208,4060,103209,4061,103210,4062,103211,4063,103212,4071,103213,4082,103214,4083,103215,4093,103216,4094,103217,4095,103218,4096,103219,4167,104108,4169,37252,4171,104107,4189,104110,4197,4234,4223,37223,4304,104304,4414,102201,4415,102762,4417,102764,4434,102765,4437,102647,4455,32029,4456,32018,4457,3454,4462,102439,4463,4466,4470,4469,4484,
103794,4485,103795,4486,103796,4487,103797,4488,103798,4489,103799,4611,104104,4612,104111,4613,37255,4615,37247,4616,37250,4617,4140,4618,4291,4620,37211,4626,37235,4647,102362,4658,37204,4668,37201,4669,4126,4672,37217,4673,104125,4675,37220,4684,37232,4698,4631,4707,37213,4708,37231,4709,37212,4710,37238,4711,37214,4712,37237,4713,37208,4714,37215,4715,37253,4716,37216,4717,37239,4719,37219,4722,37242,4724,37233,4725,37222,4727,37224,4728,37246,4729,37226,4730,37227,4731,37228,4732,37229,4733,
37230,4734,37251,4735,37259,4736,37254,4739,37205,4758,104133,4760,37001,4762,104114,4826,102214,5013,104142,5014,102331,5015,102332,5016,102333,5173,102085,5174,102086,5175,102087,5176,102088,5177,102089,5178,102040,5179,102080,5185,102081,5186,102082,5187,102083,5188,102084,5221,102066,5246,104100,5247,102490,5324,104144,5325,102420,5329,2934,5365,104143,5367,102305,5451,104132,5513,102065,5514,102067,5519,102111,5520,31461,5646,102745,5839,5388,5858,5532,5879,4474,21896,21891,21897,21892,21898,
21893,21899,21894,26701,102124,26702,102125,26799,26747,26847,102683,26848,102684,26849,102691,26850,102692,26851,102693,26852,102704,26853,102750,26854,102751,26857,102466,26858,102467,26859,102468,26901,102128,26902,102129,27493,27492,29101,29100,29168,29118,29169,29119,29170,29120,29171,29121,29172,29122,29187,29177,29188,29178,29189,29179,29190,29180,29191,29181,29192,29182,29193,29183,29194,29184,29195,29185,29902,29900,31279,31278,31281,31291,31282,31292,31283,31293,31284,31294,31285,31295,
31286,31296,31287,31297,31466,31462,31467,31463,31468,31464,31469,31465,31986,31917,31987,31918,31988,31919,31989,31920,31990,31921,31991,31922,32064,32074,32065,32075,32066,32076,32067,32077],pcsid:[2066,6,2136,5,2155,5,2157,3,2158,3,2159,5,2160,5,2219,3,2220,3,2244,5,2245,5,2256,5,2265,5,2266,5,2269,5,2270,5,2273,5,2290,3,2291,3,2294,3,2295,3,2313,3,2314,5,2964,5,2967,5,2968,5,2991,3,2992,5,2993,3,2994,5,3073,3,3076,3,3079,3,3091,5,3106,3,3108,3,3109,3,3141,3,3142,3,3167,2,3337,3,3347,3,3348,3,
3359,5,3360,3,3361,5,3362,3,3363,5,3364,3,3365,5,3366,5,3402,3,3403,3,3405,3,3406,3,3439,3,3440,3,3447,3,3449,3,3450,3,3453,5,3454,5,3460,3,3479,5,3480,3,3481,5,3482,3,3483,5,3484,3,3485,5,3486,3,3487,5,3488,3,3489,3,3490,5,3491,3,3492,5,3493,3,3494,5,3495,3,3496,5,3497,3,3498,5,3499,3,3500,5,3501,3,3502,5,3503,3,3504,5,3505,3,3506,5,3507,3,3508,5,3509,3,3510,5,3511,3,3512,5,3513,3,3514,3,3515,5,3516,3,3517,5,3518,3,3519,5,3520,3,3521,5,3522,3,3523,5,3524,3,3525,5,3526,3,3527,5,3528,3,3529,5,3530,
3,3531,5,3532,3,3533,5,3534,3,3535,5,3536,3,3537,5,3538,3,3539,5,3540,3,3541,5,3542,3,3543,5,3544,3,3545,5,3546,3,3547,5,3548,3,3549,5,3550,3,3551,5,3552,3,3553,5,3582,5,3583,3,3584,5,3585,3,3586,5,3587,3,3588,5,3589,3,3590,5,3591,3,3592,3,3593,5,3598,5,3599,3,3600,5,3605,5,3606,3,3607,3,3608,5,3609,3,3610,5,3611,3,3612,5,3613,3,3614,5,3615,3,3616,5,3617,3,3618,5,3619,3,3620,5,3621,3,3622,5,3623,3,3624,5,3625,3,3626,5,3627,3,3628,5,3629,3,3630,5,3631,3,3632,5,3633,3,3634,5,3635,3,3636,5,3640,5,3641,
3,3642,5,3643,3,3644,5,3645,3,3646,5,3647,3,3648,5,3649,3,3650,5,3651,3,3652,5,3653,3,3654,5,3655,3,3656,5,3657,3,3658,5,3659,3,3660,5,3661,3,3662,5,3663,3,3664,5,3668,5,3669,3,3670,5,3671,3,3672,5,3673,3,3674,5,3675,3,3676,5,3677,5,3678,3,3679,5,3680,5,3681,3,3682,5,3683,5,3684,3,3685,3,3686,5,3687,3,3688,5,3689,3,3690,5,3691,3,3692,5,3696,5,3697,3,3698,5,3699,3,3700,5,3740,3,3749,3,3783,3,3784,3,3793,3,3794,3,3802,3,3816,3,3829,3,3854,3,3920,3,3978,3,3979,3,3991,5,3992,5,4026,3,4037,3,4038,3,4217,
5,4438,5,4439,5,4467,3,4471,3,4474,3,4559,3,4839,3,5018,3,5048,3,5167,3,5168,3,5223,3,5234,3,5235,3,5243,3,5266,3,5316,3,5320,3,5321,3,5330,3,5331,3,5337,3,5361,3,5362,3,5382,3,5383,3,5396,3,5456,3,5457,3,5469,3,5472,4,5490,3,5518,3,5523,3,5559,3,5588,5,5589,5,5596,3,5627,3,5629,3,5641,3,5643,3,5644,3,5654,5,5655,5,5659,3,5700,3,5825,3,5836,3,5837,3,5842,3,5844,3,5880,3,5887,3,5890,3,20499,3,20538,3,20539,3,20790,3,20791,3,21291,3,21292,3,21500,3,21817,3,21818,3,22032,3,22033,3,22091,3,22092,3,22332,
3,22391,3,22392,3,22700,3,22770,3,22780,3,22832,3,23090,3,23095,3,23239,3,23240,3,23433,3,23700,3,24047,3,24048,3,24100,5,24200,3,24305,3,24306,3,24382,4,24383,3,24500,3,24547,3,24548,3,24571,2,24600,3,25E3,3,25231,3,25884,3,25932,3,26237,3,26331,3,26332,3,26591,3,26592,3,26632,3,26692,3,26855,5,26856,5,27120,3,27200,3,27291,4,27292,4,27429,3,27492,3,27500,3,27700,3,28232,3,28600,3,28991,3,28992,3,29100,3,29220,3,29221,3,29333,3,29635,3,29636,3,29701,3,29738,3,29739,3,29849,3,29850,3,29871,2,29872,
5,29873,3,29900,3,29901,3,29903,3,30200,6,30339,3,30340,3,30591,3,30592,3,30791,3,30792,3,31028,3,31121,3,31154,3,31170,3,31171,3,31370,3,31528,3,31529,3,31600,3,31700,3,31838,3,31839,3,31901,3,32061,3,32062,3,32098,3,32099,5,32100,3,32104,3,32161,3,32766,3,53034,3,53048,3,53049,3,54034,3,65061,5,65062,5,65161,3,65163,3,102041,5,102064,4,102068,1,102069,0,102217,5,102218,3,102219,5,102220,5,102378,5,102379,5,102380,3,102381,5,102589,5,102599,5,102600,5,102604,5,102605,3,102606,3,102647,3,102704,5,
102705,5,102733,5,102761,5,102762,3,102763,5,102764,3,102765,3,102766,5,102970,5,102974,5,102993,3,102994,3,102995,5,102996,5,103015,3,103016,5,103017,3,103018,5,103025,3,103026,3,103027,5,103028,5,103035,3,103036,3,103037,5,103038,5,103039,3,103040,3,103041,5,103042,5,103043,3,103044,3,103045,5,103046,5,103047,3,103048,3,103049,5,103050,5,103051,3,103052,5,103053,3,103054,5,103055,3,103056,5,103057,3,103058,3,103059,5,103060,5,103061,3,103062,3,103063,5,103064,5,103069,5,103070,3,103071,3,103072,
5,103073,5,103086,3,103087,3,103088,5,103089,5,103094,5,103095,3,103096,5,103103,3,103104,5,103105,3,103106,5,103121,3,103122,5,103123,3,103124,3,103125,5,103126,5,103127,3,103128,3,103129,5,103130,5,103131,3,103132,3,103133,5,103134,5,103135,3,103136,3,103137,5,103138,5,103139,3,103140,5,103141,3,103142,5,103143,3,103144,5,103145,3,103146,5,103147,3,103148,3,103149,5,103150,5,103151,3,103152,5,103172,3,103173,5,103174,3,103175,3,103176,5,103177,5,103178,3,103179,3,103180,5,103181,5,103182,3,103183,
3,103184,5,103185,5,103228,3,103229,3,103230,5,103231,5,103250,3,103251,5,103252,3,103253,5,103260,3,103261,3,103262,5,103263,5,103270,3,103271,3,103272,5,103273,5,103274,3,103275,3,103276,5,103277,5,103278,3,103279,3,103280,5,103281,5,103282,3,103283,3,103284,5,103285,5,103286,3,103287,5,103288,3,103289,5,103290,3,103291,5,103292,3,103293,3,103294,5,103295,5,103296,3,103297,3,103298,5,103299,5,103376,5,103377,3,103378,3,103379,5,103380,5,103393,3,103394,3,103395,5,103396,5,103472,3,103473,5,103474,
3,103475,5,103482,3,103483,5,103484,3,103485,5,103500,3,103501,5,103502,3,103503,3,103504,5,103505,5,103506,3,103507,3,103508,5,103509,5,103510,3,103511,3,103512,5,103513,5,103514,3,103515,5,103516,3,103517,5,103518,3,103519,5,103520,3,103521,5,103522,3,103523,3,103524,5,103525,5,103526,3,103527,5,103561,5,103562,5,103563,3,103564,3,103565,5,103566,5,103567,3,103568,3,103569,5,103570,5,103585,5,103695,5],pcsidc:[[2E3,2045,3],[2056,2065,3],[2067,2135,3],[2137,2153,3],[2161,2170,3],[2172,2193,3],[2196,
2198,3],[2200,2203,3],[2206,2217,3],[2222,2224,5],[2251,2253,5],[2280,2282,5],[2308,2311,3],[2315,2325,3],[2327,2394,3],[2400,2462,3],[2523,2576,3],[2578,2693,3],[2695,2758,3],[2867,2888,5],[2891,2930,5],[2931,2941,3],[2969,2973,3],[2975,2982,3],[2984,2988,3],[2995,3002,3],[3006,3051,3],[3054,3059,3],[3061,3066,3],[3068,3071,3],[3084,3087,3],[3112,3118,3],[3120,3138,3],[3146,3151,3],[3153,3157,3],[3161,3166,3],[3168,3172,3],[3174,3203,3],[3294,3313,3],[3315,3335,3],[3339,3345,3],[3350,3358,3],[3367,
3369,3],[3374,3399,3],[3408,3416,3],[3425,3432,5],[3441,3446,5],[3456,3459,5],[3465,3478,3],[3554,3559,3],[3561,3565,5],[3568,3570,5],[3571,3581,3],[3594,3597,3],[3601,3604,3],[3637,3639,3],[3665,3667,3],[3693,3695,3],[3701,3727,3],[3728,3733,5],[3744,3747,3],[3753,3758,5],[3761,3763,3],[3765,3769,3],[3779,3781,3],[3788,3791,3],[3797,3799,3],[3832,3841,3],[3844,3852,3],[3873,3885,3],[3890,3893,3],[3907,3912,3],[3942,3950,3],[3968,3970,3],[3973,3976,3],[3986,3989,3],[3994,3997,3],[4399,4413,5],[4418,
4433,5],[4491,4554,3],[5069,5072,3],[5105,5130,3],[5180,5184,3],[5253,5259,3],[5269,5275,3],[5292,5311,3],[5343,5349,3],[5355,5357,3],[5387,5389,3],[5459,5463,3],[5479,5482,3],[5530,5539,3],[5550,5552,3],[5562,5583,3],[5623,5625,5],[5631,5639,3],[5649,5653,3],[5663,5680,3],[5682,5685,3],[5875,5877,3],[20002,20032,3],[20062,20092,3],[20135,20138,3],[20248,20258,3],[20348,20358,3],[20436,20440,3],[20822,20824,3],[20934,20936,3],[21035,21037,3],[21095,21097,3],[21148,21150,3],[21413,21423,3],[21473,
21483,3],[21780,21782,3],[21891,21894,3],[22171,22177,3],[22181,22187,3],[22191,22197,3],[22234,22236,3],[22521,22525,3],[22991,22994,3],[23028,23038,3],[23830,23853,3],[23866,23872,3],[23877,23884,3],[23886,23894,3],[23946,23948,3],[24311,24313,3],[24342,24347,3],[24370,24374,4],[24375,24381,3],[24718,24721,3],[24817,24821,3],[24877,24882,3],[24891,24893,3],[25391,25395,3],[25828,25838,3],[26191,26195,3],[26391,26393,3],[26703,26722,3],[26729,26760,5],[26766,26798,5],[26860,26870,5],[26891,26899,
3],[26903,26923,3],[26929,26946,3],[26948,26998,3],[27037,27040,3],[27205,27232,3],[27258,27260,3],[27391,27398,3],[27561,27564,3],[27571,27574,3],[27581,27584,3],[27591,27594,3],[28191,28193,3],[28348,28358,3],[28402,28432,3],[28462,28492,3],[29118,29122,3],[29177,29185,3],[30161,30179,3],[30491,30494,3],[30729,30732,3],[31251,31259,3],[31265,31268,3],[31275,31278,3],[31288,31297,3],[31461,31465,3],[31491,31495,3],[31917,31922,3],[31965,31985,3],[31992,32E3,3],[32001,32003,5],[32005,32031,5],[32033,
32060,5],[32074,32077,5],[32081,32086,3],[32107,32130,3],[32133,32158,3],[32164,32167,5],[32180,32199,3],[32201,32260,3],[32301,32360,3],[32601,32662,3],[32664,32667,5],[32701,32761,3],[53001,53004,3],[53008,53019,3],[53021,53032,3],[53042,53046,3],[54001,54004,3],[54008,54019,3],[54021,54032,3],[54042,54046,3],[54048,54053,3],[102001,102040,3],[102042,102063,3],[102065,102067,3],[102070,102112,3],[102114,102117,3],[102118,102121,5],[102122,102208,3],[102210,102216,3],[102221,102300,3],[102304,102377,
3],[102382,102388,3],[102389,102391,5],[102401,102444,3],[102450,102452,3],[102461,102468,5],[102469,102492,3],[102500,102519,5],[102530,102549,3],[102570,102588,3],[102590,102598,3],[102601,102603,3],[102608,102628,3],[102629,102646,5],[102648,102672,5],[102675,102700,5],[102701,102703,3],[102707,102730,5],[102735,102758,5],[102767,102798,3],[102962,102969,3],[102971,102973,3],[102975,102989,3],[102990,102992,5],[102997,103002,3],[103003,103008,5],[103009,103011,3],[103012,103014,5],[103019,103021,
3],[103022,103024,5],[103029,103031,3],[103032,103034,5],[103065,103068,3],[103074,103076,3],[103077,103079,5],[103080,103082,3],[103083,103085,5],[103090,103093,3],[103097,103099,3],[103100,103102,5],[103107,103109,3],[103110,103112,5],[103113,103116,3],[103117,103120,5],[103153,103157,3],[103158,103162,5],[103163,103165,3],[103166,103171,5],[103186,103188,3],[103189,103191,5],[103192,103195,3],[103196,103199,5],[103200,103224,3],[103225,103227,5],[103232,103237,3],[103238,103243,5],[103244,103246,
3],[103247,103249,5],[103254,103256,3],[103257,103259,5],[103264,103266,3],[103267,103269,5],[103300,103375,3],[103381,103383,3],[103384,103386,5],[103387,103389,3],[103390,103392,5],[103397,103399,3],[103400,103471,5],[103476,103478,3],[103479,103481,5],[103486,103488,3],[103489,103491,5],[103492,103495,3],[103496,103499,5],[103539,103543,3],[103544,103548,5],[103549,103551,3],[103552,103557,5],[103558,103560,3],[103571,103573,3],[103574,103576,5],[103577,103580,3],[103581,103583,5],[103600,103694,
3],[103700,103793,5],[103794,103799,3]],gcsid:[4042,0,4075,0,4081,0,4168,0,4170,0,4188,0,4261,1,4262,0,4263,0,4288,0,4289,0,4305,1,4322,0,4324,0,4326,0,4466,0,4469,0,4475,0,4483,0,4490,0,4555,0,4558,0,4614,0,4619,0,4657,0,4670,0,4671,0,4674,0,4682,0,4683,0,4718,0,4720,0,4721,0,4723,0,4726,0,4737,0,4738,0,4759,0,4761,0,4807,1,4808,0,4809,0,4816,1,4817,0,4818,0,4819,1,4820,0,4821,1,4823,0,4824,0,4901,1,4902,1,4903,0,4904,0,5228,0,5229,0,5233,0,5252,0,5264,0,5340,0,5354,0,5360,0,5371,0,5373,0,5381,0,
5393,0,5464,0,5467,0,5489,0,5524,0,5527,0,5546,0,5561,0,5593,0,5681,0,5886,0,37225,1,37235,0,37257,0,37259,0,37260,0,104020,0,104139,1,104140,1,104223,0,104286,0,104287,0,104304,0,104305,0,104896,0,104900,5,104901,0,104902,0,104903,9,104904,2,104905,2,104906,59,104907,54,104908,0,104909,58,104910,31,104911,56,104912,6,104913,50,104914,41,104915,10,104916,3,104917,30,104918,8,104919,60,104920,53,104921,44,104922,48,104923,51,104924,38,104925,0,104926,49,104927,57,104928,21,104929,23,104930,35,104931,
49,104932,27,104933,17,104934,13,104935,7,104936,56,104937,40,104938,28,104939,37,104940,15,104941,55,104942,22,104943,4,104944,0,104945,20,104946,42,104947,47,104948,52,104949,43,104950,46,104951,39,104952,24,104953,16,104954,50,104955,36,104956,33,104957,46,104958,14,104959,19,104960,0,104961,34,104962,32,104963,29,104964,45,104965,26,104966,25,104967,41,104968,11,104969,12,104970,18],gcsidc:[[4001,4016,0],[4018,4025,0],[4027,4029,0],[4031,4036,0],[4044,4047,0],[4052,4054,0],[4120,4166,0],[4172,
4176,0],[4178,4185,0],[4190,4196,0],[4198,4216,0],[4218,4222,0],[4224,4232,0],[4234,4260,0],[4265,4267,0],[4269,4286,0],[4291,4303,0],[4306,4319,0],[4600,4610,0],[4621,4625,0],[4627,4633,0],[4636,4639,0],[4641,4646,0],[4659,4667,0],[4676,4680,0],[4686,4697,0],[4699,4706,0],[4740,4757,0],[4763,4765,0],[4801,4806,0],[4810,4812,1],[4813,4815,0],[37001,37008,0],[37201,37208,0],[37211,37224,0],[37226,37233,0],[37237,37243,0],[37245,37247,0],[37249,37255,0],[104100,104138,0],[104141,104145,0],[104256,104261,
0],[104700,104786,0],[104990,104992,0]]},d={c:[[2E3,2045,9001],[2056,2065,9001],[2067,2135,9001],[2137,2153,9001],[2161,2170,9001],[2172,2193,9001],[2196,2198,9001],[2200,2203,9001],[2206,2217,9001],[2222,2224,9002],[2251,2253,9002],[2280,2282,9002],[2308,2311,9001],[2315,2325,9001],[2327,2394,9001],[2400,2462,9001],[2523,2576,9001],[2578,2693,9001],[2695,2758,9001],[2867,2869,9002],[2870,2888,9003],[2891,2895,9003],[2896,2898,9002],[2902,2908,9003],[2915,2920,9003],[2921,2923,9002],[2924,2930,9003],
[2931,2941,9001],[2969,2973,9001],[2975,2982,9001],[2984,2988,9001],[2995,3002,9001],[3006,3051,9001],[3054,3059,9001],[3061,3066,9001],[3068,3071,9001],[3084,3087,9001],[3112,3118,9001],[3120,3138,9001],[3146,3151,9001],[3153,3157,9001],[3161,3166,9001],[3168,3172,9001],[3174,3203,9001],[3294,3313,9001],[3315,3335,9001],[3339,3345,9001],[3350,3358,9001],[3367,3369,9001],[3374,3399,9001],[3408,3416,9001],[3425,3432,9003],[3441,3446,9003],[3456,3459,9003],[3465,3478,9001],[3554,3559,9001],[3561,3565,
9003],[3568,3570,9003],[3571,3581,9001],[3594,3597,9001],[3601,3604,9001],[3637,3639,9001],[3665,3667,9001],[3693,3695,9001],[3701,3727,9001],[3728,3733,9003],[3744,3747,9001],[3753,3758,9003],[3761,3763,9001],[3765,3769,9001],[3779,3781,9001],[3788,3791,9001],[3797,3799,9001],[3832,3841,9001],[3844,3852,9001],[3873,3885,9001],[3890,3893,9001],[3907,3912,9001],[3942,3950,9001],[3968,3970,9001],[3973,3976,9001],[3986,3989,9001],[3994,3997,9001],[4001,4016,9102],[4018,4025,9102],[4027,4029,9102],[4031,
4036,9102],[4044,4047,9102],[4052,4054,9102],[4120,4166,9102],[4172,4176,9102],[4178,4185,9102],[4190,4196,9102],[4198,4216,9102],[4218,4222,9102],[4224,4232,9102],[4234,4260,9102],[4265,4267,9102],[4269,4286,9102],[4291,4303,9102],[4306,4319,9102],[4399,4413,9003],[4418,4433,9003],[4491,4554,9001],[4600,4610,9102],[4621,4625,9102],[4627,4633,9102],[4636,4639,9102],[4641,4646,9102],[4659,4667,9102],[4676,4680,9102],[4686,4697,9102],[4699,4706,9102],[4740,4757,9102],[4763,4765,9102],[4801,4806,9102],
[4810,4812,9105],[4813,4815,9102],[5069,5072,9001],[5105,5130,9001],[5180,5184,9001],[5253,5259,9001],[5269,5275,9001],[5292,5311,9001],[5343,5349,9001],[5355,5357,9001],[5387,5389,9001],[5459,5463,9001],[5479,5482,9001],[5530,5539,9001],[5550,5552,9001],[5562,5583,9001],[5623,5625,9003],[5631,5639,9001],[5649,5653,9001],[5663,5680,9001],[5682,5685,9001],[5875,5877,9001],[20002,20032,9001],[20062,20092,9001],[20135,20138,9001],[20248,20258,9001],[20348,20358,9001],[20436,20440,9001],[20822,20824,
9001],[20934,20936,9001],[21035,21037,9001],[21095,21097,9001],[21148,21150,9001],[21413,21423,9001],[21473,21483,9001],[21780,21782,9001],[21891,21894,9001],[22171,22177,9001],[22181,22187,9001],[22191,22197,9001],[22234,22236,9001],[22521,22525,9001],[22991,22994,9001],[23028,23038,9001],[23830,23853,9001],[23866,23872,9001],[23877,23884,9001],[23886,23894,9001],[23946,23948,9001],[24311,24313,9001],[24342,24347,9001],[24370,24374,9084],[24375,24381,9001],[24718,24721,9001],[24817,24821,9001],[24877,
24882,9001],[24891,24893,9001],[25391,25395,9001],[25828,25838,9001],[26191,26195,9001],[26391,26393,9001],[26703,26722,9001],[26729,26760,9003],[26766,26798,9003],[26860,26870,9003],[26891,26899,9001],[26903,26923,9001],[26929,26946,9001],[26948,26998,9001],[27037,27040,9001],[27205,27232,9001],[27258,27260,9001],[27391,27398,9001],[27561,27564,9001],[27571,27574,9001],[27581,27584,9001],[27591,27594,9001],[28191,28193,9001],[28348,28358,9001],[28402,28432,9001],[28462,28492,9001],[29118,29122,9001],
[29177,29185,9001],[30161,30179,9001],[30491,30494,9001],[30729,30732,9001],[31251,31259,9001],[31265,31268,9001],[31275,31278,9001],[31288,31297,9001],[31461,31465,9001],[31491,31495,9001],[31917,31922,9001],[31965,31985,9001],[31992,32E3,9001],[32001,32003,9003],[32005,32031,9003],[32033,32060,9003],[32074,32077,9003],[32081,32086,9001],[32107,32130,9001],[32133,32158,9001],[32164,32167,9003],[32180,32199,9001],[32201,32260,9001],[32301,32360,9001],[32601,32662,9001],[32664,32667,9003],[32701,32761,
9001],[37001,37008,9102],[37201,37208,9102],[37211,37224,9102],[37226,37233,9102],[37237,37243,9102],[37245,37247,9102],[37249,37255,9102],[53001,53004,9001],[53008,53019,9001],[53021,53032,9001],[53042,53046,9001],[54001,54004,9001],[54008,54019,9001],[54021,54032,9001],[54042,54046,9001],[54048,54053,9001],[102001,102040,9001],[102042,102063,9001],[102065,102067,9001],[102070,102112,9001],[102114,102117,9001],[102122,102208,9001],[102210,102216,9001],[102221,102300,9001],[102304,102377,9001],[102382,
102388,9001],[102389,102391,9003],[102401,102444,9001],[102450,102452,9001],[102461,102468,9003],[102469,102492,9001],[102500,102519,9002],[102530,102549,9001],[102570,102588,9001],[102590,102598,9001],[102601,102603,9001],[102608,102628,9001],[102629,102646,9003],[102648,102672,9003],[102675,102700,9003],[102701,102703,9001],[102707,102730,9003],[102735,102758,9003],[102767,102798,9001],[102962,102969,9001],[102971,102973,9001],[102975,102989,9001],[102990,102992,9002],[102997,103002,9001],[103003,
103008,9003],[103009,103011,9001],[103012,103014,9003],[103019,103021,9001],[103022,103024,9003],[103029,103031,9001],[103032,103034,9003],[103065,103068,9001],[103074,103076,9001],[103077,103079,9002],[103080,103082,9001],[103083,103085,9003],[103090,103093,9001],[103097,103099,9001],[103100,103102,9003],[103107,103109,9001],[103110,103112,9003],[103113,103116,9001],[103117,103120,9003],[103153,103157,9001],[103158,103162,9003],[103163,103165,9001],[103166,103168,9002],[103169,103171,9003],[103186,
103188,9001],[103189,103191,9003],[103192,103195,9001],[103196,103199,9003],[103200,103224,9001],[103225,103227,9002],[103232,103237,9001],[103238,103243,9003],[103244,103246,9001],[103247,103249,9003],[103254,103256,9001],[103257,103259,9003],[103264,103266,9001],[103267,103269,9003],[103300,103375,9001],[103381,103383,9001],[103384,103386,9002],[103387,103389,9001],[103390,103392,9003],[103397,103399,9001],[103400,103471,9003],[103476,103478,9001],[103479,103481,9003],[103486,103488,9001],[103489,
103491,9003],[103492,103495,9001],[103496,103499,9003],[103539,103543,9001],[103544,103548,9003],[103549,103551,9001],[103552,103554,9002],[103555,103557,9003],[103558,103560,9001],[103571,103573,9001],[103574,103576,9003],[103577,103580,9001],[103581,103583,9003],[103600,103694,9001],[103700,103793,9003],[103794,103799,9001],[104100,104138,9102],[104141,104145,9102],[104256,104261,9102],[104700,104786,9102],[104900,104970,9102],[104990,104992,9102]],nc:[2066,9039,2136,9094,2155,9003,2157,9001,2158,
9001,2159,9094,2160,9094,2219,9001,2220,9001,2244,9003,2245,9003,2256,9002,2265,9002,2266,9002,2269,9002,2270,9002,2273,9002,2290,9001,2291,9001,2294,9001,2295,9001,2313,9001,2314,9005,2899,9003,2900,9003,2901,9002,2909,9002,2910,9002,2911,9003,2912,9003,2913,9002,2914,9002,2964,9003,2967,9003,2968,9003,2991,9001,2992,9002,2993,9001,2994,9002,3073,9001,3076,9001,3079,9001,3091,9003,3106,9001,3108,9001,3109,9001,3141,9001,3142,9001,3167,9301,3337,9001,3347,9001,3348,9001,3359,9003,3360,9001,3361,9002,
3362,9001,3363,9003,3364,9001,3365,9003,3366,9005,3402,9001,3403,9001,3405,9001,3406,9001,3439,9001,3440,9001,3447,9001,3449,9001,3450,9001,3453,9003,3454,9003,3460,9001,3479,9002,3480,9001,3481,9002,3482,9001,3483,9002,3484,9001,3485,9003,3486,9001,3487,9003,3488,9001,3489,9001,3490,9003,3491,9001,3492,9003,3493,9001,3494,9003,3495,9001,3496,9003,3497,9001,3498,9003,3499,9001,3500,9003,3501,9001,3502,9003,3503,9001,3504,9003,3505,9001,3506,9003,3507,9001,3508,9003,3509,9001,3510,9003,3511,9001,3512,
9003,3513,9001,3514,9001,3515,9003,3516,9001,3517,9003,3518,9001,3519,9003,3520,9001,3521,9003,3522,9001,3523,9003,3524,9001,3525,9003,3526,9001,3527,9003,3528,9001,3529,9003,3530,9001,3531,9003,3532,9001,3533,9003,3534,9001,3535,9003,3536,9001,3537,9003,3538,9001,3539,9003,3540,9001,3541,9003,3542,9001,3543,9003,3544,9001,3545,9003,3546,9001,3547,9003,3548,9001,3549,9003,3550,9001,3551,9003,3552,9001,3553,9003,3582,9003,3583,9001,3584,9003,3585,9001,3586,9003,3587,9001,3588,9002,3589,9001,3590,9002,
3591,9001,3592,9001,3593,9002,3598,9003,3599,9001,3600,9003,3605,9002,3606,9001,3607,9001,3608,9003,3609,9001,3610,9003,3611,9001,3612,9003,3613,9001,3614,9003,3615,9001,3616,9003,3617,9001,3618,9003,3619,9001,3620,9003,3621,9001,3622,9003,3623,9001,3624,9003,3625,9001,3626,9003,3627,9001,3628,9003,3629,9001,3630,9003,3631,9001,3632,9003,3633,9001,3634,9002,3635,9001,3636,9002,3640,9003,3641,9001,3642,9003,3643,9001,3644,9002,3645,9001,3646,9002,3647,9001,3648,9002,3649,9001,3650,9003,3651,9001,3652,
9003,3653,9001,3654,9003,3655,9001,3656,9002,3657,9001,3658,9003,3659,9001,3660,9003,3661,9001,3662,9003,3663,9001,3664,9003,3668,9003,3669,9001,3670,9003,3671,9001,3672,9003,3673,9001,3674,9003,3675,9001,3676,9002,3677,9003,3678,9001,3679,9002,3680,9003,3681,9001,3682,9002,3683,9003,3684,9001,3685,9001,3686,9003,3687,9001,3688,9003,3689,9001,3690,9003,3691,9001,3692,9003,3696,9003,3697,9001,3698,9003,3699,9001,3700,9003,3740,9001,3749,9001,3783,9001,3784,9001,3793,9001,3794,9001,3802,9001,3816,9001,
3829,9001,3854,9001,3920,9001,3978,9001,3979,9001,3991,9003,3992,9003,4026,9001,4037,9001,4038,9001,4042,9102,4075,9102,4081,9102,4168,9102,4170,9102,4188,9102,4217,9003,4261,9105,4262,9102,4263,9102,4288,9102,4289,9102,4305,9105,4322,9102,4324,9102,4326,9102,4438,9003,4439,9003,4466,9102,4467,9001,4469,9102,4471,9001,4474,9001,4475,9102,4483,9102,4490,9102,4555,9102,4558,9102,4559,9001,4614,9102,4619,9102,4657,9102,4670,9102,4671,9102,4674,9102,4682,9102,4683,9102,4718,9102,4720,9102,4721,9102,4723,
9102,4726,9102,4737,9102,4738,9102,4759,9102,4761,9102,4807,9105,4808,9102,4809,9102,4816,9105,4817,9102,4818,9102,4819,9105,4820,9102,4821,9105,4823,9102,4824,9102,4839,9001,4901,9105,4902,9105,4903,9102,4904,9102,5018,9001,5048,9001,5167,9001,5168,9001,5223,9001,5228,9102,5229,9102,5233,9102,5234,9001,5235,9001,5243,9001,5252,9102,5264,9102,5266,9001,5316,9001,5320,9001,5321,9001,5330,9001,5331,9001,5337,9001,5340,9102,5354,9102,5360,9102,5361,9001,5362,9001,5371,9102,5373,9102,5381,9102,5382,9001,
5383,9001,5393,9102,5396,9001,5456,9001,5457,9001,5464,9102,5467,9102,5469,9001,5472,9037,5489,9102,5490,9001,5518,9001,5523,9001,5524,9102,5527,9102,5546,9102,5559,9001,5561,9102,5588,9002,5589,9005,5593,9102,5596,9001,5627,9001,5629,9001,5641,9001,5643,9001,5644,9001,5654,9003,5655,9003,5659,9001,5681,9102,5700,9001,5825,9001,5836,9001,5837,9001,5842,9001,5844,9001,5880,9001,5886,9102,5887,9001,5890,9001,20499,9001,20538,9001,20539,9001,20790,9001,20791,9001,21291,9001,21292,9001,21500,9001,21817,
9001,21818,9001,22032,9001,22033,9001,22091,9001,22092,9001,22332,9001,22391,9001,22392,9001,22700,9001,22770,9001,22780,9001,22832,9001,23090,9001,23095,9001,23239,9001,23240,9001,23433,9001,23700,9001,24047,9001,24048,9001,24100,9005,24200,9001,24305,9001,24306,9001,24382,9084,24383,9001,24500,9001,24547,9001,24548,9001,24571,9062,24600,9001,25E3,9001,25231,9001,25884,9001,25932,9001,26237,9001,26331,9001,26332,9001,26591,9001,26592,9001,26632,9001,26692,9001,26855,9003,26856,9003,27120,9001,27200,
9001,27291,9040,27292,9040,27429,9001,27492,9001,27500,9001,27700,9001,28232,9001,28600,9001,28991,9001,28992,9001,29100,9001,29220,9001,29221,9001,29333,9001,29635,9001,29636,9001,29701,9001,29738,9001,29739,9001,29849,9001,29850,9001,29871,9042,29872,9041,29873,9001,29900,9001,29901,9001,29903,9001,30200,9039,30339,9001,30340,9001,30591,9001,30592,9001,30791,9001,30792,9001,31028,9001,31121,9001,31154,9001,31170,9001,31171,9001,31370,9001,31528,9001,31529,9001,31600,9001,31700,9001,31838,9001,31839,
9001,31901,9001,32061,9001,32062,9001,32098,9001,32099,9003,32100,9001,32104,9001,32161,9001,32766,9001,37225,9105,37235,9102,37257,9102,37259,9102,37260,9102,53034,9001,53048,9001,53049,9001,54034,9001,65061,9003,65062,9003,65161,9001,65163,9001,102041,9003,102064,9085,102068,109030,102069,109031,102118,9003,102119,9002,102120,9003,102121,9003,102217,9003,102218,9001,102219,9003,102220,9003,102378,9002,102379,9002,102380,9001,102381,9002,102589,9003,102599,9003,102600,9003,102604,9003,102605,9001,
102606,9001,102647,9001,102704,9003,102705,9003,102733,9003,102761,9003,102762,9001,102763,9003,102764,9001,102765,9001,102766,9003,102970,9002,102974,9003,102993,9001,102994,9001,102995,9003,102996,9003,103015,9001,103016,9003,103017,9001,103018,9003,103025,9001,103026,9001,103027,9003,103028,9003,103035,9001,103036,9001,103037,9003,103038,9003,103039,9001,103040,9001,103041,9003,103042,9003,103043,9001,103044,9001,103045,9003,103046,9003,103047,9001,103048,9001,103049,9003,103050,9003,103051,9001,
103052,9003,103053,9001,103054,9003,103055,9001,103056,9003,103057,9001,103058,9001,103059,9003,103060,9003,103061,9001,103062,9001,103063,9003,103064,9003,103069,9003,103070,9001,103071,9001,103072,9003,103073,9003,103086,9001,103087,9001,103088,9003,103089,9003,103094,9002,103095,9001,103096,9003,103103,9001,103104,9003,103105,9001,103106,9003,103121,9001,103122,9003,103123,9001,103124,9001,103125,9002,103126,9002,103127,9001,103128,9001,103129,9003,103130,9003,103131,9001,103132,9001,103133,9003,
103134,9003,103135,9001,103136,9001,103137,9002,103138,9002,103139,9001,103140,9003,103141,9001,103142,9003,103143,9001,103144,9003,103145,9001,103146,9002,103147,9001,103148,9001,103149,9003,103150,9003,103151,9001,103152,9003,103172,9001,103173,9003,103174,9001,103175,9001,103176,9003,103177,9003,103178,9001,103179,9001,103180,9003,103181,9003,103182,9001,103183,9001,103184,9003,103185,9003,103228,9001,103229,9001,103230,9003,103231,9003,103250,9001,103251,9003,103252,9001,103253,9003,103260,9001,
103261,9001,103262,9003,103263,9003,103270,9001,103271,9001,103272,9003,103273,9003,103274,9001,103275,9001,103276,9003,103277,9003,103278,9001,103279,9001,103280,9003,103281,9003,103282,9001,103283,9001,103284,9003,103285,9003,103286,9001,103287,9003,103288,9001,103289,9003,103290,9001,103291,9003,103292,9001,103293,9001,103294,9003,103295,9003,103296,9001,103297,9001,103298,9003,103299,9003,103376,9003,103377,9001,103378,9001,103379,9003,103380,9003,103393,9001,103394,9001,103395,9003,103396,9003,
103472,9001,103473,9002,103474,9001,103475,9003,103482,9001,103483,9003,103484,9001,103485,9003,103500,9001,103501,9003,103502,9001,103503,9001,103504,9002,103505,9002,103506,9001,103507,9001,103508,9003,103509,9003,103510,9001,103511,9001,103512,9003,103513,9003,103514,9001,103515,9003,103516,9001,103517,9003,103518,9001,103519,9003,103520,9001,103521,9002,103522,9001,103523,9001,103524,9003,103525,9003,103526,9001,103527,9003,103561,9003,103562,9003,103563,9001,103564,9001,103565,9003,103566,9003,
103567,9001,103568,9001,103569,9003,103570,9003,103585,9003,103695,9003,104020,9102,104139,9105,104140,9105,104223,9102,104286,9102,104287,9102,104304,9102,104305,9102,104896,9102]},c=function(){function b(){}b.cC=function(e){!1===b.ti&&b.bo();var c=b.NG(e);if(-1==c){var n=b.ks(e);n!=e&&(c=b.cC(n))}return c};b.NG=function(e){return void 0!==b.ds[e]?b.ds[e]:-1};b.SM=function(e){!1===b.ti&&b.bo();var c=b.Fz(e);if(1E38==c){var n=b.ks(e);n!=e&&(c=b.Fz(n));if(1E38==c)return 1E-10}return c};b.WO=function(e){if(void 0!==
b.Un[e])return!0;var c=b.ks(e);return c!=e&&void 0!==b.Un[c]?!0:!1};b.ZO=function(e){if(void 0!==b.Gh[e])return!0;var c=b.ks(e);return c!=e&&void 0!==b.Gh[c]?!0:!1};b.Fz=function(e){!1===b.ti&&b.bo();return void 0!==b.Un[e]?b.Un[e]:void 0!==b.Gh[e]?b.Gh[e]:1E38};b.oU=function(e){!1===b.ti&&b.bo();return void 0!==b.ew[e]?b.ew[e]:e};b.ks=function(e){!1===b.ti&&b.bo();return void 0!==b.Mw[e]?b.Mw[e]:e};b.bo=function(){for(var e=a,c,n=0;n<e.pcsid.length;n+=2)b.Gh[e.pcsid[n]]=e.pcstol[2*e.pcsid[n+1]+1];
for(n=0;n<e.pcsidc.length;n+=1){c=e.pcsidc[n];for(var g=c[0];g<=c[1];g++)b.Gh[g]=e.pcstol[2*c[2]+1]}for(n=0;n<e.gcsid.length;n+=2)b.Un[e.gcsid[n]]=e.gcstol[2*e.gcsid[n+1]+1];for(n=0;n<e.gcsidc.length;n+=1)for(c=e.gcsidc[n],g=c[0];g<=c[1];g++)b.Gh[g]=e.gcstol[2*c[2]+1];for(n=0;n<d.c.length;n+=1)for(c=d.c[n],g=c[0];g<=c[1];g++)b.ds[g]=c[2];for(n=0;n<d.nc.length;n+=2)b.ds[d.nc[n]]=d.nc[n+1];d=null;for(n=0;n<e.newtoold.length;n+=2)b.ew[e.newtoold[n+1]]=e.newtoold[n],b.Mw[e.newtoold[n]]=e.newtoold[n+1];
a=null;b.ti=!0};b.ti=!1;b.Un=[];b.Gh=[];b.ew=[];b.Mw=[];b.ds=[];return b}();g.ls=c})(w||(w={}));(function(g){function a(b){return 0===b.length?'""':'"'==b[0]||"."==b[0]||"0"<=b[0]&&"9">=b[0]?b:'"'+b.trim()+'"'}var d=[],c=function(){function b(){}b.UM=function(e){try{for(var c=0;c<d.length;c++)if(d[c].wkttext===e)return d[c].unit;for(var n,u=c="",B=!1,f=0;f<e.length;f++){var G=e[f];!0===B?'"'==G?'"'==e[f+1]?c+=G:B=!1:c+=G:/[\s]/.test(G)||(","==G?(u=""!==c?u+(a(c)+","):u+",",c=""):")"==G||"]"==G?(u=
""!==c?u+(a(c)+"]}"):u+"]}",c=""):"("==G||"["==G?(u+='{ "entity": "'+c.toUpperCase().trim()+'", "values":[',c=""):'"'==G?(B=!0,c=""):c+=G)}n=JSON.parse(u);var h=b.Dz(n);if(null===h)return null;n=null;for(G=0;G<h.values.length;G++)if("object"===typeof h.values[G]&&"UNIT"===h.values[G].entity){n=h.values[G];break}if(null===n)return null;var z=g.Tb.EL("GEOGCS"===h.entity?1:0,n.values[1],n.values[2]);d.push({wkttext:e,unit:z});10<d.length&&d.shift();return z}catch(aa){return null}};b.Dz=function(e){if(null===
e)return null;if("GEOGCS"===e.entity||"PROJCS"===e.entity)return e;for(var c=[],n=0;n<e.values.length;n++)if("object"===typeof e.values[n]&&void 0!==e.values[n].entity){if("GEOGCS"===e.values[n].entity||"PROJCS"==e.values[n].entity)return e.values[n];c.push(e.values[n])}for(e=0;e<c.length;e++)if(n=b.Dz(c[e]),null!==n)return n;return null};b.TM=function(b){var e=-1;if(null!=b&&0<b.length){var c,g;c=b.indexOf("PROJCS");if(0<=c){var a=0;c=b.lastIndexOf("UNIT");if(0<=c&&(c=b.indexOf(",",c+4),0<c&&(c++,
g=b.indexOf("]",c+1),0<g)))try{a=parseFloat(b.substring(c,g))}catch(G){a=0}0<a&&(e=.001/a)}else if(c=b.indexOf("GEOGCS"),0<=c){var d=0,a=0;c=b.indexOf("SPHEROID",c+6);if(0<c&&(c=b.indexOf(",",c+8),0<c)){c++;g=b.indexOf(",",c+1);if(0<g)try{d=parseFloat(b.substring(c,g))}catch(G){d=0}if(0<d&&(c=b.indexOf("UNIT",g+1),0<=c&&(c=b.indexOf(",",c+4),0<c&&(c++,g=b.indexOf("]",c+1),0<g))))try{a=parseFloat(b.substring(c,g))}catch(G){a=0}}0<d&&0<a&&(e=.001/(d*a))}}return e};return b}();g.mA=c})(w||(w={}));(function(g){(function(g){g[g.NONE=
0]="NONE";g[g.LINEAR=1]="LINEAR";g[g.ANGULAR=2]="ANGULAR"})(g.BH||(g.BH={}));(function(g){g[g.enumFloat=0]="enumFloat";g[g.enumDouble=1]="enumDouble";g[g.enumInt32=2]="enumInt32";g[g.enumInt64=3]="enumInt64";g[g.enumInt8=4]="enumInt8";g[g.enumInt16=5]="enumInt16"})(g.oI||(g.oI={}));(function(g){g[g.POSITION=0]="POSITION";g[g.Z=1]="Z";g[g.M=2]="M";g[g.ID=3]="ID";g[g.NORMAL=4]="NORMAL";g[g.TEXTURE1D=5]="TEXTURE1D";g[g.TEXTURE2D=6]="TEXTURE2D";g[g.TEXTURE3D=7]="TEXTURE3D";g[g.ID2=8]="ID2";g[g.MAXSEMANTICS=
10]="MAXSEMANTICS"})(g.xf||(g.xf={}));var a=function(){function a(c,b){this.er=this.le=null;this.up=this.Aa=0;this.Wg=this.Jf=null;this.tk=0;if(void 0!==b){this.Aa=b.Aa;this.up=b.up;this.Jf=b.Jf.slice(0);this.Wg=b.Wg.slice(0);this.tk=b.tk;this.er=[];for(b=c=0;b<this.Aa;b++)this.er[b]=c,c+=a.Wa(this.Jf[b]);this.up=c;this.le=[];for(b=0;b<this.Aa;b++){c=a.Wa(this.Hd(b));for(var e=a.ue(this.Hd(b)),k=0;k<c;k++)this.le[this.er[b]+k]=e}}else this.up=this.Aa=0}a.prototype.Hd=function(c){if(0>c||c>this.Aa)throw g.g.N();
return this.Jf[c]};a.prototype.zf=function(c){return this.Wg[c]};a.JN=function(c){return a.ac[c]};a.Qh=function(c){return a.Cc[c]};a.ye=function(c){return a.Bd[c]};a.Gh=function(c){return a.ye(a.Qh(c))*a.Wa(c)};a.Wa=function(c){return a.ob[c]};a.Wf=function(c){return 2>c};a.ti=function(c){return a.Wf(a.Qh(c))};a.prototype.hasAttribute=function(c){return 0<=this.Wg[c]};a.prototype.WC=function(){return this.hasAttribute(1)};a.ue=function(c){return a.V[c]};a.prototype.XN=function(c){return this.er[c]};
a.nD=function(c,b){return a.V[c]===b};a.$g=function(c){if(4==c)return 2;if(8==c)return 3;throw g.g.N();};a.prototype.lc=function(c){return this===c};a.prototype.jj=function(){for(var c=g.I.kg(this.Jf[0]),b=1;b<this.Aa;b++)c=g.I.kg(this.Jf[b],c);return c};a.prototype.fj=function(c){return this.er[c]};a.prototype.hc=function(){return this.tk};a.prototype.Fd=function(c){return this.Jf[c]};a.V=[0,0,NaN,0,0,0,0,0,0];a.ac=[1,1,1,0,2,1,1,1,0];a.Cc=[1,1,1,2,0,0,0,0,2];a.Bd=[4,8,4,8,1,2];a.ob=[2,1,1,1,3,1,
2,3,2];return a}();g.pa=a})(w||(w={}));(function(g){function a(b,c,n,g){var e=b.jd,k=b.e+c+1;1===n?g=5<=e[k]:2===n?g=5<e[k]||5==e[k]&&(g||0>k||void 0!==e[k+1]||e[k-1]&1):3===n?g=g||void 0!==e[k]||0>k:(g=!1,0!==n&&d("!Big.RM!"));if(1>k||!e[0])g?(b.e=-c,b.jd=[1]):b.jd=[b.e=0];else{e.length=k--;if(g)for(;9<++e[k];)e[k]=0,k--||(++b.e,e.unshift(1));for(k=e.length;!e[--k];e.pop());}}function d(b){b=Error(b);b.name="BigError";throw b;}var c=/^-?(\d+(\.\d*)?|\.\d+)(e[+-]?\d+)?$/i,b=function(){function b(e){if(e instanceof
b)this.Dd=e.Dd,this.e=e.e,this.jd=e.jd.slice();else{var k,g,a;0===e&&0>1/e?e="-0":c.test(e+="")||d(NaN);this.Dd="-"==e.charAt(0)?(e=e.slice(1),-1):1;-1<(k=e.indexOf("."))&&(e=e.replace(".",""));0<(g=e.search(/e/i))?(0>k&&(k=g),k+=+e.slice(g+1),e=e.substring(0,g)):0>k&&(k=e.length);for(g=0;"0"==e.charAt(g);g++);if(g==(a=e.length))this.jd=[this.e=0];else{for(;"0"==e.charAt(--a););this.e=k-g-1;this.jd=[];for(k=0;g<=a;this.jd[k++]=+e.charAt(g++));}}}b.prototype.abs=function(){var e=new b(this);e.Dd=1;
return e};b.prototype.DB=function(){var e=0,c=this.jd,g=(e=new b(e)).jd,a=this.Dd,d=e.Dd,G=this.e,f=e.e;if(!c[0]||!g[0])return c[0]?a:g[0]?-d:0;if(a!=d)return a;e=0>a;if(G!=f)return G>(f^e)?1:-1;a=-1;for(d=(G=c.length)<(f=g.length)?G:f;++a<d;)if(c[a]!=g[a])return c[a]>(g[a]^e)?1:-1;return G==f?0:G>(f^e)?1:-1};b.prototype.VB=function(e){var c=this.jd,k=(e=new b(e)).jd,g=this.Dd==e.Dd?1:-1,f=b.Cc;(f!==~~f||0>f||1E6<f)&&d("!Big.DP!");if(!c[0]||!k[0])return c[0]==k[0]&&d(NaN),k[0]||d(g/0),new b(0*g);
var G,h,l,z,m=k.slice(),p=G=k.length,q=c.length,r=c.slice(0,G),v=r.length,x=e,y=x.jd=[],w=0,C=f+(x.e=this.e-e.e)+1;x.Dd=g;g=0>C?0:C;for(m.unshift(0);v++<G;r.push(0));do{for(h=0;10>h;h++){if(G!=(v=r.length))l=G>v?1:-1;else for(z=-1,l=0;++z<G;)if(k[z]!=r[z]){l=k[z]>r[z]?1:-1;break}if(0>l){for(e=v==G?k:m;v;){if(r[--v]<e[v]){for(z=v;z&&!r[--z];r[z]=9);--r[z];r[v]+=10}r[v]-=e[v]}for(;!r[0];r.shift());}else break}y[w++]=l?h:++h;r[0]&&l?r[v]=c[p]||0:r=[c[p]]}while((p++<q||void 0!==r[0])&&g--);y[0]||1==w||
(y.shift(),x.e--);w>C&&a(x,f,b.ye,void 0!==r[0]);return x};b.prototype.nO=function(){return 0<this.DB()};b.prototype.vP=function(){return 0>this.DB()};b.prototype.nr=function(e){var c,k,g=this.Dd,a=(e=new b(e)).Dd;if(g!=a)return e.Dd=-a,this.NE(e);var d=this.jd.slice();k=this.e;var f=e.jd,h=e.e;if(!d[0]||!f[0])return f[0]?(e.Dd=-a,e):new b(d[0]?this:0);if(g=k-h){(c=0>g)?(g=-g,k=d):(h=k,k=f);k.reverse();for(a=g;a--;k.push(0));k.reverse()}else for(k=((c=d.length<f.length)?d:f).length,g=a=0;a<k;a++)if(d[a]!=
f[a]){c=d[a]<f[a];break}c&&(k=d,d=f,f=k,e.Dd=-e.Dd);if(0<(a=(k=f.length)-(c=d.length)))for(;a--;d[c++]=0);for(a=c;k>g;){if(d[--k]<f[k]){for(c=k;c&&!d[--c];d[c]=9);--d[c];d[k]+=10}d[k]-=f[k]}for(;0==d[--a];d.pop());for(;0==d[0];)d.shift(),--h;d[0]||(e.Dd=1,d=[h=0]);e.jd=d;e.e=h;return e};b.prototype.NE=function(e){var c,k=this.Dd;c=(e=new b(e)).Dd;if(k!=c)return e.Dd=-c,this.nr(e);c=this.e;var g=this.jd,a=e.e,d=e.jd;if(!g[0]||!d[0])return d[0]?e:new b(g[0]?this:0*k);g=g.slice();if(k=c-a){0<k?(a=c,
c=d):(k=-k,c=g);for(c.reverse();k--;c.push(0));c.reverse()}0>g.length-d.length&&(c=d,d=g,g=c);k=d.length;for(c=0;k;)c=(g[--k]=g[k]+d[k]+c)/10|0,g[k]%=10;c&&(g.unshift(c),++a);for(k=g.length;0==g[--k];g.pop());e.jd=g;e.e=a;return e};b.prototype.pow=function(e){var c=this,k=new b(1),g=k,a=0>e;(e!==~~e||-1E6>e||1E6<e)&&d("!pow!");for(e=a?-e:e;;){e&1&&(g=g.Wp(c));e>>=1;if(!e)break;c=c.Wp(c)}return a?k.VB(g):g};b.prototype.round=function(e,c){var k=this;null==e?e=0:(e!==~~e||0>e||1E6<e)&&d("!round!");
a(k=new b(k),e,null==c?b.ye:c);return k};b.prototype.sqrt=function(){var e,c,g;c=this.jd;e=this.Dd;g=this.e;var B=new b("0.5");if(!c[0])return new b(this);0>e&&d(NaN);e=Math.sqrt(this.toString());0==e||e==1/0?(e=c.join(""),e.length+g&1||(e+="0"),c=new b(Math.sqrt(e).toString()),c.e=((g+1)/2|0)-(0>g||g&1)):c=new b(e.toString());e=c.e+(b.Cc+=4);do g=c,c=B.Wp(g.NE(this.VB(g)));while(g.jd.slice(0,e).join("")!==c.jd.slice(0,e).join(""));a(c,b.Cc-=4,b.ye);return c};b.prototype.Wp=function(e){var c,k=this.jd,
g=(e=new b(e)).jd,a=k.length,d=g.length,f=this.e,h=e.e;e.Dd=this.Dd==e.Dd?1:-1;if(!k[0]||!g[0])return new b(0*e.Dd);e.e=f+h;a<d&&(c=k,k=g,g=c,h=a,a=d,d=h);for(c=Array(h=a+d);h--;c[h]=0);for(f=d;f--;){d=0;for(h=a+f;h>f;)d=c[h]+g[f]*k[h-f-1]+d,c[h--]=d%10,d=d/10|0;c[h]=(c[h]+d)%10}d&&++e.e;c[0]||c.shift();for(f=c.length;!c[--f];c.pop());e.jd=c;return e};b.prototype.toString=function(){var b=this.e,e=this.jd.join(""),c=e.length;if(-7>=b||21<=b)e=e.charAt(0)+(1<c?"."+e.slice(1):"")+(0>b?"e":"e+")+b;else if(0>
b){for(;++b;e="0"+e);e="0."+e}else if(0<b)if(++b>c)for(b-=c;b--;e+="0");else b<c&&(e=e.slice(0,b)+"."+e.slice(b));else 1<c&&(e=e.charAt(0)+"."+e.slice(1));return 0>this.Dd&&this.jd[0]?"-"+e:e};b.Cc=20;b.ye=1;return b}();g.Tn=b})(w||(w={}));(function(g){var a=function(){function c(b){this.$e=b}c.prototype.Zp=function(b,e,c){var k=new g.b,u=new g.b,a=this.$e;c.xd(b,e,function(b,e){a.ec(2*b,k);a.ec(2*e,u);return k.compare(u)})};c.prototype.Mo=function(b){return this.$e.read(2*b+1)};return c}(),d=function(){function c(){}
c.No=function(b){if(b.s())return!1;var e=b.D();return 1736==e?0==b.Mh()?!1:!0:1607==e?(e=[!1],c.qz(b,!0,e),e[0]):197==e||g.T.Lc(e)&&!b.kD()?!0:!1};c.il=function(b){var e=b.D();if(1736==e)return e=new g.Xa(b.description),b.s()||b.tA(e),e;if(1607==e)return c.qz(b,!1,null);if(197==e)return e=new g.Xa(b.description),b.s()||e.Wc(b,!1),e;if(g.T.Lc(e)){e=new g.pe(b.description);if(!b.s()&&!b.kD()){var k=new g.Va;b.En(k);e.add(k);b.Bn(k);e.add(k)}return e}if(g.T.Km(e))return null;throw g.g.N();};c.qz=function(b,
e,c){null!=c&&(c[0]=!1);var k=null;e||(k=new g.pe(b.description));if(!b.s()){var u=new g.ga(0);u.xb(2*b.ea());for(var B=0,d=b.ea();B<d;B++)if(0<b.Ha(B)&&!b.Oo(B)){var f=b.Ea(B);u.add(f);f=b.Dc(B)-1;u.add(f)}if(0<u.size){d=new g.Rr;B=b.mc(0);d.sort(u,0,u.size,new a(B));d=new g.b;B.ec(2*u.get(0),d);for(var f=0,h=1,l=new g.Va,z=new g.b,m=1,p=u.size;m<p;m++)if(B.ec(2*u.get(m),z),z.ub(d))u.get(f)>u.get(m)?(u.set(f,2147483647),f=m):u.set(m,2147483647),h++;else{if(0==(h&1))u.set(f,2147483647);else if(e)return null!=
c&&(c[0]=!0),null;d.J(z);f=m;h=1}if(0==(h&1))u.set(f,2147483647);else if(e)return null!=c&&(c[0]=!0),null;if(!e)for(u.xd(0,u.size,function(b,e){return b-e}),m=0,p=u.size;m<p&&2147483647!=u.get(m);m++)b.Sd(u.get(m),l),k.add(l)}}return e?null:k};return c}();g.Hh=d})(w||(w={}));(function(g){var a=function(){function a(){this.lf=new g.ga(0);this.Lq=new g.ga(0);this.gE=1;this.Qq=NaN}a.prototype.sort=function(c,b,e,k){if(32>e-b)k.Zp(b,e,c);else{var n=!0;try{for(var g=Infinity,a=-Infinity,d=b;d<e;d++){var f=
k.Mo(c.get(d));f<g&&(g=f);f>a&&(a=f)}if(this.reset(e-b,g,a,e-b)){for(d=b;d<e;d++){var h=c.get(d),f=k.Mo(h),l=this.oC(f);this.lf.set(l,this.lf.get(l)+1);this.Lq.write(d-b,h)}var m=this.lf.get(0);this.lf.set(0,0);for(var d=1,z=this.lf.size;d<z;d++){var p=this.lf.get(d);this.lf.set(d,m);m+=p}for(d=b;d<e;d++){var h=this.Lq.read(d-b),f=k.Mo(h),l=this.oC(f),q=this.lf.get(l);c.set(q+b,h);this.lf.set(l,q+1)}n=!1}}catch(ha){this.lf.resize(0),this.Lq.resize(0)}if(n)k.Zp(b,e,c);else{d=e=0;for(z=this.lf.size;d<
z;d++)n=e,e=this.lf.get(d),e>n&&k.Zp(b+n,b+e,c);100<this.lf.size&&(this.lf.resize(0),this.Lq.resize(0))}}};a.prototype.reset=function(c,b,e,k){if(2>c||e==b)return!1;c=Math.min(a.tI,c);this.lf.xb(c);this.lf.resize(c);this.lf.dh(0,0,this.lf.size);this.gE=b;this.Lq.resize(k);this.Qq=(e-b)/(c-1);return!0};a.prototype.oC=function(c){return g.I.truncate((c-this.gE)/this.Qq)};a.tI=65536;return a}();g.Rr=a})(w||(w={}));(function(g){var a;(function(b){b[b.enum_line=1]="enum_line";b[b.enum_arc=2]="enum_arc";
b[b.enum_dummy=4]="enum_dummy";b[b.enum_concave_dip=8]="enum_concave_dip";b[b.enum_connection=3]="enum_connection"})(a||(a={}));var d=function(){function b(){}b.Ks=function(e,c,k,n,a,d){var u=new b;u.Fl=new g.b;u.Ql=new g.b;u.Lt=new g.b;u.Fl.J(e);u.Ql.J(c);u.Lt.J(k);u.qn=n;u.Rg=a;u.Ug=d;return u};b.Oa=function(e,c,k,n){var u=new b;u.Fl=new g.b;u.Ql=new g.b;u.Lt=new g.b;u.Fl.J(e);u.Ql.J(c);u.Lt.Eh();u.qn=4;u.Rg=k;u.Ug=n;return u};return b}(),c=function(){function b(b,e,c,k,n,g){this.It=null;this.ua=
0;this.Ex=b;this.yE=this.wE=0;this.Da=e;this.Pi=c;this.Cj=k;this.mp=n;this.Yb=g}b.prototype.next=function(){for(var b=new g.Va;;){if(this.ua==this.Ex.F())return null;this.Ex.Sd(this.ua,b);this.ua++;if(!b.s())break}var e=!1;null==this.It&&(this.wE=b.lk(),this.yE=b.mk(),this.It=k.buffer(b,this.Da,this.Pi,this.Cj,this.mp,this.Yb),e=!0);var c;this.ua<this.Ex.F()?(c=new g.Ka,this.It.copyTo(c)):c=this.It;if(!e){var e=new g.Bg,n=b.lk()-this.wE,b=b.mk()-this.yE;e.Nn(n,b);c.Oe(e)}return c};b.prototype.ya=
function(){return 0};return b}(),b=function(){function b(b,e){this.Ma=b;this.ua=0;this.Yo=e}b.prototype.next=function(){var b=this.Ma.U;if(this.ua<b.ea()){var e=this.ua;this.ua++;if(!b.Oo(e))for(var c=b.Fa(b.Dc(e)-1);this.ua<b.ea();){var k=b.Fa(b.Ea(this.ua));if(b.Oo(this.ua))break;if(k!=c)break;c=b.Fa(b.Dc(this.ua)-1);this.ua++}if(1==this.ua-e)return this.Ma.kB(this.Ma.U,e,this.Yo);c=new g.Xa(this.Ma.U.description);c.Zj(this.Ma.U,e,!0);for(e+=1;e<this.ua;e++)c.ys(this.Ma.U,e,0,b.ct(e),!1);return this.Ma.kB(c,
0,this.Yo)}return null};b.prototype.ya=function(){return 0};return b}(),e=function(){function b(b){this.Ma=b;this.ua=0}b.prototype.next=function(){var b=this.Ma.U;if(this.ua<b.ea()){var e=this.ua;b.oo(this.ua);for(this.ua++;this.ua<b.ea()&&!(0<b.oo(this.ua));)this.ua++;return 0==e&&this.ua==b.ea()?this.Ma.Gv(b,0,b.ea()):this.Ma.Gv(b,e,this.ua)}return null};b.prototype.ya=function(){return 0};return b}(),k=function(){function k(b){this.Vq=this.Tt=this.Wq=this.sd=null;this.Jd=[];this.Yb=b;this.hb=this.wt=
this.OP=this.Da=this.vx=this.jr=this.ka=0;this.sx=this.Cj=-1;this.Yo=!0}k.buffer=function(b,e,c,n,a,d){if(null==b)throw g.g.N();if(0>n)throw g.g.N();if(b.s())return new g.Ka(b.description);var u=new g.i;b.dd(u);0<e&&u.P(e,e);d=new k(d);d.Pi=c;d.U=b;d.ka=g.Ia.zd(c,u,!0);d.jr=g.Ia.zd(null,u,!0);d.Da=e;d.OP=b.D();0>=a&&(a=96);d.hb=Math.abs(d.Da);d.wt=0!=d.hb?1/d.hb:0;isNaN(n)||0==n?n=1E-5*d.hb:n>.5*d.hb&&(n=.5*d.hb);12>a&&(a=12);b=Math.abs(e)*(1-Math.cos(Math.PI/a));b>n?n=b:(b=Math.PI/Math.acos(1-n/
Math.abs(e)),b<a-1&&(a=g.I.truncate(b),12>a&&(a=12,n=Math.abs(e)*(1-Math.cos(Math.PI/a)))));d.Cj=n;d.mp=a;d.vx=Math.min(d.jr,.25*n);return d.lB()};k.prototype.Ss=function(){if(null==this.sd)this.sd=[];else if(0!==this.sd.length)return;var b=this.pB(),b=g.I.truncate((b+3)/4),e=.5*Math.PI/b;this.sx=e;for(var c=0;c<4*b;c++)this.sd.push(null);for(var k=Math.cos(e),e=Math.sin(e),n=g.b.Oa(0,1),c=0;c<b;c++)this.sd[c+0*b]=g.b.Oa(n.y,-n.x),this.sd[c+1*b]=g.b.Oa(-n.x,-n.y),this.sd[c+2*b]=g.b.Oa(-n.y,n.x),this.sd[c+
3*b]=n,n=g.b.Oa(n.x,n.y),n.Er(k,e)};k.prototype.lB=function(){var b=this.U.D();if(g.T.Lc(b))return b=new g.Xa(this.U.description),b.Bc(this.U,!0),this.U=b,this.lB();if(this.Da<=this.ka)if(g.T.SO(b)){if(0>=this.Da&&(b=new g.i,this.U.o(b),b.aa()<=2*-this.Da||b.ba()<=2*this.Da))return new g.Ka(this.U.description)}else return new g.Ka(this.U.description);switch(this.U.D()){case 33:return this.tK();case 550:return this.sK();case 1607:return this.vK();case 1736:return this.uK();case 197:return this.qK();
default:throw g.g.wa();}};k.prototype.vK=function(){if(this.oD(this.U)){var e=new g.Va;this.U.Sd(0,e);var c=new g.i;this.U.o(c);e.ic(c.Af());return this.Es(e)}this.U=this.SQ(this.U);e=new b(this,this.Yo);return g.wi.local().$(e,this.Pi,this.Yb).next()};k.prototype.uK=function(){if(0==this.Da)return this.U;var b=g.as.local();this.Ss();this.U=b.$(this.U,null,!1,this.Yb);if(0>this.Da){var c=this.U,c=this.Gv(c,0,c.ea());return b.$(c,this.Pi,!1,this.Yb)}if(this.oD(this.U))return b=new g.Va,this.U.Sd(0,
b),c=new g.i,this.U.o(c),b.ic(c.Af()),this.Es(b);b=new e(this);return g.wi.local().$(b,this.Pi,this.Yb).next()};k.prototype.Gv=function(b,e,c){for(var n=new g.Ka(b.description);e<c;e++)if(!(1>b.Ha(e))){var u=b.oo(e),a=new g.i;b.Ti(e,a);if(0<this.Da)if(0<u)if(this.pD(b,e))u=new g.Va,b.Sd(b.Ea(e),u),u.ic(a.Af()),this.us(n,u);else{var B=u=new g.Xa(b.description),B=g.Tr.sD(this.U,e)||2==this.sm(this.U,e,B,!0,1)?this.jB(b,e):this.rm(u);n.add(B,!1)}else{if(!(a.aa()+this.ka<=2*this.hb||a.ba()+this.ka<=2*
this.hb||(B=u=new g.Xa(b.description),this.sm(this.U,e,B,!0,1),u.s()))){var d=new g.i;d.K(a);d.P(this.hb,this.hb);B.ws(d);B=this.rm(u);a=1;for(u=B.ea();a<u;a++)n.Zj(B,a,!0)}}else if(0<u){if(!(a.aa()+this.ka<=2*this.hb||a.ba()+this.ka<=2*this.hb||(B=u=new g.Xa(b.description),this.sm(this.U,e,B,!0,-1),u.s())))for(d=new g.i,B.dd(d),d.P(this.hb,this.hb),B.ws(d),B=this.rm(u),a=1,u=B.ea();a<u;a++)n.Zj(B,a,!0)}else for(B=u=new g.Xa(b.description),this.sm(this.U,e,B,!0,-1),B=this.rm(u),a=0,u=B.ea();a<u;a++)n.Zj(B,
a,!0)}if(0<this.Da)return 1<n.ea()?n=this.rm(n):k.Id(n);b=new g.i;n.dd(b);if(n.s())return k.Id(n);b.P(this.hb,this.hb);n.ws(b);n=this.rm(n);b=new g.Ka(n.description);a=1;for(u=n.ea();a<u;a++)b.Zj(n,a,!1);return k.Id(b)};k.prototype.tK=function(){return this.Es(this.U)};k.prototype.Es=function(b){var e=new g.Ka(this.U.description);this.us(e,b);return this.nS(e)};k.prototype.sK=function(){var b=new c(this.U,this.Da,this.Pi,this.Cj,this.mp,this.Yb);return g.wi.local().$(b,this.Pi,this.Yb).next()};k.prototype.qK=
function(){var b=new g.Ka(this.U.description);if(0>=this.Da){if(0==this.Da)b.Wc(this.U,!1);else{var e=new g.Vj;this.U.Fp(e);e.P(this.Da,this.Da);b.Wc(e,!1)}return b}b.Wc(this.U,!1);this.U=b;return this.jB(b,0)};k.prototype.jB=function(b,e){this.Ss();var c=new g.Ka(b.description),n=new g.b,u=new g.b,a=new g.b,B=new g.b,d=new g.b,f=new g.b,h=new g.b,l=new g.b,m=b.Ha(e),z=b.Ea(e),p=0;for(e=b.Ha(e);p<e;p++){b.w(z+p,u);b.w(z+(p+1)%m,B);b.w(z+(p+2)%m,f);h.pc(B,u);if(0==h.length())throw g.g.wa();h.tt();
h.normalize();h.scale(this.hb);n.add(h,u);a.add(h,B);0==p?c.Nr(n):c.Lm(n);c.Lm(a);l.pc(f,B);if(0==l.length())throw g.g.wa();l.tt();l.normalize();l.scale(this.hb);d.add(l,B);this.NA(c,B,a,d,!1)}return k.Id(c)};k.prototype.kB=function(b,e,c){this.Ss();if(1>b.Ha(e))return null;if(this.pD(b,e)&&0<this.Da){c=new g.Va;b.Sd(b.Ea(e),c);var k=new g.i;b.Ti(e,k);c.ic(k.Af());return this.Es(c)}k=new g.Xa(b.description);if(b.Oo(e))this.sm(b,e,k,c,1),this.sm(b,e,k,c,-1);else{var n=new g.Xa(b.description);n.Zj(b,
e,!1);n.ys(b,e,0,b.ct(e),!1);this.sm(n,0,k,c,1)}return this.rm(k)};k.prototype.rm=function(b){return g.Of.Qj(b,this.jr,!0,!0,this.Yb)};k.prototype.pB=function(){if(0==this.Cj)return this.mp;var b=1-this.Cj*Math.abs(this.wt),e;-1>b?e=4:e=2*Math.PI/Math.acos(b)+.5;4>e?e=4:e>this.mp&&(e=this.mp);return g.I.truncate(e)};k.prototype.NA=function(b,e,c,k,n){this.Ss();var u=new g.b;u.pc(c,e);u.scale(this.wt);var a=new g.b;a.pc(k,e);a.scale(this.wt);u=Math.atan2(u.y,u.x)/this.sx;0>u&&(u=this.sd.length+u);
u=this.sd.length-u;a=Math.atan2(a.y,a.x)/this.sx;0>a&&(a=this.sd.length+a);a=this.sd.length-a;a<u&&(a+=this.sd.length);var B=g.I.truncate(a),a=g.I.truncate(Math.ceil(u)),u=new g.b;u.J(this.sd[a%this.sd.length]);u.Fr(this.hb,e);var d=10*this.ka;u.sub(c);u.length()<d&&(a+=1);u.J(this.sd[B%this.sd.length]);u.Fr(this.hb,e);u.sub(k);u.length()<d&&--B;c=B-a;c++;B=0;for(a%=this.sd.length;B<c;B++,a=(a+1)%this.sd.length)u.J(this.sd[a]),u.Fr(this.hb,e),b.Lm(u);n&&b.Lm(k)};k.prototype.sm=function(b,e,c,k,n){var u=
new g.fd,a=u.QJ(b,e);u.xo(this.vx,!1,!1);if(2>u.F(a)){if(0>n)return 1;n=b;u=new g.Va;n.Sd(n.Ea(e),u);this.us(c,u);return 1}var B=u.Fa(u.Cb(u.Vb(a))),f=new g.Bg;f.Nn(-B.x,-B.y);u.Oe(f);if(k&&(this.MM(u,a,n),2>u.F(a))){if(0>n)return 1;n=b;u=new g.Va;n.Sd(n.Ea(e),u);this.us(c,u);return 1}this.Jd.length=0;var G=u.Vb(a);e=u.Cb(G);var I=1==n?u.Ua(e):u.X(e);b=1==n?u.X(e):u.Ua(e);var h=!0;k=new g.b;for(var a=new g.b,l=new g.b,m=new g.b,z=new g.b,p=new g.b,V=new g.b,q=new g.b,r=new g.b,v=new g.b,x=this.hb,
G=u.Ha(G),y=0;y<G;y++)u.w(b,a),h&&(u.w(e,k),u.w(I,l),q.pc(k,l),q.normalize(),v.zD(q),v.scale(x),m.add(v,k)),V.pc(a,k),V.normalize(),r.zD(V),r.scale(x),z.add(k,r),I=q.Ai(V),h=q.ml(V),0>I||0>h&&0==I?this.Jd.push(d.Ks(m,z,k,2,this.Jd.length+1,this.Jd.length-1)):m.ub(z)||(this.Jd.push(d.Oa(m,k,this.Jd.length+1,this.Jd.length-1,"dummy")),this.Jd.push(d.Oa(k,z,this.Jd.length+1,this.Jd.length-1,"dummy"))),p.add(a,r),this.Jd.push(d.Ks(z,p,k,1,this.Jd.length+1,this.Jd.length-1)),m.J(p),v.J(r),l.J(k),k.J(a),
q.J(V),I=e,e=b,h=!1,b=1==n?u.X(e):u.Ua(e);this.Jd[this.Jd.length-1].Rg=0;this.Jd[0].Ug=this.Jd.length-1;this.UQ(c);f.Nn(B.x,B.y);c.ZA(f,c.ea()-1);return 1};k.prototype.UQ=function(b){for(var e=this.aL(),c=!0,k=e+1,n=e;k!=e;n=k){var g=this.Jd[n],k=-1!=g.Rg?g.Rg:(n+1)%this.Jd.length;0!=g.qn&&(c&&b.Nr(g.Fl),2==g.qn?this.NA(b,g.Lt,g.Fl,g.Ql,!0):b.Lm(g.Ql),c=!1)}};k.prototype.aL=function(){null==this.Vq&&(this.Vq=[null,null,null,null,null,null,null,null,null]);for(var b=0,e=0,c=this.Jd.length;e<c;){var k=
this.Jd[e];if(0!=(k.qn&3)){b=e;break}e=k.Rg}c=b+1;for(e=b;c!=b;e=c){for(var k=this.Jd[e],c=k.Rg,n=1,a=null;c!=e;){a=this.Jd[c];if(0!=(a.qn&3))break;c=a.Rg;n++}1!=n&&1==(k.qn&a.qn)&&(null==this.Wq&&(this.Wq=new g.yb,this.Tt=new g.yb),this.Wq.ed(k.Fl),this.Wq.vd(k.Ql),this.Tt.ed(a.Fl),this.Tt.vd(a.Ql),1==this.Wq.Ga(this.Tt,this.Vq,null,null,this.jr)&&(k.Ql.J(this.Vq[0]),a.Fl.J(this.Vq[0]),k.Rg=c,a.Ug=e))}return b};k.prototype.rt=function(b,e,c){var k=new g.b;k.pc(c,b);c=k.length();c=this.hb*this.hb-
c*c*.25;if(0<c){c=Math.sqrt(c);k.normalize();k.Kp();var n=new g.b;n.pc(e,b);if(n.ml(k)+c>=this.hb)return!0}return!1};k.prototype.MM=function(b,e,c){for(var k=0;1>k;k++){var n=!1,a=b.Vb(e),u=b.Ha(a);if(0==u)break;var d=u;if(3>u)break;!b.vc(a)&&(d=u-1);for(var a=b.Cb(a),u=0<c?b.Ua(a):b.X(a),B=0<c?b.X(a):b.Ua(a),f=u,I=!0,h=new g.b,l=new g.b,m=new g.b,z=new g.b,p=new g.b,q=g.b.Oa(0,0),r=new g.b,v=new g.b,x=new g.b,y=new g.b,w=this.hb,C=0,t=0;t<d;){b.w(B,l);I&&(b.w(a,h),b.w(u,m),f=u);v.pc(h,m);v.normalize();
r.pc(l,h);r.normalize();if(f==B)break;var D=v.Ai(r),E=v.ml(r),F=!0;0>D||0>E&&0==D||!this.rt(m,h,l)||(q.J(l),F=!1,++C,n=!0);if(F){if(0<C)for(;;){D=0<c?b.Ua(f):b.X(f);if(D==a)break;b.w(D,z);if(this.rt(z,m,q))m.J(z),f=D,F=!1,++C;else{D!=B&&this.rt(z,m,l)&&this.rt(z,h,l)&&(m.J(z),f=D,F=!1,++C);break}}if(!F)continue;if(0<C){f=0<c?b.Ua(u):b.X(u);for(I=1;I<C;I++)F=0<c?b.Ua(f):b.X(f),b.vf(f,!0),f=F;x.pc(h,m);C=x.length();C=w*w-C*C*.25;C=Math.sqrt(C);w-C>.5*this.Cj?(p.add(m,h),p.scale(.5),x.normalize(),x.Kp(),
y.J(x),y.scale(w-C),p.add(y),b.Yi(u,p)):b.vf(u,!0);C=0}m.J(h);f=a}h.J(l);u=a;a=B;B=0<c?b.X(a):b.Ua(a);t++;I=!1}if(0<C){f=0<c?b.Ua(u):b.X(u);for(I=1;I<C;I++)F=0<c?b.Ua(f):b.X(f),b.vf(f,!0),f=F;p.add(m,h);p.scale(.5);x.pc(h,m);C=x.length();C=w*w-C*C*.25;C=Math.sqrt(C);x.normalize();x.Kp();y.J(x);y.scale(w-C);p.add(y);b.Yi(u,p)}b.xo(this.vx,!1,!1);if(!n)break}};k.prototype.pD=function(b,e){if(1==b.Ha(e))return!0;var c=new g.i;b.Ti(e,c);return Math.max(c.aa(),c.ba())<.5*this.Cj?!0:!1};k.prototype.oD=
function(b){var e=new g.i;b.o(e);return Math.max(e.aa(),e.ba())<.5*this.Cj?!0:!1};k.prototype.SQ=function(b){b=g.Sz.local().$(b,.25*this.Cj,!1,this.Yb);for(var e=0,c=0,k=b.ea();c<k;c++)e=Math.max(b.Ha(c),e);if(32>e)return this.Yo=!1,b;this.Yo=!0;return g.Of.Qj(b,this.jr,!1,!0,this.Yb)};k.prototype.us=function(b,e){e=e.w();if(null!=this.sd&&0!==this.sd.length){var c=new g.b;c.J(this.sd[0]);c.Fr(this.hb,e);b.Nr(c);for(var k=1,n=this.sd.length;k<n;k++)c.J(this.sd[k]),c.Fr(this.hb,e),b.Lm(c)}else for(var k=
this.pB(),c=g.I.truncate((k+3)/4),k=.5*Math.PI/c,n=Math.cos(k),a=Math.sin(k),u=new g.b,d=3;0<=d;d--)switch(u.ma(0,this.hb),d){case 0:for(k=0;k<c;k++)b.wj(u.x+e.x,u.y+e.y),u.Er(n,a);break;case 1:for(k=0;k<c;k++)b.wj(-u.y+e.x,u.x+e.y),u.Er(n,a);break;case 2:for(k=0;k<c;k++)b.wj(-u.x+e.x,-u.y+e.y),u.Er(n,a);break;default:for(b.Uy(u.y+e.x,-u.x+e.y),k=1;k<c;k++)u.Er(n,a),b.wj(u.y+e.x,-u.x+e.y)}};k.Id=function(b){b.hg(1,0);return b};k.prototype.nS=function(b){b.hg(2,this.ka);b.hl();return b};return k}();
g.UG=k})(w||(w={}));(function(g){var a=function(){function a(c){this.Qb=c;this.a=new g.fd;this.vg=new g.ga(0)}a.prototype.po=function(c,b,e){switch(b){case 0:if(c.v<e&&c.B<=e)break;else return c.v>=e?1:-1;case 1:if(c.C<e&&c.G<=e)break;else return c.C>=e?1:-1;case 2:if(c.v>=e&&c.B>e)break;else return c.B<=e?1:-1;case 3:if(!(c.C>=e&&c.G>e))return c.G<=e?1:-1}return 0};a.prototype.cL=function(c,b){return 1736==c.D()?this.dL(c,b):this.eL(c)};a.prototype.dL=function(c,b){if(0==this.Qb.aa()||0==this.Qb.ba())return c.Pa();
var e=new g.i;c.dd(e);this.U=this.a.Eb(c);var k=new g.i,n=new g.i,a=new g.b,d=new g.b,f=[0,0,0,0,0,0,0,0,0],G=[0,0,0,0,0,0,0,0,0];new g.Ag;var h=new g.yb,l=new g.ga(0);l.xb(Math.min(100,c.F()));for(var m=!1,z=0;!m&&4>z;z++){var p=!1,q=0!=(z&1),r=0;switch(z){case 0:r=this.Qb.v;p=e.v<=r&&e.B>=r;break;case 1:r=this.Qb.C;p=e.C<=r&&e.G>=r;break;case 2:r=this.Qb.B;p=e.v<=r&&e.B>=r;break;case 3:r=this.Qb.G,p=e.C<=r&&e.G>=r}if(p)for(m=!0,p=this.a.Vb(this.U);-1!=p;){var v=-1,x=-1,y=this.a.Cb(p),w=y;do{var C=
this.a.cc(w);null==C&&(C=h,this.a.w(w,a),C.ed(a),this.a.w(this.a.X(w),d),C.vd(d));C.o(k);var t=this.po(k,z,r),D=0,E=-1;if(-1==t){C=C.nt(q,r,f,G);0<C?D=this.a.Mr(w,G,C):D=0;for(var D=D+1,F=w,H=this.a.X(F),C=0;C<D;C++){this.a.w(F,a);this.a.w(H,d);E=this.a.cc(F);null==E&&(E=h,E.ed(a),E.vd(d));E.o(n);E=this.po(n,z,r);if(-1==E){if(q)E=Math.abs(a.y-r),Q=Math.abs(d.y-r),E<Q?(a.y=r,this.a.Yi(F,a)):(d.y=r,this.a.Yi(H,d));else{var E=Math.abs(a.x-r),Q=Math.abs(d.x-r);E<Q?(a.x=r,this.a.Yi(F,a)):(d.x=r,this.a.Yi(H,
d))}E=this.a.cc(F);null==E&&(E=h,E.ed(a),E.vd(d));E.o(n);E=this.po(n,z,r)}Q=v;v=E;-1==x&&(x=v);if(0!=Q||1!=v)1==Q&&0==v||0!=Q||0!=v||l.add(F);1==v&&(m=!1);E=F=H;H=this.a.X(H)}}if(0==D){Q=v;v=t;-1==x&&(x=v);if(0!=Q||1!=v)1==Q&&0==v||0!=Q||0!=v||l.add(w);1==v&&(m=!1);E=this.a.X(w)}w=E}while(w!=y);0==x&&0==v&&l.add(y);C=0;for(v=l.size;C<v;C++)x=l.get(C),this.a.vf(x,!1);l.clear(!1);p=3>this.a.Ha(p)?this.a.Cr(p):this.a.bc(p)}}if(m)return c.Pa();this.AR();0<b&&this.gM(b);return this.a.hf(this.U)};a.prototype.eL=
function(c){var b=new g.i,e=new g.i,k=[0,0,0,0,0,0,0,0,0],n=[0,0,0,0,0,0,0,0,0],a=new g.Ag,d=c,f=new g.i;c.dd(f);for(var G=0;4>G;G++){var h=!1,l=0!=(G&1),m=0;switch(G){case 0:m=this.Qb.v;h=f.v<=m&&f.B>=m;break;case 1:m=this.Qb.C;h=f.C<=m&&f.G>=m;break;case 2:m=this.Qb.B;h=f.v<=m&&f.B>=m;break;case 3:m=this.Qb.G,h=f.C<=m&&f.G>=m}if(h){h=d;d=c.Pa();h=h.Ca();h.Lk();for(var z,p=new g.b;h.kb();)for(var q,r=!0;h.La();){var v=h.ia();v.o(b);var x=this.po(b,G,m);if(-1==x){if(x=v.nt(l,m,k,n),0<x){var y=0;z=
v.Mb();for(var w=0;w<=x;w++)if(q=w<x?n[w]:1,y!=q){v.Bi(y,q,a);var C=a.get();C.ed(z);w<x&&(l?(p.x=k[w],p.y=m):(p.x=m,p.y=k[w]),C.vd(p));C.o(e);var t=this.po(e,G,m);if(-1==t){z=C.Mb();y=C.oc();if(l)t=Math.abs(z.y-m),D=Math.abs(y.y-m),t<D?(z.y=m,C.ed(z)):(y.y=m,C.vd(y));else{var t=Math.abs(z.x-m),D=Math.abs(y.x-m);t<D?(z.x=m,C.ed(z)):(y.x=m,C.vd(y))}C.o(e);t=this.po(e,G,m)}z=C.oc();y=q;q=t;1==q?(d.Bc(C,r),r=!1):r=!0}}}else q=x,1==q?(d.Bc(v,r),r=!1):r=!0}}}return d};a.prototype.AR=function(){this.vn=
-1;this.Nu(!1,this.Qb.v);this.Nu(!1,this.Qb.B);this.Nu(!0,this.Qb.C);this.Nu(!0,this.Qb.G);this.vg.resize(0);this.vg.xb(100);this.vn=this.a.re();for(var c=new g.b,b=this.a.Vb(this.U);-1!=b;b=this.a.bc(b))for(var e=this.a.Cb(b),k=0,n=this.a.Ha(b);k<n;k++,e=this.a.X(e))if(this.a.w(e,c),this.Qb.v==c.x||this.Qb.B==c.x||this.Qb.C==c.y||this.Qb.G==c.y)this.a.lb(e,this.vn,this.vg.size),this.vg.add(e);this.zu(!1,this.Qb.v);this.zu(!1,this.Qb.B);this.zu(!0,this.Qb.C);this.zu(!0,this.Qb.G);this.WM()};a.prototype.gM=
function(c){for(var b=new g.b,e=new g.b,k=g.I.Lh(2048,0),n=this.a.Vb(this.U);-1!=n;n=this.a.bc(n)){var a=this.a.Cb(n),d=a;do{var f=this.a.X(d);this.a.w(d,b);var G=-1;b.x==this.Qb.v?(this.a.w(f,e),e.x==this.Qb.v&&(G=1)):b.x==this.Qb.B&&(this.a.w(f,e),e.x==this.Qb.B&&(G=1));b.y==this.Qb.C?(this.a.w(f,e),e.y==this.Qb.C&&(G=0)):b.y==this.Qb.G&&(this.a.w(f,e),e.y==this.Qb.G&&(G=0));if(-1!=G&&(G=g.b.Fb(b,e),G=g.I.truncate(Math.min(Math.ceil(G/c),2048)),!(1>=G))){for(var h=1;h<G;h++)k[h-1]=1*h/G;this.a.Mr(d,
k,G-1)}d=f}while(d!=a)}};a.prototype.Nu=function(c,b){var e=this.a.re(),k=new g.b,n=new g.ga(0);n.xb(100);for(var a=this.a.Vb(this.U);-1!=a;a=this.a.bc(a))for(var d=this.a.Cb(a),f=0,G=this.a.Ha(a);f<G;f++){var h=this.a.X(d);this.a.w(d,k);if(c?k.y==b:k.x==b)if(this.a.w(h,k),c?k.y==b:k.x==b)1!=this.a.Ra(d,e)&&(n.add(d),this.a.lb(d,e,1)),1!=this.a.Ra(h,e)&&(n.add(h),this.a.lb(h,e,1));d=h}this.a.bf(e);if(!(3>n.size)){var m=this;n.xd(0,n.size,function(b,e){return m.kj(b,e)});e=new g.b;a=new g.b;d=new g.b;
a.Eh();for(var l=-1,f=new g.ga(0),G=new g.ga(0),h=this.a.re(),z=this.a.re(),p=0,q=n.size;p<q;p++){var r=n.get(p);this.a.w(r,k);if(!k.ub(a)){if(-1!=l){for(var v=l;v<p;v++){var l=n.get(v),x=this.a.X(l),r=this.a.Ua(l),y=!1;0>this.kj(l,x)&&(this.a.w(x,e),c?e.y==b:e.x==b)&&(f.add(l),y=!0,this.a.lb(l,z,1));0>this.kj(l,r)&&(this.a.w(r,e),c?e.y==b:e.x==b)&&(y||f.add(l),this.a.lb(l,h,1))}v=0;for(y=f.size;v<y;v++){l=f.get(v);r=this.a.Ra(l,h);x=this.a.Ra(l,z);if(1==r){r=this.a.Ua(l);this.a.w(r,d);var w=[0];
w[0]=0;if(!d.ub(k)){var C=g.b.Fb(a,d);w[0]=g.b.Fb(d,k)/C;0==w[0]?w[0]=2.220446049250313E-16:1==w[0]&&(w[0]=.9999999999999998);this.a.Mr(r,w,1);r=this.a.Ua(l);this.a.Yi(r,k);G.add(r);this.a.lb(r,h,1);this.a.lb(r,z,-1)}}1==x&&(x=this.a.X(l),this.a.w(x,d),w=[0],w[0]=0,d.ub(k)||(C=g.b.Fb(a,d),w[0]=g.b.Fb(a,k)/C,0==w[0]?w[0]=2.220446049250313E-16:1==w[0]&&(w[0]=.9999999999999998),this.a.Mr(l,w,1),r=this.a.X(l),this.a.Yi(r,k),G.add(r),this.a.lb(r,h,-1),this.a.lb(r,z,1)))}l=f;f=G;G=l;G.clear(!1)}l=p;a.J(k)}}this.a.bf(h);
this.a.bf(z)}};a.prototype.zu=function(c,b){var e=new g.b,k=new g.ga(0);k.xb(100);for(var n=this.a.re(),a=0,d=this.vg.size;a<d;a++){var f=this.vg.get(a);if(-1!=f){var G=this.a.X(f);this.a.w(f,e);if(c?e.y==b:e.x==b)if(this.a.w(G,e),c?e.y==b:e.x==b)-2!=this.a.Ra(f,n)&&(k.add(f),this.a.lb(f,n,-2)),-2!=this.a.Ra(G,n)&&(k.add(G),this.a.lb(G,n,-2))}}if(0!=k.size){var h=this;k.xd(0,k.size,function(b,e){return h.kj(b,e)});a=0;for(d=k.size;a<d;a++){var l=k.get(a);this.a.lb(l,n,a)}f=new g.b;G=new g.b;G.Eh();
for(var m=-1,a=0,d=k.size;a<d;a++)if(l=k.get(a),-1!=l&&(this.a.w(l,e),!e.ub(G))){if(-1!=m)for(;;){for(var l=!1,z=1<a-m?a-1:a,p=m;p<z;p++){var q=k.get(p);if(-1!=q){var r=-1,v=this.a.X(q);0>this.kj(q,v)&&(this.a.w(v,f),c?f.y==b:f.x==b)&&(r=v);var v=-1,x=this.a.Ua(q);0>this.kj(q,x)&&(this.a.w(x,f),c?f.y==b:f.x==b)&&(v=x);if(-1!=r&&-1!=v)this.no(q,k,n),this.a.vf(q,!1),this.no(r,k,n),this.a.vf(r,!1),l=!0;else if(-1!=r||-1!=v){for(x=p+1;x<a;x++){var y=k.get(x);if(-1!=y){var w=this.a.X(y),C=-1;0>this.kj(y,
w)&&(this.a.w(w,f),c?f.y==b:f.x==b)&&(C=w);var w=this.a.Ua(y),t=-1;0>this.kj(y,w)&&(this.a.w(w,f),c?f.y==b:f.x==b)&&(t=w);if(-1!=C&&-1!=t){this.no(y,k,n);this.a.vf(y,!1);this.no(C,k,n);this.a.vf(C,!1);l=!0;break}if(-1!=r&&-1!=t){this.dF(k,q,r,y,t,n);l=!0;break}else if(-1!=v&&-1!=C){this.dF(k,y,C,q,v,n);l=!0;break}}}if(l)break}}}if(!l)break}m=a;G.J(e)}}this.a.bf(n)};a.prototype.no=function(c,b,e){e=this.a.Ra(c,e);b.set(e,-1);e=this.a.Ra(c,this.vn);this.vg.set(e,-1);b=this.a.rd(c);-1!=b&&this.a.Cb(b)==
c&&(this.a.Dh(b,-1),this.a.Wi(b,-1))};a.prototype.dF=function(c,b,e,k,n,g){this.a.Sc(b,k);this.a.Tc(k,b);this.a.Tc(e,n);this.a.Sc(n,e);this.no(k,c,g);this.a.Ui(k,!1);this.no(n,c,g);this.a.Ui(n,!0)};a.prototype.WM=function(){for(var c=0,b=this.vg.size;c<b;c++){var e=this.vg.get(c);-1!=e&&this.a.im(e,-1)}for(var k=0,n=0,g=this.a.Vb(this.U);-1!=g;){var a=this.a.Cb(g);if(-1==a||g!=this.a.rd(a)){var d=g,g=this.a.bc(g);this.a.Dh(d,-1);this.a.yu(d)}else{e=a;d=0;do this.a.im(e,g),d++,e=this.a.X(e);while(e!=
a);2>=d?(e=this.a.Ra(a,this.vn),this.vg.set(e,-1),a=this.a.vf(a,!1),2==d&&(e=this.a.Ra(a,this.vn),this.vg.set(e,-1),this.a.vf(a,!1)),d=g,g=this.a.bc(g),this.a.Dh(d,-1),this.a.yu(d)):(this.a.Jr(g,!1),this.a.Wi(g,this.a.Ua(a)),this.a.hm(g,d),n+=d,k++,g=this.a.bc(g))}}c=0;for(b=this.vg.size;c<b;c++)if(e=this.vg.get(c),-1!=e&&(g=this.a.rd(e),-1==g)){g=this.a.Cf(this.U,-1);d=0;a=e;do this.a.im(e,g),d++,e=this.a.X(e);while(e!=a);2>=d?(e=this.a.Ra(a,this.vn),this.vg.set(e,-1),a=this.a.vf(a,!1),2==d&&(e=
this.a.Ra(a,this.vn),0<=e&&this.vg.set(e,-1),this.a.vf(a,!1)),d=g,this.a.Dh(d,-1),this.a.yu(d)):(this.a.Gn(g,!0),this.a.hm(g,d),this.a.Dh(g,a),this.a.Wi(g,this.a.Ua(a)),this.a.Jr(g,!1),n+=d,k++)}this.a.gm(this.U,k);this.a.Pk(this.U,n);c=0;for(b=this.a.$c;-1!=b;b=this.a.we(b))c+=this.a.F(b);this.a.ZF(c)};a.Xk=function(c,b,e){return(new a(b)).cL(c,e)};a.clip=function(c,b,e,k){if(c.s())return c;if(b.s())return c.Pa();e=c.D();if(33==e)return k=c.w(),b.contains(k)?c:c.Pa();if(197==e)return k=new g.i,c.o(k),
k.Ga(b)?(b=new g.Vj,c.copyTo(b),b.Cu(k),b):c.Pa();var n=new g.i;c.dd(n);if(b.contains(n))return c;if(!b.jc(n))return c.Pa();n=c.pb;if(null!=n&&(n=n.hi,null!=n)){n=n.Dn(b);if(1==n){if(1736!=e)throw g.g.wa();c=new g.Ka(c.description);c.ws(b);return c}if(0==n)return c.Pa()}switch(e){case 550:e=null;for(var n=c.F(),u=c.mc(0),d=0,f=0;f<n;f++)k=new g.b,u.ec(2*f,k),b.contains(k)||(0==d&&(e=c.Pa()),d<f&&e.Pd(c,d,f),d=f+1);0<d&&e.Pd(c,d,n);return 0==d?c:e;case 1736:case 1607:return a.Xk(c,b,k);default:throw g.g.wa();
}};a.prototype.kj=function(c,b){var e=new g.b;this.a.w(c,e);c=new g.b;this.a.w(b,c);return e.compare(c)};return a}();g.Ed=a})(w||(w={}));(function(g){var a=new g.b,d=function(){function b(b,c,n,a,d){this.Ml=new g.b;this.ln=new g.b;this.Ck=new g.b;this.a=b;this.Px=n;this.bn=a;this.Ml=c;this.vk=d;this.ln.Eh();this.Ck.Eh()}b.prototype.sB=function(b){this.a.w(b,this.ln);b=g.I.truncate((this.ln.x-this.Ml.x)*this.bn+.5);var e=g.I.truncate((this.ln.y-this.Ml.y)*this.bn+.5);return c.XC(b,e)};b.prototype.vw=
function(b){return this.a.Ra(b,this.vk)};return b}();g.wT=function(){return function(){}}();var c=function(){function b(){this.Ml=new g.b;this.Zo=[0,0,0,0];this.Kq=[0,0,0,0];this.en=this.vk=-1}b.zM=function(e,c){var k=new b;k.a=e;k.ka=c;k.Px=c*c;k.Kt=2*c;k.bn=1/k.Kt;return k.fL()};b.Vw=function(b,c,n,g,a){b-=n;c-=g;return b*b+c*c<=a};b.XC=function(b,c){return g.I.kg(c,g.I.kg(b))};b.prototype.hL=function(e,c){this.a.uc(e,a);for(var k=(a.y-this.Ml.y)*this.bn,u=g.I.truncate((a.x-this.Ml.x)*this.bn),
d=g.I.truncate(k),f=k=0;1>=f;f+=1)for(var G=0;1>=G;G+=1){var h=b.XC(u+f,d+G),l=this.uk.DN(h);-1!=l&&(this.Zo[k]=l,this.Kq[k]=h,k++)}for(u=k-1;1<=u;u--)for(l=this.Zo[u],d=u-1;0<=d;d--)if(l==this.Zo[d]){this.Kq[d]=-1;k--;u!=k&&(this.Kq[u]=this.Kq[k],this.Zo[u]=this.Zo[k]);break}for(d=0;d<k;d++)this.iL(e,this.Kq[d],a,this.Zo[d],c)};b.prototype.iL=function(e,c,n,a,d){for(var k=new g.b;-1!=a;a=this.uk.SN(a)){var u=this.uk.da(a);e==u||-1!=c&&this.a.Ra(u,this.vk)!=c||(this.a.uc(u,k),b.Vw(n.x,n.y,k.x,k.y,
this.Px)&&d.add(a))}};b.prototype.Tl=function(b,c,n){var e=this.a.Ra(b,this.en),k=this.a.Ra(c,this.en);-1==e&&(e=this.nd.jh(),this.nd.addElement(e,b),this.a.lb(b,this.en,e));-1==k?this.nd.addElement(e,c):this.nd.Qv(e,k);this.a.lb(c,this.en,-2);c=this.aQ(b,c);n&&(n=this.St.sB(b),this.a.lb(b,this.vk,n));return c};b.$P=function(e,c,n){e.lc(c);n=e;var k=new g.b;b.HH(e.w(),c.w(),k);n.ic(k)};b.HH=function(b,c,n){var e=b.x;b.x!=c.x&&(e=(1*b.x+1*c.x)/2);var k=b.y;b.y!=c.y&&(k=(1*b.y+1*c.y)/2);n.ma(e,k)};
b.prototype.aQ=function(b,c){var e=new g.b;this.a.w(b,e);var k=new g.b;this.a.w(c,k);var a=this.a.RC(b);c=this.a.RC(c);var d=a+c,f=0,h=e.x;e.x!=k.x&&(h=(e.x*a+k.x*c)/d,f++);var l=e.y;e.y!=k.y&&(l=(e.y*a+k.y*c)/d,f++);0<f&&this.a.ic(b,h,l);this.a.pS(b,d);return 0!=f};b.prototype.fL=function(){var b=this.a.pd,c=this.a.wC();this.Ml=c.yw();c=Math.max(c.ba(),c.aa())/2147483646;this.Kt<c&&(this.Kt=c,this.bn=1/this.Kt);this.nd=new g.Ur;this.nd.Dr(g.I.truncate(this.a.pd/3+1));this.nd.$l(g.I.truncate(this.a.pd/
3+1));this.vk=this.a.re();this.en=this.a.re();this.St=new d(this.a,this.Ml,this.Px,this.bn,this.vk);this.uk=new g.AH(g.I.truncate(4*b/3),this.St);this.uk.wR(this.a.pd);b=!1;for(c=this.a.$c;-1!=c;c=this.a.we(c))for(var n=this.a.Vb(c);-1!=n;n=this.a.bc(n))for(var a=this.a.Cb(n),B=0,f=this.a.Ha(n);B<f;B++){var G=this.St.sB(a);this.a.lb(a,this.vk,G);this.uk.addElement(a,G);a=this.a.X(a)}var h=new g.ga(0);h.xb(10);for(c=this.a.$c;-1!=c;c=this.a.we(c))for(n=this.a.Vb(c);-1!=n;n=this.a.bc(n))for(a=this.a.Cb(n),
B=0,f=this.a.Ha(n);B<f;B++){if(-2!=this.a.Ra(a,this.en))for(G=this.a.Ra(a,this.vk),this.uk.Jc(a,G);;){this.hL(a,h);if(0==h.size)break;for(var G=!1,l=0,m=h.size;l<m;l++){var z=h.get(l),p=this.uk.da(z);this.uk.kd(z);G=this.Tl(a,p,l+1==m)||G}b=b||G;h.clear(!1);if(!G)break}a=this.a.X(a)}b&&this.ZJ();this.St=this.uk=null;this.a.bf(this.vk);this.a.bf(this.en);return b};b.prototype.ZJ=function(){for(var b=new g.b,c=this.nd.Wd;-1!=c;c=this.nd.Cw(c)){var n=this.nd.gc(c);this.a.w(this.nd.da(n),b);for(n=this.nd.bb(n);-1!=
n;n=this.nd.bb(n))this.a.Yi(this.nd.da(n),b)}};return b}();g.Sr=c})(w||(w={}));(function(g){var a=Math.PI,d=2*Math.PI,c=Math.PI/2,b=function(){function b(){}b.yL=function(e,c){var k=new b;k.x=e;k.y=c;k.type=0;k.mh=0;return k};b.um=function(e){var c=new b;c.x=e.x;c.y=e.y;c.type=0;c.mh=0;return c};b.xL=function(e){var c=new b;c.x=e.x;c.y=e.y;c.type=e.type;c.mh=e.mh;return c};b.Ad=function(e,c,k){var n=new b;n.x=e.x+c*Math.cos(k);n.y=e.y+c*Math.sin(k);n.type=e.type;n.mh=e.mh;return n};b.Js=function(e,
c){var k=new b;k.x=.5*(e.x+c.x);k.y=.5*(e.y+c.y);k.type=e.type;k.mh=e.mh;return k};b.LB=function(e,c){var k=new b;k.x=e.x+.001*(c.x-e.x);k.y=e.y+.001*(c.y-e.y);k.type=e.type;k.mh=e.mh;return k};return b}(),e=function(){return function(){}}();(function(b){b[b.Round=0]="Round";b[b.Bevel=1]="Bevel";b[b.Miter=2]="Miter";b[b.Square=3]="Square"})(g.EH||(g.EH={}));var k=function(){function k(b){this.Kx=this.Ib=this.dg=null;this.oe=b}k.$=function(b,e,c,n,a,d){if(null==b)throw g.g.N();if(1>b.fb())throw g.g.N();
if(0==e||b.s())return b;d=new k(d);d.$m=b;d.Da=e;d.ka=a;d.bi=c;d.Dx=n;return d.hv()};k.prototype.hJ=function(){var b=this.$m,e=b.Mb(),c=b.oc(),k=new g.b;k.pc(c,e);k.normalize();k.tt();k.scale(this.Da);e.add(k);c.add(k);k=b.Pa();b.ed(e);b.vd(c);return k};k.prototype.gJ=function(){var b=this.$m;if(0<this.Da&&2!=this.bi){var e=new g.Ka;e.Wc(b,!1);this.$m=e;return this.hv()}b=new g.Vj(b.R);b.P(this.Da,this.Da);return b};k.prototype.rF=function(b,e,c,k){return(e.x-b.x)*(k.x-c.x)+(e.y-b.y)*(k.y-c.y)};k.prototype.Ub=
function(e,k){if(void 0===k)this.Ib.push(e),this.Xe++;else if(0==this.Xe)this.Ub(e);else{var n=this.eu,g,a;g=this.dg[0==k?n-1:k-1];a=this.dg[k];var u=this.rF(g,a,this.Ib[this.Xe-1],e);0<u?this.Ub(e):0>u&&(0<this.rF(g,a,a,this.Ib[this.Xe-1])?(a=this.dg[0==k?n-2:1==k?n-1:k-2],n=b.Ad(g,this.Da,Math.atan2(g.y-a.y,g.x-a.x)-c),this.Ib[this.Xe-1]=n,1==this.bi||2==this.bi?(n=b.Js(n,g),this.Ub(n),n=b.Ad(g,this.Da,this.vt+c),g=b.Js(n,g),g.type|=256,this.Ub(g)):(n=b.Ad(g,this.Da,this.vt+c),n.type|=256),this.Ub(n),
this.Ub(e,k)):(n=b.Ad(a,this.Da,this.vt+c),this.Ub(n),1==this.bi||2==this.bi?(n=b.Js(n,a),this.Ub(n),n=b.Ad(a,this.Da,this.gx-c),g=b.Js(n,a),g.type|=256,this.Ub(g)):(n=b.Ad(a,this.Da,this.gx-c),n.type|=256),this.Ub(n)))}};k.prototype.mB=function(){var e,k,n,f,h,l,m=this.eu;this.Xe=0;var z=.5*this.ka,p=0,q=0;for(e=0;e<m;e++){f=this.dg[e];h=0==e?this.dg[m-1]:this.dg[e-1];l=e==m-1?this.dg[0]:this.dg[e+1];var r=h.x-f.x,v=h.y-f.y,x=l.x-f.x,y=l.y-f.y;k=Math.atan2(v,r);n=Math.atan2(y,x);this.vt=k;this.gx=
n;0==e&&(p=k,q=n);r=r*y-x*v;v=n;n<k&&(n+=d);if(0<r*this.Da)1==this.bi||2==this.bi?(k=b.Ad(f,this.Da,k+c),this.Ub(k),k=b.LB(f,k),this.Ub(k),k=b.Ad(f,this.Da,n-c),f=b.LB(f,k),f.type|=256,this.Ub(f),this.Ub(k)):(r=.5*(n-k),r=this.Da/Math.abs(Math.sin(r)),k=b.Ad(f,r,.5*(k+n)),this.Ub(k,e));else if(0!=(f.type&512)){r=1-z/Math.abs(this.Da);h=1;l=0>this.Da?-a:a;-1<r&&1>r&&(v=2*Math.acos(r),.017453292519943295>v&&(v=.017453292519943295),h=g.I.truncate(a/v+1.5),1<h&&(l/=h));v=k+c;k=b.Ad(f,this.Da,v);0==e&&
(k.type|=1024);this.Ub(k,e);r=this.Da/Math.cos(l/2);v+=l/2;k=b.Ad(f,r,v);k.type|=1024;for(this.Ub(k);0<--h;)v+=l,k=b.Ad(f,r,v),k.type|=1024,this.Ub(k);k=b.Ad(f,this.Da,n-c);k.type|=1024;this.Ub(k)}else if(1==this.bi)k=b.Ad(f,this.Da,k+c),this.Ub(k,e),k=b.Ad(f,this.Da,n-c),this.Ub(k);else if(0==this.bi)for(r=1-z/Math.abs(this.Da),h=1,l=n-c-(k+c),-1<r&&1>r&&(v=2*Math.acos(r),.017453292519943295>v&&(v=.017453292519943295),h=g.I.truncate(Math.abs(l)/v+1.5),1<h&&(l/=h)),r=this.Da/Math.cos(.5*l),v=k+c+
.5*l,k=b.Ad(f,r,v),this.Ub(k,e);0<--h;)v+=l,k=b.Ad(f,r,v),this.Ub(k);else 2==this.bi?(r=h.x-f.x,v=h.y-f.y,x=l.x-f.x,y=l.y-f.y,h=(r*x+v*y)/Math.sqrt(r*r+v*v)/Math.sqrt(x*x+y*y),.99999999<h?(k=b.Ad(f,1.4142135623730951*this.Da,n-.25*a),this.Ub(k,e),k=b.Ad(f,1.4142135623730951*this.Da,n+.25*a),this.Ub(k)):(h=Math.abs(this.Da/Math.sin(.5*Math.acos(h))),l=Math.abs(this.Dx*this.Da),h>l?(r=.5*(n-k),r=this.Da/Math.abs(Math.sin(r)),k=b.Ad(f,r,.5*(k+n)),n=g.b.Oa(k.x,k.y),k=g.b.Oa(f.x,f.y),f=new g.b,f.pc(n,
k),n=new g.b,n.DR(l/f.length(),f,k),k=(h-l)*Math.abs(this.Da)/Math.sqrt(h*h-this.Da*this.Da),0<this.Da?f.tt():f.Kp(),f.scale(k/f.length()),k=new g.b,k.add(n,f),h=new g.b,h.pc(n,f),k=b.um(k),this.Ub(k,e),k=b.um(h),this.Ub(k)):(r=.5*(n-k),r=this.Da/Math.abs(Math.sin(r)),k=b.Ad(f,r,.5*(k+n)),this.Ub(k,e)))):(n=v,0<this.Da?(n>k&&(n-=d),h=k-n<c):(n<k&&(n+=d),h=n-k<c),h?(r=1.4142135623730951*this.Da,v=0>r?k+.25*a:k+.75*a,k=b.Ad(f,r,v),this.Ub(k,e),v=0>r?n-.25*a:n-.75*a,k=b.Ad(f,r,v),this.Ub(k)):(r=.5*(n-
k),r=this.Da/Math.abs(Math.sin(r)),n<k&&(n+=d),k=b.Ad(f,r,(k+n)/2),this.Ub(k,e)))}this.vt=p;this.gx=q;this.Ub(this.Ib[0],0);f=b.xL(this.Ib[this.Xe-1]);this.Ib[0]=f;return this.sR()};k.prototype.xs=function(b,e){if(!(2>e))for(var c=0;c<e;c++){var k=this.Ib[b+c];0!=c?this.Kx.Lm(g.b.Oa(k.x,k.y)):this.Kx.Nr(g.b.Oa(k.x,k.y))}};k.prototype.iJ=function(e,c,k){var n=e.Ea(c),g=e.Dc(c);this.Ib=[];this.Kx=k;if(e.vc(c)){for(c=e.Fa(n);e.Fa(g-1).ub(c);)g--;if(2<=g-n){this.eu=g-n;this.dg=[];for(c=n;c<g;c++)this.dg.push(b.um(e.Fa(c)));
this.mB()&&this.xs(0,this.Xe-1)}}else{for(c=e.Fa(n);n<g&&e.Fa(n+1).ub(c);)n++;for(c=e.Fa(g-1);n<g&&e.Fa(g-2).ub(c);)g--;if(2<=g-n){this.eu=2*(g-n)-2;this.dg=[];k=b.um(e.Fa(n));k.type|=1536;this.dg.push(k);for(c=n+1;c<g-1;c++)k=b.um(e.Fa(c)),this.dg.push(k);k=b.um(e.Fa(g-1));k.type|=512;this.dg.push(k);for(c=g-2;c>=n+1;c--)k=b.um(e.Fa(c)),k.type|=1024,this.dg.push(k);if(this.mB())if(2<=this.Ib.length){e=-1;(g=0!=(this.Ib[this.Xe-1].type&1024))||(e=0);for(c=1;c<this.Xe;c++)(n=0!=(this.Ib[c].type&1024))?
g||(g=c-1,1<g-e+1&&this.xs(e,g-e+1)):g&&(e=c-1),g=n;g||(g=this.Xe-1,1<g-e+1&&this.xs(e,g-e+1))}else e=0,g=this.Xe-1,0<=e&&1<=g-e&&this.xs(e,g-e+1)}}this.dg=null;this.eu=0;this.Ib=null;this.Xe=0};k.prototype.sR=function(){for(var b=!1,e=0;e<this.Xe;e++){var c=this.Ib[e];c.Rg=e+1;c.Ug=e-1;this.Ib[e]=c}c=this.Ib[0];c.Ug=this.Xe-2;this.Ib[0]=c;c=this.Ib[this.Xe-2];c.Rg=0;this.Ib[this.Xe-2]=c;for(e=c=0;e<this.Xe;e++)if(0!=(this.Ib[c].type&256)){var k=this.$L(c);if(-1!=k)c=k;else{b=!0;break}}else c=this.Ib[c].Rg;
if(b)return!1;this.vL(c);return!0};k.prototype.$L=function(b){for(var e=this.Xe-1,c=b,k,n,g=1;g<=e-2;g++){k=c=this.Ib[c].Rg;n=b;for(var a=1;a<=g;a++){n=this.Ib[n].Ug;if(0==(this.Ib[n].type&256)&&0==(this.Ib[k].type&256)){var u=this.oO(n,k);if(-1!=u)return u}k=this.Ib[k].Ug}}return-1};k.prototype.oO=function(b,c){var k,n,a,u;k=this.Ib[this.Ib[b].Ug];n=this.Ib[b];a=this.Ib[this.Ib[c].Ug];u=this.Ib[c];if(!this.HR(k,n,a,u))return-1;var d=new e;return this.NM(k,n,a,u,d)&&!d.cB&&g.I.bG((n.x-k.x)*(u.y-a.y)-
(n.y-k.y)*(u.x-a.x))!=g.I.bG(this.Da)?(k=this.Ib[b].Ug,d.Xl.type=n.type,d.Xl.Rg=c,d.Xl.Ug=k,this.Ib[b]=d.Xl,d.Xl=this.Ib[c],d.Xl.Ug=b,this.Ib[c]=d.Xl,c):-1};k.prototype.HR=function(b,e,c,k){return Math.max(b.x,e.x)>=Math.min(c.x,k.x)&&Math.max(c.x,k.x)>=Math.min(b.x,e.x)&&Math.max(b.y,e.y)>=Math.min(c.y,k.y)&&Math.max(c.y,k.y)>=Math.min(b.y,e.y)};k.prototype.NM=function(e,c,k,n,g){g.cB=!1;var a,u,d;a=(c.y-e.y)*(n.x-k.x)-(c.x-e.x)*(n.y-k.y);u=(k.y-e.y)*(c.x-e.x)-(k.x-e.x)*(c.y-e.y);a=0==a?2:u/a;return 0<=
a&&1>=a&&(d=a,a=(n.y-k.y)*(c.x-e.x)-(n.x-k.x)*(c.y-e.y),u=(e.y-k.y)*(n.x-k.x)-(e.x-k.x)*(n.y-k.y),a=0==a?2:u/a,0<=a&&1>=a)?(g.Xl=b.yL(e.x+a*(c.x-e.x),e.y+a*(c.y-e.y)),g.Xl.mh=k.mh+d*(n.mh-k.mh),0!=d&&1!=d||0!=a&&1!=a||(g.cB=!0),g.wU=a,g.xU=d,(0==d||1==d)&&0<a&&1>a||(0==a||1==a)&&0<d&&1>d?!1:!0):!1};k.prototype.vL=function(b){for(;this.Ib[b].Ug<b;)b=this.Ib[b].Ug;var e=0,c=b;do c=this.Ib[c],this.Ib[e]=c,c=c.Rg,e++;while(c!=b);this.Ib[e]=this.Ib[0];this.Xe=e+1};k.prototype.qA=function(b){var e=this.$m,
c=e.Ca();if(null!=c){c.Lk();for(var k=-1;c.kb();)k++,this.iJ(e,k,b)}};k.prototype.hv=function(){var b=this.$m.D();return 322==b?this.hJ():197==b?this.gJ():g.T.Lc(b)?(b=new g.Xa,b.Bc(this.$m,!0),this.$m=b,this.hv()):1607==b?(b=new g.Xa,this.qA(b),b):1736==b?(b=new g.Ka,this.qA(b),b):null};return k}();g.XG=k})(w||(w={}));(function(g){var a=function(){function b(b){this.xj=b}b.prototype.w=function(b,e){this.xj.a.w(b,e)};b.prototype.kd=function(b){var e=this.xj.za.da(b);this.xj.za.kd(b,-1);this.xj.a.vf(e,
!1)};return b}(),d=function(){function b(b){this.xj=b}b.prototype.w=function(b,e){this.xj.NP.w(b,e)};b.prototype.kd=function(b){this.xj.za.kd(b,-1)};return b}(),c=function(){function b(b){this.xj=b}b.prototype.w=function(b,e){e.J(this.xj.PP[b])};b.prototype.kd=function(b){this.xj.za.kd(b,-1)};return b}(),b=function(){function b(b){void 0===b?(this.za=new g.bj,this.za.de(20),this.a=new g.fd,this.FP=this.a.jg(550),this.cr=this.a.Cf(this.FP,-1),this.oh=new a(this)):b instanceof Array?(this.za=new g.bj,
this.za.de(20),this.PP=b,this.oh=new c(this)):(this.za=new g.bj,this.za.de(20),this.NP=b,this.oh=new d(this))}b.prototype.Eb=function(b){var e=b.D();if(g.Wr.Th(e))this.OJ(b);else if(g.al.Lc(e))this.SJ(b);else if(197==e)this.LJ(b);else if(33==e)this.RJ(b);else throw g.g.N("invalid shape type");};b.prototype.sN=function(){var b=new g.Va,e=this.za.gc(-1),c=new g.Ka(this.a.wp);this.a.Jk(this.za.da(e),b);c.df(b);for(e=this.za.bb(e);-1!=e;e=this.za.bb(e))this.a.Jk(this.za.da(e),b),c.lineTo(b);return c};
b.wL=function(e){var c=new b(e),k=e.F(),a=1,d=new g.b,f=new g.b,h=new g.b;for(e.w(0,d);;){e.w(a,f);if(!(f.Ww(d)&&a<k-1))break;a++}c.za.addElement(0,-1);c.za.qm(a);for(k=a+1;k<e.F();k++)e.w(k,h),a=c.cz(h),-1!=a&&c.za.Vi(a,k);h=new g.Va;a=c.za.gc(-1);k=new g.Ka(e.description);e.Sd(c.za.da(a),h);k.df(h);for(a=c.za.bb(a);-1!=a;a=c.za.bb(a))e.Sd(c.za.da(a),h),k.lineTo(h);return k};b.Oa=function(e,c,g){for(var k=new b(e),n=1,a=e[0];e[n].Ww(a)&&n<c-1;)n++;k.za.addElement(0,-1);k.za.qm(n);for(n+=1;n<c;n++)a=
k.cz(e[n]),-1!=a&&k.za.Vi(a,n);e=0;for(c=k.za.gc(-1);-1!=c;c=k.za.bb(c))g[e++]=k.za.da(c);return e};b.sD=function(e,c){var k=e.Ea(c),n=e.Dc(c);c=!e.vc(c)&&e.Oo(c);e=e.mc(0);k*=2;n*=2;c&&(n-=2);if(6>n-k)return!0;c=new g.b;var a=new g.b,d=new g.b;e.ec(k,c);e.ec(k+2,a);e.ec(k+4,d);var f=b.Bd(a,d,c);if(f.Dq()||!b.ac(f.value()))return!1;for(var h=g.b.Oa(a.x,a.y),l=new g.b,k=k+6;k<n;k+=2){l.J(a);a.J(d);e.ec(k,d);f=b.Bd(a,d,c);if(f.Dq()||!b.ac(f.value()))return!1;f=b.Bd(h,d,c);if(f.Dq()||!b.ac(f.value()))return!1;
f=b.Bd(a,d,l);if(f.Dq()||!b.ac(f.value()))return!1}return!0};b.prototype.OJ=function(b){for(var e=new g.Va,c=new g.b,k=0;k<b.F();k++){b.w(k,c);var a=this.hq(c);if(-1!=a){b.Sd(k,e);var d=this.a.Ub(this.cr,e);this.za.Vi(a,d)}}};b.prototype.LJ=function(b){for(var e=new g.Va,c=new g.b,k=0;4>k;k++){b.vu(k,c);var a=this.hq(c);if(-1!=a){b.uf(k,e);var d=this.a.Ub(this.cr,e);this.za.Vi(a,d)}}};b.prototype.SJ=function(b){var e=new g.Va,c=b.Mb(),c=this.hq(c);if(-1!=c){b.En(e);var k=this.a.Ub(this.cr,e);this.za.Vi(c,
k)}c=b.oc();c=this.hq(c);-1!=c&&(b.Bn(e),b=this.a.Ub(this.cr,e),this.za.Vi(c,b))};b.prototype.RJ=function(b){var e=b.w(),e=this.hq(e);-1!=e&&(b=this.a.Ub(this.cr,b),this.za.Vi(e,b))};b.prototype.hq=function(b){var e=-1;if(0==this.za.size(-1))return e=this.za.addElement(-4,-1);if(1==this.za.size(-1)){var c=this.a.Fa(this.za.da(this.za.gc(-1)));b.Ww(c)||(e=this.za.qm(-5));return e}return e=this.cz(b)};b.prototype.cz=function(e){var c=-1,k=this.za.gc(-1),a=this.za.tc(-1),d=this.za.da(k),f=this.za.da(a),
h=new g.b,l=new g.b;this.oh.w(d,h);this.oh.w(f,l);d=g.b.yn(l,e,h);if(b.ac(d))c=this.za.qm(-1),h=this.az(e,a,k),h!=k&&this.bz(e,k,this.za.ge(h));else if(b.ti(d)){for(var l=this.za.dt(-1),m=this.za.gc(-1),z=this.za.tc(-1),p,d=new g.b,f=new g.b;m!=this.za.ge(z);)p=this.za.da(l),this.oh.w(p,d),p=g.b.yn(d,e,h),b.ti(p)?(z=l,l=this.za.ik(l)):(m=l,l=this.za.Jo(l));l=z;h=m;p=this.za.da(l);m=this.za.da(h);this.oh.w(p,d);this.oh.w(m,f);if(h==k||(d=g.b.yn(f,e,d),b.ac(d)))c=this.za.vs(h,l,-2,!1),this.bz(e,l,a),
this.az(e,h,k)}else null==this.ib&&(this.ib=new g.yb),this.ib.ed(l),this.ib.vd(h),h=this.ib.Gd(e,!0),0>h?(h=this.za.ge(a),this.za.kd(a,-1),c=this.za.qm(-3),this.az(e,h,k)):1<h&&(h=this.za.bb(k),this.za.kd(k,-1),c=this.za.vs(-1,h,-3,!1),this.bz(e,h,a));return c};b.prototype.bz=function(e,c,a){if(c!=a){var k=this.za.da(c),n=this.za.bb(c),u=new g.b,d=new g.b;for(this.oh.w(k,u);c!=a&&2<this.za.size(-1);){this.oh.w(this.za.da(n),d);k=g.b.yn(d,e,u);if(b.ac(k))break;k=c;c=n;u.J(d);n=this.za.bb(c);this.oh.kd(k)}}};
b.prototype.az=function(e,c,a){if(c==a)return a;var k=this.za.da(c),n=this.za.ge(c),u=new g.b,d=new g.b;for(this.oh.w(k,u);c!=a&&2<this.za.size(-1);){this.oh.w(this.za.da(n),d);k=g.b.yn(u,e,d);if(b.ac(k))break;k=c;c=n;u.J(d);n=this.za.ge(c);this.oh.kd(k)}return c};b.Bd=function(b,e,c){var k=new g.$k;k.set(e.x);k.sub(b.x);var n=new g.$k;n.set(c.y);n.sub(b.y);var a=new g.$k;a.set(e.y);a.sub(b.y);e=new g.$k;e.set(c.x);e.sub(b.x);k.Ap(n);a.Ap(e);k.sub(a);return k};b.ac=function(b){return 0>b};b.ti=function(b){return 0<
b};b.ao=function(b){return 0==b};return b}();g.Tr=b})(w||(w={}));(function(g){var a=function(){function a(c){this.oe=this.a=null;this.WD=!0;this.oe=c}a.HE=function(c,b,e){c=g.Ia.As(c);return g.Sr.Vw(b.lk(),b.mk(),e.lk(),e.mk(),g.vi.Ty(c))};a.gL=function(c,b){var e=new g.Va;g.Sr.$P(c,b,e);return e};a.$=function(c,b,e,k){e=new a(e);e.a=c;e.ka=b;e.WD=k;return e.rJ()};a.prototype.lJ=function(c){return g.Sr.zM(this.a,c)};a.prototype.oJ=function(c){return g.Zu.$(this.a,c,this.oe)};a.prototype.rJ=function(){for(var c=
this.ka,b=g.Ia.As(c),c=g.Ia.UJ(c),e=1.00001*c,c=1.000001*c,k=!1,n=30<this.a.pd+10?1E3:(this.a.pd+10)*(this.a.pd+10),a=0,d=this.a.pO();;a++){if(a>n)throw g.g.ra("Internal Error: max number of iterations exceeded");var f=this.lJ(b),k=k||f;this.WD&&(f=0!=this.a.xo(b,!0,!1),k=k||f);f=!1;if(0==a||d||g.Zu.DE(!0,this.a,c,null,this.oe))f=this.oJ(e),k=k||f;if(!f)break}return k};return a}();g.aj=a})(w||(w={}));(function(g){var a=function(){function a(c){this.Ld=this.zc=null;this.Yb=c;this.hx=!0}a.prototype.et=
function(c,b){var e=this.a.cc(c);if(null==e){if(!this.a.Oc(c,b))return null;e=b}return e};a.prototype.LL=function(){var c=this.a.Gp(!1),b=!1,e=new g.yb,k=new g.yb,n=new g.i;n.Ja();var a=new g.i;a.Ja();for(var d=new g.Va,f=new g.gA,h=c.next();-1!=h;h=c.next()){var l=null,m=!1;if(!g.T.Km(this.a.Lb(c.mj))){l=this.et(h,e);if(null==l)continue;l.o(n);n.P(this.ka,this.ka);if(l.mg(this.ka))if(l.mg(0))m=!0,l=null;else continue}var p=this.a.Gp(c),z=p.next();for(-1!=z&&(z=p.next());-1!=z;z=p.next()){var q=null,
r=!1;if(!g.T.Km(this.a.Lb(p.mj))){q=this.et(z,k);if(null==q)continue;q.o(a);if(q.mg(this.ka))if(q.mg(0))r=!0,q=null;else continue}var v=0,x=0;if(null!=l&&null!=q)n.rD(a)&&(f.zn(l),f.zn(q),f.Ga(this.ka,!1),v=f.kk(0),x=f.kk(1),0<v+x&&(this.a.Tp(h,f,0,!0),this.a.Tp(z,f,1,!0)),f.clear());else if(null!=l){var y=new g.b;this.a.w(z,y);if(n.contains(y)){f.zn(l);this.a.Jk(z,d);f.Tw(this.ka,d,!1);v=f.kk(0);if(0<v)if(this.a.Tp(h,f,0,!0),r){r=-1;for(y=this.a.X(z);-1!=y&&y!=z&&(q=this.et(y,k),r=y,null!=q&&q.mg(0));y=
this.a.X(y));for(y=z;-1!=y&&(this.a.bh(y,f.nf),y!=r);y=this.a.X(y));}else this.a.bh(z,f.nf);f.clear()}}else if(null!=q){if(y=new g.b,this.a.w(h,y),a.P(this.ka,this.ka),a.contains(y)){f.zn(q);this.a.Jk(h,d);f.Tw(this.ka,d,!1);x=f.kk(0);if(0<x)if(this.a.Tp(z,f,0,!0),m){r=-1;for(y=this.a.X(h);-1!=y&&y!=h&&(q=this.et(y,k),r=y,null!=q&&q.mg(0));y=this.a.X(y));for(y=h;-1!=y&&(this.a.bh(y,f.nf),y!=r);y=this.a.X(y));}else this.a.bh(h,f.nf);f.clear()}}else continue;if(0!=v+x){if(0!=v){l=this.a.cc(h);if(null==
l){if(!this.a.Oc(h,e))continue;l=e;e.o(n)}else l.o(n);if(l.mg(this.ka))break}b=!0}}}return b};a.prototype.ML=function(){return this.HQ()};a.prototype.HQ=function(){return(new g.aA).GS(this.a,this.ka)};a.prototype.EE=function(){var c=!1,b,e;null==this.zc&&(this.zc=new g.bj);var k=new g.ga(0);k.xb(this.a.pd+1);for(var n=this.a.Gp(),a=n.next();-1!=a;a=n.next())k.add(a);this.a.Mu(k,k.size);k.add(-1);n=this.a.re();a=this.a.re();this.Ld=new g.hA(this.a,this.ka,!this.hx);this.zc.Hn(this.Ld);var d=new g.ga(0),
f=new g.ga(0),h=0;new g.b;var l=this.a.cd;this.a.wb.kc();for(var m=this.a.wb.Ba[0].f,p,z,q=k.get(h++);-1!=q;){z=l.O(q,0);p=m[2*z];z=m[2*z+1];var r=p,v=z;do{var x=l.O(q,2),y=l.O(q,1);-1!=x&&(b=l.O(x,0),e=m[2*b],b=m[2*b+1],0>(v<b?-1:v>b?1:r<e?-1:r>e?1:0)&&(f.add(q),f.add(x)));-1!=y&&(b=l.O(y,0),e=m[2*b],b=m[2*b+1],0>(v<b?-1:v>b?1:r<e?-1:r>e?1:0)&&(f.add(y),f.add(y)));e=this.a.Ra(q,n);-1!=e&&(d.add(e),this.a.lb(q,n,-1));e=this.a.Ra(q,a);-1!=e&&(d.add(e),this.a.lb(q,a,-1));q=k.get(h++);-1!==q&&(v=l.O(q,
0),r=m[2*v],v=m[2*v+1])}while(-1!=q&&r===p&&v===z);r=1==d.size&&2==f.size;e=v=-1;x=0;for(y=d.size;x<y;x++){b=d.get(x);var w=this.zc.ge(b);-1==w||d.Nw(w)||(v=w);b=this.zc.bb(b);-1==b||d.Nw(b)||(e=b);if(-1!=v&&-1!=e)break}this.Ld.XF(z,p);x=0;for(y=d.size;x<y;x++)b=d.get(x),this.zc.kd(b,-1);d.clear(!1);if(!r&&-1!=v&&-1!=e&&this.SK(v,e)){c=!0;this.ei=this.Ld.rl();break}x=0;for(y=f.size;x<y;x+=2){z=f.get(x);p=f.get(x+1);r?(z=this.zc.vs(v,e,z,!0),r=!1):z=this.zc.addElement(z,-1);if(this.Ld.Zf){this.ei=
this.Ld.rl();c=!0;break}-1==this.a.Ra(p,n)?this.a.lb(p,n,z):this.a.lb(p,a,z)}if(c)break;f.cf(0)}this.a.bf(n);this.a.bf(a);return c};a.prototype.SK=function(c,b){this.Ld.compare(this.zc,this.zc.da(c),b);c=this.Ld.Zf;this.Ld.lq();return c};a.Gh=function(c){for(var b=c.$c;-1!=b;b=c.we(b))if(g.T.Kc(c.Lb(b)))return!0;return!1};a.Yk=function(c,b,e,k){if(!a.Gh(c))return!1;b=new a(k);b.a=c;b.ka=e;if(15>c.pd)c=b.LL();else return b.ML();return c};a.$=function(c,b,e){return a.Yk(c,c.wC(),b,e)};a.DE=function(c,
b,e,k,n){if(!a.Gh(b))return!1;var u=new a(n);u.a=b;u.ka=e;u.hx=c;if(u.EE())return null!=k&&k.aq(u.ei),!0;var d=new g.Bg;d.Oy();b.Oe(d);u=new a(n);u.a=b;u.ka=e;u.hx=c;c=u.EE();d.Oy();b.Oe(d);return c?(null!=k&&k.aq(u.ei),!0):!1};return a}();g.Zu=a})(w||(w={}));(function(g){(function(b){b[b.Left=0]="Left";b[b.Right=1]="Right";b[b.Coincident=2]="Coincident";b[b.Undefined=3]="Undefined";b[b.Uncut=4]="Uncut"})(g.ZG||(g.ZG={}));var a=function(){return function(b,c,n,g,a,d,f,h,l,m,p){this.U=b;this.cu=c;
this.Yq=n;this.ag=g;this.Il=m;this.xk=p}}();g.yT=a;var d=function(){function b(b,e){this.jE=b;this.Zh=e}b.prototype.nJ=function(b,e){var c=new g.b;this.Zh.w(b,c);var k=new g.b;this.Zh.w(e,k);c=c.compare(k);if(0!=c)return c;c=this.Zh.Ra(b,this.jE);k=this.Zh.Ra(e,this.jE);return c<k?-1:c==k?0:1};return b}(),c=function(){return function(b,c,n,g,a,d,f,h,l){this.ag=b;this.Yq=c;this.Lx=n;this.sE=g;this.Wh=a;this.xk=d;this.Il=f;this.tE=h;this.RP=l}}();g.xT=c;var b=function(){function b(){}b.YG=function(e,
c,u,d,f,h){if(c.s())e=new a(c,4,-1,-1,NaN,4,-1,-1,NaN,-1,-1,NaN,-1,-1,NaN),f.push(e);else{var k=new g.fd;k.Eb(c);k.Eb(u);g.aj.$(k,d,h,!0);c=0;u=k.re();for(d=k.$c;-1!=d;d=k.we(d))for(h=k.Vb(d);-1!=h;h=k.bc(h))for(var n=k.Cb(h),B=0,G=k.Ha(h);B<G;n=k.X(n),B++)k.lb(n,u,c++);c=b.qM(u,k);b.CI(e,c,k,f)}};b.qM=function(e,c){for(var k=c.pd,n=new g.ga(0),a=c.$c;-1!=a;a=c.we(a))for(var f=c.Vb(a);-1!=f;f=c.bc(f))for(var h=c.Cb(f),l=0,m=c.Ha(f);l<m;h=c.X(h),l++)n.add(h);var p=new d(e,c);n.xd(0,k,function(b,e){return p.nJ(b,
e)});e=[];var z=[],q=c.re(),r=c.re(),a=c.$c,f=c.we(a),m=new g.b,v=new g.b,x=n.get(0),y=c.rd(x),w=c.Vf(y);c.w(x,m);for(var C=1,h=0;C<k-1;){for(var t=!1,l=C;l<k;l++)if(l!=h){var D=n.get(l),E=c.rd(D),F=c.Vf(E);c.w(D,v);if(m.ub(v))w==a&&F==f&&(t=b.SI(q,r,c,e,z,y,x,E,D));else break}if(t||h==C-1){t&&h==C-1&&C--;if(++h==k)break;x=n.get(h);y=c.rd(x);w=c.Vf(y);c.w(x,m)}t||(C=h+1)}k=[];for(a=c.$c;-1!=a;a=c.we(a))for(f=c.Vb(a);-1!=f;f=c.bc(f))for(n=c.Cb(f),l=0,m=c.Ha(f);l<m;n=c.X(n),l++){h=c.Ra(n,r);if(0<=h)for(;h<
z.length&&z[h].ag==n;)k.push(z[h++]);h=c.Ra(n,q);if(0<=h)for(;h<e.length&&e[h].ag==n;)k.push(e[h++])}c.bf(q);c.bf(r);return k};b.SI=function(e,c,g,a,d,f,h,l,m){var k=g.hk(f),n=g.hk(l),u=g.Cb(f),B=g.Cb(l),G=g.Ua(h),I=g.Ua(m),p=!1,z=!1,q=!1,r=!1;h!=u&&(m!=B&&(p=b.VI(e,g,a,f,G,l,I)),m!=n&&(z=b.YI(e,g,a,f,G,l,m)));h!=k&&(m!=B&&(q=b.aJ(c,g,d,f,h,l,I,u)),m!=n&&(r=b.dJ(c,g,d,f,h,l,m,u)));p&&z&&q?(e=a.length-1,2==d[r?d.length-2:d.length-1].Wh&&(a[e-1]=a[e],--a.length)):p&&z&&r&&2==d[d.length-1].Wh&&(d=a[a.length-
1],--a.length,g.Ra(d.ag,e)==a.length&&g.lb(d.ag,e,-1));return p||z||q||r};b.VI=function(b,e,a,d,f,h,l){var k,n;n=new g.yb;var u=new g.yb,B=[0,0],G=[0,0];k=e.cc(f);null==k&&(e.Oc(f,n),k=n);n=e.cc(l);null==n&&(e.Oc(l,u),n=u);k=k.Ga(n,null,B,G,0);2>k&&(d=new c(f,d,B[0],NaN,k,l,h,G[0],NaN),a.push(d),d=e.Ra(f,b),0>d&&e.lb(f,b,a.length-1));return!0};b.YI=function(b,e,a,d,f,h,l){var k,n;n=new g.yb;var u=new g.yb,B=[0,0],G=[0,0];k=e.cc(f);null==k&&(e.Oc(f,n),k=n);n=e.cc(l);null==n&&(e.Oc(l,u),n=u);k=k.Ga(n,
null,B,G,0);return 2>k?(d=new c(f,d,B[0],NaN,k,l,h,G[0],NaN),a.push(d),d=e.Ra(f,b),0>d&&e.lb(f,b,a.length-1),!0):!1};b.aJ=function(b,e,a,d,f,h,l,m){var k,n;n=new g.yb;var u=new g.yb,B=[0,0],G=[0,0];k=e.cc(f);null==k&&(e.Oc(f,n),k=n);n=e.cc(l);null==n&&(e.Oc(l,u),n=u);k=k.Ga(n,null,B,G,0);if(2==k)return d=new c(f,d,B[0],B[1],k,l,h,G[0],G[1]),a.push(d),d=e.Ra(f,b),0>d&&e.lb(f,b,a.length-1),!0;u=!1;f==m&&(d=new c(f,d,B[0],NaN,k,l,h,G[0],NaN),a.push(d),d=e.Ra(f,b),0>d&&e.lb(f,b,a.length-1),u=!0);return u};
b.dJ=function(b,e,a,d,f,h,l,m){var k,n;n=new g.yb;var u=new g.yb,B=[0,0],G=[0,0];k=e.cc(f);null==k&&(e.Oc(f,n),k=n);n=e.cc(l);null==n&&(e.Oc(l,u),n=u);k=k.Ga(n,null,B,G,0);if(2==k)return d=new c(f,d,B[0],B[1],k,l,h,G[0],G[1]),a.push(d),d=e.Ra(f,b),0>d&&e.lb(f,b,a.length-1),!0;u=!1;f==m&&(d=new c(f,d,B[0],NaN,k,l,h,G[0],NaN),a.push(d),d=e.Ra(f,b),0>d&&e.lb(f,b,a.length-1),u=!0);return u};b.CI=function(e,c,u,d){var k,n=[];n[0]=new g.b;n[1]=new g.b;n[2]=new g.b;n[3]=new g.b;var f=new g.b,B=new g.b,h=
new g.b,l=new g.b,m=null;null!=d&&(m=new g.Ag,m.mq());var p,z=0,q=null,r=new g.yb;new g.yb;for(var v=u.Vb(u.$c);-1!=v;v=u.bc(v)){var x,y=4,w=-1,C,t,D,E=-1,F,H,Q,K,A=-1,J=-1,L=NaN;x=!0;var M=!1,N=!0,O=!0,S=!0,T=0;D=v;F=0;for(var R=u.Cb(v),W=u.Ha(v),U=0;U<W;R=u.X(R),U++){p=u.cc(R);if(null==p){if(!u.Oc(R,r))continue;p=r}-1==E&&(E=R);for(var P=0;z<c.length&&R==c[z].ag;){w=c[z].Yq;C=c[z].ag;t=c[z].Lx;H=c[z].Il;Q=c[z].xk;K=c[z].tE;if(2==c[z].Wh){if(M||(D=w,E=C,F=t,A=H,J=Q,L=K,y=2,null!=d?q=new g.Xa:T=0,
S=!1,O=!0),t=c[z].sE,K=c[z].RP,null!=d?(p.Bi(P,c[z].sE,m),q.Bc(m.get(),O)):T++,P=t,M=!0,O=x=!1,z+1==c.length||2!=c[z+1].Wh||c[z+1].ag==C&&c[z+1].Lx!=P)null!=d?(k=new a(q,2,w,C,t,y,D,E,F,H,Q,K,A,J,L),d.push(k)):null.add(T),D=w,E=C,F=t,A=H,J=Q,L=K,y=2,M=x=!1,O=S=!0}else{var Y=u.X(C);if(z<c.length-1&&c[z+1].ag==Y&&c[z+1].xk==Q&&2==c[z+1].Wh)t!=P&&(S&&(null!=d?q=new g.Xa:T=0),x=0<z&&c[z-1].Yq==w?1==y?0:0==y?1:3:3,null!=d?(p.Bi(P,t,m),q.Bc(m.get(),O),k=new a(q,x,w,C,t,y,D,E,F,H,Q,K,A,J,L),d.push(k)):(T++,
null.add(T)),P=t,D=w,E=C,F=t,A=H,J=Q,L=K,y=x,x=N=!1,O=S=!0);else if(!b.KK(e,u,c,z,f,B)){b.KG(u,c,z,v,R,h,l);var X=!1,Y=!1;k=!0;if(!(f.ub(h)||B.ub(h)||f.ub(l)||B.ub(l))){n[0].J(f);n[1].J(B);n[2].J(h);n[3].J(l);n.sort(g.b.cq);var da=n[0],ea=n[1],fa=n[2],ga=n[3];da.ub(f)?ea.ub(B)?e?(Y=X=!0,k=!1):X=!1:ga.ub(B)?e?k=Y=X=!0:X=!1:(X=!0,k=ea.ub(h)):ea.ub(f)?fa.ub(B)?e?(Y=X=!0,k=!1):X=!1:da.ub(B)?e?k=Y=X=!0:X=!1:(X=!0,k=fa.ub(h)):fa.ub(f)?ga.ub(B)?e?(Y=X=!0,k=!1):X=!1:ea.ub(B)?e?k=Y=X=!0:X=!1:(X=!0,k=ga.ub(h)):
da.ub(B)?e?(Y=X=!0,k=!1):X=!1:fa.ub(B)?e?k=Y=X=!0:X=!1:(X=!0,k=da.ub(h))}if(X){X=R==C;if(t!=P||X&&0==P)S&&(null!=d?q=new g.Xa:T=0),null!=d?(p.Bi(P,t,m),q.Bc(m.get(),O)):T++;if(k)if(1!=y){if(t!=P||X&&0==P)null!=d?(k=new a(q,1,w,C,t,y,D,E,F,H,Q,K,A,J,L),d.push(k)):null.add(T);if(!Y)y=1;else if(z==c.length-2||c[z+2].Yq!=w)y=0}else{if(t!=P||X&&0==P)null!=d?(k=new a(q,3,w,C,t,y,D,E,F,H,Q,K,A,J,L),d.push(k)):null.add(T);y=1}else if(0!=y){if(t!=P||X&&0==P)null!=d?(k=new a(q,0,w,C,t,y,D,E,F,H,Q,K,A,J,L),
d.push(k)):null.add(T);if(!Y)y=0;else if(z==c.length-2||c[z+2].Yq!=w)y=1}else{if(t!=P||X&&0==P)null!=d?(k=new a(q,3,w,C,t,y,D,E,F,H,Q,K,A,J,L),d.push(k)):null.add(T);y=0}if(t!=P||X&&0==P)P=t,D=w,E=C,F=t,A=H,J=Q,L=K,x=N=!1,O=S=!0}}}z++}1!=P&&(S&&(null!=d?q=new g.Xa:T=0),null!=d?(p.Bi(P,1,m),q.Bc(m.get(),O)):T++,O=S=!1,N=!0)}N&&(t=1,C=u.hk(v),C=u.Ua(C),Q=H=-1,K=NaN,x?null!=d?(k=new a(q,4,w,C,t,y,D,E,F,H,Q,K,A,J,L),d.push(k)):null.add(T):(x=1==y?0:0==y?1:3,null!=d?(k=new a(q,x,w,C,t,y,D,E,F,H,Q,K,A,
J,L),d.push(k)):null.add(T)))}};b.KK=function(e,c,a,d,f,h){var k=a[d].tE;if(1==k)return b.GJ(e,c,a,d,f,h);if(0==k)return b.dK(e,c,a,d,f,h);throw g.g.wa();};b.GJ=function(b,e,c,a,d,f){var k=new g.yb,n=c[a].ag,u=c[a].Il,B=c[a].xk,h=-1,G=-1,l=-1,m=-1;if(!b&&0<a)var I=c[a-1],h=I.ag,G=I.Il,l=I.xk,m=I.Wh;var z=-1,p=-1,q=-1,r=-1;a<c.length-1&&(I=c[a+1],z=I.ag,p=I.Il,q=I.xk,r=I.Wh);var v=e.X(n),I=e.X(B);if(!b)return 0<a&&h==n&&G==u&&l==I&&2==m||a<c.length-1&&z==v&&p==u&&q==I&&2==r?(b=e.cc(B),null==b&&(e.Oc(B,
k),b=k),f.J(b.Pf(1)),d.qr(f),f.normalize(),d.normalize(),!1):a<c.length-1&&z==n&&p==u&&q==I?(b=e.cc(B),null==b&&(e.Oc(B,k),b=k),d.J(b.Pf(1)),b=e.cc(I),null==b&&(e.Oc(I,k),b=k),f.J(b.Pf(0)),d.Bp(),f.normalize(),d.normalize(),!1):!0;if(a==c.length-1||z!=n||p!=u||q!=I||2==r)return b=e.cc(B),null==b&&(e.Oc(B,k),b=k),f.J(b.Pf(1)),d.qr(f),f.normalize(),d.normalize(),!1;b=e.cc(B);null==b&&(e.Oc(B,k),b=k);d.J(b.Pf(1));b=e.cc(I);null==b&&(e.Oc(I,k),b=k);f.J(b.Pf(0));d.Bp();f.normalize();d.normalize();return!1};
b.dK=function(b,e,c,a,d,f){var k=new g.yb,n=c[a].ag,u=c[a].Il,B=c[a].xk,h=-1,G=-1,l=-1,m=-1;if(!b&&a<c.length-1)var I=c[a+1],h=I.ag,G=I.Il,l=I.xk,m=I.Wh;var z=-1,p=-1,q=-1,I=-1;0<a&&(I=c[a-1],z=I.ag,p=I.Il,q=I.xk,I=I.Wh);var r=e.X(n),v=e.Ua(B);return b?0==a||z!=n||p!=u||q!=v||2==I?(b=e.cc(B),null==b&&(e.Oc(B,k),b=k),f.J(b.Pf(0)),d.qr(f),f.normalize(),d.normalize(),!1):!0:0<a&&z==n&&p==u&&q==v&&2==I||a<c.length-1&&h==r&&G==u&&l==v&&2==m?(b=e.cc(B),null==b&&(e.Oc(B,k),b=k),f.J(b.Pf(0)),d.qr(f),f.normalize(),
d.normalize(),!1):!0};b.KG=function(b,e,c,a,d,f,h){var k=new g.yb,n=b.cc(d);null==n&&(b.Oc(d,k),n=k);c=e[c];e=c.ag;c=c.Lx;d=b.X(e);if(1==c)f.J(n.Pf(1)),-1!=d&&d!=b.hk(a)?(n=b.cc(d),null==n&&(b.Oc(d,k),n=k),h.J(n.Pf(0)),n=b.cc(e),null==n&&b.Oc(e,k)):h.J(f),f.Bp(),h.normalize(),f.normalize();else if(0==c)h.J(n.Pf(c)),f.qr(h),h.normalize(),f.normalize();else throw g.g.wa();};return b}();g.$G=b})(w||(w={}));(function(g){(function(b){b[b.Linear=0]="Linear";b[b.Angular=1]="Angular";b[b.Area=2]="Area"})(g.RI||
(g.RI={}));var a=function(){function b(b,e,c){this.Nc=e;this.Dj=c;this.wx=b}b.PC=function(e){return 0!==e.Nc?null:-1===e.wx?new b(-1,2,e.Dj*e.Dj):b.Qd(k[e.wx])};b.Qd=function(b){b=e[b];return void 0===b?null:b};b.EL=function(e,c,k){var n=null;if(void 0!==k&&null!==k)try{"EPSG"===k.values[0]&&(n=b.Qd(parseInt(k.values[1])))}catch(Z){}null===n&&(n=new b(-1,e,c));return n};b.prototype.Qc=function(){return this.wx};b.prototype.rC=function(b){if(b.Nc!=this.Nc)throw g.g.xa();return this.Dj/b.Dj};b.ih=function(b,
e,c){return e.rC(c)*b};b.OB=function(b,e,c,k,n){c=c.rC(k);for(k=0;k<e;k++)n[k]=b[k]*c};return b}();g.Tb=a;for(var d=[109402,4046.8564224,109403,4046.87260987425,109463,100,109401,1E4,109461,225E8,109460,25E8,109451,1E-4,109444,404.68564224000005,109424,404.6849341289498,109428,404.68493792602754,109416,404.67838076760535,109420,404.68423895571647,109448,404.683871963536,109411,404.6872609874253,109450,.01,109408,3.34450944,109405,.09290304,109430,.09290354800069446,109423,.0929028774400711,109427,
.09290287831176021,109441,.09290349665192114,109407,.09290137299531805,109440,.09290286332673177,109431,.09290274144751023,109432,.09290207073852812,109433,.09290279616016,109434,.09290273520025,109419,.09290271785025629,109447,.0929026336004445,109406,.09290341161327487,109453,6.4516E-4,109454,6.451625806477421E-4,109414,1E6,109445,.04046856422400001,109425,.04046849341289498,109429,.04046849379260275,109417,.04046783807676053,109421,.04046842389557164,109449,.0404683871963536,109412,.04046872609874253,
109404,1,109410,1.000027193184865,109413,2589998.4703195216,109452,1E-6,109409,3429904,109458,3434290.937856,109457,3434528.1495040003,109464,1.244521604938272E-7,109455,25.292852640000003,109456,25.29295381171408,109459,2.89612324,109439,2589988.110336,109462,.7168473118308245,109442,.83612736,109422,.83612589696064,109426,.836125904805842,109415,.8361123569578626,109435,.836124673027592,109436,.836118636646753,109437,.8361251654414399,109438,.83612461680225,109418,.8361244606523066,109446,.8361237024040001,
109443,.8361307045194736],c=[9103,2.908882086657216E-4,9104,4.84813681109536E-6,9102,.0174532925199433,9106,.01570796326794897,9105,.01570796326794897,9109,1E-6,9114,9.817477042468104E-4,1031,4.84813681109536E-9,9112,1.570796326794897E-4,9101,1,9113,1.570796326794897E-6],b=[109031,15E4,109461,109030,5E4,109460,1033,.01,109451,9097,20.1168,109444,9052,20.1167824,109424,9062,20.116782494375872,109428,9038,20.1166195164,109416,9042,20.116765121552632,109420,9301,20.116756,109448,9033,20.11684023368047,
109411,109005,.1,109450,9014,1.8288,109408,9002,.3048,109405,9070,.3048008333333334,109430,9051,.3047997333333333,109423,9061,.3047997347632708,109427,9095,.3048007491,109441,9005,.3047972654,109407,9094,.3047997101815088,109440,9080,.3047995102481469,109431,9081,.30479841,109432,9082,.3047996,109433,9083,.3047995,109434,9041,.304799471538676,109419,9300,.3047993333333334,109447,9003,.3048006096012192,109406,109008,.0254,109453,109009,.0254000508001016,109454,9036,1E3,109414,9098,.201168,109445,9053,
.201167824,109425,9063,.2011678249437587,109429,9039,.201166195164,109417,9043,.2011676512155263,109421,9302,.20116756,109449,9034,.2011684023368047,109412,9001,1,109404,9031,1.0000135965,109410,9035,1609.3472186944375,109413,1025,.001,109452,9030,1852,109409,109013,1853.184,109458,109012,1853.248,109457,109016,3.527777777777778E-4,109464,109010,5.0292,109455,109011,5.029210058420118,109456,109014,1.7018,109459,9093,1609.344,109439,109015,.8466683600033867,109462,9096,.9144,109442,9050,.9143992,109422,
9060,.9143992042898124,109426,9037,.9143917962000001,109415,9084,.9143985307444408,109435,9085,.91439523,109436,9086,.9143988,109437,9087,.9143985,109438,9040,.9143984146160287,109418,9099,.914398,109446,109002,.9144018288036576,109443,109001,.9144,109442,109003,20.1168,109444,109004,.201168,109445,109006,.01,109451,109007,.001,109452],e=[],k=[],n=0;n<d.length;n+=2)e[d[n]]=new a(d[n],2,d[n+1]);d=null;for(n=0;n<c.length;n+=2)e[c[n]]=new a(c[n],1,c[n+1]);c=null;for(n=0;n<b.length;n+=3)e[b[n]]=new a(b[n],
0,b[n+1]),k[b[n]]=b[n+2];b=null})(w||(w={}));(function(g){var a=function(){function g(){}g.prototype.set=function(c,b){void 0!==b?(this.Lf=c,this.Og=b):"number"===typeof c?(this.Lf=c,this.Og=0):(this.Lf=c.Lf,this.Og=c.Og)};g.prototype.value=function(){return this.Lf};g.prototype.sub=function(c){if("number"===typeof c){var b=this.Lf-c;c=this.Og+2.220446049250313E-16*Math.abs(b)}else b=this.Lf-c.Lf,c=this.Og+c.Og+2.220446049250313E-16*Math.abs(b);this.Lf=b;this.Og=c};g.prototype.Ap=function(c){var b=
this.Lf*c.Lf;this.Og=this.Og*Math.abs(c.Lf)+c.Og*Math.abs(this.Lf)+this.Og*c.Og+2.220446049250313E-16*Math.abs(b);this.Lf=b};g.prototype.eP=function(){return Math.abs(this.Lf)<=this.Og};g.prototype.Dq=function(){return this.eP()&&0!=this.Og};return g}();g.$k=a})(w||(w={}));var L=new w.b,J=new w.b,M=new w.b,S=new w.b,N=new w.b;(function(g){var a;(function(c){c[c.closedPath=1]="closedPath";c[c.exteriorPath=2]="exteriorPath";c[c.ringAreaValid=4]="ringAreaValid"})(a||(a={}));var d=function(){function c(b,
e,c,n,g,a,d){void 0!==e?(this.ab=b,this.mj=e,this.$j=c,this.zh=n,this.ua=a,this.mx=d,this.Pt=g):(this.ab=b.ab,this.mj=b.mj,this.$j=b.$j,this.zh=b.zh,this.ua=b.ua,this.mx=b.mx,this.Pt=b.Pt);this.JD=!0}c.prototype.next=function(){return this.JD?(this.JD=!1,this.zh):-1!=this.zh?(this.zh=this.ab.X(this.zh),this.ua++,-1!=this.zh&&this.zh!=this.Pt?this.zh:this.cQ()):-1};c.prototype.cQ=function(){this.$j=this.ab.bc(this.$j);for(this.ua=0;-1!=this.mj;){for(;-1!=this.$j;this.$j=this.ab.bc(this.$j))if(this.Pt=
this.zh=this.ab.Cb(this.$j),-1!=this.zh)return this.zh;this.mj=this.ab.we(this.mj);if(-1==this.mj)break;if(!this.mx||g.T.Kc(this.ab.Lb(this.mj)))this.$j=this.ab.Vb(this.mj)}return-1};c.UL=function(b,e,k,n,g,a,d){return new c(b,e,k,n,g,a,d)};return c}();g.CT=d;a=function(){function c(){this.Zm=this.Al=this.Ej=this.Mc=this.Jj=this.jn=this.fi=this.Rc=this.sh=this.wg=this.Ge=this.wp=this.zp=this.wb=this.Hk=null;this.Xt=this.$c=-1;this.pd=0;this.kx=!1;this.wp=this.zp=this.wb=null}c.prototype.Fi=function(b){return null!=
this.Ge?this.Ge[b]:null};c.prototype.Fh=function(b,e){if(null==this.Ge){if(null==e)return;this.Ge=[];for(var c=0,n=this.wb.F();c<n;c++)this.Ge.push(null)}this.Ge[b]=e};c.prototype.Mn=function(b,e){this.Rc.L(b,1,e)};c.prototype.Ln=function(b,e){this.Rc.L(b,2,e)};c.prototype.Iy=function(b,e){this.Rc.L(b,6,e)};c.prototype.Ho=function(b){return this.Rc.O(b,6)};c.prototype.Hu=function(b,e){this.Rc.L(b,7,e)};c.prototype.bt=function(b){return this.Rc.O(b,0)};c.prototype.MF=function(b,e){this.Mc.L(b,1,e)};
c.prototype.QF=function(b,e){this.Mc.L(b,0,e)};c.prototype.xC=function(b){return this.Mc.O(b,7)};c.prototype.Jn=function(b,e){this.Mc.L(b,3,e)};c.prototype.Kn=function(b,e){this.Mc.L(b,4,e)};c.prototype.jQ=function(b){null==this.Mc&&(this.Mc=new g.Fc(8));var e=this.Mc.be();this.Mc.L(e,2,b);this.Mc.L(e,5,0);this.Mc.L(e,6,0);this.Mc.L(e,7,e);return e};c.prototype.bN=function(b){this.Mc.Jc(b)};c.prototype.lQ=function(b){null==this.Rc&&(this.Rc=new g.Fc(8),this.cd=new g.Fc(5),this.fi=new g.qd(0),this.jn=
new g.qd(0));var e=this.Rc.be();this.Rc.L(e,0,e);this.Rc.L(e,3,0);this.Rc.L(e,6,0);this.Hu(e,b);e>=this.fi.size&&(b=16>e?16:g.I.truncate(3*e/2),this.fi.resize(b),this.jn.resize(b));this.fi.set(e,0);this.jn.set(e,0);return e};c.prototype.iC=function(b){this.Rc.Jc(b)};c.prototype.dw=function(b){this.cd.Jc(b);this.pd--};c.prototype.mQ=function(b){null==this.Rc&&(this.Rc=new g.Fc(8),this.cd=new g.Fc(5),this.fi=new g.qd(0),this.jn=new g.qd(0));var e=this.cd.be(),c=0<=b?b:e;this.cd.L(e,0,c);if(0>b){if(c>=
this.wb.F()){b=16>c?16:g.I.truncate(3*c/2);this.wb.resize(b);if(null!=this.Ge)for(var n=0;n<b;n++)this.Ge.push(null);null!=this.wg&&this.wg.resize(b);this.zp=this.wb.mc(0)}this.wb.ic(c,-1E38,-1E38);null!=this.Ge&&(this.Ge[c]=null);null!=this.wg&&this.wg.write(c,1)}this.cd.L(e,4,2*c);this.pd++;return e};c.prototype.vl=function(b,e,c){var k=-1!=e?this.Ua(e):this.hk(b),g=-1!=k?this.X(k):-1,a=this.mQ(null==c?this.pd:-1),d=this.gb(a);null!=c&&this.wb.Iu(d,c);this.im(a,b);this.Sc(a,g);this.Tc(a,k);-1!=
g&&this.Tc(g,a);-1!=k&&this.Sc(k,a);c=this.vc(b);k=this.Cb(b);-1==e&&this.Wi(b,a);e==k&&this.Dh(b,a);c&&-1==g&&(this.Sc(a,a),this.Tc(a,a));this.hm(b,this.Ha(b)+1);b=this.Vf(b);this.Pk(b,this.F(b)+1);return a};c.prototype.Fo=function(){null==this.Zm&&(this.Zm=new g.Va(this.wb.description));return this.Zm};c.prototype.Pp=function(b,e){this.Mc.L(b,2,this.Mc.O(b,2)&-134217729||(1==e?134217728:0))};c.prototype.Cm=function(b){return 0!=(this.Mc.O(b,2)&134217728)?1:0};c.prototype.MJ=function(b){var e=this.jg(b.D(),
b.description);1736==b.D()&&this.Pp(e,b.Cm());this.WA(e,b);return e};c.prototype.NJ=function(b){var e=this.jg(b.D(),b.description);this.XA(e,b);return e};c.prototype.TQ=function(b,e){null==this.Rc&&(this.Rc=new g.Fc(8),this.cd=new g.Fc(5),this.fi=new g.qd(0),this.jn=new g.qd(0));this.Rc.de(this.Rc.Xc+b);this.cd.de(this.cd.Xc+e);this.fi.xb(this.fi.size+b);this.jn.xb(this.jn.size+b)};c.prototype.WA=function(b,e){this.TQ(e.ea(),e.F());this.Hk.Pd(e,0,e.F());this.zp=this.wb.mc(0);for(var c=null!=this.Ge&&
null!=e.Fe,n=0,a=e.ea();n<a;n++)if(!(2>e.Ha(n))){var d=this.Cf(b,-1);this.Gn(d,e.vc(n));for(var f=e.Ea(n),h=e.Dc(n);f<h;f++){var l=this.vl(d,-1,null);if(c)if(l=this.gb(l),0!=(e.NC(f)&1))this.Fh(l,null);else{var m=new g.Ag;e.cc(f,m,!0);this.Fh(l,m.get())}}}};c.prototype.XA=function(b,e){this.Hk.Pd(e,0,e.F());this.zp=this.wb.mc(0);b=this.Cf(b,-1);var c=0;for(e=e.F();c<e;c++)this.vl(b,-1,null)};c.prototype.DS=function(b,e,c){var k=this.X(b);if(-1==k)throw g.g.wa();for(var a=this.Fo(),d=this.rd(b),f=
0,h=e.kk(c);f<h;f++){var l=this.gb(b),m=this.X(b),z=e.Io(c,f);0==f&&(z.En(a),this.bh(b,a));322==z.D()?this.Fh(l,null):this.Fh(l,g.T.Yj(z));z.Bn(a);f<h-1?b=this.vl(d,m,a):this.bh(k,a)}};c.prototype.CS=function(b,e,c){var k=this.X(b);if(-1==k)throw g.g.wa();for(var a=this.Fo(),d=this.rd(b),f=0,h=e.kk(c);f<h;f++){var l=this.gb(b),m=this.X(b),z=e.Io(c,h-f-1);0==f&&(z.Bn(a),this.bh(b,a));322==z.D()?this.Fh(l,null):this.Fh(l,g.T.Yj(z));z.En(a);f<h-1?b=this.vl(d,m,a):this.bh(k,a)}};c.prototype.wC=function(){var b=
new g.i;b.Ja();for(var e=this.Gp(),c=new g.b,n=!0,a=e.next();-1!=a;a=e.next())this.w(a,c),n?b.Db(c.x,c.y):b.Oj(c.x,c.y),n=!1;return b};c.prototype.Eb=function(b){var e=b.D();if(g.T.Kc(e))return this.MJ(b);if(550==e)return this.NJ(b);throw g.g.wa();};c.prototype.YJ=function(b,e){var c=e.D();if(g.T.Kc(c))this.WA(b,e);else if(550==c)this.XA(b,e);else throw g.g.wa();};c.prototype.QJ=function(b,e){var c=this.jg(1736,b.description);if(2>b.Ha(e))return c;this.Hk.Pd(b,b.Ea(e),b.Dc(e));this.zp=this.wb.mc(0);
var n=this.Cf(c,-1);this.Gn(n,b.vc(e)||!0);var a=null!=this.Ge&&null!=b.Fe,d=b.Ea(e);for(e=b.Dc(e);d<e;d++){var f=this.vl(n,-1,null);if(a)if(f=this.gb(f),0!=(b.NC(d)&1))this.Fh(f,null);else{var h=new g.Ag;b.cc(d,h,!0);this.Fh(f,h.get())}}return c};c.prototype.hf=function(b){var e=this.Lb(b),c=g.sH.jg(e,this.Hk.description),n=this.F(b);if(0==n)return c;if(g.T.Kc(e)){for(var e=this.ea(b),a=g.Ac.Dg(e+1),d=g.Ac.to(e+1,0),f=c.description,h=0,l=f.Aa;h<l;h++){for(var m=f.Hd(h),z=g.pa.Wa(m),p=g.Ac.Tv(m,n),
q=this.wb.mc(m),r=0,v=0,x=0,y=this.Vb(b);-1!=y;y=this.bc(y)){var w=0;this.vc(y)&&(w|=1);this.VO(y)&&(w|=4);0!=w&&d.xy(v,w);var C=this.Ha(y);a.write(v++,x);x+=C;if(0==m)for(var C=q,t=p,D=new g.b,w=this.Cb(y);r<x;w=this.X(w),r++){var E=this.gb(w);C.ec(2*E,D);t.Rn(2*r,D)}else for(w=this.Cb(y);r<x;w=this.X(w),r++)for(E=this.gb(w),t=0;t<z;t++)D=q.Bh(E*z+t),p.Uk(r*z+t,D)}c.bm(m,p);a.write(e,n)}c.NF(d);c.OF(a);c.ce(16777215)}else if(550==e){f=c.description;c.resize(n);h=0;for(l=f.Aa;h<l;h++){m=f.Hd(h);z=
g.pa.Wa(m);p=c.mc(m);q=this.wb.mc(m);r=0;y=this.Vb(b);C=this.Ha(y);for(w=this.Cb(y);r<C;w=this.X(w),r++)for(E=this.gb(w),t=0;t<z;t++)D=q.Bh(E*z+t),p.Uk(r*z+t,D);c.bm(m,p)}c.ce(16777215)}return c};c.prototype.sy=function(b){for(var e=this.Vb(b);-1!=e;e=this.Cr(e));var e=this.aO(b),c=this.we(b);-1!=e?this.MF(e,c):this.$c=c;-1!=c?this.QF(c,e):this.Xt=e;this.bN(b)};c.prototype.jg=function(b,e){return void 0===e?this.QB(b,g.Od.Tf()):this.QB(b,e)};c.prototype.QB=function(b,e){b=this.jQ(b);null==this.wb?
this.wb=this.Hk=new g.pe(e):this.Hk.Ik(e);this.wp=this.Hk.description;this.kx=1<this.wp.Aa;-1==this.$c?this.$c=b:(this.QF(b,this.Xt),this.MF(this.Xt,b));return this.Xt=b};c.prototype.we=function(b){return this.Mc.O(b,1)};c.prototype.aO=function(b){return this.Mc.O(b,0)};c.prototype.Lb=function(b){return this.Mc.O(b,2)&2147483647};c.prototype.EF=function(b,e,c){e=this.Ej[e];b=this.xC(b);b>=e.size&&e.resize(Math.max(g.I.truncate(1.25*b),16),-1);e.write(b,c)};c.prototype.yC=function(b,e){b=this.xC(b);
e=this.Ej[e];return b<e.size?e.read(b):-1};c.prototype.RB=function(){null==this.Ej&&(this.Ej=[]);for(var b=0;b<this.Ej.length;b++)if(null==this.Ej[b])return this.Ej[b]=g.Ac.Dg(0),b;this.Ej.push(g.Ac.Dg(0));return this.Ej.length-1};c.prototype.tR=function(b){this.Ej[b]=null};c.prototype.Vb=function(b){return this.Mc.O(b,3)};c.prototype.Ys=function(b){return this.Mc.O(b,4)};c.prototype.F=function(b){return this.Mc.O(b,5)};c.prototype.ea=function(b){return this.Mc.O(b,6)};c.prototype.xo=function(b,e,
c){for(var k=0,a=this.$c;-1!=a;a=this.we(a)){var d=this.Lb(a);if(g.T.Kc(d)&&(!c||1736==d))for(var d=1736==this.Lb(a),f=this.Vb(a);-1!=f;){for(var h=0,l=this.Cb(f);h<g.I.truncate(this.Ha(f)/2);){var m=this.X(l);if(-1==m)break;var z=this.gb(l),p=this.Fi(z);null!=p?z=p.$b():(p=this.gb(m),z=this.wb.mv(z,p));z<=b?(0==z?0==k&&(k=-1):k=1,m!=this.hk(f)&&(this.Zy(m,l),this.vf(m,!0))):l=this.X(l);h++}h=this.Cb(f);for(l=this.vc(f)?h:this.hk(f);0<this.Ha(f);)if(m=this.Ua(l),-1!=m){var q=this.gb(m),p=this.Fi(q);
null!=p?z=p.$b():(z=this.gb(l),z=this.wb.mv(z,q));if(z<=b)0==z?0==k&&(k=-1):k=1,this.Zy(m,l),this.vf(m,!1),h==m&&(h=this.Cb(f));else if(l=this.Ua(l),l==h)break}else{this.vf(l,!0);0==k&&(k=-1);break}l=this.Ha(f);e&&(d?3>l:2>l)?(f=this.Cr(f),k=0<l?1:0==k?-1:k):f=this.bc(f)}}return k};c.prototype.Zy=function(b,e){var c=this.gb(b),n=this.gb(e);null!=this.wg&&(c=this.wg.read(c),this.wg.write(n,c));if(null!=this.sh)for(n=0,c=this.sh.length;n<c;n++)if(null!=this.sh[n]){var g=this.Ra(b,n);-1!=g&&this.lb(e,
n,g)}};c.prototype.Mr=function(b,e,c){var k=0,a=this.X(b);if(-1==a)throw g.g.wa();for(var d=this.gb(b),f=this.gb(a),h=this.Fi(d),l=null==h?this.wb.mv(d,f):h.$b(),m=0;m<c;m++){var z=e[m];if(0<z&&1>z){var p=z;null!=h&&(p=0<l?h.rA(z)/l:0);this.wb.vJ(d,f,p,this.Fo());var q=this.vl(this.rd(b),a,this.Fo());k++;if(null!=h){var r=h.xm(0,z),p=this.gb(this.Ua(q));this.Fh(p,r);this.Yi(q,r.oc());if(m==c-1||1==e[m+1])z=h.xm(z,1),this.Fh(p,z)}}}return k};c.prototype.bh=function(b,e){var c=this.gb(b);this.wb.Iu(c,
e);c=this.Fi(c);null!=c&&c.setStart(e);b=this.Ua(b);-1!=b&&(b=this.gb(b),null!=this.Fi(b)&&c.setEnd(e))};c.prototype.Jk=function(b,e){b=this.gb(b);this.wb.Sd(b,e)};c.prototype.Yi=function(b,e){this.ic(b,e.x,e.y)};c.prototype.ic=function(b,e,c){var k=this.gb(b);this.wb.ic(k,e,c);k=this.Fi(k);null!=k&&k.Ny(e,c);b=this.Ua(b);-1!=b&&(b=this.gb(b),null!=this.Fi(b)&&k.Ok(e,c))};c.prototype.w=function(b,e){this.wb.w(this.cd.O(b,0),e)};c.prototype.uc=function(b,e){this.wb.Ba[0].ec(2*this.cd.O(b,0),e)};c.prototype.Fa=
function(b){var e=new g.b;this.wb.w(this.cd.O(b,0),e);return e};c.prototype.SC=function(b,e){this.zp.ec(2*b,e)};c.prototype.ld=function(b,e,c){return this.wb.ld(b,this.gb(e),c)};c.prototype.setAttribute=function(b,e,c,n){this.wb.setAttribute(b,this.gb(e),c,n)};c.prototype.gb=function(b){return this.cd.O(b,0)};c.prototype.mk=function(b){var e=new g.b;this.w(b,e);return e.y};c.prototype.Cq=function(b,e){b=this.gb(b);e=this.gb(e);var c=this.wb.Ba[0].f;return c[2*b]===c[2*e]&&c[2*b+1]===c[2*e+1]};c.prototype.pt=
function(b,e){b=this.gb(b);var c=this.wb.Ba[0].f;return c[2*b]===e.x&&c[2*b+1]===e.y};c.prototype.pS=function(b,e){1>e&&(e=1);if(null==this.wg){if(1==e)return;this.wg=g.Ac.kl(this.wb.F(),1)}b=this.gb(b);b>=this.wg.size&&this.wg.resize(b+1,1);this.wg.write(b,e)};c.prototype.RC=function(b){b=this.gb(b);return null==this.wg||b>=this.wg.size?1:this.wg.read(b)};c.prototype.lb=function(b,e,c){e=this.sh[e];b=this.gb(b);e.size<this.wb.F()&&e.resize(this.wb.F(),-1);e.write(b,c)};c.prototype.Ra=function(b,
e){b=this.gb(b);e=this.sh[e];return b<e.size?e.read(b):-1};c.prototype.re=function(){null==this.sh&&(this.sh=[]);for(var b=0;b<this.sh.length;b++)if(null==this.sh[b])return this.sh[b]=g.Ac.Dg(0,-1),b;this.sh.push(g.Ac.Dg(0,-1));return this.sh.length-1};c.prototype.bf=function(b){this.sh[b]=null};c.prototype.cc=function(b){return null!=this.Ge?(b=this.gb(b),this.Ge[b]):null};c.prototype.Oc=function(b,e){var c=this.cd.O(b,2);if(-1==c)return!1;if(this.kx){var n=new g.Va;this.Jk(b,n);e.setStart(n);this.Jk(c,
n);e.setEnd(n)}else this.wb.uc(this.cd.O(b,0),L),e.gl(0,L),this.wb.uc(this.cd.O(c,0),L),e.gl(1,L);return!0};c.prototype.gR=function(b,e,c){if(this.kx){var k=new g.Va;this.Jk(b,k);c.setStart(k);this.Jk(e,k);c.setEnd(k)}else this.wb.uc(b,L),c.gl(0,L),this.wb.uc(e,L),c.gl(1,L)};c.prototype.Cf=function(b,e){var c;if(-1!=e){if(b!=this.Vf(e))throw g.g.wa();c=this.wq(e)}else c=this.Ys(b);var n=this.lQ(b);-1!=e&&this.Mn(e,n);this.Ln(n,e);this.Mn(n,c);-1!=c?this.Ln(c,n):this.Jn(b,n);-1==e&&this.Kn(b,n);this.gm(b,
this.ea(b)+1);return n};c.prototype.aD=function(b,e,c,n){b=this.Cf(b,-1);for(var k=0,g=e,a=!1;g==c&&(a=!0),this.im(g,b),k++,g=this.X(g),g!=e;);this.Gn(b,!0);this.hm(b,k);a&&(e=c);this.Dh(b,e);this.Wi(b,this.Ua(e));this.Jr(b,!1);null!=n&&(n[0]=a);return b};c.prototype.Cr=function(b){var e=this.wq(b),c=this.bc(b),n=this.Vf(b);-1!=e?this.Ln(e,c):this.Jn(n,c);-1!=c?this.Mn(c,e):this.Kn(n,e);this.bL(b);this.gm(n,this.ea(n)-1);this.iC(b);return c};c.prototype.bL=function(b){var e=this.Cb(b);if(-1!=e){for(var c=
0,n=this.Ha(b);c<n;c++){var g=e,e=this.X(e);this.dw(g)}e=this.Vf(b);this.Pk(e,this.F(e)-this.Ha(b))}this.hm(b,0)};c.prototype.bc=function(b){return this.Rc.O(b,2)};c.prototype.wq=function(b){return this.Rc.O(b,1)};c.prototype.Ha=function(b){return this.Rc.O(b,3)};c.prototype.vc=function(b){return 0!=(this.Ho(b)&1)};c.prototype.Gn=function(b,e){if(this.vc(b)!=e){if(0<this.Ha(b)){var c=this.Cb(b),n=this.hk(b);e?(this.Sc(n,c),this.Tc(c,n)):(this.Sc(n,-1),this.Tc(c,-1));c=this.gb(n);this.Fh(c,null)}this.Iy(b,
(this.Ho(b)|1)-1|(e?1:0))}};c.prototype.Vf=function(b){return this.Rc.O(b,7)};c.prototype.VO=function(b){return 0!=(this.Ho(b)&2)};c.prototype.Dy=function(b,e){this.Iy(b,(this.Ho(b)|2)-2|(e?2:0))};c.prototype.Gw=function(b){if(this.bP(b))return this.fi.get(this.bt(b));var e=new g.yb,c=this.Cb(b);if(-1==c)return 0;var n=new g.b;this.w(c,n);for(var a=0,d=0,f=this.Ha(b);d<f;d++,c=this.X(c)){var h=this.cc(c);if(null==h){if(!this.Oc(c,e))continue;h=e}a+=h.kv(n.x,n.y)}this.Jr(b,!0);this.fi.set(this.bt(b),
a);return a};c.prototype.Rp=function(b,e,c){e=this.Jj[e];b=this.bt(b);e.size<this.fi.size&&e.resize(this.fi.size,-1);e.write(b,c)};c.prototype.Ei=function(b,e){b=this.bt(b);e=this.Jj[e];return b<e.size?e.read(b):-1};c.prototype.Uv=function(){null==this.Jj&&(this.Jj=[]);for(var b=0;b<this.Jj.length;b++)if(null==this.Jj[b])return this.Jj[b]=g.Ac.Dg(0),b;this.Jj.push(g.Ac.Dg(0));return this.Jj.length-1};c.prototype.ty=function(b){this.Jj[b]=null};c.prototype.bQ=function(b,e,c){if(-1==c)throw g.g.N();
if(e!=c){var k=this.bc(c),a=this.wq(c),d=this.Vf(c);-1==a?this.Jn(d,k):this.Ln(a,k);-1==k?this.Kn(d,a):this.Mn(k,a);this.Pk(d,this.F(d)-this.Ha(c));this.gm(d,this.ea(d)-1);a=-1==e?this.Ys(b):this.wq(e);this.Mn(c,a);this.Ln(c,e);-1==e?this.Kn(b,c):this.Mn(e,c);-1==a?this.Jn(b,c):this.Ln(a,c);this.Pk(b,this.F(b)+this.Ha(c));this.gm(b,this.ea(b)+1);this.Hu(c,b)}};c.prototype.zi=function(b,e){this.wb.Sd(this.gb(e),this.Fo());this.vl(b,-1,this.Fo())};c.prototype.vf=function(b,e){var c=this.rd(b),n=this.Ua(b),
a=this.X(b);-1!=n&&this.Sc(n,a);var d=this.Ha(c);b==this.Cb(c)&&this.Dh(c,1<d?a:-1);-1!=a&&this.Tc(a,n);b==this.hk(c)&&this.Wi(c,1<d?n:-1);if(-1!=n&&-1!=a){var n=this.gb(n),f=this.gb(a);e?(e=this.Fi(n),null!=e&&(n=new g.b,this.wb.w(f,n),e.vd(n))):(f=this.gb(b),e=this.Fi(f),this.Fh(n,e),null!=e&&(n=this.wb.Fa(n),e.ed(n)))}this.hm(c,d-1);c=this.Vf(c);this.Pk(c,this.F(c)-1);this.dw(b);return a};c.prototype.Cb=function(b){return this.Rc.O(b,4)};c.prototype.hk=function(b){return this.Rc.O(b,5)};c.prototype.X=
function(b){return this.cd.O(b,2)};c.prototype.Ua=function(b){return this.cd.O(b,1)};c.prototype.rd=function(b){return this.cd.O(b,3)};c.prototype.Ub=function(b,e){return this.vl(b,-1,e)};c.prototype.Gp=function(b){if(void 0===b)return this.Gp(!1);if(b instanceof d)return new d(b);var e,c=-1,n=-1,a=-1,f=0,h=!1;for(e=this.$c;-1!=e;e=this.we(e))if(!b||g.T.Kc(this.Lb(e))){for(c=this.Vb(e);-1!=c;c=this.bc(c))if(a=n=this.Cb(c),f=0,-1!=n){h=!0;break}if(h)break}return d.UL(this,e,c,n,a,f,b)};c.prototype.Oe=
function(b){this.Hk.Oe(b);if(null!=this.Ge)for(var e=0,c=this.Ge.length;e<c;e++)null!=this.Ge[e]&&this.Ge[e].Oe(b)};c.prototype.Tp=function(b,e,c,n){n?this.DS(b,e,c):this.CS(b,e,c)};c.prototype.Tc=function(b,e){this.cd.L(b,1,e)};c.prototype.Sc=function(b,e){this.cd.L(b,2,e)};c.prototype.im=function(b,e){this.cd.L(b,3,e)};c.prototype.hm=function(b,e){this.Rc.L(b,3,e)};c.prototype.Dh=function(b,e){this.Rc.L(b,4,e)};c.prototype.Wi=function(b,e){this.Rc.L(b,5,e)};c.prototype.gm=function(b,e){this.Mc.L(b,
6,e)};c.prototype.Pk=function(b,e){this.Mc.L(b,5,e)};c.prototype.lF=function(b){var e=b;do{var c=this.X(e);this.Sc(e,this.Ua(e));this.Tc(e,c);e=c}while(e!=b)};c.prototype.ZF=function(b){this.pd=b};c.prototype.yu=function(b){var e=this.wq(b),c=this.bc(b),n=this.Vf(b);-1!=e?this.Ln(e,c):this.Jn(n,c);-1!=c?this.Mn(c,e):this.Kn(n,e);this.Dh(b,-1);this.Wi(b,-1);this.iC(b)};c.prototype.Ui=function(b,e){var c=this.Ua(b),n=this.X(b);-1!=c&&this.Sc(c,n);-1!=n&&this.Tc(n,c);if(-1!=c&&-1!=n)if(c=this.gb(c),
n=this.gb(n),e){if(e=this.Fi(c),null!=e){var a=new g.b;this.wb.w(n,a);e.vd(a)}}else n=this.gb(b),e=this.Fi(n),this.Fh(c,e),null!=e&&(a=new g.b,this.wb.w(c,a),e.ed(a));this.dw(b)};c.prototype.bP=function(b){return 0!=(this.Ho(b)&4)};c.prototype.Jr=function(b,e){this.Iy(b,(this.Ho(b)|4)-4|(e?4:0))};c.prototype.Mu=function(b,e){var c=this.cd.f;this.wb.kc();var n=this.wb.Ba[0].f;b.xd(0,e,function(b,e){b=c[5*b];e=c[5*e];var k=n[2*b];b=n[2*b+1];var g=n[2*e];e=n[2*e+1];return b<e?-1:b>e?1:k<g?-1:k>g?1:0})};
c.prototype.pO=function(){for(var b=this.$c;-1!=b;b=this.we(b))if(!g.T.Kc(this.Lb(b)))return!0;return!1};c.prototype.Vy=function(b,e){for(var c=this.Vb(b),n=this.Vb(e),g=this.Ys(b),a=this.Ys(e),d=this.Vb(b);-1!=d;d=this.bc(d))this.Hu(d,e);for(d=this.Vb(e);-1!=d;d=this.bc(d))this.Hu(d,b);this.Jn(b,n);this.Jn(e,c);this.Kn(b,a);this.Kn(e,g);c=this.F(b);n=this.ea(b);g=this.ea(e);this.Pk(b,this.F(e));this.Pk(e,c);this.gm(b,g);this.gm(e,n);c=this.Mc.O(b,2);this.Mc.L(b,2,this.Mc.O(e,2));this.Mc.L(e,2,c)};
return c}();g.fd=a})(w||(w={}));(function(g){var a=function(a){function c(b,e,c,n){a.call(this);this.R=new g.i;void 0===b?this.MB():"number"===typeof b?this.AL(b,e,c,n):b instanceof g.Va?void 0!==e?this.Ks(b,e,c):this.BL(b):b instanceof g.pa?void 0!==e?this.DL(b,e):this.CL(b):b instanceof g.i?this.zL(b):this.MB()}K(c,a);c.prototype.Ks=function(b,e,c){this.description=g.Od.Tf();this.R.Ja();b.s()||this.sv(b,e,c)};c.prototype.zL=function(b){this.description=g.Od.Tf();this.R.K(b);this.R.normalize()};
c.prototype.CL=function(b){if(null==b)throw g.g.N();this.description=b;this.R.Ja()};c.prototype.DL=function(b,e){if(null==b)throw g.g.N();this.description=b;this.R.K(e);this.R.normalize()};c.prototype.MB=function(){this.description=g.Od.Tf();this.R.Ja()};c.prototype.BL=function(b){this.description=g.Od.Tf();this.R.Ja();b.s()||this.sv(b)};c.prototype.AL=function(b,e,c,n){this.description=g.Od.Tf();this.K(b,e,c,n)};c.prototype.K=function(b,e,c,n){this.qc();if("number"===typeof b)this.R.K(b,e,c,n);else for(this.Ja(),
e=0,c=b.length;e<c;e++)this.Db(b[e])};c.prototype.Cu=function(b){this.qc();if(!b.dP())throw g.g.N();this.R.K(b)};c.prototype.Ja=function(){this.qc();this.R.Ja()};c.prototype.s=function(){return this.R.s()};c.prototype.aa=function(){return this.R.aa()};c.prototype.ba=function(){return this.R.ba()};c.prototype.lw=function(){return this.R.lw()};c.prototype.Vs=function(){return this.R.Vs()};c.prototype.qq=function(){return this.R.Af()};c.prototype.Db=function(b){if(b instanceof g.b)this.qc(),this.R.Db(b);
else if(b instanceof g.i)this.qc(),this.R.Db(b);else if(b instanceof g.Va){if(this.qc(),!b.sc()){var e=b.description;this.description!=e&&this.Ik(e);if(this.s())this.sv(b);else{this.R.Db(b.w());for(var k=1,n=e.Aa;k<n;k++)for(var a=e.Fd(k),d=g.pa.Wa(a),f=0;f<d;f++){var h=b.ld(a,f),l=this.Ah(a,f);l.Db(h);setInterval(a,f,l)}}}}else if(b instanceof c&&!b.s())for(e=b.description,e!=this.description&&this.Ik(e),this.R.Db(b.R),k=1,n=e.Aa;k<n;k++)for(a=e.Hd(k),d=g.pa.Wa(a),f=0;f<d;f++)h=b.Ah(a,f),l=this.Ah(a,
f),l.Db(h),setInterval(a,f,l)};c.prototype.sv=function(b,e,c){if(void 0!==e){this.R.K(b.w(),e,c);e=b.description;c=1;for(var k=e.Aa;c<k;c++)for(var a=e.Fd(c),d=g.pa.Wa(a),f=0;f<d;f++){var h=b.ld(a,f);this.setInterval(a,f,h,h)}}else for(this.R.K(b.fa[0],b.fa[1]),e=b.description,c=1,k=e.Aa;c<k;c++)for(a=e.Fd(c),d=g.pa.Wa(a),f=0;f<d;f++)h=b.ld(a,f),this.setInterval(a,f,h,h)};c.prototype.setInterval=function(b,e,c,n){var k=null;"number"===typeof c?k=new g.Nd(c,n):k=c;this.qc();if(0==b)if(0==e)this.R.v=
k.qa,this.R.B=k.va;else if(1==e)this.R.C=k.qa,this.R.G=k.va;else throw g.g.Uc();else this.DA(0,b,e,k.qa),this.DA(1,b,e,k.va)};c.prototype.P=function(b,e){this.qc();this.R.P(b,e)};c.prototype.Oe=function(b){if(b instanceof g.Bg)this.qc(),b.$y(this.R);else if(this.qc(),!this.R.s()){var e=new g.fH;this.Cn(e);e.UO()?e.Ja():b.$y(e)}};c.prototype.copyTo=function(b){if(b.D()!=this.D())throw g.g.N();b.qc();b.description=this.description;b.R.K(this.R);b.fa=null;if(null!=this.fa){b.ns();for(var e=0;e<2*(this.description.le.length-
2);e++)b.fa[e]=this.fa[e]}};c.prototype.Pa=function(){return new c(this.description)};c.prototype.Mh=function(){return this.R.rN()};c.prototype.$b=function(){return this.R.CC()};c.prototype.D=function(){return 197};c.prototype.fb=function(){return 2};c.prototype.Fp=function(b){this.copyTo(b)};c.prototype.o=function(b){b.v=this.R.v;b.C=this.R.C;b.B=this.R.B;b.G=this.R.G};c.prototype.Cn=function(b){b.v=this.R.v;b.C=this.R.C;b.B=this.R.B;b.G=this.R.G;b.K(this.R.v,this.R.C,this.yd(0,1,0),this.R.B,this.R.G,
this.yd(1,1,0))};c.prototype.Ah=function(b,e){var c=new g.Nd;c.K(this.yd(0,b,e),this.yd(1,b,e));return c};c.prototype.uf=function(b,e){e.Qf(this.description);var c=this.description.Aa-1;switch(b){case 0:for(b=0;b<c;b++)for(var n=this.description.Hd(b),a=g.pa.Wa(n),d=0;d<a;d++)e.setAttribute(n,d,this.yd(0,n,d));e.ic(this.R.v,this.R.C);break;case 1:for(b=0;b<c;b++)for(n=this.description.Hd(b),a=g.pa.Wa(n),d=0;d<a;d++)e.setAttribute(n,d,this.yd(1,n,d));e.ic(this.R.v,this.R.G);break;case 2:for(b=0;b<
c;b++)for(n=this.description.Hd(b),a=g.pa.Wa(n),d=0;d<a;d++)e.setAttribute(n,d,this.yd(0,n,d));e.ic(this.R.B,this.R.G);break;case 3:for(b=0;b<c;b++)for(n=this.description.Hd(b),a=g.pa.Wa(n),d=0;d<a;d++)e.setAttribute(n,d,this.yd(1,n,d));e.ic(this.R.B,this.R.C);break;default:throw g.g.Uc();}};c.prototype.vu=function(b,e){b=this.R.vu(b);e.ma(b.x,b.y)};c.prototype.zN=function(b,e){return e*(b.up-2)};c.prototype.mC=function(b,e,c){if(this.R.s())throw g.g.ra("empty geometry");if(0==e)return 0!=b?0!=c?
this.R.G:this.R.B:0!=c?this.R.C:this.R.v;if(c>=g.pa.Wa(e))throw g.g.N();var k=this.description.zf(e);this.ns();return 0<=k?this.fa[this.zN(this.description,b)+this.description.XN(k)-2+c]:g.pa.ue(e)};c.prototype.ns=function(){this.qc();if(null==this.fa&&2<this.description.le.length){this.fa=[];for(var b=c.V(this.description,0),e=c.V(this.description,1),k=0,n=1,a=this.description.Aa;n<a;n++)for(var d=this.description.Hd(n),f=g.pa.Wa(d),d=g.pa.ue(d),h=0;h<f;h++)this.fa[b+k]=d,this.fa[e+k]=d,k++}};c.prototype.nm=
function(b){if(null!=this.fa)if(2<b.le.length){for(var e=g.Od.iu(b,this.description),k=[],n=c.V(this.description,0),a=c.V(this.description,1),d=c.V(b,0),f=c.V(b,1),h=0,l=1,m=b.Aa;l<m;l++){var z=b.Hd(l),p=g.pa.Wa(z);if(-1==e[l])for(var q=g.pa.ue(z),z=0;z<p;z++)k[d+h]=q,k[f+h]=q,h++;else for(q=this.description.fj(e[l])-2,z=0;z<p;z++)k[d+h]=this.fa[n+q],k[f+h]=this.fa[a+q],h++,q++}this.fa=k}else this.fa=null;this.description=b};c.prototype.yd=function(b,e,k){if(this.R.s())throw g.g.ra("This operation was performed on an Empty Geometry.");
if(0==e)return 0!=b?0!=k?this.R.G:this.R.B:0!=k?this.R.C:this.R.v;if(k>=g.pa.Wa(e))throw g.g.Uc();var n=this.description.zf(e);return 0<=n?(this.ns(),this.fa[c.V(this.description,b)+this.description.fj(n)-2+k]):g.pa.ue(e)};c.prototype.DA=function(b,e,k,n){this.qc();if(0==e)0!=b?0!=k?this.R.G=n:this.R.B=n:0!=k?this.R.C=n:this.R.v=n;else{if(k>=g.pa.Wa(e))throw g.g.Uc();if(!this.hasAttribute(e)){if(g.pa.nD(e,n))return;this.Ne(e)}e=this.description.zf(e);this.ns();this.fa[c.V(this.description,b)+this.description.fj(e)-
2+k]=n}};c.V=function(b,e){return e*(b.le.length-2)};c.prototype.Ga=function(b){this.qc();var e=new g.i;b.o(e);return this.R.Ga(e)};c.prototype.jc=function(b){return b instanceof g.i?this.R.jc(b):this.R.jc(b.R)};c.prototype.offset=function(b,e){this.qc();this.R.offset(b,e)};c.prototype.normalize=function(){this.qc();this.R.normalize()};c.prototype.Af=function(b){if(void 0!==b)if(b.Qf(this.description),this.s())b.Ja();else{for(var e=this.description.Aa,c=1;c<e;c++)for(var n=this.description.Hd(c),
a=g.pa.Wa(n),d=0;d<a;d++){var f=.5*(this.mC(0,n,d)+this.mC(1,n,d));b.setAttribute(n,d,f)}b.ic(this.R.Af())}else{b=new g.Va(this.description);if(this.s())return b;e=this.description.Aa;for(c=1;c<e;c++)for(n=this.description.Fd(c),a=g.pa.Wa(n),d=0;d<a;d++)f=.5*(this.yd(0,n,d)+this.yd(1,n,d)),b.setAttribute(n,d,f);b.ic(this.R.lw(),this.R.Vs());return b}};c.prototype.yw=function(){return new g.Va(this.R.yw())};c.prototype.contains=function(b){return b instanceof g.Va?b.s()?!1:this.R.contains(b.lk(),b.mk()):
this.R.contains(b.R)};c.prototype.lc=function(b){if(b==this)return!0;if(!(b instanceof c)||this.description!=b.description)return!1;if(this.s())return b.s()?!0:!1;if(!this.R.lc(b.R))return!1;for(var e=0,k=2*(this.description.le.length-2);e<k;e++)if(this.fa[e]!=b.fa[e])return!1;return!0};c.prototype.hc=function(){var b=this.description.hc(),b=g.I.kg(b,this.R.hc());if(!this.s()&&null!=this.fa)for(var e=0,c=2*(this.description.le.length-2);e<c;e++)b=g.I.kg(b,this.fa[e]);return b};c.prototype.Rf=function(){return g.Hh.il(this,
null)};c.prototype.toString=function(){return this.s()?"Envelope: []":"Envelope: ["+this.R.v+", "+this.R.C+", "+this.R.B+", "+this.R.G+"]"};return c}(g.T);g.Vj=a})(w||(w={}));(function(g){var a=function(){function a(c,b,e,k){void 0===c?this.Ja():(this.v=c,this.C=b,this.B=e,this.G=k)}a.Oa=function(c,b,e,k){var n=new a;n.v=c;n.C=b;n.B=e;n.G=k;return n};a.prototype.K=function(c,b,e,k){"number"===typeof c?void 0!==e?(this.v=c,this.C=b,this.B=e,this.G=k,this.normalize()):(this.v=c,this.C=b,this.B=c,this.G=
b):c instanceof g.b?void 0!==b?(this.v=c.x-.5*b,this.B=this.v+b,this.C=c.y-.5*e,this.G=this.C+e,this.normalize()):(this.v=c.x,this.C=c.y,this.B=c.x,this.G=c.y):c instanceof a?this.K(c.v,c.C,c.B,c.G):c instanceof g.Nd&&(c.s()||b.s()?this.Ja():(this.v=c.qa,this.B=c.va,this.C=b.qa,this.G=b.va))};a.prototype.IN=function(c,b){var e=new a;e.K(this.v,this.C,this.B,this.G);e.P(c,b);return e};a.prototype.Ey=function(c,b){if(void 0!==b)if(0==b)this.Ja();else{this.v=c[0].x;this.C=c[0].y;this.B=this.v;this.G=
this.C;for(var e=1;e<b;e++){var k=c[e];k.x<this.v?this.v=k.x:k.x>this.B&&(this.B=k.x);k.y<this.C?this.C=k.y:k.y>this.G&&(this.G=k.y)}}else if(null==c||0==c.length)this.Ja();else for(k=c[0],this.K(k.x,k.y),e=1;e<c.length;e++)k=c[e],this.Oj(k.x,k.y)};a.prototype.Ja=function(){this.G=this.B=this.C=this.v=NaN};a.prototype.s=function(){return isNaN(this.v)};a.prototype.Db=function(c,b){"number"===typeof c?this.s()?(this.v=c,this.C=b,this.B=c,this.G=b):(this.v>c?this.v=c:this.B<c&&(this.B=c),this.C>b?this.C=
b:this.G<b&&(this.G=b)):c instanceof g.b?this.Db(c.x,c.y):c instanceof g.ee?this.Db(c.x,c.y):c instanceof a&&!c.s()&&(this.Db(c.v,c.C),this.Db(c.B,c.G))};a.prototype.Oj=function(c,b){this.v>c?this.v=c:this.B<c&&(this.B=c);this.C>b?this.C=b:this.G<b&&(this.G=b)};a.prototype.P=function(c,b){this.s()||(this.v-=c,this.B+=c,this.C-=b,this.G+=b,(this.v>this.B||this.C>this.G)&&this.Ja())};a.prototype.scale=function(c){0>c&&this.Ja();this.s()||(this.v*=c,this.B*=c,this.C*=c,this.G*=c)};a.prototype.jc=function(c){return!this.s()&&
!c.s()&&(this.v<=c.v?this.B>=c.v:c.B>=this.v)&&(this.C<=c.C?this.G>=c.C:c.G>=this.C)};a.prototype.rD=function(c){return(this.v<=c.v?this.B>=c.v:c.B>=this.v)&&(this.C<=c.C?this.G>=c.C:c.G>=this.C)};a.prototype.Ga=function(c){if(this.s()||c.s())return!1;c.v>this.v&&(this.v=c.v);c.B<this.B&&(this.B=c.B);c.C>this.C&&(this.C=c.C);c.G<this.G&&(this.G=c.G);(c=this.v<=this.B&&this.C<=this.G)||this.Ja();return c};a.prototype.vu=function(c){switch(c){case 0:return g.b.Oa(this.v,this.C);case 1:return g.b.Oa(this.v,
this.G);case 2:return g.b.Oa(this.B,this.G);case 3:return g.b.Oa(this.B,this.C);default:throw g.g.Uc();}};a.prototype.hy=function(c){if(null==c||4>c.length)throw g.g.N();null!=c[0]?c[0].ma(this.v,this.C):c[0]=g.b.Oa(this.v,this.C);null!=c[1]?c[1].ma(this.v,this.G):c[1]=g.b.Oa(this.v,this.G);null!=c[2]?c[2].ma(this.B,this.G):c[2]=g.b.Oa(this.B,this.G);null!=c[3]?c[3].ma(this.B,this.C):c[3]=g.b.Oa(this.B,this.C)};a.prototype.rN=function(){return this.s()?0:this.aa()*this.ba()};a.prototype.CC=function(){return this.s()?
0:2*(this.aa()+this.ba())};a.prototype.lw=function(){return(this.B+this.v)/2};a.prototype.Vs=function(){return(this.G+this.C)/2};a.prototype.aa=function(){return this.B-this.v};a.prototype.ba=function(){return this.G-this.C};a.prototype.move=function(c,b){this.s()||(this.v+=c,this.C+=b,this.B+=c,this.G+=b)};a.prototype.offset=function(c,b){this.v+=c;this.B+=c;this.C+=b;this.G+=b};a.prototype.normalize=function(){if(!this.s()){var c=Math.min(this.v,this.B),b=Math.max(this.v,this.B);this.v=c;this.B=
b;c=Math.min(this.C,this.G);b=Math.max(this.C,this.G);this.C=c;this.G=b}};a.prototype.Yl=function(c){c.ma(this.v,this.C)};a.prototype.YE=function(c){c.ma(this.B,this.C)};a.prototype.aF=function(c){c.ma(this.v,this.G)};a.prototype.Zl=function(c){c.ma(this.B,this.G)};a.prototype.dP=function(){return this.s()||this.v<=this.B&&this.C<=this.G};a.prototype.Af=function(){return g.b.Oa((this.B+this.v)/2,(this.G+this.C)/2)};a.prototype.yw=function(){return g.b.Oa(this.v,this.C)};a.prototype.contains=function(c,
b){if(void 0!==b)return c>=this.v&&c<=this.B&&b>=this.C&&b<=this.G;if(c instanceof g.Va)return this.contains(c.lk(),c.mk());if(c instanceof g.b)return this.contains(c.x,c.y);if(c instanceof a)return c.v>=this.v&&c.B<=this.B&&c.C>=this.C&&c.G<=this.G;throw g.g.N();};a.prototype.jl=function(c,b){if(void 0!==b)return c>this.v&&c<this.B&&b>this.C&&b<this.G;if(c instanceof g.b)return this.jl(c.x,c.y);if(c instanceof a)return c.v>this.v&&c.B<this.B&&c.C>this.C&&c.G<this.G;throw g.g.N();};a.prototype.lc=
function(c){return c==this?!0:c instanceof a?this.s()&&c.s()?!0:this.v!=c.v||this.C!=c.C||this.B!=c.B||this.G!=c.G?!1:!0:!1};a.prototype.hc=function(){var c=this.v,c=g.I.truncate(c^c>>>32),b=g.I.kg(c),c=this.B,c=g.I.truncate(c^c>>>32),b=g.I.kg(c,b),c=this.C,c=g.I.truncate(c^c>>>32),b=g.I.kg(c,b),c=this.G,c=g.I.truncate(c^c>>>32);return b=g.I.kg(c,b)};a.prototype.vv=function(c){var b=new g.b;b.J(c);if(b.pv())return b;if(this.s())return b.FA(),b;b.x<this.v?b.x=this.v:b.x>this.B&&(b.x=this.B);b.y<this.C?
b.y=this.C:b.y>this.G&&(b.y=this.G);if(!b.lc(c))return b;c=this.Af();(b.x<c.x?b.x-this.v:this.B-b.x)<(b.y<c.y?b.y-this.C:this.G-b.y)?b.x=b.x<c.x?this.v:this.B:b.y=b.y<c.y?this.C:this.G;return b};a.prototype.ms=function(c){if(this.s())return NaN;if(c.x==this.v)return c.y-this.C;var b=this.G-this.C,e=this.B-this.v;return c.y==this.G?b+c.x-this.v:c.x==this.B?b+e+this.G-c.y:c.y==this.C?2*b+e+this.B-c.x:this.ms(this.vv(c))};a.prototype.vA=function(c){if(this.s())return-1;c=this.ms(c);var b=this.G-this.C,
e=this.B-this.v;return c<b?0:(c-=b)<e?1:c-e<b?2:3};a.prototype.lv=function(){return this.s()?2.220446049250313E-14:2.220446049250313E-14*(Math.abs(this.v)+Math.abs(this.B)+Math.abs(this.C)+Math.abs(this.G)+1)};a.prototype.Nv=function(c,b){var e=this.ej(c),k=this.ej(b);if(0!=(e&k))return 0;if(0==(e|k))return 4;var n=(0!=e?1:0)|(0!=k?2:0);do{var g=b.x-c.x,d=b.y-c.y;g>d?0!=(e&a.Cc)?(0!=(e&a.ob)?(c.y+=d*(this.v-c.x)/g,c.x=this.v):(c.y+=d*(this.B-c.x)/g,c.x=this.B),e=this.ej(c)):0!=(k&a.Cc)?(0!=(k&a.ob)?
(b.y+=d*(this.v-b.x)/g,b.x=this.v):(b.y+=d*(this.B-b.x)/g,b.x=this.B),k=this.ej(b)):0!=e?(0!=(e&a.ac)?(c.x+=g*(this.C-c.y)/d,c.y=this.C):(c.x+=g*(this.G-c.y)/d,c.y=this.G),e=this.ej(c)):(0!=(k&a.ac)?(b.x+=g*(this.C-b.y)/d,b.y=this.C):(b.x+=g*(this.G-b.y)/d,b.y=this.G),k=this.ej(b)):0!=(e&a.Bd)?(0!=(e&a.ac)?(c.x+=g*(this.C-c.y)/d,c.y=this.C):(c.x+=g*(this.G-c.y)/d,c.y=this.G),e=this.ej(c)):0!=(k&a.Bd)?(0!=(k&a.ac)?(b.x+=g*(this.C-b.y)/d,b.y=this.C):(b.x+=g*(this.G-b.y)/d,b.y=this.G),k=this.ej(b)):
0!=e?(0!=(e&a.ob)?(c.y+=d*(this.v-c.x)/g,c.x=this.v):(c.y+=d*(this.B-c.x)/g,c.x=this.B),e=this.ej(c)):(0!=(k&a.ob)?(b.y+=d*(this.v-b.x)/g,b.x=this.v):(b.y+=d*(this.B-b.x)/g,b.x=this.B),k=this.ej(b));if(0!=(e&k))return 0}while(0!=(e|k));return n};a.prototype.ej=function(c){return(c.x<this.v?1:0)|(c.x>this.B?1:0)<<1|(c.y<this.C?1:0)<<2|(c.y>this.G?1:0)<<3};a.prototype.mg=function(c){return!this.s()&&(this.aa()<=c||this.ba()<=c)};a.prototype.Fb=function(c){return c instanceof g.b?Math.sqrt(this.gG(c)):
Math.sqrt(this.Ou(c))};a.prototype.Ou=function(c){var b=0,e=0,k;k=this.v-c.B;k>b&&(b=k);k=this.C-c.G;k>e&&(e=k);k=c.v-this.B;k>b&&(b=k);k=c.C-this.G;k>e&&(e=k);return b*b+e*e};a.prototype.gG=function(c){var b=0,e=0,k;k=this.v-c.x;k>b&&(b=k);k=this.C-c.y;k>e&&(e=k);k=c.x-this.B;k>b&&(b=k);k=c.y-this.G;k>e&&(e=k);return b*b+e*e};a.prototype.wu=function(c){this.s()?c.Ja():c.K(this.v,this.B)};a.ob=1;a.ac=4;a.Cc=3;a.Bd=12;return a}();g.i=a})(w||(w={}));(function(g){var a;(function(c){c[c.initialize=0]=
"initialize";c[c.initializeRed=1]="initializeRed";c[c.initializeBlue=2]="initializeBlue";c[c.initializeRedBlue=3]="initializeRedBlue";c[c.sweep=4]="sweep";c[c.sweepBruteForce=5]="sweepBruteForce";c[c.sweepRedBlueBruteForce=6]="sweepRedBlueBruteForce";c[c.sweepRedBlue=7]="sweepRedBlue";c[c.sweepRed=8]="sweepRed";c[c.sweepBlue=9]="sweepBlue";c[c.iterate=10]="iterate";c[c.iterateRed=11]="iterateRed";c[c.iterateBlue=12]="iterateBlue";c[c.iterateBruteForce=13]="iterateBruteForce";c[c.iterateRedBlueBruteForce=
14]="iterateRedBlueBruteForce";c[c.resetRed=15]="resetRed";c[c.resetBlue=16]="resetBlue"})(a||(a={}));var d=function(){function c(b,e){this.th=b;this.KD=e}c.prototype.Zp=function(b,e,c){this.th.BS(c,b,e,this.KD)};c.prototype.Mo=function(b){return this.th.pq(b,this.KD)};return c}();a=function(){function c(){this.Vt=this.cn=this.Ve=this.ad=null;this.fp=new g.i;this.Al=this.Mi=this.Ni=this.od=this.rf=this.ud=this.Nt=this.Wm=this.Zc=this.vb=null;this.Hb=-1;this.ka=0;this.Rj()}c.prototype.Vp=function(){this.Rj();
this.At=!0;null==this.vb?(this.Wm=new g.ga(0),this.vb=[]):(this.Wm.cf(0),this.vb.length=0)};c.prototype.Wc=function(b,e){if(!this.At)throw g.g.xa();var c=new g.i;c.K(e);this.Wm.add(b);this.vb.push(c)};c.prototype.wo=function(){if(!this.At)throw g.g.xa();this.At=!1;null!=this.vb&&0<this.vb.length&&(this.Hb=0,this.Ec=!1)};c.prototype.jG=function(){this.Rj();this.zt=!0;null==this.vb?(this.Wm=new g.ga(0),this.vb=[]):(this.Wm.cf(0),this.vb.length=0)};c.prototype.OA=function(b,e){if(!this.zt)throw g.g.xa();
var c=new g.i;c.K(e);this.Wm.add(b);this.vb.push(c)};c.prototype.$B=function(){if(!this.zt)throw g.g.xa();this.zt=!1;null!=this.vb&&0<this.vb.length&&null!=this.Zc&&0<this.Zc.length&&(-1==this.Hb?this.Hb=3:2==this.Hb?this.Hb=3:3!=this.Hb&&(this.Hb=1),this.Ec=!1)};c.prototype.iG=function(){this.Rj();this.yt=!0;null==this.Zc?(this.Nt=new g.ga(0),this.Zc=[]):(this.Nt.cf(0),this.Zc.length=0)};c.prototype.LA=function(b,e){if(!this.yt)throw g.g.xa();var c=new g.i;c.K(e);this.Nt.add(b);this.Zc.push(c)};
c.prototype.ZB=function(){if(!this.yt)throw g.g.xa();this.yt=!1;null!=this.vb&&0<this.vb.length&&null!=this.Zc&&0<this.Zc.length&&(-1==this.Hb?this.Hb=3:1==this.Hb?this.Hb=3:3!=this.Hb&&(this.Hb=2),this.Ec=!1)};c.prototype.next=function(){if(this.Ec)return!1;for(var b=!0;b;)switch(this.Hb){case 0:b=this.Qw();break;case 1:b=this.yO();break;case 2:b=this.vO();break;case 3:b=this.xO();break;case 4:b=this.LS();break;case 5:b=this.HS();break;case 6:b=this.IS();break;case 7:b=this.JS();break;case 8:b=this.Qu();
break;case 9:b=this.Wy();break;case 10:b=this.$w();break;case 11:b=this.iP();break;case 12:b=this.fP();break;case 13:b=this.gP();break;case 14:b=this.hP();break;case 15:b=this.hF();break;case 16:b=this.gF();break;default:throw g.g.wa();}return this.Ec?!1:!0};c.prototype.YF=function(b){this.ka=b};c.prototype.Fw=function(b){return this.vb[b]};c.prototype.jw=function(b){return this.Zc[b]};c.prototype.jk=function(b){return this.Wm.read(b)};c.prototype.ek=function(b){return this.Nt.read(b)};c.Cv=function(b){return 1==
(b&1)};c.Yk=function(b){return 0==(b&1)};c.prototype.Rj=function(){this.At=this.yt=this.zt=!1;this.pf=this.qf=this.tg=this.ae=-1;this.Ec=!0};c.prototype.Qw=function(){this.mf=this.Ff=-1;if(10>this.vb.length)return this.ae=this.vb.length,this.Hb=5,!0;null==this.ad&&(this.ad=new g.bq(!0),this.cn=this.ad.Re(),this.ud=new g.ga(0));this.ad.Vp();for(var b=0;b<this.vb.length;b++){var e=this.vb[b];this.ad.gq(e.v,e.B)}this.ad.wo();this.ud.xb(2*this.vb.length);this.ud.resize(0);for(b=0;b<2*this.vb.length;b++)this.ud.add(b);
this.Lr(this.ud,2*this.vb.length,!0);this.ae=2*this.vb.length;this.Hb=4;return!0};c.prototype.yO=function(){this.mf=this.Ff=-1;if(10>this.vb.length||10>this.Zc.length)return this.ae=this.vb.length,this.Hb=6,!0;null==this.ad&&(this.ad=new g.bq(!0),this.cn=this.ad.Re(),this.ud=new g.ga(0));this.ad.Vp();for(var b=0;b<this.vb.length;b++){var e=this.vb[b];this.ad.gq(e.v,e.B)}this.ad.wo();this.ud.xb(2*this.vb.length);this.ud.resize(0);for(b=0;b<2*this.vb.length;b++)this.ud.add(b);this.Lr(this.ud,this.ud.size,
!0);this.ae=this.ud.size;-1!=this.qf&&(this.od.Fg(this.qf),this.Ni.resize(0),this.qf=-1);this.Hb=7;return this.gF()};c.prototype.vO=function(){this.mf=this.Ff=-1;if(10>this.vb.length||10>this.Zc.length)return this.ae=this.vb.length,this.Hb=6,!0;null==this.Ve&&(this.Ve=new g.bq(!0),this.Vt=this.Ve.Re(),this.rf=new g.ga(0));this.Ve.Vp();for(var b=0;b<this.Zc.length;b++){var e=this.Zc[b];this.Ve.gq(e.v,e.B)}this.Ve.wo();this.rf.xb(2*this.Zc.length);this.rf.resize(0);for(b=0;b<2*this.Zc.length;b++)this.rf.add(b);
this.Lr(this.rf,this.rf.size,!1);this.tg=this.rf.size;-1!=this.pf&&(this.od.Fg(this.pf),this.Mi.resize(0),this.pf=-1);this.Hb=7;return this.hF()};c.prototype.xO=function(){this.mf=this.Ff=-1;if(10>this.vb.length||10>this.Zc.length)return this.ae=this.vb.length,this.Hb=6,!0;null==this.ad&&(this.ad=new g.bq(!0),this.cn=this.ad.Re(),this.ud=new g.ga(0));null==this.Ve&&(this.Ve=new g.bq(!0),this.Vt=this.Ve.Re(),this.rf=new g.ga(0));this.ad.Vp();for(var b=0;b<this.vb.length;b++){var e=this.vb[b];this.ad.gq(e.v,
e.B)}this.ad.wo();this.Ve.Vp();for(b=0;b<this.Zc.length;b++)e=this.Zc[b],this.Ve.gq(e.v,e.B);this.Ve.wo();this.ud.xb(2*this.vb.length);this.rf.xb(2*this.Zc.length);this.ud.resize(0);this.rf.resize(0);for(b=0;b<2*this.vb.length;b++)this.ud.add(b);for(b=0;b<2*this.Zc.length;b++)this.rf.add(b);this.Lr(this.ud,this.ud.size,!0);this.Lr(this.rf,this.rf.size,!1);this.ae=this.ud.size;this.tg=this.rf.size;-1!=this.qf&&(this.od.Fg(this.qf),this.Ni.resize(0),this.qf=-1);-1!=this.pf&&(this.od.Fg(this.pf),this.Mi.resize(0),
this.pf=-1);this.Hb=7;return!0};c.prototype.LS=function(){var b=this.ud.get(--this.ae),e=b>>1;if(c.Yk(b))return this.ad.remove(e),0==this.ae?(this.mf=this.Ff=-1,this.Ec=!0,!1):!0;this.cn.uy(this.vb[e].v,this.vb[e].B,this.ka);this.Ff=e;this.Hb=10;return!0};c.prototype.HS=function(){if(-1==--this.ae)return this.mf=this.Ff=-1,this.Ec=!0,!1;this.tg=this.Ff=this.ae;this.Hb=13;return!0};c.prototype.IS=function(){if(-1==--this.ae)return this.mf=this.Ff=-1,this.Ec=!0,!1;this.Ff=this.ae;this.tg=this.Zc.length;
this.Hb=14;return!0};c.prototype.JS=function(){var b=this.ud.get(this.ae-1),e=this.rf.get(this.tg-1),k=this.pq(b,!0),g=this.pq(e,!1);return k>g?this.Qu():k<g?this.Wy():c.Cv(b)?this.Qu():c.Cv(e)?this.Wy():this.Qu()};c.prototype.Qu=function(){var b=this.ud.get(--this.ae),e=b>>1;if(c.Yk(b))return-1!=this.qf&&-1!=this.Ni.get(e)?(this.od.Jc(this.qf,this.Ni.get(e)),this.Ni.set(e,-1)):this.ad.remove(e),0==this.ae?(this.mf=this.Ff=-1,this.Ec=!0,!1):!0;if(-1!=this.pf&&0<this.od.vq(this.pf))for(b=this.od.gc(this.pf);-1!=
b;){var k=this.od.getData(b);this.Ve.lg(k);this.Mi.set(k,-1);k=this.od.bb(b);this.od.Jc(this.pf,b);b=k}0<this.Ve.size()?(this.Vt.uy(this.vb[e].v,this.vb[e].B,this.ka),this.Ff=e,this.Hb=12):(-1==this.qf&&(null==this.od&&(this.od=new g.$n),this.Ni=new g.ga(0),this.Ni.resize(this.vb.length,-1),this.Ni.dh(-1,0,this.vb.length),this.qf=this.od.jh(1)),this.Ni.set(e,this.od.addElement(this.qf,e)),this.Hb=7);return!0};c.prototype.Wy=function(){var b=this.rf.get(--this.tg),e=b>>1;if(c.Yk(b))return-1!=this.pf&&
-1!=this.Mi.get(e)?(this.od.Jc(this.pf,this.Mi.get(e)),this.Mi.set(e,-1)):this.Ve.remove(e),0==this.tg?(this.mf=this.Ff=-1,this.Ec=!0,!1):!0;if(-1!=this.qf&&0<this.od.vq(this.qf))for(b=this.od.gc(this.qf);-1!=b;){var k=this.od.getData(b);this.ad.lg(k);this.Ni.set(k,-1);k=this.od.bb(b);this.od.Jc(this.qf,b);b=k}0<this.ad.size()?(this.cn.uy(this.Zc[e].v,this.Zc[e].B,this.ka),this.mf=e,this.Hb=11):(-1==this.pf&&(null==this.od&&(this.od=new g.$n),this.Mi=new g.ga(0),this.Mi.resize(this.Zc.length,-1),
this.Mi.dh(-1,0,this.Zc.length),this.pf=this.od.jh(0)),this.Mi.set(e,this.od.addElement(this.pf,e)),this.Hb=7);return!0};c.prototype.$w=function(){this.mf=this.cn.next();if(-1!=this.mf)return!1;var b=this.ud.get(this.ae)>>1;this.ad.lg(b);this.Hb=4;return!0};c.prototype.iP=function(){this.Ff=this.cn.next();if(-1!=this.Ff)return!1;this.mf=this.Ff=-1;var b=this.rf.get(this.tg)>>1;this.Ve.lg(b);this.Hb=7;return!0};c.prototype.fP=function(){this.mf=this.Vt.next();if(-1!=this.mf)return!1;var b=this.ud.get(this.ae)>>
1;this.ad.lg(b);this.Hb=7;return!0};c.prototype.gP=function(){if(-1==--this.tg)return this.Hb=5,!0;this.fp.K(this.vb[this.ae]);var b=this.vb[this.tg];this.fp.P(this.ka,this.ka);return this.fp.jc(b)?(this.mf=this.tg,!1):!0};c.prototype.hP=function(){if(-1==--this.tg)return this.Hb=6,!0;this.fp.K(this.vb[this.ae]);var b=this.Zc[this.tg];this.fp.P(this.ka,this.ka);return this.fp.jc(b)?(this.mf=this.tg,!1):!0};c.prototype.hF=function(){if(null==this.ad)return this.Ec=!0,!1;this.ae=this.ud.size;0<this.ad.size()&&
this.ad.reset();-1!=this.qf&&(this.od.Fg(this.qf),this.Ni.resize(0),this.qf=-1);this.Ec=!1;return!0};c.prototype.gF=function(){if(null==this.Ve)return this.Ec=!0,!1;this.tg=this.rf.size;0<this.Ve.size()&&this.Ve.reset();-1!=this.pf&&(this.od.Fg(this.pf),this.Mi.resize(0),this.pf=-1);this.Ec=!1;return!0};c.prototype.Lr=function(b,e,c){null==this.Al&&(this.Al=new g.Rr);c=new d(this,c);this.Al.sort(b,0,e,c)};c.prototype.BS=function(b,e,k,g){var a=this;b.xd(e,k,function(b,e){var k=a.pq(b,g),n=a.pq(e,
g);return k<n||k==n&&c.Yk(b)&&c.Cv(e)?-1:1})};c.prototype.pq=function(b,e){var k=.5*this.ka;if(e)return e=this.vb[b>>1],k=c.Yk(b)?e.C-k:e.G+k;e=this.Zc[b>>1];return k=c.Yk(b)?e.C-k:e.G+k};return c}();g.sz=a})(w||(w={}));(function(g){var a=function(){function a(){}a.Oa=function(c,b,e,k,g,d){var n=new a;n.v=c;n.C=b;n.Je=e;n.B=k;n.G=g;n.ig=d;return n};a.prototype.Ja=function(){this.Je=this.v=NaN};a.prototype.s=function(){return isNaN(this.v)};a.prototype.UO=function(){return isNaN(this.Je)};a.prototype.K=
function(c,b,e,k,a,g){void 0!==k?"number"===typeof c?(this.v=c,this.C=b,this.Je=e,this.B=k,this.G=a,this.ig=g):(this.v=c.x-.5*b,this.B=this.v+b,this.C=c.y-.5*e,this.G=this.C+e,this.Je=c.z-.5*k,this.ig=this.Je+k):(this.v=c,this.C=b,this.Je=e,this.B=c,this.G=b,this.ig=e)};a.prototype.move=function(c){this.v+=c.x;this.C+=c.y;this.Je+=c.z;this.B+=c.x;this.G+=c.y;this.ig+=c.z};a.prototype.copyTo=function(c){c.v=this.v;c.C=this.C;c.B=this.B;c.G=this.G};a.prototype.Oj=function(c,b,e){this.v>c?this.v=c:this.B<
c&&(this.B=c);this.C>b?this.C=b:this.G<b&&(this.G=b);0==isNaN(this.Je)?this.Je>e?this.Je=e:this.ig<e&&(this.ig=e):this.ig=this.Je=e};a.prototype.Db=function(c,b,e,k,n,d){if("number"===typeof c)k?(this.Db(c,b,e),this.Db(k,n,d)):this.s()?(this.v=c,this.C=b,this.Je=e,this.B=c,this.G=b,this.ig=e):this.Oj(c,b,e);else if(c instanceof g.ee)this.Db(c.x,c.y,c.z);else if(c instanceof a)c.s()||(this.Db(c.v,c.C,c.Je),this.Db(c.B,c.G,c.ig));else throw g.g.N();};a.prototype.Oa=function(c,b,e){c.s()||b.s()?this.Ja():
(this.v=c.qa,this.B=c.va,this.C=b.qa,this.G=b.va,this.Je=e.qa,this.ig=e.va)};a.prototype.hy=function(c){if(null==c||8>c.length)throw g.g.N();c[0]=new g.ee(this.v,this.C,this.Je);c[1]=new g.ee(this.v,this.G,this.Je);c[2]=new g.ee(this.B,this.G,this.Je);c[3]=new g.ee(this.B,this.C,this.Je);c[4]=new g.ee(this.v,this.C,this.ig);c[5]=new g.ee(this.v,this.G,this.ig);c[6]=new g.ee(this.B,this.G,this.ig);c[7]=new g.ee(this.B,this.C,this.ig)};a.prototype.Ey=function(c){if(null==c||0==c.length)this.Ja();else{var b=
c[0];this.K(b.x,b.y,b.z);for(b=1;b<c.length;b++){var e=c[b];this.Oj(e.x,e.y,e.z)}}};return a}();g.fH=a})(w||(w={}));(function(a){(function(a){a.wa=function(){var a=Error();a.message="Internal Error";return a};a.qe=function(){var a=Error();a.message="Not Implemented";return a};a.cj=function(){var a=Error();a.message="The input unit and the spatial reference unit are not of the same unit type.ie Linear vs.Angular";return a};a.xa=function(){var a=Error();a.message="Invalid Call";return a};a.N=function(a){var c=
Error();c.message="Illegal Argument Exception";void 0!==a&&(c.message+=": "+a);return c};a.BI=function(){var a=Error();a.message="Runtime Exception.";return a};a.ra=function(a){var c=Error();c.message="Geometry Exception: "+a;return c};a.PG=function(){var a=Error();a.message="Assert Failed Exception";return a};a.Uc=function(){var a=Error();a.message="IndexOutOfBoundsException";return a};a.aU=function(a){a.message="UserCancelException";return a}})(a.g||(a.g={}))})(w||(w={}));(function(a){var g=function(){function b(b,
c){this.Ma=b;this.hE=c;this.kE=-1;this.rk=!1}b.prototype.next=function(){if(++this.kE==this.hE.F())return null;var b=this.hE.Fa(this.kE);b.scale(this.Ma.Rb);var c=new a.Ka;this.Ma.Iv(b,this.rk,c);return c};b.prototype.ya=function(){return 0};return b}(),d=function(){function b(b,c,n){this.Ma=b;this.Zt=c;this.Om=!1;this.Um=n;this.Mt=[0];this.zj=[0];this.Qi=[0];this.Sq=[0];this.rk=!1;this.$o=new a.Ka;this.Bj=[]}b.prototype.next=function(){if(this.Om){this.Om=!1;this.bd.ia();var b=a.T.Yj(this.$o);return b=
a.Of.Qj(b,this.Ma.jp,!0,!0,this.Ma.Yb)}null==this.bd&&(this.bd=this.Zt.Ca(),this.bd.kb(),null!=this.Um&&this.Um.lo());if(!this.bd.La()){if(!this.bd.kb())return null;null!=this.Um&&this.Um.lo()}b=null;this.zj[0]=0;this.Fx=this.Mt[0]=0;this.uh=NaN;this.Om=!1;for(var k=this.Bj.length=0,n=new a.b,g=new a.b,d=[0];this.bd.La()&&8>this.Fx;){var f=this.bd.ia();n.J(f.Mb());g.J(f.oc());n.scale(this.Ma.Rb);g.scale(this.Ma.Rb);a.ui.Hs(n,g)?n.x=g.x:a.ui.Fs(n,g)&&(g.x=n.x);this.Bj.length=0;a.ui.kC(this.Ma.Gb,this.Ma.Xb,
this.Ma.ke,n,g,this.Ma.Nx,this.Ma.hr,d,this.Qi,this.Sq,this.Bj,this.Mt);null!=this.Um&&(f=this.Bj.slice(0),this.Um.dD(this.Um.ea()-1,f,f.length-1));a.ui.Gs(n,g)?(this.$o.Ja(),this.Ma.Iv(n,this.rk,this.$o),this.Om=!0):(this.$o.Ja(),this.Om=this.Lv(d[0],this.$o));if(this.Om){this.bd.oi();if(this.bd.Ow()){this.bd.oi();this.bd.ia();break}this.bd.yR();break}null==b&&(b=new a.Ka,b.lo());this.TA(b);k++}this.Mt[0]=0;if(0<k){for(d=this.bd.Jb();0<k;)this.bd.oi(),n.J(this.Zt.Fa(this.bd.Jb())),g.J(this.Zt.Fa(this.bd.Bm())),
n.scale(this.Ma.Rb),g.scale(this.Ma.Rb),this.rk&&(a.ui.Hs(n,g)?n.x=g.x:a.ui.Fs(n,g)&&(g.x=n.x)),this.Bj.length=0,a.ui.kC(this.Ma.Gb,this.Ma.Xb,this.Ma.ke,g,n,this.Ma.Nx,this.Ma.hr,null,this.Qi,this.Sq,this.Bj,this.Mt),this.TA(b),k--;n.J(this.Zt.Fa(this.bd.Jb()));n.scale(this.Ma.Rb);c.kq(this.Ma.Gb,this.Ma.Xb,this.Ma.Rb,this.Ma.hb,n,this.uh+1.570796326794897,this.uh+4.71238898038469,this.Ma.Sm,this.rk,this.zj,b,NaN,NaN);this.bd.Sb(d);this.bd.ia();k=a.Ia.Cg(null,b,!0);return b=a.Of.Qj(b,k,!0,!0,this.Ma.Yb)}this.Om=
!1;this.bd.ia();b=a.T.Yj(this.$o);return b=a.Of.Qj(b,this.Ma.jp,!0,!0,this.Ma.Yb)};b.prototype.TA=function(b){var e=this.Bj[0],n,g=this.Qi[0]-1.570796326794897,d=this.Sq[0]+1.570796326794897,f;if(!isNaN(this.uh)){this.uh>=this.Qi[0]?(n=this.uh+1.570796326794897,g=n+3.141592653589793-(this.uh-this.Qi[0])):(n=this.uh+1.570796326794897,g=n+3.141592653589793-(6.283185307179586-(this.Qi[0]-this.uh)));f=this.uh>=this.Qi[0]&&3.141592653589793>=this.uh-this.Qi[0]?!1:this.uh<this.Qi[0]&&3.141592653589793<=
this.Qi[0]-this.uh?!1:!0;var h=!1;if(Math.abs(g-n)<=.5*this.Ma.Sm)if(f){var l=b.Fa(b.F()-2);l.scale(this.Ma.Rb);var m=new a.ca(0);a.zb.gw(this.Ma.Gb,this.Ma.Xb,e.x,e.y,l.x,l.y,m);for(l=m.l;l<=n;)l+=6.283185307179586;for(;l>n;)l-=6.283185307179586;l<g&&(h=!0)}else h=!0;h?(b.eF(0,b.F()-1),this.rk||(e=new a.b,e.J(b.Fa(b.F()-1)),e.scale(this.Ma.Rb),-3.141592653589793>e.x-this.zj[0]?this.zj[0]-=6.283185307179586:3.141592653589793<e.x-this.zj[0]&&(this.zj[0]+=6.283185307179586)),f||(g=.5*(g+n))):(f?(n=
new a.b,n.J(e),n.scale(1/this.Ma.Rb),b.kf(0,-1,n)):c.kq(this.Ma.Gb,this.Ma.Xb,this.Ma.Rb,this.Ma.hb,this.Bj[0],n,g,this.Ma.Sm,this.rk,this.zj,b,NaN,NaN),this.Fx+=1)}c.Hv(this.Ma.Gb,this.Ma.Xb,this.Ma.Rb,this.Ma.hb,this.Ma.ke,this.Bj,g,d,this.rk,this.zj,b);this.uh=this.Sq[0]};b.prototype.Lv=function(b,c){return this.Ma.Lv(this.Bj,b,this.Qi[0],this.Sq[0],this.rk,c)};b.prototype.ya=function(){return 0};return b}(),c=function(){function b(){}b.buffer=function(c,k,n,g,d,f){if(null==c)throw a.g.N("Geometry::Geodesic_bufferer::buffer");
if(c.s())return new a.Ka(c.description);var e=new b;e.sg=k;e.wc=a.Ya.Em(k);var u=a.Ya.ft(e.wc);e.Yb=f;e.Gb=a.Ya.Ts(e.wc);e.Xb=u*(2-u);e.Rb=e.wc.Se().Dj;e.ka=e.sg.xq();e.jp=e.wc.xq();e.hr=e.jp*e.Rb;e.ip=1.570796326794897/e.Rb;e.rU=3.141592653589793/e.Rb;e.Uq=6.283185307179586/e.Rb;e.sU=e.Uq/6;e.Ix=0;e.qU=1.5707963267948966*e.Gb/e.Ix;4==n?(e.ke=2,e.Gt=!0):(e.ke=n,e.Gt=!1);e.Da=g;e.hb=Math.abs(g);isNaN(d)||.001>d?e.sS():e.Rm=d;n=c.D();a.T.Lc(n)?(n=new a.Xa(c.description),n.Bc(c,!0),c=n,n=1607):197==
n&&(n=new a.i,c.o(n),n.aa()<=e.ka||n.ba()<=e.ka?(n=new a.Xa(c.description),n.Wc(c,!1),c=n,n=1607):(n=new a.Ka(c.description),n.Wc(c,!1),c=n,n=1736));e.tS();a.T.Km(n)||e.uS();if(e.hb<=.5*e.Rm)return 1736!=n?new a.Ka(c.description):e.Gt?c:a.ui.oq(c,e.sg,e.ke,e.Nx,-1,f);if(0>e.Da&&1736!=n)return new a.Ka(c.description);e.Gt&&a.T.Kc(n)?(k=a.ui.oq(c,k,4,NaN,e.Rm,f),c=a.Ya.Wl(k,e.sg,e.wc)):c=a.Ya.Wl(c,e.sg,e.wc);c=a.gh.qo(c,e.wc);if(c.s())return new a.Ka(c.description);!e.Gt&&a.T.Kc(n)&&(c=a.ui.IE(e.Rb,
c));c=b.PS(c,e.wc);switch(n){case 1736:k=e.yK(c);break;case 1607:k=e.zK(c);break;case 550:k=e.wK(c);break;case 33:k=e.xK(c);break;default:throw a.g.ra("corrupted_geometry");}e=a.Ya.Wl(k,e.wc,e.sg);e.Ik(c.description);return e};b.prototype.yK=function(b){var c=new a.Ka;b=new d(this,b,c);b=a.wi.local().$(b,this.wc,this.Yb).next();b=a.Vn.nl(b,this.wc,2);var e=new a.Bg;e.scale(1/this.Rb,1/this.Rb);c.Oe(e);c=a.Vn.nl(c,this.wc,2);return 0<=this.Da?a.wi.local().$(c,b,this.wc,this.Yb):a.Zr.local().$(c,b,
this.wc,this.Yb)};b.prototype.zK=function(b){b=new d(this,b,null);b=a.wi.local().$(b,this.wc,this.Yb).next();return b=a.Vn.nl(b,this.wc,2)};b.prototype.wK=function(b){b=new g(this,b);b=a.wi.local().$(b,this.wc,this.Yb).next();return b=a.Vn.nl(b,this.wc,2)};b.prototype.xK=function(b){b=b.w();b.scale(this.Rb);var c=new a.Ka;this.Iv(b,!1,c);return c=a.Vn.nl(c,this.wc,2)};b.prototype.Lv=function(c,k,n,g,d,f){var e=c[0],u=c[c.length-1],B=e.y>u.y?e.y:u.y,h=a.u.q(this.Gb,this.Xb,e.y<u.y?e.y:u.y),B=a.u.q(this.Gb,
this.Xb,B);if(.001<this.Ix-(h+k+this.hb)&&.001<this.Ix+(B-k-this.hb))return!1;k=n-1.570796326794897;n=g+1.570796326794897;var h=k-3.141592653589793,B=k+3.141592653589793,l=n+3.141592653589793,m=[NaN],p=[NaN],z=[NaN],I=[NaN];g=!1;b.wG(this.Gb,this.Xb,this.hb,e,k,h,u,n,m,p);b.wG(this.Gb,this.Xb,this.hb,u,l,n,e,h,z,I);n<m[0]&&m[0]<l?g=!0:n<p[0]&&p[0]<l&&(g=!0);g||(h<z[0]&&z[0]<k?g=!0:h<I[0]&&I[0]<k&&(g=!0));if(!g&&d)return!1;for(var q=[],r=c.length-1;0<=r;r--)q.push(c[r]);f.Ja();f.lo();r=[0];b.Hv(this.Gb,
this.Xb,this.Rb,this.hb,this.ke,c,k,n,d,r,f);b.kq(this.Gb,this.Xb,this.Rb,this.hb,u,n,l,this.Sm,d,r,f,m[0],p[0]);b.Hv(this.Gb,this.Xb,this.Rb,this.hb,this.ke,q,l,B,d,r,f);b.kq(this.Gb,this.Xb,this.Rb,this.hb,e,h,k,this.Sm,d,r,f,z[0],I[0]);c=!1;d||(c=this.zB(this.Rb,f));return g||c};b.prototype.Iv=function(c,k,a){a.Ja();a.lo();b.kq(this.Gb,this.Xb,this.Rb,this.hb,c,-this.Sm,6.283185307179586,this.Sm,k,[0],a,NaN,NaN);k||this.zB(this.Rb,a)};b.prototype.zB=function(b,c){var e=this.XK(b,c);b=this.YK(b,
c);return e||b};b.prototype.XK=function(b,c){var e=c.F(),k=!1,g=new a.i;c.o(g);if(!a.j.S(g.G*b,1.570796326794897)&&!a.j.S(g.C*b,-1.570796326794897))return!1;for(var d=new a.b,e=e-1;0<=e;e--)c.w(e,d),d.y==g.G&&a.j.S(d.y*b,1.570796326794897)?(k=!0,this.RE(d,e,c)):d.y==g.C&&a.j.S(d.y*b,-1.570796326794897)&&(k=!0,this.RE(d,e,c));return k};b.prototype.YK=function(b,c){var e=c.Fa(0),k=c.Fa(c.F()-1);return 3.141592653589793<Math.abs(e.x-k.x)*b?(this.RQ(c),!0):this.WK(c)};b.prototype.WK=function(b){return 0>
b.Mh()?(this.QQ(b),!0):!1};b.prototype.RE=function(b,c,n){var e=n.F(),k=0<c?c-1:e-1,e=n.Fa(c<e-1?c+1:0),k=n.Fa(k);if(!a.j.S(e.y,b.y)&&!a.j.S(e.x,b.x)){var g=new a.b;g.ma(e.x,b.y);n.ic(c,g)}a.j.S(k.y,b.y)||a.j.S(k.x,b.x)||(e=new a.b,e.ma(k.x,b.y),n.kf(0,c,e))};b.prototype.RQ=function(b){var c=new a.Ka,e=new a.Ka,g=new a.Bg,d=b.Fa(0),f=b.Fa(b.F()-1),h=new a.b;d.x>f.x?(f=this.ip,g.Nn(-this.Uq,0)):(f=-this.ip,g.Nn(this.Uq,0));c.add(b,!1);b.Ja();e.add(c,!1);e.Oe(g);d=new a.i;e.o(d);d.P((this.Uq-d.aa())/
2,0);d.C=-this.ip;d.G=this.ip;for(var l=0;l<e.F();l++)e.w(l,h),c.kf(0,-1,h);e.Oe(g);for(l=0;l<e.F();l++)e.w(l,h),c.kf(0,-1,h);e=c.Fa(0);g=c.Fa(c.F()-1);h.ma(g.x,f);c.kf(0,-1,h);h.ma(.5*(g.x+e.x),f);c.kf(0,-1,h);h.ma(e.x,f);c.kf(0,-1,h);c=a.gh.Rw(c,this.wc,2,d.v);c=a.gh.Rw(c,this.wc,2,d.B);c=a.Ed.clip(c,d,this.jp,NaN);b.add(c,!1)};b.prototype.QQ=function(b){var c=new a.i;b.o(c);c.P((this.Uq-c.aa())/2,0);c.C=-this.ip;c.G=this.ip;b.lo();var e=new a.b;e.ma(c.v,c.C);b.kf(1,-1,e);e.ma(c.v,c.G);b.kf(1,-1,
e);e.ma(.5*(c.v+c.B),c.G);b.kf(1,-1,e);e.ma(c.B,c.G);b.kf(1,-1,e);e.ma(c.B,c.C);b.kf(1,-1,e);e.ma(.5*(c.v+c.B),c.C);b.kf(1,-1,e)};b.Hv=function(c,k,n,g,d,f,h,l,m,p,z){var e=null;m||(e=new a.b,e.Eh(),0<z.F()&&(e.J(z.Fa(z.F()-1)),e.scale(n)));var u=new a.ca(0),B=new a.ca(0),G=new a.ca(0),I=new a.b,q=new a.b,r=f[f.length-1];n=1/n;for(var v=0;v<f.length;v++){var x=f[v],V;0==v?V=h:v==f.length-1?V=l:(a.zb.Rd(c,k,r.x,r.y,x.x,x.y,null,null,u,d),V=u.l-1.570796326794897);a.zb.Ph(c,k,x.x,x.y,g,V,B,G);m?q.ma(B.l,
G.l):(I.ma(B.l,G.l),b.Gz(x.x,I.x,e.x,p),q.ma(p[0]+I.x,I.y),e.J(q));q.scale(n);z.kf(0,-1,q)}};b.kq=function(c,k,n,g,d,f,h,l,m,p,z,q,r){if(!(h-f<l)){var e=new a.ca(0),u=new a.ca(0),B=new a.b,G=new a.b,I=null;m||(I=new a.b,I.Eh(),0<z.F()&&(I.J(z.Fa(z.F()-1)),I.scale(n)));var v=a.I.truncate(Math.ceil(f/l)),x=v++*l;x==f&&(x=v++*l);for(n=1/n;x<h+l;){f<q&&q<x?(x=q,v--):f<r&&r<x&&(x=r,v--);if(x>=h)break;a.zb.Ph(c,k,d.x,d.y,g,x,e,u);m?G.ma(e.l,u.l):(B.ma(e.l,u.l),b.Gz(d.x,B.x,I.x,p),G.ma(p[0]+B.x,B.y),I.J(G));
G.scale(n);z.kf(0,-1,G);f=x;x=v++*l}}};b.wG=function(b,c,n,g,d,f,h,l,m,p){var e=new a.b,k=new a.b,u=new a.ca(0),B=new a.ca(0);a.zb.Ph(b,c,g.x,g.y,n,d,u,B);e.ma(u.l,B.l);a.zb.Ph(b,c,g.x,g.y,n,f,u,B);k.ma(u.l,B.l);n=new a.ca(0);a.zb.gw(b,c,h.x,h.y,e.x,e.y,n);m[0]=n.l;a.zb.gw(b,c,h.x,h.y,k.x,k.y,n);for(p[0]=n.l;m[0]<=p[0];)m[0]+=6.283185307179586;for(;m[0]>p[0];)m[0]-=6.283185307179586;for(;m[0]>=l;)m[0]-=6.283185307179586,p[0]-=6.283185307179586;for(;m[0]<l;)m[0]+=6.283185307179586,p[0]+=6.283185307179586};
b.Gz=function(b,c,a,g){if(isNaN(a)){for(;3.141592653589793<g[0]+c-b;)g[0]-=6.283185307179586;for(;3.141592653589793<b-(g[0]+c);)g[0]+=6.283185307179586}else 3.141592653589793<g[0]+c-a?g[0]-=6.283185307179586:3.141592653589793<a-(g[0]+c)&&(g[0]+=6.283185307179586)};b.PS=function(b,c){var e=b.D(),k;a.T.Kc(e)?k=b.ea():550==e?k=b.F():k=1;if(1==k)return b;var g=new a.ga(0);g.resize(k);for(var d=[],f=new a.i,h=0;h<k;h++){g.write(h,h);var l;a.T.Kc(e)?(b.Ti(h,f),l=f.Af()):l=b.Fa(h);l=a.qH.QS(c,l);d[h]=l}g.xd(0,
g.size,function(b,c){return d[b]<d[c]?-1:d[b]>d[c]?1:0});f=b.Pa();for(h=0;h<k;h++)l=g.read(h),a.T.Kc(e)?f.Zj(b,l,!0):f.Pd(b,l,l+1);return f};b.prototype.tS=function(){var b=Math.min(3.141592653589793*this.Gb-this.hb,this.hb),b=Math.min(b,.39269908169872414*this.Gb),c=new a.b;c.ma(0,10*this.Rb);var n=45*this.Rb,g=new a.ca(0),d=new a.ca(0),f=new a.ca(0),h=new a.ca(0),l=new a.ca(0),m=new a.ca(0),p=new a.ca(0),z=new a.ca(0),q=new a.b,r=new a.b,v=new a.b,x=new a.b;a.zb.Ph(this.Gb,this.Xb,c.x,c.y,b,0,g,
d);q.ma(g.l,d.l);a.zb.Ph(this.Gb,this.Xb,c.x,c.y,b,n,f,h);r.ma(f.l,h.l);for(var g=new a.ca(0),d=new a.ca(0),y=new a.ca(0);;){a.zb.Ph(this.Gb,this.Xb,c.x,c.y,b,.5*(0+n),l,m);v.ma(l.l,m.l);a.zb.Rd(this.Gb,this.Xb,q.x,q.y,r.x,r.y,g,d,null,2);a.zb.dk(this.Gb,this.Xb,q.x,q.y,.5*g.l,d.l,p,z,2);x.ma(p.l,z.l);a.zb.Rd(this.Gb,this.Xb,v.x,v.y,x.x,x.y,y,null,null,2);if(y.l<=this.Rm)break;n*=.9;a.zb.Ph(this.Gb,this.Xb,c.x,c.y,b,n,f,h);r.ma(f.l,h.l)}this.Sm=6.283185307179586/Math.ceil(6.283185307179586/(n-0))};
b.prototype.uS=function(){var b=Math.min(3.141592653589793*this.Gb-this.hb,this.hb),b=Math.min(b,.39269908169872414*this.Gb),c=new a.b,n=new a.b;c.ma(0,10*this.Rb);n.ma(10*this.Rb,10*this.Rb);var g=new a.ca(0),d=new a.ca(0),f=new a.ca(0);a.zb.Rd(this.Gb,this.Xb,c.x,c.y,n.x,n.y,f,g,d,this.ke);var h=new a.ca(0),l=new a.ca(0),m=new a.ca(0),p=new a.ca(0),z=new a.b,q=new a.ca(0),r=new a.ca(0),v=new a.ca(0),x=new a.ca(0),y=new a.ca(0),w=new a.ca(0),C=new a.ca(0),t=new a.ca(0),D=new a.ca(0),E=new a.b,F=
new a.b,H=new a.b,Q=new a.b,K=1,g=g.l,d=d.l+1.570796326794897,f=f.l;a.zb.Ph(this.Gb,this.Xb,c.x,c.y,b,g-1.570796326794897,r,v);E.ma(r.l,v.l);a.zb.Ph(this.Gb,this.Xb,n.x,n.y,b,d,x,y);F.ma(x.l,y.l);for(var r=new a.ca(0),v=new a.ca(0),d=new a.ca(0),A=new a.ca(0);;){a.zb.dk(this.Gb,this.Xb,c.x,c.y,.5*(0+K)*f,g,h,l,this.ke);z.ma(h.l,l.l);a.zb.Rd(this.Gb,this.Xb,c.x,c.y,z.x,z.y,null,null,q,this.ke);a.zb.Ph(this.Gb,this.Xb,z.x,z.y,b,q.l+1.570796326794897,w,C);H.ma(w.l,C.l);a.zb.Rd(this.Gb,this.Xb,E.x,E.y,
F.x,F.y,r,v,null,2);a.zb.dk(this.Gb,this.Xb,E.x,E.y,.5*r.l,v.l,t,D,2);Q.ma(t.l,D.l);a.zb.Rd(this.Gb,this.Xb,H.x,H.y,Q.x,Q.y,d,null,null,2);if(d.l<=this.Rm)break;K*=.9;a.zb.dk(this.Gb,this.Xb,c.x,c.y,K*f,g,m,p,this.ke);n.ma(m.l,p.l);a.zb.Rd(this.Gb,this.Xb,c.x,c.y,n.x,n.y,null,null,A,this.ke);a.zb.Ph(this.Gb,this.Xb,n.x,n.y,b,A.l+1.570796326794897,x,y);F.ma(x.l,y.l)}b=K*f;1E5<b&&(b=1E5);this.Nx=b};b.prototype.sS=function(){var b;b=5E4<this.hb?100:1E4<this.hb?10:1;500>this.hb/b&&(b=this.hb/500);.01>
b&&(b=.01);this.Rm=b};return b}();a.pH=c})(w||(w={}));(function(a){var g=function(){function g(){}g.ac=function(c,b){var e=new a.b;e.J(b);c.push(e)};g.$i=function(c,b){c.add(b.x);c.add(b.y)};g.cx=function(c){c.cf(c.size-2)};g.cy=function(c,b){b.ma(c.get(c.size-2),c.get(c.size-1))};g.oq=function(c,b,e,k,n,d){if(null==c)throw a.g.N();var u=c.D();if(c.s()||a.T.Km(u))return c;var f=new g;f.sg=b;f.wc=a.Ya.Em(b);var h=a.Ya.ft(f.wc);f.Yb=d;f.Gb=a.Ya.Ts(f.wc);f.Xb=h*(2-h);f.Rb=f.wc.Se().Dj;f.jp=f.wc.xq();
f.hr=f.jp*f.Rb;f.Bx=k;f.Ax=n;f.ke=e;197==u?(e=new a.Ka(c.description),e.Wc(c,!1)):a.T.Lc(u)?(e=new a.Xa(c.description),e.Bc(c,!0)):e=c;if(4!=f.ke){b=0==f.sg.lc(f.wc)?a.Ya.Wl(e,f.sg,f.wc):a.gh.qo(e,f.wc);if(b.s())return b;b=g.IE(f.Rb,b);b=f.hw(b);b=a.Vn.nl(b,f.wc,f.ke);f=a.Ya.Wl(b,f.wc,f.sg)}else{2==a.Nf.Am(b)?(c=a.Ya.TN(),b=a.$r.local().$(e,c,b,d),b==c&&(b=new a.Ka,c.copyTo(b))):b=a.gh.qo(e,f.wc);if(b.s())return b;f=f.wS(b)}return f};g.IE=function(c,b){var e=new a.i;b.dd(e);if(3.141592653589793>e.aa()*
c)return b;for(var k=!1,e=b.Ca(),n=new a.b,d=new a.b;e.kb();)for(;e.La();){var f=e.ia();n.J(f.Mb());d.J(f.oc());n.scale(c);d.scale(c);if(3.141592653589793<Math.abs(n.x-d.x)){var h=g.Gs(n,d);if(!h){k=!0;break}if(6.283185307179586<Math.abs(n.x-d.x)){k=!0;break}}}if(!k)return b;var k=b.Pa(),l=1<b.description.Aa,m=new a.b,p=new a.b,q=new a.b,z=new a.b,r=new a.Va;for(e.Lk();e.kb();)for(var v=NaN,x=[0];e.La();){f=e.ia();n.J(f.Mb());d.J(f.oc());n.scale(c);d.scale(c);isNaN(v)?(g.Bd(n.x,NaN,x),p.J(n)):p.J(q);
v=p.x;if(h=g.Gs(n,d)){if(6.283185307179586<d.x-n.x)for(;6.283185307179586<d.x-n.x;)d.x-=6.283185307179586;if(-6.283185307179586>d.x-n.x)for(;-6.283185307179586>d.x-n.x;)d.x+=6.283185307179586;g.Bd(d.x,NaN,x);q.J(d)}else m.J(d),g.eK(m),g.Bd(m.x,v,x),q.ma(x[0]+m.x,m.y);.5>Math.abs(q.x-d.x)&&q.J(d);l?(f.uu(0,r),z.J(p),z.scale(1/c),r.ic(z),(h=e.wl())?k.df(r):k.lineTo(r),e.Jm()&&!b.vc(e.Qa)&&(f.uu(1,r),z.J(q),z.scale(1/c),r.ic(z),k.lineTo(r))):((h=e.wl())&&k.Sw(),f=k.ea()-1,z.J(p),z.scale(1/c),k.kf(f,
-1,z),e.Jm()&&!b.vc(e.Qa)&&(z.J(q),z.scale(1/c),k.kf(f,-1,z)))}return k};g.kC=function(c,b,e,k,n,d,f,h,l,m,p,q){var u=new a.b,B=new a.b,G=0<k.compare(n);g.Ez(G,k,n,u,B);g.Jz(c,b,e,u,B,d,NaN,f,h,l,m,null,p,q);G&&g.gy(l,m,null,p)};g.prototype.hw=function(c){var b=c.Pa(),e=c.Ca(),k=[],n=null,d=null,f=1<c.description.Aa;f&&(n=new a.qd(0),d=new a.Ag);for(var h=[0],l=new a.b,m=new a.b,p=new a.b,q=new a.b;e.kb();)for(h[0]=0;e.La();){var z=e.ia();l.J(z.Mb());m.J(z.oc());l.scale(this.Rb);m.scale(this.Rb);
var r=0<l.compare(m);g.Ez(r,l,m,p,q);k.length=0;null!=n&&n.cf(0);0<this.Bx?g.Jz(this.Gb,this.Xb,this.ke,p,q,this.Bx,this.Ax,this.hr,null,null,null,f?n:null,k,h):g.dH(this.Gb,this.Xb,this.ke,p,q,this.Ax,this.hr,f?n:null,k,h);r&&g.gy(null,null,f?n:null,k);k[0].J(z.Mb());k[k.length-1].J(z.oc());for(var v=1;v<k.length-1;v++)k[v].scale(1/this.Rb);f?(r=g.Cz(r,z,d),g.oz(e.wl(),e.Jm()&&!c.vc(e.Qa),z,r,n,k,b)):g.mz(e.wl(),e.Jm()&&!c.vc(e.Qa),k,b)}return b};g.prototype.wS=function(c){var b=c.Pa(),e=c.Ca(),
k=[],n=null,d=new a.Ag,f=1<c.description.Aa;for(f&&(n=new a.qd(0));e.kb();)for(;e.La();){var h=e.ia(),l=h.Mb(),m=h.oc(),l=0<l.compare(m),m=g.Cz(l,h,d);k.length=0;null!=n&&n.cf(0);g.FR(this.Gb,this.Xb,this.Rb,m,this.sg,this.Bx,this.Ax,f?n:null,k);l&&g.gy(null,null,f?n:null,k);f?g.oz(e.wl(),e.Jm()&&!c.vc(e.Qa),h,m,n,k,b):g.mz(e.wl(),e.Jm()&&!c.vc(e.Qa),k,b)}return b};g.mz=function(c,b,e,k){c&&k.Sw();c=k.ea()-1;var a=e.slice(0);k.dD(c,a,a.length-1);b&&k.kf(c,-1,e[e.length-1])};g.oz=function(c,b,e,k,
n,g,d){var u=new a.Va;e.En(u);c?d.df(u):d.lineTo(u);if(2<g.length){c=k.$b();for(var f=1;f<g.length-1;f++){var h=k.AD(n.get(f)*c);k.uu(h,u);u.ic(g[f]);d.lineTo(u)}}b&&(e.Bn(u),d.lineTo(u))};g.Jz=function(c,b,e,k,n,d,f,h,l,m,p,q,z,r){var u=new a.ca(0),B=new a.ca(0),G=new a.ca(0);a.zb.Rd(c,b,k.x,k.y,n.x,n.y,G,u,B,e);var G=G.l,I=u=u.l,B=B.l;0>I&&(I+=6.283185307179586);0>B&&(B+=6.283185307179586);null!=l&&(l[0]=G);null!=m&&(m[0]=I);null!=p&&(p[0]=B);m=l=NaN;null!=q&&(m=a.u.gg(c,b),p=a.u.q(c,b,k.y),l=(m-
p)/G,m=(m+p)/G);p=g.Hs(k,n);var B=g.Fs(k,n),I=p||B,v=g.wz(k,n,h),x=new a.ca(0),y=new a.ca(0),V=new a.b,Z=new a.b,w=new a.b;g.Bd(k.x,NaN,r);var C=[r[0]];if(G<=d)g.ac(z,k),g.Bd(n.x,NaN,r),null!=q&&q.add(0),I?(p&&g.by(k,n,q,z),B&&g.Vx(k,n,q,z)):v?g.Xx(k,n,u,l,m,q,z):0<f&&(Z.ma(k.x-C[0],k.y),V.ma(n.x-r[0],n.y),g.yv(c,b,e,k,G,u,Z,V,0,1,f,q,z,C)),g.ac(z,n);else{d=1+a.I.truncate(Math.ceil(G/d));var t=G/(d-1),D=new a.b,E=0;g.ac(z,k);D.J(k);Z.ma(k.x-r[0],k.y);null!=q&&q.add(0);for(var aa=1;aa<d;aa++){var F;
aa<d-1?(a.zb.dk(c,b,k.x,k.y,aa*t,u,x,y,e),V.ma(x.l,y.l),g.Bd(V.x,D.x,r),w.ma(r[0]+V.x,V.y),F=aa/(d-1)):(g.Bd(n.x,NaN,r),V.ma(n.x-r[0],n.y),w.J(n),F=1);I?(1==aa&&p&&g.by(k,w,q,z),aa==d-1&&B&&g.Vx(D,n,q,z)):v?g.uz(D,w,h)&&(k.x<n.x?D.x>w.x&&(r[0]+=6.283185307179586,w.ma(r[0]+V.x,V.y)):D.x<w.x&&(r[0]-=6.283185307179586,w.ma(r[0]+V.x,V.y)),g.Xx(D,w,u,l,m,q,z)):0<f&&g.yv(c,b,e,k,G,u,Z,V,E,F,f,q,z,C);g.ac(z,w);null!=q&&q.add(F);D.J(w);Z.J(V);C[0]=r[0];E=F}}};g.dH=function(c,b,e,k,n,d,f,h,l,m){var u=new a.ca(0),
B=new a.ca(0),p=new a.ca(0);a.zb.Rd(c,b,k.x,k.y,n.x,n.y,p,u,B,e);var B=p.l,u=u.l,G=p=NaN;if(null!=h)var G=a.u.gg(c,b),q=a.u.q(c,b,k.y),p=(G-q)/B,G=(G+q)/B;var q=g.Hs(k,n),z=g.Fs(k,n),r=q||z;f=g.wz(k,n,f);var I=g.Gs(k,n),I=r||f||I;g.Bd(k.x,NaN,m);var v=new a.b;g.ac(l,k);v.J(k);null!=h&&h.add(0);I?(r?(q&&g.by(k,n,h,l),z&&g.Vx(k,n,h,l)):f&&g.Xx(k,n,u,p,G,h,l),g.Bd(n.x,NaN,m),g.ac(l,n)):B<=d?(g.Bd(n.x,NaN,m),g.ac(l,n)):(p=new a.b,f=new a.b,p.J(k),f.J(n),p.x-=m[0],f.x-=m[0],-3.141592653589793>f.x?f.x+=
6.283185307179586:3.141592653589793<f.x&&(f.x-=6.283185307179586),g.yv(c,b,e,k,B,u,p,f,0,1,d,h,l,m),g.ac(l,n),g.Bd(n.x,NaN,m));null!=h&&h.add(1)};g.yv=function(c,b,e,k,n,d,f,h,l,m,p,q,z,r){var u=new a.b,B=new a.b;u.ma(f.x+r[0],f.y);new a.ca(0);new a.ca(0);new a.ca(0);new a.ca(0);var G=new a.ca(0),I=new a.ca(0),v=new a.ca(0),x=new a.b,y=new a.b,V=new a.b,Z=new a.b;x.J(f);y.J(h);f=new a.qd(0);h=new a.qd(0);g.$i(f,y);h.add(m);var w=new a.b,C=new a.yb,t=[];for(g.Kz(4,t);0<f.size;){for(var D=!1,E,aa=NaN,
F=0;3>F;F++)if(E=t[F]*m+(1-t[F])*l,a.zb.dk(c,b,k.x,k.y,E*n,d,G,I,e),V.ma(G.l,I.l),0==F&&(aa=E,Z.J(V)),g.mR(x,V,y,C),C.Kb(C.Gd(V,!0),w),a.zb.Rd(c,b,V.x,V.y,w.x,w.y,v,null,null,2),v.l>p){D=!0;break}D?(y.J(Z),m=aa,g.$i(f,y),h.add(m)):(g.cx(f),h.oj(h.size-1,1,h.size-1),0<f.size&&(g.Bd(y.x,u.x,r),B.ma(r[0]+y.x,y.y),g.ac(z,B),u.J(B),null!=q&&q.add(m),x.J(y),l=m,g.cy(f,y),m=h.get(h.size-1)))}};g.FR=function(c,b,e,k,n,d,f,h,l){var u=new a.b,B=new a.b,m=new a.b,p=new a.b,G=new a.b,q=new a.b,z=new a.b,r=new a.b,
I=new a.b,v=new a.b,x=new a.ca(0),y=new a.ca(0),w=new a.b,C=[[],[]],t=1==a.Nf.Am(n);n=n.Ko();var D=k.Mb(),E=k.oc();t?(q.ma(D.x*e,D.y*e),z.ma(E.x*e,E.y*e)):(C[0][0]=D.x,C[0][1]=D.y,C[1][0]=E.x,C[1][1]=E.y,a.Ya.tu(),q.x=C[0][0]*e,q.y=C[0][1]*e,z.x=C[1][0]*e,z.y=C[1][1]*e);var F=0,H=0,Q=1,K=k.mD();u.J(D);B.J(E);var E=new a.qd(0),A=new a.qd(0),J=new a.qd(0);g.$i(E,B);g.$i(A,z);J.add(Q);g.ac(l,u);null!=h&&h.add(H);var L=[],M;M=0<f?K?5:3:K?5:1;g.Kz(M,L);for(var N=new a.ca(0),O=new a.ca(0),S=new a.ca(0),
T=new a.ca(0),R=new a.ca(0),P=new a.ca(0),W=new a.ca(0);0<A.size;){var U=!1,Y,X=NaN;a.zb.Rd(c,b,q.x,q.y,z.x,z.y,N,O,null,2);for(D=0;D<M;D++){if(0==D){if(!K&&0>=f&&N.l<=d&&3.141592653589793>Math.abs(q.x-z.x))break;if(k.rA(H,Q)<=n)break}Y=L[D]*Q+(1-L[D])*H;k.Kb(Y,m);t?r.ma(m.x*e,m.y*e):(C[0][0]=m.x,C[0][1]=m.y,a.Ya.tu(),r.x=C[0][0]*e,r.y=C[0][1]*e);if(0==D&&(X=Y,G.J(m),v.J(r),0<d&&(N.l>d||3.141592653589793<=Math.abs(q.x-z.x)))){U=!0;break}if(K&&0<d){if(a.zb.Rd(c,b,q.x,q.y,r.x,r.y,S,null,null,2),S.l>
d||3.141592653589793<=Math.abs(q.x-r.x)){U=!0;break}}else if(0<f)if(K?(p.OO(u,B,L[D]),t?I.ma(p.x*e,p.y*e):(C[0][0]=p.x,C[0][1]=p.y,a.Ya.tu(),I.x=C[0][0]*e,I.y=C[0][1]*e)):(p.J(m),I.J(r)),a.zb.Rd(c,b,q.x,q.y,I.x,I.y,T,null,null,2),T.l<=N.l){a.zb.dk(c,b,q.x,q.y,T.l,O.l,x,y,2);w.ma(x.l,y.l);a.zb.Rd(c,b,w.x,w.y,r.x,r.y,R,null,null,2);if(R.l>f){U=!0;break}if(K){a.zb.Rd(c,b,w.x,w.y,I.x,I.y,P,null,null,2);if(P.l>f){U=!0;break}a.zb.Rd(c,b,I.x,I.y,r.x,r.y,W,null,null,2);if(W.l>f){U=!0;break}}}else{U=!0;break}}U?
(B.J(G),z.J(v),Q=X,g.$i(E,B),g.$i(A,z),J.add(Q)):(g.cx(E),g.cx(A),J.oj(J.size-1,1,J.size-1),g.ac(l,B),F+=N.l,null!=h&&h.add(F),0<A.size&&(u.J(B),q.J(z),H=Q,g.cy(E,B),g.cy(A,z),Q=J.get(J.size-1)))}if(null!=h)for(c=1/F,D=0;D<h.size;D++)h.write(D,h.read(D)*c)};g.gy=function(c,b,e,k){k.reverse();null!=e&&e.Jp(0,e.size,1);e=null!=c?c[0]:NaN;k=null!=b?b[0]:NaN;null!=c&&(c[0]=k);null!=b&&(b[0]=e)};g.Ez=function(c,b,e,k,a){c?(k.J(e),a.J(b)):(k.J(b),a.J(e))};g.Cz=function(c,b,e){if(!c)return b;e.create(b.D());
b.copyTo(e.get());e.get().reverse();return e.get()};g.Bd=function(c,b,e){if(isNaN(b)){for(;3.141592653589793<e[0]-c;)e[0]-=6.283185307179586;for(;3.141592653589793<c-e[0];)e[0]+=6.283185307179586}else 3.141592653589793<e[0]+c-b?e[0]-=6.283185307179586:3.141592653589793<b-(e[0]+c)&&(e[0]+=6.283185307179586)};g.mR=function(c,b,e,k){3.141592653589793>Math.abs(b.x-c.x)?(k.ed(c),3.141592653589793<=e.x-c.x?k.Ok(e.x-6.283185307179586,e.y):3.141592653589793<=c.x-e.x?k.Ok(e.x+6.283185307179586,e.y):k.Ok(e.x,
e.y)):(k.ed(e),3.141592653589793<=c.x-e.x?k.Ok(c.x-6.283185307179586,c.y):3.141592653589793<=e.x-c.x?k.Ok(c.x+6.283185307179586,c.y):k.Ok(c.x,c.y))};g.Kz=function(c,b){for(var e=0;e<c;e++){var k=Math.ceil(e/2)/(c+1);0!=e%2&&(k=-k);b[e]=.5+k}};g.Hs=function(c,b){return a.j.S(c.y,1.570796326794897)&&!a.j.S(b.y,1.570796326794897)||a.j.S(c.y,-1.570796326794897)&&!a.j.S(b.y,-1.570796326794897)?!0:!1};g.Fs=function(c,b){return a.j.S(b.y,1.570796326794897)&&!a.j.S(c.y,1.570796326794897)||a.j.S(b.y,-1.570796326794897)&&
!a.j.S(c.y,-1.570796326794897)?!0:!1};g.wz=function(c,b,e){return!g.uz(c,b,e)||a.j.S(c.y,1.570796326794897)||a.j.S(c.y,-1.570796326794897)||a.j.S(b.y,1.570796326794897)||a.j.S(b.y,-1.570796326794897)?!1:!0};g.uz=function(c,b,e){return Math.abs(Math.abs(c.x-b.x)-3.141592653589793)<=e?!0:!1};g.Gs=function(c,b){return a.j.S(c.y,1.570796326794897)&&a.j.S(b.y,1.570796326794897)||a.j.S(c.y,-1.570796326794897)&&a.j.S(b.y,-1.570796326794897)?!0:!1};g.by=function(c,b,e,k){if(0<c.y){var n=new a.b;n.ma(b.x,
1.570796326794897)}else n=new a.b,n.ma(b.x,-1.570796326794897);a.j.S(c.x,n.x)||a.j.S(b.y,n.y)||(g.ac(k,n),null!=e&&e.add(0))};g.Vx=function(c,b,e,k){if(0<b.y){var n=new a.b;n.ma(c.x,1.570796326794897)}else n=new a.b,n.ma(c.x,-1.570796326794897);a.j.S(b.x,n.x)||a.j.S(c.y,n.y)||(g.ac(k,n),null!=e&&e.add(1))};g.Xx=function(c,b,e,k,n,d,f){a.j.Vc(e)?(0<1.570796326794897-c.y&&(e=new a.b,e.ma(c.x,1.570796326794897),g.ac(f,e),null!=d&&d.add(k)),0<1.570796326794897-b.y&&(e=new a.b,e.ma(b.x,1.570796326794897),
g.ac(f,e),null!=d&&d.add(k))):(0<1.570796326794897+c.y&&(e=new a.b,e.ma(c.x,-1.570796326794897),g.ac(f,e),null!=d&&d.add(n)),0<1.570796326794897+b.y&&(e=new a.b,e.ma(b.x,-1.570796326794897),g.ac(f,e),null!=d&&d.add(n)))};g.eK=function(c){if(-3.141592653589793>c.x)for(;-3.141592653589793>c.x;)c.x+=6.283185307179586;if(3.141592653589793<c.x)for(;3.141592653589793<c.x;)c.x-=6.283185307179586};return g}();a.ui=g})(w||(w={}));(function(a){var g=function(){function g(){}g.nl=function(c,b,e){if(null==c||
null==b||!a.Ya.Qo(b))throw a.g.N();if(c.s())return c;var k=c,n=k.D();if(a.T.Kc(n)){k=a.gh.qo(c,b);c=new a.i;k.o(c);for(var n=a.Ia.zd(b,c,!1),d=a.Ya.Fm(b),f=Math.floor((c.v-d.v)/d.aa())*d.aa()+d.v;f<c.B;)f>c.v+n&&f<c.B-n&&(k=a.gh.Rw(k,b,e,f)),f+=d.aa()}else{if(197==n)return c=new a.Ka(k.description),c.Wc(k,!1),g.nl(c,b,e);if(a.T.Lc(n))return c=new a.Xa(k.description),c.Bc(k,!0),g.nl(c,b,e)}return g.VG(k,b)};g.VG=function(c,b){if(null==c||null==b||!a.Ya.Qo(b))throw a.g.N();if(c.s())return c;var e;e=
c.D();197==e?(e=new a.Ka(c.description),e.Wc(c,!1)):a.T.Lc(e)?(e=new a.Xa(c.description),e.Bc(c,!0)):e=c;e=a.gh.qo(e,b);return e.s()?e:1==a.Nf.Am(b)?a.gh.aN(e,b,e!=c):g.SG(e,b,e!=c)};g.SG=function(c,b,e){if(!a.Ya.Qo(b))throw a.g.N();if(c.s())return c;var k=a.Ya.IC(b),n=0-180*k,k=360*k;2==a.Nf.Am(b)&&(n=a.Ya.Fm(b),k=n.B,n=n.v,k-=n);return a.gh.gC(c,n,k,b,e)};return g}();a.Vn=g})(w||(w={}));(function(a){var g=function(){function g(){}g.OH=function(c,b){var e=Math.abs(c%b);return isNaN(e)||e==c||e<=
Math.abs(b)/2?e:0>c?-1*(e-b):0<c?1*(e-b):0*(e-b)};g.H=function(c){return 0>c?-c:c};g.nb=function(c,b){return 0<=b?g.H(c):-g.H(c)};g.S=function(c,b){return c==b||g.H(c-b)<=g.bF*(1+(g.H(c)+g.H(b))/2)};g.Vc=function(c){return 0==c||g.H(c)<=g.bF};g.bs=function(c){c=g.OH(c,g.fv);return g.H(c)<=g.$g?c:0>c?c+g.fv:c-g.fv};g.Yz=function(c,b){c.l=g.bs(c.l);b.l=g.bs(b.l);g.H(b.l)>g.Vr&&(c.l=g.bs(c.l+g.$g),b.l=g.nb(g.$g,b.l)-b.l)};g.gg=function(c,b){b=Math.sqrt(1-b);b=(1-b)/(1+b);var e=b*b;return c/(1+b)*(1+
e*(.25+e*(.015625+1/256*e)))*g.Vr};g.pN=function(c,b,e,k,n){var d,f,h,l,m,p,q,r=0,z=p=0,v=0,x=0,y=0;m=0;var w,C,t;q=0;var D,E,F;t=new a.ca;d=new a.ca;if(null!=n)if(t.l=c,d.l=b,g.Yz(t,d),c=t.l,b=d.l,t.l=e,d.l=k,g.Yz(t,d),e=t.l,k=d.l,e=g.bs(e-c),g.S(b,k)&&(g.Vc(e)||g.S(g.H(b),g.Vr)))null!=n&&(n.l=0);else{if(g.S(b,-k)){if(g.S(g.H(b),g.Vr)){null!=n&&(n.l=2*g.gg(6378137,.0066943799901413165));return}if(g.S(g.H(e),g.$g)){null!=n&&(n.l=2*g.gg(6378137,.0066943799901413165));return}}if(g.Vc(.0066943799901413165))x=
Math.cos(b),y=Math.cos(k),null!=n&&(r=Math.sin((k-b)/2),p=Math.sin(e/2),q=2*Math.asin(Math.sqrt(r*r+x*y*p*p)),n.l=6378137*q);else{t=1-Math.sqrt(.9933056200098587);c=1-t;d=Math.atan(c*Math.tan(b));b=Math.sin(d);d=Math.cos(d);f=Math.atan(c*Math.tan(k));k=Math.sin(f);f=Math.cos(f);l=h=e;E=0;F=1;D=e;for(C=!0;1==C;)E+=1,1==F&&(m=Math.sin(D),p=Math.cos(D),r=f*m,q=d*k-b*f*p,r=Math.sqrt(r*r+q*q),p=b*k+d*f*p,q=Math.atan2(r,p),z=1E-15>g.H(r)?d*f*m/g.nb(1E-15,r):d*f*m/r,v=1-z*z,x=1E-15>g.H(v)?p-b*k/g.nb(1E-15,
v)*2:p-b*k/v*2,y=x*x,m=((-3*v+4)*t+4)*v*t/16),w=(1-m)*t*(q+m*r*(x+p*m*(2*y-1))),1==F?(D=e+w*z,1E-14>g.H(D-l)?C=!1:g.H(D)>g.$g?(F=2,D=g.$g,0>e&&(D=-D),z=0,v=1,h=l=2,q=g.$g-g.H(Math.atan(b/d)+Math.atan(k/f)),r=Math.sin(q),p=Math.cos(q),m=((-3*v+4)*t+4)*v*t/16,1E-14>g.H(z-h)?C=!1:(x=1E-15>g.H(v)?p-b*k/g.nb(1E-15,v)*2:p-b*k/v*2,y=x*x)):(0>(D-l)*(l-h)&&5<E&&(D=(2*D+3*l+h)/6),h=l,l=D)):(z=(D-e)/w,0>(z-l)*(l-h)&&5<E&&(z=(2*z+3*l+h)/6),h=l,l=z,v=1-z*z,m=z*r/(d*f),p=-Math.sqrt(g.H(1-m*m)),D=Math.atan2(m,p),
r=f*m,q=d*k-b*f*p,r=Math.sqrt(r*r+q*q),p=b*k+d*f*p,q=Math.atan2(r,p),m=((-3*v+4)*t+4)*v*t/16,1E-14>g.H(z-h)?C=!1:(x=1E-15>g.H(v)?p-b*k/g.nb(1E-15,v)*2:p-b*k/v*2,y=x*x));null!=n&&(z=Math.sqrt(1+(1/(c*c)-1)*v),z=(z-1)/(z+1),v=z*(1-.375*z*z),n.l=(1+z*z/4)/(1-z)*c*6378137*(q-v*r*(x+v/4*(p*(-1+2*y)-v/6*x*(-3+4*r*r)*(-3+4*y)))))}}};g.$g=3.141592653589793;g.Vr=1.5707963267948966;g.fv=6.283185307179586;g.bF=3.552713678800501E-15;return g}();a.nH=g})(w||(w={}));(function(a){var g=function(){function a(){}
a.prototype.uv=function(c){this.hi=c};a.prototype.GA=function(c){this.Ab=c};a.prototype.HA=function(c){this.nn=c};a.vB=function(c){return c.s()||1607!=c.D()&&1736!=c.D()?!1:!0};a.tB=function(c){return c.s()||1607!=c.D()&&1736!=c.D()||20>c.F()?!1:!0};a.uB=function(c){return c.s()||1607!=c.D()&&1736!=c.D()||20>c.F()?!1:!0};return a}();a.Wj=g})(w||(w={}));(function(a){var g=function(){function g(){}g.FH=function(c){var b=new a.Ka;b.Uy(c.R.v,c.R.C);b.wj(c.R.v,c.R.G);b.wj(c.R.B,c.R.G);b.wj(c.R.B,c.R.C);
return b};g.aT=function(c,b){var e=a.wi.local();c=new a.Pc(c);return e.$(c,b,null).next()};g.ll=function(c,b,e){return a.Zr.local().$(c,b,e,null)};g.On=function(c,b,e){return a.dv.local().$(c,b,e,null)};g.MS=function(c,b,e){var k=a.dv.local();c=new a.Pc(c);b=new a.Pc(b);e=k.$(c,b,e,null);for(k=[];null!=(b=e.next());)k.push(b);return k};g.lc=function(c,b,e){return a.bl.local().$(3,c,b,e,null)};g.nM=function(c,b,e){return a.bl.local().$(4,c,b,e,null)};g.QO=function(c,b,e){var k=a.$r.local();c=new a.Pc(c);
b=new a.Pc(b);e=k.$(c,b,e,null);for(k=[];null!=(b=e.next());)k.push(b);return k};g.kM=function(c,b,e){var k=a.Zr.local();c=new a.Pc(c);b=new a.Pc(b);e=k.$(c,b,e,null);for(k=[];null!=(b=e.next());)k.push(b);return k};g.Ga=function(c,b,e){return a.$r.local().$(c,b,e,null)};g.jT=function(c,b,e){return a.bl.local().$(2,c,b,e,null)};g.contains=function(c,b,e){return a.bl.local().$(1,c,b,e,null)};g.VL=function(c,b,e){return a.bl.local().$(16,c,b,e,null)};g.touches=function(c,b,e){return a.bl.local().$(8,
c,b,e,null)};g.tQ=function(c,b,e){return a.bl.local().$(32,c,b,e,null)};g.RO=function(c,b,e){return a.bl.local().$(1073741824,c,b,e,null)};g.py=function(c,b,e,k){return a.fI.local().$(c,b,e,k,null)};g.Fb=function(c,b,e,k){var n=null;if(null!=e){if(n=e.Se(),null!=k&&n.Qc()!=k.Qc()&&n.Nc!=k.Nc)throw a.g.cj();}else if(null!=k)throw a.g.N();c=a.ZH.local().$(c,b,null);null!==n&&null!==k&&(c=a.Tb.ih(c,n,k));return c};g.clip=function(c,b,e){return a.SH.local().$(c,a.i.Oa(b.R.v,b.R.C,b.R.B,b.R.G),e,null)};
g.xm=function(c,b,e){if(null==c||null==b)return null;c=a.UH.local().$(!0,c,b,e,null);for(b=[];null!=(e=c.next());)e.s()||b.push(e);return b.slice(0)};g.rK=function(c,b,e,k,n,d,f,h){if(!0===n)return g.VP(c,b,e,k,d,f,h);n=e;if(null!=b){if(f=b.Se(),null!=k&&f.Qc()!=k.Qc()){if(f.Nc!=k.Nc)throw a.g.cj();n=[];a.Tb.OB(e,e.length,k,f,n)}}else if(null!=k)throw a.g.N();e=a.Oz.local();if(d){c=new a.Pc(c);b=e.$(c,b,n,d,null);for(c=[];null!=(d=b.next());)c.push(d);d=c.slice(0)}else for(d=[],k=0;k<c.length;k++)d[k]=
e.$(c[k],b,n[k],null);return d};g.VP=function(c,b,e,k,n,g,d){if(null===b)throw a.g.N();if(null===k||void 0===k)k=4326!==b.Qc()?b.Se():a.Tb.Qd(9001);if(0!==k.Nc)throw a.g.N();a.Tb.OB(e,e.length,k,a.Tb.Qd(9001),e);k=a.Tz.local();if(n){c=new a.Pc(c);b=k.$(c,b,g,e,d,!1,n,null);for(e=[];null!=(g=b.next());)e.push(g);n=e.slice(0)}else{n=[];for(var u=0;u<c.length;u++)n[u]=k.$(c[u],b,g,e[u],d,!1,null)}return n};g.buffer=function(c,b,e,k,n,g,d){var u=e;if(!1===n){if(null!=b){if(n=b.Se(),null!=k&&n.Qc()!=k.Qc()){if(n.Nc!=
k.Nc)throw a.g.cj();u=a.Tb.ih(e,k,n)}}else if(null!=k)throw a.g.N();c=a.Oz.local().$(c,b,u,null)}else{if(null===b)throw a.g.N();if(null===k||void 0===k)k=4326!==b.Qc()?b.Se():a.Tb.Qd(9001);if(0!==k.Nc)throw a.g.N();u=a.Tb.ih(e,k,a.Tb.Qd(9001));c=a.Tz.local().$(c,b,g,u,d,!1,null)}return c};g.sQ=function(c,b,e,k,n,g,d){if(null!=b){var u=b.Se();if(null!=d&&u.Qc()!=d.Qc()){if(u.Nc!=d.Nc)throw a.g.cj();e=a.Tb.ih(e,d,u)}}else if(null!=d)throw a.g.N();c=new a.Pc(c);b=a.Wz.local().$(c,b,e,k,n,g,null);for(e=
[];null!=(k=b.next());)e.push(k);return e.slice(0)};g.offset=function(c,b,e,k,n,g,d){if(null!=b){var u=b.Se();if(null!=d&&u.Qc()!=d.Qc()){if(u.Nc!=d.Nc)throw a.g.cj();e=a.Tb.ih(e,d,u)}}else if(null!=d)throw a.g.N();return a.Wz.local().$(c,b,e,k,n,g,null)};g.JL=function(c){return a.Qz.local().$(c,null)};g.KL=function(c,b){var e=a.Qz.local();c=new a.Pc(c);e=e.$(c,b,null);for(c=[];null!=(b=e.next());)c.push(b);return c};g.zw=function(c,b,e){return a.bv.local().zw(c,b,e)};g.Aw=function(c,b){return a.bv.local().Aw(c,
b)};g.Bw=function(c,b,e,k){return a.bv.local().Bw(c,b,e,k)};g.Qy=function(c,b){return a.as.local().$(c,b,!1,null)};g.cP=function(c,b){return a.as.local().Ro(c,b,null)};g.fN=function(c,b,e,k,n){var g=a.Sz.local();if(null!=b){if(b=b.Se(),null!=n&&b.Qc()!=n.Qc()){if(b.Nc!=n.Nc)throw a.g.cj();e=a.Tb.ih(e,n,b)}}else if(null!=n)throw a.g.N();return g.$(c,e,k,null)};g.oq=function(c,b,e,k){var n=a.WH.local();if(null!=b){if(b=b.Se(),null!=k&&b.Qc()!=k.Qc()){if(b.Nc!=k.Nc)throw a.g.cj();e=a.Tb.ih(e,k,b)}}else if(null!=
k)throw a.g.N();return n.$(c,e,null)};g.fw=function(c,b,e,k,n){void 0===n&&(n=0);var g=a.aI.local();if(4==n)throw a.g.qe();if(0!==n)throw a.g.qe();if(null!=b){var d=b.Se();if(null!=k&&d.Qc()!=k.Qc()){if(d.Nc!=k.Nc)throw a.g.cj();e=a.Tb.ih(e,k,d)}}else if(null!=k)throw a.g.N();return g.$(c,e,b,n,null)};g.jN=function(c,b,e,k){if(null===c)return 0;if(4==k)throw a.g.qe();if(0!==k)throw a.g.qe();if(197==c.D())c=g.FH(c);else if(1736!=c.D())return 0;k=a.Ya.Em(b);c=a.Ya.Wl(c,b,k);c=a.oH.kN([c])[0];if(null!==
e){if(2!==e.Nc)throw a.g.N("Unit must be a area unit type");c=a.Tb.ih(c,a.Tb.Qd(109404),e)}return c};g.nN=function(c,b,e,k){c=a.cI.local().$(c,b,k,null);if(null!==e){if(0!==e.Nc)throw a.g.N("Unit must be a linear unit type");c=a.Tb.ih(c,a.Tb.Qd(9001),e)}return c};g.BQ=function(c,b,e){if(null===c)return 0;var k=null;if(null!=b){k=b.Se();if(0==k.Nc&&(k=a.Tb.PC(k),null==k&&null!==e))throw a.g.N();if(null!=e&&k.Qc()!=e.Qc()&&k.Nc!=e.Nc)throw a.g.cj();}else if(null!=e)throw a.g.N();return 1736==c.D()||
197==c.D()?(c=c.Mh(),null!==e?a.Tb.ih(c,k,e):c):0};g.CQ=function(c,b,e){if(null===c||c.s()||1>c.fb())return 0;var k=null;if(null!=b){if(k=b.Se(),null!=e&&k.Qc()!=e.Qc()&&k.Nc!=e.Nc)throw a.g.cj();}else if(null!=e)throw a.g.N();1736==c.D()||197==c.D()?b=c.Rf():a.T.Lc(c.D())?(b=new a.Xa(c.description),b.Bc(c,!0)):b=c;c=0;b=b.Ca();for(var n=new a.b,g=new a.b;b.kb();)for(;b.La();){var d=b.ia();d.ht(n);d.uw(g);c+=a.b.Fb(n,g)}null!==k&&null!==e&&(c=a.Tb.ih(c,k,e));return c};g.YT=function(c,b){return a.Nf.mN(c,
b)};g.IL=function(c){return void 0!==c.points?g.kH(c,void 0===c.hasZ?!1:c.hasZ,void 0===c.hasM?!1:c.hasM):void 0!==c.rings?g.Nz(c.rings,void 0===c.hasZ?!1:c.hasZ,void 0===c.hasM?!1:c.hasM,"P"):void 0!==c.paths?g.Nz(c.paths,void 0===c.hasZ?!1:c.hasZ,void 0===c.hasM?!1:c.hasM,"L"):void 0!==c.x?g.uH(c):void 0!==c.xmin?g.hH(c):null};g.uH=function(c){if(null==c.x||"NaN"==c.x)return new a.Va;var b=new a.Va(c.x,c.y);void 0!==c.z&&null!==c.z&&b.rS(c.z);void 0!==c.m&&null!==c.m&&b.bS(c.m);return b};g.hH=function(c){if(null==
c.xmin||"NaN"==c.xmin)return new a.Vj;var b=new a.Vj(c.xmin,c.ymin,c.xmax,c.ymax);void 0!==c.zmin&&null!==c.zmin&&b.setInterval(1,0,c.zmin,c.zmax);void 0!==c.mmin&&null!==c.mmin&&b.setInterval(2,0,c.mmin,c.mmax);return b};g.kH=function(c,b,e){var k=0,n=new a.pe,g=3*c.points.length;0!=g%2&&g++;2>g&&(g=2);var d=a.I.truncate(3*c.points.length/2);4>d?d=4:16>d&&(d=16);for(var g=a.Ac.kl(g,0),f=a.Ac.kl(d),d=a.Ac.kl(d),h=0;h<c.points.length;h++)g.write(2*h,c.points[h][0]),g.write(2*h+1,c.points[h][1]),f.write(h,
b||e?c.points[h][2]:NaN),d.write(h,e&&b?c.points[h][3]:NaN),k++;0!=k&&(n.resize(k),n.bm(0,g));b&&(n.Ne(1),n.bm(1,f));e&&(n.Ne(2),n.bm(2,0==b?f:d));n.ce(16777215);return n};g.Nz=function(c,b,e,k){var n,g=0,d=2;"P"==k?(n=new a.Ka,g=1,d=3):n=new a.Xa;for(var f=a.Ac.Dg(0),h=a.Ac.to(0),l=0,m=0,p=[],q=[],r=0;r<c.length;r++){var z=c[r].length;p[r]=!1;if("P"===k&&c[r][0][0]===c[r][c[r].length-1][0]&&c[r][0][1]===c[r][c[r].length-1][1]){var v=0==e?!0:c[r][0][3]===c[r][c[r].length-1][3]||void 0===c[r][0][3]&&
void 0===c[r][c[r].length-1][3];(0==b||c[r][0][2]===c[r][c[r].length-1][2]||void 0===c[r][0][2]&&void 0===c[r][c[r].length-1][2])&&v&&(p[r]=!0,--z)}z>=d?(q[r]=!1,m+=1,f.add(l),h.add(g),l+=z):q[r]=!0}k=3*l;0!=k%2&&k++;2>k&&(k=2);r=a.I.truncate(3*l/2);4>r?r=4:16>r&&(r=16);k=a.Ac.kl(k,0);g=a.Ac.kl(r);d=a.Ac.kl(r);for(r=z=0;r<c.length;r++)if(!1===q[r])for(v=0;v<c[r].length;v++){var x=!1;v===c[r].length-1&&!0===p[r]&&(x=!0);x||(k.write(2*z,c[r][v][0]),k.write(2*z+1,c[r][v][1]),g.write(z,b||e?c[r][v][2]:
NaN),d.write(z,e&&b?c[r][v][3]:NaN),z++)}0!=l&&(c=n,f.resize(m),h.resize(m),0<l&&(f.add(l),h.add(0)),c.bm(0,k),c.NF(h),c.OF(f));b&&(n.Ne(1),n.bm(1,g));e&&(n.Ne(2),n.bm(2,0==b?g:d));n.ce(16777215);return n};return g}();a.Pb=g})(w||(w={}));(function(a){var g=function(){function a(){}a.Zk=function(c){var b=0,e=0,a=c.length,n=c[e],g;for(e;e<a-1;e++)g=c[e+1],b+=(g[0]-n[0])*(g[1]+n[1]),n=g;return 0<=b};a.rotate=function(c,b,e){b=b*Math.PI/180;var k=Math.cos(b),n=Math.sin(b);if(void 0!==c.paths){b={paths:[]};
for(var g=0;g<c.paths.length;g++){for(var d=c.paths[g],f=[],h=0;h<d.length;h++){var l=d[h].slice(0);f.push(l);var m=k*(d[h][0]-e.x)-n*(d[h][1]-e.y)+e.x,p=n*(d[h][0]-e.x)+k*(d[h][1]-e.y)+e.y;l[0]=m;l[1]=p}b.paths.push(f)}return b}if(void 0!==c.rings){b={rings:[]};for(g=0;g<c.rings.length;g++){for(var d=c.rings[g],f=[],q=a.Zk(d),h=0;h<d.length;h++)l=d[h].slice(0),f.push(l),m=k*(d[h][0]-e.x)-n*(d[h][1]-e.y)+e.x,p=n*(d[h][0]-e.x)+k*(d[h][1]-e.y)+e.y,l[0]=m,l[1]=p;a.Zk(f)!==q&&f.reverse();b.rings.push(f)}return b}if(void 0!==
c.x)return b={x:k*(c.x-e.x)-n*(c.y-e.y)+e.x,y:n*(c.x-e.x)+k*(c.y-e.y)+e.y},void 0!==c.z&&(b.z=c.z),void 0!==c.m&&(b.m=c.m),b;if(void 0!==c.points){b={points:[]};c=c.points;for(h=0;h<c.length;h++)g=c[h].slice(0),g[0]=k*(c[h][0]-e.x)-n*(c[h][1]-e.y)+e.x,g[1]=n*(c[h][0]-e.x)+k*(c[h][1]-e.y)+e.y,b.points.push(g);return b}return null};a.eC=function(c,b){var e,k;if(void 0!==c.paths){e={paths:[]};for(var g=0;g<c.paths.length;g++){for(var d=c.paths[g],f=[],h=0;h<d.length;h++){var l=d[h].slice(0);f.push(l);
k=b.x-d[h][0];l[0]=d[h][0]+2*k}e.paths.push(f)}return e}if(void 0!==c.rings){e={rings:[]};for(g=0;g<c.rings.length;g++){for(var d=c.rings[g],m=a.Zk(d),f=[],h=0;h<d.length;h++)l=d[h].slice(0),f.push(l),k=b.x-d[h][0],l[0]=d[h][0]+2*k;a.Zk(f)!==m&&f.reverse();e.rings.push(f)}return e}if(void 0!==c.x)return k=b.x-c.x,e={x:c.x+2*k,y:c.y},void 0!==c.z&&(e.z=c.z),void 0!==c.m&&(e.m=c.m),e;if(void 0!==c.points){e={points:[]};g=c.points;for(h=0;h<g.length;h++)d=g[h].slice(0),k=b.x-d[0],d[0]+=2*k,e.points.push(d);
return e}return void 0!==c.xmin?(e={v:c.xmin,C:c.ymin,B:c.xmax,G:c.ymax},void 0!==c.zmin&&(e.zmin=c.zmin,e.zmax=c.zmax),void 0!==c.mmin&&(e.mmin=c.mmin,e.mmax=c.mmax),k=b.x-c.xmin,e.xmax=c.xmin+2*k,k=b.x-c.xmax,e.xmin=c.xmax+2*k,e):null};a.fC=function(c,b){var e,k;if(void 0!==c.paths){e={paths:[]};for(var g=0;g<c.paths.length;g++){for(var d=c.paths[g],f=[],h=0;h<d.length;h++){var l=d[h].slice(0);f.push(l);k=b.y-d[h][1];l[1]=d[h][1]+2*k}e.paths.push(f)}return e}if(void 0!==c.rings){e={rings:[]};for(g=
0;g<c.rings.length;g++){for(var d=c.rings[g],m=a.Zk(d),f=[],h=0;h<d.length;h++)l=d[h].slice(0),f.push(l),k=b.y-d[h][1],l[1]=d[h][1]+2*k;a.Zk(f)!==m&&f.reverse();e.rings.push(f)}return e}if(void 0!==c.x)return k=b.y-c.y,e={y:c.y+2*k,x:c.x},void 0!==c.z&&(e.z=c.z),void 0!==c.m&&(e.m=c.m),e;if(void 0!==c.points){e={points:[]};g=c.points;for(h=0;h<g.length;h++)d=g[h].slice(0),k=b.y-d[1],d[1]+=2*k,e.points.push(d);return e}return void 0!==c.xmin?(e={v:c.xmin,C:c.ymin,B:c.xmax,G:c.ymax},void 0!==c.zmin&&
(e.zmin=c.zmin,e.zmax=c.zmax),void 0!==c.mmin&&(e.mmin=c.mmin,e.mmax=c.mmax),k=b.y-c.ymin,e.ymax=c.ymin+2*k,k=b.y-c.ymax,e.ymin=c.ymax+2*k,e):null};return a}();a.Wn=g})(w||(w={}));(function(a){var g=function(){function g(){}g.jg=function(c,b){null==b&&(b=a.Od.Tf());switch(c){case 33:return new a.Va(b);case 322:return new a.yb(b);case 197:return new a.Vj(b);case 550:return new a.pe(b);case 1607:return new a.Xa(b);case 1736:return new a.Ka(b);default:throw a.g.ra("invalid argument.");}};return g}();
a.sH=g})(w||(w={}));(function(a){var g=function(){function g(c,b){this.De=a.ga.Yc(c,-1);this.oa=new a.Ur;this.tk=b}g.prototype.wR=function(c){this.oa.Dr(Math.min(this.De.size,c));this.oa.$l(c)};g.prototype.addElement=function(c,b){if(void 0===b)return this.JJ(c);b=a.I.truncate(b%this.De.size);var e=this.De.get(b);-1==e&&(e=this.oa.jh(),this.De.set(b,e));return this.oa.addElement(e,c)};g.prototype.JJ=function(c){var b=this.tk.vw(c),b=a.I.truncate(b%this.De.size),e=this.De.get(b);-1==e&&(e=this.oa.jh(),
this.De.set(b,e));return this.oa.addElement(e,c)};g.prototype.Jc=function(c,b){if(void 0===b)this.dM(c);else{b=a.I.truncate(b%this.De.size);var e=this.De.get(b);if(-1==e)throw a.g.N();for(var k=this.oa.gc(e),g=-1;-1!=k;){var d=this.oa.bb(k);this.oa.da(k)==c?(this.oa.Jc(e,g,k),-1==this.oa.gc(e)&&(this.oa.Fg(e),this.De.set(b,-1))):g=k;k=d}}};g.prototype.dM=function(c){var b=this.tk.vw(c),b=a.I.truncate(b%this.De.size),e=this.De.get(b);if(-1==e)throw a.g.N();for(var k=this.oa.gc(e),g=-1;-1!=k;){var d=
this.oa.bb(k);this.oa.da(k)==c?(this.oa.Jc(e,g,k),-1==this.oa.gc(e)&&(this.oa.Fg(e),this.De.set(b,-1))):g=k;k=d}};g.prototype.DN=function(c){c=a.I.truncate(c%this.De.size);c=this.De.get(c);return-1==c?-1:this.oa.gc(c)};g.prototype.SN=function(c){return this.oa.bb(c)};g.prototype.kd=function(c){var b=this.tk.vw(this.da(c)),b=a.I.truncate(b%this.De.size),e=this.De.get(b);if(-1==e)throw a.g.N();for(var k=this.oa.gc(e),g=-1;-1!=k;){if(k==c){this.oa.Jc(e,g,k);-1==this.oa.gc(e)&&(this.oa.Fg(e),this.De.set(b,
-1));return}g=k;k=this.oa.bb(k)}throw a.g.N();};g.prototype.da=function(c){return this.oa.da(c)};g.prototype.clear=function(){this.De=a.ga.Yc(this.De.size,-1);this.oa.clear()};g.prototype.size=function(){return this.oa.HC()};return g}();a.AH=g})(w||(w={}));(function(a){var g=function(){function g(){this.ci=new a.Fc(3);this.oa=new a.Fc(6);this.AP=!1;this.Wd=-1}g.prototype.bk=function(c){this.ci.Jc(c)};g.prototype.ou=function(){return this.ci.be()};g.prototype.Rs=function(c){this.oa.Jc(c)};g.prototype.Yx=
function(){return this.oa.be()};g.prototype.Jy=function(c,b){this.ci.L(c,1,b)};g.prototype.Gu=function(c,b){this.ci.L(c,2,b)};g.prototype.aS=function(c,b){this.ci.L(c,3,b)};g.prototype.Hy=function(c,b){this.oa.L(c,4,b)};g.prototype.dS=function(c,b){this.oa.L(c,3,b)};g.prototype.RF=function(c,b){this.oa.L(c,2,b)};g.prototype.jh=function(c){var b=this.Yx();this.oa.L(b,3,this.Wd);this.oa.L(b,4,0);this.oa.L(b,5,c);-1!=this.Wd&&this.RF(this.Wd,b);return this.Wd=b};g.prototype.Fg=function(c){this.CB(c);
var b=this.oa.O(c,2),e=this.oa.O(c,3);-1!=b?this.dS(b,e):this.Wd=e;-1!=e&&this.RF(e,b);this.Rs(c);return e};g.prototype.Dr=function(c){this.oa.de(c)};g.prototype.DC=function(c){return this.oa.O(c,5)};g.prototype.$R=function(c,b){this.oa.L(c,5,b)};g.prototype.addElement=function(c,b){return this.AO(c,b)};g.prototype.AO=function(c,b){var e=this.ou();this.Gu(e,-1);-1==this.oa.O(c,0)&&this.oa.L(c,0,e);var a=this.oa.O(c,1);this.Jy(e,a);-1!=a&&this.Gu(a,e);this.oa.L(c,1,e);this.setData(e,b);this.Hy(c,this.vq(c)+
1);this.AP&&this.aS(e,c);return e};g.prototype.Jc=function(c,b){var e=this.ge(b),a=this.bb(b);-1!=e?this.Gu(e,a):this.oa.L(c,0,a);-1!=a?this.Jy(a,e):this.oa.L(c,1,e);this.bk(b);this.Hy(c,this.vq(c)-1);return a};g.prototype.$l=function(c){this.ci.de(c)};g.prototype.getData=function(c){return this.ci.O(c,0)};g.prototype.setData=function(c,b){this.ci.L(c,0,b)};g.prototype.bb=function(c){return this.ci.O(c,2)};g.prototype.ge=function(c){return this.ci.O(c,1)};g.prototype.gc=function(c){return this.oa.O(c,
0)};g.prototype.tc=function(c){return this.oa.O(c,1)};g.prototype.clear=function(){for(var c=this.Wd;-1!=c;)c=this.Fg(c)};g.prototype.CB=function(c){for(var b=this.tc(c);-1!=b;){var e=b,b=this.ge(e);this.bk(e)}this.oa.L(c,0,-1);this.oa.L(c,1,-1);this.Hy(c,0)};g.prototype.s=function(){return 0==this.ci.size};g.prototype.HC=function(){return this.ci.size};g.prototype.vq=function(c){return this.oa.O(c,4)};g.prototype.Cw=function(c){return this.oa.O(c,3)};return g}();a.$n=g})(w||(w={}));(function(a){var g=
function(){function g(c){void 0===c?(this.bg=new a.Fc(2),this.oa=new a.Fc(4),this.Wd=-1,this.Bt=!0):(this.bg=new a.Fc(2),this.oa=new a.Fc(c?4:2),this.Wd=-1,this.Bt=c)}g.prototype.bk=function(c){this.bg.Jc(c)};g.prototype.ou=function(){return this.bg.be()};g.prototype.Rs=function(c){this.oa.Jc(c)};g.prototype.Yx=function(){return this.oa.be()};g.prototype.jh=function(){var c=this.Yx();this.Bt&&(this.oa.L(c,3,this.Wd),-1!=this.Wd&&this.oa.L(this.Wd,2,c),this.Wd=c);return c};g.prototype.Fg=function(c){for(var b=
this.gc(c);-1!=b;){var e=b,b=this.bb(b);this.bk(e)}this.Bt&&(b=this.oa.O(c,2),e=this.oa.O(c,3),-1!=b?this.oa.L(b,3,e):this.Wd=e,-1!=e&&this.oa.L(e,2,b));this.Rs(c)};g.prototype.Dr=function(c){this.oa.de(c)};g.prototype.addElement=function(c,b){var e=this.oa.O(c,1),a=this.ou();-1!=e?this.bg.L(e,1,a):this.oa.L(c,0,a);this.oa.L(c,1,a);this.bg.L(a,0,b);return a};g.prototype.$l=function(c){this.bg.de(c)};g.prototype.Jc=function(c,b,e){-1!=b?(this.bg.L(b,1,this.bg.O(e,1)),this.oa.O(c,1)==e&&this.oa.L(c,
1,b)):(this.oa.L(c,0,this.bg.O(e,1)),this.oa.O(c,1)==e&&this.oa.L(c,1,-1));this.bk(e)};g.prototype.Qv=function(c,b){var e=this.oa.O(c,1),a=this.oa.O(b,0);-1!=a&&(-1!=e?this.bg.L(e,1,a):this.oa.L(c,0,a),this.oa.L(c,1,this.oa.O(b,1)));this.Bt&&(e=this.oa.O(b,2),a=this.oa.O(b,3),-1!=e?this.oa.L(e,3,a):this.Wd=a,-1!=a&&this.oa.L(a,2,e));this.Rs(b)};g.prototype.da=function(c){return this.bg.O(c,0)};g.prototype.Vi=function(c,b){this.bg.L(c,0,b)};g.prototype.bb=function(c){return this.bg.O(c,1)};g.prototype.gc=
function(c){return this.oa.O(c,0)};g.prototype.Dm=function(c){return this.da(this.gc(c))};g.prototype.clear=function(){this.bg.Nh(!0);this.oa.Nh(!0);this.Wd=-1};g.prototype.s=function(c){return void 0===c?0==this.bg.size:-1==this.oa.O(c,0)};g.prototype.HC=function(){return this.bg.size};g.prototype.Cw=function(c){return this.oa.O(c,3)};return g}();a.Ur=g})(w||(w={}));(function(a){var g=function(){function g(){}g.kz=function(c,b,e,k,n,d,f){var u=new a.b;u.J(c);c=new a.b;c.J(b);n.vv(u);n.vv(c);b=n.ms(u);
var h=n.ms(c);0==h&&(h=n.CC());if(u.x!=c.x&&(u.y!=c.y||u.y!=n.C&&u.y!=n.G)||h>b!=d){b=n.vA(u);var h=n.vA(c),B,l=d?1:3;do b=b+l&3,B=n.vu(b),0!=f&&(k=g.kz(u,B,e,k,n,d,f)),e[k++].ma(B.x,B.y),u=B;while((b&3)!=h);0!=f&&(k=g.kz(u,c,e,k,n,d,f))}else if(n=new a.b,n.ma(c.x-u.x,c.y-u.y),0!=f&&(f=a.I.truncate(n.yJ()/f),0<f))for(n.scale(1/(f+1)),d=0;d<f;d++)u.add(n),e[k++].ma(u.x,u.y);return k};g.zd=function(c,b,e){b=b.lv();c=null!=c&&void 0!==c.Ko?c.Ko():0;e&&(b*=4,c*=1.1);return Math.max(c,b)};g.As=function(c){return 2*
Math.sqrt(2)*c};g.UJ=function(c){return Math.sqrt(2)*c};g.Cg=function(c,b,e){var k=new a.i;b.o(k);return g.zd(c,k,e)};g.rB=function(c,b,e){b=b.Ah(1,0).lv();c=null!=c?c.Ko():0;e&&(b*=4,c*=1.1);return Math.max(c,b)};g.$T=function(c,b){var e=new a.i;c.dd(e);e.Db(b);return e};g.$s=function(c,b){var e=new a.i;c.dd(e);c=new a.i;b.dd(c);e.Db(c);return e};g.fU=function(c,b){var e=c.HN(b),k=c.Ea(b),g=c.Dc(b),d=c.Fa(e);e==k?(g=c.Fa(g-1),e=c.Fa(k+1)):e==g-1?(g=c.Fa(e-1),e=c.Fa(k)):(g=c.Fa(e-1),e=c.Fa(e+1));
d=a.b.yn(g,d,e);return 0==d?0<c.oo(b):-1==d};g.CK=function(c){var b=new a.i;c.dd(b);if(b.s())return null;var e=new a.co(b,8),k=-1,g=new a.i,d=!1;do for(var f=0,h=c.ea();f<h;f++)if(c.Ti(f,g),k=e.kt(f,g,k),-1==k){if(d)throw a.g.ra("internal error");c.tm(b,!1);d=!0;e.reset(b,8);break}else d=!1;while(d);return e};g.nB=function(c){var b=new a.i;c.dd(b);for(var e=new a.co(b,8),k=-1,g=c.Ca(),d=new a.i,f=!1;g.kb();)for(;g.La();){var h=g.ia(),l=g.Jb();h.o(d);k=e.kt(l,d,k);if(-1==k){if(f)throw a.g.wa();c.tm(b,
!1);f=!0;e.reset(b,8);g.Lk();break}}return e};g.ij=function(c,b){var e=new a.i;c.dd(e);for(var k=new a.co(e,8),g=-1,d=new a.i,f=c.Ca(),h=!1;f.kb();)for(;f.La();){var l=f.ia(),m=f.Jb();l.o(d);if(d.jc(b)&&(g=k.kt(m,d,g),-1==g)){if(h)throw a.g.ra("internal error.");c.tm(e,!1);h=!0;k.reset(e,8);f.Lk();break}}return k};g.DT=function(c){var b=new a.i;c.dd(b);for(var e=new a.co(b,8),k=new a.b,g=new a.i,d=!1,f=0;f<c.F();f++)if(c.w(f,k),g.K(k),-1==e.lg(f,g)){if(d)throw a.g.wa();c.tm(b,!1);d=!0;e.reset(b,8);
f=-1}return e};g.oB=function(c,b){for(var e=new a.co(b,8),k=new a.b,g=!1,d=new a.i,f=0;f<c.F();f++)if(c.w(f,k),b.contains(k)&&(d.K(k),-1==e.lg(f,d))){if(g)throw a.g.wa();g=!0;f=new a.i;c.tm(f,!1);e.reset(f,8);f=-1}return e};g.AN=function(c,b,e){var k=new a.i,g=new a.i;c.dd(k);b.dd(g);k.P(e,e);g.P(e,e);var d=new a.i;d.K(k);d.Ga(g);c=c.Ca();b=b.Ca();var f=new a.sz;f.YF(e);var h=!1;for(f.jG();c.kb();)for(;c.La();)c.ia().o(k),k.jc(d)&&(h=!0,e=new a.i,e.K(k),f.OA(c.Jb(),e));f.$B();if(!h)return null;k=
!1;for(f.iG();b.kb();)for(;b.La();)b.ia().o(g),g.jc(d)&&(k=!0,e=new a.i,e.K(g),f.LA(b.Jb(),e));f.ZB();return k?f:null};g.BN=function(c,b,e,k,g){var n=c.D(),d=b.D(),f=new a.i,h=new a.i;c.dd(f);b.dd(h);f.P(e,e);h.P(e,e);var l=new a.i;l.K(f);l.Ga(h);var m=new a.sz;m.YF(e);var p=!1;m.jG();var q=0;for(e=c.ea();q<e;q++)if(!k||1736!=n||c.qt(q))c.Ti(q,f),f.jc(l)&&(p=!0,m.OA(q,f));m.$B();if(!p)return null;c=!1;m.iG();k=0;for(e=b.ea();k<e;k++)if(!g||1736!=d||b.qt(k))b.Ti(k,h),h.jc(l)&&(c=!0,m.LA(k,h));m.ZB();
return c?m:null};g.hU=function(c,b){return 0<c.rj(b)};g.zT=function(c,b){var e=new a.i;c.hR(b,e);var e=new a.co(e,8),k=-1,g=new a.i;c=c.Ca();c.vy(b);if(c.kb())for(;c.La();){b=c.ia();var d=c.Jb();b.dd(g);k=e.kt(d,g,k);if(-1==k)throw a.g.ra("internal error");}return e};return g}();a.Ia=g})(w||(w={}));(function(a){var g=function(){function b(b){this.Na=b}b.prototype.compare=function(b,c,a){b=b.da(a);a=this.Na.uj(c);var k=this.Na.uj(b);return a<k?-1:a==k?e.Po(c)&&e.st(b)?-1:e.Po(b)&&e.st(c)?1:0:1};return b}(),
d=function(){function b(b){this.Na=b}b.prototype.Zp=function(b,c,e){this.Na.yS(e,b,c)};b.prototype.Mo=function(b){return this.Na.uj(b)};return b}(),c;(function(b){b[b.initialize=0]="initialize";b[b.pIn=1]="pIn";b[b.pL=2]="pL";b[b.pR=3]="pR";b[b.pT=4]="pT";b[b.right=5]="right";b[b.left=6]="left";b[b.all=7]="all"})(c||(c={}));var b=function(){function b(){this.Na=null;this.gi=new a.Nd;this.ug=new a.ga(0);this.$f=[0,0]}b.prototype.Ch=function(b,c){this.gi.qa=b.qa-c;this.gi.va=b.va+c;this.ug.resize(0);
this.Ud=0;this.$f[0]=0};b.prototype.uy=function(b,c,e){if(b>c)throw a.g.N();this.gi.qa=b-e;this.gi.va=c+e;this.ug.resize(0);this.Ud=0;this.$f[0]=0};b.prototype.Fn=function(b,c){this.gi.qa=b-c;this.gi.va=b+c;this.ug.resize(0);this.Ud=0;this.$f[0]=0};b.prototype.next=function(){if(!this.Na.Vo)throw a.g.xa();if(0>this.Ud)return-1;for(var b=!0;b;)switch(this.$f[this.Ud]){case 1:b=this.uQ();break;case 2:b=this.vQ();break;case 3:b=this.wQ();break;case 4:b=this.xQ();break;case 5:b=this.BR();break;case 6:b=
this.sP();break;case 7:b=this.XJ();break;case 0:b=this.Qw();break;default:throw a.g.wa();}return-1!=this.pg?this.Bo()>>1:-1};b.JT=function(c,e,a){var k=new b;k.Na=c;k.ug.xb(20);k.Ch(e,a);return k};b.KT=function(c,e,a){var k=new b;k.Na=c;k.ug.xb(20);k.Fn(e,a);return k};b.Oa=function(c){var e=new b;e.Na=c;e.ug.xb(20);e.Ud=-1;return e};b.prototype.Qw=function(){this.pg=this.YD=this.di=this.yc=-1;if(null!=this.Na.Yd&&0<this.Na.Yd.size)return this.$f[0]=1,this.di=this.Na.Ze,!0;this.Ud=-1;return!1};b.prototype.uQ=
function(){this.yc=this.di;if(-1==this.yc)return this.pg=this.Ud=-1,!1;var b=this.Na.Co(this.yc);if(this.gi.va<b)return b=this.Na.tj(this.yc),this.di=this.Na.Di(this.yc),-1!=b&&(this.vh=this.Na.gk(b),this.$f[++this.Ud]=6),!0;if(b<this.gi.qa)return b=this.Na.tj(this.yc),this.di=this.Na.sj(this.yc),-1!=b&&(this.vh=this.Na.uq(b),this.$f[++this.Ud]=5),!0;this.$f[this.Ud]=2;this.YD=this.yc;b=this.Na.tj(this.yc);this.di=this.Na.Di(this.yc);-1!=b&&(this.vh=this.Na.gk(b),this.$f[++this.Ud]=7);return!0};b.prototype.vQ=
function(){this.yc=this.di;if(-1==this.yc)return this.$f[this.Ud]=3,this.di=this.Na.sj(this.YD),!0;if(this.Na.Co(this.yc)<this.gi.qa){var b=this.Na.tj(this.yc);this.di=this.Na.sj(this.yc);-1!=b&&(this.vh=this.Na.uq(b),this.$f[++this.Ud]=5);return!0}b=this.Na.tj(this.yc);this.di=this.Na.Di(this.yc);-1!=b&&(this.vh=this.Na.gk(b),this.$f[++this.Ud]=7);b=this.Na.sj(this.yc);-1!=b&&this.ug.add(b);return!0};b.prototype.wQ=function(){this.yc=this.di;if(-1==this.yc)return this.$f[this.Ud]=4,!0;if(this.gi.va<
this.Na.Co(this.yc)){var b=this.Na.tj(this.yc);this.di=this.Na.Di(this.yc);-1!=b&&(this.vh=this.Na.gk(b),this.$f[++this.Ud]=6);return!0}b=this.Na.tj(this.yc);this.di=this.Na.sj(this.yc);-1!=b&&(this.vh=this.Na.gk(b),this.$f[++this.Ud]=7);b=this.Na.Di(this.yc);-1!=b&&this.ug.add(b);return!0};b.prototype.xQ=function(){if(0==this.ug.size)return this.pg=this.Ud=-1,!1;this.yc=this.ug.get(this.ug.size-1);this.ug.resize(this.ug.size-1);var b=this.Na.tj(this.yc);-1!=b&&(this.vh=this.Na.gk(b),this.$f[++this.Ud]=
7);-1!=this.Na.Di(this.yc)&&this.ug.add(this.Na.Di(this.yc));-1!=this.Na.sj(this.yc)&&this.ug.add(this.Na.sj(this.yc));return!0};b.prototype.sP=function(){this.pg=this.vh;if(-1!=this.pg&&e.Po(this.Bo())&&this.Na.uj(this.Bo())<=this.gi.va)return this.vh=this.GC(),!1;this.Ud--;return!0};b.prototype.BR=function(){this.pg=this.vh;if(-1!=this.pg&&e.st(this.Bo())&&this.Na.uj(this.Bo())>=this.gi.qa)return this.vh=this.bO(),!1;this.Ud--;return!0};b.prototype.XJ=function(){this.pg=this.vh;if(-1!=this.pg&&
e.Po(this.Bo()))return this.vh=this.GC(),!1;this.Ud--;return!0};b.prototype.GC=function(){return this.Na.Df?this.Na.If.bb(this.pg):this.Na.ki.bb(this.pg)};b.prototype.bO=function(){return this.Na.Df?this.Na.If.ge(this.pg):this.Na.ki.ge(this.pg)};b.prototype.Bo=function(){return this.Na.Df?this.Na.If.da(this.pg):this.Na.ki.getData(this.pg)};return b}();a.IT=b;var e=function(){function c(b){this.Al=this.rh=this.If=this.ki=this.Hl=this.Ki=this.Yd=this.Li=null;this.Df=b;this.Vo=this.Dt=!1}c.prototype.Vp=
function(){this.Rj(!0)};c.prototype.gq=function(b,c){if(!this.Dt)throw a.g.xa();this.Li.push(new a.Nd(b,c))};c.prototype.wo=function(){if(!this.Dt)throw a.g.ra("invalid call");this.Dt=!1;this.Vo=!0;this.Df||(this.BO(),this.Jt=this.Li.length)};c.prototype.lg=function(b){if(!this.Df||!this.Vo)throw a.g.N("invalid call");if(-1==this.Ze){var c=this.Li.length;if(this.nx){var e=new a.ga(0);e.xb(2*c);this.$E(e);this.rh.xb(2*c);this.rh.resize(0);this.ZE(e);this.Hl.resize(c,-1);this.Hl.dh(-1,0,c);this.nx=
!1}else this.Hl.dh(-1,0,c);this.Ze=this.Ms()}c=this.cD(b<<1,this.Ze);e=this.If.addElement((b<<1)+1,this.Hw(c));this.TF(c,e);this.Hl.set(b,c);this.Jt++};c.prototype.remove=function(b){if(!this.Df||!this.Vo)throw a.g.ra("invalid call");var c=this.Hl.get(b);if(-1==c)throw a.g.N("the interval does not exist in the interval tree");this.Hl.set(b,-1);this.Jt--;var e=this.Hw(c),k;k=this.If.hO(e);this.If.kd(this.LN(c),e);this.If.kd(this.eO(c),e);b=this.If.size(e);0==b&&(this.If.fM(e),this.WF(k,-1));this.Ki.Jc(c);
for(var e=this.JC(k),g=this.Di(k),n=this.sj(k),c=0;!(0<b||k==this.Ze||-1!=g&&-1!=n);)k==this.Di(e)?-1!=g?(this.Sj(e,g),this.Xi(g,e),this.Sj(k,-1)):-1!=n?(this.Sj(e,n),this.Xi(n,e),this.Uj(k,-1)):this.Sj(e,-1):-1!=g?(this.Uj(e,g),this.Xi(g,e),this.Sj(k,-1)):-1!=n?(this.Uj(e,n),this.Xi(n,e),this.Uj(k,-1)):this.Uj(e,-1),this.Xi(k,-1),c++,k=e,e=this.tj(k),b=-1!=e?this.If.size(e):0,g=this.Di(k),n=this.sj(k),e=this.JC(k)};c.prototype.reset=function(){if(!this.Df||!this.Vo)throw a.g.N("invalid call");this.Rj(!1)};
c.prototype.size=function(){return this.Jt};c.prototype.Re=function(){return b.Oa(this)};c.prototype.$E=function(b){for(var c=this.Li.length,e=0;e<2*c;e++)b.add(e);this.zS(b,2*c)};c.prototype.ZE=function(b){for(var c=NaN,e=0;e<b.size;e++){var a=b.get(e),k=this.uj(a);k!=c&&(this.rh.add(a),c=k)}};c.prototype.BO=function(){var b=this.Li.length,c=new a.ga(0);c.xb(2*b);this.$E(c);this.rh.xb(2*b);this.rh.resize(0);this.ZE(c);this.Ki.de(b);this.ki.$l(2*b);var e=a.Ac.Dg(b);e.dh(-1,0,b);this.Ze=this.Ms();
for(b=0;b<c.size;b++){var k=c.get(b),g=e.get(k>>1);-1!=g?this.TF(g,this.ki.addElement(this.Hw(g),k)):(g=this.cD(k,this.Ze),e.set(k>>1,g))}};c.prototype.cD=function(b,c){var e=c,k=c,g,n=-1,d=0,f=this.rh.size-1,u=0,h=b>>1,l=NaN,m=NaN;g=!0;for(var p=this.RN(h),h=this.ON(h);g;){d<f?(u=d+a.I.truncate((f-d)/2),-1==this.rw(e)&&this.CF(e,this.rh.get(u),this.rh.get(u+1))):-1==this.rw(e)&&this.CF(e,this.rh.get(d),this.rh.get(d));var q=this.Co(e);if(h<q)-1!=c&&(c==e?(k=e,l=q,c=this.Di(e),-1!=c?m=this.Co(c):
m=NaN):m>q&&(q<l?this.Sj(k,e):this.Uj(k,e),this.Uj(e,c),this.Df&&(this.Xi(e,k),this.Xi(c,e)),k=e,l=q,c=-1,m=NaN)),f=this.MN(e),-1==f&&(f=this.Ms(),this.YR(e,f)),e=f,f=u;else if(p>q)-1!=c&&(c==e?(k=e,l=q,c=this.sj(e),-1!=c?m=this.Co(c):m=NaN):m<q&&(q<l?this.Sj(k,e):this.Uj(k,e),this.Sj(e,c),this.Df&&(this.Xi(e,k),this.Xi(c,e)),k=e,l=q,c=-1,m=NaN)),d=this.fO(e),-1==d&&(d=this.Ms(),this.iS(e,d)),e=d,d=u+1;else{g=this.tj(e);-1==g&&(g=this.TL(e),this.WF(e,g));var r=this.KJ(g,b),n=this.SL();this.lS(n,g);
this.XR(n,r);e!=c&&(q<l?this.Sj(k,e):this.Uj(k,e),this.Df&&this.Xi(e,k),-1!=c&&(m<q?this.Sj(e,c):this.Uj(e,c),this.Df&&this.Xi(c,e)));g=!1}}return n};c.prototype.Ms=function(){return this.Yd.be()};c.prototype.TL=function(b){return this.Df?this.If.nq(b):this.ki.jh(b)};c.prototype.SL=function(){return this.Ki.be()};c.prototype.Rj=function(b){b?(this.Dt=this.nx=!0,this.Vo=!1,null==this.rh?this.rh=a.Ac.Dg(0):this.rh.resize(0),null==this.Li?this.Li=[]:this.Li.length=0):this.nx=!1;this.Df?null==this.Hl?
(this.Hl=a.Ac.Dg(0),this.If=new a.bj,this.If.Hn(new g(this))):this.If.clear():null==this.ki?this.ki=new a.$n:this.ki.clear();null==this.Yd?(this.Ki=new a.Fc(3),this.Yd=new a.Fc(this.Df?8:7)):(this.Ki.Nh(!1),this.Yd.Nh(!1));this.Ze=-1;this.Jt=0};c.prototype.CF=function(b,c,e){this.SR(b,c);this.TR(b,e)};c.prototype.Co=function(b){var c=this.rw(b);if(-1==c)return NaN;c=this.uj(c);b=this.uj(this.wN(b));return c==b?c:.5*(c+b)};c.prototype.SR=function(b,c){this.Yd.L(b,0,c)};c.prototype.TR=function(b,c){this.Yd.L(b,
1,c)};c.prototype.YR=function(b,c){this.Yd.L(b,3,c)};c.prototype.iS=function(b,c){this.Yd.L(b,4,c)};c.prototype.WF=function(b,c){this.Yd.L(b,2,c)};c.prototype.Sj=function(b,c){this.Yd.L(b,5,c)};c.prototype.Uj=function(b,c){this.Yd.L(b,6,c)};c.prototype.Xi=function(b,c){this.Yd.L(b,7,c)};c.prototype.lS=function(b,c){this.Ki.L(b,0,c)};c.prototype.KJ=function(b,c){return this.Df?this.If.addElement(c,b):this.ki.addElement(b,c)};c.prototype.XR=function(b,c){this.Ki.L(b,1,c)};c.prototype.TF=function(b,
c){this.Ki.L(b,2,c)};c.prototype.gk=function(b){return this.Df?this.If.gc(b):this.ki.gc(b)};c.prototype.uq=function(b){return this.Df?this.If.tc(b):this.ki.tc(b)};c.Po=function(b){return 0==(b&1)};c.st=function(b){return 1==(b&1)};c.prototype.rw=function(b){return this.Yd.O(b,0)};c.prototype.wN=function(b){return this.Yd.O(b,1)};c.prototype.tj=function(b){return this.Yd.O(b,2)};c.prototype.MN=function(b){return this.Yd.O(b,3)};c.prototype.fO=function(b){return this.Yd.O(b,4)};c.prototype.Di=function(b){return this.Yd.O(b,
5)};c.prototype.sj=function(b){return this.Yd.O(b,6)};c.prototype.JC=function(b){return this.Yd.O(b,7)};c.prototype.Hw=function(b){return this.Ki.O(b,0)};c.prototype.LN=function(b){return this.Ki.O(b,1)};c.prototype.eO=function(b){return this.Ki.O(b,2)};c.prototype.RN=function(b){return this.Li[b].qa};c.prototype.ON=function(b){return this.Li[b].va};c.prototype.zS=function(b,c){null==this.Al&&(this.Al=new a.Rr);var e=new d(this);this.Al.sort(b,0,c,e)};c.prototype.yS=function(b,e,a){var k=this;b.xd(e,
a,function(b,e){var a=k.uj(b),g=k.uj(e);return a<g||a==g&&c.Po(b)&&c.st(e)?-1:1})};c.prototype.uj=function(b){var e=this.Li[b>>1];return c.Po(b)?e.qa:e.va};return c}();a.bq=e})(w||(w={}));(function(a){var g=function(g){function c(b,c,k,n){g.call(this);void 0===b?this.description=a.Od.Tf():void 0===k?this.description=b:(this.description=a.Od.Tf(),this.Ny(b,c),this.Ok(k,n))}K(c,g);c.prototype.D=function(){return 322};c.prototype.$b=function(){var b=this.na-this.la,c=this.ja-this.ha;return Math.sqrt(b*
b+c*c)};c.prototype.mg=function(b){var c=this.na-this.la,a=this.ja-this.ha;return Math.sqrt(c*c+a*a)<=b};c.prototype.mD=function(){return!1};c.prototype.Pf=function(){var b=new a.b;b.pc(this.oc(),this.Mb());return b};c.prototype.Fp=function(b){b.Ja();b.Qf(this.description);var c=new a.i;this.o(c);b.Cu(c);for(var c=1,k=this.description.Aa;c<k;c++)for(var g=this.description.Hd(c),d=a.pa.Wa(g);c<d;c++){var f=this.Ah(g,0);b.setInterval(g,0,f)}};c.prototype.o=function(b){b.K(this.na,this.ja,this.la,this.ha);
b.normalize()};c.prototype.Cn=function(b){b.Ja();b.Db(this.na,this.ja,this.yd(0,1,0));b.Db(this.la,this.ha,this.yd(1,1,0))};c.prototype.Oe=function(b){if(b instanceof a.Bg){this.qc();var c=new a.b;c.x=this.na;c.y=this.ja;b.Zi(c,c);this.na=c.x;this.ja=c.y;c.x=this.la;c.y=this.ha;b.Zi(c,c);this.la=c.x;this.ha=c.y}else this.qc(),c=new a.ee,c.x=this.na,c.y=this.ja,c.z=this.yd(0,1,0),c=b.Qn(c),this.na=c.x,this.ja=c.y,this.om(0,1,0,c.z),c.x=this.la,c.y=this.ha,c.z=this.yd(1,1,0),c=b.Qn(c),this.la=c.x,this.ha=
c.y,this.om(1,1,0,c.z)};c.prototype.Pa=function(){return new c(this.description)};c.prototype.kv=function(b,c){return(this.la-b-(this.na-b))*(this.ha-c+(this.ja-c))*.5};c.prototype.Ru=function(b){return b*this.$b()};c.prototype.AD=function(b){return b/this.$b()};c.prototype.sC=function(b){return a.vi.ut(this.na,this.la,b)};c.prototype.vN=function(b){return a.vi.ut(this.ja,this.ha,b)};c.prototype.xm=function(b,c){var e=new a.Ag;this.Bi(b,c,e);return e.get()};c.prototype.Bi=function(b,c,k){if(null==
k)throw a.g.N();k.mq();k=k.get();k.Qf(this.description);var e=new a.b;this.Kb(b,e);k.Ny(e.x,e.y);this.Kb(c,e);k.Ok(e.x,e.y);for(var e=1,g=this.description.Aa;e<g;e++)for(var d=this.description.Fd(e),f=a.pa.Wa(d),h=0;h<f;h++){var l=this.ld(b,d,h);k.My(d,h,l);l=this.ld(c,d,h);k.Cy(d,h,l)}};c.prototype.ld=function(b,c,k){if(0==c)return 0==k?this.Kb(b).x:this.Kb(b).y;switch(a.pa.JN(c)){case 0:return.5>b?this.gt(c,k):this.Ws(c,k);case 1:var e=this.gt(c,k);c=this.Ws(c,k);return a.vi.ut(e,c,b);case 2:throw a.g.ra("not implemented");
}throw a.g.wa();};c.prototype.Gd=function(b,c){var e=this.la-this.na,a=this.ha-this.ja,g=e*e+a*a;if(0==g)return.5;e=((b.x-this.na)*e+(b.y-this.ja)*a)/g;c||(0>e?e=0:1<e&&(e=1));return e};c.prototype.nt=function(b,c,a,g){if(b){b=this.ha-this.ja;if(0==b)return c==this.ha?-1:0;c=(c-this.ja)/b;if(0>c||1<c)return 0;null!=a&&(a[0]=this.sC(c))}else{b=this.la-this.na;if(0==b)return c==this.la?-1:0;c=(c-this.na)/b;if(0>c||1<c)return 0;null!=a&&(a[0]=this.vN(c))}null!=g&&(g[0]=c);return 1};c.prototype.xe=function(b,
c){var e=this.ha-this.ja;if(0==e)return b==this.ha?c:NaN;e=(b-this.ja)/e;b=this.sC(e);1==e&&(b=this.la);return b};c.prototype.qs=function(b,c,a){return 0<=this.ho(b.x,b.y,c,a)};c.prototype.Kh=function(b,c,a){return 0<=this.ho(b,c,a,!0)};c.prototype.Eq=function(b,c){return this.qs(b,c,!1)};c.prototype.KE=function(){if(this.ha<this.ja||this.ha==this.ja&&this.la<this.na){var b=this.na;this.na=this.la;this.la=b;b=this.ja;this.ja=this.ha;this.ha=b;for(var b=0,c=this.description.up-2;b<c;b++){var a=this.fa[b];
this.fa[b]=this.fa[b+c];this.fa[b+c]=a}}};c.prototype.rs=function(b,c){b=a.b.Oa(b,c);b.sub(this.Mb());c=new a.b;c.pc(this.oc(),this.Mb());var e=c.Ai(b);b=8.881784197001252E-16*(Math.abs(c.x*b.y)+Math.abs(c.y*b.x));return e>b?-1:e<-b?1:0};c.prototype.ho=function(b,c,k,g){var e=this.na,n=this.ja,d=b-e,f=c-n,d=Math.sqrt(d*d+f*f);if(d<=Math.max(k,6.661338147750939E-16*d))return g&&0==d?NaN:0;d=b-this.la;f=c-this.ha;d=Math.sqrt(d*d+f*f);if(d<=Math.max(k,6.661338147750939E-16*d))return g&&0==d?NaN:1;d=
this.la-this.na;f=this.ha-this.ja;g=Math.sqrt(d*d+f*f);if(0<g){var h=1/g,d=d*h,f=f*h,l=b-e,m=c-n,p=l*d+m*f,q=1.7763568394002505E-15*(Math.abs(l*d)+Math.abs(m*f)),r=d,d=-f,f=r,q=Math.max(k,q);if(p<-q||p>g+q)return NaN;if(Math.abs(l*d+m*f)<=Math.max(k,1.7763568394002505E-15*(Math.abs(l*d)+Math.abs(m*f)))&&(d=a.I.Kr(p*h,0,1),.5>=d?(f=this.na+(this.la-this.na)*d,g=this.ja+(this.ha-this.ja)*d):(f=this.la-(this.la-this.na)*(1-d),g=this.ha-(this.ha-this.ja)*(1-d)),a.b.Yv(f,g,b,c)<=k)){if(.5>d){if(a.b.Yv(f,
g,e,n)<=k)return 0}else if(a.b.Yv(f,g,this.la,this.ha)<=k)return 1;return d}}return NaN};c.prototype.lc=function(b){return null==b?!1:b==this?!0:b.constructor!==this.constructor?!1:this.sJ(b)};c.prototype.AA=function(b,c,k){var e=k?this.na:this.la;k=k?this.ja:this.ha;var g=new a.b;g.x=b.la-e;g.y=b.ha-k;return c.ml(g)>6.661338147750939E-16*c.uA(g)?(g.x=b.na-e,g.y=b.ja-k,c.ml(g)<=6.661338147750939E-16*c.uA(g)):!0};c.prototype.zA=function(b){var c=new a.b;c.x=this.la-this.na;c.y=this.ha-this.ja;if(!this.AA(b,
c,!1))return!1;c.Bp();return this.AA(b,c,!0)?!0:!1};c.ye=function(b,c){var e=b.rs(c.na,c.ja),a=b.rs(c.la,c.ha);if(0>e&&0>a||0<e&&0<a)return!1;e=c.rs(b.na,b.ja);a=c.rs(b.la,b.ha);if(0>e&&0>a||0<e&&0<a)return!1;e=b.$b();a=c.$b();return e>a?b.zA(c):c.zA(b)};c.Id=function(b,c,k){var e=a.b.Oa(NaN,NaN),g=b.la-b.na,d=b.ha-b.ja,f=c.la-c.na,h=c.ha-c.ja,l=f*d-g*h;if(0==l)return e;var m=8.881784197001252E-16*(Math.abs(f*d)+Math.abs(g*h)),p=c.na-b.na,q=c.ja-b.ja,r=f*q-p*h,z=r/l,v=Math.abs(l),f=(8.881784197001252E-16*
(Math.abs(f*q)+Math.abs(p*h))*v+m*Math.abs(r))/(l*l)+2.220446049250313E-16*Math.abs(z);if(z<-f||z>1+f)return e;h=g*q-p*d;f=h/l;g=(8.881784197001252E-16*(Math.abs(g*q)+Math.abs(p*d))*v+m*Math.abs(h))/(l*l)+2.220446049250313E-16*Math.abs(f);if(f<-g||f>1+g)return e;z=a.I.Kr(z,0,1);g=a.I.Kr(f,0,1);d=b.Kb(z);l=c.Kb(g);m=new a.b;m.pc(d,l);if(m.length()>k&&(m.add(d,l),m.scale(.5),z=b.Gd(m,!1),g=c.Gd(m,!1),b=b.Kb(z),c=c.Kb(g),b.sub(c),b.length()>k))return e;e.ma(z,g);return e};c.xJ=function(b,e,a,g){var k=
0;if(b.na==e.na&&b.ja==e.ja||b.na==e.la&&b.ja==e.ha)if(k++,!g)return 1;if(b.la==e.na&&b.ha==e.ja||b.la==e.la&&b.ha==e.ha){k++;if(2==k)return 2;if(!g)return 1}return e.Kh(b.na,b.ja,a)||e.Kh(b.la,b.ha,a)||b.Kh(e.na,e.ja,a)||b.Kh(e.la,e.ha,a)?1:g&&0!=k?0:0==c.ye(b,e)?0:1};c.ov=function(b,e,k,g,d,f){var n=0,u=b.ho(e.na,e.ja,f,!1),h=b.ho(e.la,e.ha,f,!1),l=e.ho(b.na,b.ja,f,!1),B=e.ho(b.la,b.ha,f,!1);isNaN(u)||(null!=g&&(g[n]=u),null!=d&&(d[n]=0),null!=k&&(k[n]=a.b.Oa(e.na,e.ja)),n++);isNaN(h)||(null!=g&&
(g[n]=h),null!=d&&(d[n]=1),null!=k&&(k[n]=a.b.Oa(e.la,e.ha)),n++);2==n||isNaN(l)||0==u&&0==l||0==h&&1==l||(null!=g&&(g[n]=0),null!=d&&(d[n]=l),null!=k&&(k[n]=a.b.Oa(b.na,b.ja)),n++);2==n||isNaN(B)||1==u&&0==B||1==h&&1==B||(null!=g&&(g[n]=1),null!=d&&(d[n]=B),null!=k&&(k[n]=a.b.Oa(e.la,e.ha)),n++);if(0<n)return 2==n&&null!=g&&g[0]>g[1]&&(b=g[0],g[0]=g[1],g[1]=b,null!=d&&(g=d[0],d[0]=d[1],d[1]=g),null!=k&&(d=a.b.Oa(k[0].x,k[0].y),k[0]=k[1],k[1]=d)),n;n=c.Id(b,e,f);if(isNaN(n.x))return 0;null!=k&&(k[0]=
b.Kb(n.x));null!=g&&(g[0]=n.x);null!=d&&(d[0]=n.y);return 1};c.prototype.TC=function(){return 0};c.prototype.eo=function(){};c.prototype.toString=function(){return"Line: ["+this.na.toString()+", "+this.ja.toString()+", "+this.la.toString()+", "+this.ha.toString()+"]"};return c}(a.fA);a.yb=g})(w||(w={}));(function(a){var g=function(){function a(){this.Gl=[];this.ua=-1}a.prototype.ya=function(){return this.ua};a.prototype.next=function(){if(null!=this.Gl&&0!=this.Gl.length){this.ua++;var c=this.Gl[0];
1>=this.Gl.length?this.Gl=[]:this.Gl=this.Gl.slice(1);return c}return this.Gl=null};return a}();a.MT=g})(w||(w={}));(function(a){(function(a){a[a.enumFillRuleOddEven=0]="enumFillRuleOddEven";a[a.enumFillRuleWinding=1]="enumFillRuleWinding"})(a.qI||(a.qI={}));var g=function(g){function c(b,c){g.call(this);this.Yf=!1;this.np=null;this.ap=this.bp=0;this.Uh=null;this.ng=!1;this.td=this.li=this.Fe=this.qb=this.jb=null;this.gp=this.Qa=this.cp=0;if(void 0===c)this.Yf=b,this.ng=!1,this.ta=this.ap=this.bp=
this.cp=0,this.description=a.Od.Tf();else{if(null==c)throw a.g.N();this.Yf=b;this.ng=!1;this.ta=this.ap=this.bp=this.cp=0;this.description=c}this.Uh=null;this.Qa=0}K(c,g);c.prototype.Hm=function(){return 0<this.cp};c.prototype.nv=function(){this.qc();null==this.np?this.np=new a.Va(this.description):this.np.Qf(this.description)};c.prototype.Uy=function(b,c){var e=new a.b;e.x=b;e.y=c;this.Nr(e)};c.prototype.Nr=function(b){this.nv();this.np.ic(b);this.ng=!0};c.prototype.df=function(b){if(b.s())throw a.g.N();
this.Ik(b.description);this.nv();b.copyTo(this.np);this.ng=!0};c.prototype.iv=function(){var b=1;this.ng&&(this.nv(),null==this.jb?(this.jb=a.Ac.Dg(2),this.jb.write(0,0),this.qb=a.Ac.to(2,0)):(this.jb.resize(this.jb.size+1,0),this.qb.resize(this.qb.size+1,0)),this.Yf&&this.qb.write(this.qb.size-2,1),b++);var c=this.ta;this.jb.write(this.jb.size-1,this.ta+b);this.jo(c+b);this.qb.write(this.jb.size-1,0);this.ng&&(this.Iu(c,this.np),this.ng=!1)};c.prototype.wj=function(b,c){this.iv();this.ic(this.ta-
1,b,c)};c.prototype.Lm=function(b){this.iv();this.ic(this.ta-1,b)};c.prototype.lineTo=function(b){this.iv();this.Iu(this.ta-1,b)};c.prototype.ro=function(){var b;this.Su();void 0===b&&(this.ng=!1,b=this.ea()-1);var c=this.qb.read(b);this.qb.write(b,c|1);null!=this.Fe&&(b=this.Dc(b)-1,this.Fe.write(b,1),this.li.write(b,-1))};c.$i=function(b){return c.Id[b]};c.prototype.vc=function(b){return 0!=(this.qb.read(b)&1)};c.prototype.Oo=function(b){if(this.vc(b))return!0;var c=this.Ea(b);b=this.Dc(b)-1;if(c>
b)return!1;c=this.Fa(c);b=this.Fa(b);return c.ub(b)};c.prototype.yq=function(b){return 0!=(this.qb.read(b)&2)};c.prototype.Bc=function(b,c){this.Ik(b.description);if(322==b.D()){var e=new a.Va;if(c||this.s())b.En(e),this.df(e);b.Bn(e);this.lineTo(e)}else throw a.g.wa();};c.prototype.ws=function(b){var c=0==this.ta;this.Uy(b.v,b.C);this.wj(b.v,b.G);this.wj(b.B,b.G);this.wj(b.B,b.C);this.ro();this.ng=!1;c&&this.yf(256,!1)};c.prototype.Wc=function(b,c){if(!b.s()){for(var e=0==this.ta,g=new a.Va(this.description),
d=0;4>d;d++)b.uf(c?4-d-1:d,g),0==d?this.df(g):this.lineTo(g);this.ro();this.ng=!1;e&&!c&&this.yf(256,!1)}};c.prototype.add=function(b,c){for(var e=0;e<b.ea();e++)this.Zj(b,e,!c)};c.prototype.Zj=function(b,c,a){this.Cf(-1,b,c,a)};c.prototype.lo=function(){this.Sw()};c.prototype.ys=function(b,c,k,g,d){d||0!=this.ea()||(d=!0);0>c&&(c=b.ea()-1);if(c>=b.ea()||0>k||0>g||g>b.ct(c))throw a.g.ra("index out of bounds");if(0!=g){var e=b.vc(c)&&k+g==b.ct(c);if(!e||1!=g){this.ng=!1;this.Ik(b.description);k=b.Ea(c)+
k+1;d&&(g++,k--);e&&g--;e=this.ta;this.jo(this.ta+g);this.kc();if(d){if(0==g)return;this.jb.add(this.ta);d=b.qb.read(c);d&=-5;this.Yf&&(d|=1);this.qb.write(this.qb.size-1,d);this.qb.add(0)}else this.jb.write(this.qb.size-1,this.ta);d=0;for(var n=this.description.Aa;d<n;d++){var f=this.description.Hd(d),u=a.pa.Wa(f),h=b.description.zf(f);0>h||null==b.Ba[h]?this.Ba[d].ul(u*e,a.pa.ue(f),g*u,u*e):this.Ba[d].nk(u*e,b.Ba[h],u*k,g*u,!0,u,u*e)}if(this.Hm())throw a.g.wa();if(b.yq(c))throw a.g.wa();this.ce(1993)}}};
c.prototype.Cr=function(b){this.kc();var c=this.ea();0>b&&(b=c-1);if(b>=c)throw a.g.N();for(var k=this.Ea(b),g=this.Ha(b),d=0,f=this.description.Aa;d<f;d++)if(null!=this.Ba[d]){var h=a.pa.Wa(this.description.Fd(d));this.Ba[d].oj(h*k,h*g,h*this.ta)}for(k=b+1;k<=c;k++)d=this.jb.read(k),this.jb.write(k-1,d-g);if(null==this.qb)for(k=b+1;k<=c;k++)b=this.qb.read(k),this.qb.write(k-1,b);this.jb.resize(c);this.qb.resize(c);this.ta-=g;this.rg-=g;this.ce(1993)};c.prototype.Cf=function(b,c,k,g){if(c==this)throw a.g.N();
if(k>=c.ea())throw a.g.N();var e=this.ea();if(b>e)throw a.g.N();0>b&&(b=e);0>k&&(k=c.ea()-1);this.ng=!1;this.Ik(c.description);c.kc();var n=c.Ea(k),d=c.Ha(k),f=this.ta,h=c.vc(k)&&!g?1:0;this.jo(this.ta+d);this.kc();for(var l=b<e?this.Ea(b):f,m=0,p=this.description.Aa;m<p;m++){var q=this.description.Fd(m),r=c.description.zf(q),z=a.pa.Wa(q);0<=r&&null!=c.Ba[r]?(0!=h&&this.Ba[m].nk(l*z,c.Ba[r],z*n,z,!0,z,z*f),this.Ba[m].nk((l+h)*z,c.Ba[r],z*(n+h),z*(d-h),g,z,z*(f+h))):this.Ba[m].ul(l*z,a.pa.ue(q),z*
d,z*f)}this.jb.add(f+d);for(g=e;g>=b+1;g--)n=this.jb.read(g-1),this.jb.write(g,n+d);c.yq(k);this.qb.add(0);for(g=e-1;g>=b+1;g--)e=this.qb.read(g),e&=-5,this.qb.write(g+1,e);e=c.VN().read(k);e&=-5;this.Yf&&(e|=1);this.qb.write(b,e)};c.prototype.Sw=function(){var b=-1,c=this.ea();if(b>c)throw a.g.N();0>b&&(b=c);this.ng=!1;this.kc();this.jb.add(this.ta);for(var k=c;k>=b+1;k--){var g=this.jb.read(k-1);this.jb.write(k,g+0)}this.qb.add(0);for(k=c-1;k>=b+1;k--)c=this.qb.read(k),c&=-5,this.qb.write(k+1,c);
this.Yf&&this.qb.write(b,1)};c.prototype.dD=function(b,c,k){var e=-1;0>b&&(b=this.ea());if(b>this.ea()||e>this.Ha(b)||k>c.length)throw a.g.ra("index out of bounds");if(0!=k){b==this.ea()&&(this.jb.add(this.ta),this.Yf?this.qb.add(1):this.qb.add(0));0>e&&(e=this.Ha(b));this.kc();var g=this.ta;this.jo(this.ta+k);this.kc();for(var d=0,f=this.description.Aa;d<f;d++){var h=this.description.Fd(d),l=a.pa.Wa(h);this.Ba[d].km(l*(this.Ea(b)+e+k),(g-this.Ea(b)-e)*l,this.Ba[d],l*(this.Ea(b)+e),!0,l);0==d?this.Ba[d].$p(l*
(this.Ea(b)+e),k,c,0,!0):this.Ba[d].dh(a.pa.ue(h),(this.Ea(b)+e)*l,k*l)}this.Hm()&&(this.Fe.km(this.Ea(b)+e+k,g-this.Ea(b)-e,this.Fe,this.Ea(b)+e,!0,1),this.li.km(this.Ea(b)+e+k,g-this.Ea(b)-e,this.li,this.Ea(b)+e,!0,1),this.Fe.dh(1,this.Ea(b)+e,k),this.li.dh(-1,this.Ea(b)+e,k));b+=1;for(c=this.ea();b<=c;b++)this.jb.write(b,this.jb.read(b)+k)}};c.prototype.kf=function(b,c,k){var e=this.ea();0>b&&(b=this.ea());if(b>=e||c>this.Ha(b))throw a.g.ra("index out of bounds");b==this.ea()&&(this.jb.add(this.ta),
this.Yf?this.qb.add(1):this.qb.add(0));0>c&&(c=this.Ha(b));var g=this.ta;this.jo(this.ta+1);this.kc();var d=this.Ea(b);this.Ba[0].lg(2*(d+c),k,2*g);k=1;for(var f=this.description.Aa;k<f;k++){var h=this.description.Fd(k),l=a.pa.Wa(h);this.Ba[k].ul(l*(d+c),a.pa.ue(h),l,l*g)}for(b+=1;b<=e;b++)this.jb.write(b,this.jb.read(b)+1)};c.prototype.eF=function(b,c){var e=this.ea();0>b&&(b=e-1);if(b>=e||c>=this.Ha(b))throw a.g.ra("index out of bounds");this.kc();var g=this.Ea(b);0>c&&(c=this.Ha(b)-1);g+=c;c=0;
for(var d=this.description.Aa;c<d;c++)if(null!=this.Ba[c]){var f=a.pa.Wa(this.description.Fd(c));this.Ba[c].oj(f*g,f,f*this.ta)}for(;e>=b+1;e--)g=this.jb.read(e),this.jb.write(e,g-1);this.ta--;this.rg--;this.ce(1993)};c.prototype.Rf=function(){return a.Hh.il(this,null)};c.prototype.Ja=function(){this.cp=0;this.ng=!1;this.td=this.Fe=this.li=this.qb=this.jb=null;this.EA()};c.prototype.Oe=function(b){b instanceof a.Bg?this.ZA(b,-1):this.$J(b)};c.prototype.ZA=function(b,c){if(!this.s()&&!b.XO()){this.kc();
var e=this.Ba[0],g=new a.b,d=new a.b,f,h,l;for(0>c?(f=this.Hm(),h=0,l=this.ta):(f=this.yq(c),h=this.Ea(c),l=this.Dc(c));h<l;h++){g.x=e.read(2*h);g.y=e.read(2*h+1);if(f&&(c=this.li.read(h),0<=c))switch(this.Fe.read(h)&7){case 2:d.x=this.td.read(c);d.y=this.td.read(c+1);b.Zi(d,d);this.td.write(c,d.x);this.td.write(c+1,d.y);d.x=this.td.read(c+3);d.y=this.td.read(c+4);b.Zi(d,d);this.td.write(c+3,d.x);this.td.write(c+4,d.y);break;case 4:throw a.g.wa();}b.Zi(g,g);e.write(2*h,g.x);e.write(2*h+1,g.y)}this.ce(1993)}};
c.prototype.$J=function(b){if(!this.s()){this.Ne(1);this.kc();for(var c=this.Ba[0],k=this.Ba[1],g=new a.ee,d=new a.ee,f=this.Hm(),h=0;h<this.ta;h++){g.x=c.read(2*h);g.y=c.read(2*h+1);g.z=k.read(h);if(f){var l=this.li.read(h);if(0<=l)switch(this.Fe.read(h)&7){case 2:d.x=this.td.read(l);d.y=this.td.read(l+1);d.z=this.td.read(l+2);d=b.Qn(d);this.td.write(l,d.x);this.td.write(l+1,d.y);this.td.write(l+1,d.z);d.x=this.td.read(l+3);d.y=this.td.read(l+4);d.z=this.td.read(l+5);d=b.Qn(d);this.td.write(l+3,
d.x);this.td.write(l+4,d.y);this.td.write(l+5,d.z);break;case 4:throw a.g.wa();}}g=b.Qn(g);c.write(2*h,g.x);c.write(2*h+1,g.y);k.write(h,g.z)}this.ce(1993)}};c.prototype.xv=function(){null==this.jb&&(this.jb=a.Ac.Dg(1,0),this.qb=a.Ac.to(1,0));null!=this.Fe&&(this.Fe.resize(this.rg,1),this.li.resize(this.rg,-1))};c.prototype.eo=function(b){b.ng=!1;b.cp=this.cp;b.gp=this.gp;null!=this.jb?b.jb=a.ga.lj(this.jb):b.jb=null;null!=this.qb?b.qb=a.Wk.lj(this.qb):b.qb=null;null!=this.li?b.li=a.ga.lj(this.li):
b.li=null;null!=this.Fe?b.Fe=a.Wk.lj(this.Fe):b.Fe=null;null!=this.td?b.td=a.qd.lj(this.td):b.td=null;b.bp=this.bp;b.ap=this.ap;this.gj(1024)?b.Uh=null:b.Uh=this.Uh};c.prototype.$b=function(){if(!this.gj(512))return this.bp;for(var b=this.Ca(),c=new a.av(0);b.kb();)for(;b.La();)c.add(b.ia().$b());this.bp=c.rl();this.yf(512,!1);return c.rl()};c.prototype.lc=function(b){if(b==this)return!0;if(!(b instanceof c&&g.prototype.lc.call(this,b)))return!1;var e=this.ea();return e!=b.ea()||null!=this.jb&&!this.jb.lc(b.jb,
0,e+1)||this.gp!=b.gp||null!=this.qb&&!this.qb.lc(b.qb,0,e)?!1:g.prototype.lc.call(this,b)};c.prototype.Ca=function(){return new a.GI(this)};c.prototype.wv=function(b){g.prototype.wv.call(this,b);if(this.Hm())for(b=this.Ca();b.kb();)for(;b.La();)break};c.prototype.tm=function(b,c){g.prototype.tm.call(this,b,c);if(this.Hm())for(b=this.Ca();b.kb();)for(;b.La();)break};c.prototype.qv=function(){null==this.jb||0==this.jb.size?this.ta=0:this.ta=this.jb.read(this.jb.size-1)};c.prototype.Mh=function(){if(!this.Yf)return 0;
this.ts();return this.ap};c.prototype.qt=function(b){if(!this.Yf)return!1;if(!this.gj(8))return 0!=(this.qb.read(b)&4);this.ts();return 0<this.Uh.read(b)};c.prototype.oo=function(b){if(!this.Yf)return 0;this.ts();return this.Uh.read(b)};c.prototype.ts=function(){if(this.gj(1024)){var b=this.ea();null==this.Uh?this.Uh=new a.qd(b):this.Uh.size!=b&&this.Uh.resize(b);for(var b=new a.av(0),c=new a.av(0),k=new a.b,g=0,d=this.Ca();d.kb();){c.reset();for(this.w(this.Ea(d.Qa),k);d.La();)c.add(d.ia().kv(k.x,
k.y));b.add(c.rl());var f=g++;this.Uh.write(f,c.rl())}this.ap=b.rl();this.yf(1024,!1)}};c.prototype.hl=function(){if(this.gj(8)){this.ts();var b=this.ea();if(null==this.qb||this.qb.size<b)this.qb=a.Ac.to(b+1);for(var c=1,k=0;k<b;k++){var g=this.Uh.read(k);0==k&&(c=0<g?1:-1);0<g*c?this.qb.xy(k,4):this.qb.BB(k,4)}this.yf(8,!1)}};c.prototype.Ew=function(b){var c=this.Qa,k=this.ea();if(0<=c&&c<k){if(b<this.Dc(c)){if(b>=this.Ea(c))return c;c--}else c++;if(0<=c&&c<k&&b>=this.Ea(c)&&b<this.Dc(c))return this.Qa=
c}if(5>k){for(c=0;c<k;c++)if(b<this.Dc(c))return this.Qa=c;throw a.g.ra("corrupted geometry");}c=0;for(--k;k>c;){var g=c+(k-c>>1),d=this.Ea(g);if(b<d)k=g-1;else if(c=this.Dc(g),b>=c)c=g+1;else return this.Qa=g}return this.Qa=c};c.prototype.HN=function(b){var c=this.mc(0);this.WN();var k=this.Dc(b),g=this.Ea(b);b=-1;var d=new a.b,f=new a.b;d.y=-Infinity;d.x=-Infinity;for(g+=0;g<k;g++)c.ec(2*g,f),-1==d.compare(f)&&(b=g,d.J(f));return b};c.prototype.Iw=function(){var b=this.F();if(!this.Yf)for(var b=
b-this.ea(),c=0,a=this.ea();c<a;c++)this.vc(c)&&b++;return b};c.prototype.ct=function(b){var c=this.Ha(b);this.vc(b)||c--;return c};c.prototype.Pa=function(){return new c(this.Yf,this.description)};c.prototype.fb=function(){return this.Yf?2:1};c.prototype.D=function(){return this.Yf?1736:1607};c.prototype.WN=function(){this.Su()};c.prototype.OF=function(b){this.jb=b;this.ce(16777215)};c.prototype.VN=function(){this.Su();return this.qb};c.prototype.NF=function(b){this.qb=b;this.ce(16777215)};c.prototype.ea=
function(){return null!=this.jb?this.jb.size-1:0};c.prototype.Dc=function(b){return this.jb.read(b+1)};c.prototype.Ha=function(b){return this.jb.read(b+1)-this.jb.read(b)};c.prototype.Ea=function(b){return this.jb.read(b)};c.prototype.jv=function(b,c){null==this.pb&&(this.pb=new a.Wj);c=a.dA.jR(c);var e=this.pb.hi;if(null!=e)if(e.Sx<b||c>e.cO())this.pb.uv(null);else return!0;e=a.dA.create(this,b,c);this.pb.uv(e);return!0};c.prototype.hc=function(){var b=g.prototype.hc.call(this);if(!this.sc()){var c=
this.ea();null!=this.jb&&this.jb.jj(b,0,c+1);null!=this.qb&&this.qb.jj(b,0,c)}return b};c.prototype.NC=function(b){return null!=this.Fe?this.Fe.read(b):1};c.prototype.cc=function(b,c,k){var e=this.Ew(b);if(b==this.Dc(e)-1&&!this.vc(e))throw a.g.ra("index out of bounds");this.kc();var g=this.Fe,d=1;null!=g&&(d=g.read(b)&7);switch(d){case 1:c.mq();break;case 2:throw a.g.wa();case 4:throw a.g.wa();default:throw a.g.wa();}c=c.get();k?c.Qf(a.Od.Tf()):c.Qf(this.description);e=b==this.Dc(e)-1&&this.vc(e)?
this.Ea(e):b+1;g=new a.b;this.w(b,g);c.ed(g);this.w(e,g);c.vd(g);if(!k)for(k=1,g=this.description.Aa;k<g;k++)for(var d=this.description.Fd(k),f=a.pa.Wa(d),h=0;h<f;h++){var l=this.ld(d,b,h);c.My(d,h,l);l=this.ld(d,e,h);c.Cy(d,h,l)}};c.prototype.Ti=function(b,c){if(b>=this.ea())throw a.g.N();if(this.s())c.Ja();else{if(this.yq(b))throw a.g.ra("not implemented");var e=this.mc(0),g=new a.b,d=new a.i;d.Ja();var f=this.Ea(b);for(b=this.Dc(b);f<b;f++)e.ec(2*f,g),d.Db(g);c.K(d)}};c.prototype.hR=function(b,
c){if(b>=this.ea())throw a.g.N();if(this.s())c.Ja();else{if(this.yq(b))throw a.g.ra("not implemented");var e=this.mc(0),g=new a.b,d=new a.i;d.Ja();var f=this.Ea(b);for(b=this.Dc(b);f<b;f++)e.ec(2*f,g),d.Db(g);c.K(d)}};c.prototype.dj=function(b){null==this.pb&&(this.pb=new a.Wj);if(0==b||16>this.F())return!1;b=a.Ia.nB(this);this.pb.GA(b);return!0};c.prototype.jJ=function(){null==this.pb&&(this.pb=new a.Wj);if(null!=this.pb.nn)return!0;this.pb.HA(null);var b=a.Ia.CK(this);this.pb.HA(b);return!0};c.prototype.Pp=
function(b){this.gp=b};c.prototype.Cm=function(){return this.gp};c.Id=[0,0,6,0,8,0];return c}(a.Wr);a.al=g})(w||(w={}));(function(a){var g=function(g){function c(b){g.call(this);if(void 0!==b){if(null==b)throw a.g.N();this.description=b}else this.description=a.Od.Tf();this.ta=0}K(c,g);c.prototype.Pa=function(){return new c(this.description)};c.prototype.add=function(b){this.resize(this.ta+1);this.bh(this.ta-1,b)};c.prototype.zs=function(b,c){this.resize(this.ta+1);var e=new a.b;e.ma(b,c);this.ic(this.ta-
1,e)};c.prototype.Pd=function(b,c,k){k=0>k?b.F():k;if(0>c||c>b.F()||k<c)throw a.g.N();if(c!=k){this.Ik(b.description);k-=c;var e=this.ta;this.resize(this.ta+k);this.kc();for(var g=0,d=b.description.Aa;g<d;g++){var f=b.description.Fd(g),h=a.pa.Wa(f),l=this.mc(f),f=b.mc(f);l.nk(e*h,f,c*h,k*h,!0,1,e*h)}}};c.prototype.eF=function(b){if(0>b||b>=this.F())throw a.g.ra("index out of bounds");this.kc();for(var c=0,k=this.description.Aa;c<k;c++)if(null!=this.Ba[c]){var g=a.pa.Wa(this.description.Fd(c));this.Ba[c].oj(g*
b,g,g*this.ta)}this.ta--;this.rg--;this.ce(1993)};c.prototype.resize=function(b){this.jo(b)};c.prototype.eo=function(){};c.prototype.Ja=function(){g.prototype.EA.call(this)};c.prototype.Oe=function(b){if(b instanceof a.Bg){if(!this.s()){this.kc();for(var c=this.Ba[0],k=new a.b,g=0;g<this.ta;g++)k.x=c.read(2*g),k.y=c.read(2*g+1),b.Zi(k,k),c.write(2*g,k.x),c.write(2*g+1,k.y);this.ce(1993)}}else if(!this.s()){this.kc();this.Ne(1);this.kc();for(var c=this.Ba[0],k=this.Ba[1],d=new a.ee,g=0;g<this.ta;g++){d.x=
c.read(2*g);d.y=c.read(2*g+1);d.z=k.read(g);var f=b.Qn(d);c.write(2*g,f.x);c.write(2*g+1,f.y);k.write(g,f.z)}this.ce(1993)}};c.prototype.fb=function(){return 0};c.prototype.D=function(){return 550};c.prototype.Mh=function(){return 0};c.prototype.$b=function(){return 0};c.prototype.lc=function(b){return b==this?!0:b instanceof c?g.prototype.lc.call(this,b):!1};c.prototype.fR=function(b,c){var e=this.ta,e=Math.min(e,c+1E3);if(0>c||c>=this.ta||e<c||1E3!=b.length)throw a.g.N();var g=this.mc(0),d=e-c,
f=[];g.Hp(2*c,2*d,f,0,!0);for(g=0;g<d;g++)b[g]=a.b.Oa(f[2*g],f[2*g+1]);return e};c.prototype.qv=function(){};c.prototype.xv=function(){};c.prototype.jv=function(){return!1};c.prototype.dj=function(){return!1};c.prototype.Rf=function(){return null};return c}(a.Wr);a.pe=g})(w||(w={}));(function(a){(function(a){a[a.NotDetermined=0]="NotDetermined";a[a.Structure=1]="Structure";a[a.DegenerateSegments=2]="DegenerateSegments";a[a.Clustering=3]="Clustering";a[a.Cracking=4]="Cracking";a[a.CrossOver=5]="CrossOver";
a[a.RingOrientation=6]="RingOrientation";a[a.RingOrder=7]="RingOrder";a[a.OGCPolylineSelfTangency=8]="OGCPolylineSelfTangency";a[a.OGCPolygonSelfTangency=9]="OGCPolygonSelfTangency";a[a.OGCDisconnectedInterior=10]="OGCDisconnectedInterior"})(a.NH||(a.NH={}));var g=function(){function a(c,b,e){void 0===c?(this.yh=0,this.Gk=this.Fk=-1):(this.yh=c,this.Fk=b,this.Gk=e)}a.prototype.aq=function(c){this.yh=c.yh;this.Fk=c.Fk;this.Gk=c.Gk};return a}();a.wd=g})(w||(w={}));(function(a){var g=function(){function g(){}
g.WT=function(c){if(!1===c)throw a.g.PG();};g.bG=function(c){return isNaN(c)?NaN:0===c?c:0<c?1:-1};g.Lh=function(c,b){void 0===b&&(b=0);for(var e=[],a=0;a<c;a++)e[a]=b;return e};g.Ps=function(c,b){var e,a;void 0===e&&(e=0);for(void 0===a&&(a=c.length-1);e<=a;e++)c[e]=b};g.Kr=function(c,b,e){return c<b?b:c>e?e:c};g.mU=function(){return 4};g.kg=function(c,b){var e=5381;void 0!==b?e=(b<<5)+b+(c&255):e=(e<<5)+e+(c&255);e=(e<<5)+e+(c>>8&255);e=(e<<5)+e+(c>>16&255);return(e<<5)+e+(c>>24&255)&2147483647};
g.Rh=function(){throw Error("Not Implemented");};g.iU=function(){return-Infinity};g.kU=function(){return Infinity};g.bU=function(){return 2147483647};g.QT=function(){return 2.220446049250313E-16};g.ST=function(){return 1.7976931348623157E308};g.$x=function(c){return g.JH(c)+12345&2147483647};g.FD=function(c){var b=32,e=c%g.gv|0,a=c/g.gv|0;if(0===(b&=63))return c;32>b?(c=e>>>b|a<<32-b,b=a>>b):(c=a>>b-32,b=0<=a?0:-1);return b*g.gv+(c>>>0)};g.JH=function(c){c|=0;return(1103495168*c|0)+(20077*c|0)|0};
g.truncate=function(c){return 0>c?-1*Math.floor(Math.abs(c)):Math.floor(c)};g.aH=Math.pow(2,53)-1;g.UT=-g.aH;g.pF=65536;g.zU=16777216;g.gv=g.pF*g.pF;return g}();a.I=g})(w||(w={}));(function(a){(function(a){a[a.Project=0]="Project";a[a.Union=1]="Union";a[a.Difference=2]="Difference";a[a.Proximity2D=3]="Proximity2D";a[a.Relate=4]="Relate";a[a.Equals=5]="Equals";a[a.Disjoint=6]="Disjoint";a[a.Intersects=7]="Intersects";a[a.Within=8]="Within";a[a.Contains=9]="Contains";a[a.Crosses=10]="Crosses";a[a.Touches=
11]="Touches";a[a.Overlaps=12]="Overlaps";a[a.Buffer=13]="Buffer";a[a.Distance=14]="Distance";a[a.Intersection=15]="Intersection";a[a.Clip=16]="Clip";a[a.Cut=17]="Cut";a[a.DensifyByLength=18]="DensifyByLength";a[a.DensifyByAngle=19]="DensifyByAngle";a[a.LabelPoint=20]="LabelPoint";a[a.GeodesicBuffer=21]="GeodesicBuffer";a[a.GeodeticDensifyByLength=22]="GeodeticDensifyByLength";a[a.ShapePreservingDensify=23]="ShapePreservingDensify";a[a.GeodeticLength=24]="GeodeticLength";a[a.GeodeticArea=25]="GeodeticArea";
a[a.Simplify=26]="Simplify";a[a.SimplifyOGC=27]="SimplifyOGC";a[a.Offset=28]="Offset";a[a.Generalize=29]="Generalize";a[a.SymmetricDifference=30]="SymmetricDifference";a[a.ConvexHull=31]="ConvexHull";a[a.Boundary=32]="Boundary";a[a.SimpleRelation=33]="SimpleRelation"})(a.iI||(a.iI={}));var g=function(){function g(){}g.prototype.D=function(){return null};g.NT=function(c){a.T.Th(c.D())&&(c=c.pb,null!=c&&(c.uv(null),c.GA(null)))};return g}();a.Me=g})(w||(w={}));(function(a){var g=function(g){function c(){g.apply(this,
arguments)}K(c,g);c.prototype.D=function(){return 13};c.local=function(){null===c.V&&(c.V=new c);return c.V};c.prototype.$=function(b,c,k,g,d){return b instanceof a.T?(d=new a.Pc(b),this.$(d,c,[k],!1,g).next()):!0===g?(k=new a.Pz(b,c,k,!1,d),a.wi.local().$(k,c,d)):new a.Pz(b,c,k,!1,d)};c.V=null;return c}(a.Me);a.Oz=g})(w||(w={}));(function(a){var g=function(){function g(c,b,e,k,g){this.ua=-1;this.ne=c;this.fx=b;this.Oq=e;this.BP=new a.i;this.BP.Ja();this.Vm=-1;this.Yb=g}g.prototype.next=function(){for(var c;null!=
(c=this.ne.next());)return this.ua=this.ne.ya(),this.Vm+1<this.Oq.length&&this.Vm++,this.buffer(c,this.Oq[this.Vm]);return null};g.prototype.ya=function(){return this.ua};g.prototype.buffer=function(c,b){return a.UG.buffer(c,b,this.fx,NaN,96,this.Yb)};return g}();a.Pz=g})(w||(w={}));(function(a){var g=function(g){function c(){g.apply(this,arguments)}K(c,g);c.prototype.D=function(){return 16};c.local=function(){null===c.V&&(c.V=new c);return c.V};c.prototype.$=function(b,c,k,g){return b instanceof
a.T?(b=new a.Pc(b),this.$(b,c,k,g).next()):new a.TH(b,c,k,g)};c.V=null;return c}(a.Me);a.SH=g})(w||(w={}));(function(a){var g=function(){function g(c,b,e){this.ua=-1;if(null==c)throw a.g.N();this.R=b;this.wk=c;this.ka=a.Ia.zd(e,b,!1)}g.prototype.next=function(){var c;return null!=(c=this.wk.next())?(this.ua=this.wk.ya(),a.Ed.clip(c,this.R,this.ka,0)):null};g.prototype.ya=function(){return this.ua};return g}();a.TH=g})(w||(w={}));(function(a){var g=function(g){function c(){g.apply(this,arguments)}
K(c,g);c.prototype.D=function(){return 31};c.local=function(){null===c.V&&(c.V=new c);return c.V};c.prototype.$=function(b,c,k){return b instanceof a.T?a.Rz.qB(b):new a.Rz(c,b,k)};c.V=null;return c}(a.Me);a.Qz=g})(w||(w={}));(function(a){var g=function(){function g(c,b,e){this.cE=new a.Tr;this.ua=-1;if(null==b)throw a.g.N();this.zP=c;this.Ec=!1;this.wk=b;this.Yb=e}g.prototype.next=function(){if(this.zP){if(!this.Ec){var c=this.GK(this.wk);this.Ec=!0;return c}return null}if(!this.Ec){c=this.wk.next();
if(null!=c)return this.ua=this.wk.ya(),g.qB(c);this.Ec=!0}return null};g.prototype.ya=function(){return this.ua};g.prototype.GK=function(c){for(var b;null!=(b=c.next());)this.cE.Eb(b);return this.cE.sN()};g.qB=function(c){if(g.Gh(c))return c;var b=c.D();if(a.al.Lc(b))return b=new a.Xa(c.description),b.Bc(c,!0),b;if(550==b&&2==c.F()){var e=new a.Va,b=new a.Xa(c.description);c.Sd(0,e);b.df(e);c.Sd(1,e);b.lineTo(e);return b}return a.Tr.wL(c)};g.Gh=function(c){if(c.s())return!0;var b=c.D();return 33==
b||197==b?!0:a.al.Lc(b)?!1:550==b?1==c.F()?!0:!1:1607==b?1==c.ea()&&2>=c.F()?!0:!1:1!=c.ea()?!1:2>=c.F()?!0:a.Tr.sD(c,0)};return g}();a.Rz=g})(w||(w={}));(function(a){var g=function(g){function c(){g.apply(this,arguments)}K(c,g);c.prototype.D=function(){return 17};c.local=function(){null===c.V&&(c.V=new c);return c.V};c.prototype.$=function(b,c,k,g,d){return new a.VH(b,c,k,g,d)};c.V=null;return c}(a.Me);a.UH=g})(w||(w={}));(function(a){var g=function(){function g(c,b,e,k,g){this.Ef=null;if(null==
b||null==e)throw a.g.ra("invalid argument");this.xP=c;this.rx=b;this.RD=e;c=a.Ia.$s(b,e);this.ka=a.Ia.zd(k,c,!0);this.QD=-1;this.oe=g}g.prototype.ya=function(){return 0};g.prototype.next=function(){this.gN();return++this.QD<this.Ef.length?this.Ef[this.QD]:null};g.prototype.gN=function(){if(null==this.Ef)switch(this.Ef=[],this.rx.D()){case 1607:this.iN();break;case 1736:this.hN()}};g.prototype.iN=function(){var c=new a.Xa,b=new a.Xa,e=new a.Xa;this.Ef.push(c);this.Ef.push(b);var k=[];a.$G.YG(this.xP,
this.rx,this.RD,this.ka,k,this.oe);for(var g=0;g<k.length;g++){var d=k[g];0==d.cu?c.add(d.U,!1):1==d.cu||2==d.cu?b.add(d.U,!1):3==d.cu?this.Ef.push(d.U):e.add(d.U,!1)}e.s()||c.s()&&b.s()&&!(3<=this.Ef.length)||this.Ef.push(e);c.s()&&b.s()&&3>this.Ef.length&&(this.Ef.length=0)};g.prototype.hN=function(){var c=new a.ga(0),b=new a.fd,e=b.RB(),k=b.Eb(this.rx),g=b.Eb(this.RD),d=new a.Of;try{d.Np(b,this.ka,this.oe);d.xm(e,k,g,c);var f=b.hf(k),h=new a.Ka,l=new a.Ka;this.Ef.length=0;this.Ef.push(h);this.Ef.push(l);
for(k=0;k<c.size;k++){var m,p=new a.fd,q=p.Eb(f),r=p.Eb(b.hf(c.get(k)));d.Mp(p,this.oe);var v=d.mt(q,r);m=p.hf(v);if(!m.s()){var z=b.yC(c.get(k),e);2==z?h.add(m,!1):1==z?l.add(m,!1):this.Ef.push(m);var x=new a.fd,q=x.Eb(f),r=x.Eb(b.hf(c.get(k)));d.Mp(x,this.oe);f=x.hf(d.ll(q,r))}}!f.s()&&0<c.size&&this.Ef.push(f);h.s()&&l.s()&&(this.Ef.length=0)}finally{d.xg()}};return g}();a.VH=g})(w||(w={}));(function(a){var g=function(g){function c(){g.apply(this,arguments)}K(c,g);c.prototype.D=function(){return 18};
c.local=function(){null===c.V&&(c.V=new c);return c.V};c.prototype.$=function(b,c,k){if(b instanceof a.T)return b=new a.Pc(b),this.$(b,c,k).next();if(0>=c)throw a.g.N();return new a.XH(b,c,k)};c.V=null;return c}(a.Me);a.WH=g})(w||(w={}));(function(a){var g=function(){function g(c,b){this.ua=-1;this.ne=c;this.$q=b}g.prototype.ya=function(){return this.ua};g.prototype.next=function(){var c;return null!=(c=this.ne.next())?(this.ua=this.ne.ya(),this.hM(c)):null};g.prototype.hM=function(c){if(c.s()||1>
c.fb())return c;var b=c.D();if(1736==b||1607==b)return this.Xv(c);if(a.T.Lc(b))return this.jM(c);if(197==b)return this.iM(c);throw a.g.wa();};g.prototype.jM=function(c){if(c.$b()<=this.$q)return c;var b=new a.Xa(c.description);b.Bc(c,!0);return this.Xv(b)};g.prototype.iM=function(c){var b=new a.Ka(c.description);b.Wc(c,!1);var e=new a.i;c.o(e);c=e.ba();return e.aa()<=this.$q&&c<=this.$q?b:this.Xv(b)};g.prototype.Xv=function(c){for(var b=c.Pa(),e=c.Ca();e.kb();)for(var k=!0;e.La();){var g=e.ia();if(322!=
g.D())throw a.g.ra("not implemented");var d=e.lD(),f=g.$b();if(f>this.$q){var h=Math.ceil(f/this.$q),f=new a.Va(c.description);k&&(g.En(f),b.df(f));for(var l=k=1/h,m=0,h=h-1;m<h;m++)g.uu(l,f),b.lineTo(f),l+=k;d?b.ro():(g.Bn(f),b.lineTo(f))}else d?b.ro():b.Bc(g,k);k=!1}return b};return g}();a.XH=g})(w||(w={}));(function(a){var g=function(g){function c(){g.apply(this,arguments)}K(c,g);c.local=function(){null===c.V&&(c.V=new c);return c.V};c.prototype.D=function(){return 2};c.prototype.$=function(b,
c,k,g){return b instanceof a.T?(b=new a.Pc(b),c=new a.Pc(c),this.$(b,c,k,g).next()):new a.YH(b,c,k,g)};c.ll=function(b,e,k,g){if(b.s()||e.s())return b;var n=b.fb(),d=e.fb();if(n>d)return b;var f=b.D(),h=e.D(),l=new a.i,m=new a.i,p=new a.i;b.o(l);e.o(m);p.K(l);p.Db(m);var p=a.Ia.zd(k,p,!1),q=p*Math.sqrt(2)*1.00001,r=new a.i;r.K(l);r.P(q,q);if(!r.jc(m))return b;if(1==n&&2==d)return c.UI(b,e,h,k,g);if(33==f)switch(a.al.Lc(h)?(k=new a.Xa(e.description),k.Bc(e,!0)):k=e,h){case 1736:return c.kP(b,k,p);
case 1607:return c.nP(b,k,p);case 550:return c.dN(b,k,p);case 197:return c.FM(b,k,p);case 33:return c.rO(b,k,p);default:throw a.g.N();}else if(550==f)switch(h){case 1736:return c.ZI(b,e,p);case 197:return c.TI(b,e,p);case 33:return c.WI(b,e,p)}return a.Of.ll(b,e,k,g)};c.kP=function(b,c,k){return 0==a.gd.uD(c,b,k)?b:b.Pa()};c.nP=function(b,c,k){var e=b.w();c=c.Ca();for(var g=k*Math.sqrt(2)*1.00001,d=g*g,f=new a.i;c.kb();)for(;c.La();){var h=c.ia();h.o(f);f.P(g,g);if(f.contains(e)){if(h.Eq(e,k))return b.Pa();
var l=h.Mb();if(a.b.Zb(e,l)<=d)return b.Pa();l=h.oc();if(a.b.Zb(e,l)<=d)return b.Pa()}}return b};c.dN=function(b,c,k){var e=c.mc(0);c=c.F();var g=b.w(),d=new a.b;k=k*Math.sqrt(2)*1.00001;k*=k;for(var f=0;f<c;f++)if(e.ec(2*f,d),a.b.Zb(d,g)<=k)return b.Pa();return b};c.FM=function(b,c,k){var e=new a.i;c.o(e);e.P(k,k);c=b.w();return e.contains(c)?b.Pa():b};c.rO=function(b,c,k){k=k*Math.sqrt(2)*1.00001;k*=k;var e=b.w();c=c.w();return a.b.Zb(e,c)<=k?b.Pa():b};c.ZI=function(b,c,k){var e=new a.i;c.o(e);
e.P(k,k);for(var g=b.F(),d=!1,f=[],h=0;h<g;h++)f[h]=!1;for(var l=new a.b,h=0;h<g;h++)b.w(h,l),e.contains(l)&&0!=a.gd.he(c,l,k)&&(d=!0,f[h]=!0);if(!d)return b;c=b.Pa();for(h=0;h<g;h++)f[h]||c.Pd(b,h,h+1);return c};c.TI=function(b,c,k){var e=new a.i;c.o(e);e.P(k,k);c=b.F();var g=!1;k=[];for(var d=0;d<c;d++)k[d]=!1;for(var f=new a.b,d=0;d<c;d++)b.w(d,f),e.contains(f)&&(g=!0,k[d]=!0);if(!g)return b;e=b.Pa();for(d=0;d<c;d++)k[d]||e.Pd(b,d,d+1);return e};c.WI=function(b,c,k){var e=b.mc(0),g=b.F(),d=c.w(),
f=new a.b,h=!1;c=[];for(var l=0;l<g;l++)c[l]=!1;l=k*Math.sqrt(2)*1.00001;k=l*l;for(l=0;l<g;l++)e.ec(2*l,f),a.b.Zb(f,d)<=k&&(h=!0,c[l]=!0);if(!h)return b;e=b.Pa();for(l=0;l<g;l++)c[l]||e.Pd(b,l,l+1);return e};c.UI=function(b,c,k,g,d){var e=new a.Vj;b.Fp(e);var n=new a.i;c.o(n);e.Db(n);e.P(.1*e.aa(),.1*e.ba());n=new a.Ka;n.Wc(e,!1);1736==k?n.add(c,!0):n.Wc(c,!0);return a.$r.local().$(b,n,g,d)};c.V=null;return c}(a.Me);a.Zr=g})(w||(w={}));(function(a){var g=function(){function g(c,b,e,a){this.Fq=null==
b;this.ua=-1;this.ne=c;this.fx=e;this.EP=b.next();this.Yb=a}g.prototype.next=function(){if(this.Fq)return null;var c;return null!=(c=this.ne.next())?(this.ua=this.ne.ya(),a.Zr.ll(c,this.EP,this.fx,this.Yb)):null};g.prototype.ya=function(){return this.ua};return g}();a.YH=g})(w||(w={}));(function(a){var g=function(){function c(b){this.oe=b;this.Ii=new a.i;this.Ii.Ja();this.Ng=new a.i;this.Ng.Ja()}c.prototype.Pr=function(){var b;b=this.Ii.v;this.Ii.v=this.Ng.v;this.Ng.v=b;b=this.Ii.B;this.Ii.B=this.Ng.B;
this.Ng.B=b;b=this.Ii.C;this.Ii.C=this.Ng.C;this.Ng.C=b;b=this.Ii.G;this.Ii.G=this.Ng.G;this.Ng.G=b};c.prototype.wM=function(b,c){var e=!this.Ii.jc(this.Ng);if(a.T.Kc(b.D())&&a.T.Kc(c.D())){if(b.F()>c.F())return this.gB(b,c,e);this.Pr();e=this.gB(c,b,e);this.Pr();return e}if(550==b.D()&&a.T.Kc(c.D()))return e=this.hB(c,b,e),this.Pr(),e;if(550==c.D()&&a.T.Kc(b.D()))return this.hB(b,c,e);if(550==b.D()&&550==c.D()){if(b.F()>c.F())return this.iB(b,c);this.Pr();e=this.iB(c,b);this.Pr();return e}return 0};
c.prototype.gB=function(b,c,k){var e=b.Ca(),g=c.Ca(),d=new a.i,f=new a.i,h=1.7976931348623157E308;if(!k&&this.iT(b,c,e,g))return 0;for(;e.kb();)for(;e.La();)if(b=e.ia(),b.o(d),!(d.Ou(this.Ng)>h)){for(;g.kb();)for(;g.La();)if(c=g.ia(),c.o(f),d.Ou(f)<h&&(c=b.Fb(c,k),c*=c,c<h)){if(0==c)return 0;h=c}g.Lk()}return Math.sqrt(h)};c.prototype.hB=function(b,c,k){var e=b.Ca(),g=new a.i,d=1.7976931348623157E308,f=new a.b,h,l=c.F();for(k=!k&&1736==b.D();e.kb();)for(;e.La();){var m=e.ia();m.o(g);if(!(1<l&&g.Ou(this.Ng)>
d)){for(var p=0;p<l;p++){c.w(p,f);if(k&&0!=a.gd.he(b,f,0))return 0;h=m.Gd(f,!1);f.sub(m.Kb(h));h=f.Up();if(h<d){if(0==h)return 0;d=h}}k=!1}}return Math.sqrt(d)};c.prototype.iB=function(b,c){for(var e=1.7976931348623157E308,g=new a.b,d=new a.b,f,h=b.F(),l=c.F(),m=0;m<h;m++)if(b.w(m,g),!(1<l&&this.Ng.gG(g)>e))for(var p=0;p<l;p++)if(c.w(p,d),f=a.b.Zb(g,d),f<e){if(0==f)return 0;e=f}return Math.sqrt(e)};c.prototype.iT=function(b,c,k,g){if(1736==b.D()){for(;g.kb();)if(g.La()){var e=g.ia();if(0!=a.gd.he(b,
e.oc(),0))return!0}g.Lk()}if(1736==c.D()){for(;k.kb();)if(k.La()&&(b=k.ia(),0!=a.gd.he(c,b.oc(),0)))return!0;k.Lk()}return!1};c.prototype.il=function(b,c){if(b.s()||c.s())return NaN;b.o(this.Ii);c.o(this.Ng);return this.wM(b,c)};return c}(),d=function(c){function b(){c.apply(this,arguments)}K(b,c);b.prototype.$=function(b,c,d){if(null==b||null==c)throw a.g.N();if(b.s()||c.s())return NaN;var e,k;e=b.D();k=c.D();if(33==e){if(33==k)return a.b.Fb(b.w(),c.w());if(197==k)return d=new a.i,c.o(d),d.Fb(b.w());
e=new a.pe;e.add(b);b=e}else if(197==e){if(197==k)return k=new a.i,b.o(k),d=new a.i,c.o(d),d.Fb(k);e=new a.Ka;e.Wc(b,!1);b=e}33==k?(k=new a.pe,k.add(c),c=k):197==k&&(k=new a.Ka,k.Wc(c,!1),c=k);return(new g(d)).il(b,c)};b.local=function(){null===b.V&&(b.V=new b);return b.V};b.prototype.D=function(){return 14};b.V=null;return b}(a.Me);a.ZH=d})(w||(w={}));(function(a){var g=function(){function g(c,b,e,a){this.aE=c;this.fE=b;this.oe=a;this.HD=e}g.prototype.next=function(){var c=this.aE.next();return null==
c?null:this.yz(c)};g.prototype.ya=function(){return this.aE.ya()};g.prototype.yz=function(c){var b=c.D();if(a.T.Km(b))return c;if(197==b)return b=new a.Ka(c.description),b.Wc(c,!1),this.yz(b);if(c.s())return c;if(null==c)throw a.g.wa();for(var b=c.Pa(),e=new a.yb,k=0,g=c.ea();k<g;k++)this.mH(c,k,b,e);return b};g.prototype.mH=function(c,b,e,k){if(!(2>c.Ha(b))){var g=c.Ea(b),d=c.Dc(b)-1,f=c.mc(0),h=c.vc(b),l=new a.ga(0);l.xb(c.Ha(b)+1);var m=new a.ga(0);m.xb(c.Ha(b)+1);l.add(h?g:d);l.add(g);for(g=new a.b;1<
l.size;){var p=l.tc();l.af();var q=l.tc();c.w(p,g);k.ed(g);c.w(q,g);k.vd(g);q=this.jH(k,g,f,p,q,d);0<=q?(l.add(q),l.add(p)):m.add(p)}h||m.add(l.get(0));if(m.size==l.size)e.Zj(c,b,!0);else if(2<=m.size&&(!this.HD||2!=m.size||!(h||a.b.Fb(c.Fa(m.get(0)),c.Fa(m.get(1)))<=this.fE))){b=new a.Va;k=0;for(d=m.size;k<d;k++)c.Sd(m.get(k),b),0==k?e.df(b):e.lineTo(b);h&&(this.HD||2!=m.size||e.lineTo(b),e.ro())}}};g.prototype.jH=function(c,b,e,a,g,d){var k=g-1;g<=a&&(k=d);d=g=-1;for(a+=1;a<=k;a++){e.ec(2*a,b);
var n=b.x,f=b.y;c.Kb(c.Gd(b,!1),b);b.x-=n;b.y-=f;n=b.length();n>this.fE&&n>d&&(g=a,d=n)}return g};return g}();a.$H=g})(w||(w={}));(function(a){var g=function(g){function c(){g.apply(this,arguments)}K(c,g);c.prototype.D=function(){return 29};c.prototype.$=function(b,c,k,g){return b instanceof a.T?(b=new a.Pc(b),this.$(b,c,k,g).next()):new a.$H(b,c,k,g)};c.local=function(){null===c.V&&(c.V=new c);return c.V};c.V=null;return c}(a.Me);a.Sz=g})(w||(w={}));(function(a){var g=function(g){function c(){g.apply(this,
arguments)}K(c,g);c.prototype.D=function(){return 21};c.local=function(){null===c.V&&(c.V=new c);return c.V};c.prototype.$=function(b,c,k,g,d,f,h,l){return b instanceof a.T?(l=new a.Pc(b),this.$(l,c,k,[g],d,f,!1,h).next()):!0===h?(k=new a.Uz(b,c,k,g,d,!1,!1,l),a.wi.local().$(k,c,l)):new a.Uz(b,c,k,g,d,!1,!1,l)};c.V=null;return c}(a.Me);a.Tz=g})(w||(w={}));(function(a){var g=function(){function g(c,b,e,k,g,d,f,h){if(d)throw a.g.qe();if(null==b)throw a.g.N();this.ua=-1;this.Xq=c;this.cg=b;this.ke=e;
this.Oq=k;this.Rm=g;this.Vm=-1;this.Yb=h;this.CP=new a.i;this.CP.Ja()}g.prototype.next=function(){for(var c;null!=(c=this.Xq.next());)return this.ua=this.Xq.ya(),this.Vm+1<this.Oq.length&&this.Vm++,this.oN(c,this.Oq[this.Vm]);return null};g.prototype.ya=function(){return this.ua};g.prototype.oN=function(c,b){return a.pH.buffer(c,this.cg,this.ke,b,this.Rm,this.Yb)};return g}();a.Uz=g})(w||(w={}));(function(a){var g=function(g){function c(){g.apply(this,arguments)}K(c,g);c.prototype.D=function(){return 24};
c.local=function(){null===c.V&&(c.V=new c);return c.V};c.prototype.$=function(b,c,k){if(null==c)throw a.g.N();if(b.s()||1>b.fb())return 0;if(4==k)throw a.g.qe();var e=a.Ya.Em(c),g=a.Ya.ft(e),d=a.Ya.Ts(e),g=g*(2-g),f=e.Se().Dj,h=b.D(),l;1736==h||197==h?l=b.Rf():a.T.Lc(h)?(l=new a.Xa(b.description),l.Bc(b,!0)):l=b;if(0==e.lc(c)){if(a.Ya.Qo(c)){l=a.gh.qo(l,c);1607==h&&l==b&&(l=a.T.Yj(b));b=new a.Nd;a.Ya.Fm(c).wu(b);for(var h=0,m=l.F();h<m;h++){var p=l.Fa(h);p.x=a.gh.pu(p.x,b);l.ic(h,p)}}b=l.Pa();l=a.gh.ZQ(c,
e,l,b)?b:a.Ya.Wl(l,c,e)}return this.yM(l,k,d,g,f)};c.prototype.yM=function(b,c,k,g,d){var e=new a.ca(0),n=0;for(b=b.Ca();b.kb();)for(;b.La();){var f=b.ia(),u=f.Mb(),f=f.oc();u.scale(d);f.scale(d);a.zb.Rd(k,g,u.x,u.y,f.x,f.y,e,null,null,c);n+=e.l}return n};c.V=null;return c}(a.Me);a.cI=g})(w||(w={}));(function(a){var g=function(g){function c(){g.apply(this,arguments)}K(c,g);c.prototype.D=function(){return 18};c.local=function(){null===c.V&&(c.V=new c);return c.V};c.prototype.$=function(b,c,k,g,d){return b instanceof
a.T?(b=new a.Pc(b),this.$(b,c,k,g,d).next()):new a.bI(b,k,g,c,-1,-1,d)};c.V=null;return c}(a.Me);a.aI=g})(w||(w={}));(function(a){var g=function(){function g(c,b,e,k,g,d){if(0<d)throw a.g.qe();if(4!=e&&0<g)throw a.g.qe();if(null==b)throw a.g.N();this.ua=-1;this.Xq=c;this.cg=b;this.ke=e;this.IP=k;this.HP=g}g.prototype.next=function(){for(var c;null!=(c=this.Xq.next());)return this.ua=this.Xq.ya(),this.hw(c);return null};g.prototype.ya=function(){return this.ua};g.prototype.hw=function(c){return a.ui.oq(c,
this.cg,this.ke,this.IP,this.HP,this.Yb)};return g}();a.bI=g})(w||(w={}));(function(a){(function(a){a[a.Unknown=0]="Unknown";a[a.Contains=1]="Contains";a[a.Within=2]="Within";a[a.Equals=3]="Equals";a[a.Disjoint=4]="Disjoint";a[a.Touches=8]="Touches";a[a.Crosses=16]="Crosses";a[a.Overlaps=32]="Overlaps";a[a.NoThisRelation=64]="NoThisRelation";a[a.Intersects=1073741824]="Intersects";a[a.IntersectsOrDisjoint=1073741828]="IntersectsOrDisjoint"})(a.xH||(a.xH={}));var g=function(){function g(){}g.lU=function(c,
b,e,k){if(b.s()||c.s())return 4;var d=c.D(),f=b.D(),h;a.T.Lc(d)&&(c=h=new a.Xa(c.description),h.Bc(c,!0));a.T.Lc(f)&&(b=h=new a.Xa(b.description),h.Bc(b,!0));switch(d){case 33:switch(f){case 33:return g.sO(c,b,e);case 197:return g.Id(g.BG(b,c,e));case 550:return g.Id(g.HG(b,c,e));case 1607:return g.Id(g.Az(b,c,e,k));case 1736:return g.Id(g.pz(b,c,e))}throw a.g.wa();case 197:switch(f){case 33:return g.BG(c,b,e);case 197:return g.fK(c,b,e);case 550:return g.Id(g.DG(b,c,e,k));case 1607:return g.Id(g.vz(b,
c));case 1736:return g.Id(g.lz(b,c))}throw a.g.wa();case 550:switch(f){case 33:return g.HG(c,b,e);case 197:return g.DG(c,b,e,k);case 550:return g.FG(c,b,e,k);case 1607:return g.Id(g.xz(b,c));case 1736:return g.Id(g.nz(b,c))}throw a.g.wa();case 1607:switch(f){case 33:return g.Az(c,b,e,k);case 197:return g.vz(c,b);case 550:return g.xz(c,b);case 1607:return g.iQ(c,b);case 1736:return g.Id(g.rz(b,c))}throw a.g.wa();case 1736:switch(f){case 33:return g.pz(c,b,e);case 197:return g.lz(c,b);case 550:return g.nz(c,
b);case 1607:return g.rz(c,b);case 1736:return g.oP(c,b)}throw a.g.wa();default:throw a.g.wa();}};g.sO=function(c,b,e){c=c.w();b=b.w();return g.jz(c,b,e)};g.jz=function(c,b,e){c.sub(b);return c.Up()<=e*e?3:4};g.BG=function(c,b,e){var k=new a.i;c.o(k);c=b.w();return g.ZL(k,c,e)};g.ZL=function(c,b,e){c.P(-e,-e);if(c.contains(b))return 1;c.P(e,e);return c.contains(b)?8:4};g.uM=function(c,b,e){return b.contains(e)?1:c.contains(e)?8:4};g.fK=function(c,b,e){var k=new a.i;c.o(k);c=new a.i;b.o(c);return g.MK(k,
c,e)};g.MK=function(c,b,e){var a=0;c.contains(b)&&(a|=1);b.contains(c)&&(a|=2);if(0!=a)return a;c.P(-e,-e);b.P(-e,-e);if(c.jc(b))return a=c,a.P(e,e),a=a.contains(b)?1:0,b.P(e,e),a|=b.contains(c)?2:0,0!=a?a:32;a=c;a.P(e,e);b.P(e,e);return a.jc(b)?8:4};g.HG=function(c,b,e){b=b.w();return g.JG(c,b,e)};g.JG=function(c,b,e){for(var a=0,d=c.F();a<d;a++){var f;f=c.Fa(a);f=g.jz(f,b,e);if(4!=f)return 0!=(f&2)&&1!=d?1:f}return 4};g.DG=function(c,b,e,k){var d=new a.i;b.o(d);return g.eN(c,d,e,k)};g.eN=function(c,
b,e,a){b.P(-e,-e);b.P(e,e);for(var k=e=0,d=c.F();k<d;k++){var f;f=c.Fa(k);f=g.Id(g.uM(b,b,f));if(4!=f&&(e|=f,4==a))return 1073741824}return 0==e?4:2==e?e:32};g.FG=function(c,b,e,a){for(var k=0,d=0,f=b.F();d<f;d++){var h;h=b.Fa(d);h=g.JG(c,h,e);if(4!=h&&(k++,4==a))return 1073741824}return 0<k?k==b.F()?3==a?(h=g.FG(b,c,e,1),1==h?3:0):1:32:0};g.Az=function(c,b,e,a){b=b.w();return g.XP(c,b,e,a)};g.GM=function(c,b){var e=null;c=c.pb;null!=c&&(e=c.hi);if(null!=e){e=e.Kk(b.x,b.y);if(0==e)return 4;if(1==
e)return 1}else return-1;return 0};g.XP=function(c,b,e,k){if(0==(k&1073741839))return 64;var d=g.GM(c,b);if(0<d)return d;e*=e;for(d=c.Ca();d.kb();){var f=d.Qa;if(!c.vc(f)){var h=c.Ha(f),f=c.Ea(f);if(0==h)continue;if(a.b.Zb(c.Fa(f),b)<=e||1<h&&a.b.Zb(c.Fa(f+h-1),b)<=e)return 8}if(8!=k)for(;d.La();)if(h=d.ia(),h=h.Kb(h.Gd(b,!1)),a.b.Zb(h,b)<=e)return 0!=(k&1073741828)?1073741824:1}return 0!=(k&1073741828)?4:64};g.vz=function(c,b){var e=new a.i;b.o(e);return g.rP(c,e)};g.rP=function(c,b){c=g.ao(c,b);
return 0<c?c:0};g.ao=function(c,b){c=c.pb;if(null!=c)c=c.hi;else return-1;if(null!=c){c=c.Dn(b);if(0==c)return 4;if(1==c)return 1}else return-1;return 0};g.xz=function(c,b){var e=new a.i;b.o(e);e=g.ao(c,e);return 0<e?e:0};g.fs=function(c,b){var e=new a.i;b.o(e);e=g.ao(c,e);return 0<e?e:-1==e&&(e=new a.i,c.o(e),e=g.ao(b,e),0<e)?g.Id(e):0};g.iQ=function(c,b){c=g.fs(c,b);return 0<c?c:0};g.pz=function(c,b,e){b=b.w();return g.lP(c,b,e)};g.lP=function(c,b,e){c=a.gd.he(c,b,e);if(0==c)return 4;if(1==c)return 1;
if(2==c)return 8;throw a.g.wa();};g.lz=function(c,b){var e=new a.i;b.o(e);return g.uO(c,e)};g.uO=function(c,b){c=g.ao(c,b);return 0<c?c:0};g.nz=function(c,b){c=g.fs(c,b);return 0<c?c:0};g.rz=function(c,b){c=g.fs(c,b);return 0<c?c:0};g.oP=function(c,b){c=g.fs(c,b);return 0<c?c:0};g.iR=function(c,b){var e=c.D(),k=b.D(),g;if(a.T.Th(e)&&(g=c.pb,null!=g&&(g=g.hi,null!=g))){if(33==k){var d=b.w();g=g.Kk(d.x,d.y)}else d=new a.i,b.o(d),g=g.Dn(d);if(1==g)return 1;if(0==g)return 4}if(a.T.Th(k)&&(g=b.pb,null!=
g&&(g=g.hi,null!=g))){33==e?(e=c.w(),g=g.Kk(e.x,e.y)):(e=new a.i,c.o(e),g=g.Dn(e));if(1==g)return 2;if(0==g)return 4}return 0};g.Id=function(c){0!=(c&1)&&(c=c&-2|2);0!=(c&2)&&(c=c&-3|1);return c};return g}();a.dI=g})(w||(w={}));(function(a){var g=function(g){function c(){g.apply(this,arguments)}K(c,g);c.local=function(){null===c.V&&(c.V=new c);return c.V};c.prototype.D=function(){return 15};c.prototype.$=function(b,c,k,g,d){return b instanceof a.T?(b=new a.Pc(b),c=new a.Pc(c),this.$(b,c,k,g,d).next()):
void 0===d?new a.Vz(b,c,k,g,-1):new a.Vz(b,c,k,g,d)};c.V=null;return c}(a.Me);a.$r=g})(w||(w={}));(function(a){var g=function(){function g(c,b,e,k,g){this.Fq=null==b;this.ua=-1;this.ne=c;this.cg=e;this.Ce=b.next();this.Ji=this.Ce.D();this.Yb=k;this.Xh=g;if(-1!=this.Xh&&(0>=this.Xh||7<this.Xh))throw a.g.N("bad dimension mask");}g.prototype.next=function(){if(this.Fq)return null;var c;if(null!=this.du){c=this.du.next();if(null!=c)return c;this.du=null}for(;null!=(c=this.ne.next());){this.ua=this.ne.ya();
if(-1==this.Xh)return c=this.Ga(c);this.du=this.PO(c);return c=this.du.next()}return null};g.prototype.ya=function(){return this.ua};g.prototype.Ga=function(c){var b=this.uG(c);if(null!=b)return b;var b=a.Ia.$s(this.Ce,c),e=a.Ia.zd(this.cg,b,!0),b=new a.i;this.Ce.o(b);var k=new a.i;c.o(k);b.P(2*e,2*e);b.Ga(k);b.P(100*e,100*e);e=a.Ed.clip(this.Ce,b,0,0);c=a.Ed.clip(c,b,0,0);return a.Of.mt(c,e,this.cg,this.Yb)};g.prototype.SE=function(c,b,e){var k=0;if(0!=(b&1))null==e[0]&&(e[0]=new a.pe(c)),k++;else for(var g=
0;g<e.length-1;g++)e[g]=e[g+1];if(0!=(b&2))null==e[k]&&(e[k]=new a.Xa(c)),k++;else for(g=k;g<e.length-1;g++)e[g]=e[g+1];if(0!=(b&4))null==e[k]&&(e[k]=new a.Ka(c)),k++;else for(g=k;g<e.length-1;g++)e[g]=e[g+1];if(3!=k){c=[];for(g=0;g<k;g++)c[g]=e[g];return new a.Pc(c)}return new a.Pc(e)};g.prototype.PO=function(c){var b=this.uG(c);if(null!=b){var e=[null,null,null];e[b.fb()]=b;return this.SE(c.description,this.Xh,e)}b=a.Ia.$s(this.Ce,c);e=a.Ia.zd(this.cg,b,!0);b=new a.i;this.Ce.o(b);b.P(2*e,2*e);var k=
new a.i;c.o(k);b.Ga(k);b.P(100*e,100*e);e=a.Ed.clip(this.Ce,b,0,0);b=a.Ed.clip(c,b,0,0);e=a.Of.Uw(b,e,this.cg,this.Yb);return this.SE(c.description,this.Xh,e)};g.prototype.uG=function(c){var b=a.Ia.$s(c,this.Ce),e=a.Ia.zd(this.cg,b,!1),b=c.D(),k=c.s(),d=this.Ce.s(),d=k||d;if(!d){d=new a.i;c.o(d);var f=new a.i;this.Ce.o(f);f.P(2*e,2*e);d=!d.jc(f)}if(!d)if(f=a.dI.iR(this.Ce,c),4==f)d=!0;else{if(0!=(f&2))return this.Ce;if(0!=(f&1))return c}if(d)return e=a.T.ve(b),d=a.T.ve(this.Ji),e<d?g.V(c,k):e>d?this.kF():
0==e?550==b&&33==this.Ji?this.kF():g.V(c,k):g.V(c,k);if((-1==this.Xh||4==this.Xh)&&197==b&&197==this.Ji)return e=this.Ce,b=new a.i,c.o(b),k=new a.i,e.o(k),b.Ga(k),e=new a.Vj,c.copyTo(e),e.Cu(b),e;if(197==b&&0==a.T.ve(this.Ji)||197==this.Ji&&0==a.T.ve(b))return k=197==b?c:this.Ce,c=197==b?this.Ce:c,b=new a.i,k.o(b),a.Ed.clip(c,b,e,0);if(0==a.T.ve(b)&&0<a.T.ve(this.Ji)||0<a.T.ve(b)&&0==a.T.ve(this.Ji)){e=a.Ia.Cg(this.cg,c,!1);if(550==b||33==b)return a.Of.jD(c,this.Ce,e);if(550==this.Ji||33==this.Ji)return a.Of.jD(this.Ce,
c,e);throw a.g.wa();}return-1!=this.Xh&&2!=this.Xh||1607!=b||1736!=this.Ji?-1!=this.Xh&&2!=this.Xh||1736!=b||1607!=this.Ji?null:this.rG(this.Ce,c):this.rG(c,this.Ce)};g.prototype.rG=function(c,b){var e=c,k=b,g=a.Ia.Cg(this.cg,b,!1),d=new a.i;k.o(d);var f=new a.i;e.o(f);f.P(2*g,2*g);d.Ga(f);d.P(10*g,10*g);var e=c=a.Ed.clip(c,d,0,0),f=new a.ga(0),h=-1,l=k.pb;if(null!=l){var m=l.hi;if(null!=m){h=0;f.xb(e.F()+e.ea());for(var p=new a.i,q=e.Ca();q.kb();)for(;q.La();){q.ia().o(p);var r=m.Dn(p);1==r?f.add(1):
0==r?f.add(0):(f.add(-1),h++)}}}5<b.F()&&(k=b=a.Ed.clip(b,d,0,0),l=k.pb);0>h&&(h=e.Iw());d=e.F()+k.F();if(h*k.F()>Math.log(d)*d*4)return null;d=null;h=k.Ca();null!=l&&null!=l.Ab&&(d=l.Ab);null==d&&20<k.F()&&(d=a.Ia.nB(k));k=c.Pa();l=null;m=e.Ca();p=[0,0,0,0,0,0,0,0,0];q=new a.qd(0);r=new a.Ag;c=-1;for(var v=0,x=0,z=0<f.size,y=-1;m.kb();){var y=m.Qa,w=0;c=-1;for(v=0;m.La();){var C=z?a.I.truncate(f.get(x)):-1;x++;var t=m.ia();if(0>C){if(null!=d)for(null==l?l=d.KN(t,g):l.Fn(t,g),C=l.next();-1!=C;C=l.next()){h.Sb(d.da(C));
for(var C=h.ia(),D=t.Ga(C,null,p,null,g),C=0;C<D;C++)q.add(p[C])}else for(h.Lk();h.kb();)for(;h.La();)for(C=h.ia(),D=t.Ga(C,null,p,null,g),C=0;C<D;C++)q.add(p[C]);if(0<q.size){q.xd(0,q.size,function(b,c){return b-c});var E=0;q.add(1);for(var D=-1,C=0,F=q.size;C<F;C++){var H=q.get(C);if(H!=E){var K=!1;0!=E||1!=H?(t.Bi(E,H,r),E=r.get()):(E=t,K=!0);if(2<=w){k.ys(e,y,c,v,3==w);if(1!=this.UA(b,E.Mb(),g)&&1!=this.VA(b,E,g))return null;k.Bc(E,!1);w=1;v=0}else switch(D=this.VA(b,E,g),D){case 1:K?2>w?(c=m.Jb()-
e.Ea(y),v=1,w=0==w?3:2):v++:(k.Bc(E,0==w),w=1);break;case 0:w=0;c=-1;v=0;break;default:return null}E=H}}}else{C=this.UA(b,t.Mb(),g);if(0>C)return null;1==C?(2>w&&(c=m.Jb()-e.Ea(y),w=0==w?3:2),v++):(c=-1,v=0)}q.clear(!1)}else 0!=C&&1==C&&(0==w?(w=3,c=m.Jb()-e.Ea(y)):1==w?(w=2,c=m.Jb()-e.Ea(y)):v++)}2<=w&&(k.ys(e,y,c,v,3==w),c=-1)}return k};g.prototype.UA=function(c,b,e){return a.ff.xl(c,b,e)};g.prototype.VA=function(c,b,e){var k=b.Mb();b=b.oc();var g=a.ff.xl(c,k,e),d=a.ff.xl(c,b,e);if(1==g&&0==d||
0==g&&1==d)return-1;if(0==g||0==d)return 0;if(1==g||1==d)return 1;g=new a.b;g.add(k,b);g.scale(.5);c=a.ff.xl(c,g,e);return 0==c?0:1==c?1:-1};g.V=function(c,b){return b?c:c.Pa()};g.prototype.kF=function(){null==this.$D&&(this.$D=this.Ce.Pa());return this.$D};return g}();a.Vz=g})(w||(w={}));(function(a){var g=function(g){function c(){g.apply(this,arguments)}K(c,g);c.prototype.D=function(){return 28};c.local=function(){null===c.V&&(c.V=new c);return c.V};c.prototype.$=function(b,c,k,g,d,f,h){return b instanceof
a.T?(b=new a.Pc(b),this.$(b,c,k,g,d,f,h).next()):new a.eI(b,c,k,g,d,f,h)};c.V=null;return c}(a.Me);a.Wz=g})(w||(w={}));(function(a){var g=function(){function g(c,b,e,a,g,d,f){this.ua=-1;this.ne=c;this.Pi=b;this.Da=e;this.bi=a;this.Dx=g;this.XD=d;this.oe=f}g.prototype.next=function(){var c=this.ne.next();return null!=c?(this.ua=this.ne.ya(),this.RH(c)):null};g.prototype.ya=function(){return this.ua};g.prototype.RH=function(c){var b;b=0>=this.XD?a.Ia.Cg(this.Pi,c,!1):this.XD;return a.XG.$(c,this.Da,
this.bi,this.Dx,b,this.oe)};return g}();a.eI=g})(w||(w={}));(function(a){var g=function(){function c(){}c.prototype.reset=function(){this.Pg=this.Fj=-1;this.Hq=this.Uo=!1};c.prototype.QM=function(b,c,a){for(b.Sb(c,a);b.La();){var e=b.ia(),e=e.$b();if(0!=e)return b.Jb()}for(b.Sb(c,a);b.Ow();)if(e=b.oi(),e=e.$b(),0!=e)return b.Jb();return-1};c.prototype.RM=function(b,c){for(b.Sb(c,-1);b.Ow();)if(0!=b.oi().$b())return b.Jb();return-1};c.prototype.PM=function(b,c){b.Sb(c,-1);for(b.ia();b.La();)if(0!=
b.ia().$b())return b.Jb();return-1};c.prototype.OM=function(b,c,k,g){this.Fj=this.QM(c,k,g);if(-1!=this.Fj){c.Sb(this.Fj,-1);var e=c.ia(),d=e.Kb(e.Gd(b,!1));k=a.b.Zb(d,b);g=new a.b;g.J(d);g.sub(e.Mb());d=new a.b;d.J(b);d.sub(e.Mb());this.Uo=0>g.Ai(d);this.Pg=this.PM(c,this.Fj);if(-1!=this.Pg){c.Sb(this.Pg,-1);var e=c.ia(),n=e.Gd(b,!1),n=e.Kb(n),f=a.b.Zb(n,b);f>k?this.Pg=-1:(g.J(n),g.sub(e.Mb()),d.J(b),d.sub(e.Mb()),this.Hq=0>g.Ai(d))}-1==this.Pg&&(this.Pg=this.RM(c,this.Fj),-1!=this.Pg&&(c.Sb(this.Pg,
-1),e=c.ia(),n=e.Gd(b,!1),n=e.Kb(n),f=a.b.Zb(n,b),f>k?this.Pg=-1:(g.J(n),g.sub(e.Mb()),d.J(b),d.sub(e.Mb()),this.Hq=0>g.Ai(d),b=this.Fj,this.Fj=this.Pg,this.Pg=b,b=this.Uo,this.Uo=this.Hq,this.Hq=b)))}};c.prototype.FK=function(b,c,a,g,d){a=a.Ca();this.OM(b,a,g,d);if(-1!=this.Fj&&-1==this.Pg)return this.Uo;if(-1!=this.Fj&&-1!=this.Pg){if(this.Uo==this.Hq)return this.Uo;a.Sb(this.Fj,-1);b=a.ia().Pf(1);a.Sb(this.Pg,-1);c=a.ia().Pf(0);return 0<=b.Ai(c)?!0:!1}return c};return c}(),d=function(c){function b(){c.apply(this,
arguments)}K(b,c);b.local=function(){null===b.V&&(b.V=new b);return b.V};b.prototype.D=function(){return 3};b.prototype.zw=function(b,c,g,d){void 0===d&&(d=!1);if(b.s())return new a.dl;c=c.w();var e=b,k=b.D();197==k&&(e=new a.Ka,e.Wc(b,!1),k=1736);switch(k){case 33:return this.OE(e,c);case 550:return this.BE(e,c);case 1607:case 1736:return this.dQ(e,c,g,d);default:throw a.g.ra("not implemented");}};b.prototype.Aw=function(b,c){if(b.s())return new a.dl;c=c.w();var e=b,k=b.D();197==k&&(e=new a.Ka,e.Wc(b,
!1),k=1736);switch(k){case 33:return this.OE(e,c);case 550:case 1607:case 1736:return this.BE(e,c);default:throw a.g.ra("not implemented");}};b.prototype.Bw=function(b,c,g,d){if(0>d)throw a.g.N();if(b.s())return[];c=c.w();var e=b,k=b.D();197==k&&(e=new a.Ka,e.Wc(b,!1),k=1736);switch(k){case 33:return this.IQ(e,c,g,d);case 550:case 1607:case 1736:return this.gQ(e,c,g,d);default:throw a.g.ra("not implemented");}};b.prototype.dQ=function(b,c,d,f){if(1736==b.D()&&d&&(d=new a.i,b.o(d),d=a.Ia.zd(null,d,
!1),0!=(f?a.gd.he(b,c,0):a.gd.he(b,c,d)))){var e=new a.dl(c,0,0);f&&e.UF(!0);return e}for(var k=b.Ca(),e=new a.b,n=d=-1,h=1.7976931348623157E308,u=0;k.kb();)for(;k.La();){var l=k.ia(),l=l.Kb(l.Gd(c,!1)),m=a.b.Zb(l,c);m<h?(u=1,e=l,d=k.Jb(),n=k.Qa,h=m):m==h&&u++}e=new a.dl(e,d,Math.sqrt(h));f&&(k.Sb(d,n),l=k.ia(),f=0>a.b.yn(c,l.Mb(),l.oc()),1<u&&(u=new g,u.reset(),f=u.FK(c,f,b,d,n)),e.UF(f));return e};b.prototype.OE=function(b,c){b=b.w();c=a.b.Fb(b,c);return new a.dl(b,0,c)};b.prototype.BE=function(b,
c){var e=b.mc(0);b=b.F();for(var k=0,g=0,d=0,f=1.7976931348623157E308,h=0;h<b;h++){var l=new a.b;e.ec(2*h,l);var m=a.b.Zb(l,c);m<f&&(g=l.x,d=l.y,k=h,f=m)}e=new a.dl;e.tv(g,d,k,Math.sqrt(f));return e};b.prototype.IQ=function(b,c,g,d){if(0==d)return g=[];g*=g;b=b.w();c=a.b.Zb(b,c);c<=g?(g=[],d=new a.dl,d.tv(b.x,b.y,0,Math.sqrt(c)),g[0]=d):g=[];return g};b.prototype.gQ=function(b,c,g,d){if(0==d)return d=[];var e=b.mc(0),k=b.F();b=[];var n=0;g*=g;for(var f=0;f<k;f++){var h=e.read(2*f),u=e.read(2*f+1),
l=c.x-h,m=c.y-u,l=l*l+m*m;l<=g&&(m=new a.dl,m.tv(h,u,f,Math.sqrt(l)),n++,b.push(m))}c=b.length;b.sort(function(b,c){return b.Da<c.Da?-1:b.Da==c.Da?0:1});if(d>=c)return b.slice(0);b.length=d;return b.slice(0)};b.V=null;return b}(a.Me);a.bv=d})(w||(w={}));(function(a){var g=function(g){function c(){g.apply(this,arguments)}K(c,g);c.prototype.D=function(){return 4};c.prototype.$=function(b,c,k,g,d){return a.el.py(b,c,k,g,d)};c.local=function(){null===c.V&&(c.V=new c);return c.V};c.V=null;return c}(a.Me);
a.fI=g})(w||(w={}));(function(a){var g=function(g){function c(){g.apply(this,arguments)}K(c,g);c.prototype.D=function(){return 33};c.prototype.$=function(b,c,k,g,d){return 1073741824===b?!a.hd.qy(c,k,g,4,d):a.hd.qy(c,k,g,b,d)};c.local=function(){null===c.V&&(c.V=new c);return c.V};c.V=null;return c}(a.Me);a.bl=g})(w||(w={}));(function(a){var g=function(){function g(c,b,e,k){this.oe=k;this.yP=e;this.ua=-1;if(null==c)throw a.g.N();this.wk=c;this.Pi=b}g.prototype.next=function(){var c;return null!=(c=
this.wk.next())?(this.ua=this.wk.ya(),this.Qy(c)):null};g.prototype.ya=function(){return this.ua};g.prototype.Qy=function(c){if(null==c)throw a.g.N();return a.cv.cG(c,this.Pi,this.yP,this.oe)};return g}();a.gI=g})(w||(w={}));(function(a){var g=function(g){function c(){g.apply(this,arguments)}K(c,g);c.prototype.D=function(){return 26};c.prototype.$=function(b,c,k,g){return b instanceof a.T?(b=new a.Pc(b),this.$(b,c,k,g).next()):new a.gI(b,c,k,g)};c.prototype.Ro=function(b,c,k,g,d){return 0<(void 0!==
g?a.cv.Ro(b,c,k,g,d):a.cv.Ro(b,c,!1,null,k))};c.local=function(){null===c.V&&(c.V=new c);return c.V};c.V=null;return c}(a.Me);a.as=g})(w||(w={}));(function(a){var g=function(){function b(){this.hp=0}b.prototype.hS=function(b){this.hp&=-2;this.hp|=b?1:0};b.prototype.sl=function(){return 0!=(this.hp&1)};b.prototype.LC=function(){return this.sl()?0:1};return b}();a.AT=g;var d=function(){return function(){}}(),c=function(){return function(b,c,e,a){this.x=b;this.y=c;this.Sh=e;this.yl=a}}(),b=function(){function b(b){this.me=
b}b.prototype.compare=function(b,c,e){b=b.da(e);c=this.me.$e.read(2*c);b=this.me.$e.read(2*b);c-=b;return 0>c?-1:0<c?1:0};return b}(),e=function(){function b(b){this.me=b}b.prototype.compare=function(b,c,e){c=this.me.$a[c];b=this.me.$a[b.da(e)];var a=c.sl(),k=b.sl();e=c.Zd.xe(this.me.wn,0);var g=b.Zd.xe(this.me.wn,0);e==g&&(e=Math.min(a?c.Zd.ja:c.Zd.ha,k?b.Zd.ja:b.Zd.ha),a=.5*(e-this.me.wn)+this.me.wn,a==this.me.wn&&(a=e),e=c.Zd.xe(a,0),g=b.Zd.xe(a,0));return e<g?-1:e>g?1:0};return b}(),k=function(){function b(b,
c){this.VE=new a.b;this.parent=b;this.mO=c}b.prototype.Zp=function(b,c,e){var a=this.parent,k=this.mO;e.xd(b,c,function(b,c){return a.kj(b,c,k)})};b.prototype.Mo=function(b){b=this.parent.xh.get(b);this.parent.$e.ec(2*(b>>1),this.VE);return this.VE.y+(0!=(b&1)?this.parent.Ri:-this.parent.Ri)};return b}(),n=function(){function n(b,c,e,k,g){this.SD=b.description;this.U=b;this.sg=c;this.Ri=a.Ia.Cg(this.sg,b,!1);this.pn=a.Ia.Cg(this.sg,b,!0);this.yx=e;this.wP=this.SD.Aa;this.$a=[];this.dn=[];this.Lg=
new a.$n;this.Za=new a.bj;this.Kd=new a.wd;this.GD=this.pk=g}n.prototype.Yw=function(){this.GD=!0;return(!a.T.Kc(this.U.D())||this.yB()&&this.xB(!1))&&this.OK()?a.T.Kc(this.U.D())?this.RK()?1607==this.U.D()?this.TK()?2:0:this.UK()?this.VK():0:0:2:0};n.prototype.Yy=function(b,c){var e=this.$e.read(2*b);b=this.$e.read(2*b+1);var k=this.$e.read(2*c);c=this.$e.read(2*c+1);var g=!a.Sr.Vw(e,b,k,c,this.Ri*this.Ri);return g?g:0==this.U.fb()?!1:e==k&&b==c};n.prototype.yB=function(){for(var b=this.U,c=b.Yf?
3:2,e=0,k=b.ea();e<k;e++)if(b.Ha(e)<c)return this.Kd=new a.wd(1,e,0),!1;return!0};n.prototype.xB=function(b){for(var c=this.U,e=c.Ca(),k=c.hasAttribute(1),c=k?a.Ia.rB(this.sg,c,!1):0;e.kb();)for(;e.La();){var g=e.ia();if(!(g.$b()>this.Ri)){if(b&&k){var d=g.gt(1,0),g=g.gt(1,0);if(Math.abs(g-d)>c)continue}this.Kd=new a.wd(2,e.Jb(),-1);return!1}}return!0};n.prototype.OK=function(){var c=this.U,e=null;a.T.Kc(this.U.D())&&(e=this.U);var g=(this.GD||this.pk)&&null!=e,d=c.F();this.$e=c.mc(0);this.xh=new a.ga(0);
this.xh.xb(2*d);this.wh=new a.ga(0);this.wh.xb(2*d);g&&(null==this.Bk&&(this.Bk=new a.ga(0)),this.Bk.xb(d));for(var n=c=0;n<d;n++)if(this.xh.add(2*n),this.xh.add(2*n+1),this.wh.add(2*n),this.wh.add(2*n+1),g){for(;n>=e.Dc(c);)c++;this.Bk.add(c)}(new a.Rr).sort(this.wh,0,2*d,new k(this,g));this.Za.clear();this.Za.Hn(new b(this));this.Za.de(d);e=0;for(d*=2;e<d;e++)if(g=this.wh.get(e),c=this.xh.get(g),g=c>>1,0==(c&1)){c=this.Za.addElement(g,-1);n=this.Za.ge(c);if(-1!=n&&!this.Yy(this.Za.da(n),g))return this.Kd=
new a.wd(3,g,this.Za.da(n)),!1;var f=this.Za.bb(c);if(-1!=f&&!this.Yy(this.Za.da(f),g))return this.Kd=new a.wd(3,g,this.Za.da(f)),!1}else if(c=this.Za.search(g,-1),n=this.Za.ge(c),f=this.Za.bb(c),this.Za.kd(c,-1),-1!=n&&-1!=f&&!this.Yy(this.Za.da(n),this.Za.da(f)))return this.Kd=new a.wd(3,this.Za.da(n),this.Za.da(f)),!1;return!0};n.prototype.RK=function(){return 10>this.U.F()?this.PK():this.QK()};n.prototype.QK=function(){var b=new a.fd;b.Eb(this.U);var c=new a.wd;return a.Zu.DE(!1,b,this.Ri,c,this.oe)?
(c.Fk=b.gb(c.Fk),c.Gk=b.gb(c.Gk),this.Kd.aq(c),!1):!0};n.prototype.PK=function(){for(var b=this.U,c=b.Ca(),b=b.Ca();c.kb();)for(;c.La();){var e=c.ia();if(!c.Jm()||!c.YO()){b.xR(c);do for(;b.La();){var k=b.ia(),k=e.fq(k,this.Ri,!0);if(0!=k)return this.Kd=new a.wd(2==k?5:4,c.Jb(),b.Jb()),!1}while(b.kb())}}return!0};n.prototype.UK=function(){var b=this.U;this.$a.length=0;this.dn.length=0;this.Hf=b.Ca();this.Hf.NR();var c=new a.ga(0);c.xb(10);for(var e=NaN,k=0,g=0,b=2*b.F();g<b;g++){var d=this.wh.get(g),
d=this.xh.get(d);if(0==(d&1)){var d=d>>1,n=this.$e.read(2*d),f=this.$e.read(2*d+1);if(0!=c.size&&(n!=e||f!=k)){if(!this.TE(c))return!1;null!=c&&c.clear(!1)}c.add(d);e=n;k=f}}return this.TE(c)?!0:!1};n.prototype.TK=function(){for(var b=this.U,c=Array(b.ea()),e=0,k=b.ea();e<k;e++)c[e]=b.Oo(e);var k=new d,g,n,f,h=new a.b,e=this.wh.get(0),e=this.xh.get(e),u=e>>1;this.$e.ec(2*u,h);e=this.Bk.get(u);g=c[e];n=b.Ea(e);f=b.Dc(e)-1;k.ak=u==n||u==f;k.Ev=this.pk?!g&&k.ak:k.ak;k.Sh=e;k.x=h.x;k.y=h.y;k.yl=u;for(var l=
new d,m=1,p=this.wh.size;m<p;m++)if(e=this.wh.get(m),e=this.xh.get(e),0==(e&1)){u=e>>1;this.$e.ec(2*u,h);e=this.Bk.get(u);e!=k.Sh&&(g=c[e],n=b.Ea(e),f=b.Dc(e)-1);var q,r=u==n||u==f;q=this.pk?!g&&k.ak:k.ak;l.x=h.x;l.y=h.y;l.Sh=e;l.yl=u;l.Ev=q;l.ak=r;if(l.x==k.x&&l.y==k.y)if(this.pk){if(!l.Ev||!k.Ev)if(l.Sh!=k.Sh||!l.ak&&!k.ak)return this.Kd=new a.wd(8,l.yl,k.yl),!1}else if(!l.ak||!k.ak)return this.Kd=new a.wd(5,l.yl,k.yl),!1;e=k;k=l;l=e}return!0};n.prototype.AB=function(){for(var b=this.U,e=[],k=-1,
g=!1,d=0,n=b.ea();d<n;d++)b.qt(d)&&(g=!1,k++,d<n-1&&(b.qt(d+1)||(g=!0))),e[d]=g?k:-1;var g=new a.b,d=this.wh.get(0),d=this.xh.get(d),f=d>>1;this.$e.ec(2*f,g);for(var d=this.Bk.get(f),k=new c(g.x,g.y,d,f,e[d]),b=[],h=1,n=this.wh.size;h<n;h++)if(d=this.wh.get(h),d=this.xh.get(d),0==(d&1)){f=d>>1;this.$e.ec(2*f,g);d=this.Bk.get(f);d=new c(g.x,g.y,d,f,e[d]);if(d.x==k.x&&d.y==k.y){if(d.Sh==k.Sh)return this.Kd=new a.wd(9,d.yl,k.yl),!1;0<=e[d.Sh]&&e[d.Sh]==e[k.Sh]&&(0!=b.length&&b[b.length-1]==k||b.push(k),
b.push(d))}k=d}if(0==b.length)return!0;d=new a.$n(!0);a.I.Ps(e,-1);g=-1;h=new a.b;h.Eh();k=0;for(n=b.length;k<n;k++){f=b[k];if(f.x!=h.x||f.y!=h.y)g=d.jh(0),h.x=f.x,h.y=f.y;var u=e[f.Sh];-1==u&&(u=d.jh(2),e[f.Sh]=u);d.addElement(u,g);d.addElement(g,u)}n=new a.ga(0);n.xb(10);for(k=d.Wd;-1!=k;k=d.Cw(k))if(b=d.DC(k),0==(b&1)&&0!=(b&2)){b=-1;n.add(k);for(n.add(-1);0<n.size;){g=n.tc();n.af();h=n.tc();n.af();f=d.DC(h);if(0!=(f&1)){b=0==(f&2)?g:h;break}d.$R(h,f|1);for(f=d.gc(h);-1!=f;f=d.bb(f))u=d.getData(f),
u!=g&&(n.add(u),n.add(h))}if(-1!=b){d=-1;k=0;for(n=e.length;k<n;k++)if(e[k]==b){d=k;break}this.Kd=new a.wd(10,d,-1);return!1}}return!0};n.prototype.VK=function(){var b=this.U;if(0>=b.Mh())return this.Kd=new a.wd(6,1==b.ea()?1:-1,-1),0;if(1==b.ea())return this.pk&&!this.AB()?0:2;this.gn=a.ga.Yc(b.ea(),0);this.Hx=a.ga.Yc(b.ea(),-1);for(var c=-1,k=0,g=0,d=b.ea();g<d;g++){var n=b.oo(g);this.gn.write(g,0>n?0:256);if(0<n)c=g,k=n;else{if(0==n)return this.Kd=new a.wd(6,g,-1),0;if(0>c||k<Math.abs(n))if(this.Kd=
new a.wd(7,g,-1),this.pk)return 0;this.Hx.write(g,c)}}this.kr=b.ea();this.Ll=new a.ga(0);this.Ll.xb(10);d=b.F();this.wn=NaN;b=new a.ga(0);b.xb(10);this.yp=a.ga.Yc(d,-1);this.hu=a.ga.Yc(d,-1);null!=this.Hi?this.Hi.clear(!1):this.Hi=new a.ga(0);this.Hi.xb(10);this.Za.clear();this.Za.Hn(new e(this));c=0;for(d*=2;0<this.kr&&c<d;c++)if(k=this.wh.get(c),k=this.xh.get(k),0==(k&1)){k>>=1;g=this.$e.read(2*k+1);if(g!=this.wn&&0!=b.size){if(!this.yr(b))return 0;null!=b&&b.clear(!1)}b.add(k);this.wn=g}return 0<
this.kr&&!this.yr(b)?0:this.pk?0==this.Kd.yh&&this.AB()?2:0:0==this.Kd.yh?2:1};n.prototype.TE=function(b){if(1==b.size)return!0;for(var c=0,e=b.size;c<e;c++){var k=b.get(c);this.Hf.Sb(k);var g=this.Hf.oi();this.$a.push(this.Ls(g,k,this.Hf.Qa,!0));this.Hf.ia();g=this.Hf.ia();this.$a.push(this.Ls(g,k,this.Hf.Qa,!1))}var d=this;this.$a.sort(function(b,c){return d.sM(b,c)});k=this.Lg.Wd;-1==k&&(k=this.Lg.jh(0));this.Lg.$l(this.$a.length);c=0;for(e=this.$a.length;c<e;c++)this.Lg.addElement(k,c);for(var c=
!0,n=e=-1;c;){c=!1;g=this.Lg.gc(k);if(-1==g)break;for(var f=this.Lg.bb(g);-1!=f;){e=this.Lg.getData(g);n=this.Lg.getData(f);e=this.$a[e].tn;n=this.$a[n].tn;if(e==n)if(c=!0,this.Lg.Jc(k,g),g=this.Lg.ge(f),f=this.Lg.Jc(k,f),-1==f||-1==g)break;else continue;g=f;f=this.Lg.bb(g)}}c=this.Lg.vq(k);this.Lg.CB(k);if(0<c)return this.Kd=new a.wd(5,e,n),!1;c=0;for(e=b.size;c<e;c++)this.my(this.$a[c]);this.$a.length=0;return!0};n.prototype.yr=function(b){for(var c=0,e=b.size;c<e;c++){var k=b.get(c),g=this.yp.read(k);
if(-1!=g){var d=this.Za.da(g);this.Hi.add(d);this.Za.kd(g,-1);this.my(this.$a[d]);this.$a[d]=null;this.yp.write(k,-1)}g=this.hu.read(k);-1!=g&&(d=this.Za.da(g),this.Hi.add(d),this.Za.kd(g,-1),this.my(this.$a[d]),this.$a[d]=null,this.hu.write(k,-1))}c=0;for(e=b.size;c<e;c++){k=b.get(c);this.Hf.Sb(k);g=this.Hf.oi();if(g.ja>g.ha){var n=this.Hf.Jb(),f=this.Ls(g,k,this.Hf.Qa,!0);0<this.Hi.size?(d=this.Hi.tc(),this.Hi.af(),this.$a[d]=f):(d=this.$a.length,this.$a.push(f));g=this.Za.addElement(d,-1);-1==
this.yp.read(n)?this.yp.write(n,g):this.hu.write(n,g);0==(this.gn.read(this.Hf.Qa)&3)&&this.Ll.add(g)}this.Hf.ia();g=this.Hf.ia();g.ja<g.ha&&(n=this.Hf.Bm(),f=this.Ls(g,k,this.Hf.Qa,!1),0<this.Hi.size?(d=this.Hi.tc(),this.Hi.af(),this.$a[d]=f):(d=this.$a.length,this.$a.push(f)),g=this.Za.addElement(d,-1),-1==this.yp.read(n)?this.yp.write(n,g):this.hu.write(n,g),0==(this.gn.read(this.Hf.Qa)&3)&&this.Ll.add(g))}c=0;for(e=this.Ll.size;c<e&&0<this.kr;c++)if(g=this.Ll.get(c),0==(this.gn.read(this.$a[this.Za.da(g)].Gx)&
3)){b=-1;for(var k=this.Za.ge(g),h=g,f=null,d=-1,u=0;-1!=k;){d=this.Za.da(k);f=this.$a[d];d=f.Gx;u=this.gn.read(d);if(0!=(u&3))break;h=k;k=this.Za.ge(k)}-1==k?(n=1,k=h):(b=1==(u&3)?d:this.Hx.read(d),n=0!=f.LC()?0:1,k=this.Za.bb(k));do{d=this.Za.da(k);f=this.$a[d];d=f.Gx;h=this.gn.read(d);if(0==(h&3)){if(n!=f.LC())return this.Kd=new a.wd(6,d,-1),!1;u=0==n||f.sl()?2:1;h=h&252|u;this.gn.write(d,u);if(2==u&&0==this.Kd.yh&&this.Hx.read(d)!=b&&(this.Kd=new a.wd(7,d,-1),this.pk))return!1;this.kr--;if(0==
this.kr)return!0}1==(h&3)&&(b=d);h=k;k=this.Za.bb(k);n=0!=n?0:1}while(h!=g)}null!=this.Ll?this.Ll.clear(!1):this.Ll=new a.ga(0);return!0};n.prototype.Ls=function(b,c,e,k){if(322==b.D())b=this.PL(b);else throw a.g.wa();b.tn=c;b.Gx=e;b.hp=0;b.hS(k);return b};n.prototype.PL=function(b){var c;0<this.dn.length?(c=this.dn[this.dn.length-1],--this.dn.length,b.copyTo(c.Zd)):(c=new g,c.Zd=a.fA.Yj(b));return c};n.prototype.my=function(b){322==b.Zd.D()&&this.dn.push(b)};n.prototype.eQ=function(){for(var b=this.U.F(),
c=new a.ga(0),e=0;e<b;e++)c.add(e);var k=this;c.xd(0,b,function(b,c){return k.Is(b,c)});for(e=1;e<b;e++)if(0==this.Is(c.get(e-1),c.get(e)))return this.Kd=new a.wd(3,c.get(e-1),c.get(e)),0;return 2};n.prototype.NQ=function(){return this.yB()?this.xB(!0)?2:0:0};n.prototype.LQ=function(){return this.Yw()};n.prototype.fQ=function(){for(var b=this.U.F(),c=new a.ga(0),e=0;e<b;e++)c.add(e);var k=this;c.xd(0,b,function(b,c){return k.uL(b,c)});var g=Array(b);a.I.Ps(g,!1);g[c.get(0)]=!0;for(e=1;e<b;e++){var d=
c.get(e-1),n=c.get(e);0==this.Is(d,n)?g[n]=!1:g[n]=!0}for(var c=this.U.Pa(),d=this.U,n=0,f=1,e=0;e<b;e++)g[e]?f=e+1:(n<f&&c.Pd(d,n,f),n=e+1);n<f&&c.Pd(d,n,f);c.hg(2,this.pn);return c};n.prototype.OQ=function(){var b=this.U,c=b.Ca(),e=b.Ca(),k=this.U.Pa(),g=this.U,d=b.hasAttribute(1),n=d?a.Ia.rB(this.sg,b,!0):0,f=new a.ga(0),h=new a.ga(0);f.xb(a.I.truncate(b.F()/2+1));for(h.xb(a.I.truncate(b.F()/2+1));c.kb();)if(e.kb(),!(2>b.Ha(c.Qa))){e.zR();for(var u,l,m=!0;c.La();){var p=c.ia(),q=e.oi();if(c.Jb()>
e.Jb())break;m&&(f.add(c.Jb()),h.add(e.Bm()),m=!1);l=f.tc();var r=c.Bm();if(1<r-l){var v=new a.b;v.pc(b.Fa(l),b.Fa(r));u=v.length()}else u=p.$b();l=h.tc();r=e.Jb();1<r-l?(v=new a.b,v.pc(b.Fa(l),b.Fa(r)),l=v.length()):l=q.$b();u>this.pn?f.add(c.Bm()):d&&(u=b.ld(1,f.tc(),0),p=p.Ws(1,0),Math.abs(p-u)>n&&f.add(c.Bm()));l>this.pn?h.add(e.Jb()):d&&(u=b.ld(1,h.tc(),0),p=q.Ws(1,0),Math.abs(p-u)>n&&h.add(e.Jb()))}f.tc()<h.tc()?f.size>h.size?f.af():h.af():(f.tc()!=h.tc()&&h.af(),h.af());if(2<=h.size+f.size){m=
new a.Va;q=0;for(p=f.size;q<p;q++)g.Sd(f.get(q),m),0==q?k.df(m):k.lineTo(m);for(q=h.size-1;0<q;q--)g.Sd(h.get(q),m),k.lineTo(m);g.vc(c.Qa)?k.ro():0<h.size&&(g.Sd(h.get(0),m),k.lineTo(m))}null!=f&&f.clear(!1);null!=h&&h.clear(!1)}k.hg(2,this.pn);return k};n.prototype.MQ=function(){return this.xS()};n.prototype.xS=function(){if(1736==this.U.D()&&1==this.U.Cm())return a.Of.Qj(this.U,this.pn,!0,!1,this.oe);this.Zh=new a.fd;this.Zh.Eb(this.U);0!=this.Zh.pd&&(1!=this.yx&&a.aj.$(this.Zh,this.pn,this.oe,
!0),1736==this.U.D()&&a.mm.$(this.Zh,this.Zh.$c,this.yx,!1,this.oe));this.U=this.Zh.hf(this.Zh.$c);1736==this.U.D()&&(this.U.hl(),this.U.Pp(0));this.U.hg(2,this.pn);return this.U};n.ac=function(b,c,e){if(b.s())return 1;var k=b.D();if(33==k)return 1;if(197==k)return e=new a.i,b.o(e),e.mg(a.Ia.Cg(c,b,!1))?0:1;if(a.T.Lc(k))throw a.g.wa();if(!a.T.Th(k))throw a.g.wa();var k=a.Ia.Cg(c,b,!1),g=b.rj(k);e=e?-1:g;if(-1!=e)return e;1==e&&(k=0);e=(new n(b,c,e,0,!1)).Yw();b.hg(e,k);return e};n.Ro=function(b,c,
e,k,g){null!=k&&(k.yh=0,k.Fk=-1,k.Gk=-1);if(b.s())return 1;var d=b.D();if(33==d)return 1;var f=a.Ia.Cg(c,b,!1);if(197==d)return c=new a.i,b.o(c),c.mg(f)?(null!=k&&(k.yh=2,k.Fk=-1,k.Gk=-1),0):1;if(a.T.Lc(d))return f=new a.Xa(b.description),f.Bc(b,!0),n.Ro(f,c,e,k,g);g=b.rj(f);e=e?-1:g;if(-1!=e)return e;c=new n(b,c,e,0,!1);if(550==d)e=c.eQ();else if(1607==d)e=c.NQ();else if(1736==d)e=c.LQ();else throw a.g.wa();b.hg(e,f);null!=k&&0==e&&k.aq(c.Kd);return e};n.ob=function(b,c,e,k,g){null!=k&&(k.yh=0,k.Fk=
-1,k.Gk=-1);if(b.s())return 1;var d=b.D();if(33==d)return 1;var f=a.Ia.Cg(c,b,!1);if(197==d)return c=new a.i,b.o(c),c.mg(f)?(null!=k&&(k.yh=2,k.Fk=-1,k.Gk=-1),0):1;if(a.T.Lc(d))return d=new a.Xa(b.description),d.Bc(b,!0),n.Ro(d,c,e,k,g);b=new n(b,c,-1,0,!0);if(550==d||1607==d||1736==d)c=b.Yw();else throw a.g.wa();null!=k&&k.aq(b.Kd);return c};n.cG=function(b,c,e,k){if(b.s())return b;var g=b.D();if(33==g)return b;var d=a.Ia.Cg(c,b,!1);if(197==g)return c=new a.i,b.o(c),c.mg(d)?b.Pa():b;if(a.T.Lc(g))return g=
new a.Xa(b.description),g.Bc(b,!0),n.cG(g,c,e,k);k=b.rj(d);e=e?-1:k;if(2==e)return b;b=new n(b,c,e,0,!1);if(550==g)b=b.fQ();else if(1607==g)b=b.OQ();else if(1736==g)b=b.MQ();else throw a.g.wa();return b};n.Ry=function(b,c,e,k){if(b.s())return b;var g=b.D();if(33==g)return b;var d=a.Ia.Cg(c,b,!1);if(197==g)return c=new a.i,b.o(c),c.mg(d)?b.Pa():b;if(a.T.Lc(g))return d=new a.Xa(b.description),d.Bc(b,!0),n.Ry(d,c,e,k);if(!a.T.Th(g))throw a.g.ra("OGC simplify is not implemented for this geometry type "+
g);return a.Of.Ry(b,d,!1,k)};n.prototype.kj=function(b,c,e){if(b==c)return 0;b=this.xh.get(b);var k=this.xh.get(c);c=b>>1;var g=k>>1,d=new a.b,n=new a.b;this.$e.ec(2*c,d);d.y+=0!=(b&1)?this.Ri:-this.Ri;this.$e.ec(2*g,n);n.y+=0!=(k&1)?this.Ri:-this.Ri;b=d.compare(n);return 0==b&&e?(e=this.Bk.get(c)-this.Bk.get(g),0>e?-1:0<e?1:0):b};n.prototype.Is=function(b,c){if(b==c)return 0;var e=this.U,k=e.Fa(b),g=e.Fa(c);if(k.x<g.x)return-1;if(k.x>g.x)return 1;if(k.y<g.y)return-1;if(k.y>g.y)return 1;for(k=1;k<
this.wP;k++)for(var g=this.SD.Hd(k),d=a.pa.Wa(g),n=0;n<d;n++){var f=e.ld(g,b,n),h=e.ld(g,c,n);if(f<h)return-1;if(f>h)return 1}return 0};n.prototype.uL=function(b,c){var e=this.Is(b,c);return 0==e?b<c?-1:1:e};n.prototype.sM=function(b,c){if(b===c)return 0;var e=b.Zd.Pf(b.sl()?1:0);b.sl()&&e.Bp();b=c.Zd.Pf(c.sl()?1:0);c.sl()&&b.Bp();c=e.ps();var a=b.ps();return a==c?(c=e.Ai(b),Math.abs(c)<=8.881784197001252E-16*(Math.abs(b.x*e.y)+Math.abs(b.y*e.x))&&(c--,c++),0>c?1:0<c?-1:0):c<a?-1:1};return n}();a.cv=
n})(w||(w={}));(function(a){var g=function(g){function c(){g.apply(this,arguments)}K(c,g);c.prototype.D=function(){return 30};c.local=function(){null===c.V&&(c.V=new c);return c.V};c.prototype.$=function(b,c,k,g){return b instanceof a.T?(b=new a.Pc(b),c=new a.Pc(c),this.$(b,c,k,g).next()):new a.hI(b,c,k,g)};c.On=function(b,e,k,g){var d=b.fb(),n=e.fb();if(b.s()&&e.s())return d>n?b:e;if(b.s())return e;if(e.s())return b;var f=new a.i,h=new a.i,l=new a.i;b.o(f);e.o(h);l.K(f);l.Db(h);f=a.Ia.zd(k,l,!1);
h=b.D();l=e.D();return 33==h&&33==l?c.qP(b,e,f):h!=l?0<d||0<n?d>n?b:e:550==h?c.pA(b,e,f):c.pA(e,b,f):a.Of.On(b,e,k,g)};c.qP=function(b,c,k){k=k*Math.sqrt(2)*1.00001;k*=k;var e=b.w(),g=c.w(),d=new a.pe(b.description);a.b.Zb(e,g)>k&&(d.add(b),d.add(c));return d};c.pA=function(b,c,k){var e=b.mc(0),g=b.F(),d=c.w(),f=b.Pa();k=k*Math.sqrt(2)*1.00001;var h=new a.i;b.o(h);h.P(k,k);if(h.contains(d)){k*=k;for(var h=!1,l=[],m=0;m<g;m++)l[m]=!1;for(m=0;m<g;m++){var p=e.read(2*m),q=e.read(2*m+1),p=p-d.x,q=q-d.y;
p*p+q*q<=k&&(h=!0,l[m]=!0)}if(h)for(m=0;m<g;m++)l[m]||f.Pd(b,m,m+1);else f.Pd(b,0,g),f.add(c)}else f.Pd(b,0,g),f.add(c);return f};c.V=null;return c}(a.Me);a.dv=g})(w||(w={}));(function(a){var g=function(){function g(c,b,e,a){this.Fq=null==b;this.ua=-1;this.ne=c;this.cg=e;this.QP=b.next();this.Yb=a}g.prototype.next=function(){if(this.Fq)return null;var c;return null!=(c=this.ne.next())?(this.ua=this.ne.ya(),a.dv.On(c,this.QP,this.cg,this.Yb)):null};g.prototype.ya=function(){return this.ua};return g}();
a.hI=g})(w||(w={}));(function(a){var g=function(){function b(){}b.prototype.jt=function(){this.iw=null;this.Vu=-1;this.xG=!1};return b}(),d=function(){function b(){this.jq=0;this.Ci=[]}b.prototype.TJ=function(b){this.jq+=b.Vu;this.Ci.push(b)};b.prototype.PQ=function(){this.jq-=this.Ci[this.Ci.length-1].Vu;--this.Ci.length};b.prototype.Dv=function(){return this.Ci[this.Ci.length-1]};b.prototype.lc=function(b){return b===this};return b}(),c=function(){function b(b,c,a){this.ua=-1;this.Ec=!1;this.bE=
[!1,!1,!1,!1];this.ep=[0,0,0,0];this.ox=!1;this.Gj=-1;this.So=0;this.Tm=-1;this.rn=[];this.ne=b;this.cg=c;this.Yb=a}b.ac=function(b){var c=[],e;for(e in b)c.push(Number(e));c.sort(function(b,c){return b-c});return c};b.prototype.UC=function(c){var e=this.rn[c],g=b.ac(e)[0],d=e[g],f=d.Dv().iw,d=d.Dv().xG;delete e[g];d&&(f=a.as.local().$(f,this.cg,!1,this.Yb),0==c&&33==f.D()&&(c=new a.pe(f.description),f.s()||c.add(f),f=c));return f};b.prototype.next=function(){if(this.Ec&&this.Tm==this.Gj)return null;
for(;!this.FS(););if(-1==this.Gj)return null;if(this.ox){for(this.Tm++;;){if(this.Tm>this.Gj||0>this.Tm)throw a.g.wa();if(this.bE[this.Tm])break}this.ua++;return this.UC(this.Tm)}this.ua=0;this.Tm=this.Gj;return this.UC(this.Gj)};b.prototype.ya=function(){return this.ua};b.prototype.FS=function(){if(this.Ec)return!0;var b=null;null!=this.ne&&(b=this.ne.next(),null==b&&(this.Ec=!0,this.ne=null));if(null!=b){var c=b.fb();this.bE[c]=!0;c>=this.Gj&&!this.ox&&(this.SA(c,!1,b),c>this.Gj&&!this.ox&&this.vR(c))}if(0<
this.So)for(c=0;c<=this.Gj;c++)for(;1<this.ep[c];)if(b=this.jL(c),0!=b.length)b=a.Of.oM(b,this.cg,this.Yb),this.SA(c,!0,b);else break;return this.Ec};b.prototype.jL=function(c){for(var e=[],a=[],g=this.rn[c],d=b.ac(g),f=0;f<d.length;f++){var h=d[f],l=g[h];if(this.Ec||1E4<l.jq&&1<l.Ci.length){this.ep[c]-=l.Ci.length;for(this.So-=l.Ci.length;0<l.Ci.length;)e.push(l.Dv().iw),l.PQ();a.push(h)}}for(f=0;f<a.length;f++)delete g[a[f]];return e};b.prototype.vR=function(b){for(var c=0;c<b;c++)this.rn[c]=[],
this.So-=this.ep[c],this.ep[c]=0};b.prototype.SA=function(c,a,n){var e=new g;e.jt();e.iw=n;n=b.$g(n);e.Vu=n;n=b.Wf(n);if(c+1>this.rn.length)for(var k=0,f=Math.max(2,c+1);k<f;k++)this.rn.push([]);k=this.rn[c][n];void 0===k&&(k=new d,this.rn[c][n]=k);e.xG=a;k.TJ(e);this.ep[c]++;this.So++;this.Gj=Math.max(this.Gj,c)};b.Wf=function(b){return 0<b?a.I.truncate(Math.log(b)/Math.log(4)+.5):0};b.$g=function(b){var c=b.D();if(a.T.Th(c))return b.F();if(33==c)return 1;if(197==c)return 4;if(a.T.Lc(c))return 2;
throw a.g.wa();};return b}();a.jI=c})(w||(w={}));(function(a){var g=function(g){function c(){g.apply(this,arguments)}K(c,g);c.prototype.D=function(){return 1};c.prototype.$=function(b,c,k,g){return void 0===g?new a.jI(b,c,k):this.xM(b,c,k,g)};c.prototype.xM=function(b,c,k,g){b=new a.Pc([b,c]);return this.$(b,k,g).next()};c.local=function(){null===c.V&&(c.V=new c);return c.V};c.V=null;return c}(a.Me);a.wi=g})(w||(w={}));(function(a){var g;(function(a){a[a.nextPath=0]="nextPath";a[a.nextSegment=1]=
"nextSegment";a[a.iterate=2]="iterate"})(g||(g={}));g=function(){function g(c,b,e,k){this.dr=new a.i;this.LP=c;this.MP=b;this.Wo=k;this.hn=-1;this.qk=!1;var g=c.pb;null!=g&&(g=k?g.nn:g.Ab,null!=g&&(this.Ec=!1,this.ka=e,this.Ab=g,this.au=this.Ab.Re(),this.Xo=this.qk=!0,this.Hb=0,k?this.hn=b.ea():this.bd=b.Ca()));this.qk||(g=b.pb,null!=g&&(g=k?g.nn:g.Ab,null!=g&&(this.Ec=!1,this.ka=e,this.Ab=g,this.au=this.Ab.Re(),this.qk=!0,this.Xo=!1,this.Hb=0,k?this.hn=c.ea():this.bd=c.Ca())));this.qk||(this.th=
k?a.Ia.BN(c,b,e,1<=c.rj(0),1<=b.rj(0)):a.Ia.AN(c,b,e))}g.prototype.next=function(){if(this.qk){if(this.Ec)return!1;for(var c=!0;c;)switch(this.Hb){case 0:c=this.nQ();break;case 1:c=this.oQ();break;case 2:c=this.$w();break;default:throw a.g.ra("internal error");}return this.Ec?!1:!0}return null==this.th?!1:this.th.next()};g.prototype.jk=function(){return this.qk?this.Xo?this.Ab.da(this.Rq):this.Wo?this.hn:this.bd.Jb():this.th.jk(this.th.Ff)};g.prototype.ek=function(){return this.qk?this.Xo?this.Wo?
this.hn:this.bd.Jb():this.Ab.da(this.Rq):this.th.ek(this.th.mf)};g.prototype.Fw=function(){if(!this.Wo)throw a.g.ra("internal error");return this.qk?this.Xo?this.Ab.uC(this.Rq):this.dr:this.th.Fw(this.th.Ff)};g.prototype.jw=function(){if(!this.Wo)throw a.g.ra("internal error");return this.qk?this.Xo?this.dr:this.Ab.uC(this.Rq):this.th.jw(this.th.mf)};g.prototype.nQ=function(){if(!this.Wo){if(!this.bd.kb())return this.Ec=!0,!1;this.Hb=1;return!0}if(-1==--this.hn)return this.Ec=!0,!1;this.Xo?this.MP.Ti(this.hn,
this.dr):this.LP.Ti(this.hn,this.dr);this.au.Ch(this.dr,this.ka);this.Hb=2;return!0};g.prototype.oQ=function(){if(!this.bd.La())return this.Hb=0,!0;var c=this.bd.ia();this.au.Fn(c,this.ka);this.Hb=2;return!0};g.prototype.$w=function(){this.Rq=this.au.next();return-1==this.Rq?(this.Hb=this.Wo?0:1,!0):!1};return g}();a.cl=g})(w||(w={}));(function(a){a=a.kI||(a.kI={});a[a.enumClosed=1]="enumClosed";a[a.enumHasNonlinearSegments=2]="enumHasNonlinearSegments";a[a.enumOGCStartPolygon=4]="enumOGCStartPolygon";
a[a.enumCalcMask=4]="enumCalcMask"})(w||(w={}));(function(a){var g=function(){function g(){}g.Fb=function(c,b,e,k,d,f,h,l,m){var n=[0,0,0],u=[0,0,0],p=[0,0,0],q=[0,0,0,0],r=new a.ca(0),B=new a.ca(0),v=new a.ca(0);if(null!=h||null!=l||null!=m)if(a.j.Ih(b))a.zg.Fb(c,e,k,d,f,h,l,m);else{d=a.u.W(d);e=a.u.W(e);var G=a.u.W(d-e);if(a.j.S(k,f)&&(a.j.S(e,d)||a.j.S(a.j.H(k),1.570796326794897)))null!=h&&(h.l=0),null!=l&&(l.l=0),null!=m&&(m.l=0);else{if(a.j.S(k,-f)){if(a.j.S(a.j.H(k),1.570796326794897)){null!=
h&&(h.l=2*a.u.gg(c,b));null!=l&&(l.l=0<k?a.u.W(3.141592653589793-a.u.W(d)):a.u.W(d));null!=m&&(m.l=0<k?a.u.W(d):a.u.W(3.141592653589793-a.u.W(d)));return}a.j.S(a.j.H(G),3.141592653589793)&&(null!=h&&(h.l=2*a.u.gg(c,b)),null!=l&&(l.l=0),null!=m&&(m.l=0))}else{if(a.j.S(a.j.H(k),1.570796326794897)||a.j.S(a.j.H(f),1.570796326794897)){a.Xj.Fb(c,b,e,k,d,f,h,l,m);return}if(a.j.S(e,d)||a.j.S(a.j.H(G),3.141592653589793)){a.Xj.Fb(c,b,e,k,d,f,h,l,m);return}if(a.j.Vc(k)){a.Xj.Fb(c,b,e,k,d,f,h,l,m);return}}var x=
Math.sqrt(1-b);d=a.u.W(d-e);e=0;a.u.wm(b,k,e,r,B,v);n[0]=r.l;n[1]=B.l;n[2]=v.l;a.u.wm(b,f,d,r,B,v);u[0]=r.l;u[1]=B.l;u[2]=v.l;p[0]=0;p[1]=0;p[2]=-1*b*a.u.n(1,b,k)*Math.sin(k);0>d?a.u.Ep(p,u,n,q,0):a.u.Ep(p,n,u,q,0);for(var B=[0,0,0],v=[0,0,0],y=[0,0,0],n=[0,0,0],r=[0,0,0],z=Math.acos(q[2]/1),I=1-b,w=Math.tan(z),C=1+w*w/I,t=2*p[2]*w/I,w=Math.sqrt(t*t-4*C*(p[2]*p[2]/I-1)),C=2*C,I=(-t+w)/C,t=(-t-w)/C,w=Math.tan(z),C=w*I+p[2],z=(I+t)/2,p=(C+(w*t+p[2]))/2,w=a.u.Sn(I-z,C-p),I=p/x*1.570796326794897,t=0;100>
t;t++){C=a.u.Tk(b,I);C=C*C/Math.cos(I)*(Math.sin(I)-p*C/(1*(1-b)));if(a.j.Vc(C))break;I-=C}var p=a.u.n(1,b,I)*Math.cos(I),p=Math.sqrt((p-z)*(p+z)),w=1-w/p,w=w*(2-w),C=a.u.jm(B),z=a.u.jm(v),I=a.u.jm(y),D=a.u.Qr(y,B),t=a.u.Qr(y,v);a.u.Uu(y,B,n);a.u.Uu(y,v,r);B=Math.acos(D/(I*C));v=Math.acos(t/(I*z));v*=a.j.nb(1,a.u.Qr(n,r));if(1.570796326794897<=a.j.H(B)&&1.570796326794897<=a.j.H(v)||3.141592653589793<a.j.H(B-v))B=(3.141592653589793-a.j.H(B))*a.j.nb(1,B),v=(3.141592653589793-a.j.H(v))*a.j.nb(1,v);n=
a.u.Si(w,v);r=a.u.q(p,w,a.u.Si(w,B));n=a.u.q(p,w,n);n=a.j.H(n-r)*c;B=new a.ca(0);v=new a.ca(0);y=q[1]/1;y*=-a.j.nb(1,G);r=Math.acos(y)*a.j.nb(1,G);g.gf(c,b,e,k,n,r,B,v);a.j.S(d,B.l)&&a.j.S(f,v.l)||(w=a.u.Sn(a.u.W(d-B.l),f-v.l),g.gf(c,b,e,k,n,a.u.W(r+3.141592653589793),B,v),C=a.u.Sn(a.u.W(d-B.l),f-v.l),C<w&&(r=a.u.W(r+3.141592653589793)));B=[0,0,0,0];v=[0,0,0,0];p=[0,0,0];w=[0,0,0];c=[0,0,0];e=[0,0,0];k=[0,0,0];y=[0,0,0];p[0]=0;p[1]=0;p[2]=x;w[0]=0;w[1]=0;w[2]=0;a.u.Ep(w,p,u,B,0);a.j.Vc(f)?(c[0]=u[0],
c[1]=u[1],c[2]=1,e[0]=1*Math.cos(d)-1*Math.sin(d),e[1]=1*Math.sin(d)+1*Math.cos(d)):(b=a.u.n(1,b,f)*Math.cos(f),c[0]=0,c[1]=0,u[2]+=Math.tan(1.570796326794897-a.j.H(f))*b*a.j.nb(1,f),e[0]=b*Math.cos(d)-b*Math.sin(d),e[1]=b*Math.sin(d)+b*Math.cos(d));e[2]=u[2];a.u.Ep(u,e,c,v,1);a.u.Uu(v,B,k);a.u.Uu(v,q,y);y=a.u.Qr(k,y)/(a.u.jm(k)*a.u.jm(y));y*=a.j.nb(1,G);d=Math.acos(y)*-a.j.nb(1,G);0<r&&0<d?d=a.u.W(d+3.141592653589793):0>r&&0>d&&(d=a.u.W(d+3.141592653589793));null!=h&&(h.l=n);null!=l&&(l.l=r);null!=
m&&(m.l=d)}}};g.gf=function(c,b,e,k,g,d,f,h){var n=[0,0,0],u=[0,0,0],l=[0,0,0],m=[0,0,0],p=[0,0,0],q=[0,0,0],r=[0,0,0],B=[0,0,0,0],v=new a.ca(0),x=new a.ca(0),y=new a.ca(0),z=new a.ca(0),I=new a.ca(0),w=new a.ca(0);if(null!=f&&null!=h)if(a.j.Ih(b))a.zg.gf(c,e,k,g,d,f,h);else if(a.j.Vc(g))null!=f&&(f.l=e),null!=h&&(h.l=k);else if(d=a.u.W(d),0>g&&(g=a.j.H(g),d=a.u.W(d+3.141592653589793)),e=a.u.W(e),k=a.u.W(k),1.570796326794897<a.j.H(k)&&(e=a.u.W(e+3.141592653589793),k=a.j.nb(3.141592653589793,k)-k),
a.j.S(a.j.H(k),1.570796326794897)||a.j.Vc(k)||a.j.Vc(d)||a.j.S(a.j.H(d),3.141592653589793))a.Xj.gf(c,b,e,k,g,d,f,h);else{var C=Math.sqrt(1-b);c=g/c;a.u.wm(b,k,0,z,I,w);n[0]=z.l;n[1]=I.l;n[2]=I.l;r[0]=0;r[1]=0;r[2]=-1*b*a.u.n(1,b,k)*Math.sin(k);z=a.u.n(1,b,k);I=a.u.W(1.570796326794897-d);w=Math.sin(I);g=Math.cos(k);k=Math.sin(k);p[0]=z*g-k*w;p[1]=Math.cos(I);p[2]=(1-b)*z*k+g*w;0>d?a.u.Ep(r,p,n,B,0):a.u.Ep(r,n,p,B,0);n=Math.acos(B[2]/1);B=Math.atan2(-B[1],-B[0]);k=1-b;p=Math.tan(n);I=1+p*p/k;z=2*r[2]*
p/k;p=Math.sqrt(z*z-4*I*(r[2]*r[2]/k-1));I*=2;k=(-z+p)/I;z=(-z-p)/I;p=Math.tan(n);I=p*k+r[2];n=(k+z)/2;r=(I+(p*z+r[2]))/2;p=a.u.Sn(k-n,I-r);C=r/C*1.570796326794897;for(k=0;100>k;k++){z=a.u.Tk(b,C);z=z*z/Math.cos(C)*(Math.sin(C)-r*z/(1*(1-b)));if(a.j.Vc(z))break;C-=z}C=a.u.n(1,b,C)*Math.cos(C);C=Math.sqrt((C-n)*(C+n));r=1-p/C;r*=2-r;q=Math.acos(a.u.Qr(q,u)/(a.u.jm(q)*a.u.jm(u)));q*=a.j.nb(1,u[0]);d=(a.u.q(C,r,a.u.Si(r,q))+c*a.j.nb(1,d))/a.u.gg(C,r);d=a.u.W(1.570796326794897*d);d=a.u.xn(r,d);a.u.n(C,
r,d);p=a.u.W(B+e);e=Math.cos(p);d=Math.sin(p);l[0]=m[0]*e+m[1]*-d;l[1]=m[0]*d+m[1]*e;l[2]=m[2];a.u.JK(b,l[0],l[1],l[2],y,x,v);null!=f&&(f.l=x.l);null!=h&&(h.l=y.l)}};return g}();a.$z=g})(w||(w={}));(function(a){var g=function(){function b(b){this.Na=null;this.Ar=new a.b;this.Br=new a.b;this.a=b}b.prototype.compare=function(b,c,e){this.a.uc(c,this.Ar);this.a.uc(b.da(e),this.Br);return this.Ar.compare(this.Br)};return b}(),d=function(){function b(b){this.nf=new a.b;this.ln=new a.b;this.a=b}b.prototype.bh=
function(b){this.nf.J(b)};b.prototype.compare=function(b,c){this.a.uc(b.da(c),this.ln);return this.nf.compare(this.ln)};return b}(),c=function(b){function c(c){b.call(this,c.a,c.ka,!1);this.ab=c}K(c,b);c.prototype.compare=function(b,c,e){if(this.Zf)return-1;var a=this.ab.Cd.Dm(this.ab.lh(c));b=b.da(e);var k=this.ab.Cd.Dm(this.ab.lh(b));this.Cl=e;return this.JB(c,a,b,k)};return c}(a.hA),b=function(b){function c(c){b.call(this,c.a,c.ka);this.ab=c}K(c,b);c.prototype.compare=function(b,c){if(this.Zf)return-1;
b=this.ab.Cd.Dm(this.ab.lh(b.da(c)));this.Cl=c;return this.KB(c,b)};return c}(a.JI),e=function(){function e(){this.zc=this.Ue=this.Zm=this.Cd=this.Kg=this.nd=this.$a=this.a=null;this.og=!1;this.Xg=this.Kl=this.Vd=this.Lj=this.Mg=this.Hj=this.sf=this.Ld=null;this.Yg=this.rp=this.Tx=this.ka=0;this.Ht=this.Nm=!1;this.mn=new a.b;this.Ck=new a.b;this.$a=new a.Fc(8);this.nd=new a.Fc(5);this.Kg=new a.Ur;this.Cd=new a.Ur;this.og=!1;this.Xg=new a.b;this.Xg.ma(0,0);this.ka=0;this.Yg=-1;this.Nm=!1;this.a=null;
this.Ue=new a.bj;this.zc=new a.bj;this.Mg=new a.ga(0);this.Lj=new a.gA;this.sf=new a.ga(0);this.Hj=new a.ga(0);this.Zm=new a.Va}e.prototype.GS=function(b,c){var e=new a.Bg;e.Oy();b.Oe(e);this.Op(b);this.Nm=!1;this.ka=c;this.Tx=c*c;c=this.Xy();b.Oe(e);c||(this.JM(),c||this.Xy());-1!=this.Yg&&(this.a.bf(this.Yg),this.Yg=-1);this.a=null;return this.Nm};e.prototype.KS=function(b,c){this.Op(b);this.Nm=!1;this.ka=c;this.Tx=c*c;this.og=!1;this.Xy();this.og||(this.og=1==b.xo(c,!0,!1));-1!=this.Yg&&(this.a.bf(this.Yg),
this.Yg=-1);this.a=null};e.prototype.Uf=function(b,c){return this.$a.O(b,0+c)};e.prototype.zy=function(b,c,e){this.$a.L(b,0+c,e)};e.prototype.lh=function(b){return this.$a.O(b,2)};e.prototype.UR=function(b,c){this.$a.L(b,2,c)};e.prototype.FC=function(b,c){return this.$a.O(b,3+c)};e.prototype.Eo=function(b){return this.$a.O(b,7)};e.prototype.Nk=function(b,c){this.$a.L(b,7,c)};e.prototype.Go=function(b,c){return this.$a.O(b,3+this.Do(b,c))};e.prototype.Qp=function(b,c,e){this.$a.L(b,3+this.Do(b,c),
e)};e.prototype.ZN=function(b,c){return this.$a.O(b,5+this.Do(b,c))};e.prototype.Sp=function(b,c,e){this.$a.L(b,5+this.Do(b,c),e)};e.prototype.rq=function(b){return this.nd.O(b,0)};e.prototype.RR=function(b,c){this.nd.L(b,0,c)};e.prototype.ow=function(b){return this.nd.O(b,4)};e.prototype.Lp=function(b,c){this.nd.L(b,4,c)};e.prototype.fk=function(b){return this.nd.O(b,1)};e.prototype.dm=function(b,c){this.nd.L(b,1,c)};e.prototype.nw=function(b){return this.nd.O(b,3)};e.prototype.Hr=function(b,c){this.nd.L(b,
3,c)};e.prototype.Ul=function(b){var c=this.nd.be(),e=this.Kg.jh();this.RR(c,e);-1!=b?(this.Kg.addElement(e,b),this.a.lb(b,this.Yg,c),this.Lp(c,this.a.gb(b))):this.Lp(c,-1);return c};e.prototype.aM=function(b){this.nd.Jc(b)};e.prototype.QA=function(b,c){this.Kg.addElement(this.rq(b),c);this.a.lb(c,this.Yg,b)};e.prototype.rr=function(b){var c=this.$a.be(),e=this.Cd.jh();this.UR(c,e);-1!=b&&this.Cd.addElement(e,b);return c};e.prototype.RA=function(b,c){this.Cd.addElement(this.lh(b),c)};e.prototype.Ns=
function(b){this.$a.Jc(b);b=this.Mg.Qs(b);0<=b&&this.Mg.QE(b)};e.prototype.yi=function(b,c){if(-1==this.Uf(b,0))this.zy(b,0,c);else if(-1==this.Uf(b,1))this.zy(b,1,c);else throw a.g.wa();this.Av(b,c)};e.prototype.Av=function(b,c){var e=this.fk(c);if(-1!=e){var a=this.Go(e,c);this.Sp(a,c,b);this.Qp(b,c,a);this.Qp(e,c,b);this.Sp(b,c,e)}else this.Sp(b,c,b),this.Qp(b,c,b),this.dm(c,b)};e.prototype.Do=function(b,c){return this.Uf(b,0)==c?0:1};e.prototype.Tl=function(b,c){var e=this.nw(c);-1!=e&&(this.Ue.kd(e,
-1),this.Hr(c,-1));var a,e=this.fk(c);if(-1!=e){var k=a=e,g;do{g=!1;var d=this.Do(a,c),n=this.FC(a,d);if(this.Uf(a,d+1&1)==b){this.Os(a);this.Cd.Fg(this.lh(a));this.Ns(a);if(a==n){e=-1;break}e==a&&(e=this.fk(c),k=n,g=!0)}a=n}while(a!=k||g);if(-1!=e){do d=this.Do(a,c),n=this.FC(a,d),this.zy(a,d,b),a=n;while(a!=k);a=this.fk(b);-1!=a?(k=this.Go(a,b),g=this.Go(e,b),k==a?(this.dm(b,e),this.Av(a,b),this.dm(b,a)):g==e&&this.Av(e,b),this.Qp(e,b,k),this.Sp(k,b,e),this.Qp(a,b,g),this.Sp(g,b,a)):this.dm(b,e)}}e=
this.rq(b);a=this.rq(c);for(k=this.Kg.gc(a);-1!=k;k=this.Kg.bb(k))this.a.lb(this.Kg.da(k),this.Yg,b);this.Kg.Qv(e,a);this.aM(c)};e.prototype.YP=function(b,c){var e=this.Uf(b,0),a=this.Uf(b,1),k=this.Uf(c,0),g=this.Uf(c,1);this.Cd.Qv(this.lh(b),this.lh(c));c==this.fk(e)&&this.dm(e,b);c==this.fk(a)&&this.dm(a,b);this.Os(c);this.Ns(c);e==k&&a==g||a==k&&e==g||(this.zm(e,this.mn),this.zm(k,this.Ck),this.mn.ub(this.Ck)?(e!=k&&this.Tl(e,k),a!=g&&this.Tl(a,g)):(a!=k&&this.Tl(a,k),e!=g&&this.Tl(e,g)))};e.prototype.Os=
function(b){var c=this.Uf(b,1);this.SB(b,this.Uf(b,0));this.SB(b,c)};e.prototype.SB=function(b,c){var e=this.Go(b,c),a=this.ZN(b,c),k=this.fk(c);e!=b?(this.Qp(a,c,e),this.Sp(e,c,a),k==b&&this.dm(c,e)):this.dm(c,-1)};e.prototype.YA=function(b,c,e){var a=this.Cd.gc(b),k=this.Cd.da(a);b=this.se(k);var g=this.se(this.a.X(k));this.a.Tp(k,c,e,!0);for(a=this.Cd.bb(a);-1!=a;a=this.Cd.bb(a)){var k=this.Cd.da(a),d=this.se(k)==b;this.a.Tp(k,c,e,d)}a=c.Io(e,0).Mb();c=c.Io(e,c.kk(e)-1).oc();this.yG(b,a);this.yG(g,
c)};e.prototype.PB=function(b,c,e){var a=this.lh(b),k=this.Uf(b,0),g=this.Uf(b,1),d=this.rr(-1);this.Mg.add(d);this.Nk(d,-3);this.sf.add(d);this.yi(d,k);b=1;for(c=c.kk(e);b<c;b++)e=this.Ul(-1),this.Hj.add(e),this.sf.add(e),this.yi(d,e),d=this.rr(-1),this.Mg.add(d),this.Nk(d,-3),this.sf.add(d),this.yi(d,e);this.yi(d,g);for(a=this.Cd.gc(a);-1!=a;a=this.Cd.bb(a))if(g=this.Cd.da(a),this.se(g)==k){b=0;do 0<b&&(d=this.sf.get(b-1),this.QA(d,g),-1==this.ow(d)&&this.Lp(d,this.a.gb(g))),d=this.sf.get(b),b+=
2,this.RA(d,g),g=this.a.X(g);while(b<this.sf.size)}else{b=this.sf.size-1;do b<this.sf.size-2&&(d=this.sf.get(b+1),this.QA(d,g),0>this.ow(d)&&this.Lp(d,this.a.gb(g))),d=this.sf.get(b),b-=2,this.RA(d,g),g=this.a.X(g);while(0<=b)}this.sf.clear(!1)};e.prototype.se=function(b){return this.a.Ra(b,this.Yg)};e.prototype.UE=function(b,c,e){var k=this.Uf(c,0),g=new a.b;this.zm(k,g);var d=new a.b,n=this.Uf(c,1);this.zm(n,d);var f=e.kk(b),h=e.Io(b,0),u=new a.b;h.ht(u);if(!g.ub(u)){if(!this.og){var l=g.compare(this.Xg),
u=u.compare(this.Xg);0>l*u&&(this.og=!0)}this.lC(k,this.sf);this.Hj.add(k)}!this.og&&1<f&&(l=g.compare(d),h=h.oc(),g.compare(h)!=l||h.compare(d)!=l?this.og=!0:0>h.compare(this.Xg)&&(this.og=!0));h=e.Io(b,f-1);b=h.oc();d.ub(b)||(this.og||(l=d.compare(this.Xg),u=b.compare(this.Xg),0>l*u&&(this.og=!0)),this.lC(n,this.sf),this.Hj.add(n));this.sf.add(c);d=0;for(n=this.sf.size;d<n;d++)b=this.sf.get(d),e=this.Eo(b),a.Fc.Zw(e)&&(this.zc.kd(e,-1),this.Nk(b,-1)),b!=c&&-3!=this.Eo(b)&&(this.Mg.add(b),this.Nk(b,
-3));this.sf.clear(!1)};e.prototype.NK=function(b,c){this.Ld.compare(this.zc,this.zc.da(b),c);this.Ld.Zf&&(this.Ld.lq(),this.dC(b,c))};e.prototype.dC=function(b,c){this.Nm=!0;b=this.zc.da(b);c=this.zc.da(c);var e,k;k=this.Cd.Dm(this.lh(b));var g=this.Cd.Dm(this.lh(c));e=this.a.cc(k);null==e&&(null==this.Vd&&(this.Vd=new a.yb),this.a.Oc(k,this.Vd),e=this.Vd);k=this.a.cc(g);null==k&&(null==this.Kl&&(this.Kl=new a.yb),this.a.Oc(g,this.Kl),k=this.Kl);this.Lj.zn(e);this.Lj.zn(k);this.Lj.Ga(this.ka,!0)&&
(this.og=!0);this.fG(b,c,-1,this.Lj);this.Lj.clear()};e.prototype.VM=function(b,c){this.Nm=!0;c=this.zc.da(c);var e,k=this.Cd.Dm(this.lh(c));e=this.a.cc(k);null==e&&(null==this.Vd&&(this.Vd=new a.yb),this.a.Oc(k,this.Vd),e=this.Vd);k=this.qC(b);this.Lj.zn(e);this.a.Jk(k,this.Zm);this.Lj.Tw(this.ka,this.Zm,!0);this.fG(c,-1,b,this.Lj);this.Lj.clear()};e.prototype.DO=function(){if(0!=this.Mg.size)for(;0!=this.Mg.size;){if(this.Mg.size>Math.max(100,this.a.pd)){this.Mg.clear(!1);this.og=!0;break}var b=
this.Mg.tc();this.Mg.af();this.Nk(b,-1);-1!=this.TO(b)&&this.CO(b);this.Mm=!1}};e.prototype.CO=function(b){var c;this.Mm?(c=this.zc.vs(this.lE,this.iE,b,!0),this.Mm=!1):c=this.zc.PA(b);-1==c?this.YP(this.zc.da(this.zc.tC()),b):(this.Nk(b,c),this.Ld.Zf&&(this.Ld.lq(),this.dC(this.Ld.Cl,c)))};e.prototype.TO=function(b){var c=this.Uf(b,0);b=this.Uf(b,1);this.zm(c,this.mn);this.zm(b,this.Ck);if(a.b.Zb(this.mn,this.Ck)<=this.Tx)return this.og=!0,-1;var e=this.mn.compare(this.Xg),k=this.Ck.compare(this.Xg);
return 0>=e&&0<k?b:0>=k&&0<e?c:-1};e.prototype.HM=function(){var b=new a.ga(0);b.xb(this.a.pd);for(var c=this.a.Gp(),e=c.next();-1!=e;e=c.next())-1!=this.a.Ra(e,this.Yg)&&b.add(e);this.a.Mu(b,b.size);this.IM(b)};e.prototype.IM=function(b){this.Ue.clear();this.Ue.de(b.size);this.Ue.Hn(new g(this.a));var c=new a.b;c.Eh();for(var e=-1,k=new a.b,d=0,n=b.size;d<n;d++){var f=b.get(d);this.a.uc(f,k);k.ub(c)?(f=this.a.Ra(f,this.Yg),this.Tl(e,f)):(e=this.se(f),this.a.uc(f,c),f=this.Ue.qm(f),this.Hr(e,f))}};
e.prototype.JM=function(){var b=new a.ga(0);b.xb(this.a.pd);for(var c=this.Ue.gc(-1);-1!=c;c=this.Ue.bb(c))b.add(this.Ue.da(c));this.Ue.clear();this.a.Mu(b,b.size);for(var c=0,e=b.size;c<e;c++){var k=b.get(c),g=this.se(k),k=this.Ue.qm(k);this.Hr(g,k)}};e.prototype.lC=function(b,c){var e=this.fk(b);if(-1!=e){var k=e;do a.Fc.Zw(this.Eo(k))&&c.add(k),k=this.Go(k,b);while(k!=e)}};e.prototype.yG=function(b,c){for(b=this.Kg.gc(this.rq(b));-1!=b;b=this.Kg.bb(b))this.a.Yi(this.Kg.da(b),c)};e.prototype.fG=
function(b,c,e,a){this.Os(b);-1!=c&&this.Os(c);this.UE(0,b,a);-1!=c&&this.UE(1,c,a);-1!=e&&(a.nf.w(this.mn),this.zm(e,this.Ck),this.Ck.ub(this.mn)||this.Hj.add(e));e=0;for(var k=this.Hj.size;e<k;e++){var g=this.Hj.get(e),d=this.nw(g);-1!=d&&(this.Ue.kd(d,-1),this.Hr(g,-1))}e=this.lh(b);k=-1!=c?this.lh(c):-1;this.YA(e,a,0);-1!=c&&this.YA(k,a,1);this.PB(b,a,0);-1!=c&&this.PB(c,a,1);this.Cd.Fg(e);this.Ns(b);-1!=c&&(this.Cd.Fg(k),this.Ns(c));e=0;for(k=this.Hj.size;e<k;e++)g=this.Hj.get(e),g==this.rp&&
(this.Ht=!0),d=this.nw(g),-1==d&&(d=this.Ue.PA(this.qC(g)),-1==d?(b=this.se(this.Ue.da(this.Ue.tC())),this.Tl(b,g)):this.Hr(g,d));this.Hj.clear(!1)};e.prototype.zm=function(b,c){this.a.SC(this.ow(b),c)};e.prototype.qC=function(b){return this.Kg.Dm(this.rq(b))};e.prototype.Xy=function(){this.Ht=!1;this.rp=-1;null==this.Ld&&(this.zc.Ct=!1,this.Ld=new c(this),this.zc.Qm=this.Ld);var e=new a.ga(0),k=null,g=null,f=0;this.iE=this.lE=-1;this.Mm=!1;for(var h=this.Ue.gc(-1);-1!=h;){f++;this.Mm=!1;var l=this.Ue.da(h);
this.rp=this.se(l);this.a.uc(l,this.Xg);this.Ld.XF(this.Xg.y,this.Xg.x);var m,p=this.fk(this.rp);m=-1==p;if(!m){l=p;do{var q=this.Eo(l);-1==q?(this.Mg.add(l),this.Nk(l,-3)):-3!=q&&e.add(q);l=this.Go(l,this.rp)}while(l!=p)}if(0<e.size){this.Mm=1==e.size&&1==this.Mg.size;m=0;for(p=e.size;m<p;m++)l=this.zc.da(e.get(m)),this.Nk(l,-2);var r=-2,v=-2;m=0;for(p=e.size;m<p;m++){q=e.get(m);if(-2==r){var x=this.zc.ge(q);-1!=x?(l=this.zc.da(x),l=this.Eo(l),-2!=l&&(r=x)):r=-1}-2==v&&(q=this.zc.bb(q),-1!=q?(l=
this.zc.da(q),l=this.Eo(l),-2!=l&&(v=q)):v=-1);if(-2!=r&&-2!=v)break}m=0;for(p=e.size;m<p;m++)q=e.get(m),l=this.zc.da(q),this.zc.kd(q,-1),this.Nk(l,-1);e.clear(!1);this.lE=-1!=r?r:-1;this.iE=-1!=v?v:-1;-1!=r&&-1!=v?this.Mm||this.NK(r,v):-1==r&&-1==v&&(this.Mm=!1)}else m&&(null==k&&(k=new b(this)),k.bh(this.Xg),this.zc.sF(k),k.Zf&&(k.lq(),this.VM(this.rp,k.Cl)));this.DO();this.Ht?(this.Ht=!1,null==g&&(g=new d(this.a)),g.bh(this.Xg),h=this.Ue.sF(g)):h=this.Ue.bb(h)}return this.Nm};e.prototype.Op=function(b){this.a=
b;this.Yg=this.a.re();this.$a.de(b.pd+32);this.nd.de(b.pd);this.Kg.Dr(b.pd);this.Kg.$l(b.pd);this.Cd.Dr(b.pd+32);this.Cd.$l(b.pd+32);for(b=this.a.$c;-1!=b;b=this.a.we(b))if(a.T.Kc(this.a.Lb(b)))for(f=this.a.Vb(b);-1!=f;f=this.a.bc(f)){var c=this.a.Ha(f),e=this.a.Cb(f),k=this.Ul(e),g=this.rr(e);this.yi(g,k);h=this.a.X(e);e=0;for(c-=2;e<c;e++){var d=this.a.X(h),n=this.Ul(h);this.yi(g,n);g=this.rr(h);this.yi(g,n);h=d}this.a.vc(f)?(n=this.Ul(h),this.yi(g,n),g=this.rr(h),this.yi(g,n),this.yi(g,k)):(n=
this.Ul(h),this.yi(g,n))}else for(var f=this.a.Vb(b);-1!=f;f=this.a.bc(f))for(var h=this.a.Cb(f),k=0,c=this.a.Ha(f);k<c;k++)this.Ul(h),h=this.a.X(h);this.HM()};return e}();a.aA=e})(w||(w={}));(function(a){var g=function(g){function c(b,c,k){g.call(this);if(void 0!==b)if(void 0!==k){this.description=a.Od.Tf();var e=new a.ee;e.K(b,c,k);this.Py(e)}else if(void 0!==c)this.description=a.Od.Tf(),this.ic(b,c);else if(b instanceof a.pa)this.description=b;else if(b instanceof a.b)this.description=a.Od.Tf(),
this.ic(b);else throw a.g.N();else this.description=a.Od.Tf()}K(c,g);c.prototype.w=function(b){if(void 0!==b){if(this.sc())throw a.g.ra("This operation should not be performed on an empty geometry.");b.ma(this.fa[0],this.fa[1])}else{if(this.sc())throw a.g.ra("This operation should not be performed on an empty geometry.");b=new a.b;b.ma(this.fa[0],this.fa[1]);return b}};c.prototype.ic=function(b,c){"number"===typeof b?(this.qc(),null==this.fa&&this.ko(),this.fa[0]=b,this.fa[1]=c):(this.qc(),this.ic(b.x,
b.y))};c.prototype.Lw=function(){if(this.sc())throw a.g.ra("This operation should not be performed on an empty geometry.");var b=new a.ee;b.x=this.fa[0];b.y=this.fa[1];this.description.WC()?b.z=this.fa[2]:b.z=a.pa.ue(1);return b};c.prototype.Py=function(b){this.qc();var c=this.hasAttribute(1);c||a.pa.nD(1,b.z)||(this.Ne(1),c=!0);null==this.fa&&this.ko();this.fa[0]=b.x;this.fa[1]=b.y;c&&(this.fa[2]=b.z)};c.prototype.lk=function(){if(this.sc())throw a.g.ra("This operation should not be performed on an empty geometry.");
return this.fa[0]};c.prototype.qS=function(b){this.setAttribute(0,0,b)};c.prototype.mk=function(){if(this.sc())throw a.g.ra("This operation should not be performed on an empty geometry.");return this.fa[1]};c.prototype.$F=function(b){this.setAttribute(0,1,b)};c.prototype.lO=function(){return this.ld(1,0)};c.prototype.rS=function(b){this.setAttribute(1,0,b)};c.prototype.NN=function(){return this.ld(2,0)};c.prototype.bS=function(b){this.setAttribute(2,0,b)};c.prototype.Qc=function(){return this.nC(3,
0)};c.prototype.ld=function(b,c){var e=this.description.zf(b);return 0<=e?this.fa[this.description.fj(e)+c]:a.pa.ue(b)};c.prototype.nC=function(b,c){var e=this.description.zf(b);return 0<=e?this.fa[this.description.fj(e)+c]:a.pa.ue(b)};c.prototype.setAttribute=function(b,c,a){this.qc();var e=this.description.zf(b);0>e&&(this.Ne(b),e=this.description.zf(b));null==this.fa&&this.ko();this.fa[this.description.fj(e)+c]=a};c.prototype.D=function(){return 33};c.prototype.fb=function(){return 0};c.prototype.Ja=
function(){this.qc();null!=this.fa&&(this.fa[0]=NaN,this.fa[1]=NaN)};c.prototype.nm=function(b){if(null!=this.fa){for(var c=a.Od.iu(b,this.description),k=[],g=0,d=0,f=b.Aa;d<f;d++){var h=b.Hd(d),l=a.pa.Wa(h);if(-1==c[d])for(var m=a.pa.ue(h),h=0;h<l;h++)k[g]=m,g++;else for(m=this.description.fj(c[d]),h=0;h<l;h++)k[g]=this.fa[m],g++,m++}this.fa=k}this.description=b};c.prototype.ko=function(){this.iF(this.description.le.length);c.ob(this.description.le,this.fa,this.description.le.length);this.fa[0]=
NaN;this.fa[1]=NaN};c.prototype.Oe=function(b){if(b instanceof a.Bg){if(!this.sc()){var c=this.w();b.Zi(c,c);this.ic(c)}}else this.sc()||(this.Ne(1),c=this.Lw(),this.Py(b.Qn(c)))};c.prototype.copyTo=function(b){if(33!=b.D())throw a.g.N();b.qc();null==this.fa?(b.Ja(),b.fa=null,b.Qf(this.description)):(b.Qf(this.description),b.iF(this.description.le.length),c.ob(this.fa,b.fa,this.description.le.length))};c.prototype.Pa=function(){return new c(this.description)};c.prototype.s=function(){return this.sc()};
c.prototype.sc=function(){return null==this.fa||isNaN(this.fa[0])||isNaN(this.fa[1])};c.prototype.Fp=function(b){b.Ja();this.description!=b.description&&b.Qf(this.description);b.Db(this)};c.prototype.o=function(b){this.sc()?b.Ja():(b.v=this.fa[0],b.C=this.fa[1],b.B=this.fa[0],b.G=this.fa[1])};c.prototype.Cn=function(b){if(this.sc())b.Ja();else{var c=this.Lw();b.v=c.x;b.C=c.y;b.Je=c.z;b.B=c.x;b.G=c.y;b.ig=c.z}};c.prototype.Ah=function(b,c){var e=new a.Nd;if(this.sc())return e.Ja(),e;b=this.ld(b,c);
e.qa=b;e.va=b;return e};c.prototype.iF=function(b){if(null==this.fa)this.fa=a.I.Lh(b);else if(this.fa.length<b){for(var c=this.fa.slice(0),k=this.fa.length;k<b;k++)c[k]=0;this.fa=c}};c.ob=function(b,c,a){if(0<a)for(a=0;a<b.length;a++)c[a]=b[a]};c.prototype.lc=function(b){if(b==this)return!0;if(!(b instanceof c)||this.description!=b.description)return!1;if(this.sc())return b.sc()?!0:!1;for(var e=0,a=this.description.le.length;e<a;e++)if(this.fa[e]!=b.fa[e])return!1;return!0};c.prototype.hc=function(){var b=
this.description.hc();if(!this.sc())for(var c=0,k=this.description.le.length;c<k;c++)var g=this.fa[c],g=a.I.truncate(g^g>>>32),b=a.I.kg(g,b);return b};c.prototype.Rf=function(){return null};return c}(a.T);a.Va=g})(w||(w={}));(function(a){var g=function(){function a(c,b,e){void 0!==c&&(this.x=c,this.y=b,this.z=e)}a.Oa=function(c,b,e){var k=new a;k.x=c;k.y=b;k.z=e;return k};a.prototype.K=function(c,b,e){this.x=c;this.y=b;this.z=e};a.prototype.Lu=function(){this.z=this.y=this.x=0};a.prototype.normalize=
function(){var c=this.length();0==c&&(this.x/=c,this.y/=c,this.z/=c)};a.prototype.length=function(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z)};a.prototype.sub=function(c){return new a(this.x-c.x,this.y-c.y,this.z-c.z)};a.prototype.Ap=function(c){return new a(this.x*c,this.y*c,this.z*c)};a.prototype.FA=function(){this.x=NaN};a.prototype.pv=function(){return isNaN(this.x)};return a}();a.ee=g})(w||(w={}));(function(a){var g=function(){function g(c,b,e){this.gu=this.Yt=null;this.Gf=
b;this.KP=b.y-e;this.JP=b.y+e;this.xp=0;this.ix=c;this.ka=e;this.UP=e*e;this.jx=0!=e;this.xt=!1}g.prototype.result=function(){return 0!=this.xp?1:0};g.prototype.DJ=function(c){c=c.Kb(c.Gd(this.Gf,!1));return a.b.Zb(c,this.Gf)<=this.UP?!0:!1};g.prototype.WB=function(c){if(!this.jx&&(this.ix&&this.Gf.ub(c.Mb())||this.Gf.ub(c.oc())))this.xt=!0;else if(c.ja==this.Gf.y&&c.ja==c.ha){if(this.ix&&!this.jx){var b=Math.max(c.na,c.la);this.Gf.x>Math.min(c.na,c.la)&&this.Gf.x<b&&(this.xt=!0)}}else{var e=!1,b=
Math.max(c.na,c.la);this.Gf.x>b?e=!0:this.Gf.x>=Math.min(c.na,c.la)&&(e=0<c.nt(!0,this.Gf.y,this.gu,null)&&this.gu[0]<=this.Gf.x);if(e){if(this.Gf.y==c.Mb().y){if(this.Gf.y<c.oc().y)return}else if(this.Gf.y==c.oc().y&&this.Gf.y<c.Mb().y)return;this.xp=this.ix?this.xp^1:this.xp+(c.Mb().y>c.oc().y?1:-1)}}};g.prototype.zr=function(c){var b=c.Ah(0,1);if(b.qa>this.JP||b.va<this.KP)return!1;if(this.jx&&this.DJ(c))return!0;if(b.qa>this.Gf.y||b.va<this.Gf.y)return!1;null==this.Yt&&(this.Yt=[null,null,null,
null,null]);null==this.gu&&(this.gu=[0,0,0]);b=c.TC(this.Yt);if(0<b)for(c=0;c<b;c++){var e=this.Yt[c].get();this.WB(e);if(this.xt)return!0}else if(this.WB(c),this.xt)return!0;return!1};g.V=function(c,b,e){b=new g(0==c.Cm(),b,e);for(c=c.Ca();c.kb();)for(;c.La();)if(e=c.ia(),b.zr(e))return-1;return b.result()};g.Bd=function(c,b,e,k){var d=new a.i;c.dd(d);d.P(k,k);var f=new g(0==c.Cm(),e,k);c=c.Ca();var h=new a.i;h.K(d);h.B=e.x+k;h.C=e.y-k;h.G=e.y+k;e=b.xw(h,k);for(k=e.next();-1!=k;k=e.next())if(c.Sb(b.da(k)),
c.La()&&(k=c.ia(),f.zr(k)))return-1;return f.result()};g.xl=function(c,b,e){if(c.s())return 0;var k=new a.i;c.dd(k);k.P(e,e);if(!k.contains(b))return 0;k=c.pb;if(null!=k){var d=k.hi;if(null!=d){d=d.Kk(b.x,b.y);if(1==d)return 1;if(0==d)return 0}k=k.Ab;if(null!=k)return g.Bd(c,k,b,e)}return g.V(c,b,e)};g.aP=function(c,b,e,k){if(c.s())return 0;var d=new a.i;c.dd(d);d.P(k,k);if(!d.contains(b,e))return 0;d=c.pb;if(null!=d&&(d=d.hi,null!=d)){d=d.Kk(b,e);if(1==d)return 1;if(0==d)return 0}return g.V(c,a.b.Oa(b,
e),k)};g.$O=function(c,b,e){return b.s()?0:g.xl(c,b.w(),e)};g.vD=function(c,b,e,k,d){var n=new a.i;c.dd(n);n.P(k,k);if(!n.contains(e))return 0;var f=new g(!0,e,k);if(null!=d){var h=new a.i;h.K(n);h.B=e.x+k;h.C=e.y-k;h.G=e.y+k;c=c.Ca();k=d.xw(h,k);for(h=k.next();-1!=h;h=k.next())if(c.Sb(d.da(h),b),c.La()&&c.Qa==b&&(h=c.ia(),f.zr(h)))return-1}else if(c=c.Ca(),c.vy(b),c.kb())for(;c.La();)if(h=c.ia(),f.zr(h))return-1;return f.result()};g.tD=function(c,b,e){var k=new a.i;c.dd(k);k.P(e,e);if(!k.contains(b))return 0;
b=new g(!1,b,e);for(e=c.Ca();e.kb();)if(!(0>c.oo(e.Qa))){for(b.xp=0;e.La();)if(k=e.ia(),b.zr(k))return-1;if(0!=b.xp)return 1}return b.result()};g.$i=function(c,b,e,k,d){var n=c.Ca();n.vy(b);if(!n.kb()||!n.La())throw a.g.ra("corrupted geometry");for(b=2;2==b&&n.La();)b=n.ia().Kb(.5),b=g.vD(c,e,b,k,d);if(2==b)throw a.g.ra("internal error");return 1==b?!0:!1};g.An=function(c,b){c=c.F();return 16>c?!1:2*c+Math.log(c)/Math.log(2)*1*b<1*c*b};return g}();a.ff=g})(w||(w={}));(function(a){var g=function(a){function c(b){a.call(this,
!0,b)}K(c,a);c.prototype.Pa=function(){return new c(this.description)};c.prototype.fb=function(){return 2};c.prototype.D=function(){return 1736};return c}(a.al);a.Ka=g})(w||(w={}));(function(a){(function(a){a[a.PiPOutside=0]="PiPOutside";a[a.PiPInside=1]="PiPInside";a[a.PiPBoundary=2]="PiPBoundary"})(a.pI||(a.pI={}));var g=function(){function g(){}g.uD=function(c,b,e){c=a.ff.$O(c,b,e);return 0==c?0:1==c?1:2};g.he=function(c,b,e){c=a.ff.xl(c,b,e);return 0==c?0:1==c?1:2};g.CH=function(c,b,e,k){c=a.ff.aP(c,
b,e,k);return 0==c?0:1==c?1:2};g.gU=function(c,b,e,k){return 0==a.ff.vD(c,b,e,k,null)?0:1};g.tD=function(c,b,e){return 0==a.ff.tD(c,b,e)?0:1};g.ZS=function(c,b,e,k,d){if(b.length<e||d.length<e)throw a.g.N();for(var n=0;n<e;n++)d[n]=g.he(c,b[n],k)};g.eT=function(c,b,e,k,d){if(b.length/2<e||d.length<e)throw a.g.N();for(var n=0;n<e;n++)d[n]=g.CH(c,b[2*n],b[2*n+1],k)};g.nG=function(c,b,e,k,d){if(1736==c.D())g.ZS(c,b,e,k,d);else if(197==c.D()){var n=new a.i;c.o(n);g.jP(n,b,e,k,d)}else throw a.g.ra("invalid_call");
};g.nU=function(c,b,e,k,d){if(1736==c.D())g.eT(c,b,e,k,d);else if(197==c.D()){var n=new a.i;c.o(n);g.mP(n,b,e,k,d)}else throw a.g.xa();};g.jP=function(c,b,e,k,g){if(b.length<e||g.length<e)throw a.g.N();if(c.s())for(k=0;k<e;k++)g[k]=0;else for(c.P(.5*-k,.5*-k),c.P(.5*k,.5*k),k=0;k<e;k++)c.contains(b[k])?g[k]=1:c.contains(b[k])?g[k]=2:g[k]=0};g.mP=function(c,b,e,k,g){if(b.length/2<e||g.length<e)throw a.g.N();if(c.s())for(k=0;k<e;k++)g[k]=0;else for(c.P(.5*-k,.5*-k),c.P(.5*k,.5*k),k=0;k<e;k++)c.contains(b[2*
k],b[2*k+1])?g[k]=1:c.contains(b[2*k],b[2*k+1])?g[k]=2:g[k]=0};g.lT=function(c,b,e,a,g){for(var k=0;k<e;k++)g[k]=c.Eq(b[k],a)?2:0};g.hT=function(c,b,e,a,g){var k=c.pb,d=null;null!=k&&(d=k.hi);for(var k=e,n=0;n<e;n++)if(g[n]=1,null!=d){var f=b[n];0==d.Kk(f.x,f.y)&&(g[n]=0,k--)}if(0!=k)for(c=c.Ca();c.kb()&&0!=k;)for(;c.La()&&0!=k;)for(d=c.ia(),n=0;n<e&&0!=k;n++)1==g[n]&&d.Eq(b[n],a)&&(g[n]=2,k--);for(n=0;n<e;n++)1==g[n]&&(g[n]=0)};g.oG=function(c,b,e,k,d){var n=c.D();if(1607==n)g.hT(c,b,e,k,d);else if(a.T.Lc(n))g.lT(c,
b,e,k,d);else throw a.g.ra("Invalid call.");};return g}();a.gd=g})(w||(w={}));(function(a){var g=function(a){function c(b,c){2==arguments.length?(a.call(this,!1,b.description),this.df(b),this.lineTo(c)):a.call(this,!1,b)}K(c,a);c.prototype.Pa=function(){return new c(this.description)};c.prototype.fb=function(){return 1};c.prototype.D=function(){return 1607};return c}(a.al);a.Xa=g})(w||(w={}));(function(a){var g=function(){function a(){}a.GT=function(){};return a}();a.RT=g})(w||(w={}));(function(a){var g=
function(){function c(){}c.Rv=function(b){return b*c.rQ};c.aG=function(b,e){return c.cR(e-b)};c.kR=function(b){if(-360<=b&&720>b)return 0>b?b+=360:360<=b&&(b-=360),b;b=a.vi.gH(b);0>b&&(b+=360);return b};c.cR=function(b){b=c.kR(b);180<b&&(b-=360);return b};c.OT=.0174532925199433;c.rQ=57.29577951308232;return c}(),d=function(){function c(){}c.qo=function(b,c){var e=new a.i;b.o(e);var g=a.Ya.Fm(c),d=new a.i;d.K(g);d.v=e.v;d.B=e.B;d.P(.01*d.ba(),0);g=a.Ia.zd(c,e,!1);return d.contains(e)?b:a.Ed.clip(b,
d,g,0)};c.Rw=function(b,e,k,g){if(!a.Ya.Qo(e))throw a.g.N();var d=a.Ia.Cg(e,b,!1),n=a.Ya.Fm(e),f=a.Ya.Em(e),h=f.Se().Dj,l=a.Ya.ft(f),f=a.Ya.Ts(f),l=l*(2-l),m=new a.Nd;n.wu(m);var p=[[0,0],[0,0]];2==a.Nf.Am(e)?(p[0][0]=c.pu(g,m),p[0][1]=n.Vs(),a.Ya.tu(),n=p[0][0]*h):n=g*h;var q=new a.ca,r=new a.fd;b=r.Eb(b);for(var v=[0],x=new a.b,y=new a.b,z=new a.b,w=new a.b,C=new a.b,t=new a.b,D=r.Vb(b);-1!=D;D=r.bc(D)){var E=r.Cb(D);r.w(E,z);for(var F=!1,H=E=r.X(E);-1!=H;H=r.X(H)){if(H==E){if(F)break;F=!0}r.w(H,
w);if((d<g-z.x&&w.x-g>d||d<g-w.x&&z.x-g>d||d<-w.y&&z.y>d)&&!(Math.abs(z.x-w.x)>=.5*m.aa())&&(2==a.Nf.Am(e)?(p[0][0]=c.pu(z.x,m),p[0][1]=z.y,p[1][0]=c.pu(w.x,m),p[1][1]=w.y,a.Ya.YQ(),C.x=p[0][0]*h,C.y=p[0][1]*h,t.x=p[1][0]*h,t.y=p[1][1]*h):(C.x=z.x*h,C.y=z.y*h,t.x=w.x*h,t.y=w.y*h),t.x=6.283185307179586*(w.x-z.x)/m.aa()+C.x,y.x=n,y.y=c.yH(f,l,C,t,n,k),!isNaN(y.y))){a.zb.Rd(f,l,C.x,C.y,t.x,t.y,q,null,null,k);var K=q.l;a.zb.Rd(f,l,C.x,C.y,y.x,y.y,q,null,null,k);var A=q.l;2==a.Nf.Am(e)?(p[0][0]=y.x/h,
p[0][1]=y.y/h,a.Ya.qN(),x.y=p[0][1],x.x=g):(x.x=g,x.y=y.y/h);v[0]=0<K?a.I.Kr(A/K,0,1):.5;0!=v[0]&&1!=v[0]&&(K=r.Ua(H),r.Mr(K,v,1),r.ic(r.X(K),x.x,x.y))}z.J(w)}}return r.hf(b)};c.aN=function(b,e,k){if(b.s())return b;var g=a.Ya.IC(e);return c.gC(b,0-180*g,360*g,e,k)};c.yH=function(b,e,k,g,d,f){if(3.141592653589793<=Math.abs(k.x-g.x)||!c.Jv(k.x,g.x,d))return NaN;var n;k.x>g.x?n=g:(n=k,k=g);g=new a.ca(0);var h=new a.ca(0),l=new a.ca(0);a.zb.Rd(b,e,n.x,n.y,k.x,k.y,h,g,null,f);var u=h.l,m=0,p=1,q=new a.b;
for(q.J(n);u*(p-m)>1E-12*b;){var r=.5*(m+p);a.zb.dk(b,e,n.x,n.y,u*r,g.l,h,l,f);q.x=h.l;q.y=l.l;if(q.x==d)break;if(c.Jv(n.x,q.x,d))p=r;else if(c.Jv(k.x,q.x,d))m=r;else return NaN}return q.y};c.Jv=function(b,c,a){b=g.Rv(b);c=g.aG(b,g.Rv(c));a=g.aG(b,g.Rv(a));return 0==a||0<c&&0<a&&a<=c||0>c&&0>a&&a>=c?!0:!1};c.pu=function(b,c){var e=c.va-c.qa;return c.Sy(b-Math.floor((b-c.qa)/e)*e)};c.eU=function(b,c,k,g){var e=new a.Nd;e.K(c,k);k=g.aa();b=Math.floor((b-c)/k)*k+b;for(e=e.Af();Math.abs(b-e)>Math.abs(b+
k-e);)b+=k;return b};c.cU=function(b,c,k,g,d){var e;k.y>g.y?e=g:(e=k,k=g);g=new a.Nd;g.K(e.y,k.y);if(!g.contains(0)||3.141592653589793<=Math.abs(e.x-k.x))return NaN;if(e.x==k.x)return e.x;var n=new a.ca(0),f=new a.ca(0),h=new a.ca(0);a.zb.Rd(b,c,e.x,e.y,k.x,k.y,f,n,null,d);var l=f.l,u=0,m=1,p=new a.b;for(p.J(e);l*(m-u)>1E-12*b;){var q=.5*(u+m);a.zb.dk(b,c,e.x,e.y,l*q,n.l,f,h,d);p.x=f.l;p.y=h.l;g.K(e.y,p.y);if(0==p.y)break;if(g.contains(0))m=q;else if(g.K(k.y,p.y),g.contains(0))u=q;else return NaN}return p.x};
c.gC=function(b,c,k,g,d){var e=new a.i;b.o(e);if(e.s())return b;var f=new a.Nd;e.wu(f);var n=new a.Nd;n.K(c,c+k);if(n.contains(f)&&n.va!=f.va)return b;var h=new a.i;h.K(e);var l=b.D();if(33==l){h=d?b:b.vm();e=h.lk();if(e<n.qa||e>=n.va||e==n.va)e+=Math.ceil((n.qa-e)/k)*k,e=n.Sy(e),h.qS(e);return h}if(550==l){h=d?b:b.vm();g=h.mc(0);l=2*h.F();b=!1;for(d=0;d<l;d+=2)if(e=g.read(d),e<n.qa||e>=n.va||e==n.va)b=!0,e+=Math.ceil((n.qa-e)/k)*k,e=n.Sy(e),g.write(d,e);b&&h.ce(1993);return h}if(n.contains(f))return b;
if(197==l)return k=d?b:b.vm(),e.Ga(h),k.Cu(e),k;var u=.1*Math.max(e.ba(),e.aa());h.P(0,u);n=b;b=g.Ko();d=a.wi.local();for(var m=new a.Bg,p=0;;){var q=Math.floor((f.qa-c)/k),r=Math.ceil((f.va-c)/k);if(3<r-q){q=Math.floor(.5*(r+q));h.v=e.v-u;h.B=c+k*q;var v=a.Ed.clip(n,h,b,0);h.v=h.B;h.B=e.B+u;var x=a.Ed.clip(n,h,b,0);m.Nn((q-r)*k,0);x.Oe(m);1736==l?n=d.$(v,x,g,null):(n=v,n.add(x,!1));n.o(e);e.wu(f);p++}else break}h.v=c;h.B=c+k;c=new a.i;c.K(h);c.P(b,0);c=Math.floor((e.v-h.v)/k)*k;0!=c?(h.move(c,0),
m.Nn(-c,0)):m.IF();c=1607==l?new a.Xa(n.description):new a.Ka(n.description);f=new a.i;for(u=new a.i;e.B>h.v;){p=a.Ed.clip(n,h,b,0);p.o(u);if(1607==l?!p.s()&&(u.aa()>b||u.ba()>b):!p.s()&&(1736!=l||u.aa()>b))p.Oe(m),p.o(u),c.o(f),f.P(b,b),f.jc(u)&&1736==l?c=d.$(c,p,g,null):c.add(p,!1);h.move(k,0);m.shift(-k,0)}return c};c.ZQ=function(b,c,k,g){var e=new a.pe(k.description);e.Pd(k,0,-1);var e=a.Ya.Wl(e,b,c),d=k.F();g.Ja();if(!a.Ya.Qo(b)||d!=e.F())return!1;var n=new a.i;k.o(n);var f=new a.i;e.o(f);n=
n.aa();f=f.aa();if(0!=n&&0!=f){if(f/=n,b=a.Ya.Fm(c).aa()/a.Ya.Fm(b).aa(),1E-10<Math.abs(f/b-1))return!1}else if(0!=n||0!=f)return!1;g.add(k,!1);for(k=0;k<d;k++)b=e.Fa(k),g.ic(k,b);return!0};c.dU=function(){throw a.g.qe();};return c}();a.gh=d})(w||(w={}));(function(a){(function(a){a[a.rightSide=1]="rightSide"})(a.sI||(a.sI={}));var g=function(){function g(c,b,e){this.Nq=new a.b;void 0===c?this.tn=-1:(this.Nq.J(c),this.tn=b,this.Da=e,this.Ut=0)}g.prototype.UF=function(c){this.Ut=c?this.Ut|1:this.Ut&
-2};g.prototype.s=function(){return 0>this.tn};g.prototype.pw=function(){if(this.s())throw a.g.ra("invalid call");return new a.Va(this.Nq.x,this.Nq.y)};g.prototype.gb=function(){if(this.s())throw a.g.ra("invalid call");return this.tn};g.prototype.sw=function(){if(this.s())throw a.g.ra("invalid call");return this.Da};g.prototype.Xw=function(){return 0!=(this.Ut&1)};g.prototype.tv=function(c,b,e,a){this.Nq.x=c;this.Nq.y=b;this.tn=e;this.Da=a};return g}();a.dl=g})(w||(w={}));(function(a){var g=function(){function c(){}
c.prototype.Fn=function(b,c){this.Vg.resize(0);this.ai.length=0;this.Aj=-1;b.dd(this.Kj);this.Kj.P(c,c);this.Kj.jc(this.Ab.Qb)?((this.Iq=a.T.Lc(b.D()))?(this.rE=b.Mb(),this.qE=b.oc(),this.ka=c):this.ka=NaN,this.Vg.add(this.Ab.Ze),this.ai.push(this.Ab.Qb),this.ar=this.Ab.sq(this.Ab.Ze)):this.ar=-1};c.prototype.Ch=function(b,c){this.Vg.resize(0);this.ai.length=0;this.Aj=-1;this.Kj.K(b);this.Kj.P(c,c);this.ka=NaN;this.Kj.jc(this.Ab.Qb)?(this.Vg.add(this.Ab.Ze),this.ai.push(this.Ab.Qb),this.ar=this.Ab.sq(this.Ab.Ze),
this.Iq=!1):this.ar=-1};c.prototype.next=function(){if(0==this.Vg.size)return-1;this.Aj=this.ar;var b=null,c=null,k,g=null,f=null;this.Iq&&(b=new a.b,c=new a.b,g=new a.i);for(var h=!1;!h;){for(;-1!=this.Aj;){k=this.Ab.kw(this.Ab.Us(this.Aj));if(k.jc(this.Kj))if(this.Iq){if(b.J(this.rE),c.J(this.qE),g.K(k),g.P(this.ka,this.ka),0<g.Nv(b,c)){h=!0;break}}else{h=!0;break}this.Aj=this.Ab.at(this.Aj)}if(-1==this.Aj){k=this.Vg.tc();var l=this.ai[this.ai.length-1];null==f&&(f=[],f[0]=new a.i,f[1]=new a.i,
f[2]=new a.i,f[3]=new a.i);d.BF(l,f);this.Vg.af();--this.ai.length;for(l=0;4>l;l++){var m=this.Ab.zo(k,l);if(-1!=m&&0<this.Ab.gO(m)&&f[l].jc(this.Kj))if(this.Iq){if(b.J(this.rE),c.J(this.qE),g.K(f[l]),g.P(this.ka,this.ka),0<g.Nv(b,c)){var p=new a.i;p.K(f[l]);this.Vg.add(m);this.ai.push(p)}}else p=new a.i,p.K(f[l]),this.Vg.add(m),this.ai.push(p)}if(0==this.Vg.size)return-1;this.Aj=this.Ab.sq(this.Vg.get(this.Vg.size-1))}}this.ar=this.Ab.at(this.Aj);return this.Aj};c.HL=function(b,e,k){var g=new c;
g.Ab=b;g.Kj=new a.i;g.Vg=new a.ga(0);g.ai=[];g.Fn(e,k);return g};c.GL=function(b,e,k){var g=new c;g.Ab=b;g.Kj=new a.i;g.Vg=new a.ga(0);g.ai=[];g.Ch(e,k);return g};c.FL=function(b){var e=new c;e.Ab=b;e.Kj=new a.i;e.Vg=new a.ga(0);e.ai=[];return e};return c}();a.TT=g;var d=function(){function c(b,c){this.Ye=new a.Fc(11);this.qh=new a.Fc(5);this.Jq=[];this.Rt=new a.ga(0);this.Qb=new a.i;this.Rj(b,c)}c.prototype.reset=function(b,c){this.Ye.Nh(!1);this.qh.Nh(!1);this.Jq.length=0;this.Rt.clear(!1);this.Rj(b,
c)};c.prototype.lg=function(b,c){return this.lt(b,c,0,this.Qb,this.Ze,!1,-1)};c.prototype.kt=function(b,c,a){a=-1==a?this.Ze:this.KC(a);var e=this.ba(a),k=this.CN(a);return this.lt(b,c,e,k,a,!1,-1)};c.prototype.da=function(b){return this.yN(b)};c.prototype.uC=function(b){return this.kw(this.Us(b))};c.prototype.ba=function(b){return this.Xs(b)};c.prototype.CN=function(b){var c=new a.i;c.K(this.Qb);var k=this.Xs(b);b=this.EC(b);for(var g=0;g<2*k;g+=2){var d=a.I.truncate(3&b>>g);0==d?(c.v=.5*(c.v+c.B),
c.C=.5*(c.C+c.G)):1==d?(c.B=.5*(c.v+c.B),c.C=.5*(c.C+c.G)):(2==d?c.B=.5*(c.v+c.B):c.v=.5*(c.v+c.B),c.G=.5*(c.C+c.G))}return c};c.prototype.gO=function(b){return this.Kw(b)};c.prototype.KN=function(b,c){return g.HL(this,b,c)};c.prototype.xw=function(b,c){return g.GL(this,b,c)};c.prototype.Re=function(){return g.FL(this)};c.prototype.Rj=function(b,c){if(0>c||32<2*c)throw a.g.N("invalid height");this.GP=c;this.Qb.K(b);this.Ze=this.Ye.be();this.Ku(this.Ze,0);this.Eu(this.Ze,0);this.LF(this.Ze,0);this.HF(this.Ze,
0)};c.prototype.lt=function(b,e,k,g,d,f,h){if(!g.contains(e))return 0==k?-1:this.lt(b,e,0,this.Qb,this.Ze,f,h);if(!f)for(var n=d;-1!=n;n=this.UN(n))this.Ku(n,this.Kw(n)+1);n=new a.i;n.K(g);g=d;var l=[];l[0]=new a.i;l[1]=new a.i;l[2]=new a.i;for(l[3]=new a.i;k<this.GP&&this.IK(g);k++){c.BF(n,l);for(var u=!1,m=0;4>m;m++)if(l[m].contains(e)){var u=!0,p=this.zo(g,m);-1==p&&(p=this.OL(g,m));this.Ku(p,this.Kw(p)+1);g=p;n.K(l[m]);break}if(!u)break}return this.zO(b,e,k,n,g,f,d,h)};c.prototype.zO=function(b,
c,a,g,d,f,h,l){var e=this.AC(d);if(f){if(d==h)return l;this.mM(l);f=l}else f=this.QL(),this.By(f,b),this.IR(this.Us(f),c);this.gS(f,d);-1!=e?(this.Ju(f,e),this.Fu(e,f)):this.DF(d,f);this.Fy(d,f);this.Eu(d,this.Zs(d)+1);this.HK(d)&&this.$M(a,g,d);return f};c.prototype.mM=function(b){var c=this.KC(b),a=this.AC(c),g=this.$N(b),d=this.at(b);this.sq(c)==b?(-1!=d?this.Ju(d,-1):this.Fy(c,-1),this.DF(c,d)):a==b?(this.Fu(g,-1),this.Fy(c,g)):(this.Ju(d,g),this.Fu(g,d));this.Ju(b,-1);this.Fu(b,-1);this.Eu(c,
this.Zs(c)-1)};c.BF=function(b,c){var e=.5*(b.v+b.B),a=.5*(b.C+b.G);c[0].K(e,a,b.B,b.G);c[1].K(b.v,a,e,b.G);c[2].K(b.v,b.C,e,a);c[3].K(e,b.C,b.B,a)};c.prototype.HK=function(b){return 8==this.Zs(b)&&!this.VC(b)};c.prototype.$M=function(b,c,a){var e,k,g=this.sq(a);do k=this.Us(g),e=this.qh.O(g,0),k=this.kw(k),this.lt(e,k,b,c,a,!0,g),g=e=this.at(g);while(-1!=g)};c.prototype.IK=function(b){return 8<=this.Zs(b)||this.VC(b)};c.prototype.VC=function(b){return-1!=this.zo(b,0)||-1!=this.zo(b,1)||-1!=this.zo(b,
2)||-1!=this.zo(b,3)};c.prototype.OL=function(b,c){var e=this.Ye.be();this.MR(b,c,e);this.Ku(e,0);this.Eu(e,0);this.Tj(e,b);this.HF(e,this.Xs(b)+1);this.LF(e,c<<2*this.Xs(b)|this.EC(b));return e};c.prototype.QL=function(){var b=this.qh.be(),c;0<this.Rt.size?(c=this.Rt.tc(),this.Rt.af()):(c=this.Jq.length,this.Jq.push(new a.i));this.JR(b,c);return b};c.prototype.zo=function(b,c){return this.Ye.O(b,c)};c.prototype.MR=function(b,c,a){this.Ye.L(b,c,a)};c.prototype.sq=function(b){return this.Ye.O(b,4)};
c.prototype.DF=function(b,c){this.Ye.L(b,4,c)};c.prototype.AC=function(b){return this.Ye.O(b,5)};c.prototype.Fy=function(b,c){this.Ye.L(b,5,c)};c.prototype.EC=function(b){return this.Ye.O(b,6)};c.prototype.LF=function(b,c){this.Ye.L(b,6,c)};c.prototype.Zs=function(b){return this.Ye.O(b,7)};c.prototype.Kw=function(b){return this.Ye.O(b,8)};c.prototype.Eu=function(b,c){this.Ye.L(b,7,c)};c.prototype.Ku=function(b,c){this.Ye.L(b,8,c)};c.prototype.UN=function(b){return this.Ye.O(b,9)};c.prototype.Tj=function(b,
c){this.Ye.L(b,9,c)};c.prototype.Xs=function(b){return this.Ye.O(b,10)};c.prototype.HF=function(b,c){this.Ye.L(b,10,c)};c.prototype.yN=function(b){return this.qh.O(b,0)};c.prototype.By=function(b,c){this.qh.L(b,0,c)};c.prototype.$N=function(b){return this.qh.O(b,1)};c.prototype.at=function(b){return this.qh.O(b,2)};c.prototype.Ju=function(b,c){this.qh.L(b,1,c)};c.prototype.Fu=function(b,c){this.qh.L(b,2,c)};c.prototype.KC=function(b){return this.qh.O(b,3)};c.prototype.gS=function(b,c){this.qh.L(b,
3,c)};c.prototype.Us=function(b){return this.qh.O(b,4)};c.prototype.JR=function(b,c){this.qh.L(b,4,c)};c.prototype.kw=function(b){return this.Jq[b]};c.prototype.IR=function(b,c){this.Jq[b].K(c)};return c}();a.co=d})(w||(w={}));(function(a){(function(c){c[c.Outside=0]="Outside";c[c.Inside=1]="Inside";c[c.Border=2]="Border"})(a.wH||(a.wH={}));var g=function(){function c(b,c){this.Hg=null;this.SP=c;this.Hg=b}c.prototype.Bu=function(b,c){this.PD!=c&&b.flush();this.PD=c};c.prototype.XB=function(b,c){for(var e=
0;e<c;)for(var a=b[e++],g=b[e++],d=b[e++]*this.SP;a<g;a++)this.Hg[d+(a>>4)]|=this.PD<<2*(a&15)};return c}();a.VT=g;var d=function(){function c(b,c,a){this.Hg=null;this.Qx=this.Sx=this.zE=this.xE=this.Qq=this.VD=this.tf=this.Pl=0;this.ii=this.Nj=this.sk=null;this.jt(b,c,a)}c.create=function(b,e,k){if(!c.Cc(b))throw a.g.N();return c.Id(b,e,k)};c.ti=function(b,e,k){if(!c.Cc(b))throw a.g.N();return c.ye(b,e,k)};c.jR=function(b){switch(b){case 0:b=1024;break;case 1:b=16384;break;case 2:b=262144;break;
default:throw a.g.ra("Internal Error");}return b};c.Cc=function(b){return b.s()||1607!=b.D()&&1736!=b.D()?!1:!0};c.prototype.KM=function(b,c){c=c.Ca();for(var e=new a.b,g=new a.b;c.kb();)for(;c.La();){var d=c.ia();if(322!=d.D())throw a.g.ra("Internal Error");b.Zi(d.Mb(),e);b.Zi(d.oc(),g);this.ii.zv(e.x,e.y,g.x,g.y)}this.ii.fF(a.ev.$u)};c.prototype.LM=function(){throw a.g.ra("Internal Error");};c.prototype.cw=function(b,c){for(var e=1;4>e;e++)b.zv(c[e-1].x,c[e-1].y,c[e].x,c[e].y);b.zv(c[3].x,c[3].y,
c[0].x,c[0].y);this.ii.fF(a.ev.$u)};c.prototype.kG=function(b,c,k){for(var e=[null,null,null,null],g=0;g<e.length;g++)e[g]=new a.b;c=c.Ca();k=this.Nj.TS(k)+1.5;for(var g=new a.b,d=new a.b,f=new a.b,h=new a.b,l=new a.b,m=new a.i,p=new a.b;c.kb();){var q=!1,r=!0;for(p.ma(0,0);c.La();){var v=c.ia();h.x=v.na;h.y=v.ja;l.x=v.la;l.y=v.ha;m.Ja();m.Db(h.x,h.y);m.Oj(l.x,l.y);if(this.sk.rD(m)){this.Nj.Zi(l,l);r?(this.Nj.Zi(h,h),p.J(h),r=!1):h.J(p);g.pc(l,h);var v=g.length(),x=.5>v;0==v?g.ma(1,0):(x||p.J(l),
g.scale(k/v),d.ma(-g.y,g.x),f.ma(g.y,-g.x),h.sub(g),l.add(g),e[0].add(h,d),e[1].add(h,f),e[2].add(l,f),e[3].add(l,d),x?q=!0:this.cw(b,e))}else q&&(this.cw(b,e),q=!1),r=!0}q&&this.cw(b,e)}};c.prototype.fz=function(b){return a.I.truncate(b*this.VD+this.xE)};c.prototype.gz=function(b){return a.I.truncate(b*this.Qq+this.zE)};c.Id=function(b,e,a){return new c(b,e,a)};c.ye=function(b,e,a){return new c(b,e,a)};c.prototype.jt=function(b,c,k){this.tf=Math.max(a.I.truncate(2*Math.sqrt(k)+.5),64);this.Pl=a.I.truncate((2*
this.tf+31)/32);this.sk=new a.i;this.Sx=c;k=0;for(var e=this.tf,d=this.Pl;8<=e;)k+=e*d,e=a.I.truncate(e/2),d=a.I.truncate((2*e+31)/32);this.Hg=a.I.Lh(k,0);this.ii=new a.ev;k=new g(this.Hg,this.Pl,this);this.ii.vS(this.tf,this.tf,k);b.o(this.sk);this.sk.P(c,c);var e=new a.i,d=a.i.Oa(1,1,this.tf-2,this.tf-2),f=c*d.aa();c*=d.ba();e.K(this.sk.Af(),Math.max(f,this.sk.aa()),Math.max(c,this.sk.ba()));this.Qx=this.Sx;this.Nj=new a.Bg;this.Nj.wO(e,d);new a.Bg;switch(b.D()){case 550:k.Bu(this.ii,2);this.LM();
break;case 1607:k.Bu(this.ii,2);this.kG(this.ii,b,this.Qx);break;case 1736:k.Bu(this.ii,1),this.KM(this.Nj,b),k.Bu(this.ii,2),this.kG(this.ii,b,this.Qx)}this.VD=this.Nj.mb;this.Qq=this.Nj.eb;this.xE=this.Nj.Nb;this.zE=this.Nj.Ob;this.BK()};c.prototype.BK=function(){this.ii.flush();for(var b=0,c=this.tf*this.Pl,k=this.tf,g=a.I.truncate(this.tf/2),d=this.Pl,f=a.I.truncate((2*g+31)/32);8<k;){for(k=0;k<g;k++)for(var h=2*k,l=2*k+1,m=0;m<g;m++){var p=2*m,q=2*m+1,r=p>>4,p=2*(p&15),v=q>>4,q=2*(q&15),x=this.Hg[b+
d*h+r]>>p&3,x=x|this.Hg[b+d*h+v]>>q&3,x=x|this.Hg[b+d*l+r]>>p&3,x=x|this.Hg[b+d*l+v]>>q&3;this.Hg[c+f*k+(m>>4)]|=x<<2*(m&15)}k=g;d=f;b=c;g=a.I.truncate(k/2);f=a.I.truncate((2*g+31)/32);c=b+d*k}};c.prototype.Kk=function(b,c){if(!this.sk.contains(b,c))return 0;b=this.fz(b);c=this.gz(c);if(0>b||b>=this.tf||0>c||c>=this.tf)return 0;b=this.Hg[this.Pl*c+(b>>4)]>>2*(b&15)&3;return 0==b?0:1==b?1:2};c.prototype.Dn=function(b){if(!b.Ga(this.sk))return 0;var c=this.fz(b.v),k=this.fz(b.B),g=this.gz(b.C);b=this.gz(b.G);
0>c&&(c=0);0>g&&(g=0);k>=this.tf&&(k=this.tf-1);b>=this.tf&&(b=this.tf-1);if(c>k||g>b)return 0;for(var d=Math.max(k-c,1)*Math.max(b-g,1),f=0,h=this.Pl,l=this.tf,m=0;;){if(32>d||16>l){for(d=g;d<=b;d++)for(var p=c;p<=k;p++)if(m=this.Hg[f+h*d+(p>>4)]>>2*(p&15)&3,1<m)return 2;if(0==m)return 0;if(1==m)return 1}f+=h*l;l=a.I.truncate(l/2);h=a.I.truncate((2*l+31)/32);c=a.I.truncate(c/2);g=a.I.truncate(g/2);k=a.I.truncate(k/2);b=a.I.truncate(b/2);d=Math.max(k-c,1)*Math.max(b-g,1)}};c.prototype.cO=function(){return this.tf*
this.Pl};return c}();a.dA=d})(w||(w={}));(function(a){(function(c){c[c.contains=1]="contains";c[c.within=2]="within";c[c.equals=3]="equals";c[c.disjoint=4]="disjoint";c[c.touches=8]="touches";c[c.crosses=16]="crosses";c[c.overlaps=32]="overlaps";c[c.unknown=0]="unknown";c[c.intersects=1073741824]="intersects"})(a.zI||(a.zI={}));var d=function(){function c(){}c.Oa=function(b,e,a,d,g,f,h,l){var k=new c;k.Wt=b;k.Jl=e;k.Oi=a;k.ji=d;k.dE=g;k.tU=f;k.uU=h;k.vU=l;return k};return c}(),g=function(){function c(){}
c.vT=function(b,e,k){if(!c.pQ(b))return!1;var d=a.Ia.Cg(e,b,!1);e=!1;a.Wj.vB(b)&&(e=e||b.jv(d,k));d=b.D();1736!=d&&1607!=d||!a.Wj.tB(b)||0==k||(e=e||b.dj(k));1736!=d&&1607!=d||!a.Wj.uB(b)||0==k||(e=e||b.jJ());return e};c.pQ=function(b){return a.Wj.vB(b)||a.Wj.tB(b)||a.Wj.uB(b)};return c}();a.rT=g;g=function(){function c(){this.Tg=[]}c.qy=function(b,e,k,d,g){var f=b.D(),n=e.D();if(197==f){if(197==n)return c.AQ(b,e,k,d);if(33==n)return 2==d?d=1:1==d&&(d=2),c.Iz(e,b,k,d)}else if(33==f){if(197==n)return c.Iz(b,
e,k,d);if(33==n)return c.eR(b,e,k,d)}if(b.s()||e.s())return 4==d?!0:!1;var h=new a.i;b.o(h);var l=new a.i;e.o(l);var u=new a.i;u.K(h);u.Db(l);k=a.Ia.zd(k,u,!1);if(c.nj(h,l,k))return 4==d?!0:!1;h=!1;a.al.Lc(f)&&(f=new a.Xa(b.description),f.Bc(b,!0),b=f,f=1607);a.al.Lc(n)&&(n=new a.Xa(e.description),n.Bc(e,!0),e=n,n=1607);if(197!=f&&197!=n){if(b.fb()<e.fb()||33==f&&550==n)2==d?d=1:1==d&&(d=2)}else 1736!=f&&197!=n&&(2==d?d=1:1==d&&(d=2));switch(f){case 1736:switch(n){case 1736:h=c.vr(b,e,k,d,g);break;
case 1607:h=c.Vl(b,e,k,d,g);break;case 33:h=c.ur(b,e,k,d,g);break;case 550:h=c.tr(b,e,k,d,g);break;case 197:h=c.xD(b,e,k,d,g)}break;case 1607:switch(n){case 1736:h=c.Vl(e,b,k,d,g);break;case 1607:h=c.ey(b,e,k,d,g);break;case 33:h=c.xr(b,e,k,d,g);break;case 550:h=c.wr(b,e,k,d,g);break;case 197:h=c.WE(b,e,k,d)}break;case 33:switch(n){case 1736:h=c.ur(e,b,k,d,g);break;case 1607:h=c.xr(e,b,k,d,g);break;case 550:h=c.pr(e,b,k,d,g)}break;case 550:switch(n){case 1736:h=c.tr(e,b,k,d,g);break;case 1607:h=c.wr(e,
b,k,d,g);break;case 550:h=c.Wx(b,e,k,d,g);break;case 33:h=c.pr(b,e,k,d,g);break;case 197:h=c.oA(b,e,k,d)}break;case 197:switch(n){case 1736:h=c.xD(e,b,k,d,g);break;case 1607:h=c.WE(e,b,k,d);break;case 550:h=c.oA(e,b,k,d)}}return h};c.AQ=function(b,e,k,d){if(b.s()||e.s())return 4==d?!0:!1;var g=new a.i,f=new a.i,n=new a.i;b.o(g);e.o(f);n.K(g);n.Db(f);b=a.Ia.zd(k,n,!1);switch(d){case 4:return c.nj(g,f,b);case 2:return c.Bz(f,g,b);case 1:return c.Bz(g,f,b);case 3:return c.ye(g,f,b);case 8:return c.kT(g,
f,b);case 32:return c.fT(g,f,b);case 16:return c.cT(g,f,b)}return!1};c.Iz=function(b,e,k,d){if(b.s()||e.s())return 4==d?!0:!1;b=b.w();var g=new a.i,f=new a.i;e.o(g);f.K(b);f.Db(g);e=a.Ia.zd(k,f,!1);switch(d){case 4:return c.ru(b,g,e);case 2:return c.bx(b,g,e);case 1:return c.YL(b,g,e);case 3:return c.KA(b,g,e);case 8:return c.ax(b,g,e)}return!1};c.eR=function(b,e,k,d){if(b.s()||e.s())return 4==d?!0:!1;b=b.w();e=e.w();var g=new a.i;g.K(b);g.Db(e);k=a.Ia.zd(k,g,!1);switch(d){case 4:return c.rM(b,e,
k);case 2:return c.hz(e,b,k);case 1:return c.hz(b,e,k);case 3:return c.dB(b,e,k)}return!1};c.vr=function(b,e,a,d,g){switch(d){case 4:return c.dT(b,e,a);case 2:return c.su(e,b,a,g);case 1:return c.su(b,e,a,g);case 3:return c.TG(b,e,a);case 8:return c.vH(b,e,a);case 32:return c.bH(b,e,a,g)}return!1};c.Vl=function(b,e,a,d,g){switch(d){case 4:return c.gT(b,e,a);case 1:return c.dy(b,e,a,g);case 8:return c.zH(b,e,a,g);case 16:return c.lR(b,e,a)}return!1};c.ur=function(b,e,a,d){switch(d){case 4:return c.YS(b,
e,a);case 1:return c.qQ(b,e,a);case 8:return c.lH(b,e,a)}return!1};c.tr=function(b,e,a,d){switch(d){case 4:return c.OS(b,e,a);case 1:return c.hQ(b,e,a);case 8:return c.iH(b,e,a);case 16:return c.dR(b,e,a)}return!1};c.xD=function(b,e,a,d,g){if(c.ER(b,e,a))return 4==d?!0:!1;if(4==d)return!1;switch(d){case 2:return c.DH(b,e,a);case 1:return c.WP(b,e,a);case 3:return c.OG(b,e,a);case 8:return c.eH(b,e,a,g);case 32:return c.WG(b,e,a,g);case 16:return c.zQ(b,e,a,g)}return!1};c.ey=function(b,e,a,d){switch(d){case 4:return c.EI(b,
e,a);case 2:return c.JE(e,b,a);case 1:return c.JE(b,e,a);case 3:return c.QI(b,e,a);case 8:return c.cF(b,e,a);case 32:return c.$I(b,e,a);case 16:return c.LE(b,e,a)}return!1};c.xr=function(b,e,a,d){switch(d){case 4:return c.yI(b,e,a);case 1:return c.KH(b,e,a);case 8:return c.MG(b,e,a)}return!1};c.wr=function(b,e,a,d){switch(d){case 4:return c.vI(b,e,a);case 1:return c.IH(b,e,a);case 8:return c.fJ(b,e,a);case 16:return c.QH(b,e,a)}return!1};c.WE=function(b,e,a,d){if(c.nI(b,e,a))return 4==d?!0:!1;if(4==
d)return!1;switch(d){case 2:return c.WJ(b,e,a);case 1:return c.GH(b,e,a);case 3:return c.MI(b,e,a);case 8:return c.cJ(b,e,a);case 32:return c.XI(b,e,a);case 16:return c.MH(b,e,a)}return!1};c.Wx=function(b,e,a,d){switch(d){case 4:return c.xI(b,e,a);case 2:return c.kA(e,b,a);case 1:return c.kA(b,e,a);case 3:return c.LI(b,e,a);case 32:return c.bJ(b,e,a)}return!1};c.pr=function(b,e,a,d){switch(d){case 4:return c.lA(b,e,a);case 2:return c.HJ(b,e,a);case 1:return c.PH(b,e,a);case 3:return c.mu(b,e,a)}return!1};
c.oA=function(b,e,a,d){switch(d){case 4:return c.uI(b,e,a);case 2:return c.LG(b,e,a);case 1:return c.LH(b,e,a);case 3:return c.DI(b,e,a);case 8:return c.eJ(b,e,a);case 16:return c.mI(b,e,a)}return!1};c.TG=function(b,e,k){var d=new a.i,g=new a.i;b.o(d);e.o(g);if(!c.ye(d,g,k))return!1;d=c.fc(b,e,!1);if(4==d||1==d||2==d)return!1;if(c.jA(b,e,k))return!0;d=b.$b();g=e.$b();return Math.abs(d-g)>4*Math.max(b.F(),e.F())*k?!1:c.Vv(b,e,k,!0)};c.dT=function(b,e,a){var k=c.fc(b,e,!0);return 4==k?!0:1==k||2==k||
1073741824==k?!1:c.ZC(b,e,a)};c.vH=function(b,e,a){var k=c.fc(b,e,!1);return 4==k||1==k||2==k?!1:c.AE(b,e,a,null)};c.bH=function(b,e,a,d){var k=c.fc(b,e,!1);return 4==k||1==k||2==k?!1:c.wD(b,e,a,d)};c.su=function(b,e,k,d){var g=new a.i,f=new a.i;b.o(g);e.o(f);if(!c.rc(g,f,k))return!1;g=c.fc(b,e,!1);return 4==g||2==g?!1:1==g?!0:c.bC(b,e,k,d)};c.gT=function(b,e,a){var k=c.fc(b,e,!0);return 4==k?!0:1==k||1073741824==k?!1:c.ZC(b,e,a)};c.zH=function(b,e,a,d){var k=c.fc(b,e,!1);return 4==k||1==k?!1:c.CE(b,
e,a,d)};c.lR=function(b,e,a){var k=c.fc(b,e,!1);return 4==k||1==k?!1:c.YC(b,e,a,null)};c.dy=function(b,e,k,d){var g=new a.i,f=new a.i;b.o(g);e.o(f);if(!c.rc(g,f,k))return!1;g=c.fc(b,e,!1);return 4==g?!1:1==g?!0:c.jC(b,e,k,d)};c.YS=function(b,c,k){return 0==a.gd.uD(b,c,k)?!0:!1};c.lH=function(b,e,a){e=e.w();return c.yD(b,e,a)};c.qQ=function(b,a,k){a=a.w();return c.YB(b,a,k)};c.OS=function(b,e,k){var d=c.fc(b,e,!1);if(4==d)return!0;if(1==d)return!1;d=new a.i;b.o(d);d.P(k,k);for(var g=new a.b,f=0;f<
e.F();f++)if(e.w(f,g),d.contains(g)){var h=a.gd.he(b,g,k);if(1==h||2==h)return!1}return!0};c.iH=function(b,c,k){var e=this.fc(b,c,!1);if(4==e||1==e)return!1;e=new a.i;b.o(e);e.P(k,k);var d,g=!1,f;f=b;for(var h=!1,l=0;l<c.F();l++){d=c.Fa(l);if(e.contains(d))if(d=a.gd.he(f,d,k),2==d)g=!0;else if(1==d)return!1;h||(!a.ff.An(b,c.F()-1)||null!=b.pb&&null!=b.pb.Ab?f=b:(f=new a.Ka,b.copyTo(f),f.dj(1)),h=!0)}return g?!0:!1};c.dR=function(b,c,k){var e=this.fc(b,c,!1);if(4==e||1==e)return!1;var d=new a.i,e=
new a.i,g=new a.i;b.o(d);c.o(g);e.K(d);e.P(k,k);var g=d=!1,f,h;h=b;for(var l=!1,m=0;m<c.F();m++){f=c.Fa(m);e.contains(f)?(f=a.gd.he(h,f,k),0==f?g=!0:1==f&&(d=!0)):g=!0;if(d&&g)return!0;l||(!a.ff.An(b,c.F()-1)||null!=b.pb&&null!=b.pb.Ab?h=b:(h=new a.Ka,b.copyTo(h),h.dj(1)),l=!0)}return!1};c.hQ=function(b,c,k){var e=new a.i,d=new a.i;b.o(e);c.o(d);if(!this.rc(e,d,k))return!1;d=this.fc(b,c,!1);if(4==d)return!1;if(1==d)return!0;var d=!1,g,f;f=b;for(var h=!1,l=0;l<c.F();l++){g=c.Fa(l);if(!e.contains(g))return!1;
g=a.gd.he(f,g,k);if(1==g)d=!0;else if(0==g)return!1;h||(!a.ff.An(b,c.F()-1)||null!=b.pb&&null!=b.pb.Ab?f=b:(f=new a.Ka,b.copyTo(f),f.dj(1)),h=!0)}return d};c.OG=function(b,e,k){var d=new a.i,g=new a.i;b.o(d);e.o(g);if(!c.ye(d,g,k))return!1;d=new a.Ka;d.Wc(e,!1);return c.Vv(b,d,k,!0)};c.ER=function(b,e,k){var d=c.fc(b,e,!1);if(4==d)return!0;if(1==d||2==d)return!1;var g=new a.i,d=new a.i;b.o(g);e.o(d);if(c.rc(d,g,k))return!1;g=new a.b;d.Yl(g);e=a.gd.he(b,g,k);if(0!=e)return!1;d.YE(g);e=a.gd.he(b,g,
k);if(0!=e)return!1;d.Zl(g);e=a.gd.he(b,g,k);if(0!=e)return!1;d.aF(g);e=a.gd.he(b,g,k);if(0!=e)return!1;e=b.mc(0);g=new a.i;g.K(d);g.P(k,k);for(var f=0,h=b.F();f<h;f++){var l=e.read(2*f),m=e.read(2*f+1);if(g.contains(l,m))return!1}return!c.cA(b,d,k)};c.eH=function(b,e,k,d){var g=c.fc(b,e,!1);if(4==g||1==g||2==g)return!1;var g=new a.i,f=new a.i;b.o(g);e.o(f);if(c.rc(f,g,k))return!1;if(f.aa()<=k&&f.ba()<=k)return e=e.qq(),c.yD(b,e,k);if(f.aa()<=k||f.ba()<=k)return g=new a.Xa,f=new a.Va,e.uf(0,f),g.df(f),
e.uf(2,f),g.lineTo(f),c.CE(b,g,k,d);g=new a.Ka;g.Wc(e,!1);return c.AE(b,g,k,d)};c.WG=function(b,e,k,d){var g=c.fc(b,e,!1);if(4==g||1==g||2==g)return!1;var g=new a.i,f=new a.i;b.o(g);e.o(f);if(c.rc(f,g,k)||f.aa()<=k||f.ba()<=k)return!1;g=new a.Ka;g.Wc(e,!1);return c.wD(b,g,k,d)};c.DH=function(b,e,k){var d=new a.i,g=new a.i;b.o(d);e.o(g);return c.rc(g,d,k)};c.WP=function(b,e,k){var d=new a.i,g=new a.i;b.o(d);e.o(g);if(!c.rc(d,g,k))return!1;d=c.fc(b,e,!1);if(4==d||2==d)return!1;if(1==d)return!0;if(g.aa()<=
k&&g.ba()<=k)return e=e.qq(),c.YB(b,e,k);if(g.aa()<=k||g.ba()<=k)return g=new a.Xa,d=new a.Va,e.uf(0,d),g.df(d),e.uf(2,d),g.lineTo(d),c.jC(b,g,k,null);g=new a.Ka;g.Wc(e,!1);return c.bC(b,g,k,null)};c.zQ=function(b,e,k,d){var g=new a.i,f=new a.i;b.o(g);e.o(f);if(c.rc(f,g,k)||f.ba()>k&&f.aa()>k||f.ba()<=k&&f.aa()<=k)return!1;g=new a.Xa;f=new a.Va;e.uf(0,f);g.df(f);e.uf(2,f);g.lineTo(f);return c.YC(b,g,k,d)};c.QI=function(b,e,k){var d=new a.i,g=new a.i;b.o(d);e.o(g);return c.ye(d,g,k)&&4!=c.fc(b,e,!1)?
c.jA(b,e,k)?!0:c.Vv(b,e,k,!1):!1};c.EI=function(b,c,k){return 4==this.fc(b,c,!1)?!0:(new a.cl(b,c,k,!0)).next()?!this.ED(b,c,k):!1};c.cF=function(b,e,k){if(4==c.fc(b,e,!1))return!1;var d=new a.qd(0);if(0!=c.Zv(b,e,k,d))return!1;for(var g=new a.pe,f=0;f<d.size;f+=2){var h=d.read(f),l=d.read(f+1);g.zs(h,l)}b=b.Rf();e=e.Rf();b.Pd(e,0,e.F());return c.lu(b,g,k)};c.LE=function(b,e,k){if(4==c.fc(b,e,!1))return!1;var d=new a.qd(0);if(0!=c.Zv(b,e,k,d))return!1;for(var g=new a.pe,f=0;f<d.size;f+=2){var h=d.read(f),
l=d.read(f+1);g.zs(h,l)}b=b.Rf();e=e.Rf();b.Pd(e,0,e.F());return!c.lu(b,g,k)};c.$I=function(b,a,k){return 4==c.fc(b,a,!1)?!1:c.iA(b,a,k)};c.JE=function(b,e,k){var d=new a.i,g=new a.i;b.o(d);e.o(g);return c.rc(d,g,k)&&4!=c.fc(b,e,!1)?c.Wf(e,b,k,!1):!1};c.yI=function(b,a,k){if(4==c.fc(b,a,!1))return!0;a=a.w();return!c.ex(b,a,k)};c.MG=function(b,a,k){if(4==c.fc(b,a,!1))return!1;a=a.w();return c.bw(b,a,k)};c.KH=function(b,a,k){if(4==c.fc(b,a,!1))return!1;a=a.w();return c.bA(b,a,k)};c.vI=function(b,a,
k){return 4==c.fc(b,a,!1)?!0:!c.eA(b,a,k,!1)};c.fJ=function(b,c,k){if(4==this.fc(b,c,!1))return!1;var e=b.Ca(),d=new a.i,g=new a.i,f=new a.i;b.o(d);c.o(g);d.P(k,k);g.P(k,k);f.K(d);f.Ga(g);var h,l,d=null;h=b.pb;null!=h?(l=h.Ab,d=h.nn,null==l&&(l=h=a.Ia.ij(b,f))):l=h=a.Ia.ij(b,f);var m=l.Re(),p=null;null!=d&&(p=d.Re());var q=new a.b,r=new a.b,v=!1,x=k*k,d=new a.Wk(c.F());for(h=0;h<c.F();h++)d.write(h,0);for(h=0;h<c.F();h++)if(c.w(h,q),f.contains(q))if(g.K(q.x,q.y,q.x,q.y),null==p||(p.Ch(g,k),-1!=p.next())){m.Ch(g,
k);for(var y=m.next();-1!=y;y=m.next())if(e.Sb(l.da(y)),y=e.ia(),y.Kb(y.Gd(q,!1),r),a.b.Zb(q,r)<=x){d.write(h,1);v=!0;break}}if(!v)return!1;b=b.Rf();e=new a.pe;g=new a.b;for(h=0;h<c.F();h++)0!=d.read(h)&&(c.w(h,g),e.zs(g.x,g.y));return this.lu(b,e,k)};c.QH=function(b,c,k){if(4==this.fc(b,c,!1))return!1;var e=b.Ca(),d=new a.i,g=new a.i,f=new a.i;b.o(d);c.o(g);d.P(k,k);g.P(k,k);f.K(d);f.Ga(g);var h,l,d=null;h=b.pb;null!=h?(l=h.Ab,d=h.nn,null==l&&(l=h=a.Ia.ij(b,f))):l=h=a.Ia.ij(b,f);var m=l.Re(),p=null;
null!=d&&(p=d.Re());var q=new a.b,r=new a.b,v=!1,x=!1,y=k*k,d=new a.Wk(c.F());for(h=0;h<c.F();h++)d.write(h,0);for(h=0;h<c.F();h++)if(c.w(h,q),f.contains(q))if(g.K(q.x,q.y,q.x,q.y),null!=p&&(p.Ch(g,k),-1==p.next()))x=!0;else{m.Ch(g,k);for(var z=!1,w=m.next();-1!=w;w=m.next())if(e.Sb(l.da(w)),w=e.ia(),w.Kb(w.Gd(q,!1),r),a.b.Zb(q,r)<=y){d.write(h,1);z=v=!0;break}z||(x=!0)}else x=!0;if(!v||!x)return!1;b=b.Rf();e=new a.pe;g=new a.b;for(h=0;h<c.F();h++)0!=d.read(h)&&(c.w(h,g),e.zs(g.x,g.y));return!this.lu(b,
e,k)};c.IH=function(b,e,d){var k=new a.i,g=new a.i;b.o(k);e.o(g);if(!c.rc(k,g,d)||4==c.fc(b,e,!1)||!c.eA(b,e,d,!0))return!1;b=b.Rf();return!c.nA(b,e,d)};c.MI=function(b,e,d){var k=new a.i,g=new a.i;b.o(k);e.o(g);return g.ba()>d&&g.aa()>d?!1:c.ye(k,g,d)};c.nI=function(b,e,d){var k=new a.i,g=new a.i;b.o(k);e.o(g);return c.rc(g,k,d)?!1:!c.cA(b,g,d)};c.cJ=function(b,e,d){var k=new a.i,g=new a.i;b.o(k);e.o(g);if(g.ba()<=d&&g.aa()<=d)return g=e.qq(),c.bw(b,g,d);if(g.ba()<=d||g.aa()<=d)return g=new a.Xa,
k=new a.Va,e.uf(0,k),g.df(k),e.uf(2,k),g.lineTo(k),c.cF(b,g,d);b=b.Ca();e=new a.i;k=new a.i;e.K(g);k.K(g);e.P(-d,-d);k.P(d,d);for(var g=!1,f=new a.i,h=new a.i;b.kb();)for(;b.La();){b.ia().o(f);h.K(e);h.Ga(f);if(!h.s()&&(h.ba()>d||h.aa()>d))return!1;h.K(k);h.Ga(f);h.s()||(g=!0)}return g};c.XI=function(b,e,d){var k=new a.i,g=new a.i;b.o(k);e.o(g);if(c.rc(k,g,d)||c.rc(g,k,d)||c.rc(g,k,d)||g.ba()>d&&g.aa()>d||g.ba()<=d&&g.aa()<=d)return!1;k=new a.Xa;g=new a.Va;e.uf(0,g);k.df(g);e.uf(2,g);k.lineTo(g);
return c.iA(b,k,d)};c.WJ=function(b,e,d){var k=new a.i,g=new a.i;b.o(k);e.o(g);if(!c.rc(g,k,d)||g.ba()<=d&&g.aa()<=d)return!1;if(g.ba()<=d||g.aa()<=d)return c.rc(g,k,d);b=b.Ca();e=new a.i;e.K(g);e.P(-d,-d);for(var g=!1,k=new a.i,f=new a.i;b.kb();)for(;b.La();)b.ia().o(k),e.jl(k)?g=!0:(f.K(e),f.Ga(k),!f.s()&&(f.ba()>d||f.aa()>d)&&(g=!0));return g};c.GH=function(b,e,d){var k=new a.i,g=new a.i;e.o(g);b.o(k);if(!c.rc(k,g,d)||g.ba()>d&&g.aa()>d)return!1;if(g.ba()<=d&&g.aa()<=d)return e=e.qq(),c.bA(b,e,
d);k=new a.Xa;g=new a.Va;e.uf(0,g);k.df(g);e.uf(2,g);k.lineTo(g);return c.Wf(k,b,d,!1)};c.MH=function(b,e,d){var k=new a.i,g=new a.i;b.o(k);e.o(g);if(c.rc(g,k,d)||g.ba()<=d&&g.aa()<=d)return!1;if(g.ba()<=d||g.aa()<=d)return k=new a.Xa,g=new a.Va,e.uf(0,g),k.df(g),e.uf(2,g),k.lineTo(g),c.LE(b,k,d);b=b.Ca();e=new a.i;k=new a.i;k.K(g);e.K(g);k.P(-d,-d);e.P(d,d);for(var f=g=!1,h=new a.i,l=new a.i;b.kb();)for(;b.La();)if(b.ia().o(h),f||e.contains(h)||(f=!0),g||(l.K(k),l.Ga(h),!l.s()&&(l.ba()>d||l.aa()>
d)&&(g=!0)),g&&f)return!0;return!1};c.LI=function(b,e,d){var k=new a.i,g=new a.i;b.o(k);e.o(g);return c.ye(k,g,d)?c.OI(b,e,d)?!0:c.Pw(b,e,d,!1,!0,!1):!1};c.xI=function(b,a,d){return!c.nA(b,a,d)};c.bJ=function(b,a,d){return c.Pw(b,a,d,!1,!1,!0)};c.kA=function(b,e,d){var k=new a.i,g=new a.i;b.o(k);e.o(g);return c.rc(k,g,d)?c.Pw(e,b,d,!0,!1,!1):!1};c.lu=function(b,c,d){d*=d;for(var e=new a.b,k=new a.b,g=0;g<c.F();g++){c.w(g,k);for(var f=!1,h=0;h<b.F();h++)if(b.w(h,e),a.b.Zb(e,k)<=d){f=!0;break}if(!f)return!1}return!0};
c.mu=function(b,e,d){var k=new a.i,g=new a.i;b.o(k);e.o(g);return c.ye(k,g,d)};c.lA=function(b,a,d){a=a.w();return c.or(b,a,d)};c.HJ=function(b,a,d){return c.mu(b,a,d)};c.PH=function(b,a,d){return!c.lA(b,a,d)};c.DI=function(b,e,d){var k=new a.i,g=new a.i;b.o(k);e.o(g);return g.ba()>d||g.aa()>d?!1:c.ye(k,g,d)};c.uI=function(b,e,d){var k=new a.i,g=new a.i;b.o(k);e.o(g);if(c.rc(g,k,d))return!1;e=new a.i;e.K(g);e.P(d,d);d=new a.b;for(g=0;g<b.F();g++)if(b.w(g,d),e.contains(d))return!1;return!0};c.eJ=function(b,
c,d){var e=new a.i,k=new a.i,g=new a.i;c.o(e);if(e.ba()<=d&&e.aa()<=d)return!1;if(e.ba()<=d||e.aa()<=d){c=new a.b;var f=!1;k.K(e);g.K(e);k.P(d,d);e.ba()>d?g.P(0,-d):g.P(-d,0);for(var h=0;h<b.F();h++)if(b.w(h,c),k.contains(c)){if(e.ba()>d){if(c.y>g.C&&c.y<g.G)return!1}else if(c.x>g.v&&c.x<g.B)return!1;f=!0}return f}k.K(e);g.K(e);k.P(d,d);g.P(-d,-d);c=new a.b;f=!1;for(h=0;h<b.F();h++)if(b.w(h,c),k.contains(c)){if(g.jl(c))return!1;f=!0}return f};c.LG=function(b,e,d){var k=new a.i,g=new a.i;b.o(k);e.o(g);
if(!c.rc(g,k,d))return!1;if(g.ba()<=d&&g.aa()<=d)return c.ye(k,g,d);if(g.ba()<=d||g.aa()<=d){e=!1;var k=new a.i,f=new a.i;k.K(g);f.K(g);g.ba()>d?k.P(0,-d):k.P(-d,0);f.P(d,d);for(var h=new a.b,l=0;l<b.F();l++){b.w(l,h);if(!f.contains(h))return!1;g.ba()>d?h.y>k.C&&h.y<k.G&&(e=!0):h.x>k.v&&h.x<k.B&&(e=!0)}return e}e=!1;k=new a.i;f=new a.i;k.K(g);f.K(g);k.P(-d,-d);f.P(d,d);h=new a.b;for(l=0;l<b.F();l++){b.w(l,h);if(!f.contains(h))return!1;k.jl(h)&&(e=!0)}return e};c.LH=function(b,e,d){var k=new a.i,g=
new a.i;b.o(k);e.o(g);if(!c.rc(k,g,d)||g.ba()>d||g.aa()>d)return!1;e=e.qq();return!c.or(b,e,d)};c.mI=function(b,e,d){var g=new a.i,k=new a.i;b.o(g);e.o(k);if(c.rc(k,g,d)||k.ba()<=d&&k.aa()<=d)return!1;if(k.ba()<=d||k.aa()<=d){e=new a.i;g=new a.i;e.K(k);k.ba()>d?e.P(0,-d):e.P(-d,0);g.K(k);g.P(d,d);for(var f=new a.b,h=!1,l=!1,m=0;m<b.F();m++)if(b.w(m,f),h||(k.ba()>d?f.y>e.C&&f.y<e.G&&(h=!0):f.x>e.v&&f.x<e.B&&(h=!0)),l||g.contains(f)||(l=!0),h&&l)return!0;return!1}e=new a.i;g=new a.i;e.K(k);e.P(-d,-d);
g.K(k);g.P(d,d);f=new a.b;l=h=!1;for(m=0;m<b.F();m++)if(b.w(m,f),!h&&e.jl(f)&&(h=!0),l||g.contains(f)||(l=!0),h&&l)return!0;return!1};c.dB=function(b,c,d){return a.b.Zb(b,c)<=d*d?!0:!1};c.rM=function(b,c,d){return a.b.Zb(b,c)>d*d?!0:!1};c.hz=function(b,a,d){return c.dB(b,a,d)};c.KA=function(b,e,d){var g=new a.i;g.K(b);return c.ye(g,e,d)};c.ru=function(b,c,d){var e=new a.i;e.K(c);e.P(d,d);return!e.contains(b)};c.ax=function(b,c,d){if(c.ba()<=d&&c.aa()<=d)return!1;var e=new a.i,g=new a.i;e.K(c);e.P(d,
d);if(!e.contains(b))return!1;if(c.ba()<=d||c.aa()<=d){g.K(c);c.ba()>d?g.P(0,-d):g.P(-d,0);if(c.ba()>d){if(b.y>g.C&&b.y<g.G)return!1}else if(b.x>g.v&&b.x<g.B)return!1;return!0}g.K(c);g.P(-d,-d);return g.jl(b)?!1:!0};c.bx=function(b,c,d){if(c.ba()<=d&&c.aa()<=d)return!0;if(c.ba()<=d||c.aa()<=d){var e=new a.i;e.K(c);c.ba()>d?e.P(0,-d):e.P(-d,0);var g=!1;c.ba()>d?b.y>e.C&&b.y<e.G&&(g=!0):b.x>e.v&&b.x<e.B&&(g=!0);return g}e=new a.i;e.K(c);e.P(-d,-d);return e.jl(b)};c.YL=function(b,a,d){return c.KA(b,
a,d)};c.ye=function(b,a,d){return c.rc(b,a,d)&&c.rc(a,b,d)};c.nj=function(b,c,d){var e=new a.i;e.K(c);e.P(d,d);return!b.jc(e)};c.kT=function(b,e,d){if(b.ba()<=d&&b.aa()<=d){var g=b.Af();return c.ax(g,e,d)}if(e.ba()<=d&&e.aa()<=d)return g=e.Af(),c.ax(g,b,d);b.ba()>d&&b.aa()>d&&(e.ba()<=d||e.aa()<=d)?g=e:(g=b,b=e);if(g.ba()<=d||g.aa()<=d){if(b.ba()<=d||b.aa()<=d){e=new a.yb;var k=new a.yb,f=[0,0],h=[0,0],l=new a.b;g.Yl(l);e.ed(l);g.Zl(l);e.vd(l);b.Yl(l);k.ed(l);b.Zl(l);k.vd(l);e.Ga(k,null,f,h,d);return 1!=
e.Ga(k,null,null,null,d)?!1:0==f[0]||1==f[1]||0==h[0]||1==h[1]}e=new a.i;k=new a.i;e.K(b);e.P(-d,-d);k.K(e);k.Ga(g);return!k.s()&&(k.ba()>d||k.aa()>d)?!1:!0}b.P(d,d);k=new a.i;k.K(g);k.Ga(b);return k.s()||!k.s()&&k.ba()>d&&k.aa()>d?!1:!0};c.fT=function(b,e,d){if(c.rc(b,e,d)||c.rc(e,b,d)||b.ba()<=d&&b.aa()<=d||e.ba()<=d&&e.aa()<=d)return!1;if(b.ba()<=d||b.aa()<=d){if(e.ba()>d&&e.aa()>d)return!1;var g=new a.yb,k=new a.yb,f=[0,0],h=[0,0],l=new a.b;b.Yl(l);g.ed(l);b.Zl(l);g.vd(l);e.Yl(l);k.ed(l);e.Zl(l);
k.vd(l);g.Ga(k,null,f,h,d);return 2!=g.Ga(k,null,null,null,d)?!1:(0<f[0]||1>f[1])&&(0<h[0]||1>h[1])}if(e.ba()<=d||e.aa()<=d)return!1;g=new a.i;g.K(b);g.Ga(e);return g.s()||g.ba()<=d||g.aa()<=d?!1:!0};c.Bz=function(b,e,d){if(!c.rc(b,e,d))return!1;if(b.ba()<=d&&b.aa()<=d)return b=b.Af(),c.bx(b,e,d);if(e.ba()<=d&&e.aa()<=d)return e=e.Af(),c.bx(e,b,d);if(b.ba()<=d||b.aa()<=d)return c.rc(b,e,d);if(e.ba()<=d||e.aa()<=d){var g=new a.i;g.K(b);g.P(-d,-d);if(g.jl(e))return!0;b=new a.i;b.K(g);b.Ga(e);return b.s()||
b.ba()<=d&&b.aa()<=d?!1:!0}return c.rc(b,e,d)};c.cT=function(b,e,d){if(c.rc(b,e,d)||c.rc(e,b,d)||b.ba()<=d&&b.aa()<=d||e.ba()<=d&&e.aa()<=d||e.ba()>d&&e.aa()>d&&b.ba()>d&&b.aa()>d)return!1;var g;b.ba()>d&&b.aa()>d?g=e:(g=b,b=e);if(b.ba()>d&&b.aa()>d){e=new a.i;var k=new a.i;k.K(b);k.P(-d,-d);e.K(k);e.Ga(g);return e.s()||e.ba()<=d&&e.aa()<=d?!1:!0}e=new a.yb;var k=new a.yb,f=[0,0],h=[0,0],l=new a.b;g.Yl(l);e.ed(l);g.Zl(l);e.vd(l);b.Yl(l);k.ed(l);b.Zl(l);k.vd(l);e.Ga(k,null,f,h,d);return 1!=e.Ga(k,
null,null,null,d)?!1:0<f[0]&&1>f[1]&&0<h[0]&&1>h[1]};c.ZC=function(b,c,d){var e,g,k=new a.i,f=new a.i,h=new a.cl(b,c,d,!0);if(!h.next())return!0;if(this.ED(b,c,d))return!1;var l;l=b;var m;m=null;1736==c.D()&&(m=c);var p=!1,q=!1;do{e=h.jk();g=h.ek();g=c.Fa(c.Ea(g));k.K(h.Fw());k.P(d,d);if(k.contains(g)&&(g=a.gd.he(l,g,0),0!=g)||1736==c.D()&&(e=b.Fa(b.Ea(e)),f.K(h.jw()),f.P(d,d),f.contains(e)&&(g=a.gd.he(m,e,0),0!=g)))return!1;p||(!a.ff.An(b,c.ea()-1)||null!=b.pb&&null!=b.pb.Ab?l=b:(l=new a.Ka,b.copyTo(l),
l.dj(1)),p=!0);1736!=c.D()||q||(q=c,!a.ff.An(q,b.ea()-1)||null!=c.pb&&null!=c.pb.Ab?m=c:(m=new a.Ka,q.copyTo(m),m.dj(1)),q=!0)}while(h.next());return!0};c.rc=function(b,c,d){var e=new a.i;e.K(b);e.P(d,d);return e.contains(c)};c.lm=function(b,c,d){var e=new a.i;e.K(c);e.P(d,d);c=new a.b;b.Yl(c);if(!e.contains(c))return!0;b.YE(c);if(!e.contains(c))return!0;b.aF(c);if(!e.contains(c))return!0;b.Zl(c);return e.contains(c)?!1:!0};c.jA=function(b,c,d){if(b.ea()!=c.ea()||b.F()!=c.F())return!1;var e=new a.b,
g=new a.b,k=!0;d*=d;for(var f=0;f<b.ea();f++){if(b.Dc(f)!=c.Dc(f)){k=!1;break}for(var h=b.Ea(f);h<c.Dc(f);h++)if(b.w(h,e),c.w(h,g),a.b.Zb(e,g)>d){k=!1;break}if(!k)break}return k?!0:!1};c.OI=function(b,c,d){if(b.F()!=c.F())return!1;var e=new a.b,g=new a.b,k=!0;d*=d;for(var f=0;f<b.F();f++)if(b.w(f,e),c.w(f,g),a.b.Zb(e,g)>d){k=!1;break}return k?!0:!1};c.Pw=function(b,c,d,g,f,h){var e=!1,k;b.F()>c.F()?(g&&(g=!1,e=!0),k=c):(k=b,b=c);c=null;if(f||h||e){c=new a.Wk(b.F());for(var n=0;n<b.F();n++)c.write(n,
0)}var n=new a.i,l=new a.i,m=new a.i;k.o(n);b.o(l);n.P(d,d);l.P(d,d);m.K(n);m.Ga(l);for(var l=new a.b,p=new a.b,q=!0,u=a.Ia.oB(b,m),r=u.Re(),v=d*d,x=0;x<k.F();x++)if(k.w(x,l),m.contains(l)){var y=!1;n.K(l.x,l.y,l.x,l.y);r.Ch(n,d);for(var B=r.next();-1!=B&&!(B=u.da(B),b.w(B,p),a.b.Zb(l,p)<=v&&((f||h||e)&&c.write(B,1),y=!0,g));B=r.next());if(!y&&(q=!1,f||g))return!1}else{if(f||g)return!1;q=!1}if(h&&q)return!1;if(g)return!0;for(n=0;n<b.F();n++)if(1==c.read(n)){if(h)return!0}else if(f||e)return!1;return h?
!1:!0};c.nA=function(b,c,d){var e;b.F()>c.F()?e=c:(e=b,b=c);c=new a.i;var g=new a.i,k=new a.i;e.o(c);b.o(g);c.P(d,d);g.P(d,d);k.K(c);k.Ga(g);for(var g=new a.b,f=new a.b,h=d*d,l=a.Ia.oB(b,k),m=l.Re(),p=0;p<e.F();p++)if(e.w(p,g),k.contains(g)){c.K(g.x,g.y,g.x,g.y);m.Ch(c,d);for(var q=m.next();-1!=q;q=m.next())if(b.w(l.da(q),f),a.b.Zb(g,f)<=h)return!0}return!1};c.Vv=function(b,a,d,g){return c.Wf(b,a,d,g)&&c.Wf(a,b,d,g)};c.Wf=function(b,e,g,f){function k(b,c){return q.IB(b,c)}var n=!0,h=[0,0],l=[0,0],
m=0,p=new a.ga(0),q=new c,r,v=new a.i,x=new a.i,y=new a.i;b.o(v);e.o(x);v.P(g,g);x.P(g,g);y.K(v);y.Ga(x);b=b.Ca();var x=e.Ca(),z=null,w=z=null,C=e.pb;null!=C?(z=C.Ab,w=C.nn,null==z&&(z=a.Ia.ij(e,y))):z=a.Ia.ij(e,y);e=z.Re();C=null;for(null!=w&&(C=w.Re());b.kb();)for(;b.La();){var t=!1,D=b.ia();D.o(v);if(!v.jc(y))return!1;if(null!=C&&(C.Ch(v,g),-1==C.next()))return n=!1;w=D.$b();e.Fn(D,g);for(r=e.next();-1!=r;r=e.next()){x.Sb(z.da(r));r=x.ia();var E=D.Ga(r,null,h,l,g);if(2==E&&(!f||l[0]<=l[1])){var E=
h[0],F=h[1],H=l[0],K=l[1];if(E*w<=g&&(1-F)*w<=g){t=!0;m=0;p.resize(0);q.Tg.length=0;for(var A=b.Jb(),H=!0;H;){if(b.La()){D=b.ia();w=D.$b();E=D.Ga(r,null,h,l,g);if(2==E&&(!f||l[0]<=l[1])&&(E=h[0],F=h[1],E*w<=g&&(1-F)*w<=g)){A=b.Jb();continue}if(x.La()&&(r=x.ia(),E=D.Ga(r,null,h,l,g),2==E&&(!f||l[0]<=l[1])&&(E=h[0],F=h[1],E*w<=g&&(1-F)*w<=g))){A=b.Jb();continue}}H=!1}A!=b.Jb()&&(b.Sb(A),b.ia());break}else A=b.Jb(),r=d.Oa(A,b.Qa,E,F,x.Jb(),x.Qa,H,K),q.Tg.push(r),p.add(p.size)}}if(!t){if(m==q.Tg.length)return!1;
1<p.size-m&&p.xd(m,p.size,k);for(t=0;m<q.Tg.length;m++)if(r=q.Tg[p.get(m)],!(r.Oi<t&&r.ji<t)){if(w*(r.Oi-t)>g)return!1;t=r.ji;if(w*(1-t)<=g||1==t)break}if(w*(1-t)>g)return!1;m=0;p.resize(0);q.Tg.length=0}}return n};c.iA=function(b,e,d){if(1>c.Zv(b,e,d,null))return!1;var g=new a.i,k=new a.i;b.o(g);e.o(k);var f=c.lm(g,k,d),g=c.lm(k,g,d);return f&&g?!0:f&&!g?!c.Wf(e,b,d,!1):g&&!f?!c.Wf(b,e,d,!1):!c.Wf(b,e,d,!1)&&!c.Wf(e,b,d,!1)};c.Zv=function(b,e,g,f){function k(b,c){return x.IB(b,c)}var h,n;b.Iw()>
e.Iw()?(h=e,n=b):(h=b,n=e);b=h.Ca();e=n.Ca();var l=[0,0],m=[0,0],p=-1,q=0,r,v=new a.ga(0),x=new c,y,z=new a.i,w=new a.i,C=new a.i;h.o(z);n.o(w);z.P(g,g);w.P(g,g);C.K(z);C.Ga(w);h=null;null!=f&&(h=new a.b);r=w=w=null;var t=n.pb;null!=t?(w=t.Ab,r=t.nn,null==w&&(w=a.Ia.ij(n,C))):w=a.Ia.ij(n,C);n=w.Re();t=null;for(null!=r&&(t=r.Re());b.kb();)for(r=0;b.La();){var D=b.ia();D.o(z);if(z.jc(C)&&(null==t||(t.Ch(z,g),-1!=t.next()))){var E=D.$b();n.Fn(D,g);for(var F=n.next();-1!=F;F=n.next()){var H=w.da(F);e.Sb(H);
y=e.ia();var K=y.$b(),A=D.Ga(y,null,l,m,g);if(0<A){var F=l[0],p=m[0],J=2==A?l[1]:NaN,Q=2==A?m[1]:NaN;if(2==A){if(E*(J-F)>g)return p=1;var L=E*(J-F);if(e.La()){y=e.ia();A=D.Ga(y,null,l,null,g);if(2==A){var A=l[0],M=l[1],A=E*(M-A);if(L+A>g)return p=1}e.Sb(H);e.ia()}if(!e.wl()){e.oi();y=e.oi();A=D.Ga(y,null,l,null,g);if(2==A&&(A=l[0],M=l[1],A=E*(M-A),L+A>g))return p=1;e.Sb(H);e.ia()}if(b.La()){H=b.Jb();D=b.ia();A=D.Ga(y,null,l,null,g);if(2==A&&(A=l[0],M=l[1],A=E*(M-A),L+A>g))return p=1;b.Sb(H);b.ia()}if(!b.wl()){H=
b.Jb();b.oi();D=b.oi();A=D.Ga(y,null,l,null,g);if(2==A&&(A=l[0],M=l[1],A=K*(M-A),L+A>g))return p=1;b.Sb(H);b.ia()}y=d.Oa(b.Jb(),b.Qa,F,J,e.Jb(),e.Qa,p,Q);x.Tg.push(y);v.add(v.size)}p=0;null!=f&&(D.Kb(F,h),f.add(h.x),f.add(h.y))}}if(q<x.Tg.length){v.xd(q,v.size,k);D=0;for(F=x.Tg[v.get(q)].Jl;q<x.Tg.length;q++)if(y=x.Tg[v.get(q)],!(y.Oi<D&&y.ji<D))if(E*(y.Oi-D)>g)r=E*(y.ji-y.Oi),D=y.ji,F=y.Jl;else{y.Jl!=F?(r=E*(y.ji-y.Oi),F=y.Jl):r+=E*(y.ji-y.Oi);if(r>g)return p=1;D=y.ji;if(1==D)break}E*(1-D)>g&&(r=
0);q=0;v.resize(0);x.Tg.length=0}}}return p};c.ED=function(b,c,d){var e=b.Ca(),g=c.Ca();for(b=new a.cl(b,c,d,!1);b.next();){c=b.jk();var k=b.ek();e.Sb(c);g.Sb(k);c=e.ia();if(0<g.ia().Ga(c,null,null,null,d))return!0}return!1};c.eA=function(b,c,d,g){var e=b.Ca(),k=new a.i,f=new a.i,h=new a.i;b.o(k);c.o(f);k.P(d,d);k.contains(f);f.P(d,d);h.K(k);h.Ga(f);k=b.pb;null!=k?(k=k.Ab,null==k&&(k=a.Ia.ij(b,h))):k=a.Ia.ij(b,h);b=k.Re();for(var n=new a.b,l=new a.b,m=d*d,p=0;p<c.F();p++)if(c.w(p,n),h.contains(n)){f.K(n.x,
n.y,n.x,n.y);b.Ch(f,d);for(var q=!1,r=b.next();-1!=r;r=b.next())if(e.Sb(k.da(r)),r=e.ia(),r.Kb(r.Gd(n,!1),l),a.b.Zb(l,n)<=m){q=!0;break}if(g){if(!q)return!1}else if(q)return!0}return g?!0:!1};c.ex=function(b,c,d){var e=new a.b,g=d*d,k=b.Ca();b=b.pb;if(null!=b&&(b=b.Ab,null!=b)){var f=new a.i;f.K(c);d=b.xw(f,d);for(f=d.next();-1!=f;f=d.next())if(k.Sb(b.da(f)),k.La()){var f=k.ia(),h=f.Gd(c,!1);f.Kb(h,e);if(a.b.Zb(c,e)<=g)return!0}return!1}for(b=new a.i;k.kb();)for(;k.La();)if(f=k.ia(),f.o(b),b.P(d,
d),b.contains(c)&&(h=f.Gd(c,!1),f.Kb(h,e),a.b.Zb(c,e)<=g))return!0;return!1};c.bA=function(b,a,d){return c.ex(b,a,d)&&!c.bw(b,a,d)};c.bw=function(b,a,d){b=b.Rf();return!c.or(b,a,d)};c.cA=function(b,c,d){if(b.Hm()){var e=new a.yb(c.v,c.C,c.v,c.G),g=new a.yb(c.v,c.G,c.B,c.G),k=new a.yb(c.B,c.G,c.B,c.C);c=new a.yb(c.B,c.C,c.v,c.C);for(b=b.Ca();b.kb();)for(;b.La();){var f=b.ia();if(f.jc(e,d)||f.jc(g,d)||f.jc(k,d)||f.jc(c,d))return!0}}else{e=new a.i;e.K(c);e.P(d,d);d=b.mc(0);g=new a.b;k=new a.b;c=new a.b;
for(var f=new a.b,h=0,l=b.ea();h<l;h++)for(var m=!0,p=b.Ea(h),q=b.Dc(h);p<q;p++)if(m)d.ec(2*p,k),m=!1;else{d.ec(2*p,g);c.J(k);f.J(g);if(0!=e.Nv(c,f))return!0;k.J(g)}}return!1};c.fc=function(b,e,d){var g=b.D(),k=e.D();if(a.T.Th(g)){var f=b.pb;if(null!=f&&(f=f.hi,null!=f))if(33==k){var h=e.w(),h=f.Kk(h.x,h.y);if(1==h)return 1;if(0==h)return 4}else{h=new a.i;e.o(h);h=f.Dn(h);if(1==h)return 1;if(0==h)return 4;if(d&&a.T.Th(k)&&c.zz(e,f))return 1073741824}}if(a.T.Th(k)&&(f=e.pb,null!=f&&(f=f.hi,null!=f)))if(33==
g){b=b.w();h=f.Kk(b.x,b.y);if(1==h)return 2;if(0==h)return 4}else{e=new a.i;b.o(e);h=f.Dn(e);if(1==h)return 2;if(0==h)return 4;if(d&&a.T.Th(g)&&c.zz(b,f))return 1073741824}return 0};c.zz=function(b,c){for(var e=b.F(),d=new a.b,g=0;g<e;g++)if(b.w(g,d),1==c.Kk(d.x,d.y))return!0;return!1};c.AE=function(b,c,d,g){for(var e=1<=b.rj(0)&&1<=c.rj(0),k=b.Ca(),f=c.Ca(),h=[0,0],n=[0,0],l=new a.cl(b,c,d,!1),m=!1;l.next();){var p=l.jk(),q=l.ek();k.Sb(p);f.Sb(q);p=k.ia();q=f.ia().Ga(p,null,n,h,d);if(2==q){m=h[0];
q=h[1];p=p.$b();if(e&&(q-m)*p>d)return!1;m=!0}else if(0!=q){m=h[0];p=n[0];if(0<m&&1>m&&0<p&&1>p)return!1;m=!0}}if(!m)return!1;k=new a.i;f=new a.i;e=new a.i;b.o(k);c.o(f);k.P(1E3*d,1E3*d);f.P(1E3*d,1E3*d);e.K(k);e.Ga(f);return 10<b.F()&&(b=a.Ed.clip(b,e,d,0),b.s())||10<c.F()&&(c=a.Ed.clip(c,e,d,0),c.s())?!1:a.el.vr(b,c,d,"F********",g)};c.wD=function(b,e,d,g){var k=1<=b.rj(0)&&1<=e.rj(0),f=new a.i,h=new a.i,n=new a.i;b.o(f);e.o(h);for(var l=!1,m=c.lm(f,h,d),p=c.lm(h,f,d),q=b.Ca(),r=e.Ca(),v=[0,0],
x=[0,0],y=new a.cl(b,e,d,!1);y.next();){var z=y.jk(),w=y.ek();q.Sb(z);r.Sb(w);w=q.ia();z=r.ia().Ga(w,null,x,v,d);if(2==z){var z=v[0],C=v[1],w=w.$b();if(k&&(C-z)*w>d&&(l=!0,m&&p))return!0}else if(0!=z&&(z=v[0],w=x[0],0<z&&1>z&&0<w&&1>w))return!0}k=new a.i;q=new a.i;k.K(f);k.P(1E3*d,1E3*d);q.K(h);q.P(1E3*d,1E3*d);n.K(k);n.Ga(q);f="";f=l?f+"**":f+"T*";if(m){if(10<e.F()&&(e=a.Ed.clip(e,n,d,0),e.s()))return!1;f+="****"}else f+="T***";if(p){if(10<b.F()&&(b=a.Ed.clip(b,n,d,0),b.s()))return!1;f+="***"}else f+=
"T**";return a.el.vr(b,e,d,f.toString(),g)};c.bC=function(b,e,d,g){var k=[!1],f=c.wB(b,e,d,k);if(k[0])return f;k=new a.i;e.o(k);k.P(1E3*d,1E3*d);return 10<b.F()&&(b=a.Ed.clip(b,k,d,0),b.s())?!1:a.el.su(b,e,d,g)};c.wB=function(b,c,d,g){g[0]=!1;for(var e=b.Ca(),k=c.Ca(),f=[0,0],h=[0,0],n=new a.cl(b,c,d,!1),l=!1;n.next();){var m=n.jk(),p=n.ek();e.Sb(m,-1);k.Sb(p,-1);m=e.ia();m=k.ia().Ga(m,null,h,f,d);if(0!=m&&(l=!0,1==m&&(m=f[0],p=h[0],0<m&&1>m&&0<p&&1>p)))return g[0]=!0,!1}if(!l){g[0]=!0;f=new a.i;
b.o(f);f.P(d,d);n=b;l=!1;h=new a.i;g=0;for(e=c.ea();g<e;g++)if(0<c.Ha(g)){c.Ti(g,h);if(f.jc(h)){if(k=c.Fa(c.Ea(g)),k=a.ff.xl(n,k,0),0==k)return!1}else return!1;l||(!a.ff.An(b,c.ea()-1)||null!=b.pb&&null!=b.pb.Ab?n=b:(k=new a.Ka,b.copyTo(k),k.dj(1),n=k),l=!0)}if(1==b.ea()||1607==c.D())return!0;f=new a.i;c.o(f);f.P(d,d);h=c;n=!1;d=new a.i;g=0;for(e=b.ea();g<e;g++)if(0<b.Ha(g)){b.Ti(g,d);if(f.jc(d)&&(k=b.Fa(b.Ea(g)),k=a.ff.xl(h,k,0),1==k))return!1;n||(!a.ff.An(c,b.ea()-1)||null!=c.pb&&null!=c.pb.Ab?
h=c:(k=new a.Ka,c.copyTo(k),k.dj(1),h=k),n=!0)}return!0}return!1};c.CE=function(b,c,d,g){for(var e=b.Ca(),k=c.Ca(),f=[0,0],h=[0,0],n=new a.cl(b,c,d,!1),l=!1;n.next();){var m=n.jk(),p=n.ek();e.Sb(m);k.Sb(p);m=e.ia();m=k.ia().Ga(m,null,h,f,d);if(2==m)l=!0;else if(0!=m){l=f[0];m=h[0];if(0<l&&1>l&&0<m&&1>m)return!1;l=!0}}if(!l)return!1;k=new a.i;f=new a.i;e=new a.i;b.o(k);c.o(f);k.P(1E3*d,1E3*d);f.P(1E3*d,1E3*d);e.K(k);e.Ga(f);return 10<b.F()&&(b=a.Ed.clip(b,e,d,0),b.s())||10<c.F()&&(c=a.Ed.clip(c,e,
d,0),c.s())?!1:a.el.Vl(b,c,d,"F********",g)};c.YC=function(b,e,d,g){for(var k=b.Ca(),f=e.Ca(),h=[0,0],n=[0,0],l=new a.cl(b,e,d,!1),m=!1;l.next();){var p=l.jk(),q=l.ek();k.Sb(p);f.Sb(q);p=k.ia();p=f.ia().Ga(p,null,n,h,d);if(2==p)m=!0;else if(0!=p){m=h[0];p=n[0];if(0<m&&1>m&&0<p&&1>p)return!0;m=!0}}if(!m)return!1;f=new a.i;h=new a.i;n=new a.i;l=new a.i;k=new a.i;b.o(f);e.o(h);return c.lm(h,f,d)?(n.K(f),n.P(1E3*d,1E3*d),l.K(h),l.P(1E3*d,1E3*d),k.K(n),k.Ga(l),10<b.F()&&(b=a.Ed.clip(b,k,d,0),b.s())||10<
e.F()&&(e=a.Ed.clip(e,k,d,0),e.s())?!1:d=a.el.Vl(b,e,d,"T********",g)):d=a.el.Vl(b,e,d,"T*****T**",g)};c.jC=function(b,e,d,g){var k=[!1],f=c.wB(b,e,d,k);if(k[0])return f;k=new a.i;e.o(k);k.P(1E3*d,1E3*d);return 10<b.F()&&(b=a.Ed.clip(b,k,d,0),b.s())?!1:a.el.dy(b,e,d,g)};c.YB=function(b,c,d){return 1==a.gd.he(b,c,d)?!0:!1};c.yD=function(b,c,d){return 2==a.gd.he(b,c,d)?!0:!1};c.or=function(b,c,d){var e=new a.b;d*=d;for(var g=0;g<b.F();g++)if(b.w(g,e),a.b.Zb(e,c)<=d)return!1;return!0};c.prototype.IB=
function(b,c){b=this.Tg[b];c=this.Tg[c];return b.Jl<c.Jl||b.Jl==c.Jl&&(b.Wt<c.Wt||b.Wt==c.Wt&&(b.Oi<c.Oi||b.Oi==c.Oi&&(b.ji<c.ji||b.ji==c.ji&&b.dE<c.dE)))?-1:1};return c}();a.hd=g})(w||(w={}));(function(a){var d;(function(c){c[c.InteriorInterior=0]="InteriorInterior";c[c.InteriorBoundary=1]="InteriorBoundary";c[c.InteriorExterior=2]="InteriorExterior";c[c.BoundaryInterior=3]="BoundaryInterior";c[c.BoundaryBoundary=4]="BoundaryBoundary";c[c.BoundaryExterior=5]="BoundaryExterior";c[c.ExteriorInterior=
6]="ExteriorInterior";c[c.ExteriorBoundary=7]="ExteriorBoundary";c[c.ExteriorExterior=8]="ExteriorExterior"})(d||(d={}));var g;(function(c){c[c.AreaAreaPredicates=0]="AreaAreaPredicates";c[c.AreaLinePredicates=1]="AreaLinePredicates";c[c.LineLinePredicates=2]="LineLinePredicates";c[c.AreaPointPredicates=3]="AreaPointPredicates";c[c.LinePointPredicates=4]="LinePointPredicates";c[c.PointPointPredicates=5]="PointPointPredicates"})(g||(g={}));d=function(){function c(){this.Xd=0;this.h=new a.gs;this.A=
[0,0,0,0,0,0,0,0,0];this.Ta=[0,0,0,0,0,0,0,0,0];this.Y=[!1,!1,!1,!1,!1,!1,!1,!1,!1];this.Nl=this.$t=-1}c.py=function(b,c,d,g,f){if(9!=g.length)throw a.g.ra("relation string length has to be 9 characters");for(var e=0;9>e;e++){var k=g.charAt(e);if("*"!=k&&"T"!=k&&"F"!=k&&"0"!=k&&"1"!=k&&"2"!=k)throw a.g.ra("relation string");}e=this.YN(g,b.fb(),c.fb());if(0!=e)return a.hd.qy(b,c,d,e,f);e=new a.i;b.o(e);k=new a.i;c.o(k);var h=new a.i;h.K(e);h.Db(k);d=a.Ia.zd(d,h,!1);b=this.NB(b,d);c=this.NB(c,d);if(b.s()||
c.s())return this.rR(b,c,g);e=c.D();k=!1;switch(b.D()){case 1736:switch(e){case 1736:k=this.vr(b,c,d,g,f);break;case 1607:k=this.Vl(b,c,d,g,f);break;case 33:k=this.ur(b,c,d,g,f);break;case 550:k=this.tr(b,c,d,g,f)}break;case 1607:switch(e){case 1736:k=this.Vl(c,b,d,this.Lo(g),f);break;case 1607:k=this.ey(b,c,d,g,f);break;case 33:k=this.xr(b,c,d,g,f);break;case 550:k=this.wr(b,c,d,g,f)}break;case 33:switch(e){case 1736:k=this.ur(c,b,d,this.Lo(g),f);break;case 1607:k=this.xr(c,b,d,this.Lo(g),f);break;
case 33:k=this.KQ(b,c,d,g);break;case 550:k=this.pr(c,b,d,this.Lo(g),f)}break;case 550:switch(e){case 1736:k=this.tr(c,b,d,this.Lo(g),f);break;case 1607:k=this.wr(c,b,d,this.Lo(g),f);break;case 550:k=this.Wx(b,c,d,g,f);break;case 33:k=this.pr(b,c,d,g,f)}break;default:k=!1}return k};c.vr=function(b,e,d,g,f){var k=new c;k.pi();k.si(g);k.vF();var h=new a.i,n=new a.i;b.o(h);e.o(n);g=!1;a.hd.nj(h,n,d)&&(k.Bs(b,e),g=!0);g||(h=a.hd.fc(b,e,!1),4==h?(k.Bs(b,e),g=!0):1==h?(k.Bv(e),g=!0):2==h&&(k.$A(b),g=!0));
g||(g=new a.fd,b=g.Eb(b),e=g.Eb(e),k.In(g,d,f),k.so(b,e),k.h.xg());return c.Mf(k.A,k.Hc)};c.su=function(b,e,d,g){var k=new c;k.pi();k.si("T*****F**");k.vF();var f=new a.i,h=new a.i;b.o(f);e.o(h);var n=!1;a.hd.nj(f,h,d)&&(k.Bs(b,e),n=!0);n||(f=a.hd.fc(b,e,!1),4==f?(k.Bs(b,e),n=!0):1==f?(k.Bv(e),n=!0):2==f&&(k.$A(b),n=!0));if(n)return f=this.Mf(k.A,k.Hc);n=new a.fd;b=n.Eb(b);f=n.Eb(e);a.aj.$(n,d,g,!1);d=n.hf(f).Rf();n.xo(0,!0,!0);a.mm.$(n,b,-1,!1,g);if(0==n.F(b))return!1;a.mm.$(n,f,-1,!1,g);k.Op(n,
g);e=0==n.F(f);if(!e&&(k.so(b,f),k.h.xg(),f=this.Mf(k.A,k.Hc),!f))return f;b=n.hf(b);n=new a.fd;b=n.Eb(b);f=n.Eb(d);k.Op(n,g);k.Xd=0;k.pi();k.si(e?"T*****F**":"******F**");k.wy();k.so(b,f);k.h.xg();return f=this.Mf(k.A,k.Hc)};c.Vl=function(b,e,d,g,f){var k=new c;k.pi();k.si(g);k.wy();var h=new a.i,n=new a.i;b.o(h);e.o(n);g=!1;a.hd.nj(h,n,d)&&(k.Cs(b,e),g=!0);g||(h=a.hd.fc(b,e,!1),4==h?(k.Cs(b,e),g=!0):1==h&&(k.aB(e),g=!0));g||(g=new a.fd,b=g.Eb(b),e=g.Eb(e),k.In(g,d,f),k.Jg=k.h.uo(),c.es(e,k.h,k.Jg),
k.so(b,e),k.h.vo(k.Jg),k.h.xg());return c.Mf(k.A,k.Hc)};c.dy=function(b,e,d,g){var k=new c;k.pi();k.si("T*****F**");k.wy();var f=new a.i,h=new a.i;b.o(f);e.o(h);var n=!1;a.hd.nj(f,h,d)&&(k.Cs(b,e),n=!0);n||(f=a.hd.fc(b,e,!1),4==f?(k.Cs(b,e),n=!0):1==f&&(k.aB(e),n=!0));if(n)return d=this.Mf(k.A,k.Hc);n=new a.fd;b=n.Eb(b);e=n.Eb(e);k.In(n,d,g);if(0==n.F(b))return!1;k.so(b,e);k.h.xg();return d=this.Mf(k.A,k.Hc)};c.tr=function(b,e,d,g,f){var k=new c;k.pi();k.si(g);k.wF();var h=new a.i,n=new a.i;b.o(h);
e.o(n);g=!1;a.hd.nj(h,n,d)&&(k.Ds(b),g=!0);g||(h=a.hd.fc(b,e,!1),4==h?(k.Ds(b),g=!0):1==h&&(k.cK(),g=!0));g||(g=new a.fd,b=g.Eb(b),e=g.Eb(e),k.In(g,d,f),k.Pv(b,e),k.h.xg());return c.Mf(k.A,k.Hc)};c.ey=function(b,e,d,g,f){var k=new c;k.pi();k.si(g);k.ZR();g=new a.i;var h=new a.i;b.o(g);e.o(h);var n=!1;a.hd.nj(g,h,d)&&(k.CD(b,e),n=!0);n||4!=a.hd.fc(b,e,!1)||(k.CD(b,e),n=!0);n||(g=new a.fd,b=g.Eb(b),e=g.Eb(e),k.In(g,d,f),k.ph=k.h.uo(),k.Jg=k.h.uo(),c.es(b,k.h,k.ph),c.es(e,k.h,k.Jg),k.so(b,e),k.h.vo(k.ph),
k.h.vo(k.Jg),k.h.xg());return c.Mf(k.A,k.Hc)};c.wr=function(b,e,d,g,f){var k=new c;k.pi();k.si(g);k.KF();g=new a.i;var h=new a.i;b.o(g);e.o(h);var n=!1;a.hd.nj(g,h,d)&&(k.dx(b),n=!0);n||4!=a.hd.fc(b,e,!1)||(k.dx(b),n=!0);n||(g=new a.fd,b=g.Eb(b),e=g.Eb(e),k.In(g,d,f),k.ph=k.h.uo(),c.es(b,k.h,k.ph),k.Pv(b,e),k.h.vo(k.ph),k.h.xg());return c.Mf(k.A,k.Hc)};c.Wx=function(b,e,d,g,f){var k=new c;k.pi();k.si(g);k.PF();g=new a.i;var h=new a.i;b.o(g);e.o(h);var n=!1;a.hd.nj(g,h,d)&&(k.PE(),n=!0);n||(g=new a.fd,
b=g.Eb(b),e=g.Eb(e),k.In(g,d,f),k.Pv(b,e),k.h.xg());return c.Mf(k.A,k.Hc)};c.ur=function(b,e,d,g){var k=new c;k.pi();k.si(g);k.wF();var f=new a.i;b.o(f);e=e.w();var h=!1;a.hd.ru(e,f,d)&&(k.Ds(b),h=!0);h||(d=a.gd.he(b,e,d),1==d?(k.A[0]=0,k.A[2]=2,k.A[3]=-1,k.A[5]=1,k.A[6]=-1):2==d?(k.A[6]=-1,0!=b.Mh()?(k.A[0]=-1,k.A[3]=0,k.A[2]=2,k.A[5]=1):(k.A[0]=0,k.A[3]=-1,k.A[5]=-1,d=new a.i,b.o(d),k.A[2]=0==d.ba()&&0==d.aa()?-1:1)):k.Ds(b));return this.Mf(k.A,g)};c.xr=function(b,e,d,g,f){var k=new c;k.pi();k.si(g);
k.KF();var h=new a.i;b.o(h);g=e.w();var n=!1;a.hd.ru(g,h,d)&&(k.dx(b),n=!0);if(!n){var h=null,l=n=!1;if(k.Y[0]||k.Y[6])a.hd.ex(b,g,d)?(k.Y[0]&&(h=a.Hh.il(b,f),l=!a.hd.or(h,g,d),n=!0,k.A[0]=l?-1:0),k.A[6]=-1):(k.A[0]=-1,k.A[6]=0);k.Y[3]&&(null!=h&&h.s()?k.A[3]=-1:(n||(null==h&&(h=a.Hh.il(b,f)),l=!a.hd.or(h,g,d),n=!0),k.A[3]=l?0:-1));k.Y[5]&&(null!=h&&h.s()?k.A[5]=-1:n&&!l?k.A[5]=0:(null==h&&(h=a.Hh.il(b,f)),f=a.hd.mu(h,e,d),k.A[5]=f?-1:0));k.Y[2]&&(0!=b.$b()?k.A[2]=1:(f=new a.pe(b.description),f.Pd(b,
0,b.F()),b=a.hd.mu(f,e,d),k.A[2]=b?-1:0))}return this.Mf(k.A,k.Hc)};c.pr=function(b,e,d,g){var k=new c;k.pi();k.si(g);k.PF();var f=new a.i;b.o(f);e=e.w();var h=!1;a.hd.ru(e,f,d)&&(k.PE(),h=!0);if(!h){f=!1;h=!0;d*=d;for(var n=0;n<b.F();n++){var l=b.Fa(n);a.b.Zb(l,e)<=d?f=!0:h=!1;if(f&&!h)break}f?(k.A[0]=0,k.A[2]=h?-1:0,k.A[6]=-1):(k.A[0]=-1,k.A[2]=0,k.A[6]=0)}return c.Mf(k.A,g)};c.KQ=function(b,e,d,g){b=b.w();e=e.w();for(var k=[],f=0;9>f;f++)k[f]=-1;a.b.Zb(b,e)<=d*d?k[0]=0:(k[2]=0,k[6]=0);k[8]=2;return c.Mf(k,
g)};c.Mf=function(b,c){for(var a=0;9>a;a++)switch(c.charAt(a)){case "T":if(-1==b[a])return!1;break;case "F":if(-1!=b[a])return!1;break;case "0":if(0!=b[a])return!1;break;case "1":if(1!=b[a])return!1;break;case "2":if(2!=b[a])return!1}return!0};c.rR=function(b,c,d){var e=[-1,-1,-1,-1,-1,-1,-1,-1,-1];if(b.s()&&c.s()){for(var g=0;9>g;g++)e[g]=-1;return this.Mf(e,d)}g=!1;b.s()&&(b=c,g=!0);e[0]=-1;e[1]=-1;e[3]=-1;e[4]=-1;e[6]=-1;e[7]=-1;e[8]=2;c=b.D();a.T.Kc(c)?1736==c?0!=b.Mh()?(e[2]=2,e[5]=1):(e[5]=
-1,c=new a.i,b.o(c),e[2]=0==c.ba()&&0==c.aa()?0:1):(c=0!=b.$b(),e[2]=c?1:0,e[5]=a.Hh.No(b)?0:-1):(e[2]=0,e[5]=-1);g&&this.qG(e);return this.Mf(e,d)};c.YN=function(b,a,d){return c.mT(b)?3:c.NS(b)?4:c.nT(b,a,d)?8:c.CR(b,a,d)?16:c.yQ(b)?1:c.LK(b,a,d)?32:0};c.mT=function(b){return"T"==b.charAt(0)&&"*"==b.charAt(1)&&"F"==b.charAt(2)&&"*"==b.charAt(3)&&"*"==b.charAt(4)&&"F"==b.charAt(5)&&"F"==b.charAt(6)&&"F"==b.charAt(7)&&"*"==b.charAt(8)?!0:!1};c.NS=function(b){return"F"==b.charAt(0)&&"F"==b.charAt(1)&&
"*"==b.charAt(2)&&"F"==b.charAt(3)&&"F"==b.charAt(4)&&"*"==b.charAt(5)&&"*"==b.charAt(6)&&"*"==b.charAt(7)&&"*"==b.charAt(8)?!0:!1};c.nT=function(b,c,a){if(0==c&&0==a)return!1;if(2!=c||2!=a)if("F"==b.charAt(0)&&"*"==b.charAt(1)&&"*"==b.charAt(2)&&"T"==b.charAt(3)&&"*"==b.charAt(4)&&"*"==b.charAt(5)&&"*"==b.charAt(6)&&"*"==b.charAt(7)&&"*"==b.charAt(8)||1==c&&1==a&&"F"==b.charAt(0)&&"T"==b.charAt(1)&&"*"==b.charAt(2)&&"*"==b.charAt(3)&&"*"==b.charAt(4)&&"*"==b.charAt(5)&&"*"==b.charAt(6)&&"*"==b.charAt(7)&&
"*"==b.charAt(8))return!0;return 0!=a&&"F"==b.charAt(0)&&"*"==b.charAt(1)&&"*"==b.charAt(2)&&"*"==b.charAt(3)&&"T"==b.charAt(4)&&"*"==b.charAt(5)&&"*"==b.charAt(6)&&"*"==b.charAt(7)&&"*"==b.charAt(8)?!0:!1};c.CR=function(b,c,a){return c>a?"T"==b.charAt(0)&&"*"==b.charAt(1)&&"*"==b.charAt(2)&&"*"==b.charAt(3)&&"*"==b.charAt(4)&&"*"==b.charAt(5)&&"T"==b.charAt(6)&&"*"==b.charAt(7)&&"*"==b.charAt(8)?!0:!1:1==c&&1==a&&"0"==b.charAt(0)&&"*"==b.charAt(1)&&"*"==b.charAt(2)&&"*"==b.charAt(3)&&"*"==b.charAt(4)&&
"*"==b.charAt(5)&&"*"==b.charAt(6)&&"*"==b.charAt(7)&&"*"==b.charAt(8)?!0:!1};c.yQ=function(b){return"T"==b.charAt(0)&&"*"==b.charAt(1)&&"*"==b.charAt(2)&&"*"==b.charAt(3)&&"*"==b.charAt(4)&&"*"==b.charAt(5)&&"F"==b.charAt(6)&&"F"==b.charAt(7)&&"*"==b.charAt(8)?!0:!1};c.LK=function(b,c,a){if(c==a){if(1!=c)return"T"==b.charAt(0)&&"*"==b.charAt(1)&&"T"==b.charAt(2)&&"*"==b.charAt(3)&&"*"==b.charAt(4)&&"*"==b.charAt(5)&&"T"==b.charAt(6)&&"*"==b.charAt(7)&&"*"==b.charAt(8)?!0:!1;if("1"==b.charAt(0)&&
"*"==b.charAt(1)&&"T"==b.charAt(2)&&"*"==b.charAt(3)&&"*"==b.charAt(4)&&"*"==b.charAt(5)&&"T"==b.charAt(6)&&"*"==b.charAt(7)&&"*"==b.charAt(8))return!0}return!1};c.es=function(b,c,a){b=c.ya(b);for(var e=c.Be;-1!=e;e=c.Bf(e))if(0!=(c.md(e)&b)){var d=c.te(e);if(-1==d)c.fm(e,a,0);else{var g=d,k=0;do 0!=(c.Gg(g)&b)&&k++,g=c.Wb(c.sa(g));while(g!=d);c.fm(e,a,k)}}};c.Lo=function(b){var c;c=""+b.charAt(0);c+=b.charAt(3);c+=b.charAt(6);c+=b.charAt(1);c+=b.charAt(4);c+=b.charAt(7);c+=b.charAt(2);c+=b.charAt(5);
return c+=b.charAt(8)};c.prototype.pi=function(){for(var b=0;9>b;b++)this.A[b]=-2,this.Ta[b]=-2};c.qG=function(b){var c=b[1],a=b[2],d=b[5];b[1]=b[3];b[2]=b[6];b[5]=b[7];b[3]=c;b[6]=a;b[7]=d};c.prototype.si=function(b){this.Hc=b;for(b=0;9>b;b++)"*"!=this.Hc.charAt(b)?(this.Y[b]=!0,this.Xd++):this.Y[b]=!1};c.prototype.SF=function(){for(var b=0;9>b;b++)this.Y[b]&&-2==this.A[b]&&(this.A[b]=-1,this.Y[b]=!1)};c.prototype.dc=function(b){if(-2==this.A[b])return!1;if(-1==this.A[b])return this.Y[b]=!1,this.Xd--,
!0;if("T"!=this.Hc.charAt(b)&&"F"!=this.Hc.charAt(b)){if(this.A[b]<this.Ta[b])return!1;this.Y[b]=!1;this.Xd--;return!0}this.Y[b]=!1;this.Xd--;return!0};c.prototype.vF=function(){this.$t=0;this.Ta[0]=2;this.Ta[1]=1;this.Ta[2]=2;this.Ta[3]=1;this.Ta[4]=1;this.Ta[5]=1;this.Ta[6]=2;this.Ta[7]=1;this.Ta[8]=2;this.Y[8]&&(this.A[8]=2,this.Y[8]=!1,this.Xd--)};c.prototype.wy=function(){this.$t=1;this.Nl=3;this.Ta[0]=1;this.Ta[1]=0;this.Ta[2]=2;this.Ta[3]=1;this.Ta[4]=0;this.Ta[5]=1;this.Ta[6]=1;this.Ta[7]=
0;this.Ta[8]=2;this.Y[8]&&(this.A[8]=2,this.Y[8]=!1,this.Xd--)};c.prototype.ZR=function(){this.$t=2;this.Nl=4;this.Ta[0]=1;this.Ta[1]=0;this.Ta[2]=1;this.Ta[3]=0;this.Ta[4]=0;this.Ta[5]=0;this.Ta[6]=1;this.Ta[7]=0;this.Ta[8]=2;this.Y[8]&&(this.A[8]=2,this.Y[8]=!1,this.Xd--)};c.prototype.wF=function(){this.Nl=3;this.Ta[0]=0;this.Ta[1]=-1;this.Ta[2]=2;this.Ta[3]=0;this.Ta[4]=-1;this.Ta[5]=1;this.Ta[6]=0;this.Ta[7]=-1;this.Ta[8]=2;this.Y[1]&&(this.A[1]=-1,this.Y[1]=!1,this.Xd--);this.Y[4]&&(this.A[4]=
-1,this.Y[4]=!1,this.Xd--);this.Y[7]&&(this.A[7]=-1,this.Y[7]=!1,this.Xd--);this.Y[8]&&(this.A[8]=2,this.Y[8]=!1,this.Xd--)};c.prototype.KF=function(){this.Nl=4;this.Ta[0]=0;this.Ta[1]=-1;this.Ta[2]=1;this.Ta[3]=0;this.Ta[4]=-1;this.Ta[5]=0;this.Ta[6]=0;this.Ta[7]=-1;this.Ta[8]=2;this.Y[1]&&(this.A[1]=-1,this.Y[1]=!1,this.Xd--);this.Y[4]&&(this.A[4]=-1,this.Y[4]=!1,this.Xd--);this.Y[7]&&(this.A[7]=-1,this.Y[7]=!1,this.Xd--);this.Y[8]&&(this.A[8]=2,this.Y[8]=!1,this.Xd--)};c.prototype.PF=function(){this.Nl=
5;this.Ta[0]=0;this.Ta[1]=-1;this.Ta[2]=0;this.Ta[3]=-1;this.Ta[4]=-1;this.Ta[5]=-1;this.Ta[6]=0;this.Ta[7]=-1;this.Ta[8]=2;this.Y[1]&&(this.A[1]=-1,this.Y[1]=!1,this.Xd--);this.Y[3]&&(this.A[3]=-1,this.Y[3]=!1,this.Xd--);this.Y[4]&&(this.A[4]=-1,this.Y[4]=!1,this.Xd--);this.Y[5]&&(this.A[5]=-1,this.Y[5]=!1,this.Xd--);this.Y[7]&&(this.A[7]=-1,this.Y[7]=!1,this.Xd--);this.Y[8]&&(this.A[8]=2,this.Y[8]=!1,this.Xd--)};c.prototype.aK=function(b,c,a){var e=!0;this.Y[0]&&(this.HO(b,c,a),e=e&&this.dc(0));
this.Y[1]&&(this.eD(b,c,1),e=e&&this.dc(1));this.Y[2]&&(this.fD(b,c,a,2),e=e&&this.dc(2));this.Y[3]&&(this.eD(b,a,3),e=e&&this.dc(3));this.Y[4]&&(this.gK(b,c,a),e=e&&this.dc(4));this.Y[5]&&(this.eB(b,a,5),e=e&&this.dc(5));this.Y[6]&&(this.fD(b,a,c,6),e=e&&this.dc(6));this.Y[7]&&(this.eB(b,c,7),e=e&&this.dc(7));return e};c.prototype.Bs=function(b,c){this.A[0]=-1;this.A[1]=-1;this.A[3]=-1;this.A[4]=-1;this.iq(b,this.Y[2]?2:-1,this.Hc.charAt(2),this.Y[5]?5:-1,this.Hc.charAt(5));this.iq(c,this.Y[6]?6:
-1,this.Hc.charAt(6),this.Y[7]?7:-1,this.Hc.charAt(7))};c.prototype.iq=function(b,c,d,g,f){if(-1!=c||-1!=g)("T"!=d&&"F"!=d&&-1!=c||"T"!=f&&"F"!=f&&-1!=g?0!=b.Mh():1)?(-1!=c&&(this.A[c]=2),-1!=g&&(this.A[g]=1)):(-1!=g&&(this.A[g]=-1),-1!=c&&(d=new a.i,b.o(d),this.A[c]=0==d.ba()&&0==d.aa()?0:1))};c.prototype.Bv=function(b){this.A[2]=2;this.A[3]=-1;this.A[4]=-1;this.A[5]=1;this.A[6]=-1;this.A[7]=-1;this.iq(b,this.Y[0]?0:-1,this.Hc.charAt(0),this.Y[1]?1:-1,this.Hc.charAt(1))};c.prototype.$A=function(b){this.Bv(b);
c.qG(this.A)};c.prototype.Cs=function(b,c){this.A[0]=-1;this.A[1]=-1;this.A[3]=-1;this.A[4]=-1;if(this.Y[6]){var e=this.Hc.charAt(6),e="T"!=e&&"F"!=e?0!=c.$b():!0;this.A[6]=e?1:0}this.Y[7]&&(e=a.Hh.No(c),this.A[7]=e?0:-1);this.iq(b,this.Y[2]?2:-1,this.Hc.charAt(2),this.Y[5]?5:-1,this.Hc.charAt(5))};c.prototype.aB=function(b){if(this.Y[0]){var c=this.Hc.charAt(0),c="T"!=c&&"F"!=c?0!=b.$b():!0;this.A[0]=c?1:0}this.Y[1]&&(b=a.Hh.No(b),this.A[1]=b?0:-1);this.A[2]=2;this.A[3]=-1;this.A[4]=-1;this.A[5]=
1;this.A[6]=-1;this.A[7]=-1};c.prototype.Ds=function(b){this.A[0]=-1;this.A[3]=-1;this.A[6]=0;this.iq(b,this.Y[2]?2:-1,this.Hc.charAt(2),this.Y[5]?5:-1,this.Hc.charAt(5))};c.prototype.cK=function(){this.A[0]=0;this.A[2]=2;this.A[3]=-1;this.A[5]=1;this.A[6]=-1};c.prototype.CD=function(b,c){this.A[0]=-1;this.A[1]=-1;this.A[3]=-1;this.A[4]=-1;if(this.Y[2]){var e=this.Hc.charAt(2),e="T"!=e&&"F"!=e?0!=b.$b():!0;this.A[2]=e?1:0}this.Y[5]&&(e=a.Hh.No(b),this.A[5]=e?0:-1);this.Y[6]&&(e=this.Hc.charAt(6),
e="T"!=e&&"F"!=e?0!=c.$b():!0,this.A[6]=e?1:0);this.Y[7]&&(e=a.Hh.No(c),this.A[7]=e?0:-1)};c.prototype.dx=function(b){this.A[0]=-1;this.A[3]=-1;if(this.Y[2]){var c=this.Hc.charAt(2),c="T"!=c&&"F"!=c?0!=b.$b():!0;this.A[2]=c?1:0}this.Y[5]&&(b=a.Hh.No(b),this.A[5]=b?0:-1);this.A[6]=0};c.prototype.PE=function(){this.A[0]=-1;this.A[2]=0;this.A[6]=0};c.prototype.bK=function(b,c,a){var e=!0;this.Y[0]&&(this.IO(b,c),e=e&&this.dc(0));this.Y[1]&&(this.EO(b,c,a,this.Jg),e=e&&this.dc(1));this.Y[2]&&(this.FO(b,
c),e=e&&this.dc(2));this.Y[3]&&(this.kK(b,c,a,this.Jg),e=e&&this.dc(3));this.Y[4]&&(this.hK(b,c,a,this.Jg),e=e&&this.dc(4));this.Y[5]&&(this.iK(b,c,a),e=e&&this.dc(5));this.Y[6]&&(this.BM(b,c),e=e&&this.dc(6));this.Y[7]&&(this.AM(b,c,a,this.Jg),e=e&&this.dc(7));return e};c.prototype.uP=function(b,c,a){var e=!0;this.Y[0]&&(this.LO(b,c,a,this.ph,this.Jg),e=e&&this.dc(0));this.Y[1]&&(this.gD(b,c,a,this.ph,this.Jg,1),e=e&&this.dc(1));this.Y[2]&&(this.hD(b,c,a,2),e=e&&this.dc(2));this.Y[3]&&(this.gD(b,
a,c,this.Jg,this.ph,3),e=e&&this.dc(3));this.Y[4]&&(this.mK(b,c,a,this.ph,this.Jg),e=e&&this.dc(4));this.Y[5]&&(this.fB(b,a,this.ph,5),e=e&&this.dc(5));this.Y[6]&&(this.hD(b,a,c,6),e=e&&this.dc(6));this.Y[7]&&(this.fB(b,c,this.Jg,7),e=e&&this.dc(7));return e};c.prototype.bB=function(b,c,a){var e=!0;this.Y[0]&&(this.JO(b,c),e=e&&this.dc(0));this.Y[2]&&(this.GO(b,c),e=e&&this.dc(2));this.Y[3]&&(this.lK(b,c,a),e=e&&this.dc(3));this.Y[5]&&(this.jK(b,c),e=e&&this.dc(5));this.Y[6]&&(this.CM(b,c),e=e&&this.dc(6));
return e};c.prototype.DD=function(b,c,a){var e=!0;this.Y[0]&&(this.MO(b,c,a,this.ph),e=e&&this.dc(0));this.Y[2]&&(this.KO(b,a),e=e&&this.dc(2));this.Y[3]&&(this.oK(b,c,a,this.ph),e=e&&this.dc(3));this.Y[5]&&(this.nK(b,c,a,this.ph),e=e&&this.dc(5));this.Y[6]&&(this.DM(b,c,a),e=e&&this.dc(6));return e};c.prototype.JQ=function(b,c,a){var e=!0;this.Y[0]&&(this.NO(b,c,a),e=e&&this.dc(0));this.Y[2]&&(this.iD(b,c,a,2),e=e&&this.dc(2));this.Y[6]&&(this.iD(b,a,c,6),e=e&&this.dc(6));return e};c.prototype.HO=
function(b,c,a){2!=this.A[0]&&(b=this.h.Qe(b),0!=(b&c)&&0!=(b&a)&&(this.A[0]=2))};c.prototype.eD=function(b,c,a){if(1!=this.A[a]){var e=this.h.Qe(this.h.sa(b));0!=(this.h.Qe(b)&c)&&0!=(e&c)&&(this.A[a]=1)}};c.prototype.fD=function(b,c,a,d){2!=this.A[d]&&(b=this.h.Qe(b),0!=(b&c)&&0==(b&a)&&(this.A[d]=2))};c.prototype.gK=function(b,c,a){if(1!=this.A[4]){var e=this.h.Gg(b);0!=(e&c)&&0!=(e&a)?this.A[4]=1:0!=this.A[4]&&1!=this.h.tb(this.h.fe(this.h.sa(b)),this.ni)&&(b=this.h.md(this.h.jf(b)),0!=(b&c)&&
0!=(b&a)&&(this.A[4]=0))}};c.prototype.eB=function(b,c,a){if(1!=this.A[a]){var e=this.h.Qe(this.h.sa(b));0==(this.h.Qe(b)&c)&&0==(e&c)&&(this.A[a]=1)}};c.prototype.IO=function(b,c){if(1!=this.A[0]){var a=this.h.Qe(this.h.sa(b));0!=(this.h.Qe(b)&c)&&0!=(a&c)&&(this.A[0]=1)}};c.prototype.EO=function(b,c,a,d){if(0!=this.A[1]&&1!=this.h.tb(this.h.fe(this.h.sa(b)),this.ni)){var e=this.h.jf(b),g=this.h.md(e);0==(g&c)&&0!=(this.h.Qe(b)&c)&&(b=this.h.Sf(e,d),0!=(g&a)&&0!=b%2&&(this.A[1]=0))}};c.prototype.FO=
function(b,c){2!=this.A[2]&&0!=(this.h.Gg(b)&c)&&(this.A[2]=2)};c.prototype.kK=function(b,c,a,d){if(1!=this.A[3]){var e=this.h.Gg(b);0!=(e&c)&&0!=(e&a)?this.A[3]=1:0!=this.A[3]&&1!=this.h.tb(this.h.fe(this.h.sa(b)),this.ni)&&(e=this.h.jf(b),b=this.h.md(e),0!=(b&c)&&(c=this.h.Sf(e,d),0!=(b&a)&&0==c%2&&(this.A[3]=0)))}};c.prototype.hK=function(b,c,a,d){if(0!=this.A[4]&&1!=this.h.tb(this.h.fe(this.h.sa(b)),this.ni)){var e=this.h.jf(b);b=this.h.md(e);0!=(b&c)&&(c=this.h.Sf(e,d),0!=(b&a)&&0!=c%2&&(this.A[4]=
0))}};c.prototype.iK=function(b,c,a){1!=this.A[5]&&(b=this.h.Gg(b),0!=(b&c)&&0==(b&a)&&(this.A[5]=1))};c.prototype.BM=function(b,c){if(1!=this.A[6]){var a=this.h.Qe(this.h.sa(b));0==(this.h.Qe(b)&c)&&0==(a&c)&&(this.A[6]=1)}};c.prototype.AM=function(b,c,a,d){if(0!=this.A[7]&&1!=this.h.tb(this.h.fe(this.h.sa(b)),this.ni)){var e=this.h.jf(b),g=this.h.md(e);0==(g&c)&&0==(this.h.Qe(b)&c)&&(b=this.h.Sf(e,d),0!=(g&a)&&0!=b%2&&(this.A[7]=0))}};c.prototype.LO=function(b,c,a,d,g){if(1!=this.A[0]){var e=this.h.Gg(b);
0!=(e&c)&&0!=(e&a)?this.A[0]=1:0!=this.A[0]&&1!=this.h.tb(this.h.fe(this.h.sa(b)),this.ni)&&(b=this.h.jf(b),e=this.h.md(b),0!=(e&c)&&0!=(e&a)&&(c=this.h.Sf(b,d),g=this.h.Sf(b,g),0==c%2&&0==g%2&&(this.A[0]=0)))}};c.prototype.gD=function(b,c,a,d,g,f){if(0!=this.A[f]&&1!=this.h.tb(this.h.fe(this.h.sa(b)),this.ni)){b=this.h.jf(b);var e=this.h.md(b);0!=(e&c)&&0!=(e&a)&&(c=this.h.Sf(b,d),g=this.h.Sf(b,g),0==c%2&&0!=g%2&&(this.A[f]=0))}};c.prototype.hD=function(b,c,a,d){1!=this.A[d]&&(b=this.h.Gg(b),0!=
(b&c)&&0==(b&a)&&(this.A[d]=1))};c.prototype.mK=function(b,c,a,d,g){if(0!=this.A[4]&&1!=this.h.tb(this.h.fe(this.h.sa(b)),this.ni)){b=this.h.jf(b);var e=this.h.md(b);0!=(e&c)&&0!=(e&a)&&(c=this.h.Sf(b,d),g=this.h.Sf(b,g),0!=c%2&&0!=g%2&&(this.A[4]=0))}};c.prototype.fB=function(b,c,a,d){0!=this.A[d]&&1!=this.h.tb(this.h.fe(this.h.sa(b)),this.ni)&&(b=this.h.jf(b),0==(this.h.md(b)&c)&&0!=this.h.Sf(b,a)%2&&(this.A[d]=0))};c.prototype.JO=function(b,c){0!=this.A[0]&&0==(this.h.md(b)&c)&&0!=(this.h.pj(this.h.mw(b))&
c)&&(this.A[0]=0)};c.prototype.GO=function(b,c){2!=this.A[2]&&0!=(this.h.md(b)&c)&&(this.A[2]=2)};c.prototype.lK=function(b,c,a){0!=this.A[3]&&(b=this.h.md(b),0!=(b&c)&&0!=(b&a)&&(this.A[3]=0))};c.prototype.jK=function(b,c){1!=this.A[5]&&0!=(this.h.md(b)&c)&&(this.A[5]=1)};c.prototype.CM=function(b,c){0!=this.A[6]&&0==(this.h.md(b)&c)&&0==(this.h.pj(this.h.mw(b))&c)&&(this.A[6]=0)};c.prototype.MO=function(b,c,a,d){if(0!=this.A[0]){var e=this.h.md(b);0!=(e&c)&&0!=(e&a)&&0==this.h.Sf(b,d)%2&&(this.A[0]=
0)}};c.prototype.KO=function(b,c){1!=this.A[2]&&(-1!=this.h.te(b)?this.A[2]=1:0!=this.A[2]&&0==(this.h.md(b)&c)&&(this.A[2]=0))};c.prototype.oK=function(b,c,a,d){if(0!=this.A[3]){var e=this.h.md(b);0!=(e&c)&&0!=(e&a)&&0!=this.h.Sf(b,d)%2&&(this.A[3]=0)}};c.prototype.nK=function(b,c,a,d){if(0!=this.A[5]){var e=this.h.md(b);0!=(e&c)&&0==(e&a)&&0!=this.h.Sf(b,d)%2&&(this.A[5]=0)}};c.prototype.DM=function(b,c,a){0!=this.A[6]&&(b=this.h.md(b),0==(b&c)&&0!=(b&a)&&(this.A[6]=0))};c.prototype.NO=function(b,
c,a){0!=this.A[0]&&(b=this.h.md(b),0!=(b&c)&&0!=(b&a)&&(this.A[0]=0))};c.prototype.iD=function(b,c,a,d){0!=this.A[d]&&(b=this.h.md(b),0!=(b&c)&&0==(b&a)&&(this.A[d]=0))};c.prototype.so=function(b,c){var e=!1;b=this.h.ya(b);c=this.h.ya(c);this.ni=this.h.Eg();for(var d=this.h.Be;-1!=d;d=this.h.Bf(d)){var g=this.h.te(d);if(-1==g){if(-1!=this.Nl)switch(this.Nl){case 3:e=this.bB(d,b,c);break;case 4:e=this.DD(d,b,c);break;default:throw a.g.ra("internal error");}}else{var f=g;do{var h=f;if(1!=this.h.tb(h,
this.ni)){do{switch(this.$t){case 0:e=this.aK(h,b,c);break;case 1:e=this.bK(h,b,c);break;case 2:e=this.uP(h,b,c);break;default:throw a.g.ra("internal error");}if(e)break;this.h.Bb(h,this.ni,1);h=this.h.Wb(h)}while(h!=f&&!e)}if(e)break;f=this.h.Wb(this.h.sa(h))}while(f!=g);if(e)break}}e||this.SF();this.h.kh(this.ni)};c.prototype.Pv=function(b,c){var e=!1;b=this.h.ya(b);c=this.h.ya(c);for(var d=this.h.Be;-1!=d;d=this.h.Bf(d)){switch(this.Nl){case 3:e=this.bB(d,b,c);break;case 4:e=this.DD(d,b,c);break;
case 5:e=this.JQ(d,b,c);break;default:throw a.g.wa();}if(e)break}e||this.SF()};c.prototype.Op=function(b,c){this.h.Mp(b,c)};c.prototype.In=function(b,c,a){this.tM(b,c,a);this.Op(b,a)};c.prototype.tM=function(b,c,d){a.aj.$(b,c,d,!1);b.xo(0,!0,!0);for(c=b.$c;-1!=c;c=b.we(c))1736==b.Lb(c)&&a.mm.$(b,c,-1,!1,d)};c.NB=function(b,c){var e=b.D();if(a.T.Lc(e))return e=new a.Xa(b.description),e.Bc(b,!0),e;if(197==e){e=new a.i;b.o(e);if(e.ba()<=c&&e.aa()<=c)return e=new a.Va(b.description),b.Af(e),e;if(e.ba()<=
c||e.aa()<=c)return e=new a.Xa(b.description),c=new a.Va,b.uf(0,c),e.df(c),b.uf(2,c),e.lineTo(c),e;e=new a.Ka(b.description);e.Wc(b,!1);return e}return b};return c}();a.el=d})(w||(w={}));(function(a){var d=function(){function b(b){this.Dl=new a.ga(0);this.Ot=new a.ga(0);this.Ar=new a.b;this.Br=new a.b;this.a=b;this.Tq=-1}b.prototype.cc=function(b){return this.a.cc(this.Jw(b))};b.prototype.ot=function(b){var c=this.tw(b);b=this.vC(b);if(this.a.Ua(c)==b){var a=c,c=b;b=a}this.a.uc(c,this.Ar);this.a.uc(b,
this.Br);return this.Ar.y<this.Br.y};b.prototype.Jw=function(b){var c=this.tw(b);b=this.vC(b);return this.a.X(c)==b?c:b};b.prototype.tw=function(b){return this.Dl.get(b)};b.prototype.vC=function(b){return this.Ot.get(b)};b.prototype.hC=function(b){this.Dl.set(b,this.Tq);this.Tq=b};b.prototype.GE=function(b){if(-1!=this.Tq){var c=this.Tq;this.Tq=this.Dl.get(c);this.Dl.set(c,b);this.Ot.set(c,this.a.X(b));return c}null==this.Dl&&(this.Dl=new a.ga(0),this.Ot=new a.ga(0));c=this.Dl.size;this.Dl.add(b);
this.Ot.add(this.a.X(b));return c};b.prototype.Dw=function(b){return this.a.rd(this.tw(b))};return b}();a.BT=d;var g=function(){function b(b){this.me=b;this.Vd=new a.yb;this.Kl=new a.yb;this.eE=0;this.on=null;this.zx=-1}b.prototype.compare=function(b,c,a){a=b.da(a);var e=this.me.$a,d;this.zx==c?d=this.eE:(this.on=e.cc(c),null==this.on?(b=e.a,b.Oc(e.Jw(c),this.Vd),this.on=this.Vd,d=this.Vd.xe(this.me.Zg,0)):d=this.on.xe(this.me.Zg,0),this.eE=d,this.zx=c);b=e.cc(a);var g;null==b?(b=e.a,b.Oc(e.Jw(a),
this.Kl),b=this.Kl,g=this.Kl.xe(this.me.Zg,0)):g=b.xe(this.me.Zg,0);d==g&&(c=e.ot(c),a=e.ot(a),a=Math.min(c?this.on.ha:this.on.ja,a?b.ha:b.ja),c=.5*(a+this.me.Zg),c==this.me.Zg&&(c=a),d=this.on.xe(c,0),g=b.xe(c,0));return d<g?-1:d>g?1:0};b.prototype.reset=function(){this.zx=-1};return b}(),c=function(){function b(){this.Rl=this.Dk=null;this.Za=new a.bj;this.Za.lM();this.Ld=new g(this);this.Za.Hn(this.Ld)}b.prototype.XM=function(){var b=!1;this.Qt&&(b=this.YM());if(1==this.a.ea(this.U)){var c=this.a.Vb(this.U),
b=this.a.Gw(c);this.a.Dy(c,!0);return 0>b?(b=this.a.Cb(c),this.a.lF(b),this.a.Wi(c,this.a.Ua(b)),!0):!1}this.Ak=this.a.Uv();this.kn=this.a.Uv();for(c=this.a.Vb(this.U);-1!=c;c=this.a.bc(c))this.a.Rp(c,this.Ak,0),this.a.Rp(c,this.kn,-1);c=new a.ga(0);this.Zg=NaN;var d=new a.b;this.lr=this.a.ea(this.U);this.fn=this.a.re();this.br=this.a.re();for(var g=this.Dk.gc(this.Dk.Wd);-1!=g;g=this.Dk.bb(g)){var f=this.Dk.getData(g);this.a.uc(f,d);d.y!=this.Zg&&0!=c.size&&(b=this.yr(c)||b,this.Ld.reset(),c.clear(!1));
c.add(f);this.Zg=d.y;if(0==this.lr)break}0<this.lr&&(b=this.yr(c)||b,c.clear(!1));this.a.bf(this.fn);this.a.bf(this.br);for(c=this.a.Vb(this.U);-1!=c;)if(3==this.a.Ei(c,this.Ak)){this.a.Dy(c,!0);d=c;for(c=this.a.Ei(c,this.kn);-1!=c;)g=this.a.Ei(c,this.kn),this.a.bQ(this.U,this.a.bc(d),c),d=c,c=g;c=this.a.bc(d)}else this.a.Dy(c,!1),c=this.a.bc(c);this.a.ty(this.Ak);this.a.ty(this.kn);return b};b.prototype.yr=function(b){return this.WQ(b)};b.prototype.WQ=function(b){var c=!1;null==this.$a&&(this.$a=
new d(this.a));null==this.Rl?(this.Rl=new a.ga(0),this.Rl.xb(16)):this.Rl.clear(!1);this.VQ(b);for(var e=0,g=b.size;e<g;e++){var f=b.get(e);-1!=f&&this.bD(f,-1)}for(e=0;e<this.Rl.size&&0<this.lr;e++)if(b=this.Rl.get(e),f=this.$a.Dw(this.Za.da(b)),g=-1,0==this.a.Ei(f,this.Ak)){for(var f=this.Za.ge(b),h=b,l;-1!=f;){var m=this.Za.da(f),p=this.$a.Dw(m),q=this.a.Ei(p,this.Ak);if(0!=q){g=p;break}h=f;f=this.Za.ge(f)}-1==f?(l=!0,f=h):(m=this.Za.da(f),l=this.$a.ot(m),f=this.Za.bb(f),l=!l);do{m=this.Za.da(f);
p=this.$a.Dw(m);q=this.a.Ei(p,this.Ak);if(0==q&&(l!=this.$a.ot(m)&&(c=this.a.Cb(p),this.a.lF(c),this.a.Wi(p,this.a.Ua(c)),c=!0),this.a.Rp(p,this.Ak,l?3:2),l||(h=this.a.Ei(g,this.kn),this.a.Rp(g,this.kn,p),this.a.Rp(p,this.kn,h)),this.lr--,0==this.lr))return c;g=p;h=f;f=this.Za.bb(f);l=!l}while(h!=b)}return c};b.prototype.VQ=function(b){for(var c=0,a=b.size;c<a;c++){var e=b.get(c),d=this.a.Ra(e,this.fn),g=this.a.Ra(e,this.br);if(-1!=d){var f=this.Za.da(d);this.$a.hC(f);this.a.lb(e,this.fn,-1)}-1!=
g&&(f=this.Za.da(g),this.$a.hC(f),this.a.lb(e,this.br,-1));f=-1;-1!=d&&-1!=g?(this.Za.kd(d,-1),this.Za.kd(g,-1),b.set(c,-1)):f=-1!=d?d:g;-1!=f&&(this.bD(e,f)||this.Za.kd(f,-1),b.set(c,-1))}};b.prototype.bD=function(b,c){var e=new a.b,d=new a.b;this.a.uc(b,e);var g=this.a.X(b);this.a.uc(g,d);var k=!1;if(e.y<d.y){var k=!0,f=this.$a.GE(b),h;-1==c?h=this.Za.addElement(f,-1):(h=c,this.Za.Vi(h,f));f=this.a.Ra(g,this.fn);-1==f?this.a.lb(g,this.fn,h):this.a.lb(g,this.br,h);g=this.a.rd(b);0==this.a.Ei(g,this.Ak)&&
this.Rl.add(h)}g=this.a.Ua(b);this.a.uc(g,d);e.y<d.y&&(k=!0,f=this.$a.GE(g),-1==c?h=this.Za.addElement(f,-1):(h=c,this.Za.Vi(h,f)),f=this.a.Ra(g,this.fn),-1==f?this.a.lb(g,this.fn,h):this.a.lb(g,this.br,h),g=this.a.rd(b),0==this.a.Ei(g,this.Ak)&&this.Rl.add(h));return k};b.$=function(c,a,d,g){var e=new b;e.a=c;e.U=a;e.Dk=d;e.Qt=g;return e.XM()};b.prototype.YM=function(){var b=new a.ga(0),c=new a.ga(0),d=-1,g=-1,f=new a.b;f.Eh();for(var h=-1,l=-1,m=-1,p=new a.b,q=this.Dk.gc(this.Dk.Wd);-1!=q;q=this.Dk.bb(q)){var r=
this.Dk.getData(q);this.a.uc(r,p);var v=this.a.rd(r);f.ub(p)&&l==v?(-1==g&&(d=this.a.Uv(),g=this.a.re()),-1==m&&(m=c.size,this.a.lb(h,g,m),c.add(1),-1==this.a.Ei(v,d)&&(this.a.Rp(v,d,h),b.add(v))),this.a.lb(r,g,m),c.JF(c.tc()+1)):(m=-1,f.J(p));h=r;l=v}if(0==b.size)return!1;f=new a.ga(0);h=new a.ga(0);l=0;for(m=b.size;l<m;l++){var v=b.get(l),x=this.a.Ei(v,d),r=this.a.Ra(x,g);f.clear(!1);h.clear(!1);f.add(x);h.add(r);for(r=this.a.X(x);r!=x;r=this.a.X(r)){var y=r,p=this.a.Ra(y,g);if(-1!=p)if(0==h.size)h.add(p),
f.add(y);else if(h.tc()==p){var q=f.tc(),z=this.a.X(q),x=this.a.X(y);this.a.Sc(q,x);this.a.Tc(x,q);this.a.Sc(y,z);this.a.Tc(z,y);y=[!1];z=this.a.aD(this.U,z,this.a.Cb(v),y);this.a.lb(r,g,-1);y[0]&&this.a.Dh(v,x);r=this.a.Ha(v);x=this.a.Ha(z);r-=x;this.a.hm(v,r);c.set(p,c.get(p)-1);1==c.get(p)&&(c.set(p,0),h.af(),f.af());r=x=q}else f.add(r),h.add(p)}}this.a.ty(d);this.a.bf(g);return!0};return b}();a.AI=c})(w||(w={}));(function(a){var d=function(){function d(){}d.prototype.Ag=function(){this.Mx=this.ib=
null};d.prototype.get=function(){return this.Mx};d.prototype.set=function(c){this.Mx=c;if(null!=c)throw 322==c.D()&&(this.ib=c),a.g.wa();};d.prototype.create=function(c){if(322==c)this.mq();else throw a.g.ra("Not Implemented");};d.prototype.mq=function(){null==this.ib&&(this.ib=new a.yb);this.Mx=this.ib};return d}();a.Ag=d})(w||(w={}));(function(a){a=a.FI||(a.FI={});a[a.enumLineSeg=1]="enumLineSeg";a[a.enumBezierSeg=2]="enumBezierSeg";a[a.enumArcSeg=4]="enumArcSeg";a[a.enumNonlinearSegmentMask=6]=
"enumNonlinearSegmentMask";a[a.enumSegmentMask=7]="enumSegmentMask";a[a.enumDensified=8]="enumDensified"})(w||(w={}));(function(a){var d=function(){return function(c){this.ri=c;this.dz=this.ez=1;this.ky=this.jy=this.ly=0}}(),g=function(){function c(){this.op=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0];this.Ij=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0];this.nf=new a.Va;this.ka=this.fu=0;this.an=[];this.ir=[];this.bu=[];this.qp=[];this.Jx=[]}c.prototype.ny=function(b){if(null!=b){for(var c=0,a=b.length;c<a;c++)this.oR(b[c]);
b.length=0}};c.prototype.oR=function(b){b.ri=null;this.qp.push(b)};c.prototype.nu=function(b){if(0===this.qp.length)var c=new d(b);else c=this.qp[this.qp.length-1],c.ri=b,--this.qp.length;return c};c.prototype.dO=function(b,c){return 0==b?this.ir[c]:this.bu[c]};c.prototype.Zx=function(){this.fu>=this.Jx.length&&this.Jx.push(new a.Ag);var b=this.Jx[this.fu];this.fu++;return b};c.prototype.clear=function(){this.ny(this.an);this.ny(this.ir);this.ny(this.bu);this.fu=0};c.prototype.zn=function(b){this.an.push(this.nu(b))};
c.prototype.kk=function(b){return 0==b?this.ir.length:this.bu.length};c.prototype.Io=function(b,c){return this.dO(b,c).ri};c.prototype.Ga=function(b,c){if(2!=this.an.length)throw a.g.wa();this.ka=b;var e=a.vi.Ty(.01*b),d=!1,g=this.an[0],f=this.an[1];if(c||0!=(g.ri.fq(f.ri,b,!0)&5)){if(322==g.ri.D()&&(c=g.ri,322==f.ri.D())){var h=f.ri,l=a.yb.ov(c,h,null,this.op,this.Ij,b);if(0==l)throw a.yb.ov(c,h,null,this.op,this.Ij,b),a.g.wa();b=Array(9);a.I.Ps(b,null);for(var m=0;m<l;m++){var p=this.op[m],q=this.Ij[m],
r=g.ky,v=1;0==p?(r=g.ly,v=g.ez):1==p&&(r=g.jy,v=g.dz);var x=f.ky,y=1;0==q?(x=f.ly,y=f.ez):1==q&&(x=f.jy,y=f.dz);var z=new a.b;r==x?(r=new a.b,c.Kb(p,r),p=new a.b,h.Kb(q,p),q=v+y,y/=q,a.vi.BD(r,p,y,z),a.b.Zb(z,r)+a.b.Zb(z,p)>e&&(d=!0)):r>x?(c.Kb(p,z),p=new a.b,h.Kb(q,p),a.b.Zb(z,p)>e&&(d=!0)):(h.Kb(q,z),r=new a.b,c.Kb(p,r),a.b.Zb(z,r)>e&&(d=!0));b[m]=z}g=0;f=-1;for(m=0;m<=l;m++)y=m<l?this.op[m]:1,y!=g&&(e=this.Zx(),c.Bi(g,y,e),-1!=f&&e.get().ed(b[f]),m!=l&&e.get().vd(b[m]),g=y,this.ir.push(this.nu(e.get()))),
f=m;c=[0,0,0,0,0,0,0,0,0];for(m=0;m<l;m++)c[m]=m;1<l&&this.Ij[0]>this.Ij[1]&&(y=this.Ij[0],this.Ij[0]=this.Ij[1],this.Ij[1]=y,m=c[0],c[0]=c[1],c[1]=m);g=0;f=-1;for(m=0;m<=l;m++)y=m<l?this.Ij[m]:1,y!=g&&(e=this.Zx(),h.Bi(g,y,e),-1!=f&&(g=c[f],e.get().ed(b[g])),m!=l&&(g=c[m],e.get().vd(b[g])),g=y,this.bu.push(this.nu(e.get()))),f=m;return d}throw a.g.wa();}return!1};c.prototype.Tw=function(b,c,d){c.copyTo(this.nf);if(1!=this.an.length)throw a.g.wa();this.ka=b;var e=this.an[0];if(d||e.ri.qs(c.w(),b,
!0))if(322==e.ri.D()){b=e.ri;var g=b.Gd(c.w(),!1);this.op[0]=g;var k=e.ky;d=1;0==g?(k=e.ly,d=e.ez):1==g&&(k=e.jy,d=e.dz);e=new a.b;0==k?(k=new a.b,b.Kb(g,k),c=c.w(),a.vi.BD(k,c,1/(d+1),e)):0<k?(e=new a.b,b.Kb(g,e)):e=c.w();d=0;g=-1;for(k=0;1>=k;k++){c=1>k?this.op[k]:1;if(c!=d){var f=this.Zx();b.Bi(d,c,f);-1!=g&&f.get().ed(e);1!=k&&f.get().vd(e);d=c;this.ir.push(this.nu(f.get()))}g=k}this.nf.ic(e)}else throw a.g.wa();};return c}();a.gA=g})(w||(w={}));(function(a){var d=function(){function d(c){this.Pq=
this.yj=this.ib=null;this.zk=this.Ee=this.Gc=this.ze=this.Sg=this.Qa=0;this.ab=null;this.zl=!1;this.ze=-1;this.Sg=this.Gc=0;this.Qa=-1;this.ab=c;this.Ee=this.eq(this.Sg);this.zl=!1;this.yj=null;this.zk=-1;this.Pq=new a.b}d.Yn=function(c,b){if(0>b||b>=c.F())throw a.g.Uc();var e=new d(c),g=c.Ew(b);e.Gc=b-c.Ea(g);e.Sg=g+1;e.Qa=g;e.Ee=e.eq(e.Qa);e.zk=e.ab.Ea(e.Qa);return e};d.Un=function(c,b,e){if(0>b||b>=c.ea()||0>e)throw a.g.Uc();var g=c.vc(b)?0:1;if(e>=c.Ha(b)-g)throw a.g.Uc();c=new d(c);c.ze=-1;c.Gc=
e;c.Qa=b;c.Sg=c.Gc+1;c.Ee=c.eq(c.Sg);c.zk=c.ab.Ea(c.Qa);return c};d.prototype.xR=function(c){if(this.ab!=c.ab)throw a.g.xa();this.ze=c.ze;this.Gc=c.Gc;this.Qa=c.Qa;this.Sg=c.Sg;this.Ee=c.Ee;this.zl=c.zl;this.zk=c.zk;this.yj=null};d.prototype.ia=function(){this.ze!=this.Gc&&this.JA();if(this.zl)this.Gc=(this.Gc+1)%this.Ee;else{if(this.Gc==this.Ee)throw a.g.Uc();this.Gc++}return this.yj};d.prototype.oi=function(){if(this.zl)this.Gc=(this.Ee+this.Gc-1)%this.Ee;else{if(0==this.Gc)throw a.g.Uc();this.Gc--}this.Gc!=
this.ze&&this.JA();return this.yj};d.prototype.yR=function(){this.ze=-1;this.Gc=0};d.prototype.zR=function(){this.Gc=this.Ee;this.ze=-1};d.prototype.Sb=function(c,b){void 0===b&&(b=-1);if(0<=this.Qa&&this.Qa<this.ab.ea()){var a=this.uJ();if(c>=a&&c<this.ab.Dc(this.Qa)){this.ze=-1;this.Gc=c-a;return}}a=0<=b&&b<this.ab.ea()&&c>=this.ab.Ea(b)&&c<this.ab.Dc(b)?b:this.ab.Ew(c);this.Sg=a+1;this.Qa=a;this.ze=-1;this.Gc=c-this.ab.Ea(a);this.Ee=this.eq(a);this.zk=this.ab.Ea(this.Qa)};d.prototype.kb=function(){this.Qa=
this.Sg;if(this.Qa>=this.ab.ea())return!1;this.ze=-1;this.Gc=0;this.Ee=this.eq(this.Qa);this.zk=this.ab.Ea(this.Qa);this.Sg++;return!0};d.prototype.Lk=function(){this.Ee=this.Gc=this.ze=-1;this.Sg=0;this.zk=this.Qa=-1};d.prototype.vy=function(c){if(0>c)throw a.g.Uc();this.Sg=c;this.zk=this.Ee=this.Gc=this.ze=this.Qa=-1};d.prototype.eq=function(c){if(this.ab.sc())return 0;var b=1;this.ab.vc(c)&&(b=0);return this.ab.Ha(c)-b};d.prototype.lD=function(){return this.ze==this.Ee-1&&this.ab.vc(this.Qa)};
d.prototype.NR=function(){this.zl=!0};d.prototype.Jb=function(){return this.ab.jb.f[this.Qa]+this.ze};d.prototype.uJ=function(){return this.ab.Ea(this.Qa)};d.prototype.Bm=function(){return this.lD()?this.ab.Ea(this.Qa):this.Jb()+1};d.prototype.wl=function(){return 0==this.ze};d.prototype.Jm=function(){return this.ze==this.Ee-1};d.prototype.La=function(){return this.Gc<this.Ee};d.prototype.Ow=function(){return 0<this.Gc};d.prototype.vm=function(){var c=new d(this.ab);c.ze=this.ze;c.Gc=this.Gc;c.Ee=
this.Ee;c.Qa=this.Qa;c.Sg=this.Sg;c.ab=this.ab;c.zl=this.zl;return c};d.prototype.JA=function(){if(0>this.Gc||this.Gc>=this.Ee)throw a.g.Uc();this.ze=this.Gc;var c=this.Jb();this.ab.kc();var b=this.ab.Fe,e=1;null!=b&&(e=b.read(c)&7);b=this.ab.description;switch(e){case 1:null==this.ib&&(this.ib=new a.yb);this.yj=this.ib;break;case 2:throw a.g.ra("internal error");case 4:throw a.g.wa();default:throw a.g.wa();}this.yj.Qf(b);e=this.Bm();this.ab.uc(c,this.Pq);this.yj.ed(this.Pq);this.ab.uc(e,this.Pq);
this.yj.vd(this.Pq);for(var d=1,g=b.Aa;d<g;d++)for(var f=b.Hd(d),h=a.pa.Wa(f),l=0;l<h;l++){var m=this.ab.ld(f,c,l);this.yj.My(f,l,m);m=this.ab.ld(f,e,l);this.yj.Cy(f,l,m)}};d.prototype.YO=function(){return this.Qa==this.ab.ea()-1};return d}();a.GI=d})(w||(w={}));(function(a){var d=function(){function d(c){c instanceof a.T?(this.ZD=c,this.ua=-1,this.Wh=1):(this.DP=c.slice(0),this.ua=-1,this.Wh=c.length)}d.prototype.ya=function(){return this.ua};d.prototype.next=function(){return this.ua<this.Wh-1?
(this.ua++,null!=this.ZD?this.ZD:this.DP[this.ua]):null};return d}();a.Pc=d})(w||(w={}));(function(a){var d=function(){return function(){this.next=null}}(),g=function(){function c(){this.Cp=this.ju=this.ku=this.vj=this.eh=0;this.aC=!1;this.eG=0;this.am=this.wf=this.Vk=this.hh=null;this.Mk=0;this.Kv=null;this.vj=this.eh=-1}c.prototype.vS=function(b,c,d){this.eh=b;this.vj=c;this.hh=this.Vk=null;this.Cp=0;this.Kv=d;null==this.am&&(this.am=a.I.Lh(384,0));this.hG()};c.prototype.aa=function(){return this.eh};
c.prototype.ba=function(){return this.vj};c.prototype.flush=function(){0<this.Mk&&(this.Kv.XB(this.am,this.Mk),this.Mk=0)};c.prototype.hG=function(){if(0<this.Cp){for(var b=0;b<this.vj;b++){for(var c=this.Vk[b];null!=c;){var a=c,c=c.next;a.next=null}this.Vk[b]=null}this.hh=null}this.ku=this.vj;this.ju=-1;this.Cp=0};c.prototype.fF=function(b){this.aC=b==c.$u;for(b=this.ku;b<=this.ju;b++)this.VJ(),this.PJ(b),this.vM();this.hG()};c.prototype.zv=function(b,c,g,f){if(c!=f){var e=1;c>f&&(e=b,b=g,g=e,e=
c,c=f,f=e,e=-1);if(!(0>f||c>=this.vj)){0>b&&0>g?g=b=-1:b>=this.eh&&g>=this.eh&&(g=b=this.eh);var k=(g-b)/(f-c);f>this.vj&&(f=this.vj,g=k*(f-c)+b);0>c&&(b=k*(0-c)+b,c=0);var h=Math.max(this.eh+1,8388607);-8388607>b?(c=(0-b)/k+c,b=0):b>h&&(c=(this.eh-b)/k+c,b=this.eh);-8388607>g?f=(0-b)/k+c:g>h&&(f=(this.eh-b)/k+c);c=a.I.truncate(c);f=a.I.truncate(f);c!=f&&(g=new d,g.x=a.I.truncate(4294967296*b),g.y=c,g.G=f,g.pM=a.I.truncate(4294967296*k),g.dir=e,null==this.Vk&&(this.Vk=a.I.Lh(this.vj,null)),g.next=
this.Vk[g.y],this.Vk[g.y]=g,g.y<this.ku&&(this.ku=g.y),g.G>this.ju&&(this.ju=g.G),this.Cp++)}}};c.prototype.VJ=function(){if(null!=this.hh){for(var b=!1,c=null,a=this.hh;null!=a;)if(a.y++,a.y==a.G){var d=a,a=a.next;null!=c?c.next=a:this.hh=a;d.next=null}else a.x+=a.pM,null!=c&&c.x>a.x&&(b=!0),c=a,a=a.next;b&&(this.hh=this.dG(this.hh))}};c.prototype.PJ=function(b){if(!(b>=this.vj)){var c=this.Vk[b];if(null!=c){this.Vk[b]=null;c=this.dG(c);this.Cp-=this.eG;b=this.hh;for(var a=!0,d=c,g=null;null!=b&&
null!=d;)b.x>d.x?(a&&(this.hh=d),a=d.next,d.next=b,null!=g&&(g.next=d),g=d,d=a):(a=b.next,b.next=d,null!=g&&(g.next=b),g=b,b=a),a=!1;null==this.hh&&(this.hh=c)}}};c.Mz=function(b,c){return 0>b?0:b>c?c:b};c.prototype.vM=function(){if(null!=this.hh)for(var b=0,e=this.hh,d=a.I.truncate(a.I.FD(e.x)),g=e.next;null!=g;g=g.next)if(b=this.aC?b^1:b+g.dir,g.x>e.x){var f=a.I.truncate(a.I.FD(g.x));0!=b&&(e=c.Mz(d,this.eh),d=c.Mz(f,this.eh),d>e&&e<this.eh&&(this.am[this.Mk++]=e,this.am[this.Mk++]=d,this.am[this.Mk++]=
g.y,this.Mk==this.am.length&&(this.Kv.XB(this.am,this.Mk),this.Mk=0)));e=g;d=f}};c.prototype.dG=function(b){for(var e=0,d=b;null!=d;d=d.next)e++;this.eG=e;if(1==e)return b;null==this.wf?this.wf=a.I.Lh(Math.max(e,16),null):this.wf.length<e&&(this.wf=a.I.Lh(Math.max(e,2*this.wf.length),null));for(var g=0,d=b;null!=d;d=d.next)this.wf[g++]=d;2==e?this.wf[0].x>this.wf[1].x&&(b=this.wf[0],this.wf[0]=this.wf[1],this.wf[1]=b):c.pP(this.wf,e,function(b,c){return b==c?0:b.x<c.x?-1:b.x>c.x?1:0});b=this.wf[0];
this.wf[0]=null;d=b;for(g=1;g<e;g++)d.next=this.wf[g],d=this.wf[g],this.wf[g]=null;d.next=null;return b};c.pP=function(b,c,a){if(c==b.length)b.sort(a);else{var e=b.slice(0,0),d=b.slice(c);c=b.slice(0,c).sort(a);b.length=0;b.push.apply(b,e.concat(c).concat(d))}};c.$u=0;c.sT=1;return c}();a.ev=g})(w||(w={}));(function(a){var d=function(){function d(){}d.prototype.Jh=function(c,b){var a=this.a.Ra(c,this.vp);this.yk==a&&(this.yk=this.$d.bb(this.yk));this.Xm==a&&(this.Xm=this.$d.bb(this.Xm));this.$d.Jc(this.Ox,
a);this.hj(c);if(b&&(a=this.a.rd(c),-1!=a&&this.a.Cb(a)==c)){b=this.a.X(c);if(b!=c){var d=this.a.rd(b);if(d==a){this.a.Dh(a,b);return}b=this.a.Ua(c);if(b!=c&&(d=this.a.rd(b),d==a)){this.a.Dh(a,b);return}}this.a.Dh(a,-1);this.a.Wi(a,-1)}};d.prototype.yA=function(){for(var c=!1,b=0,e=new a.b;;){b++;null==this.nh?(this.nh=new a.ga(0),this.Mq=new a.ga(0),this.ie=new a.ga(0)):(this.nh.clear(!1),this.Mq.clear(!1),this.ie.clear(!1));for(var d=this.Xm,g=0,f=!0;d!=this.yk;){var h=this.$d.getData(d),l=new a.b;
this.a.uc(h,l);f&&(this.a.uc(h,e),f=!1);var l=this.a.Ua(h),m=this.a.X(h);-559038737!=this.a.Ra(l,this.fg)&&(this.nh.add(l),this.a.lb(l,this.fg,-559038737),this.Mq.add(h),this.ie.add(g++));-559038737!=this.a.Ra(m,this.fg)&&(this.nh.add(m),this.a.lb(m,this.fg,-559038737),this.Mq.add(h),this.ie.add(g++));d=this.$d.bb(d)}if(2>this.nh.size)break;var p=this;this.ie.xd(0,this.ie.size,function(b,c){return p.mJ(b,c)});d=0;for(g=this.ie.size;d<g;d++)f=this.ie.get(d),f=this.nh.get(f),this.a.lb(f,this.fg,d),
l=new a.b,this.a.uc(f,l);l=this.zJ(e);d=0;for(g=this.ie.size;d<g;d++)f=this.ie.get(d),-1!=f&&(f=this.nh.get(f),this.a.lb(f,this.fg,-1));if(l)c=!0;else break}return c};d.prototype.zJ=function(c){for(var b=!1,a=!0;a;){var a=!1,d=0;-1==this.ie.get(d)&&(d=this.fl(d));for(var g=this.fl(d),f=0,h=this.ie.size;f<h&&-1!=d&&-1!=g&&d!=g;f++){var l=this.ie.get(d),g=this.ie.get(g),l=this.nh.get(l),g=this.nh.get(g),m=this.a.X(l);this.a.pt(m,c)||(m=this.a.Ua(l));var p=this.a.X(g);this.a.pt(p,c)||(p=this.a.Ua(g));
var q=this.os(m,l),r=this.os(p,g),v=q?this.a.Ua(m):this.a.X(m),x=r?this.a.Ua(p):this.a.X(p),y=!1;this.io(m)?y=!0:this.io(p)?y=!0:this.io(l)?y=!0:this.io(g)?y=!0:this.io(v)?y=!0:this.io(x)&&(y=!0);!y&&this.a.Cq(l,g)&&(y=!0,this.BA(q,r,m,l,p,g));!y&&this.a.Cq(v,x)&&(y=!0,this.BA(!q,!r,m,v,p,x));y&&(b=!0);a=a||y;d=this.fl(d);g=this.fl(d)}}if(!b)for(d=0,-1==this.ie.get(d)&&(d=this.fl(d)),g=this.fl(d),f=0,h=this.ie.size;f<h&&-1!=d&&-1!=g&&d!=g;f++)l=this.ie.get(d),g=this.ie.get(g),l=this.nh.get(l),g=this.nh.get(g),
m=this.a.X(l),this.a.pt(m,c)||(m=this.a.Ua(l)),p=this.a.X(g),this.a.pt(p,c)||(p=this.a.Ua(g)),q=this.os(m,l),r=this.os(p,g),v=q?this.a.Ua(m):this.a.X(m),x=r?this.a.Ua(p):this.a.X(p),this.qJ(q,r,l,m,v,g,p,x)&&(b=!0),d=this.fl(d),g=this.fl(d);return b};d.prototype.CJ=function(){1736==this.a.Lb(this.U)&&1==this.a.Cm(this.U)&&(new a.Of).DQ(this.Qt,this.a,this.U,this.oe);var c=!1,b=!0;this.fg=this.vp=-1;var e=this.a.F(this.U),d=new a.ga(0);d.xb(e);for(var g=this.a.Vb(this.U);-1!=g;g=this.a.bc(g))for(var f=
this.a.Cb(g),h=0,l=this.a.Ha(g);h<l;h++)d.add(f),f=this.a.X(f);var m=this.a.cd.f,p=this.a.cd.Ic;this.a.wb.kc();var q=this.a.wb.Ba[0].f;d.xd(0,e,function(b,c){var a=m[p*b],e=m[p*c],d=q[2*a],a=q[2*a+1],g=q[2*e],e=q[2*e+1],d=a<e?-1:a>e?1:d<g?-1:d>g?1:0;0==d&&(d=m[p*b+3],e=m[p*c+3],d=d<e?-1:d==e?0:1);return d});this.vp=this.a.re();this.$d=new a.$n;this.Ox=this.$d.jh(0);this.$d.$l(e);for(g=0;g<e;g++)f=d.get(g),h=this.$d.addElement(this.Ox,f),this.a.lb(f,this.vp,h);this.fg=this.a.re();this.yk=-1;for(this.sA()&&
(c=!0);b;){b=!1;e=0;d=!1;do{d=!1;this.Xm=-1;for(var l=0,g=new a.b,h=new a.b,r=this.$d.gc(this.Ox);-1!=r;)f=this.$d.getData(r),-1!=this.Xm?(this.a.uc(f,h),g.ub(h))?l++:(g.J(h),this.yk=r,0<l&&(f=this.yA())&&(d=!0,-1!=this.yk&&(f=this.$d.getData(this.yk),this.a.uc(f,g))),this.Xm=r=this.yk,l=0):(this.Xm=r,this.a.uc(this.$d.getData(r),g),l=0),-1!=r&&(r=this.$d.bb(r));this.yk=-1;0<l&&(f=this.yA())&&(d=!0);if(10<e++)throw a.g.wa();d&&this.tJ();this.sA()&&(d=!0);b=b||d&&!1;c=c||d}while(d)}this.a.bf(this.vp);
this.a.bf(this.fg);return c=a.AI.$(this.a,this.U,this.$d,this.Qt)||c};d.prototype.os=function(c,b){return this.a.X(b)==c?!1:!0};d.prototype.qJ=function(c,b,a,d,g,f,h,l){if(d==h)return this.hj(a),this.hj(f),!1;var e=this.a.Ra(a,this.fg),k=this.a.Ra(g,this.fg),n=this.a.Ra(f,this.fg),m=this.a.Ra(l,this.fg);a=[0,0,0,0,0,0,0,0];var p=[0,0,0,0];a[0]=0;p[0]=e;a[1]=0;p[1]=k;a[2]=1;p[2]=n;a[3]=1;p[3]=m;for(e=1;4>e;e++){k=p[e];n=a[e];for(m=e-1;0<=m&&p[m]>k;)p[m+1]=p[m],a[m+1]=a[m],m--;p[m+1]=k;a[m+1]=n}p=0;
0!=a[0]&&(p|=1);0!=a[1]&&(p|=2);0!=a[2]&&(p|=4);0!=a[3]&&(p|=8);if(5!=p&&10!=p)return!1;c==b?c?(this.a.Sc(l,d),this.a.Tc(d,l),this.a.Sc(g,h),this.a.Tc(h,g)):(this.a.Tc(l,d),this.a.Sc(d,l),this.a.Tc(g,h),this.a.Sc(h,g)):c?(this.a.Tc(d,f),this.a.Sc(f,d),this.a.Tc(h,g),this.a.Sc(g,h)):(this.a.Sc(d,f),this.a.Tc(f,d),this.a.Sc(h,g),this.a.Tc(g,h));return!0};d.prototype.BA=function(c,b,a,d,g,f){this.pU?this.BJ():this.AJ(c,b,a,d,g,f)};d.prototype.BJ=function(){throw a.g.ra("not implemented.");};d.prototype.AJ=
function(c,b,a,d,g,f){if(c!=b)c?(this.a.Sc(a,g),this.a.Tc(g,a),this.a.Sc(f,d),this.a.Tc(d,f),this.pm(g,a),this.Jh(g,!0),this.a.Ui(g,!0),this.hj(a),this.pm(f,d),this.Jh(f,!0),this.a.Ui(f,!1)):(this.a.Sc(g,a),this.a.Tc(a,g),this.a.Sc(d,f),this.a.Tc(f,d),this.pm(g,a),this.Jh(g,!0),this.a.Ui(g,!1),this.hj(a),this.pm(f,d),this.Jh(f,!0),this.a.Ui(f,!0)),this.hj(d);else{var e=c?a:d,k=b?g:f;c=c?d:a;b=b?f:g;g=!1;this.a.Sc(e,k);this.a.Sc(k,e);this.a.Tc(c,b);this.a.Tc(b,c);for(f=b;f!=k;)a=this.a.Ua(f),d=this.a.X(f),
this.a.Tc(f,d),this.a.Sc(f,a),g=g||f==e,f=d;g||(a=this.a.Ua(k),d=this.a.X(k),this.a.Tc(k,d),this.a.Sc(k,a));this.pm(k,e);this.Jh(k,!0);this.a.Ui(k,!1);this.hj(e);this.pm(b,c);this.Jh(b,!0);this.a.Ui(b,!1);this.hj(c)}};d.prototype.sA=function(){for(var c=!1,b=this.a.Vb(this.U);-1!=b;){for(var a=this.a.Cb(b),d=0,g=this.a.Ha(b);d<g&&1<g;){var f=this.a.Ua(a),h=this.a.X(a);this.a.Cq(f,h)?(c=!0,this.Jh(a,!1),this.a.vf(a,!0),this.Jh(h,!1),this.a.vf(h,!0),a=f,d=0,g=this.a.Ha(b)):(a=h,d++)}if(2>this.a.Ha(b)){c=
this.a.Cb(b);d=0;for(g=this.a.Ha(b);d<g;d++)this.Jh(c,!1),c=this.a.X(c);b=this.a.Cr(b);c=!0}else b=this.a.bc(b)}return c};d.prototype.io=function(c){for(var b=!1;;){var a=this.a.X(c),d=this.a.Ua(c);if(a==c)return this.Jh(c,!0),this.a.Ui(c,!1),!0;if(!this.a.Cq(a,d))break;b=!0;this.hj(d);this.hj(a);this.Jh(c,!0);this.a.Ui(c,!1);this.pm(a,d);this.Jh(a,!0);this.a.Ui(a,!0);if(a==d)break;c=d}return b};d.prototype.tJ=function(){for(var c=0,b=this.$d.gc(this.$d.Wd);-1!=b;b=this.$d.bb(b)){var a=this.$d.getData(b);
this.a.im(a,-1)}for(var d=0,g=this.a.Vb(this.U);-1!=g;)if(b=this.a.Cb(g),-1==b||-1!=this.a.rd(b))a=g,g=this.a.bc(g),this.a.yu(a);else{this.a.im(b,g);for(var f=1,a=this.a.X(b);a!=b;a=this.a.X(a))this.a.im(a,g),f++;this.a.Jr(g,!1);this.a.hm(g,f);this.a.Wi(g,this.a.Ua(b));d+=f;c++;g=this.a.bc(g)}for(b=this.$d.gc(this.$d.Wd);-1!=b;b=this.$d.bb(b))a=this.$d.getData(b),-1==this.a.rd(a)&&(g=this.a.aD(this.U,a,a,null),d+=this.a.Ha(g),c++);this.a.gm(this.U,c);this.a.Pk(this.U,d);c=0;for(d=this.a.$c;-1!=d;d=
this.a.we(d))c+=this.a.F(d);this.a.ZF(c)};d.prototype.fl=function(c){for(var b=0,a=this.ie.size-1;b<a;b++)if(c=(c+1)%this.ie.size,-1!=this.ie.get(c))return c;return-1};d.prototype.pm=function(c,b){var a=this.a.Ra(b,this.vp),d=this.a.Ra(b,this.fg);this.a.Zy(c,b);this.a.lb(b,this.vp,a);this.a.lb(b,this.fg,d)};d.prototype.hj=function(c){var b=this.a.Ra(c,this.fg);-1!=b&&(this.ie.set(b,-1),this.a.lb(c,this.fg,-1))};d.$=function(c,b,a,g,f){var e=new d;e.a=c;e.U=b;e.yx=a;e.Qt=g;e.oe=f;return e.CJ()};d.prototype.mJ=
function(c,b){var e=this.nh.get(c),d=new a.b;this.a.uc(e,d);var e=new a.b,g=this.nh.get(b);this.a.uc(g,e);if(d.ub(e))return 0;c=this.Mq.get(c);g=new a.b;this.a.uc(c,g);b=this.Mq.get(b);c=new a.b;this.a.uc(b,c);b=new a.b;b.pc(d,g);d=new a.b;d.pc(e,c);return a.b.cq(b,d)};return d}();a.mm=d})(w||(w={}));(function(a){(function(a){a[a.Local=0]="Local";a[a.Geographic=1]="Geographic";a[a.Projected=2]="Projected";a[a.Unknown=3]="Unknown"})(a.HI||(a.HI={}));(function(a){a[a.Integer32=0]="Integer32";a[a.Integer64=
1]="Integer64";a[a.FloatingPoint=2]="FloatingPoint"})(a.rI||(a.rI={}));var d=function(){function d(){this.fo="";this.mi=0;this.Sl=null}d.prototype.Qc=function(){return this.mi};d.prototype.Ko=function(){var c=.001;0!=this.mi?c=a.ls.SM(this.mi):null!=this.Sl&&(c=a.mA.TM(this.Sl));return c};d.prototype.Se=function(){if(0!=this.mi)return a.Tb.Qd(a.ls.cC(this.mi));if(null!=this.Sl)return a.mA.UM(this.Sl)};d.Am=function(c){if(0!=c.mi){if(!0===a.ls.WO(c.mi))return 1;if(!0===a.ls.ZO(c.mi))return 2}return 3};
d.create=function(c){if(0>=c)throw a.g.N("Invalid or unsupported wkid: "+c);var b=new d;b.mi=c;return b};d.NL=function(c){if(null==c||0==c.length)throw a.g.N("Cannot create SpatialReference from null or empty text.");var b=new d;b.Sl=c;return b};d.prototype.lc=function(c){return this==c?!0:null==c||this.constructor!=c.constructor||this.mi!=c.mi||0==this.mi&&this.Sl!==c.Sl?!1:!0};d.mN=function(c,b){var e=Math.PI/180,d=new a.ca;a.nH.pN(c.w().x*e,c.w().y*e,b.w().x*e,b.w().y*e,d);return d.l};d.prototype.toString=
function(){return"[ tol: "+this.xq()+"; wkid: "+this.Qc()+"; wkt: "+this.Sl+"]"};d.prototype.hc=function(){if(""!==this.fo)return this.fo;var c=this.toString();if(Array.prototype.reduce)return this.fo="S"+c.split("").reduce(function(b,c){b=(b<<5)-b+c.charCodeAt(0);return b&b},0);var b=0;if(0===c.length)return"";for(var a=0;a<c.length;a++)b=(b<<5)-b+c.charCodeAt(a),b&=b;return this.fo="S"+b};d.prototype.xq=function(){return this.Ko()};d.jU=!0;d.ET=2147483645;d.FT=9007199254740990;return d}();a.Nf=
d})(w||(w={}));(function(a){function d(b,c){89.99999<c?c=89.99999:-89.99999>c&&(c=-89.99999);c*=.017453292519943;return[111319.49079327169*b,3189068.5*Math.log((1+Math.sin(c))/(1-Math.sin(c)))]}function g(b,c,a){b=b/6378137*57.29577951308232;return a?[b,57.29577951308232*(1.5707963267948966-2*Math.atan(Math.exp(-1*c/6378137)))]:[b-360*Math.floor((b+180)/360),57.29577951308232*(1.5707963267948966-2*Math.atan(Math.exp(-1*c/6378137)))]}function c(b,c){var e=b.vm();if(33===b.D()){var d=c(e.lk(),e.mk());
e.ic(d[0],d[1])}else if(197===b.D())d=c(b.R.v,b.R.C,!0),b=c(b.R.B,b.R.G,!0),e.K(d[0],d[1],b[0],b[1]);else for(d=new a.b,b=0;b<e.F();b++){e.w(b,d);var g=c(d.x,d.y,!0);d.ma(g[0],g[1]);e.ic(b,d)}return e}function b(b){return c(b,g)}function e(b){return c(b,d)}var k=function(){function b(){}b.Xr=function(b){var c=Math.PI/180,e=Math.sin(b.y*c);return a.b.Oa(6378137*b.x*c,3167719.6636462314*(e/(1-.006694379990197414*e*e)-6.111035746609262*Math.log((1-.0818191908429643*e)/(1+.0818191908429643*e))))};b.Wu=
function(b,c,e,d){var g=1/298.257223563,k=Math.sin(e);e=Math.cos(e);var f=(1-g)*Math.tan(b);b=1/Math.sqrt(1+f*f);for(var h=f*b,l=Math.atan2(f,e),f=b*k*b*k,n=1-f,m=2.7233160610754688E11*n/4.040829998466145E13,p=1+m/16384*(4096+m*(-768+m*(320-175*m))),q=m/1024*(256+m*(-128+m*(74-47*m))),m=d/(6356752.31424518*p),r=2*Math.PI,v,u,x,y;1E-12<Math.abs(m-r);)x=Math.cos(2*l+m),v=Math.sin(m),u=Math.cos(m),y=q*v*(x+q/4*(u*(-1+2*x*x)-q/6*x*(-3+4*v*v)*(-3+4*x*x))),r=m,m=d/(6356752.31424518*p)+y;d=h*v-b*u*e;n=g/
16*n*(4+g*(4-3*n));return a.b.Oa((c+(Math.atan2(v*k,b*u-h*v*e)-(1-n)*g*Math.sqrt(f)*(m+n*v*(x+n*u*(-1+2*x*x)))))/(Math.PI/180),Math.atan2(h*u+b*v*e,(1-g)*Math.sqrt(f+d*d))/(Math.PI/180))};b.cN=function(b,c,a,e){var d=1/298.257223563,g=e-c,k=Math.atan((1-d)*Math.tan(b)),f=Math.atan((1-d)*Math.tan(a)),h=Math.sin(k),k=Math.cos(k),l=Math.sin(f),f=Math.cos(f),n=g,m,p=1E3,q,r,v,u,x,y,z;do{v=Math.sin(n);u=Math.cos(n);r=Math.sqrt(f*v*f*v+(k*l-h*f*u)*(k*l-h*f*u));if(0===r)return 0;u=h*l+k*f*u;x=Math.atan2(r,
u);y=k*f*v/r;q=1-y*y;v=u-2*h*l/q;isNaN(v)&&(v=0);z=d/16*q*(4+d*(4-3*q));m=n;n=g+(1-z)*d*y*(x+z*r*(v+z*u*(-1+2*v*v)))}while(1E-12<Math.abs(n-m)&&0<--p);if(0===p)return h=e-c,{azimuth:Math.atan2(Math.sin(h)*Math.cos(a),Math.cos(b)*Math.sin(a)-Math.sin(b)*Math.cos(a)*Math.cos(h)),geodesicDistance:6371009*Math.acos(Math.sin(b)*Math.sin(a)+Math.cos(b)*Math.cos(a)*Math.cos(e-c))};b=2.7233160610754688E11*q/4.040829998466145E13;c=b/1024*(256+b*(-128+b*(74-47*b)));return{azimuth:Math.atan2(f*Math.sin(n),k*
l-h*f*Math.cos(n)),lN:6356752.31424518*(1+b/16384*(4096+b*(-768+b*(320-175*b))))*(x-c*r*(v+c/4*(u*(-1+2*v*v)-c/6*v*(-3+4*r*r)*(-3+4*v*v)))),yU:Math.atan2(k*Math.sin(n),k*l*Math.cos(n)-h*f)}};b.oT=function(b){var c=b.hasAttribute(1),e=b.hasAttribute(2),d=[],g=b.ea(),k=null,f=null;c&&(k=b.mc(1));e&&(f=b.mc(2));for(var h=new a.b,l=0;l<g;l++){for(var n=b.Ea(l),m=b.Ha(l),p=0,q=0,r=NaN,v=NaN,u=NaN,x=NaN,y=b.vc(l),z=[],w=n;w<n+m;w++){b.w(w,h);var x=u=NaN,C=[h.x,h.y];c&&(u=k.get(w),C.push(u));e&&(g=f.get(w),
C.push(x));w==n&&y&&(p=h.x,q=h.y,r=u,v=x);z.push(C)}!y||p==h.x&&q==h.y&&(!c||isNaN(r)&&isNaN(u)||r==u)&&(!e||isNaN(v)&&isNaN(x)||v==x)||z.push(z[0].slice(0));d.push(z)}return d};b.fw=function(c,a){c=b.oT(c);var e=Math.PI/180;637.100877151506>a&&(a=637.100877151506);for(var d=[],g=0;g<c.length;g++){var k=c[g],f;d.push(f=[]);f.push([k[0][0],k[0][1]]);var h,l,n,m,p,q;h=k[0][0]*e;l=k[0][1]*e;for(p=0;p<k.length-1;p++)if(n=k[p+1][0]*e,m=k[p+1][1]*e,h!==n||l!==m){m=b.cN(l,h,m,n);n=m.azimuth;m=m.lN;var r=
m/a;if(1<r){for(q=1;q<=r-1;q++){var v=b.Wu(l,h,n,q*a);f.push([v.x,v.y])}q=b.Wu(l,h,n,(m+Math.floor(r-1)*a)/2);f.push([q.x,q.y])}l=b.Wu(l,h,n,m);f.push([l.x,l.y]);h=l.x*e;l=l.y*e}}return{mF:d}};b.kN=function(c){for(var e=[],d=0;d<c.length;d++){var g=c[d],g=b.fw(g,1E4);e.push(g)}c=[];for(var k,f,h=0;h<e.length;h++){for(var g=e[h],l=0,d=0;d<g.mF.length;d++){var n=g.mF[d];k=b.Xr(a.b.Oa(n[0][0],n[0][1]));f=b.Xr(a.b.Oa(n[n.length-1][0],n[n.length-1][1]));var m=f.x*k.y-k.x*f.y,p;for(p=0;p<n.length-1;p++)k=
b.Xr(a.b.Oa(n[p+1][0],n[p+1][1])),f=b.Xr(a.b.Oa(n[p][0],n[p][1])),m+=f.x*k.y-k.x*f.y;m/=4046.87;l+=m}c.push(l/-2*4046.85642)}return c};return b}();a.oH=k;k=function(){function c(){}c.oy=function(b,a,e,d,g,k,f){c.AG[b.hc()]=a;0==isNaN(e)&&(c.CG[b.hc()]=e);0==isNaN(d)&&(c.iz[b.hc()]=d);0==isNaN(g)&&(c.lG[b.hc()]=g);c.EG[b.hc()]=k;null!==f&&(c.GG[b.hc()]=f)};c.xu=function(b,a,e){c.IG[b.hc()+"-"+a.hc()]=e};c.Em=function(b){b=c.AG[b.hc()];if(void 0==b)throw a.g.qe();return b};c.IC=function(b){b=c.CG[b.hc()];
if(void 0==b)throw a.g.qe();return b};c.ft=function(b){b=c.iz[b.hc()];if(void 0==b)throw a.g.qe();return b};c.Ts=function(b){b=c.lG[b.hc()];if(void 0==b)throw a.g.qe();return b};c.Fm=function(b){b=c.GG[b.hc()];if(void 0==b)throw a.g.qe();return a.i.Oa(b[0],b[1],b[2],b[3])};c.Qo=function(b){b=c.EG[b.hc()];if(void 0==b)throw a.g.qe();return b};c.Wl=function(b,e,d){if(e.lc(d))return b;var g=c.IG[e.hc()+"-"+d.hc()];if(void 0!==g)return g(b,e,d);throw a.g.qe();};c.tu=function(){throw a.g.qe();};c.qN=function(){throw a.g.qe();
};c.YQ=function(){throw a.g.qe();};c.TN=function(){throw a.g.qe();};c.qR=function(){var c=a.Nf.create(102100),d=a.Nf.create(3857),g=a.Nf.create(4326);a.Ya.oy(c,g,NaN,NaN,NaN,!1,null);a.Ya.oy(g,g,1,.0033528106647474805,6378137,!0,[-180,-90,180,90]);a.Ya.oy(d,g,NaN,NaN,NaN,!1,null);a.Ya.xu(c,g,b);a.Ya.xu(g,c,e);a.Ya.xu(d,g,b);a.Ya.xu(g,d,e)};c.AG=[];c.CG=[];c.iz=[];c.lG=[];c.EG=[];c.GG=[];c.IG=[];return c}();a.Ya=k})(w||(w={}));w.Ya.qR();(function(a){var d=function(){function d(c){this.f=null;this.qg=
-1;this.Xc=this.size=this.We=0;this.Ic=c}d.prototype.Jc=function(c){c<this.We?(this.f[c*this.Ic]=this.qg,this.qg=c):this.We--;this.size--};d.prototype.O=function(c,b){return this.f[c*this.Ic+b]};d.prototype.L=function(c,b,a){this.f[c*this.Ic+b]=a};d.prototype.be=function(){var c=this.qg;if(-1==c){if(this.We==this.Xc){c=0!=this.Xc?a.I.truncate(3*(this.Xc+1)/2):1;2147483647<c&&(c=2147483647);if(c==this.Xc)throw a.g.Uc();this.Gm(c)}c=this.We;this.We++}else this.qg=this.f[c*this.Ic];this.size++;for(var b=
c*this.Ic+this.Ic,e=c*this.Ic;e<b;e++)this.f[e]=-1;return c};d.prototype.Pj=function(c){var b=this.qg;if(-1==b){if(this.We==this.Xc){b=0!=this.Xc?a.I.truncate(3*(this.Xc+1)/2):1;2147483647<b&&(b=2147483647);if(b==this.Xc)throw a.g.Uc();this.Gm(b)}b=this.We;this.We++}else this.qg=this.f[b*this.Ic];this.size++;for(var e=b*this.Ic,d=this.Ic,g=0;g<d;g++)this.f[e+g]=c[g];return b};d.prototype.Nh=function(c){this.qg=-1;this.size=this.We=0;c&&(this.f=null,this.Xc=0)};d.prototype.de=function(c){c>this.Xc&&
this.Gm(c)};d.prototype.Pu=function(c,b,a){var e=this.f[this.Ic*b+a];this.f[this.Ic*b+a]=this.f[this.Ic*c+a];this.f[this.Ic*c+a]=e};d.Zk=function(){return-2};d.lm=function(){return-3};d.Zw=function(c){return 0<=c};d.prototype.Gm=function(c){null==this.f&&(this.f=[]);this.Xc=c};return d}();a.Fc=d;d=function(){function d(c){this.f=new Int32Array(0);this.qg=-1;this.Xc=this.size=this.We=0;this.Ic=c}d.prototype.Jc=function(c){c<this.We?(this.f[c*this.Ic]=this.qg,this.qg=c):this.We--;this.size--};d.prototype.O=
function(c,b){return this.f[c*this.Ic+b]};d.prototype.L=function(c,b,a){this.f[c*this.Ic+b]=a};d.prototype.be=function(){var c=this.qg;if(-1==c){if(this.We==this.Xc){c=0!=this.Xc?a.I.truncate(3*(this.Xc+1)/2):1;2147483647<c&&(c=2147483647);if(c==this.Xc)throw a.g.Uc();this.Gm(c)}c=this.We;this.We++}else this.qg=this.f[c*this.Ic];this.size++;for(var b=c*this.Ic;b<c*this.Ic+this.Ic;b++)this.f[b]=-1;return c};d.prototype.Pj=function(c){var b=this.qg;if(-1==b){if(this.We==this.Xc){b=0!=this.Xc?a.I.truncate(3*
(this.Xc+1)/2):1;2147483647<b&&(b=2147483647);if(b==this.Xc)throw a.g.Uc();this.Gm(b)}b=this.We;this.We++}else this.qg=this.f[b*this.Ic];this.size++;for(var e=b*this.Ic,d=0;d<c.length;d++)this.f[e+d]=c[d];return b};d.prototype.Nh=function(c){this.qg=-1;this.size=this.We=0;c&&(this.f=null,this.Xc=0)};d.prototype.de=function(c){c>this.Xc&&this.Gm(c)};d.prototype.Pu=function(c,b,a){var e=this.f[this.Ic*b+a];this.f[this.Ic*b+a]=this.f[this.Ic*c+a];this.f[this.Ic*c+a]=e};d.Zk=function(){return-2};d.lm=
function(){return-3};d.Zw=function(c){return 0<=c};d.prototype.Gm=function(c){null==this.f&&(this.f=new Int32Array(0));var b=new Int32Array(this.Ic*c);b.set(this.f,0);this.f=b;this.Xc=c};return d}();a.II=d;!0===a.ah.Sk&&(a.Fc=a.II)})(w||(w={}));(function(a){var d;(function(b){b[b.enumInputModeBuildGraph=0]="enumInputModeBuildGraph";b[b.enumInputModeSimplifyAlternate=4]="enumInputModeSimplifyAlternate";b[b.enumInputModeSimplifyWinding=5]="enumInputModeSimplifyWinding";b[b.enumInputModeIsSimplePolygon=
7]="enumInputModeIsSimplePolygon"})(d||(d={}));var g=function(){function b(b){this.me=b;this.Zg=NaN;this.LD=new a.Ag;this.MD=new a.Ag;this.Aq=new a.Nd;this.Bq=new a.Nd}b.prototype.compare=function(b,c,a){b=b.da(a);this.me.iy(c,this.LD);this.me.iy(b,this.MD);c=this.LD.get();b=this.MD.get();this.Aq.K(c.na,c.la);this.Bq.K(b.na,b.la);if(this.Aq.va<this.Bq.qa)return-1;if(this.Aq.qa>this.Bq.va)return 1;a=c.ja==c.ha;var e=b.ja==b.ha;if(a||e){if(a&&e)return 0;if(c.ja==b.ja&&c.na==b.na)return a?1:-1;if(c.ha==
b.ha&&c.la==b.la)return a?-1:1}a=c.xe(this.Zg,this.Aq.qa);e=b.xe(this.Zg,this.Bq.qa);a==e&&(a=Math.min(c.ha,b.ha),e=.5*(a+this.Zg),e==this.Zg&&(e=a),a=c.xe(e,this.Aq.qa),e=b.xe(e,this.Bq.qa));return a<e?-1:a>e?1:0};b.prototype.$F=function(b){this.Zg=b};return b}(),c=function(){function b(b){this.ab=b;this.uE=new a.Ag;this.nf=new a.b;this.xx=new a.Nd}b.prototype.eS=function(b){this.nf.J(b)};b.prototype.compare=function(b,c){this.ab.iy(b.da(c),this.uE);b=this.uE.get();this.xx.K(b.na,b.la);if(this.nf.x<
this.xx.qa)return-1;if(this.nf.x>this.xx.va)return 1;b=b.xe(this.nf.y,this.nf.x);return this.nf.x<b?-1:this.nf.x>b?1:0};return b}();d=function(){function b(){this.OD=this.Vh=this.Yh=this.px=this.Pm=this.je=this.xc=this.Ig=this.Td=null;this.sn=this.eg=-1;this.ND=!0;this.tx=!1;this.qx=NaN;this.ei=new a.wd;this.EK=2147483647;this.DK=a.I.truncate(-2147483648);this.Kf=this.Md=this.Ek=this.lp=this.Bl=this.kp=this.Zq=this.Be=-1;this.ta=0}b.prototype.Mv=function(b){this.qx=b};b.prototype.Ul=function(){null==
this.Td&&(this.Td=new a.Fc(8));var b=this.Td.be();this.Td.L(b,1,0);return b};b.prototype.kQ=function(){null==this.xc&&(this.xc=new a.Fc(8));var b=this.xc.be();this.xc.L(b,2,0);this.xc.L(b,3,0);var c=this.xc.be();this.xc.L(c,2,0);this.xc.L(c,3,0);this.GF(b,c);this.GF(c,b);return b};b.prototype.FE=function(){null==this.je&&(this.je=new a.Fc(8));var b=this.je.be();this.je.L(b,2,0);return b};b.prototype.QR=function(b,c){this.Td.L(b,7,c)};b.prototype.em=function(b,c){this.Td.L(b,2,c)};b.prototype.PR=function(b,
c){this.Td.L(b,1,c)};b.prototype.fS=function(b,c){this.Td.L(b,3,c)};b.prototype.cS=function(b,c){this.Td.L(b,4,c)};b.prototype.Lp=function(b,c){this.Td.L(b,5,c)};b.prototype.uN=function(b){return this.Td.O(b,5)};b.prototype.OR=function(b,c){this.Td.L(b,6,c)};b.prototype.IJ=function(b,c){this.OR(c,b)};b.prototype.FF=function(b,c){this.xc.L(b,1,c)};b.prototype.GF=function(b,c){this.xc.L(b,4,c)};b.prototype.Rk=function(b,c){this.xc.L(b,5,c)};b.prototype.Qk=function(b,c){this.xc.L(b,6,c)};b.prototype.VR=
function(b,c){this.xc.L(b,2,c)};b.prototype.Du=function(b,c){this.xc.L(b,3,c)};b.prototype.zC=function(b){return this.xc.O(b,3)};b.prototype.Ir=function(b,c){this.xc.L(b,7,c)};b.prototype.zG=function(b,c){if(-1!=this.ql(b))for(c=c?-1:b,b=this.ql(b);-1!=b;b=this.zq(b))this.a.lb(this.Gi(b),this.lp,c)};b.prototype.Tu=function(b,c){-1!=b&&(this.zG(b,c),this.zG(this.sa(b),c))};b.prototype.Gr=function(b,c){this.je.L(b,1,c)};b.prototype.yg=function(b,c){this.je.L(b,2,c)};b.prototype.cm=function(b,c){this.je.L(b,
3,c);this.LR(b,this.tN(c));this.KR(c,b)};b.prototype.KR=function(b,c){this.je.L(b,4,c)};b.prototype.LR=function(b,c){this.je.L(b,5,c)};b.prototype.AF=function(b,c){this.je.L(b,6,c)};b.prototype.yF=function(b,c){this.je.L(b,7,c)};b.prototype.xF=function(b,c){this.Pm.write(b,c)};b.prototype.zF=function(b,c){this.px.write(b,c)};b.prototype.bT=function(b){var c=0,e=0,d=this.pC(b),g=new a.b,f=new a.b,h=new a.b;this.tq(d,g);f.J(g);var l=d;do this.pl(l,h),e+=a.b.Fb(f,h),this.Pe(this.sa(l))!=b&&(c+=(h.x-
g.x-(f.x-g.x))*(h.y-g.y+(f.y-g.y))*.5),f.J(h),l=this.Wb(l);while(l!=d);this.Pm.write(b,c);this.px.write(b,e)};b.prototype.GQ=function(b){var e=new g(this),d=new a.bj;d.de(a.I.truncate(this.ta/2));d.Hn(e);for(var f=new a.ga(0),h=this.Eg(),l=null,m=0,p=new a.b,q=this.Be;-1!=q;q=this.Bf(q)){m++;var r=this.te(q);if(-1!=r){f.cf(0);if(!this.VS(d,h,f,r)){this.w(q,p);e.$F(p.y);var v=r;do{var x=this.tb(v,h);-1!=x&&(d.kd(x,-1),this.Bb(v,h,-2));v=this.Wb(this.sa(v))}while(r!=v);v=r;do x=this.tb(v,h),-1==x&&
(x=d.addElement(v,-1),f.add(x)),v=this.Wb(this.sa(v));while(r!=v)}for(r=f.size-1;0<=r;r--)x=f.get(r),v=d.da(x),this.Bb(this.sa(v),h,x),this.FQ(d,x,b)}else-1==this.mw(q)&&(null==l&&(l=new c(this)),this.w(q,p),l.eS(p),v=d.GR(l),r=this.Ek,-1!=v&&(x=d.da(v),this.Pe(x)==this.Pe(this.sa(x))&&(x=this.BC(d,v)),-1!=x&&(r=this.Pe(x))),this.IJ(r,q))}this.kh(h)};b.prototype.FQ=function(b,c,a){var e=b.da(c),d=this.Pe(e);if(-1==this.ym(d)){var g=this.BC(b,c),k=this.sa(e),f=this.Pe(k);this.yo(d);this.yo(f);var h=
this.ym(d),l=this.ym(f);-1==g&&-1==h&&(f==d?(this.cm(f,this.Ek),h=l=this.Ek):(-1==l&&(this.cm(f,this.Ek),l=this.Ek),this.cm(d,f),h=f));if(-1!=g){var n=this.Pe(g);-1==l&&(0>=this.yo(n)?(l=this.ym(n),this.cm(f,l)):(this.cm(f,n),l=n),f==d&&(h=l))}-1==h&&this.WS(d,f);0==a?this.aR(b,c,e,g,d,f):5==a?this.bR(b,c,e,k,d,f):4==a&&this.$Q(e,g,d,f)}};b.prototype.aR=function(b,c,a,d,g,f){var e=this.pj(g);if(-1!=d){var k=this.pj(f),h=this.pj(this.Pe(d));d=e&k&h;h^=h&this.Gg(a);h|=d;0!=h&&(this.yg(f,k|h),this.yg(g,
h|e),e=e||h)}for(c=b.bb(c);-1!=c;c=b.bb(c)){d=b.da(c);a=this.Pe(this.sa(d));g=this.pj(a);f=this.Gg(d);k=this.Pe(d);h=this.pj(k);d=g&h&e;e^=e&f;e|=d;if(0==e)break;this.yg(a,g|e);this.yg(k,h|e)}};b.prototype.bR=function(b,c,d,g,f,h){if(f!=h){d=this.tb(d,this.Kf);d+=this.tb(g,this.Kf);g=0;var e=new a.ga(0),k=new a.ga(0);k.add(0);for(var l=b.gc(-1);l!=c;l=b.bb(l)){var n=b.da(l),m=this.sa(n),p=this.Pe(n),q=this.Pe(m);if(p!=q){n=this.tb(n,this.Kf);n+=this.tb(m,this.Kf);g+=n;m=!1;0!=e.size&&e.tc()==q&&(k.af(),
e.af(),m=!0);if(-1==this.ym(q))throw a.g.wa();m&&this.ym(q)==p||(k.add(g),e.add(p))}}g+=d;0!=e.size&&e.tc()==h&&(k.af(),e.af());0!=g?0==k.tc()&&(b=this.a.$c,b=this.ya(b),this.yg(f,b)):0!=k.tc()&&(b=this.a.$c,b=this.ya(b),this.yg(f,b))}};b.prototype.$Q=function(b,c,a,d){var e=this.ya(this.a.$c);if(-1==c)this.yg(d,this.sn),b=this.tb(b,this.eg),0!=(b&1)?this.yg(a,e):this.yg(a,this.sn);else{var g=this.pj(d);0==g&&(g=this.pj(this.Pe(c)),this.yg(d,g));b=this.tb(b,this.eg);0!=(b&1)?this.yg(a,g==e?this.sn:
e):this.yg(a,g)}};b.prototype.VS=function(b,c,a,d){var e=d,g=-1,k=-1,f=0;do{if(2==f)return!1;var h=this.tb(e,c);if(-1!=h){if(-1!=g)return!1;g=h}else{if(-1!=k)return!1;k=e}f++;e=this.Wb(this.sa(e))}while(d!=e);if(-1==k||-1==g)return!1;this.Bb(b.da(g),c,-2);b.Vi(g,k);a.add(g);return!0};b.prototype.WS=function(b,c){var a=this.yo(b);if(0!=a){var e=this.yo(c);0<a&&0>e?this.cm(b,c):0>a&&0<e?this.cm(b,c):(a=this.ym(c),-1!=a&&this.cm(b,a))}};b.prototype.RL=function(b,c){this.lp=this.a.re();for(var e=0,d=
c.size;e<d;e++){var g=c.get(e),k=this.a.Ra(g,this.Bl),f=this.a.Vf(this.a.rd(g)),h=this.a.Lb(f);if(a.T.Kc(h)){var l=this.a.X(g);if(-1!=l){var m=this.a.Ra(l,this.Bl);if(k!=m){var p=this.kQ(),q=this.sa(p),r=this.Ig.be();this.Ig.L(r,0,g);this.Ig.L(r,1,-1);this.Ir(p,r);this.FF(p,k);r=this.te(k);-1==r?(this.em(k,p),this.Rk(p,q),this.Qk(q,p)):(k=this.fe(r),this.Rk(r,q),this.Qk(q,r),this.Qk(k,p),this.Rk(p,k));this.FF(q,m);k=this.te(m);-1==k?(this.em(m,q),this.Qk(p,q),this.Rk(q,p)):(m=this.fe(k),this.Rk(k,
p),this.Qk(p,k),this.Qk(m,q),this.Rk(q,m));f=this.ya(f);0==b?(this.Bb(q,this.Md,0),this.Bb(p,this.Md,1736==h?f:0)):5==b?(m=new a.b,this.a.w(g,m),g=new a.b,this.a.w(l,g),k=l=0,0>m.compare(g)?l=1:k=-1,this.Bb(q,this.Md,0),this.Bb(p,this.Md,0),this.Bb(p,this.Kf,l),this.Bb(q,this.Kf,k)):7==b?(this.Bb(q,this.Md,this.sn),this.Bb(p,this.Md,1736==h?f:0)):4==b&&(this.Bb(q,this.Md,0),this.Bb(p,this.Md,0),this.Bb(p,this.eg,1),this.Bb(q,this.eg,1));h=1736==h?this.DK:0;this.Du(p,f|h);this.Du(q,f|h)}}}}};b.prototype.ZP=
function(b,c){var a=this.ql(c);if(-1!=a){var e=this.ql(b);this.Ig.L(a,1,e);this.Ir(b,a);this.Ir(c,-1)}b=this.sa(b);c=this.sa(c);a=this.ql(c);-1!=a&&(e=this.ql(b),this.Ig.L(a,1,e),this.Ir(b,a),this.Ir(c,-1))};b.prototype.AS=function(b){function c(b,c){return d.lL(b,c)}var e=new a.ga(0);e.xb(10);for(var d=this,g=this.Be;-1!=g;g=this.Bf(g)){e.clear(!1);var f=this.te(g);if(-1!=f){var h=f;do e.add(h),h=this.Wb(this.sa(h));while(h!=f);if(1<e.size){h=!0;if(2<e.size)e.xd(0,e.size,c),e.add(e.get(0));else if(0<
this.kL(e.get(0),e.get(1))){var l=e.get(0);e.set(0,e.get(1));e.set(1,l)}else h=!1;for(var m=l=e.get(0),p=this.jf(m),q=this.sa(m),r=-1,v=1,x=e.size;v<x;v++){var y=e.get(v),w=this.sa(y),z=this.qj(w);if(z==p&&y!=m){if(0==b)r=this.zC(m)|this.zC(y),this.Du(m,r),this.Du(q,r),this.Bb(m,this.Md,this.tb(m,this.Md)|this.tb(y,this.Md)),this.Bb(q,this.Md,this.tb(q,this.Md)|this.tb(w,this.Md));else if(-1!=this.Kf)r=this.tb(m,this.Kf)+this.tb(y,this.Kf),w=this.tb(q,this.Kf)+this.tb(w,this.Kf),this.Bb(m,this.Kf,
r),this.Bb(q,this.Kf,w);else{if(7==b){this.ei=new a.wd(5,g,-1);return}-1!=this.eg&&(r=this.tb(m,this.eg)+this.tb(y,this.eg),w=this.tb(q,this.eg)+this.tb(w,this.eg),this.Bb(m,this.eg,r),this.Bb(q,this.eg,w))}this.ZP(m,y);this.Wv(y);r=m;e.set(v,-1);y==l&&(e.set(0,-1),l=-1)}else this.Tu(r,!1),r=-1,m=y,p=z,q=w}this.Tu(r,!1);r=-1;if(h){l=-1;v=0;for(x=e.size;v<x;v++)if(y=e.get(v),-1!=y)if(-1==l)m=l=y,p=this.jf(m),q=this.sa(m);else if(y!=m&&(w=this.sa(y),z=this.qj(w),this.Qk(q,y),this.Rk(y,q),m=y,p=z,q=
w,7==b&&(this.tb(y,this.Md)|this.tb(this.fe(y),this.Md))==(this.sn|1))){this.ei=new a.wd(5,g,-1);return}this.em(g,l)}else{l=-1;v=0;for(x=e.size;v<x;v++)if(y=e.get(v),-1!=y){l=y;break}f!=l&&this.em(g,l)}}}}};b.prototype.AK=function(){for(var b=-1,c=this.Eg(),d=this.Be;-1!=d;d=this.Bf(d)){var g=this.te(d);if(-1!=g){var f=g;do{if(1!=this.tb(f,c)){var h=this.FE();this.Gr(h,f);this.yF(h,b);-1!=b&&this.AF(b,h);var b=h,l=0,m=f;do l|=this.tb(m,this.Md),this.VR(m,h),this.Bb(m,c,1),m=this.Wb(m);while(m!=f);
this.yg(h,l)}f=this.Wb(this.sa(f))}while(f!=g)}}h=this.FE();this.Gr(h,-1);this.yF(h,b);-1!=b&&this.AF(b,h);this.Ek=h;this.Pm=a.qd.Yc(this.je.size,NaN);this.px=a.qd.Yc(this.je.size,NaN);this.xF(this.Ek,Infinity);this.zF(this.Ek,Infinity);this.kh(c)};b.prototype.EN=function(b,c,a){c=-1!=c?c:this.te(b);if(-1==c)return-1;for(b=c;;){if(1!=this.tb(c,a))return c;c=this.Wb(this.sa(c));if(c==b)return-1}};b.prototype.uR=function(){for(var b=this.Eg(),c=this.Be;-1!=c;c=this.Bf(c))for(var a=-1;;){var d=this.EN(c,
a,b);if(-1==d)break;for(var a=this.Wb(this.sa(d)),g=d;;){var f=this.Wb(g),h=this.fe(g),l=this.sa(g);if(h==l){this.bM(g);if(a==g||a==l)a=-1;if(g==d||h==d){d=f;if(g==d||h==d)break;g=f;continue}}else this.Bb(g,b,1);g=f;if(g==d)break}}};b.prototype.Ay=function(b,c,d,g){this.xg();this.ND=g;this.a=b;this.kp=this.a.RB();b=new a.ga(0);b.xb(null!=d?this.a.F(d.get(0)):this.a.pd);var e=0,f=1,k=null!=d?d.get(0):this.a.$c;for(g=1;-1!=k;){this.a.EF(k,this.kp,f);for(var f=f<<1,h=this.a.Vb(k);-1!=h;h=this.a.bc(h))for(var l=
this.a.Cb(h),n=0,m=this.a.Ha(h);n<m;n++)b.add(l),l=this.a.X(l);a.T.Km(this.a.Lb(k))||(e+=this.a.ea(k));null!=d?(k=g<d.size?d.get(g):-1,g++):k=this.a.we(k)}this.sn=f;this.ta=b.size;this.a.Mu(b,this.ta);null==this.Ig&&(this.Ig=new a.Fc(2),this.Td=new a.Fc(8),this.xc=new a.Fc(8),this.je=new a.Fc(8));this.Ig.de(this.ta);this.Td.de(this.ta+10);this.xc.de(2*this.ta+32);this.je.de(Math.max(32,e));this.Bl=this.a.re();d=new a.b;g=0;e=new a.b;d.Eh();for(f=0;f<=this.ta;f++)if(f<this.ta?(l=b.get(f),this.a.w(l,
e)):e.Eh(),!d.ub(e)){if(g<f){l=this.Ul();for(m=n=-1;g<f;g++)m=b.get(g),this.a.lb(m,this.Bl,l),k=this.Ig.be(),this.Ig.L(k,0,m),this.Ig.L(k,1,n),n=k,h=this.a.rd(m),k=this.a.Vf(h),k=this.ya(k),this.PR(l,this.md(l)|k);this.QR(l,n);this.Lp(l,this.a.gb(m));-1!=this.Zq&&this.cS(this.Zq,l);this.fS(l,this.Zq);this.Zq=l;-1==this.Be&&(this.Be=l)}g=f;d.J(e)}this.Md=this.Eg();5==c&&(this.Kf=this.Eg());4==c&&(this.eg=this.Eg());this.RL(c,b);0==this.ei.yh&&(this.AS(c),0==this.ei.yh&&(isNaN(this.qx)||this.ZK()?(this.AK(),
0==this.ei.yh&&(this.kh(this.Md),this.Md=-1,this.ND&&this.GQ(c))):this.tx=!0))};b.prototype.Wv=function(b){var c=this.Wb(b),a=this.fe(b),e=this.sa(b),d=this.Wb(e),g=this.fe(e);c!=e&&(this.Qk(g,c),this.Rk(c,g));a!=e&&(this.Qk(a,d),this.Rk(d,a));a=this.qj(b);this.te(a)==b&&(d!=b?this.em(a,d):this.em(a,-1));d=this.qj(e);this.te(d)==e&&(c!=e?this.em(d,c):this.em(d,-1));this.xc.Jc(b);this.xc.Jc(e)};b.prototype.BC=function(b,c){for(;;)if(c=b.ge(c),-1!=c){var a=b.da(c);if(this.Pe(a)!=this.Pe(this.sa(a)))return a}else return-1};
b.prototype.Mp=function(b,c,a){void 0===a&&(a=!0);this.Ay(b,0,null,a)};b.prototype.tF=function(b,c){var e=new a.ga(0);e.add(c);this.Ay(b,4,e,1736==b.Lb(c))};b.prototype.uF=function(b,c){var e=new a.ga(0);e.add(c);this.Ay(b,5,e,!0)};b.prototype.xg=function(){null!=this.a&&(-1!=this.kp&&(this.a.tR(this.kp),this.kp=-1),-1!=this.Bl&&(this.a.bf(this.Bl),this.Bl=-1),-1!=this.lp&&(this.a.bf(this.lp),this.lp=-1),-1!=this.Md&&(this.kh(this.Md),this.Md=-1),-1!=this.Kf&&(this.kh(this.Kf),this.Kf=-1),-1!=this.eg&&
(this.kh(this.eg),this.eg=-1),this.a=null,this.Td.Nh(!0),this.Ig.Nh(!0),this.Zq=this.Be=-1,null!=this.xc&&this.xc.Nh(!0),null!=this.Yh&&(this.Yh.length=0),null!=this.Vh&&(this.Vh.length=0),null!=this.OD&&(this.OD.length=0),null!=this.je&&this.je.Nh(!0),this.Ek=-1,this.Pm=null)};b.prototype.te=function(b){return this.Td.O(b,2)};b.prototype.w=function(b,c){this.a.SC(this.uN(b),c)};b.prototype.md=function(b){return this.Td.O(b,1)};b.prototype.Bf=function(b){return this.Td.O(b,4)};b.prototype.mw=function(b){return this.Td.O(b,
6)};b.prototype.ol=function(b){return this.Td.O(b,7)};b.prototype.zq=function(b){return this.Ig.O(b,1)};b.prototype.Gi=function(b){return this.Ig.O(b,0)};b.prototype.Sf=function(b,c){c=this.Vh[c];return c.size<=b?-1:c.read(b)};b.prototype.fm=function(b,c,a){c=this.Vh[c];c.size<=b&&c.resize(this.Td.size,-1);c.write(b,a)};b.prototype.uo=function(){null==this.Vh&&(this.Vh=[]);for(var b=a.ga.Yc(this.Td.Xc,-1),c=0,d=this.Vh.length;c<d;c++)if(null==this.Vh[c])return this.Vh[c]=b,c;this.Vh.push(b);return this.Vh.length-
1};b.prototype.vo=function(b){this.Vh[b]=null};b.prototype.qj=function(b){return this.xc.O(b,1)};b.prototype.jf=function(b){return this.qj(this.sa(b))};b.prototype.sa=function(b){return this.xc.O(b,4)};b.prototype.fe=function(b){return this.xc.O(b,5)};b.prototype.Wb=function(b){return this.xc.O(b,6)};b.prototype.Pe=function(b){return this.xc.O(b,2)};b.prototype.Qe=function(b){return this.pj(this.xc.O(b,2))};b.prototype.ql=function(b){return this.xc.O(b,7)};b.prototype.tq=function(b,c){this.w(this.qj(b),
c)};b.prototype.pl=function(b,c){this.w(this.jf(b),c)};b.prototype.Gg=function(b){return this.xc.O(b,3)&this.EK};b.prototype.tb=function(b,c){c=this.Yh[c];return c.size<=b?-1:c.read(b)};b.prototype.Bb=function(b,c,a){c=this.Yh[c];c.size<=b&&c.resize(this.xc.size,-1);c.write(b,a)};b.prototype.Eg=function(){null==this.Yh&&(this.Yh=[]);for(var b=a.ga.Yc(this.xc.Xc,-1),c=0,d=this.Yh.length;c<d;c++)if(null==this.Yh[c])return this.Yh[c]=b,c;this.Yh.push(b);return this.Yh.length-1};b.prototype.kh=function(b){this.Yh[b]=
null};b.prototype.bM=function(b){var c=this.Pe(b),a=this.Wb(b);a==this.sa(b)&&(a=this.Wb(a),a==b&&(a=-1));this.pC(c)==b&&this.Gr(c,a);a=this.Pm.read(c);isNaN(a)||(this.xF(c,NaN),this.zF(c,NaN));this.Tu(b,!0);this.Wv(b)};b.prototype.cM=function(b){for(var c=0,a=b.size;c<a;c++){var e=b.get(c),d=this.Pe(this.sa(e));this.Gr(this.Pe(e),-1);this.Gr(d,-1);this.Tu(e,!0);this.Wv(e)}};b.prototype.pC=function(b){return this.je.O(b,1)};b.prototype.pj=function(b){return this.je.O(b,2)};b.prototype.ym=function(b){return this.je.O(b,
3)};b.prototype.tN=function(b){return this.je.O(b,4)};b.prototype.yo=function(b){var c=this.Pm.read(b);isNaN(c)&&(this.bT(b),c=this.Pm.read(b));return c};b.prototype.ya=function(b){return this.a.yC(b,this.kp)};b.prototype.se=function(b){return this.a.Ra(b,this.Bl)};b.prototype.GN=function(b){return this.a.Ra(b,this.lp)};b.prototype.FN=function(b,c){var a=this.te(b);if(-1==a)return-1;var e=a,d=-1,g=-1;do{if(this.jf(e)==c)return e;if(-1==d){d=this.te(c);if(-1==d)break;g=d}if(this.jf(g)==b)return e=
this.sa(g);e=this.Wb(this.sa(e));g=this.Wb(this.sa(g))}while(e!=a&&g!=d);return-1};b.prototype.iy=function(b,c){c.mq();c=c.get();var e=new a.b;this.tq(b,e);c.ed(e);this.pl(b,e);c.vd(e)};b.prototype.lL=function(b,c){if(b==c)return 0;var e=new a.b;this.pl(b,e);var d=new a.b;this.pl(c,d);if(e.ub(d))return 0;c=new a.b;this.tq(b,c);b=new a.b;b.pc(e,c);e=new a.b;e.pc(d,c);return a.b.cq(b,e)};b.prototype.kL=function(b,c){if(b==c)return 0;var e=new a.b;this.pl(b,e);var d=new a.b;this.pl(c,d);if(e.ub(d))return 0;
c=new a.b;this.tq(b,c);b=new a.b;b.pc(e,c);e=new a.b;e.pc(d,c);return 0<=e.y&&0<b.y?a.b.cq(b,e):0};b.prototype.ZK=function(){for(var b=a.vi.Ty(this.qx),c=new a.b,d=new a.b,g=new a.b,f=new a.b,h=new a.b,l=this.Be;-1!=l;l=this.Bf(l)){var m=this.te(l);if(-1!=m){var p=m;this.tq(p,c);this.pl(p,d);h.pc(d,c);var q=h.Up();do{var r=p,p=this.Wb(this.sa(p));if(p!=r){this.pl(p,g);f.pc(g,c);var r=f.Up(),v=f.Ai(h);if(v*v/(r*q)*Math.min(r,q)<=b)return!1;h.J(f);q=r;d.J(g)}}while(p!=m)}}return!0};return b}();a.gs=
d})(w||(w={}));(function(a){var d=function(){function d(){this.h=null;this.TD=new a.b;this.UD=new a.b;this.Qg=null;this.Gq=!1;this.Ym=-1}d.prototype.Te=function(c){return c<this.Qg.length?this.Qg[c]:!1};d.prototype.xm=function(c,b,e,d){var g=a.T.ve(this.h.a.Lb(e));if(2==a.T.ve(this.h.a.Lb(b))&&1==g)this.WL(c,b,e,d);else throw a.g.wa();};d.prototype.Mp=function(c,b){null==this.h&&(this.h=new a.gs);this.h.Mp(c,b)};d.prototype.Np=function(c,b,e){a.aj.$(c,b,e,!0);for(b=c.$c;-1!=b;b=c.we(b))1736==c.Lb(b)&&
a.mm.$(c,b,-1,this.Gq,e);this.Mp(c,e)};d.prototype.EB=function(c,b,a,d,g){var e=this.h.a;if(1736==e.Lb(c))for(c=e.Vb(c);-1!=c;c=e.bc(c)){var f=e.Cb(c);this.h.se(f);this.h.se(e.X(f));var k=this.h.GN(f);if(-1!=k){var h=this.h.tb(k,a);if(1!=h&&2!=h)if(this.Te(this.h.Qe(k))){this.h.Bb(k,a,1);var h=e.Cf(b,-1),l=k,n=this.h.se(f),m=1;do{var p=this.tl(f,g);e.zi(h,p);-1!=d&&this.h.fm(n,d,1);this.h.Bb(l,a,1);var l=this.h.Wb(l),q;do p=1==m?e.X(f):e.Ua(f),q=-1!=p?this.h.se(p):-1;while(q==n);var r=this.h.qj(l);
if(r!=q){do p=1==m?e.Ua(f):e.X(f),q=-1!=p?this.h.se(p):-1;while(q==n);r!=q?(q=r,p=this.h.Gi(this.h.ol(q))):m=-m}n=q;f=p}while(l!=k);e.Gn(h,!0)}else this.h.Bb(k,a,2)}}};d.prototype.UB=function(){for(var c=this.h.Eg(),b=new a.ga(0),e=this.h.Be;-1!=e;e=this.h.Bf(e)){var d=this.h.te(e),g=d;if(-1!=d){do{if(1!=this.h.tb(g,c)){var f=this.h.sa(g);this.h.Bb(f,c,1);this.h.Bb(g,c,1);this.Te(this.h.Qe(g))&&this.Te(this.h.Qe(f))&&b.add(g)}g=this.h.Wb(this.h.sa(g))}while(g!=d)}}this.h.kh(c);this.h.cM(b)};d.prototype.tl=
function(c,b){return-1==b?c:this.kO(c,b)};d.prototype.kO=function(c,b){var a=this.h.a,d,g,f=this.h.ol(this.h.se(c));do{d=this.h.Gi(f);g=a.Vf(a.rd(d));if(g==b)return d;f=this.h.zq(f)}while(-1!=f);return c};d.prototype.Xp=function(c,b,e){this.UB();var d=this.h.a,g=d.jg(1736),f=this.h.Eg();this.pG(c,b,g,e,f,-1);this.h.kh(f);a.mm.$(d,g,1,this.Gq,null);return g};d.prototype.pG=function(c,b,a,d,g,f){this.EB(c,a,g,f,d);-1!=b&&this.EB(b,a,g,f,d);c=this.h.a;for(b=this.h.Be;-1!=b;b=this.h.Bf(b)){var e=this.h.te(b);
if(-1!=e){var k=e;do{var h=this.h.tb(k,g);if(1!=h&&2!=h)if(this.Te(this.h.Qe(k))){var h=c.Cf(a,-1),l=k;do{var n=this.h.ql(l);-1!=n?n=this.h.Gi(n):(n=this.h.Gi(this.h.ql(this.h.sa(l))),n=this.h.a.X(n));n=this.tl(n,d);c.zi(h,n);this.h.Bb(l,g,1);-1!=f&&(n=this.h.se(n),this.h.fm(n,f,1));l=this.h.Wb(l)}while(l!=k);c.Gn(h,!0)}else this.h.Bb(k,g,2);k=this.h.Wb(this.h.sa(k))}while(k!=e)}}};d.prototype.RS=function(c,b,e){var d=this.h.a,g=d.jg(1736),f=d.jg(1607),h=d.jg(550);this.UB();var l=-1,m=this.h.Eg(),
p=this.h.uo();this.pG(c,b,g,e,m,p);for(c=this.h.Be;-1!=c;c=this.h.Bf(c))if(b=this.h.te(c),-1!=b){var q=b;do{var r=this.h.tb(q,m),v=this.h.tb(this.h.sa(q),m),r=r|v;if(2==r)if(r=this.h.Gg(q),this.Te(r)){var x=d.Cf(f,-1),y=q,r=this.Au(c,d),r=this.tl(r,e);d.zi(x,r);this.h.fm(c,p,1);do{r=this.h.jf(y);v=this.Au(r,d);v=this.tl(v,e);d.zi(x,v);this.h.Bb(y,m,1);this.h.Bb(this.h.sa(y),m,1);this.h.fm(r,p,1);y=this.h.Wb(y);r=this.h.tb(y,m);v=this.h.tb(this.h.sa(y),m);r|=v;if(2!=r)break;r=this.h.Gg(y);if(!this.Te(r)){this.h.Bb(y,
m,1);this.h.Bb(this.h.sa(y),m,1);break}}while(y!=q)}else this.h.Bb(q,m,1),this.h.Bb(this.h.sa(q),m,1);q=this.h.Wb(this.h.sa(q))}while(q!=b)}for(c=this.h.Be;-1!=c;c=this.h.Bf(c))r=this.h.Sf(c,p),1!=r&&(r=this.h.md(c),this.Te(r)&&(-1==l&&(l=d.Cf(h,-1)),b=this.h.ol(c),-1!=b&&(b=this.h.Gi(b),r=this.tl(b,e),d.zi(l,r))));this.h.vo(p);this.h.kh(m);a.mm.$(d,g,1,this.Gq,null);e=[];e[0]=h;e[1]=f;e[2]=g;return e};d.prototype.Au=function(c,b){var a=-1;for(c=this.h.ol(c);-1!=c;c=this.h.zq(c)){var d=this.h.Gi(c);
-1==a&&(a=d);var g=this.h.ya(b.Vf(b.rd(d)));if(this.Te(g)){a=d;break}}return a};d.prototype.fy=function(c,b){for(var e=this.h.qj(b),d=this.h.jf(b),g=0,f=0,h=this.h.ol(e);-1!=h;h=this.h.zq(h)){var l=this.h.Gi(h),m=c.rd(l),p=this.h.ya(c.Vf(m)),q=c.X(l),r=c.Ua(l),m=c.Cb(m);m==l&&(this.Ym=b);-1!=q&&this.h.se(q)==d?(g++,this.Te(p)&&(m==q&&(this.Ym=this.h.Wb(b)),f++)):-1!=r&&this.h.se(r)==d&&(g--,this.Te(p)&&(m==r&&(this.Ym=this.h.Wb(b)),f--))}this.h.w(e,this.TD);this.h.w(d,this.UD);e=a.b.Fb(this.TD,this.UD);
return(0!=f?f:g)*e};d.prototype.Ao=function(c){return this.h.Gg(c)|this.h.Qe(c)|this.h.Qe(this.h.sa(c))};d.prototype.sG=function(c){for(var b=this.h.sa(this.h.fe(c)),a=-1;b!=c;){if(this.Te(this.Ao(b))){if(-1!=a)return-1;a=b}b=this.h.sa(this.h.fe(b))}return-1!=a?this.h.sa(a):-1};d.prototype.tG=function(c){for(var b=this.h.sa(this.h.Wb(c)),a=-1;b!=c;){if(this.Te(this.Ao(b))){if(-1!=a)return-1;a=b}b=this.h.sa(this.h.Wb(b))}return-1!=a?this.h.sa(a):-1};d.prototype.jF=function(c,b,e,d,g){var f=this.h.a,
k=c,h=this.h.sa(k);this.h.Bb(k,e,1);this.h.Bb(h,e,1);var l=this.fy(f,k);this.Ym=-1;for(var m=k,n=-1,p=!1,q=1;;){var r=this.h.fe(k);if(r==h)break;h=this.h.Wb(h);if(this.h.sa(r)!=h)if(k=this.sG(k),-1==k)break;else p=!0,h=this.h.sa(k);else k=r;if(k==c){n=c;break}r=this.Ao(k);if(!this.Te(r))break;this.h.Bb(k,e,1);this.h.Bb(h,e,1);m=k;l+=this.fy(f,k);q++}if(-1==n)for(k=c,h=this.h.sa(k),n=k;;){c=this.h.Wb(k);if(c==h)break;h=this.h.fe(h);if(this.h.sa(c)!=h)if(k=this.tG(k),-1==k){p=!0;break}else h=this.h.sa(k);
else k=c;r=this.Ao(k);if(!this.Te(r))break;this.h.Bb(k,e,1);this.h.Bb(h,e,1);n=k;l+=this.fy(f,k);q++}else if(-1!=this.Ym&&(m=this.Ym,n=this.h.fe(this.Ym),this.h.sa(n)!=this.h.Wb(this.h.sa(m))&&(n=this.sG(m),-1==n)))throw a.g.wa();0<=l||(k=n,n=this.h.sa(m),m=this.h.sa(k));e=f.Cf(b,-1);k=m;m=this.h.qj(m);p=this.h.jf(n)==m&&p;l=this.Au(m,f);l=this.tl(l,g);f.zi(e,l);-1!=d&&this.h.fm(m,d,1);m=0;for(q=p?a.I.truncate((q+1)/2):-1;;){c=this.h.jf(k);l=this.Au(c,f);l=this.tl(l,g);f.zi(e,l);m++;-1!=d&&this.h.fm(c,
d,1);p&&m==q&&(e=f.Cf(b,-1),f.zi(e,l));if(k==n)break;c=this.h.Wb(k);if(this.h.fe(this.h.sa(k))!=this.h.sa(c)){if(k=this.tG(k),-1==k)throw a.g.wa();}else k=c}};d.prototype.Yp=function(c){for(var b=this.h.a.jg(1607),a=this.h.Eg(),d=this.h.Be;-1!=d;d=this.h.Bf(d)){var g=this.h.te(d),f=g;do 1!=this.h.tb(f,a)&&this.Te(this.Ao(f))&&this.jF(f,b,a,-1,c),f=this.h.Wb(this.h.sa(f));while(f!=g)}this.h.kh(a);return b};d.prototype.SS=function(c){for(var b=this.h.a,a=b.jg(1607),d=b.jg(550),g=this.h.Eg(),f=this.h.uo(),
h=-1,l=this.h.Be;-1!=l;l=this.h.Bf(l)){var m=this.h.te(l),p=m;do{var q=this.h.tb(p,g);1!=q&&(q=this.Ao(p),this.Te(q)&&this.jF(p,a,g,f,c));p=this.h.Wb(this.h.sa(p))}while(p!=m)}for(l=this.h.Be;-1!=l;l=this.h.Bf(l))q=this.h.Sf(l,f),1!=q&&(q=this.h.md(l),this.Te(q)&&(-1==h&&(h=b.Cf(d,-1)),m=this.h.ol(l),-1!=m&&(m=this.h.Gi(m),m=this.tl(m,c),b.zi(h,m))));this.h.kh(g);this.h.vo(f);c=[];c[0]=d;c[1]=a;return c};d.prototype.Pn=function(){for(var c=this.h.a,b=c.jg(550),a=c.Cf(b,-1),d=this.h.Be;-1!=d;d=this.h.Bf(d))if(this.Te(this.h.md(d))){for(var g=
-1,f=this.h.ol(d);-1!=f;f=this.h.zq(f)){var h=this.h.Gi(f);-1==g&&(g=h);var l=this.h.ya(c.Vf(c.rd(h)));if(this.Te(l)){g=h;break}}c.zi(a,g)}return b};d.prototype.Im=function(c){this.Qg=[];for(var b=0;b<c;b++)this.Qg[b]=!1};d.qF=function(c,b,e,d){var g=c.Pa(),f=Array(1E3);a.I.Ps(f,null);var k=a.I.Lh(1E3,0),h=c.F(),l=!0,m=2==b.fb();if(1!=b.fb()&&2!=b.fb())throw a.g.wa();for(var p=0;p<h;){var q=a.I.truncate(c.fR(f,p)-p);m?a.gd.nG(b,f,q,e,k):a.gd.oG(b,f,q,e,k);for(var r=0,v=0;v<q;v++){var x=0==k[v];d||
(x=!x);x&&(l&&(l=!1,g.Pd(c,0,p)),r!=v&&g.Pd(c,p+r,p+v),r=v+1)}l||r==q||g.Pd(c,p+r,p+q);p+=q}return l?c:g};d.jD=function(c,b,e){return c instanceof a.pe?d.qF(c,b,e,!0):b instanceof a.Va?c.s()||b.s()?c.Pa():a.aj.HE(e,c,b)?a.aj.gL(c,b):c.Pa():d.mG(c,b,e,!0)};d.mt=function(c,b,e,g){var f=new a.i;c.o(f);var k=new a.i;b.o(k);var h=new a.i;h.K(f);h.Db(k);e=a.Ia.zd(e,h,!0);h=new a.i;h.K(k);k=a.Ia.As(e);h.P(k,k);if(!f.jc(h)){if(c.fb()<=b.fb())return d.Cc(d.ob(c.Pa()),c,"\x26");if(c.fb()>b.fb())return d.Cc(d.ob(b.Pa()),
c,"\x26")}k=new d;f=new a.fd;h=f.Eb(d.ob(c));b=f.Eb(d.ob(b));k.Np(f,e,g);g=k.mt(h,b);c=d.Cc(f.hf(g),c,"\x26");a.T.Kc(c.D())&&(c.hg(2,e),1736==c.D()&&c.hl());return c};d.mG=function(c,b,e,d){if(c.s())return c.Pa();if(b.s())return d?c.Pa():null;var g=[null],f=[0],k=2==b.fb();if(1!=b.fb()&&2!=b.fb())throw a.g.wa();g[0]=c.w();k?a.gd.nG(b,g,1,e,f):a.gd.oG(b,g,1,e,f);b=0==f[0];d||(b=!b);return b?c.Pa():c};d.PT=function(c,b,e){return c instanceof a.pe?d.qF(c,b,e,!1):b instanceof a.Va?c.s()?c.Pa():b.s()?
c:a.aj.HE(e,c,b)?c.Pa():c:d.mG(c,b,e,!1)};d.prototype.ME=function(c,b,e,d,g){if(c.s())return c;var f=new a.fd;c=f.Eb(c);return this.Qj(f,c,b,e,d,g)};d.prototype.EQ=function(c,b,e,d,g,f){if(g&&550!=c.Lb(b)){var k=new a.aA;k.KS(c,e);k.og?(a.aj.$(c,e,f,!0),g=!1):this.h.Mv(e)}else a.aj.$(c,e,f,!0),g=!1;d&&550!=c.Lb(b)?this.h.uF(c,b):this.h.tF(c,b);if(this.h.tx)return this.h.xg(),this.h=null,this.Qj(c,b,e,d,!1,f);this.h.Mv(NaN);f=this.h.ya(b);this.Im(f+1);this.Qg[f]=!0;if(1736==c.Lb(b)||d&&550!=c.Lb(b))return c.Pp(b,
0),b=this.Xp(b,-1,-1),c=c.hf(b),c.Pp(0),g?c.hg(1,0):(c.hg(2,e),c.hl()),c;if(1607==c.Lb(b))return b=this.Yp(-1),c=c.hf(b),g||c.hg(2,e),c;if(550==c.Lb(b))return b=this.Pn(),c=c.hf(b),g||c.hg(2,e),c;throw a.g.wa();};d.prototype.Qj=function(c,b,e,d,g,f){this.h=new a.gs;try{return this.EQ(c,b,e,d,g,f)}finally{this.h.xg()}};d.Qj=function(c,b,a,g,f){return(new d).ME(c,b,a,g,f)};d.prototype.DQ=function(c,b,e){this.Gq=c;this.h=new a.gs;c=b.Cm(e);var d=b.Lb(e);1!=c||550==d?this.h.tF(b,e):this.h.uF(b,e);if(!this.h.tx)if(this.h.Mv(NaN),
d=this.h.ya(e),this.Im(d+1),this.Qg[d]=!0,1736==b.Lb(e)||1==c&&550!=b.Lb(e))b.Pp(e,0),c=this.Xp(e,-1,-1),b.Vy(c,e),b.sy(c);else if(1607==b.Lb(e))c=this.Yp(-1),b.Vy(c,e),b.sy(c);else if(550==b.Lb(e))c=this.Pn(),b.Vy(c,e),b.sy(c);else throw a.g.ra("internal error");};d.Ry=function(c,b,a,g){var e=new d;e.Gq=!0;return e.ME(c,b,!1,a,g)};d.prototype.ll=function(c,b){var e=a.T.ve(this.h.a.Lb(c)),d=a.T.ve(this.h.a.Lb(b));if(e>d)return c;var g=this.h.ya(c),f=this.h.ya(b);this.Im((g|f)+1);this.Qg[this.h.ya(c)]=
!0;if(2==e&&2==d)return this.Xp(c,b,-1);if(1==e&&2==d||1==e&&1==d)return this.Yp(-1);if(0==e)return this.Pn();throw a.g.wa();};d.prototype.TB=function(c,b){var e=a.T.ve(this.h.a.Lb(c)),d=a.T.ve(this.h.a.Lb(b));if(e>d)return c;if(e<d)return b;var g=this.h.ya(c),f=this.h.ya(b);this.Im((g|f)+1);this.Qg[this.h.ya(c)]=!0;this.Qg[this.h.ya(b)]=!0;this.Qg[this.h.ya(c)|this.h.ya(b)]=!0;if(2==e&&2==d)return this.Xp(c,b,-1);if(1==e&&1==d)return this.Yp(-1);if(0==e&&0==d)return this.Pn();throw a.g.wa();};d.prototype.mt=
function(c,b){var e=a.T.ve(this.h.a.Lb(c)),d=a.T.ve(this.h.a.Lb(b)),g=this.h.ya(c),f=this.h.ya(b);this.Im((g|f)+1);this.Qg[this.h.ya(c)|this.h.ya(b)]=!0;g=-1;1<this.h.a.wp.Aa&&(g=c);if(2==e&&2==d)return this.Xp(c,b,g);if(1==e&&0<d||1==d&&0<e)return this.Yp(g);if(0==e||0==d)return this.Pn();throw a.g.wa();};d.prototype.Uw=function(c,b){var e=a.T.ve(this.h.a.Lb(c)),d=a.T.ve(this.h.a.Lb(b)),g=this.h.ya(c),f=this.h.ya(b);this.Im((g|f)+1);this.Qg[this.h.ya(c)|this.h.ya(b)]=!0;g=-1;1<this.h.a.wp.Aa&&(g=
c);if(2==e&&2==d)return this.RS(c,b,g);if(1==e&&0<d||1==d&&0<e)return this.SS(g);if(0==e||0==d)return e=[],e[0]=this.Pn(),e;throw a.g.wa();};d.prototype.On=function(c,b){var e=a.T.ve(this.h.a.Lb(c)),d=a.T.ve(this.h.a.Lb(b)),g=this.h.ya(c),f=this.h.ya(b);this.Im((g|f)+1);this.Qg[this.h.ya(c)]=!0;this.Qg[this.h.ya(b)]=!0;if(2==e&&2==d)return this.Xp(c,b,-1);if(1==e&&1==d)return this.Yp(-1);if(0==e&&0==d)return this.Pn();throw a.g.wa();};d.ob=function(c){var b=c.D();return 197==b?(b=new a.Ka(c.description),
c.s()||b.Wc(c,!1),b):33==b?(b=new a.pe(c.description),c.s()||b.add(c),b):322==b?(b=new a.Xa(c.description),c.s()||b.Bc(c,!0),b):c};d.Cc=function(c,b,e){var d=c.D();return 197==d?(b=new a.Ka(c.description),c.s()||b.Wc(c,!1),b):33!=d||"|"!=e&&"^"!=e?322==d?(b=new a.Xa(c.description),c.s()||b.Bc(c,!0),b):33==d&&"-"==e&&33==b.D()||550==d&&"\x26"==e&&33==b.D()?(b=new a.Va(c.description),c.s()||c.Sd(0,b),b):c:(b=new a.pe(c.description),c.s()||b.add(c),b)};d.ll=function(c,b,e,g){if(c.s()||b.s()||c.fb()>
b.fb())return d.Cc(d.ob(c),c,"-");var f=new a.i;c.o(f);var k=new a.i;b.o(k);if(!f.jc(k))return d.Cc(d.ob(c),c,"-");var h=new a.i;h.K(f);h.Db(k);e=a.Ia.zd(e,h,!0);k=new d;f=new a.fd;h=f.Eb(d.ob(c));b=f.Eb(d.ob(b));k.Np(f,e,g);g=k.ll(h,b);g=f.hf(g);c=d.Cc(g,c,"-");a.T.Kc(c.D())&&(c.hg(2,e),1736==c.D()&&c.hl());return c};d.TB=function(c,b,e,g){if(c.fb()>b.fb())return d.Cc(d.ob(c),c,"|");if(c.fb()<b.fb()||c.s())return d.Cc(d.ob(b),c,"|");if(b.s())return d.Cc(d.ob(c),c,"|");var f=new a.i;c.o(f);var k=
new a.i;b.o(k);var h=new a.i;h.K(f);h.Db(k);e=a.Ia.zd(e,h,!0);if(!f.jc(k.IN(e,e)))switch(c=d.ob(c),b=d.ob(b),c.D()){case 550:return c=a.T.Yj(c),c.Pd(b,0,-1),c;case 1607:return c=a.T.Yj(c),c.add(b,!1),c;case 1736:return c=a.T.Yj(c),c.add(b,!1),c;default:throw a.g.wa();}k=new d;f=new a.fd;h=f.Eb(d.ob(c));b=f.Eb(d.ob(b));k.Np(f,e,g);b=k.TB(h,b);c=d.Cc(f.hf(b),c,"|");a.T.Kc(c.D())&&(c.hg(2,e),1736==c.D()&&c.hl());return c};d.oM=function(c,b,e){if(2>c.length)throw a.g.N("not enough geometries to dissolve");
for(var g=0,f=0,h=c.length;f<h;f++)g=Math.max(c[f].fb(),g);var l=new a.i;l.Ja();for(var m=new a.fd,p=-1,q=0,r=-1,f=0,h=c.length;f<h;f++)if(c[f].fb()==g)if(c[f].s())-1==r&&(r=f);else{r=f;-1==p?p=m.Eb(d.ob(c[f])):m.YJ(p,d.ob(c[f]));var v=new a.i;c[f].dd(v);l.Db(v);q++}if(2>q)return d.ob(c[r]);c=2==g;b=a.Ia.zd(0==g?b:null,l,!0);return(new d).Qj(m,p,b,c,!0,e)};d.Uw=function(c,b,e,g){var f=[null,null,null],k=new a.i;c.o(k);var h=new a.i;b.o(h);var l=new a.i;l.K(k);l.Db(h);e=a.Ia.zd(e,l,!0);l=new a.i;l.K(h);
h=a.Ia.As(e);l.P(h,h);if(!k.jc(l)){if(c.fb()<=b.fb())return c=d.Cc(d.ob(c.Pa()),c,"\x26"),f[c.fb()]=c,f;if(c.fb()>b.fb())return c=d.Cc(d.ob(b.Pa()),c,"\x26"),f[c.fb()]=c,f}h=new d;k=new a.fd;l=k.Eb(d.ob(c));b=k.Eb(d.ob(b));h.Np(k,e,g);g=h.Uw(l,b);for(b=0;b<g.length;b++)h=d.Cc(k.hf(g[b]),c,"\x26"),a.T.Kc(h.D())&&(h.hg(2,e),1736==h.D()&&h.hl()),f[h.fb()]=h;return f};d.On=function(c,b,e,g){if(c.fb()>b.fb())return d.Cc(d.ob(c),c,"^");if(c.fb()<b.fb()||c.s())return d.Cc(d.ob(b),c,"^");if(b.s())return d.Cc(d.ob(c),
c,"^");var f=new a.i;c.o(f);var k=new a.i;b.o(k);var h=new a.i;h.K(f);h.Db(k);e=a.Ia.zd(e,h,!0);k=new d;f=new a.fd;h=f.Eb(d.ob(c));b=f.Eb(d.ob(b));k.Np(f,e,g);g=k.On(h,b);c=d.Cc(f.hf(g),c,"^");a.T.Kc(c.D())&&(c.hg(2,e),1736==c.D()&&c.hl());return c};d.uT=function(c,b,e){b=b.D();e=e.D();return 550==c.D()&&(33==b||33==e)&&1>=c.F()?(e=new a.Va(c.description),c.s()||c.Sd(0,e),e):c};d.prototype.ZM=function(c,b){var a=this.h.a;c=a.Cf(c,-1);for(var d=b.size,g=0;g<d;g++){var f=b.get(g);a.zi(c,f)}a.Gn(c,!0)};
d.prototype.WR=function(c,b){for(var a=this.h.a,d=a.$c;-1!=d;d=a.we(d))if(d==b)for(var g=a.Vb(d);-1!=g;g=a.bc(g)){var f=a.Cb(g);if(-1!=f)for(var h=a.X(f);-1!=h;){var f=this.h.se(f),l=this.h.se(h),f=this.h.FN(f,l);-1!=f&&(l=this.h.sa(f),this.h.Bb(f,c,1),this.h.Bb(l,c,2));f=h;h=a.X(f)}}};d.prototype.XQ=function(c,b,e,d){e=this.h.ya(e);d=this.h.ya(d);var g=new a.ga(0);g.xb(256);for(var f=this.h.a,k=this.h.Eg(),h=this.h.Be;-1!=h;h=this.h.Bf(h)){var l=this.h.te(h);if(-1!=l){var m=l;do{if(1!=this.h.tb(m,
k)){var p=m,q=m,r=!1,v=0;do{this.h.Bb(p,k,1);if(!r){var x=this.h.Gg(p);0!=(x&d)&&0!=(this.h.Qe(p)&e)&&(q=p,r=!0)}r&&(g.add(this.h.Gi(this.h.ol(this.h.qj(p)))),-1!=c&&(x=this.h.Gg(p),0!=(x&d)&&(x=this.h.tb(p,c),v|=x)));p=this.h.Wb(p)}while(p!=q);r&&0<this.h.yo(this.h.Pe(q))&&(p=f.jg(1736),this.ZM(p,g),-1!=b&&f.EF(p,b,v));g.clear(!1)}m=this.h.Wb(this.h.sa(m))}while(m!=l)}}this.h.kh(k)};d.prototype.WL=function(c,b,a,d){this.h.uR();var e=-1;-1!=c&&(e=this.h.Eg(),this.WR(e,a));this.XQ(e,c,b,a);var g=this.h.a;
c=0;for(e=g.$c;-1!=e;e=g.we(e))e!=b&&e!=a&&(d.add(e),c++);d.xd(0,c,function(b,c){b=g.Gw(g.Vb(b));c=g.Gw(g.Vb(c));return b<c?-1:b==c?0:1})};d.prototype.xg=function(){null!=this.h&&(this.h.xg(),this.h=null)};return d}();a.Of=d})(w||(w={}));(function(a){var d=function(){function d(c){void 0!==c?this.Ly(c):this.IF()}d.prototype.Lu=function(){this.Ob=this.Nb=this.sb=this.rb=this.eb=this.mb=0};d.prototype.lc=function(c){return this==c?!0:c instanceof d?this.mb==c.mb&&this.rb==c.rb&&this.Nb==c.Nb&&this.sb==
c.sb&&this.eb==c.eb&&this.Ob==c.Ob:!1};d.prototype.hc=function(){a.I.Rh();a.I.Rh();a.I.Rh();a.I.Rh();a.I.Rh();return a.I.Rh()};d.prototype.Zi=function(c,b){var a=this.sb*c.x+this.eb*c.y+this.Ob;b.x=this.mb*c.x+this.rb*c.y+this.Nb;b.y=a};d.prototype.multiply=function(c){d.multiply(this,c,this)};d.multiply=function(c,b,a){var e,d,g,f,h;e=c.mb*b.mb+c.sb*b.rb;d=c.rb*b.mb+c.eb*b.rb;g=c.Nb*b.mb+c.Ob*b.rb+b.Nb;f=c.mb*b.sb+c.sb*b.eb;h=c.rb*b.sb+c.eb*b.eb;c=c.Nb*b.sb+c.Ob*b.eb+b.Ob;a.mb=e;a.rb=d;a.Nb=g;a.sb=
f;a.eb=h;a.Ob=c};d.prototype.vm=function(){var c=new d;c.mb=this.mb;c.rb=this.rb;c.Nb=this.Nb;c.sb=this.sb;c.eb=this.eb;c.Ob=this.Ob;return c};d.prototype.$y=function(c){if(!c.s()){for(var b=[],e=0;4>e;e++)b[e]=new a.b;c.hy(b);this.US(b,b);c.Ey(b,4)}};d.prototype.US=function(c,b){for(var e=0;e<c.length;e++){var d=new a.b,g=c[e];d.x=this.mb*g.x+this.rb*g.y+this.Nb;d.y=this.sb*g.x+this.eb*g.y+this.Ob;b[e]=d}};d.prototype.wO=function(c,b){c.s()||b.s()||0==c.aa()||0==c.ba()?this.Lu():(this.rb=this.sb=
0,this.mb=b.aa()/c.aa(),this.eb=b.ba()/c.ba(),this.Nb=b.v-c.v*this.mb,this.Ob=b.C-c.C*this.eb)};d.prototype.TS=function(c){var b=new a.b,e=new a.b;b.ma(this.mb,this.sb);e.ma(this.rb,this.eb);b.sub(b);var d=.5*b.Up();b.ma(this.mb,this.sb);e.ma(this.rb,this.eb);b.add(e);b=.5*b.Up();return c*(d>b?Math.sqrt(d):Math.sqrt(b))};d.prototype.IF=function(){this.mb=1;this.sb=this.Nb=this.rb=0;this.eb=1;this.Ob=0};d.prototype.XO=function(){return 1==this.mb&&1==this.eb&&0==this.rb&&0==this.Nb&&0==this.sb&&0==
this.Ob};d.prototype.mg=function(c){return Math.abs(this.mb*this.eb-this.sb*this.rb)<=2*c*(Math.abs(this.mb*this.eb)+Math.abs(this.sb*this.rb))};d.prototype.Nn=function(c,b){this.mb=1;this.rb=0;this.Nb=c;this.sb=0;this.eb=1;this.Ob=b};d.prototype.Ly=function(c,b){void 0!==b?(this.mb=c,this.sb=this.Nb=this.rb=0,this.eb=b,this.Ob=0):this.Ly(c,c)};d.prototype.Oy=function(){this.mb=0;this.rb=1;this.Nb=0;this.sb=1;this.Ob=this.eb=0};d.prototype.jS=function(c){this.kS(Math.cos(c),Math.sin(c))};d.prototype.kS=
function(c,b){this.mb=c;this.rb=-b;this.Nb=0;this.sb=b;this.eb=c;this.Ob=0};d.prototype.shift=function(c,b){this.Nb+=c;this.Ob+=b};d.prototype.scale=function(c,b){this.mb*=c;this.rb*=c;this.Nb*=c;this.sb*=b;this.eb*=b;this.Ob*=b};d.prototype.rotate=function(c){var b=new d;b.jS(c);this.multiply(b)};d.prototype.inverse=function(c){if(void 0!==c){var b=this.mb*this.eb-this.rb*this.sb;0==b?c.Lu():(b=1/b,c.Nb=(this.rb*this.Ob-this.Nb*this.eb)*b,c.Ob=(this.Nb*this.sb-this.mb*this.Ob)*b,c.mb=this.eb*b,c.rb=
-this.rb*b,c.sb=-this.sb*b,c.eb=this.mb*b)}else this.inverse(this)};return d}();a.Bg=d})(w||(w={}));(function(a){var d=function(){function d(){}d.prototype.Lu=function(){this.fh=this.Ob=this.Nb=this.Le=this.Ie=this.He=this.Ke=this.eb=this.rb=this.ef=this.sb=this.mb=0};d.prototype.Ly=function(c,b,a){this.mb=c;this.rb=this.ef=this.sb=0;this.eb=b;this.Ie=this.He=this.Ke=0;this.Le=a;this.fh=this.Ob=this.Nb=0};d.prototype.$y=function(c){if(c.s())return c;for(var b=new a.ee[8],e=0;8>e;e++)b[e]=new a.ee;
c.hy(b);this.transform(b,8,b);c.Ey(b);return c};d.prototype.transform=function(c,b,e){for(var d=0;d<b;d++){var g=new a.ee,f=c[d];g.x=this.mb*f.x+this.rb*f.y+this.He*f.z+this.Nb;g.y=this.sb*f.x+this.eb*f.y+this.Ie*f.z+this.Ob;g.z=this.ef*f.x+this.Ke*f.y+this.Le*f.z+this.fh;e[d]=g}};d.prototype.Qn=function(c){var b=new a.ee;b.x=this.mb*c.x+this.rb*c.y+this.He*c.z+this.Nb;b.y=this.sb*c.x+this.eb*c.y+this.Ie*c.z+this.Ob;b.z=this.ef*c.x+this.Ke*c.y+this.Le*c.z+this.fh;return b};d.prototype.Ap=function(c){d.multiply(this,
c,this)};d.multiply=function(c,b,a){var e,d,g,f,h,l,m,p,q,r,v;e=c.mb*b.mb+c.sb*b.rb+c.ef*b.He;d=c.mb*b.sb+c.sb*b.eb+c.ef*b.Ie;g=c.mb*b.ef+c.sb*b.Ke+c.ef*b.Le;f=c.rb*b.mb+c.eb*b.rb+c.Ke*b.He;h=c.rb*b.sb+c.eb*b.eb+c.Ke*b.Ie;l=c.rb*b.ef+c.eb*b.Ke+c.Ke*b.Le;m=c.He*b.mb+c.Ie*b.rb+c.Le*b.He;p=c.He*b.sb+c.Ie*b.eb+c.Le*b.Ie;q=c.He*b.ef+c.Ie*b.Ke+c.Le*b.Le;r=c.Nb*b.mb+c.Ob*b.rb+c.fh*b.He+b.Nb;v=c.Nb*b.sb+c.Ob*b.eb+c.fh*b.Ie+b.Ob;c=c.Nb*b.ef+c.Ob*b.Ke+c.fh*b.Le+b.fh;a.mb=e;a.sb=d;a.ef=g;a.rb=f;a.eb=h;a.Ke=
l;a.He=m;a.Ie=p;a.Le=q;a.Nb=r;a.Ob=v;a.fh=c};d.inverse=function(c,b){var e=c.mb*(c.eb*c.Le-c.Ke*c.Ie)-c.sb*(c.rb*c.Le-c.Ke*c.He)+c.ef*(c.rb*c.Ie-c.eb*c.He);if(0!=e){var d,g,f,h,l,m,p,q,r,v;q=1/e;e=(c.eb*c.Le-c.Ke*c.Ie)*q;f=-(c.rb*c.Le-c.Ke*c.He)*q;m=(c.rb*c.Ie-c.eb*c.He)*q;d=-(c.sb*c.Le-c.Ie*c.ef)*q;h=(c.mb*c.Le-c.ef*c.He)*q;p=-(c.mb*c.Ie-c.sb*c.He)*q;g=(c.sb*c.Ke-c.ef*c.eb)*q;l=-(c.mb*c.Ke-c.ef*c.rb)*q;q*=c.mb*c.eb-c.sb*c.rb;r=-(c.Nb*e+c.Ob*f+c.fh*m);v=-(c.Nb*d+c.Ob*h+c.fh*p);c=-(c.Nb*g+c.Ob*l+c.fh*
q);b.mb=e;b.sb=d;b.ef=g;b.rb=f;b.eb=h;b.Ke=l;b.He=m;b.Ie=p;b.Le=q;b.Nb=r;b.Ob=v;b.fh=c}else throw a.g.ra("math singularity");};d.prototype.vm=function(){var c=new d;c.mb=this.mb;c.sb=this.sb;c.ef=this.ef;c.rb=this.rb;c.eb=this.eb;c.Ke=this.Ke;c.He=this.He;c.Ie=this.Ie;c.Le=this.Le;c.Nb=this.Nb;c.Ob=this.Ob;c.fh=this.fh;return c};return d}();a.ZT=d})(w||(w={}));(function(a){var d=function(c){function b(b){if(void 0!==b)c.call(this,b.hc(),b);else{c.call(this);this.Jf=[];this.Jf[0]=0;this.Aa=1;this.Wg=
[];for(b=0;10>b;b++)this.Wg[b]=-1;this.Wg[this.Jf[0]]=0}this.To=!0}K(b,c);b.prototype.Ne=function(b){this.hasAttribute(b)||(this.Wg[b]=0,this.xA())};b.prototype.removeAttribute=function(b){if(0==b)throw a.g.N("Position attribue cannot be removed");this.hasAttribute(b)&&(this.Wg[b]=-1,this.xA())};b.prototype.reset=function(){this.Jf[0]=0;this.Aa=1;for(var b=0;b<this.Wg.length;b++)this.Wg[b]=-1;this.Wg[this.Jf[0]]=0;this.To=!0};b.prototype.qw=function(){return g.ww().add(this)};b.Tf=function(){return g.ww().iO()};
b.Zn=function(){return g.ww().jO()};b.prototype.pJ=function(){var b=this.hc();return new a.pa(b,this)};b.prototype.xA=function(){for(var b=this.Aa=0,c=0;10>b;b++)0<=this.Wg[b]&&(this.Jf[c]=b,this.Wg[b]=c,c++,this.Aa++);this.To=!0};b.prototype.hc=function(){this.To&&(this.tk=this.jj(),this.To=!1);return this.tk};b.prototype.lc=function(c){if(null==c)return!1;if(c==this)return!0;if(!(c instanceof b)||c.Aa!=this.Aa)return!1;for(var a=0;a<this.Aa;a++)if(this.Jf[a]!=c.Jf[a])return!1;return this.To!=c.To?
!1:!0};b.prototype.qD=function(b){if(b.Aa!=this.Aa)return!1;for(var c=0;c<this.Aa;c++)if(this.Jf[c]!=b.Jf[c])return!1;return!0};b.iu=function(b,c){for(var a=[],e=0;e<b.Aa;e++)a[e]=-1;for(var e=0,d=b.Aa;e<d;e++)a[e]=c.zf(b.Hd(e));return a};b.PN=function(c,a){c=new b(c);c.Ne(a);return c.qw()};b.QN=function(c,a){for(var e=null,d=0;10>d;d++)!c.hasAttribute(d)&&a.hasAttribute(d)&&(null==e&&(e=new b(c)),e.Ne(d));return null!=e?e.qw():c};b.bo=function(c,a){c=new b(c);c.removeAttribute(a);return c.qw()};
return b}(a.pa);a.Od=d;var g=function(){function c(){this.map=[];var b=new d;this.add(b);b=new d;b.Ne(1);this.add(b)}c.ww=function(){return c.lI};c.prototype.iO=function(){return c.Yn};c.prototype.jO=function(){return c.Zn};c.prototype.add=function(b){var a=b.hc();if(null!=c.Yn&&c.Yn.hc()==a&&b.qD(c.Yn))return c.Yn;if(null!=c.Zn&&c.Zn.hc()==a&&b.qD(c.Zn))return c.Zn;var d=null;void 0!==this.map[a]&&(d=this.map[a]);null==d&&(d=b.pJ(),1==d.Aa?c.Yn=d:2==d.Aa&&1==d.Hd(1)?c.Zn=d:this.map[a]=d);return d};
c.lI=new c;return c}()})(w||(w={}));var O=0==f.version.indexOf("4."),T;(function(a){a[a.Linear=0]="Linear";a[a.Angular=1]="Angular";a[a.Area=2]="Area";a[a.LinearOrAngular=3]="LinearOrAngular"})(T||(T={}));var R={feet:9002,kilometers:9036,meters:9001,miles:9035,"nautical-miles":9030,yards:9096},W={acres:109402,ares:109463,hectares:109401,"square-feet":109405,"square-kilometers":109414,"square-meters":109404,"square-miles":109413,"square-yards":109442},U={degrees:9102,radians:9101};void 0===a.prototype.getCacheValue&&
q.extend(a,{cache:null,getCacheValue:function(a){if(null===this.cache||void 0===this.cache)this.cache={};return this.cache[a]},setCacheValue:function(a,d){if(null===this.cache||void 0===this.cache)this.cache={};this.cache[a]=d}});var P=w.Nf.create(4326),Y=w.Nf.create(102100);return function(){function d(){}d.extendedSpatialReferenceInfo=function(a){if(null===a)return null;a=D(a);var d=a.Se();return{tolerance:a.xq(),unitType:null==d?-1:d.Nc,unitID:null==d?-1:d.Qc(),unitBaseFactor:null==d?0:d.Dj,unitSquareDerivative:null==
d?0:w.Tb.PC(d).Qc()}};d.clip=function(a,d){if(null===a)return null;d=w.Pb.clip(F(a),F(d),H(a));return C(d,a.spatialReference)};d.cut=function(a,d){d=F(d);d=w.Pb.xm(F(a),d,H(a));for(var c=[],b=0;b<d.length;b++)c.push(C(d[b],a.spatialReference));return c};d.contains=function(a,d){if(null===a||null===d)throw Error("Illegal Argument Exception");return w.Pb.contains(F(a),F(d),H(a))};d.crosses=function(a,d){if(null===a||null===d)throw Error("Illegal Argument Exception");return w.Pb.VL(F(a),F(d),H(a))};
d.distance=function(a,d,c){if(null===a||null===d)throw Error("Illegal Argument Exception");return w.Pb.Fb(F(a),F(d),H(a),w.Tb.Qd(x(c,3)))};d.equals=function(a,d){return null===a&&null!==d||null===d&&null!==a?!1:w.Pb.lc(F(a),F(d),H(a))};d.intersects=function(a,d){if(null===a||null===d)throw Error("Illegal Argument Exception");return w.Pb.RO(F(a),F(d),H(a))};d.touches=function(a,d){if(null===a||null===d)throw Error("Illegal Argument Exception");return w.Pb.touches(F(a),F(d),H(a))};d.within=function(a,
d){if(null===a||null===d)throw Error("Illegal Argument Exception");return w.Pb.jT(F(a),F(d),H(a))};d.disjoint=function(a,d){if(null===a||null===d)throw Error("Illegal Argument Exception");return w.Pb.nM(F(a),F(d),H(a))};d.overlaps=function(a,d){if(null===a||null===d)throw Error("Illegal Argument Exception");return w.Pb.tQ(F(a),F(d),H(a))};d.relate=function(a,d,c){if(null===a||null===d)throw Error("Illegal Argument Exception");return w.Pb.py(F(a),F(d),H(a),c)};d.isSimple=function(a){if(null===a)throw Error("Illegal Argument Exception");
return w.Pb.cP(F(a),H(a))};d.simplify=function(a){if(null===a)throw Error("Illegal Argument Exception");var d=w.Pb.Qy(F(a),H(a));return C(d,a.spatialReference)};d.convexHull=function(g,f){void 0===f&&(f=!1);if(null===g)throw Error("Illegal Argument Exception");return g instanceof a?(f=w.Pb.JL(F(g),H(g)),C(f,g.spatialReference)):d.NI(g,f)};d.NI=function(a,d){for(var c=[],b=0;b<a.length;b++)c.push(F(a[b]));c=w.Pb.KL(c,d);for(b=0;b<c.length;b++)c[b]=C(c[b],a[0].spatialReference);return c};d.difference=
function(g,f){if(null===g||null===f)throw Error("Illegal Argument Exception");return g instanceof a?(f=w.Pb.ll(F(g),F(f),H(g)),C(f,g.spatialReference)):d.XL(g,f)};d.XL=function(a,d){for(var c=[],b=0;b<a.length;b++)c.push(F(a[b]));c=w.Pb.kM(c,F(d),H(d));for(b=0;b<c.length;b++)c[b]=C(c[b],d.spatialReference);return c};d.symmetricDifference=function(g,f){if(null===g||null===f)throw Error("Illegal Argument Exception");return g instanceof a?(f=w.Pb.On(F(g),F(f),H(g)),C(f,g.spatialReference)):d.tO(g,f)};
d.tO=function(a,d){for(var c=[],b=0;b<a.length;b++)c.push(F(a[b]));c=w.Pb.MS(c,F(d),H(d));for(b=0;b<c.length;b++)c[b]=C(c[b],d.spatialReference);return c};d.intersect=function(g,f){if(null===g||null===f)throw Error("Illegal Argument Exception");return g instanceof a?(f=w.Pb.Ga(F(g),F(f),H(g)),C(f,g.spatialReference)):d.EM(g,f)};d.EM=function(a,d){for(var c=[],b=0;b<a.length;b++)c.push(F(a[b]));c=w.Pb.QO(c,F(d),H(d));for(b=0;b<c.length;b++)c[b]=C(c[b],d.spatialReference);return c};d.union=function(d,
g){void 0===g&&(g=null);if(null===d)return null;d instanceof a&&(d=[d],null!==g&&d.push(g));if(0===d.length)return null;g=[];for(var c=0;c<d.length;c++)g.push(F(d[c]));return C(w.Pb.aT(g,H(d[0])),d[0].spatialReference)};d.offset=function(g,f,c,b,e,k){var h=0;if(null!=b&&void 0!=b)switch(b){case "round":h=0;break;case "bevel":h=1;break;case "miter":h=2;break;case "square":h=3}return g instanceof a?(f=w.Pb.offset(F(g),H(g),f,h,e,k,w.Tb.Qd(x(c,3))),C(f,g.spatialReference)):d.qO(g,f,c,h,e,k)};d.qO=function(a,
d,c,b,e,g){if(null===a)return null;if(0===a.length)return[];for(var f=[],k=0;k<a.length;k++)f.push(F(a[k]));d=w.Pb.sQ(f,H(a[0]),d,b,e,g,w.Tb.Qd(x(c,3)));for(k=0;k<d.length;k++)d[k]=C(d[k],a[0].spatialReference);return d};d.buffer=function(g,f,c,b){void 0===b&&(b=!1);if(g instanceof a)return f=w.Pb.buffer(F(g),H(g),f,w.Tb.Qd(x(c,3)),!1,0,NaN),C(f,g.spatialReference);if("[object Array]"!==Object.prototype.toString.call(f)){for(var e=[],k=0;k<g.length;k++)e.push(f);f=e}if(f.length!=g.length){if(0==f.length)throw Error("Illegal Argument Exception");
for(var e=[],h=0,k=0;k<g.length;k++)void 0===f[k]?e.push(h):(e.push(f[k]),h=f[k]);f=e}return d.vG(g,f,c,!1,b,"geodesic",NaN)};d.geodesicBuffer=function(g,f,c,b,e,k){if(g instanceof a)return void 0===e&&(e=NaN),f=w.Pb.buffer(F(g),H(g),f,w.Tb.Qd(x(c,0)),!0,y(b),e),C(f,g.spatialReference);if("[object Array]"!==Object.prototype.toString.call(f)){for(var h=[],l=0;l<g.length;l++)h.push(f);f=h}if(f.length!=g.length){if(0==f.length)throw Error("Illegal Argument Exception");for(var h=[],m=0,l=0;l<g.length;l++)void 0===
f[l]?h.push(m):(h.push(f[l]),m=f[l]);f=h}return d.vG(g,f,c,!0,b,e,k)};d.vG=function(a,d,c,b,e,g,f){if(null===a)return null;if(0===a.length)return[];void 0===f&&(f=NaN);for(var k=[],h=0;h<a.length;h++)k.push(F(a[h]));d=w.Pb.rK(k,H(a[0]),d,w.Tb.Qd(x(c,0)),b,e,y(g),f);for(h=0;h<d.length;h++)d[h]=C(d[h],a[0].spatialReference);return d};d.nearestCoordinate=function(a,d,c){void 0===c&&(c=!0);d=w.Pb.zw(F(a),F(d),c);return{coordinate:C(d.pw(),a.spatialReference),distance:d.sw(),isRightSide:d.Xw(),vertexIndex:d.gb(),
isEmpty:d.s()}};d.nearestVertex=function(a,d){d=w.Pb.Aw(F(a),F(d));return{coordinate:C(d.pw(),a.spatialReference),distance:d.sw(),isRightSide:d.Xw(),vertexIndex:d.gb(),isEmpty:d.s()}};d.nearestVertices=function(a,d,c,b){d=F(d);c=w.Pb.Bw(F(a),d,c,b);b=[];for(d=0;d<c.length;d++)!1===c[d].s()&&b.push({coordinate:C(c[d].pw(),a.spatialReference),distance:c[d].sw(),isRightSide:c[d].Xw(),vertexIndex:c[d].gb(),isEmpty:c[d].s()});return b};d.generalize=function(a,d,c,b){d=w.Pb.fN(F(a),H(a),d,c,w.Tb.Qd(x(b,
3)));return C(d,a.spatialReference)};d.densify=function(a,d,c){d=w.Pb.oq(F(a),H(a),d,w.Tb.Qd(x(c,3)));return C(d,a.spatialReference)};d.geodesicDensify=function(a,d,c,b){void 0===b&&(b=0);d=w.Pb.fw(F(a),H(a),d,w.Tb.Qd(x(c,3)),b);return C(d,a.spatialReference)};d.rotate=function(a,d,c){if(void 0===c||null===c)switch(a.type){case "point":c=a;break;case "extent":c=O?a.get("center"):a.getCenter();break;default:c=O?a.get("extent").get("center"):a.getExtent().getCenter()}d=O?w.Wn.rotate(a.toJSON(),d,c.toJSON()):
w.Wn.rotate(a.toJson(),d,c.toJson());O?(d=v(d),d.set("spatialReference",a.spatialReference)):(d=r(d),d.setSpatialReference(a.spatialReference));return d};d.flipHorizontal=function(a,d){if(void 0===d||null===d)switch(a.type){case "point":d=a;break;case "extent":d=O?a.get("center"):a.getCenter();break;default:d=O?a.get("extent").get("center"):a.getExtent().getCenter()}d=O?w.Wn.eC(a.toJSON(),d.toJSON()):w.Wn.eC(a.toJson(),d.toJson());O?(d=v(d),d.set("spatialReference",a.spatialReference)):(d=r(d),d.setSpatialReference(a.spatialReference));
return d};d.flipVertical=function(a,d){if(void 0===d||null===d)switch(a.type){case "point":d=a;break;case "extent":d=O?a.get("center"):a.getCenter();break;default:d=O?a.get("extent").get("center"):a.getExtent().getCenter()}d=O?w.Wn.fC(a.toJSON(),d.toJSON()):w.Wn.fC(a.toJson(),d.toJson());O?(d=v(d),d.set("spatialReference",a.spatialReference)):(d=r(d),d.setSpatialReference(a.spatialReference));return d};d.planarArea=function(a,d){if(null===a)throw Error("Illegal Argument Exception");return w.Pb.BQ(F(a),
H(a),w.Tb.Qd(x(d,2)))};d.planarLength=function(a,d){if(null===a)throw Error("Illegal Argument Exception");return w.Pb.CQ(F(a),H(a),w.Tb.Qd(x(d,3)))};d.geodesicArea=function(a,d,c){if(null===a)throw Error("Illegal Argument Exception");return w.Pb.jN(F(a),H(a),w.Tb.Qd(x(d,2)),y(c))};d.geodesicLength=function(a,d,c){if(null===a)throw Error("Illegal Argument Exception");return w.Pb.nN(F(a),H(a),w.Tb.Qd(x(d,0)),y(c))};return d}()})},"esri/widgets/support/AnchorElementViewModel":function(){define("require exports ../../core/tsSupport/declareExtendsHelper ../../core/tsSupport/decorateHelper ../../core/accessorSupport/decorators ../../core/watchUtils ../../core/Accessor ../../core/Evented ../../core/HandleRegistry ../../core/watchUtils".split(" "),
function(A,t,f,a,d,h,p,m,l,q){return function(m){function p(){var a=m.call(this)||this;a._anchorHandles=new l;a.location=null;a.screenLocation=null;a.screenLocationEnabled=!1;a.view=null;a._anchorHandles.add([q.watch(a,"screenLocationEnabled,location,view.size",function(){return a._updateScreenPointAndHandle()}),q.watch(a,"view, view.ready",function(){return a._wireUpView()})]);return a}f(p,m);p.prototype.destroy=function(){this.view=null;this._anchorHandles&&this._anchorHandles.destroy();this._viewpointHandle=
this._anchorHandles=null};p.prototype._wireUpView=function(){var a=this;this._anchorHandles.remove("view");this._viewpointHandle=null;if(this.get("view.ready")){this._setScreenLocation();var d=this.view,d=h.pausable(d,"3d"===d.type?"camera":"viewpoint",function(){return a._viewpointChange()});this._anchorHandles.add(d,"view");this._viewpointHandle=d;this._toggleWatchingViewpoint()}};p.prototype._viewpointChange=function(){this._setScreenLocation();this.emit("view-change")};p.prototype._updateScreenPointAndHandle=
function(){this._setScreenLocation();this._toggleWatchingViewpoint()};p.prototype._toggleWatchingViewpoint=function(){var a=this._viewpointHandle,d=this.screenLocationEnabled;a&&(this.location&&d?a.resume():a.pause())};p.prototype._setScreenLocation=function(){var a=this.location,d=this.view,f=this.screenLocationEnabled,h=this.get("view.ready"),a=f&&a&&h?d.toScreen(a.x,a.y,a.z):null;this._set("screenLocation",a)};a([d.property()],p.prototype,"location",void 0);a([d.property({readOnly:!0})],p.prototype,
"screenLocation",void 0);a([d.property()],p.prototype,"screenLocationEnabled",void 0);a([d.property()],p.prototype,"view",void 0);return p=a([d.subclass("esri.widgets.support.AnchorElementViewModel")],p)}(d.declared(p,m))})},"dojo/fx/easing":function(){define(["../_base/lang"],function(A){var t={linear:function(f){return f},quadIn:function(f){return Math.pow(f,2)},quadOut:function(f){return f*(f-2)*-1},quadInOut:function(f){f*=2;return 1>f?Math.pow(f,2)/2:-1*(--f*(f-2)-1)/2},cubicIn:function(f){return Math.pow(f,
3)},cubicOut:function(f){return Math.pow(f-1,3)+1},cubicInOut:function(f){f*=2;return 1>f?Math.pow(f,3)/2:(Math.pow(f-2,3)+2)/2},quartIn:function(f){return Math.pow(f,4)},quartOut:function(f){return-1*(Math.pow(f-1,4)-1)},quartInOut:function(f){f*=2;return 1>f?Math.pow(f,4)/2:-.5*(Math.pow(f-2,4)-2)},quintIn:function(f){return Math.pow(f,5)},quintOut:function(f){return Math.pow(f-1,5)+1},quintInOut:function(f){f*=2;return 1>f?Math.pow(f,5)/2:(Math.pow(f-2,5)+2)/2},sineIn:function(f){return-1*Math.cos(Math.PI/
2*f)+1},sineOut:function(f){return Math.sin(Math.PI/2*f)},sineInOut:function(f){return-1*(Math.cos(Math.PI*f)-1)/2},expoIn:function(f){return 0==f?0:Math.pow(2,10*(f-1))},expoOut:function(f){return 1==f?1:-1*Math.pow(2,-10*f)+1},expoInOut:function(f){if(0==f)return 0;if(1==f)return 1;f*=2;if(1>f)return Math.pow(2,10*(f-1))/2;--f;return(-1*Math.pow(2,-10*f)+2)/2},circIn:function(f){return-1*(Math.sqrt(1-Math.pow(f,2))-1)},circOut:function(f){return Math.sqrt(1-Math.pow(f-1,2))},circInOut:function(f){f*=
2;return 1>f?-.5*(Math.sqrt(1-Math.pow(f,2))-1):.5*(Math.sqrt(1-Math.pow(f-2,2))+1)},backIn:function(f){return Math.pow(f,2)*(2.70158*f-1.70158)},backOut:function(f){--f;return Math.pow(f,2)*(2.70158*f+1.70158)+1},backInOut:function(f){f*=2;if(1>f)return Math.pow(f,2)*(3.5949095*f-2.5949095)/2;f-=2;return(Math.pow(f,2)*(3.5949095*f+2.5949095)+2)/2},elasticIn:function(f){if(0==f||1==f)return f;--f;return-1*Math.pow(2,10*f)*Math.sin(2*(f-.075)*Math.PI/.3)},elasticOut:function(f){return 0==f||1==f?f:
Math.pow(2,-10*f)*Math.sin(2*(f-.075)*Math.PI/.3)+1},elasticInOut:function(f){if(0==f)return 0;f*=2;if(2==f)return 1;var a=.3*1.5,d=a/4;if(1>f)return--f,-.5*Math.pow(2,10*f)*Math.sin(2*(f-d)*Math.PI/a);--f;return.5*Math.pow(2,-10*f)*Math.sin(2*(f-d)*Math.PI/a)+1},bounceIn:function(f){return 1-t.bounceOut(1-f)},bounceOut:function(f){return f<1/2.75?7.5625*Math.pow(f,2):f<2/2.75?7.5625*Math.pow(f-1.5/2.75,2)+.75:f<2.5/2.75?7.5625*Math.pow(f-2.25/2.75,2)+.9375:7.5625*Math.pow(f-2.625/2.75,2)+.984375},
bounceInOut:function(f){return.5>f?t.bounceIn(2*f)/2:t.bounceOut(2*f-1)/2+.5}};A.setObject("dojo.fx.easing",t);return t})},"esri/widgets/Spinner":function(){define("require exports ../core/tsSupport/declareExtendsHelper ../core/tsSupport/decorateHelper ./support/widget ../core/accessorSupport/decorators ./Widget ../core/promiseUtils ../core/watchUtils ./support/AnchorElementViewModel".split(" "),function(A,t,f,a,d,h,p,m,l,q){return function(p){function r(a){a=p.call(this)||this;a._animationDelay=
500;a._animationPromise=null;a.location=null;a.view=null;a.visible=!1;a.viewModel=new q;return a}f(r,p);r.prototype.postInitialize=function(){var a=this;this.own([l.watch(this,"visible",function(d){return a._visibleChange(d)})])};r.prototype.destroy=function(){this._cancelAnimationPromise()};r.prototype.show=function(a){var d=this,f=a.location;a=a.promise;f&&(this.viewModel.location=f);this.visible=!0;a&&a.always(function(){return d.hide()})};r.prototype.hide=function(){this.visible=!1};r.prototype.render=
function(){var a=this.visible,f=!!this.viewModel.screenLocation,a=(h={},h["esri-spinner--start"]=a&&f,h["esri-spinner--finish"]=!a&&f,h),h=this._getPositionStyles();return d.tsx("div",{class:"esri-spinner",classes:a,styles:h});var h};r.prototype._cancelAnimationPromise=function(){this._animationPromise&&(this._animationPromise.cancel(),this._animationPromise=null)};r.prototype._visibleChange=function(a){var d=this;a?this.viewModel.screenLocationEnabled=!0:(this._cancelAnimationPromise(),this._animationPromise=
m.after(this._animationDelay).then(function(){d.viewModel.screenLocationEnabled=!1;d._animationPromise=null}))};r.prototype._getPositionStyles=function(){var a=this.viewModel.screenLocation;return a?{left:a.x+"px",top:a.y+"px"}:{}};a([h.aliasOf("viewModel.location")],r.prototype,"location",void 0);a([h.aliasOf("viewModel.view")],r.prototype,"view",void 0);a([h.property(),d.renderable()],r.prototype,"visible",void 0);a([h.property({type:q}),d.renderable(["viewModel.screenLocation","viewModel.screenLocationEnabled"])],
r.prototype,"viewModel",void 0);return r=a([h.subclass("esri.widgets.Spinner")],r)}(h.declared(p))})},"esri/views/ui/DefaultUI":function(){define("require exports ../../core/tsSupport/declareExtendsHelper ../../core/tsSupport/decorateHelper ../../core/accessorSupport/decorators ../../core/watchUtils ./UI ./Component ../../widgets/Attribution ../../widgets/Compass ../../widgets/Zoom ../../widgets/NavigationToggle dojo/dom-geometry".split(" "),function(A,t,f,a,d,h,p,m,l,q,r,v,x){return function(p){function y(a){a=
p.call(this)||this;a._defaultPositionLookup=null;a.components=[];return a}f(y,p);y.prototype.initialize=function(){this._handles.add([h.init(this,"components",this._componentsWatcher.bind(this)),h.init(this,"view",this._updateViewAwareWidgets.bind(this))])};y.prototype._findComponentPosition=function(a){if(!this._defaultPositionLookup){var d=x.isBodyLtr();this._defaultPositionLookup={attribution:"manual",compass:d?"top-left":"top-right","navigation-toggle":d?"top-left":"top-right",zoom:d?"top-left":
"top-right"}}return this._defaultPositionLookup[a]};y.prototype._removeComponents=function(a){var d=this;a.forEach(function(a){if(a=d.find(a))d.remove(a),a.destroy()})};y.prototype._updateViewAwareWidgets=function(a){var d=this;this.components.forEach(function(f){(f=(f=d.find(f))&&f.widget)&&void 0!==f.view&&f.set("view",a)})};y.prototype._componentsWatcher=function(a,d){this._removeComponents(d);this._addComponents(a)};y.prototype._addComponents=function(a){var d=this;this.initialized&&a.forEach(function(a){return d.add(d._createComponent(a),
d._findComponentPosition(a))})};y.prototype._createComponent=function(a){var d=this._createWidget(a);if(d)return new m({id:a,node:d})};y.prototype._createWidget=function(a){if("attribution"===a)return this._createAttribution();if("compass"===a)return this._createCompass();if("navigation-toggle"===a)return this._createNavigationToggle();if("zoom"===a)return this._createZoom()};y.prototype._createAttribution=function(){return new l({view:this.view})};y.prototype._createCompass=function(){return new q({view:this.view})};
y.prototype._createNavigationToggle=function(){return new v({view:this.view})};y.prototype._createZoom=function(){return new r({view:this.view})};a([d.property()],y.prototype,"components",void 0);return y=a([d.subclass("esri.views.ui.DefaultUI")],y)}(d.declared(p))})},"esri/views/ui/UI":function(){define("require exports ../../core/tsSupport/declareExtendsHelper ../../core/tsSupport/decorateHelper ../../core/accessorSupport/decorators ./Component ../../core/Accessor ../../core/HandleRegistry ../../core/watchUtils dojo/_base/lang dojo/dom-class dojo/dom-construct dojo/dom-style".split(" "),
function(A,t,f,a,d,h,p,m,l,q,r,v,x){function y(a){return"object"!==typeof a||a&&a.isInstanceOf&&a.isInstanceOf(h)||!("component"in a||"index"in a||"position"in a)?null:a}var C={left:0,top:0,bottom:0,right:0},E={bottom:30,top:15,right:15,left:15};return function(p){function t(){var a=p.call(this)||this;a._cornerNameToContainerLookup={};a._positionNameToContainerLookup={};a._components=[];a._handles=new m;a.padding=E;a.view=null;a._initContainers();return a}f(t,p);t.prototype.initialize=function(){this._handles.add([l.init(this,
"view.padding, container",this._applyViewPadding.bind(this)),l.init(this,"padding",this._applyUIPadding.bind(this))])};t.prototype.destroy=function(){this.container=null;this._components.forEach(function(a){a.destroy()});this._components.length=0;this._handles.destroy()};Object.defineProperty(t.prototype,"container",{set:function(a){var d=this._get("container");a!==d&&(a&&(r.add(a,"esri-ui"),this._attachContainers(a)),d&&(r.remove(d,"esri-ui"),x.set(d,{top:"",bottom:"",left:"",right:""}),v.empty(d)),
this._set("container",a))},enumerable:!0,configurable:!0});Object.defineProperty(t.prototype,"height",{get:function(){var a=this.get("view.height")||0;if(0===a)return a;var d=this._getViewPadding();return Math.max(a-(d.top+d.bottom),0)},enumerable:!0,configurable:!0});t.prototype.castPadding=function(a){return"number"===typeof a?{bottom:a,top:a,right:a,left:a}:q.mixin({},E,a)};Object.defineProperty(t.prototype,"width",{get:function(){var a=this.get("view.width")||0;if(0===a)return a;var d=this._getViewPadding();
return Math.max(a-(d.left+d.right),0)},enumerable:!0,configurable:!0});t.prototype.add=function(a,d){var f=this,l;if(Array.isArray(a))a.forEach(function(a){return f.add(a,d)});else{var m=y(a);m&&(l=m.index,d=m.position,a=m.component);d&&"object"===typeof d&&(l=d.index,d=d.position);!a||d&&!this._isValidPosition(d)||(a&&a.isInstanceOf&&a.isInstanceOf(h)||(a=new h({node:a})),this._place({component:a,position:d,index:l}),this._components.push(a))}};t.prototype.remove=function(a){if(a){if(Array.isArray(a))return a.map(this.remove,
this);if(a=this.find(a)){var d=this._components.indexOf(a);a.node.parentNode&&a.node.parentNode.removeChild(a.node);return this._components.splice(d,1)[0]}}};t.prototype.empty=function(a){var d=this;if(Array.isArray(a))return a.map(function(a){return d.empty(a)}).reduce(function(a,d){return a.concat(d)});a=a||"manual";if("manual"===a)return Array.prototype.slice.call(this._manualContainer.children).filter(function(a){return!r.contains(a,"esri-ui-corner")}).map(function(a){return d.remove(a)});if(this._isValidPosition(a))return Array.prototype.slice.call(this._cornerNameToContainerLookup[a].children).map(this.remove,
this)};t.prototype.move=function(a,d){var f=this;Array.isArray(a)&&a.forEach(function(a){return f.move(a,d)});if(a){var h,l=y(a)||y(d);l&&(h=l.index,d=l.position,a=l.component||a);(!d||this._isValidPosition(d))&&(a=this.remove(a))&&this.add(a,{position:d,index:h})}};t.prototype.find=function(a){return a?a&&a.isInstanceOf&&a.isInstanceOf(h)?this._findByComponent(a):"string"===typeof a?this._findById(a):this._findByNode(a.domNode||a):null};t.prototype._getViewPadding=function(){return this.get("view.padding")||
C};t.prototype._attachContainers=function(a){v.place(this._manualContainer,a);v.place(this._innerContainer,a)};t.prototype._initContainers=function(){var a=v.create("div",{className:"esri-ui-inner-container esri-ui-corner-container"}),d=v.create("div",{className:"esri-ui-inner-container esri-ui-manual-container"}),f=v.create("div",{className:"esri-ui-top-left esri-ui-corner"},a),h=v.create("div",{className:"esri-ui-top-right esri-ui-corner"},a),l=v.create("div",{className:"esri-ui-bottom-left esri-ui-corner"},
a),m=v.create("div",{className:"esri-ui-bottom-right esri-ui-corner"},a);this._innerContainer=a;this._manualContainer=d;this._cornerNameToContainerLookup={"top-left":f,"top-right":h,"bottom-left":l,"bottom-right":m};this._positionNameToContainerLookup=q.mixin({manual:d},this._cornerNameToContainerLookup)};t.prototype._isValidPosition=function(a){return!!this._positionNameToContainerLookup[a]};t.prototype._place=function(a){var d=a.component,f=a.index;a=this._positionNameToContainerLookup[a.position||
"manual"];var h;-1<f?(h=Array.prototype.slice.call(a.children),0===f?this._placeComponent(d,a,"first"):f>=h.length?this._placeComponent(d,a,"last"):this._placeComponent(d,h[f],"before")):this._placeComponent(d,a,"last")};t.prototype._placeComponent=function(a,d,f){var h=a.widget;h&&!h._started&&"function"===typeof h.postMixInProperties&&"function"===typeof h.buildRendering&&"function"===typeof h.postCreate&&"function"===typeof h.startup&&a.widget.startup();v.place(a.node,d,f)};t.prototype._applyViewPadding=
function(){var a=this.container;a&&x.set(a,this._toPxPosition(this._getViewPadding()))};t.prototype._applyUIPadding=function(){this._innerContainer&&x.set(this._innerContainer,this._toPxPosition(this.padding))};t.prototype._toPxPosition=function(a){return{top:this._toPxUnit(a.top),left:this._toPxUnit(a.left),right:this._toPxUnit(a.right),bottom:this._toPxUnit(a.bottom)}};t.prototype._toPxUnit=function(a){return 0===a?0:a+"px"};t.prototype._findByComponent=function(a){var d=null,f;this._components.some(function(h){(f=
h===a)&&(d=h);return f});return d};t.prototype._findById=function(a){var d=null,f;this._components.some(function(h){(f=h.id===a)&&(d=h);return f});return d};t.prototype._findByNode=function(a){var d=null,f;this._components.some(function(h){(f=h.node===a)&&(d=h);return f});return d};a([d.property()],t.prototype,"container",null);a([d.property({dependsOn:["view.height"]})],t.prototype,"height",null);a([d.property()],t.prototype,"padding",void 0);a([d.cast("padding")],t.prototype,"castPadding",null);
a([d.property()],t.prototype,"view",void 0);a([d.property({dependsOn:["view.width"]})],t.prototype,"width",null);return t=a([d.subclass("esri.views.ui.UI")],t)}(d.declared(p))})},"esri/views/ui/Component":function(){define("require exports ../../core/tsSupport/declareExtendsHelper ../../core/tsSupport/decorateHelper ../../core/accessorSupport/decorators ../../core/Accessor dojo/dom dojo/dom-class".split(" "),function(A,t,f,a,d,h,p,m){return function(h){function l(){var a=null!==h&&h.apply(this,arguments)||
this;a.widget=null;return a}f(l,h);l.prototype.destroy=function(){this.widget&&this.widget.destroy();this.node=null};Object.defineProperty(l.prototype,"id",{get:function(){return this._get("id")||this.get("node.id")},set:function(a){this._set("id",a)},enumerable:!0,configurable:!0});Object.defineProperty(l.prototype,"node",{set:function(a){var d=this._get("node");a!==d&&(a&&m.add(a,"esri-component"),d&&m.remove(d,"esri-component"),this._set("node",a))},enumerable:!0,configurable:!0});l.prototype.castNode=
function(a){if(!a)return this._set("widget",null),null;if("string"===typeof a||a&&"nodeType"in a)return this._set("widget",null),p.byId(a);a&&"function"===typeof a.render&&!a.domNode&&(a.domNode=document.createElement("div"));this._set("widget",a);return a.domNode};a([d.property()],l.prototype,"id",null);a([d.property()],l.prototype,"node",null);a([d.cast("node")],l.prototype,"castNode",null);a([d.property({readOnly:!0})],l.prototype,"widget",void 0);return l=a([d.subclass("esri.views.ui.Component")],
l)}(d.declared(h))})},"esri/widgets/Attribution":function(){define("require exports ../core/tsSupport/declareExtendsHelper ../core/tsSupport/decorateHelper ../core/accessorSupport/decorators ./support/widget ./Widget ./Attribution/AttributionViewModel".split(" "),function(A,t,f,a,d,h,p,m){return function(l){function p(a){a=l.call(this)||this;a._isOpen=!1;a._attributionTextOverflowed=!1;a._prevSourceNodeHeight=0;a.view=null;a.viewModel=new m;return a}f(p,l);p.prototype.render=function(){var a=(d={},
d["esri-attribution--open"]=this._isOpen,d);return h.tsx("div",{bind:this,class:"esri-attribution esri-widget",classes:a,onclick:this._toggleState,onkeydown:this._toggleState},this._renderSourcesNode(),h.tsx("div",{class:"esri-attribution__powered-by"},"Powered by ",h.tsx("a",{target:"_blank",href:"http://www.esri.com/",class:"esri-attribution__link"},"Esri")));var d};p.prototype._renderSourcesNode=function(){var a=this._isOpen,d=this._isInteractive(),f=d?0:-1,l=this.get("viewModel.attributionText"),
a=(m={},m["esri-attribution__sources--open"]=a,m["esri-interactive"]=d,m);return h.tsx("div",{afterCreate:this._afterSourcesNodeCreate,afterUpdate:this._afterSourcesNodeUpdate,bind:this,class:"esri-attribution__sources",classes:a,innerHTML:l,role:d?"button":void 0,tabIndex:f});var m};p.prototype._afterSourcesNodeCreate=function(a){this._prevSourceNodeHeight=a.clientWidth};p.prototype._afterSourcesNodeUpdate=function(a){var d=!1,f=a.clientHeight;a=a.scrollWidth>=a.clientWidth;var h=this._attributionTextOverflowed!==
a;this._attributionTextOverflowed=a;h&&(d=!0);this._isOpen&&(a=f<this._prevSourceNodeHeight,this._prevSourceNodeHeight=f,a&&(this._isOpen=!1,d=!0));d&&this.scheduleRender()};p.prototype._toggleState=function(){this._isInteractive()&&(this._isOpen=!this._isOpen)};p.prototype._isInteractive=function(){return this._isOpen||this._attributionTextOverflowed};a([d.aliasOf("viewModel.view")],p.prototype,"view",void 0);a([d.property({type:m}),h.renderable(["attributionText","state","view.size"])],p.prototype,
"viewModel",void 0);a([h.accessibleHandler()],p.prototype,"_toggleState",null);return p=a([d.subclass("esri.widgets.Attribution")],p)}(d.declared(p))})},"esri/widgets/Attribution/AttributionViewModel":function(){define("require exports ../../core/tsSupport/declareExtendsHelper ../../core/tsSupport/decorateHelper ../../core/accessorSupport/decorators ../../geometry/support/webMercatorUtils ../../core/HandleRegistry ../../core/Accessor ../../core/lang ../../core/watchUtils ../../geometry/Extent".split(" "),
function(A,t,f,a,d,h,p,m,l,q,r){return function(m){function v(a){a=m.call(this,a)||this;a._handles=new p;a._pendingAttributionItemsByLayerId={};a._attributionDataByLayerId={};a.itemDelimiter=" | ";a.items=[];a.view=null;a._updateAttributionItems=a._updateAttributionItems.bind(a);return a}f(v,m);v.prototype.initialize=function(){this._handles.add(q.init(this,"view",this._viewWatcher))};v.prototype.destroy=function(){this._handles.destroy();this.view=this._handles=null};Object.defineProperty(v.prototype,
"attributionText",{get:function(){return this.items.join(this.itemDelimiter)},enumerable:!0,configurable:!0});Object.defineProperty(v.prototype,"state",{get:function(){return this.get("view.ready")?"ready":"disabled"},enumerable:!0,configurable:!0});v.prototype._viewWatcher=function(a){var d=this,f=this._handles;f&&f.remove();a&&(f.add([a.allLayerViews.on("change",function(a){d._addLayerViews(a.added);0<a.removed.length&&(a.removed.forEach(function(a){f.remove(a.uid)}),d._updateAttributionItems())}),
q.init(a,"stationary",this._updateAttributionItems)]),this._addLayerViews(a.allLayerViews))};v.prototype._addLayerViews=function(a){var d=this;a.forEach(function(a){d._handles.has(a.uid)||d._handles.add(q.init(a,"suspended",d._updateAttributionItems),a.uid)})};v.prototype._updateAttributionItems=function(){var a=this,d=[];this._getActiveLayerViews().forEach(function(f){var h=f.layer;if(!h.hasAttributionData)f=h.get("copyright"),a._isUnique(d,f)&&d.push(f);else if(h&&h.tileInfo){var l=a._attributionDataByLayerId;
if(l[h.uid])f=a._getDynamicAttribution(l[h.uid],a.view,h),a._isUnique(d,f)&&d.push(f);else{var m=a._pendingAttributionItemsByLayerId;a._inProgress(m[h.uid])||(m[h.uid]=h.fetchAttributionData().then(function(d){d=a._createContributionIndex(d,a._isBingLayer(h));delete m[h.uid];l[h.uid]=d;a._updateAttributionItems()}))}}});this._itemsChanged(this.items,d)&&this._set("items",d)};v.prototype._itemsChanged=function(a,d){return a.length!==d.length||a.some(function(a,f){return a!==d[f]})};v.prototype._inProgress=
function(a){return a&&!a.isFulfilled()};v.prototype._getActiveLayerViews=function(){return this.get("view.allLayerViews").filter(function(a){return!a.suspended&&a.get("layer.attributionVisible")})};v.prototype._isUnique=function(a,d){return d&&-1===a.indexOf(d)};v.prototype._isBingLayer=function(a){return-1!==a.declaredClass.toLowerCase().indexOf("vetiledlayer")};v.prototype._createContributionIndex=function(a,d){a=a.contributors;var f={};if(!a)return f;a.forEach(function(a,m){var p=a.coverageAreas;
p&&p.forEach(function(p){var q=p.bbox,v=p.zoomMin-(d&&p.zoomMin?1:0),x=p.zoomMax-(d&&p.zoomMax?1:0);a={extent:h.geographicToWebMercator(new r({xmin:q[1],ymin:q[0],xmax:q[3],ymax:q[2]})),attribution:a.attribution||"",score:l.isDefined(p.score)?p.score:100,id:m};for(p=v;p<=x;p++)f[p]=f[p]||[],f[p].push(a)})});f.maxKey=Math.max.apply(null,Object.keys(f));return f};v.prototype._getDynamicAttribution=function(a,d,f){var h=d.extent;d=f.tileInfo.scaleToZoom(d.scale);d=Math.min(a.maxKey,Math.round(d));if(!h||
!l.isDefined(d)||-1>=d)return"";a=a[d];var m=h.center.clone().normalize(),p={};return a.filter(function(a){var d=!p[a.id]&&a.extent.contains(m);d&&(p[a.id]=!0);return d}).sort(function(a,d){return d.score-a.score||a.objectId-d.objectId}).map(function(a){return a.attribution}).join(", ")};a([d.property({dependsOn:["items","itemDelimiter"],readOnly:!0})],v.prototype,"attributionText",null);a([d.property()],v.prototype,"itemDelimiter",void 0);a([d.property({readOnly:!0})],v.prototype,"items",void 0);
a([d.property({dependsOn:["view.ready"],readOnly:!0})],v.prototype,"state",null);a([d.property()],v.prototype,"view",void 0);return v=a([d.subclass("esri.widgets.Attribution.AttributionViewModel")],v)}(d.declared(m))})},"esri/widgets/Compass":function(){define("require exports ../core/tsSupport/declareExtendsHelper ../core/tsSupport/decorateHelper ../core/accessorSupport/decorators ./support/widget ./Widget ./Compass/CompassViewModel dojo/i18n!./Compass/nls/Compass".split(" "),function(A,t,f,a,d,
h,p,m,l){return function(p){function q(a){a=p.call(this)||this;a.view=null;a.viewModel=new m;return a}f(q,p);q.prototype.reset=function(){};q.prototype.render=function(){var a=this.viewModel.orientation,d=this.viewModel.state,f="disabled"===d,m="compass"===("rotation"===d?"rotation":"compass"),d=(p={},p["esri-disabled"]=f,p["esri-interactive"]=!f,p),p=(q={},q["esri-icon-compass"]=m,q["esri-icon-dial"]=!m,q);return h.tsx("div",{bind:this,class:"esri-compass esri-widget-button esri-widget",classes:d,
onclick:this._reset,onkeydown:this._reset,role:"button",tabIndex:f?-1:0,"aria-label":l.reset,title:l.reset},h.tsx("span",{"aria-hidden":"true",class:"esri-compass__icon",classes:p,styles:this._toRotationTransform(a)}),h.tsx("span",{class:"esri-icon-font-fallback-text"},l.reset));var p,q};q.prototype._reset=function(){this.reset()};q.prototype._toRotationTransform=function(a){return{transform:"rotateZ("+a.z+"deg)"}};a([d.aliasOf("viewModel.view")],q.prototype,"view",void 0);a([d.property({type:m}),
h.renderable(["viewModel.orientation","viewModel.state"])],q.prototype,"viewModel",void 0);a([d.aliasOf("viewModel.reset")],q.prototype,"reset",null);a([h.accessibleHandler()],q.prototype,"_reset",null);return q=a([d.subclass("esri.widgets.Compass")],q)}(d.declared(p))})},"esri/widgets/Compass/CompassViewModel":function(){define("require exports ../../core/tsSupport/declareExtendsHelper ../../core/tsSupport/decorateHelper ../../core/accessorSupport/decorators ../../core/HandleRegistry ../../core/Accessor ../../core/watchUtils".split(" "),
function(A,t,f,a,d,h,p,m){return function(l){function p(a){a=l.call(this,a)||this;a._handles=new h;a.orientation={x:0,y:0,z:0};a.view=null;a._updateForCamera=a._updateForCamera.bind(a);a._updateForRotation=a._updateForRotation.bind(a);a._updateRotationWatcher=a._updateRotationWatcher.bind(a);return a}f(p,l);p.prototype.initialize=function(){this._handles.add(m.init(this,"view",this._updateRotationWatcher))};p.prototype.destroy=function(){this._handles.destroy();this.view=this._handles=null};Object.defineProperty(p.prototype,
"canShowNorth",{get:function(){var a=this.get("view.spatialReference");return a&&(a.isWebMercator||a.isWGS84)},enumerable:!0,configurable:!0});Object.defineProperty(p.prototype,"state",{get:function(){return this.get("view.ready")?this.canShowNorth?"compass":"rotation":"disabled"},enumerable:!0,configurable:!0});p.prototype.reset=function(){if(this.get("view.ready")){var a={};"2d"===this.view.type?a.rotation=0:a.heading=0;this.view.goTo(a)}};p.prototype._updateForRotation=function(a){void 0!==a&&
null!==a&&(this.orientation={z:a})};p.prototype._updateForCamera=function(a){a&&(this.orientation={x:0,y:0,z:-a.heading})};p.prototype._updateRotationWatcher=function(a){this._handles.removeAll();a&&("2d"===a.type?this._handles.add(m.init(this,"view.rotation",this._updateForRotation)):this._handles.add(m.init(this,"view.camera",this._updateForCamera)))};a([d.property({dependsOn:["view.spatialReference.isWebMercator","view.spatialReference.wkid"],readOnly:!0})],p.prototype,"canShowNorth",null);a([d.property()],
p.prototype,"orientation",void 0);a([d.property({dependsOn:["view.ready","canShowNorth"],readOnly:!0})],p.prototype,"state",null);a([d.property()],p.prototype,"view",void 0);a([d.property()],p.prototype,"reset",null);return p=a([d.subclass("esri.widgets.CompassViewModel")],p)}(d.declared(p))})},"esri/widgets/Zoom":function(){define("require exports ../core/tsSupport/declareExtendsHelper ../core/tsSupport/decorateHelper ../core/accessorSupport/decorators ./support/widget ./Widget ./Zoom/IconButton ./Zoom/ZoomViewModel dojo/i18n!./Zoom/nls/Zoom".split(" "),
function(A,t,f,a,d,h,p,m,l,q){return function(p){function r(a){a=p.call(this)||this;a.view=null;a.viewModel=new l;return a}f(r,p);r.prototype.postInitialize=function(){this._zoomInButton=new m({action:this.zoomIn.bind(this),iconClass:"esri-icon-plus",title:q.zoomIn});this._zoomOutButton=new m({action:this.zoomOut.bind(this),iconClass:"esri-icon-minus",title:q.zoomOut})};Object.defineProperty(r.prototype,"layout",{set:function(a){"horizontal"!==a&&(a="vertical");this._set("layout",a)},enumerable:!0,
configurable:!0});r.prototype.render=function(){var a=this.viewModel,d=(f={},f["esri-zoom--horizontal"]="horizontal"===this.layout,f);this._zoomInButton.enabled="ready"===a.state&&a.canZoomIn;this._zoomOutButton.enabled="ready"===a.state&&a.canZoomOut;return h.tsx("div",{class:"esri-zoom esri-widget",classes:d},this._zoomInButton.render(),this._zoomOutButton.render());var f};r.prototype.zoomIn=function(){};r.prototype.zoomOut=function(){};a([d.property({value:"vertical"}),h.renderable()],r.prototype,
"layout",null);a([d.aliasOf("viewModel.view"),h.renderable()],r.prototype,"view",void 0);a([d.property({type:l}),h.renderable(["viewModel.canZoomIn","viewModel.canZoomOut","viewModel.state"])],r.prototype,"viewModel",void 0);a([d.aliasOf("viewModel.zoomIn")],r.prototype,"zoomIn",null);a([d.aliasOf("viewModel.zoomOut")],r.prototype,"zoomOut",null);return r=a([d.subclass("esri.widgets.Zoom")],r)}(d.declared(p))})},"esri/widgets/Zoom/IconButton":function(){define("require exports ../../core/tsSupport/declareExtendsHelper ../../core/tsSupport/decorateHelper ../../core/accessorSupport/decorators ../support/widget ../Widget".split(" "),
function(A,t,f,a,d,h,p){return function(m){function l(){var a=null!==m&&m.apply(this,arguments)||this;a.enabled=!0;a.iconClass="";a.title="";return a}f(l,m);l.prototype.render=function(){var a=this.enabled?0:-1,d=(f={},f["esri-disabled"]=!this.enabled,f["esri-interactive"]=this.enabled,f),f=(l={},l[this.iconClass]=!!this.iconClass,l);return h.tsx("div",{bind:this,class:"esri-widget-button esri-widget",classes:d,onclick:this._triggerAction,onkeydown:this._triggerAction,role:"button",tabIndex:a,title:this.title},
h.tsx("span",{"aria-hidden":"true",role:"presentation",class:"esri-icon",classes:f}),h.tsx("span",{class:"esri-icon-font-fallback-text"},this.title));var f,l};l.prototype._triggerAction=function(){this.action.call(this)};a([d.property()],l.prototype,"action",void 0);a([d.property(),h.renderable()],l.prototype,"enabled",void 0);a([d.property(),h.renderable()],l.prototype,"iconClass",void 0);a([d.property(),h.renderable()],l.prototype,"title",void 0);a([h.accessibleHandler()],l.prototype,"_triggerAction",
null);return l=a([d.subclass("esri.widgets.IconButton")],l)}(d.declared(p))})},"esri/widgets/Zoom/ZoomViewModel":function(){define("require exports ../../core/tsSupport/declareExtendsHelper ../../core/tsSupport/decorateHelper ../../core/accessorSupport/decorators ./ZoomConditions3D ./ZoomConditions2D ../../core/Accessor".split(" "),function(A,t,f,a,d,h,p,m){return function(l){function m(a){a=l.call(this,a)||this;a.canZoomIn=null;a.canZoomOut=null;a.zoomIn=a.zoomIn.bind(a);a.zoomOut=a.zoomOut.bind(a);
return a}f(m,l);m.prototype.destroy=function(){this.view=null};Object.defineProperty(m.prototype,"state",{get:function(){return this.get("view.ready")?"ready":"disabled"},enumerable:!0,configurable:!0});Object.defineProperty(m.prototype,"view",{set:function(a){a?"2d"===a.type?this._zoomConditions=new p({view:a}):"3d"===a.type&&(this._zoomConditions=new h):this._zoomConditions=null;this._set("view",a)},enumerable:!0,configurable:!0});m.prototype.zoomIn=function(){this.canZoomIn&&this._zoomToFactor(.5)};
m.prototype.zoomOut=function(){this.canZoomOut&&this._zoomToFactor(2)};m.prototype._zoomToFactor=function(a){"ready"===this.state&&this.view.goTo({scale:this.get("view.scale")*a})};a([d.property()],m.prototype,"_zoomConditions",void 0);a([d.property({aliasOf:"_zoomConditions.canZoomIn",readOnly:!0})],m.prototype,"canZoomIn",void 0);a([d.property({aliasOf:"_zoomConditions.canZoomOut",readOnly:!0})],m.prototype,"canZoomOut",void 0);a([d.property({dependsOn:["view.ready"],readOnly:!0})],m.prototype,
"state",null);a([d.property()],m.prototype,"view",null);a([d.property()],m.prototype,"zoomIn",null);a([d.property()],m.prototype,"zoomOut",null);return m=a([d.subclass("esri.widgets.Zoom.ZoomViewModel")],m)}(d.declared(m))})},"esri/widgets/Zoom/ZoomConditions3D":function(){define("require exports ../../core/tsSupport/declareExtendsHelper ../../core/tsSupport/decorateHelper ../../core/accessorSupport/decorators ../../core/Accessor".split(" "),function(A,t,f,a,d,h){return function(h){function m(){var a=
null!==h&&h.apply(this,arguments)||this;a.canZoomIn=!0;a.canZoomOut=!0;return a}f(m,h);a([d.property({readOnly:!0})],m.prototype,"canZoomIn",void 0);a([d.property({readOnly:!0})],m.prototype,"canZoomOut",void 0);return m=a([d.subclass("esri.widgets.Zoom.ZoomConditions3D")],m)}(d.declared(h))})},"esri/widgets/Zoom/ZoomConditions2D":function(){define("require exports ../../core/tsSupport/declareExtendsHelper ../../core/tsSupport/decorateHelper ../../core/accessorSupport/decorators ../../core/Accessor".split(" "),
function(A,t,f,a,d,h){return function(h){function m(){return null!==h&&h.apply(this,arguments)||this}f(m,h);Object.defineProperty(m.prototype,"canZoomIn",{get:function(){var a=this.get("view.scale"),d=this.get("view.constraints.effectiveMaxScale");return 0===d||a>d},enumerable:!0,configurable:!0});Object.defineProperty(m.prototype,"canZoomOut",{get:function(){var a=this.get("view.scale"),d=this.get("view.constraints.effectiveMinScale");return 0===d||a<d},enumerable:!0,configurable:!0});a([d.property({dependsOn:["view.ready",
"view.scale"],readOnly:!0})],m.prototype,"canZoomIn",null);a([d.property({dependsOn:["view.ready","view.scale"],readOnly:!0})],m.prototype,"canZoomOut",null);a([d.property()],m.prototype,"view",void 0);return m=a([d.subclass("esri.widgets.Zoom.ZoomConditions2D")],m)}(d.declared(h))})},"esri/widgets/NavigationToggle":function(){define("require exports ../core/tsSupport/declareExtendsHelper ../core/tsSupport/decorateHelper ../core/accessorSupport/decorators ./support/widget ./Widget ./NavigationToggle/NavigationToggleViewModel dojo/i18n!./NavigationToggle/nls/NavigationToggle".split(" "),
function(A,t,f,a,d,h,p,m,l){return function(p){function q(a){a=p.call(this)||this;a.view=null;a.viewModel=new m;return a}f(q,p);Object.defineProperty(q.prototype,"layout",{set:function(a){"horizontal"!==a&&(a="vertical");this._set("layout",a)},enumerable:!0,configurable:!0});q.prototype.toggle=function(){};q.prototype.render=function(){var a="disabled"===this.get("viewModel.state"),d="pan"===this.get("viewModel.navigationMode"),f=(m={},m["esri-disabled"]=a,m["esri-navigation-toggle--horizontal"]=
"horizontal"===this.layout,m),m=(p={},p["esri-navigation-toggle__button--active"]=d,p),d=(q={},q["esri-navigation-toggle__button--active"]=!d,q);return h.tsx("div",{bind:this,class:"esri-navigation-toggle esri-widget",classes:f,onclick:this._toggle,onkeydown:this._toggle,tabIndex:a?-1:0,"aria-label":l.toggle,title:l.toggle},h.tsx("div",{class:h.join("esri-navigation-toggle__button esri-widget-button","esri-navigation-toggle__button--pan"),classes:m},h.tsx("span",{class:"esri-icon-pan"})),h.tsx("div",
{class:h.join("esri-navigation-toggle__button esri-widget-button","esri-navigation-toggle__button--rotate"),classes:d},h.tsx("span",{class:"esri-icon-rotate"})));var m,p,q};q.prototype._toggle=function(){this.toggle()};a([d.property({value:"vertical"}),h.renderable()],q.prototype,"layout",null);a([d.aliasOf("viewModel.view"),h.renderable()],q.prototype,"view",void 0);a([d.property({type:m}),h.renderable(["viewModel.state","viewModel.navigationMode"])],q.prototype,"viewModel",void 0);a([d.aliasOf("viewModel.toggle")],
q.prototype,"toggle",null);a([h.accessibleHandler()],q.prototype,"_toggle",null);return q=a([d.subclass("esri.widgets.NavigationToggle")],q)}(d.declared(p))})},"esri/widgets/NavigationToggle/NavigationToggleViewModel":function(){define("require exports ../../core/tsSupport/declareExtendsHelper ../../core/tsSupport/decorateHelper ../../core/accessorSupport/decorators ../../core/watchUtils ../../core/Accessor ../../core/HandleRegistry".split(" "),function(A,t,f,a,d,h,p,m){return function(l){function p(a){a=
l.call(this,a)||this;a._handles=new m;a.navigationMode="pan";a.view=null;a.toggle=a.toggle.bind(a);return a}f(p,l);p.prototype.initialize=function(){this._handles.add(h.when(this,"view.inputManager",this._setNavigationMode.bind(this)))};p.prototype.destroy=function(){this._handles.destroy();this.view=this._handles=null};Object.defineProperty(p.prototype,"state",{get:function(){return this.get("view.ready")&&"3d"===this.view.type?"ready":"disabled"},enumerable:!0,configurable:!0});p.prototype.toggle=
function(){"disabled"!==this.state&&(this.navigationMode="pan"!==this.navigationMode?"pan":"rotate",this._setNavigationMode())};p.prototype._setNavigationMode=function(){this.get("view.inputManager").primaryDragAction="pan"===this.navigationMode?"pan":"rotate"};a([d.property({dependsOn:["view.ready"],readOnly:!0})],p.prototype,"state",null);a([d.property()],p.prototype,"navigationMode",void 0);a([d.property()],p.prototype,"view",void 0);a([d.property()],p.prototype,"toggle",null);return p=a([d.subclass("esri.widgets.NavigationToggleViewModel")],
p)}(d.declared(p))})},"esri/views/ui/2d/DefaultUI2D":function(){define("require exports ../../../core/tsSupport/declareExtendsHelper ../../../core/tsSupport/decorateHelper ../../../core/accessorSupport/decorators ../DefaultUI dojo/_base/lang".split(" "),function(A,t,f,a,d,h,p){return function(h){function l(){return h.call(this)||this}f(l,h);l.prototype.getDefaults=function(){return p.mixin(this.inherited(arguments),{components:["attribution","zoom"]})};return l=a([d.subclass("esri.views.ui.2d.DefaultUI2D")],
l)}(d.declared(h))})},"esri/views/2d/engine/Stage":function(){define("require exports ../../../core/tsSupport/extendsHelper ../../../core/promiseUtils ../../../core/Scheduler ../FrameBudget ./DOMContainer ./StageGL ./Container".split(" "),function(A,t,f,a,d,h,p,m,l){function q(a){if(a instanceof m)return a;if(a instanceof l){var d=0;for(a=a.children;d<a.length;d++){var f=q(a[d]);if(f)return f}}return null}return function(l){function m(a){var f=l.call(this)||this;f.element=a;f._budget=new h;f._renderParameters=
{budget:f._budget,state:f.state,devicePixelRatio:window.devicePixelRatio,stationary:!1};f._renderRequested=!1;f._taskHandle=d.addFrameTask({render:function(){return f.renderFrame()}});f._stationary=!0;f.attached=!0;f._taskHandle.pause();return f}f(m,l);m.prototype.destroy=function(){this.removeAllChildren();this.renderFrame();this._taskHandle.remove();this._taskHandle=null};Object.defineProperty(m.prototype,"state",{get:function(){return this._state},set:function(a){this._state=a;this.requestRender()},
enumerable:!0,configurable:!0});Object.defineProperty(m.prototype,"stationary",{get:function(){return this._stationary},set:function(a){this._stationary!==a&&(this._stationary=a,this.requestRender())},enumerable:!0,configurable:!0});m.prototype.start=function(){this._taskHandle.resume()};m.prototype.stop=function(){this._taskHandle.isPaused()||this._taskHandle.pause()};m.prototype.requestRender=function(){this._renderRequested=!0;this._taskHandle&&this._taskHandle.isPaused()&&this._taskHandle.resume()};
m.prototype.takeScreenshot=function(d){var f=q(this);return f?f.takeScreenshot(d):a.reject("Could not find an object capable of capturing screenshot!")};m.prototype.renderFrame=function(){this._renderRequested&&(this._renderRequested=!1,this._renderParameters.state=this._state,this._renderParameters.stationary=this.stationary,this._renderParameters.devicePixelRatio=window.devicePixelRatio,this.processRender(this._renderParameters));this._renderRequested||this._taskHandle.pause()};return m}(p)})},
"esri/views/2d/engine/DOMContainer":function(){define(["require","exports","../../../core/tsSupport/extendsHelper","./Container"],function(A,t,f,a){return function(a){function d(){return null!==a&&a.apply(this,arguments)||this}f(d,a);d.prototype.createElement=function(){var a=document.createElement("div");a.setAttribute("class","esri-display-object");return a};d.prototype.setElement=function(a){this.element=a};d.prototype.doRender=function(d){var f=this.element.style;this.visible?(f.display="block",
f.opacity=""+this.opacity,a.prototype.doRender.call(this,d)):f.display="none"};d.prototype.prepareChildrenRenderParameters=function(a){return a};d.prototype.attachChild=function(a,d){var f=a.element;f||(f=a.createElement(),a.setElement(f));return a.attach(d)};d.prototype.detachChild=function(a,d){a.detach(d);this.element.removeChild(a.element);a.setElement(null)};d.prototype.renderChildren=function(d){for(var f=this.children,h=this.element.childNodes,p=0,r=f.length,v=0;v<r;v++)if(f[v].attached){var x=
f[v].element;h[p]!==x&&(null!=h[p+1]?this.element.insertBefore(x,h[p]):this.element.appendChild(x));p+=1}a.prototype.renderChildren.call(this,d)};return d}(a)})},"esri/views/2d/engine/Container":function(){define(["require","exports","../../../core/tsSupport/extendsHelper","./DisplayObject"],function(A,t,f,a){var d;(function(a){a[a.BEFORE=0]="BEFORE";a[a.ATTACHING=1]="ATTACHING";a[a.DETACHING=2]="DETACHING";a[a.RENDERING=3]="RENDERING";a[a.AFTER=4]="AFTER";a[a.DONE=5]="DONE"})(d||(d={}));return function(a){function h(){var f=
null!==a&&a.apply(this,arguments)||this;f._childrenSet=new Set;f._childrenToAttach=[];f._childrenToDetach=[];f._renderPhase=d.DONE;f.children=[];return f}f(h,a);Object.defineProperty(h.prototype,"numChildren",{get:function(){return this.children.length},enumerable:!0,configurable:!0});h.prototype.detach=function(a){var d=this.children;a=this.prepareChildrenRenderParameters(a);for(var f=d.length,h=0;h<f;h++){var m=d[h];m.attached&&(this.detachChild(m,a),m.attached=!1,m.parent=null)}};h.prototype.doRender=
function(a){var f=this.prepareChildrenRenderParameters(a);this._renderPhase=d.BEFORE;this.beforeRenderChildren(a,f);this._renderPhase=d.ATTACHING;this.attachChildren(f)||this.requestRender();this._renderPhase=d.DETACHING;for(var h=this._childrenToDetach;0<h.length;){var m=h.shift();this.detachChild(m,f);m.attached=!1;m.parent=null}this._renderPhase=d.RENDERING;this.renderChildren(f);this._renderPhase=d.AFTER;this.afterRenderChildren(a,f);this._renderPhase=d.DONE};h.prototype.addChild=function(a){return this.addChildAt(a,
this.children.length)};h.prototype.addChildAt=function(a,f){void 0===f&&(f=this.numChildren);if(!a||this.contains(a))return a;var h=a.parent;h&&h!==this&&h.removeChild(a);f>=this.numChildren?this.children.push(a):this.children.splice(f,0,a);this._childrenSet.add(a);f=this._childrenToDetach.indexOf(a);-1<f&&this._childrenToDetach.splice(f,1);this._childrenToAttach.push(a);this._renderPhase>=d.RENDERING&&this.requestRender();return a};h.prototype.contains=function(a){return this._childrenSet.has(a)};
h.prototype.getChildIndex=function(a){return this.children.indexOf(a)};h.prototype.getChildAt=function(a){return 0>a||a>this.children.length?null:this.children[a]};h.prototype.removeAllChildren=function(){for(var a=this.numChildren;a--;)this.removeChildAt(0)};h.prototype.removeChild=function(a){return this.contains(a)?this.removeChildAt(this.getChildIndex(a)):a};h.prototype.removeChildAt=function(a){if(0>a||a>=this.children.length)return null;a=this.children.splice(a,1)[0];this._childrenSet["delete"](a);
if(a.attached)this._childrenToDetach.push(a),this._renderPhase>=d.RENDERING&&this.requestRender();else{var f=this._childrenToAttach.indexOf(a);-1<f&&this._childrenToAttach.splice(f,1)}return a};h.prototype.requestChildRender=function(a){a&&a.parent===this&&this._renderPhase>=d.RENDERING&&this.requestRender()};h.prototype.setChildIndex=function(a,f){var h=this.getChildIndex(a);-1<h&&(this.children.splice(h,1),this.children.splice(f,0,a),this._renderPhase>=d.RENDERING&&this.requestRender())};h.prototype.sortChildren=
function(a){this._renderPhase>d.RENDERING&&this.requestRender();return this.children.sort(a)};h.prototype.attachChildren=function(a){var d=this._childrenToAttach;if(0===d.length)return!0;for(var f=0===d.length;!f;)f=d.shift(),this.attachChild(f,a)&&(f.attached=!0,f.parent=this),f=0===d.length;return 0===d.length};h.prototype.renderChildren=function(a){for(var d=this.children,f=d.length,h=0;h<f;h++){var m=d[h];m.attached&&this.renderChild(m,a)}};h.prototype.beforeRenderChildren=function(a,d){};h.prototype.attachChild=
function(a,d){return a.attach(d)};h.prototype.detachChild=function(a,d){a.detach(d)};h.prototype.renderChild=function(a,d){a.processRender(d)};h.prototype.afterRenderChildren=function(a,d){};return h}(a)})},"esri/views/2d/engine/DisplayObject":function(){define(["require","exports","../../../core/tsSupport/extendsHelper","./Evented"],function(A,t,f,a){return function(a){function d(){var d=null!==a&&a.apply(this,arguments)||this;d._renderRequestedCalled=!1;d._attached=!1;d._opacity=1;d.renderRequested=
!1;d._visible=!0;return d}f(d,a);Object.defineProperty(d.prototype,"attached",{get:function(){return this._attached},set:function(a){this._attached!==a&&((this._attached=a)?this.hasEventListener("attach")&&this.emit("attach"):this.hasEventListener("detach")&&this.emit("detach"))},enumerable:!0,configurable:!0});Object.defineProperty(d.prototype,"opacity",{get:function(){return this._opacity},set:function(a){this._opacity!==a&&(this._opacity=a,this.requestRender())},enumerable:!0,configurable:!0});
Object.defineProperty(d.prototype,"visible",{get:function(){return this._visible},set:function(a){this._visible!==a&&(this._visible=a,this.requestRender())},enumerable:!0,configurable:!0});d.prototype.attach=function(a){return!0};d.prototype.detach=function(a){};d.prototype.processRender=function(a){this._renderRequestedCalled=!1;this.doRender(a);this._renderRequestedCalled||(this.renderRequested=!1);this.hasEventListener("post-render")&&this.emit("post-render")};d.prototype.requestRender=function(){var a=
this.renderRequested;this.renderRequested=this._renderRequestedCalled=!0;this.parent&&this.parent.requestChildRender(this);a!==this.renderRequested&&this.hasEventListener("will-render")&&this.emit("will-render")};d.prototype.dispose=function(){};return d}(a.Evented)})},"esri/views/2d/engine/Evented":function(){define(["require","exports","../../../core/tsSupport/extendsHelper","dojo/aspect","dojo/on"],function(A,t,f,a,d){Object.defineProperty(t,"__esModule",{value:!0});A=function(){function f(){}
f.prototype.on=function(d,f){return a.after(this,"on"+d,f,!0)};f.prototype.once=function(a,f){return d.once(this,a,f)};f.prototype.emit=function(a){d.emit(this,a,this)};f.prototype.hasEventListener=function(a){a="on"+a;return!(!this[a]||!this[a].after)};return f}();t.Evented=A;t.EventedMixin=function(h){return function(h){function m(){return null!==h&&h.apply(this,arguments)||this}f(m,h);m.prototype.on=function(d,f){return a.after(this,"on"+d,f,!0)};m.prototype.once=function(a,f){return d.once(this,
a,f)};m.prototype.emit=function(a,f){d.emit(this,a,f)};m.prototype.hasEventListener=function(a){a="on"+a;return!(!this[a]||!this[a].after)};return m}(h)}})},"esri/views/2d/engine/StageGL":function(){define("require exports ../../../core/tsSupport/extendsHelper ../libs/gl-matrix/common ../libs/gl-matrix/vec2 ../libs/gl-matrix/mat2d ./webgl/BitBlitRenderer ../../support/screenshotUtils ../../../core/promiseUtils ../../webgl/RenderingContext ../../webgl/FramebufferObject ../../webgl/webgl-utils ../../webgl/Program ../../webgl/VertexArrayObject ../../webgl/BufferObject ./webgl/painter/WGLPainter ./Container ./webgl/shaders/glShaderSnippets".split(" "),
function(A,t,f,a,d,h,p,m,l,q,r,v,x,y,C,E,D,F){function H(a){return{budget:a.budget,state:a.state,devicePixelRatio:a.devicePixelRatio,stationary:a.stationary}}var K={png:"image/png",jpg:"image/jpeg",jpeg:"image/jpeg"};return function(w){function t(){var a=null!==w&&w.apply(this,arguments)||this;a._clipData=new Float32Array(8);a._upperLeft=d.create();a._upperRight=d.create();a._lowerLeft=d.create();a._lowerRight=d.create();a._mat2=h.create();a._clipRendererInitialized=!1;return a}f(t,w);Object.defineProperty(t.prototype,
"glPainter",{get:function(){return this._painter},enumerable:!0,configurable:!0});t.prototype.createElement=function(){var a=document.createElement("canvas");a.setAttribute("class","esri-display-object");return a};t.prototype.setElement=function(a){this.element=a};t.prototype.attach=function(a){if(this.attached)return!0;this._resizeCanvas(a);var d=v.setupWebGL(this.element,{alpha:!0,antialias:!1,depth:!0,stencil:!0});this._renderingContext=new q(d[0]);this.attached=!0;this._cachedRenderParams=H(a);
this._painter||(this._painter=new E,this._painter.initialize(this._renderingContext));return w.prototype.attach.call(this,a)};t.prototype.detach=function(a){w.prototype.detach.call(this,a);this._renderingContext&&(this._renderingContext.dispose(),this._renderingContext=null);this._cachedRenderParams=null};t.prototype.beforeRenderChildren=function(f,l){var m=f.state,p=this._painter;if(p)if(l=this._renderingContext,l.enforceState(),p.update(m,f.devicePixelRatio),m.spatialReference&&(m.spatialReference._isWrappable?
m.spatialReference._isWrappable():m.spatialReference.isWrappable)){var q=m.width,p=m.height,v=m.rotation,q=Math.round(q*f.devicePixelRatio),p=Math.round(p*f.devicePixelRatio),x=a.toRadian(v),y=Math.abs(Math.cos(x)),w=Math.abs(Math.sin(x)),t=Math.round(m.worldScreenWidth);if(Math.round(q*y+p*w)<=t)this._clipFrame=!1;else{this._clipFBO&&this._clipFBO.width===q&&this._clipFBO.height===p||(this._clipFBO=new r(l,{colorTarget:0,depthStencilTarget:3,width:q,height:p}));var C=.5*q,g=.5*p,m=1/q,D=1/p;f=.5*
t*f.devicePixelRatio;var E=.5*(q*w+p*y),q=this._upperLeft,y=this._upperRight,w=this._lowerLeft,t=this._lowerRight;d.set(q,-f,-E);d.set(y,f,-E);d.set(w,-f,E);d.set(t,f,E);h.identity(this._mat2);h.translate(this._mat2,this._mat2,[C,g]);0!==v&&h.rotate(this._mat2,this._mat2,x);d.transformMat2d(q,q,this._mat2);d.transformMat2d(y,y,this._mat2);d.transformMat2d(w,w,this._mat2);d.transformMat2d(t,t,this._mat2);v=this._clipData;v.set([2*w[0]*m-1,2*(p-w[1])*D-1,2*t[0]*m-1,2*(p-t[1])*D-1,2*q[0]*m-1,2*(p-q[1])*
D-1,2*y[0]*m-1,2*(p-y[1])*D-1]);this._clipRendererInitialized||this._initializeClipRenderer(l);this._clipVBO.setData(v);this._boundFBO=l.getBoundFramebufferObject();l.bindFramebuffer(this._clipFBO);l.setDepthWriteEnabled(!0);l.setStencilWriteMask(255);l.setClearColor(0,0,0,0);l.setClearDepth(1);l.setClearStencil(0);l.clear(l.gl.COLOR_BUFFER_BIT|l.gl.DEPTH_BUFFER_BIT|l.gl.STENCIL_BUFFER_BIT);l.setDepthWriteEnabled(!1);this._clipFrame=!0}}else this._clipFrame=!1};t.prototype.afterRenderChildren=function(a,
d){this._clipFrame&&this._clipRendererInitialized&&(a=this._renderingContext,a.bindFramebuffer(this._boundFBO),this._boundFBO=null,a.bindVAO(this._clipVAO),a.bindProgram(this._clipStencilProgram),a.setDepthWriteEnabled(!1),a.setDepthTestEnabled(!1),a.setStencilTestEnabled(!0),a.setBlendingEnabled(!1),a.setColorMask(!1,!1,!1,!1),a.setStencilOp(7680,7680,7681),a.setStencilWriteMask(255),a.setStencilFunction(519,1,255),a.drawElements(4,6,5123,0),a.bindVAO(),a.setColorMask(!0,!0,!0,!0),a.setBlendingEnabled(!0),
a.setStencilFunction(514,1,255),this._blitRenderer.render(a,this._clipFBO.colorTexture,9728,1),a.setStencilTestEnabled(!1))};t.prototype.doRender=function(a){var d=this.element.style;this.visible?(d.display="block",d.opacity=""+this.opacity,this._resizeCanvas(a),w.prototype.doRender.call(this,a),this._cachedRenderParams=H(a)):d.display="none"};t.prototype.takeScreenshot=function(a){void 0===a&&(a={});var d=a.pixelRatio||1;this._cachedRenderParams.devicePixelRatio=d;var f=Math.round(d*this._cachedRenderParams.state.width),
h=Math.round(d*this._cachedRenderParams.state.height),p=0,q=0,v=f,x=h,y=f,w=h;if(y=a.area)p=Math.round(d*y.x),q=Math.round(d*y.y),v=Math.round(d*y.width),x=Math.round(d*y.height);void 0!==a.width&&void 0!==a.height?(y=a.width/a.height,x*y<v?(y*=x,p+=Math.floor((v-y)/2),v=Math.floor(y)):(y=v/y,q+=Math.floor((x-y)/2),x=Math.floor(y)),y=a.width,w=a.height):(y=v,w=x);d=document.createElement("canvas");d.width=y;d.height=w;var t=d.getContext("2d"),g=new Uint8Array(v*x*4),C=this._renderingContext,D=r.create(C,
{colorTarget:1,depthStencilTarget:3,width:f,height:h});C.bindFramebuffer(D);C.setViewport(0,0,f,h);this._cachedRenderParams.budget&&this._cachedRenderParams.budget.reset(Number.MAX_VALUE);var c=this._cachedRenderParams,b=this._renderingContext.gl;this._renderingContext.setClearColor(0,0,0,0);this._renderingContext.setClearDepth(1);this._renderingContext.setClearStencil(0);this._renderingContext.clear(b.COLOR_BUFFER_BIT|b.DEPTH_BUFFER_BIT|b.STENCIL_BUFFER_BIT);c.context=this._renderingContext;this.beforeRenderChildren(c,
c);if(void 0!==a.rotation&&null!==a.rotation){var b=c.state,e=b.clone();e.viewpoint.rotation=a.rotation;c.state=e;this.renderChildren(c);c.state=b}else this.renderChildren(c);this.afterRenderChildren(c,c);D.readPixels(p,h-(q+x),v,x,6408,5121,g);C.bindFramebuffer();C=t.getImageData(0,0,y,w);if(0!==p||0!==q||v!==f||x!==h||y!==f||w!==h)m.resampleHermite(g,v,x,C.data,y,w,!0);else{q=x-1;x=0;D=4*v;for(e=b=p=h=f=v=c=void 0;x<q;){b=x*D;e=q*D;for(c=0;c<D;c+=4)v=g[b+c],f=g[b+c+1],h=g[b+c+2],p=g[b+c+3],g[b+
c]=g[e+c],g[b+c+1]=g[e+c+1],g[b+c+2]=g[e+c+2],g[b+c+3]=g[e+c+3],g[e+c]=v,g[e+c+1]=f,g[e+c+2]=h,g[e+c+3]=p;x++;q--}v=C.data;f=g.length;for(q=0;q<f;q++)v[q]=g[q]}g=C.data;x=g.length;for(q=0;q<x;q+=4)p=g[q+3],0<p&&(h=p/255,v=Math.floor(g[q+0]/h),f=Math.floor(g[q+1]/h),h=Math.floor(g[q+2]/h),g[q+0]=255>=v?v:255,g[q+1]=255>=f?f:255,g[q+2]=255>=h?h:255);t.putImageData(C,0,0);t=K[a.format?a.format.toLowerCase():"png"];g=1;void 0!==a.quality&&(g=a.quality/100);a=d.toDataURL(t,g);return l.resolve({dataURL:a,
x:0,y:0,width:y,height:w})};t.prototype.prepareChildrenRenderParameters=function(a){if(!this.attached||!this._renderingContext)return null;a=H(a);var d=this._renderingContext,f=d.gl;d.setDepthWriteEnabled(!0);d.setStencilWriteMask(255);d.setClearColor(0,0,0,0);d.setClearDepth(1);d.setClearStencil(0);d.clear(f.COLOR_BUFFER_BIT|f.DEPTH_BUFFER_BIT|f.STENCIL_BUFFER_BIT);d.setViewport(0,0,this.element.width,this.element.height);d.setDepthWriteEnabled(!1);a.context=d;return a};t.prototype.attachChild=function(a,
d){return a.attach(d)};t.prototype.detachChild=function(a,d){return a.detach(d)};t.prototype.renderChild=function(a,d){return a.processRender(d)};t.prototype._resizeCanvas=function(a){var d=this.element,f=d.style,h=a.state,l=a.devicePixelRatio;a=Math.round(h.width*l);l=Math.round(h.height*l);if(d.width!==a||d.height!==l)d.width=a,d.height=l;f.width=h.width+"px";f.height=h.height+"px"};t.prototype._initializeClipRenderer=function(a){if(this._clipRendererInitialized)return!0;this._blitRenderer=new p;
var d={a_pos:0},f=new x(a,F.stencilVS,F.stencilFS,d);if(!f)return!1;var h=C.createVertex(a,35040,32),l=new Uint16Array([0,1,2,2,1,3]),l=C.createIndex(a,35044,l);a=new y(a,d,{geometry:[{name:"a_pos",count:2,type:5126,offset:0,stride:8,normalized:!1,divisor:0}]},{geometry:h},l);this._clipStencilProgram=f;this._clipVBO=h;this._clipVAO=a;return this._clipRendererInitialized=!0};return t}(D)})},"esri/views/2d/engine/webgl/BitBlitRenderer":function(){define("require exports ../../../webgl/Program ../../../webgl/VertexArrayObject ../../../webgl/BufferObject ./shaders/glShaderSnippets".split(" "),
function(A,t,f,a,d,h){return function(){function p(){this._initialized=!1}p.prototype.render=function(a,d,f,h){a&&(this._initialized||this._initialize(a),a.setBlendFunctionSeparate(1,771,1,771),a.bindVAO(this._vertexArrayObject),a.bindProgram(this._program),d.setSamplingMode(f),a.bindTexture(d,0),this._program.setUniform1i("u_tex",0),this._program.setUniform1f("u_opacity",h),a.drawArrays(5,0,4),a.bindVAO())};p.prototype._initialize=function(m){if(this._initialized)return!0;var l={a_pos:0,a_tex:1},
p=new f(m,h.bitblitVS,h.bitblitFS,l);if(!p)return!1;var r=new Int8Array(16);r[0]=-1;r[1]=-1;r[2]=0;r[3]=0;r[4]=1;r[5]=-1;r[6]=1;r[7]=0;r[8]=-1;r[9]=1;r[10]=0;r[11]=1;r[12]=1;r[13]=1;r[14]=1;r[15]=1;m=new a(m,l,{geometry:[{name:"a_pos",count:2,type:5120,offset:0,stride:4,normalized:!1,divisor:0},{name:"a_tex",count:2,type:5120,offset:2,stride:4,normalized:!1,divisor:0}]},{geometry:d.createVertex(m,35044,r)});this._program=p;this._vertexArrayObject=m;return this._initialized=!0};return p}()})},"esri/views/webgl/Program":function(){define(["require",
"exports","dojo/has"],function(A,t,f){return function(){function a(d,f,p,m,l){void 0===l&&(l={});this._glName=this._context=null;this._locations={};this._id=void 0;this._initialized=!1;this._fShader=this._vShader=null;this._defines={};this._nameToUniformLocation={};this._nameToAttribLocation={};this._nameToUniform1={};this._nameToUniform2={};this._nameToUniform3={};this._nameToUniform4={};this._nameToUniformMatrix3={};this._nameToUniformMatrix4={};d||console.error("RenderingContext isn't initialized!");
0===f.length&&console.error("Shaders source should not be empty!");this._context=d;this._vertexShaderSource=f;this._fragmentShaderSource=p;if(Array.isArray(l))for(d=0;d<l.length;d++)this._defines[l[d]]="1";else this._defines=l;this._id=a._nextId++;this._locations=m}Object.defineProperty(a.prototype,"id",{get:function(){return this._id},enumerable:!0,configurable:!0});Object.defineProperty(a.prototype,"glName",{get:function(){return this._glName},enumerable:!0,configurable:!0});Object.defineProperty(a.prototype,
"locations",{get:function(){return this._locations},enumerable:!0,configurable:!0});a.prototype.getDefine=function(a){return this._defines[a]};a.prototype.dispose=function(){if(this._context){var a=this._context.gl;this._vShader&&(a.deleteShader(this._vShader),this._vShader=null);this._fShader&&(a.deleteShader(this._fShader),this._fShader=null);this._glName&&(a.deleteProgram(this._glName),this._glName=null);this._context=null}};a.prototype.initialize=function(){if(!this._initialized){this._vShader=
this._loadShader(35633);this._fShader=this._loadShader(35632);this._vShader&&this._fShader||console.error("Error loading shaders!");var a=this._context.gl,f=a.createProgram();a.attachShader(f,this._vShader);a.attachShader(f,this._fShader);for(var p in this._locations)a.bindAttribLocation(f,this._locations[p],p);a.linkProgram(f);a.getProgramParameter(f,a.LINK_STATUS)||console.error("Could not initialize shader\nVALIDATE_STATUS: "+a.getProgramParameter(f,a.VALIDATE_STATUS)+", gl error ["+a.getError()+
"]infoLog: "+a.getProgramInfoLog(f));this._glName=f;this._initialized=!0}};a.prototype.getUniformLocation=function(a){this.initialize();void 0===this._nameToUniformLocation[a]&&(this._nameToUniformLocation[a]=this._context.gl.getUniformLocation(this._glName,a));return this._nameToUniformLocation[a]};a.prototype.hasUniform=function(a){return null!==this.getUniformLocation(a)};a.prototype.getAttribLocation=function(a){this.initialize();void 0===this._nameToAttribLocation[a]&&(this._nameToAttribLocation[a]=
this._context.gl.getAttribLocation(this._glName,a));return this._nameToAttribLocation[a]};a.prototype.setUniform1i=function(a,f){var d=this._nameToUniform1[a];if(void 0===d||f!==d)this._context.bindProgram(this),this._context.gl.uniform1i(this.getUniformLocation(a),f),this._nameToUniform1[a]=f};a.prototype.setUniform1f=function(a,f){var d=this._nameToUniform1[a];if(void 0===d||f!==d)this._context.bindProgram(this),this._context.gl.uniform1f(this.getUniformLocation(a),f),this._nameToUniform1[a]=f};
a.prototype.setUniform1fv=function(d,f){var h=this._nameToUniform2[d];void 0!==h&&a._arraysEqual(f,h)||(this._context.bindProgram(this),this._context.gl.uniform1fv(this.getUniformLocation(d),f),void 0===h?this._nameToUniform2[d]=new Float32Array(f):h.set(f))};a.prototype.setUniform2f=function(a,f,p){var d=this._nameToUniform2[a];if(void 0===d||f!==d[0]||p!==d[1])this._context.bindProgram(this),this._context.gl.uniform2f(this.getUniformLocation(a),f,p),void 0===d?this._nameToUniform2[a]=new Float32Array([f,
p]):(d[0]=f,d[1]=p)};a.prototype.setUniform2fv=function(d,f){var h=this._nameToUniform2[d];void 0!==h&&a._arraysEqual(f,h)||(this._context.bindProgram(this),this._context.gl.uniform2fv(this.getUniformLocation(d),f),void 0===h?this._nameToUniform2[d]=new Float32Array(f):h.set(f))};a.prototype.setUniform3f=function(a,f,p,m){var d=this._nameToUniform3[a];if(void 0===d||f!==d[0]||p!==d[1]||m!==d[2])this._context.bindProgram(this),this._context.gl.uniform3f(this.getUniformLocation(a),f,p,m),void 0===d?
this._nameToUniform3[a]=new Float32Array([f,p,m]):(d[0]=f,d[1]=p,d[2]=m)};a.prototype.setUniform3fv=function(d,f){var h=this._nameToUniform3[d];void 0!==h&&a._arraysEqual(f,h)||(this._context.bindProgram(this),this._context.gl.uniform3fv(this.getUniformLocation(d),f),void 0===h?this._nameToUniform3[d]=new Float32Array(f):h.set(f))};a.prototype.setUniform4f=function(a,f,p,m,l){var d=this._nameToUniform4[a];if(void 0===d||f!==d[0]||p!==d[1]||m!==d[2]||l!==d[3])this._context.bindProgram(this),this._context.gl.uniform4f(this.getUniformLocation(a),
f,p,m,l),void 0===d?this._nameToUniform4[a]=new Float32Array([f,p,m,l]):(d[0]=f,d[1]=p,d[2]=m,d[3]=l)};a.prototype.setUniform4fv=function(d,f){var h=this._nameToUniform4[d];void 0!==h&&a._arraysEqual(f,h)||(this._context.bindProgram(this),this._context.gl.uniform4fv(this.getUniformLocation(d),f),void 0===h?this._nameToUniform4[d]=new Float32Array(f):h.set(f))};a.prototype.setUniformMatrix3fv=function(d,f,p){void 0===p&&(p=!1);var h=this._nameToUniformMatrix3[d];void 0!==h&&(9===h.length?a._matrix3Equal(h,
f):a._arraysEqual(f,h))||(this._context.bindProgram(this),this._context.gl.uniformMatrix3fv(this.getUniformLocation(d),p,f),void 0===h?this._nameToUniformMatrix3[d]=new Float32Array(f):h.set(f))};a.prototype.setUniformMatrix4fv=function(d,f,p){void 0===p&&(p=!1);var h=this._nameToUniformMatrix4[d];void 0!==h&&(16===h.length?a._matrix4Equal(h,f):a._arraysEqual(f,h))||(this._context.bindProgram(this),this._context.gl.uniformMatrix4fv(this.getUniformLocation(d),p,f),void 0===h?this._nameToUniformMatrix4[d]=
new Float32Array(f):h.set(f))};a._padToThree=function(a){var d=a.toString();1E3>a&&(d=("  "+a).slice(-3));return d};a.prototype._addLineNumbers=function(d){var f=2;return d.replace(/\n/g,function(){return"\n"+a._padToThree(f++)+":"})};a.prototype._loadShader=function(a){var d=35633===a?this._vertexShaderSource:this._fragmentShaderSource,f="",m;for(m in this._defines)f+="#define "+m+" "+this._defines[m]+"\n";d=f+d;f=this._context.gl;a=f.createShader(a);f.shaderSource(a,d);f.compileShader(a);f.getShaderParameter(a,
f.COMPILE_STATUS)||(console.error(f.getShaderInfoLog(a)),console.error(this._addLineNumbers(d)));return a};a._matrix4Equal=function(a,f){return a[0]===f[0]&&a[1]===f[1]&&a[2]===f[2]&&a[3]===f[3]&&a[4]===f[4]&&a[5]===f[5]&&a[6]===f[6]&&a[7]===f[7]&&a[8]===f[8]&&a[9]===f[9]&&a[10]===f[10]&&a[11]===f[11]&&a[12]===f[12]&&a[13]===f[13]&&a[14]===f[14]&&a[15]===f[15]};a._matrix3Equal=function(a,f){return a[0]===f[0]&&a[1]===f[1]&&a[2]===f[2]&&a[3]===f[3]&&a[4]===f[4]&&a[5]===f[5]&&a[6]===f[6]&&a[7]===f[7]&&
a[8]===f[8]};a._arraysEqual=function(a,f){if(a.length!==f.length)return!1;for(var d=0;d<a.length;++d)if(a[d]!==f[d])return!1;return!0};a._nextId=0;return a}()})},"esri/views/webgl/VertexArrayObject":function(){define(["require","exports"],function(A,t){return function(){function f(a,d,h,p,m){this._locations=this._layout=this._glName=this._context=null;this._indexBuffer=this._buffers=void 0;this._initialized=!1;this._context=a;this._layout=h;this._buffers=p;this._locations=d;m&&(this._indexBuffer=
m);this._id=f._nextId++}Object.defineProperty(f.prototype,"id",{get:function(){return this._id},enumerable:!0,configurable:!0});Object.defineProperty(f.prototype,"glName",{get:function(){return this._glName},enumerable:!0,configurable:!0});Object.defineProperty(f.prototype,"vertexBuffers",{get:function(){return this._buffers},enumerable:!0,configurable:!0});Object.defineProperty(f.prototype,"indexBuffer",{get:function(){return this._indexBuffer},enumerable:!0,configurable:!0});Object.defineProperty(f.prototype,
"layout",{get:function(){return this._layout},enumerable:!0,configurable:!0});Object.defineProperty(f.prototype,"locations",{get:function(){return this._locations},enumerable:!0,configurable:!0});f.prototype.dispose=function(a){void 0===a&&(a=!0);if(this._context){var d=this._context.extensions.vao;d&&this._glName&&(d.deleteVertexArrayOES(this._glName),this._glName=null);this._context.getBoundVAO()===this&&this._context.bindVAO(null);if(a){for(var f in this._buffers)this._buffers[f].dispose(),delete this._buffers[f];
this._indexBuffer&&(this._indexBuffer.dispose(),this._indexBuffer=null)}this._context=null}};f.prototype.initialize=function(){if(!this._initialized){var a=this._context.extensions.vao;if(a){var d=a.createVertexArrayOES();a.bindVertexArrayOES(d);this._bindLayout();a.bindVertexArrayOES(null);this._glName=d}this._initialized=!0}};f.prototype.bind=function(){this.initialize();var a=this._context.extensions.vao;a?a.bindVertexArrayOES(this.glName):(this._context.bindVAO(null),this._bindLayout())};f.prototype._bindLayout=
function(){var a=this._buffers,d=this._context.extensions.vao,f=this._layout,p=this._indexBuffer;a||console.error("Vertex buffer dictionary is empty!");var m=this._context.gl,l,q,r=0,v;for(v in a)for((l=a[v])||console.error("Vertex buffer is uninitialized!"),(q=f[v])||console.error("Vertex element descriptor is empty!"),this._context.bindBuffer(l),r=0;r<q.length;++r){l=q[r];var x=this._locations[l.name],y=l.baseInstance?l.baseInstance*l.stride:0;void 0===x&&console.error("There is no location for vertex attribute '"+
l.name+"' defined.");l.baseInstance&&!l.divisor&&console.error("Vertex attribute '"+l.name+"' uses baseInstanceOffset without divisor.");if(4>=l.count){if(m.enableVertexAttribArray(x),m.vertexAttribPointer(x,l.count,l.type,l.normalized,l.stride,l.offset+y),l.divisor&&0<l.divisor){var t=this._context.extensions.angleInstancedArrays;t&&t.vertexAttribDivisorANGLE(x,l.divisor)}}else if(16===l.count&&5126===l.type)for(var E=0;4>E;E++)m.enableVertexAttribArray(x+E),m.vertexAttribPointer(x+E,4,l.type,l.normalized,
l.stride,l.offset+16*E+y),l.divisor&&0<l.divisor&&(t=this._context.extensions.angleInstancedArrays)&&t.vertexAttribDivisorANGLE(x+E,l.divisor);else console.error("Unsupported vertex attribute element count: "+l.count)}p&&(d?m.bindBuffer(m.ELEMENT_ARRAY_BUFFER,p.glName):this._context.bindBuffer(p))};f.prototype.unbind=function(){this.initialize();var a=this._context.extensions.vao;a?a.bindVertexArrayOES(null):this._unbindLayout()};f.prototype._unbindLayout=function(){var a=this._buffers,d=this._layout,
f=this._locations,p=this._context;a||console.error("Vertex buffer dictionary is empty!");var m=p.gl,l,q,r,v=0,x=0,y;for(y in a){(l=a[y])||console.error("Vertex buffer is uninitialized!");q=d[y];v=0;for(x=q.length;v<x;++v)r=q[v],m.disableVertexAttribArray(f[r.name]);p.unbindBuffer(l.bufferType)}(a=this._indexBuffer)&&p.unbindBuffer(a.bufferType)};f._nextId=0;return f}()})},"esri/views/webgl/BufferObject":function(){define(["require","exports"],function(A,t){return function(){function f(a,d,h,p,m){this._glName=
this._context=null;this._bufferType=void 0;this._usage=35044;this._size=-1;this._indexType=void 0;this._context=a;this._bufferType=d;this._usage=h;this._id=f._nextId++;this._glName=this._context.gl.createBuffer();p&&this.setData(p,m)}f.createIndex=function(a,d,h,p){return new f(a,34963,d,h,p)};f.createVertex=function(a,d,h){return new f(a,34962,d,h)};Object.defineProperty(f.prototype,"id",{get:function(){return this._id},enumerable:!0,configurable:!0});Object.defineProperty(f.prototype,"glName",{get:function(){return this._glName},
enumerable:!0,configurable:!0});Object.defineProperty(f.prototype,"size",{get:function(){return this._size},enumerable:!0,configurable:!0});Object.defineProperty(f.prototype,"usage",{get:function(){return this._usage},enumerable:!0,configurable:!0});Object.defineProperty(f.prototype,"bufferType",{get:function(){return this._bufferType},enumerable:!0,configurable:!0});Object.defineProperty(f.prototype,"indexType",{get:function(){return this._indexType},enumerable:!0,configurable:!0});Object.defineProperty(f.prototype,
"byteSize",{get:function(){return 34962===this._bufferType?this._size:5125===this._indexType?4*this._size:2*this._size},enumerable:!0,configurable:!0});f.prototype.dispose=function(){this._context&&(this._glName&&(this._context.gl.deleteBuffer(this._glName),this._glName=null),this._context=null)};f.prototype.setData=function(a,d){if(a){if("number"===typeof a){if(0>a&&console.error("Buffer size cannot be negative!"),34963===this._bufferType&&d)switch(this._indexType=d,this._size=a,d){case 5123:a*=
2;break;case 5125:a*=4}}else d=a.byteLength,a instanceof Uint16Array&&(d/=2,this._indexType=5123),a instanceof Uint32Array&&(d/=4,this._indexType=5125),this._size=d;d=this._context.getBoundVAO();this._context.bindVAO(null);this._context.bindBuffer(this);this._context.gl.bufferData(this._bufferType,a,this._usage);this._context.bindVAO(d)}};f.prototype.setSubData=function(a,d,f,p){void 0===d&&(d=0);void 0===f&&(f=0);if(a){(0>d||d>=this._size)&&console.error("offset is out of range!");var h=d,l=f,q=
p,r=a.byteLength;a instanceof Uint16Array&&(r/=2,h*=2,l*=2,q*=2);a instanceof Uint32Array&&(r/=4,h*=4,l*=4,q*=4);void 0===p&&(p=r-1);f>=p&&console.error("end must be bigger than start!");d+f-p>this._size&&console.error("An attempt to write beyond the end of the buffer!");d=this._context.getBoundVAO();this._context.bindVAO(null);this._context.bindBuffer(this);this._context.gl.bufferSubData(this._bufferType,h,(a instanceof ArrayBuffer?a:a.buffer).slice(l,q));this._context.bindVAO(d)}};f._nextId=0;return f}()})},
"esri/views/2d/engine/webgl/shaders/glShaderSnippets":function(){define("require exports ../../../../webgl/ShaderSnippets dojo/text!./bitblit.vs.glsl dojo/text!./bitblit.fs.glsl dojo/text!./stencil.vs.glsl dojo/text!./stencil.fs.glsl dojo/text!./background.vs.glsl dojo/text!./background.fs.glsl dojo/text!./tileInfo.vs.glsl dojo/text!./tileInfo.fs.glsl".split(" "),function(A,t,f,a,d,h,p,m,l,q,r){function v(a,d){x+='\x3csnippet name\x3d"'+a+'"\x3e\x3c![CDATA[';x+=d;x+="]]\x3e\x3c/snippet\x3e"}var x=
"",x=x+'\x3c?xml version\x3d"1.0" encoding\x3d"UTF-8"?\x3e',x=x+"\x3csnippets\x3e";v("bitblitVS",a);v("bitblitFS",d);v("stencilVS",h);v("stencilFS",p);v("backgroundVS",m);v("backgroundFS",l);v("tileInfoVS",q);v("tileInfoFS",r);x+="\x3c/snippets\x3e";A=new f;f.parse(x,A);return A})},"esri/views/webgl/ShaderSnippets":function(){define(["require","exports","dojox/xml/parser"],function(A,t,f){return function(){function a(a){if(a)for(var d in a)this[d]=a[d]}a.parse=function(a,h){a=f.parse(a).getElementsByTagName("snippet");
for(var d=/\$[a-zA-Z][a-zA-Z0-9]*(?:\([^\(\)]*\))?[ \t]*/,m=/[\$\s]+/g,l=/\(([^\(\)]*)\)/,q=0;q<a.length;q++){for(var r=a[q].getAttribute("name"),v=a[q].textContent;;){var x=v.match(d);if(null==x)break;var y=x[0].replace(m,""),t=y.match(l),E=void 0;t&&(E=t[1].split(",").map(function(a){return a.trim()}));y=y.replace(l,"");E=h._instantiate(y,E);v=v.replace(x[0],E)}h[r]=v}};a.prototype._instantiate=function(a,f){a=this[a];for(f||(f=[]);;){var d=a.match(/\$(\d+)/);if(null==d)break;var h=parseInt(d[1],
10);a=a.replace(d[0],f[h])}return a};return a}()})},"dojox/xml/parser":function(){define(["dojo/_base/kernel","dojo/_base/lang","dojo/_base/array","dojo/_base/window","dojo/_base/sniff"],function(A){A.getObject("xml.parser",!0,dojox);dojox.xml.parser.parse=function(t,f){var a=A.doc,d;f=f||"text/xml";if(t&&A.trim(t)&&"DOMParser"in A.global){d=(new DOMParser).parseFromString(t,f);t=d.documentElement;if("parsererror"==t.nodeName&&"http://www.mozilla.org/newlayout/xml/parsererror.xml"==t.namespaceURI){if(a=
t.getElementsByTagNameNS("http://www.mozilla.org/newlayout/xml/parsererror.xml","sourcetext")[0])a=a.firstChild.data;throw Error("Error parsing text "+t.firstChild.data+" \n"+a);}return d}if("ActiveXObject"in A.global){a=function(a){return"MSXML"+a+".DOMDocument"};a=["Microsoft.XMLDOM",a(6),a(4),a(3),a(2)];A.some(a,function(a){try{d=new ActiveXObject(a)}catch(m){return!1}return!0});if(t&&d&&(d.async=!1,d.loadXML(t),t=d.parseError,0!==t.errorCode))throw Error("Line: "+t.line+"\nCol: "+t.linepos+"\nReason: "+
t.reason+"\nError Code: "+t.errorCode+"\nSource: "+t.srcText);if(d)return d}else if(a.implementation&&a.implementation.createDocument){if(t&&A.trim(t)&&a.createElement){f=a.createElement("xml");f.innerHTML=t;var h=a.implementation.createDocument("foo","",null);A.forEach(f.childNodes,function(a){h.importNode(a,!0)});return h}return a.implementation.createDocument("","",null)}return null};dojox.xml.parser.textContent=function(t,f){if(1<arguments.length)return dojox.xml.parser.replaceChildren(t,(t.ownerDocument||
A.doc).createTextNode(f)),f;if(void 0!==t.textContent)return t.textContent;var a="";t&&A.forEach(t.childNodes,function(d){switch(d.nodeType){case 1:case 5:a+=dojox.xml.parser.textContent(d);break;case 3:case 2:case 4:a+=d.nodeValue}});return a};dojox.xml.parser.replaceChildren=function(t,f){var a=[];A.isIE&&A.forEach(t.childNodes,function(d){a.push(d)});dojox.xml.parser.removeChildren(t);A.forEach(a,A.destroy);A.isArray(f)?A.forEach(f,function(a){t.appendChild(a)}):t.appendChild(f)};dojox.xml.parser.removeChildren=
function(t){for(var f=t.childNodes.length;t.hasChildNodes();)t.removeChild(t.firstChild);return f};dojox.xml.parser.innerXML=function(t){return t.innerXML?t.innerXML:t.xml?t.xml:"undefined"!=typeof XMLSerializer?(new XMLSerializer).serializeToString(t):null};return dojox.xml.parser})},"esri/views/support/screenshotUtils":function(){define(["require","exports","dojo/_base/lang"],function(A,t,f){Object.defineProperty(t,"__esModule",{value:!0});t.adjustScreenshotSettings=function(a,d){a=f.mixin({format:"png",
quality:100},a||{});var h,p;a.includePadding?(h=d.width,p=d.height):(h=d.width-d.padding.left-d.padding.right,p=d.height-d.padding.top-d.padding.bottom);var m=h/p;void 0!==a.width&&void 0===a.height?a.height=a.width/m:void 0!==a.height&&void 0===a.width&&(a.width=m*a.height);void 0!==a.height&&(a.height=Math.floor(a.height));void 0!==a.width&&(a.width=Math.floor(a.width));a.area||a.includePadding||(a.area={x:d.padding.left,y:d.padding.top,width:h,height:p});return a};t.resampleHermite=function(a,
d,f,p,m,l,q){void 0===q&&(q=!0);var h=d/m;f/=l;for(var v=Math.ceil(h/2),x=Math.ceil(f/2),y=0;y<l;y++)for(var t=0;t<m;t++){for(var E=4*(t+(q?l-y-1:y)*m),D=0,F=0,H=0,A=0,w=0,L=0,J=0,M=(y+.5)*f,S=Math.floor(y*f);S<(y+1)*f;S++)for(var N=Math.abs(M-(S+.5))/x,O=(t+.5)*h,N=N*N,T=Math.floor(t*h);T<(t+1)*h;T++){var R=Math.abs(O-(T+.5))/v,D=Math.sqrt(N+R*R);-1<=D&&1>=D&&(D=2*D*D*D-3*D*D+1,0<D&&(R=4*(T+S*d),J+=D*a[R+3],H+=D,255>a[R+3]&&(D=D*a[R+3]/250),A+=D*a[R],w+=D*a[R+1],L+=D*a[R+2],F+=D))}p[E]=A/F;p[E+1]=
w/F;p[E+2]=L/F;p[E+3]=J/H}}})},"esri/views/webgl/RenderingContext":function(){define(["require","exports","./enums","./Extensions"],function(A,t,f,a){return function(){function d(d,f){this.gl=null;this._extensions=void 0;this._blendEnabled=!1;this._blendColorState={r:0,g:0,b:0,a:0};this._blendFunctionState={srcRGB:1,dstRGB:0,srcAlpha:1,dstAlpha:0};this._blendEquationState={mode:32774,modeAlpha:32774};this._colorMaskState={r:!0,g:!0,b:!0,a:!0};this._polygonCullingEnabled=!1;this._cullFace=1029;this._frontFace=
2305;this._scissorTestEnabled=!1;this._scissorRect={x:0,y:0,width:0,height:0};this._depthTestEnabled=!1;this._depthFunction=513;this._clearDepth=1;this._depthWriteEnabled=!0;this._depthRange={zNear:0,zFar:1};this._viewport=null;this._polygonOffsetFillEnabled=this._stencilTestEnabled=!1;this._polygonOffset=[0,0];this._stencilFunction={face:1032,func:519,ref:0,mask:1};this._clearStencil=0;this._stencilWriteMask=1;this._stencilOperation={face:1032,fail:7680,zFail:7680,zPass:7680};this._lineWidth=1;this._clearColor=
{r:0,g:0,b:0,a:0};this._activeFramebuffer=this._activeIndexBuffer=this._activeVertexBuffer=this._activeShaderProgram=null;this._activeTextureUnit=0;this._textureUnitMap={};this.gl=d;this._extensions=new a(d,f);f=d.getParameter(d.VIEWPORT);this._viewport={x:f[0],y:f[1],width:f[2],height:f[3]};f=this.extensions.textureFilterAnisotropic;this._parameters={versionString:d.getParameter(d.VERSION),maxVertexTextureImageUnits:d.getParameter(d.MAX_VERTEX_TEXTURE_IMAGE_UNITS),maxVertexAttributes:d.getParameter(d.MAX_VERTEX_ATTRIBS),
maxMaxAnisotropy:f?d.getParameter(f.MAX_TEXTURE_MAX_ANISOTROPY_EXT):void 0,maxTextureImageUnits:d.getParameter(d.MAX_TEXTURE_IMAGE_UNITS)};this.enforceState()}Object.defineProperty(d.prototype,"extensions",{get:function(){return this._extensions},enumerable:!0,configurable:!0});Object.defineProperty(d.prototype,"contextAttributes",{get:function(){return this.gl.getContextAttributes()},enumerable:!0,configurable:!0});Object.defineProperty(d.prototype,"parameters",{get:function(){return this._parameters},
enumerable:!0,configurable:!0});d.prototype.dispose=function(){this.bindVAO(null);this.unbindBuffer(34962);this.unbindBuffer(34963);this._textureUnitMap={};this.gl=null};d.prototype.setBlendingEnabled=function(a){this._blendEnabled!==a&&(!0===a?this.gl.enable(this.gl.BLEND):this.gl.disable(this.gl.BLEND),this._blendEnabled=a)};d.prototype.setBlendColor=function(a,d,f,l){if(a!==this._blendColorState.r||d!==this._blendColorState.g||f!==this._blendColorState.b||l!==this._blendColorState.a)this.gl.blendColor(a,
d,f,l),this._blendColorState.r=a,this._blendColorState.g=d,this._blendColorState.b=f,this._blendColorState.a=l};d.prototype.setBlendFunction=function(a,d){if(a!==this._blendFunctionState.srcRGB||d!==this._blendFunctionState.dstRGB)this.gl.blendFunc(a,d),this._blendFunctionState.srcRGB=a,this._blendFunctionState.srcAlpha=a,this._blendFunctionState.dstRGB=d,this._blendFunctionState.dstAlpha=d};d.prototype.setBlendFunctionSeparate=function(a,d,f,l){if(this._blendFunctionState.srcRGB!==a||this._blendFunctionState.srcAlpha!==
f||this._blendFunctionState.dstRGB!==d||this._blendFunctionState.dstAlpha!==l)this.gl.blendFuncSeparate(a,d,f,l),this._blendFunctionState.srcRGB=a,this._blendFunctionState.srcAlpha=f,this._blendFunctionState.dstRGB=d,this._blendFunctionState.dstAlpha=l};d.prototype.setBlendEquation=function(a){this._blendEquationState.mode!==a&&(this.gl.blendEquation(a),this._blendEquationState.mode=a,this._blendEquationState.modeAlpha=a)};d.prototype.setBlendEquationSeparate=function(a,d){if(this._blendEquationState.mode!==
a||this._blendEquationState.modeAlpha!==d)this.gl.blendEquationSeparate(a,d),this._blendEquationState.mode=a,this._blendEquationState.modeAlpha=d};d.prototype.setColorMask=function(a,d,f,l){if(this._colorMaskState.r!==a||this._colorMaskState.g!==d||this._colorMaskState.b!==f||this._colorMaskState.a!==l)this.gl.colorMask(a,d,f,l),this._colorMaskState.r=a,this._colorMaskState.g=d,this._colorMaskState.b=f,this._colorMaskState.a=l};d.prototype.setClearColor=function(a,d,f,l){if(this._clearColor.r!==a||
this._clearColor.g!==d||this._clearColor.b!==f||this._clearColor.a!==l)this.gl.clearColor(a,d,f,l),this._clearColor.r=a,this._clearColor.g=d,this._clearColor.b=f,this._clearColor.a=l};d.prototype.setFaceCullingEnabled=function(a){this._polygonCullingEnabled!==a&&(!0===a?this.gl.enable(this.gl.CULL_FACE):this.gl.disable(this.gl.CULL_FACE),this._polygonCullingEnabled=a)};d.prototype.setPolygonOffsetFillEnabled=function(a){this._polygonOffsetFillEnabled!==a&&(!0===a?this.gl.enable(this.gl.POLYGON_OFFSET_FILL):
this.gl.disable(this.gl.POLYGON_OFFSET_FILL),this._polygonOffsetFillEnabled=a)};d.prototype.setPolygonOffset=function(a,d){if(this._polygonOffset[0]!==a||this._polygonOffset[1]!==d)this._polygonOffset[0]=a,this._polygonOffset[1]=d,this.gl.polygonOffset(a,d)};d.prototype.setCullFace=function(a){this._cullFace!==a&&(this.gl.cullFace(a),this._cullFace=a)};d.prototype.setFrontFace=function(a){this._frontFace!==a&&(this.gl.frontFace(a),this._frontFace=a)};d.prototype.setScissorTestEnabled=function(a){this._scissorTestEnabled!==
a&&(!0===a?this.gl.enable(this.gl.SCISSOR_TEST):this.gl.disable(this.gl.SCISSOR_TEST),this._scissorTestEnabled=a)};d.prototype.setScissorRect=function(a,d,f,l){if(this._scissorRect.x!==a||this._scissorRect.y!==d||this._scissorRect.width!==f||this._scissorRect.height!==l)this.gl.scissor(a,d,f,l),this._scissorRect.x=a,this._scissorRect.y=d,this._scissorRect.width=f,this._scissorRect.height=l};d.prototype.setDepthTestEnabled=function(a){this._depthTestEnabled!==a&&(!0===a?this.gl.enable(this.gl.DEPTH_TEST):
this.gl.disable(this.gl.DEPTH_TEST),this._depthTestEnabled=a)};d.prototype.setClearDepth=function(a){this._clearDepth!==a&&(this.gl.clearDepth(a),this._clearDepth=a)};d.prototype.setDepthFunction=function(a){this._depthFunction!==a&&(this.gl.depthFunc(a),this._depthFunction=a)};d.prototype.setDepthWriteEnabled=function(a){this._depthWriteEnabled!==a&&(this.gl.depthMask(a),this._depthWriteEnabled=a)};d.prototype.setDepthRange=function(a,d){if(this._depthRange.zNear!==a||this._depthRange.zFar!==d)this.gl.depthRange(a,
d),this._depthRange.zNear=a,this._depthRange.zFar=d};d.prototype.setStencilTestEnabled=function(a){this._stencilTestEnabled!==a&&(!0===a?this.gl.enable(this.gl.STENCIL_TEST):this.gl.disable(this.gl.STENCIL_TEST),this._stencilTestEnabled=a)};d.prototype.setClearStencil=function(a){a!==this._clearStencil&&(this.gl.clearStencil(a),this._clearStencil=a)};d.prototype.setStencilFunction=function(a,d,f){if(this._stencilFunction.func!==a||this._stencilFunction.ref!==d||this._stencilFunction.mask!==f)this.gl.stencilFunc(a,
d,f),this._stencilFunction.face=1032,this._stencilFunction.func=a,this._stencilFunction.ref=d,this._stencilFunction.mask=f};d.prototype.setStencilFunctionSeparate=function(a,d,f,l){if(this._stencilFunction.face!==a||this._stencilFunction.func!==d||this._stencilFunction.ref!==f||this._stencilFunction.mask!==l)this.gl.stencilFuncSeparate(a,d,f,l),this._stencilFunction.face=a,this._stencilFunction.func=d,this._stencilFunction.ref=f,this._stencilFunction.mask=l};d.prototype.setStencilWriteMask=function(a){this._stencilWriteMask!==
a&&(this.gl.stencilMask(a),this._stencilWriteMask=a)};d.prototype.setStencilOp=function(a,d,f){if(this._stencilOperation.fail!==a||this._stencilOperation.zFail!==d||this._stencilOperation.zPass!==f)this.gl.stencilOp(a,d,f),this._stencilOperation.face=1032,this._stencilOperation.fail=a,this._stencilOperation.zFail=d,this._stencilOperation.zPass=f};d.prototype.setStencilOpSeparate=function(a,d,f,l){if(this._stencilOperation.face!==a||this._stencilOperation.fail!==d||this._stencilOperation.zFail!==f||
this._stencilOperation.zPass!==l)this.gl.stencilOpSeparate(a,d,f,l),this._stencilOperation.face=a,this._stencilOperation.face=a,this._stencilOperation.fail=d,this._stencilOperation.zFail=f,this._stencilOperation.zPass=l};d.prototype.setLineWidth=function(a){var d=this._lineWidth;this._lineWidth!==a&&(this.gl.lineWidth(a),this._lineWidth=a);return d};d.prototype.setActiveTexture=function(a){var d=this._activeTextureUnit;0<=a&&a!==this._activeTextureUnit&&(this.gl.activeTexture(f.BASE_TEXTURE_UNIT+
a),this._activeTextureUnit=a);return d};d.prototype.clear=function(a){a&&this.gl.clear(a)};d.prototype.drawArrays=function(a,d,f){this.gl.drawArrays(a,d,f)};d.prototype.drawElements=function(a,d,f,l){5123===f?this.gl.drawElements(a,d,f,l):5125===f&&this._extensions.elementIndexUint?this.gl.drawElements(a,d,f,l):console.warn("Data type is uint however extension OES_Element_index_unit is not supported therefore this draw call cannot be made")};d.prototype.drawArraysInstanced=function(a,d,f,l){this._extensions.angleInstancedArrays?
this._extensions.angleInstancedArrays.drawArraysInstancedANGLE(a,d,f,l):console.error("Extension ANGLE_instanced_arrays isn't supported!")};d.prototype.drawElementsInstanced=function(a,d,f,l,q){this._extensions.angleInstancedArrays?5125!==f||this._extensions.elementIndexUint?this._extensions.angleInstancedArrays.drawElementsInstancedANGLE(a,d,f,l,q):console.error("Extension OES_Element_index_unit is not supported!"):console.error("Extension ANGLE_instanced_arrays isn't supported!")};d.prototype.setViewport=
function(a,d,f,l){var h=this._viewport;if(h.x!==a||h.y!==d||h.width!==f||h.height!==l)h.x=a,h.y=d,h.width=f,h.height=l,this.gl.viewport(a,d,f,l)};d.prototype.getViewport=function(){return{x:this._viewport.x,y:this._viewport.y,width:this._viewport.width,height:this._viewport.height}};d.prototype.bindProgram=function(a){a?this._activeShaderProgram!==a&&(a.initialize(),this.gl.useProgram(a.glName),this._activeShaderProgram=a):(this.gl.useProgram(null),this._activeShaderProgram=null)};d.prototype.bindTexture=
function(a,f){void 0===f&&(f=0);-1===d._MAX_TEXTURE_IMAGE_UNITS&&(d._MAX_TEXTURE_IMAGE_UNITS=this.gl.getParameter(this.gl.MAX_TEXTURE_IMAGE_UNITS));(f>=d._MAX_TEXTURE_IMAGE_UNITS||0>f)&&console.error("Input texture unit is out of range of available units!");var h=this._textureUnitMap[f];this.setActiveTexture(f);null==a||null==a.glName?(null!=h&&(this.gl.bindTexture(h.descriptor.target,null),h.setBoundToUnit(f,!1)),this._textureUnitMap[f]=null):h&&h.id===a.id?a.applyChanges():(this.gl.bindTexture(a.descriptor.target,
a.glName),a.setBoundToUnit(f,!0),a.applyChanges(),this._textureUnitMap[f]=a)};d.prototype.bindFramebuffer=function(a){a?this._activeFramebuffer!==a&&(a.initialize()||this.gl.bindFramebuffer(this.gl.FRAMEBUFFER,a.glName),this._activeFramebuffer=a):(this.gl.bindFramebuffer(this.gl.FRAMEBUFFER,null),this._activeFramebuffer=null)};d.prototype.bindBuffer=function(a){a&&(34962===a.bufferType?this._activeVertexBuffer=d._bindBuffer(this.gl,a,a.bufferType,this._activeVertexBuffer):this._activeIndexBuffer=
d._bindBuffer(this.gl,a,a.bufferType,this._activeIndexBuffer))};d.prototype.unbindBuffer=function(a){34962===a?this._activeVertexBuffer=d._bindBuffer(this.gl,null,a,this._activeVertexBuffer):this._activeIndexBuffer=d._bindBuffer(this.gl,null,a,this._activeIndexBuffer)};d.prototype.bindVAO=function(a){a?this._activeVertexArrayObject&&this._activeVertexArrayObject.id===a.id||(a.bind(),this._activeVertexArrayObject=a):this._activeVertexArrayObject&&(this._activeVertexArrayObject.unbind(),this._activeVertexArrayObject=
null)};d.prototype.getBoundTexture=function(a){return this._textureUnitMap[a]};d.prototype.getBoundFramebufferObject=function(){return this._activeFramebuffer};d.prototype.getBoundVAO=function(){return this._activeVertexArrayObject};d.prototype.resetState=function(){this.bindProgram(null);this.bindVAO(null);this.bindFramebuffer(null);this.unbindBuffer(34962);this.unbindBuffer(34963);for(var a=0;a<this.parameters.maxTextureImageUnits;a++)this.bindTexture(null,a);this.setBlendingEnabled(!1);this.setBlendFunction(1,
0);this.setBlendEquation(32774);this.setBlendColor(0,0,0,0);this.setFaceCullingEnabled(!1);this.setCullFace(1029);this.setFrontFace(2305);this.setPolygonOffsetFillEnabled(!1);this.setPolygonOffset(0,0);this.setScissorTestEnabled(!1);this.setScissorRect(0,0,this.gl.canvas.width,this.gl.canvas.height);this.setDepthTestEnabled(!1);this.setDepthFunction(513);this.setDepthRange(0,1);this.setStencilTestEnabled(!1);this.setStencilFunction(519,0,0);this.setStencilOp(7680,7680,7680);this.setClearColor(0,0,
0,0);this.setClearDepth(1);this.setClearStencil(0);this.setColorMask(!0,!0,!0,!0);this.setStencilWriteMask(4294967295);this.setDepthWriteEnabled(!0);this.setViewport(0,0,this.gl.canvas.width,this.gl.canvas.height)};d.prototype.enforceState=function(){var a=this.gl,d=this._extensions.vao;d&&d.bindVertexArrayOES(null);for(var m=0;m<this.parameters.maxVertexAttributes;m++)a.disableVertexAttribArray(m);this._activeVertexBuffer?a.bindBuffer(this._activeVertexBuffer.bufferType,this._activeVertexBuffer.glName):
a.bindBuffer(34962,null);this._activeIndexBuffer?a.bindBuffer(this._activeIndexBuffer.bufferType,this._activeIndexBuffer.glName):a.bindBuffer(34963,null);if(d&&this._activeVertexArrayObject){if(d=this._activeVertexArrayObject)this._activeVertexArrayObject.unbind(),this._activeVertexArrayObject=null;this.bindVAO(d)}a.bindFramebuffer(a.FRAMEBUFFER,this._activeFramebuffer?this._activeFramebuffer.glName:null);a.useProgram(this._activeShaderProgram?this._activeShaderProgram.glName:null);a.blendColor(this._blendColorState.r,
this._blendColorState.g,this._blendColorState.b,this._blendColorState.a);!0===this._blendEnabled?a.enable(this.gl.BLEND):a.disable(this.gl.BLEND);a.blendEquationSeparate(this._blendEquationState.mode,this._blendEquationState.modeAlpha);a.blendFuncSeparate(this._blendFunctionState.srcRGB,this._blendFunctionState.dstRGB,this._blendFunctionState.srcAlpha,this._blendFunctionState.dstAlpha);a.clearColor(this._clearColor.r,this._clearColor.g,this._clearColor.b,this._clearColor.a);a.clearDepth(this._clearDepth);
a.clearStencil(this._clearStencil);a.colorMask(this._colorMaskState.r,this._colorMaskState.g,this._colorMaskState.b,this._colorMaskState.a);a.cullFace(this._cullFace);a.depthFunc(this._depthFunction);a.depthRange(this._depthRange.zNear,this._depthRange.zFar);!0===this._depthTestEnabled?a.enable(a.DEPTH_TEST):a.disable(a.DEPTH_TEST);a.depthMask(this._depthWriteEnabled);a.frontFace(this._frontFace);a.lineWidth(this._lineWidth);!0===this._polygonCullingEnabled?a.enable(a.CULL_FACE):a.disable(a.CULL_FACE);
a.polygonOffset(this._polygonOffset[0],this._polygonOffset[1]);!0===this._polygonOffsetFillEnabled?a.enable(a.POLYGON_OFFSET_FILL):a.disable(a.POLYGON_OFFSET_FILL);a.scissor(this._scissorRect.x,this._scissorRect.y,this._scissorRect.width,this._scissorRect.height);!0===this._scissorTestEnabled?a.enable(a.SCISSOR_TEST):a.disable(a.SCISSOR_TEST);a.stencilFunc(this._stencilFunction.func,this._stencilFunction.ref,this._stencilFunction.mask);a.stencilOpSeparate(this._stencilOperation.face,this._stencilOperation.fail,
this._stencilOperation.zFail,this._stencilOperation.zPass);!0===this._stencilTestEnabled?a.enable(a.STENCIL_TEST):a.disable(a.STENCIL_TEST);a.stencilMask(this._stencilWriteMask);for(d=0;d<this.parameters.maxTextureImageUnits;d++)a.activeTexture(f.BASE_TEXTURE_UNIT+d),a.bindTexture(3553,null),(m=this._textureUnitMap[d])&&a.bindTexture(m.descriptor.target,m.glName);a.activeTexture(f.BASE_TEXTURE_UNIT+this._activeTextureUnit);a.viewport(this._viewport.x,this._viewport.y,this._viewport.width,this._viewport.height)};
d._bindBuffer=function(a,d,f,l){if(!d)return a.bindBuffer(f,null),null;if(l===d)return l;a.bindBuffer(f,d.glName);return d};d._MAX_TEXTURE_IMAGE_UNITS=-1;return d}()})},"esri/views/webgl/enums":function(){define(["require","exports"],function(A,t){Object.defineProperty(t,"__esModule",{value:!0});t.BASE_TEXTURE_UNIT=33984})},"esri/views/webgl/Extensions":function(){define(["require","exports"],function(A,t){return function(){function f(a,d){this._colorBufferFloatInit=this._textureFloatLinearInit=this._textureFloatInit=
this._disjointTimerQueryInit=this._compressedTextureS3TCInit=this._shaderTextureLODInit=this._textureFilterAnisotropicInit=this._depthTextureInit=this._elementIndexUintInit=this._standardDerivativesInit=this._angleInstancedArraysInit=this._vaoInit=!1;this._gl=a;d&&d.disabledExtensions&&(a=d.disabledExtensions,a.vao&&(this._vao=null,this._vaoInit=!0),a.angleInstancedArrays&&(this._angleInstancedArrays=null,this._angleInstancedArraysInit=!0),a.standardDerivatives&&(this._standardDerivatives=null,this._standardDerivativesInit=
!0),a.elementIndexUint&&(this._elementIndexUint=null,this._elementIndexUintInit=!0),a.depthTexture&&(this._depthTexture=null,this._depthTextureInit=!0),a.textureFilterAnisotropic&&(this._textureFilterAnisotropic=null,this._textureFilterAnisotropicInit=!0),a.compressedTextureS3TC&&(this._compressedTextureS3TC=null,this._compressedTextureS3TCInit=!0),a.shaderTextureLOD&&(this._shaderTextureLOD=null,this._shaderTextureLODInit=!0),a.disjointTimerQuery&&(this._disjointTimerQuery=null,this._disjointTimerQueryInit=
!0),a.textureFloat&&(this._textureFloat=null,this._textureFloatInit=!0),a.textureFloatLinear&&(this._textureFloatLinear=null,this._textureFloatLinearInit=!0),a.colorBufferFloat&&(this._colorBufferFloat=null,this._colorBufferFloatInit=!0))}Object.defineProperty(f.prototype,"vao",{get:function(){this._vaoInit||(this._vao=this._gl.getExtension("OES_vertex_array_object")||this._gl.getExtension("MOZ_OES_vertex_array_object")||this._gl.getExtension("WEBKIT_OES_vertex_array_object"),this._vaoInit=!0);return this._vao},
enumerable:!0,configurable:!0});Object.defineProperty(f.prototype,"angleInstancedArrays",{get:function(){this._angleInstancedArraysInit||(this._angleInstancedArrays=this._gl.getExtension("ANGLE_instanced_arrays"),this._angleInstancedArraysInit=!0);return this._angleInstancedArrays},enumerable:!0,configurable:!0});Object.defineProperty(f.prototype,"standardDerivatives",{get:function(){this._standardDerivativesInit||(this._standardDerivatives=this._gl.getExtension("OES_standard_derivatives"),this._standardDerivativesInit=
!0);return this._standardDerivatives},enumerable:!0,configurable:!0});Object.defineProperty(f.prototype,"elementIndexUint",{get:function(){this._elementIndexUintInit||(this._elementIndexUint=this._gl.getExtension("OES_element_index_uint"),this._elementIndexUintInit=!0);return this._elementIndexUint},enumerable:!0,configurable:!0});Object.defineProperty(f.prototype,"depthTexture",{get:function(){this._depthTextureInit||(this._depthTexture=this._gl.getExtension("WEBGL_depth_texture")||this._gl.getExtension("MOZ_WEBGL_depth_texture")||
this._gl.getExtension("WEBKIT_WEBGL_depth_texture"),this._depthTextureInit=!0);return this._depthTexture},enumerable:!0,configurable:!0});Object.defineProperty(f.prototype,"textureFilterAnisotropic",{get:function(){this._textureFilterAnisotropicInit||(this._textureFilterAnisotropic=this._gl.getExtension("EXT_texture_filter_anisotropic")||this._gl.getExtension("MOZ_EXT_texture_filter_anisotropic")||this._gl.getExtension("WEBKIT_EXT_texture_filter_anisotropic"),this._textureFilterAnisotropicInit=!0);
return this._textureFilterAnisotropic},enumerable:!0,configurable:!0});Object.defineProperty(f.prototype,"shaderTextureLOD",{get:function(){this._shaderTextureLODInit||(this._shaderTextureLOD=this._gl.getExtension("EXT_shader_texture_lod"),this._shaderTextureLODInit=!0);return this._shaderTextureLOD},enumerable:!0,configurable:!0});Object.defineProperty(f.prototype,"compressedTextureS3TC",{get:function(){this._compressedTextureS3TCInit||(this._compressedTextureS3TC=this._gl.getExtension("WEBGL_compressed_texture_s3tc"),
this._compressedTextureS3TCInit=!0);return this._compressedTextureS3TC},enumerable:!0,configurable:!0});Object.defineProperty(f.prototype,"disjointTimerQuery",{get:function(){this._disjointTimerQueryInit||(this._disjointTimerQuery=this._gl.getExtension("EXT_disjoint_timer_query"),this._disjointTimerQueryInit=!0);return this._disjointTimerQuery},enumerable:!0,configurable:!0});Object.defineProperty(f.prototype,"textureFloat",{get:function(){this._textureFloatInit||(this._textureFloat=this._gl.getExtension("OES_texture_float"),
this._textureFloatInit=!0);return this._textureFloat},enumerable:!0,configurable:!0});Object.defineProperty(f.prototype,"textureFloatLinear",{get:function(){this._textureFloatLinearInit||(this._textureFloatLinear=this._gl.getExtension("OES_texture_float_linear"),this._textureFloatLinearInit=!0);return this._textureFloatLinear},enumerable:!0,configurable:!0});Object.defineProperty(f.prototype,"colorBufferFloat",{get:function(){this._colorBufferFloatInit||(this._colorBufferFloat=this._gl.getExtension("EXT_color_buffer_float"),
this._colorBufferFloatInit=!0);return this._colorBufferFloat},enumerable:!0,configurable:!0});return f}()})},"esri/views/webgl/FramebufferObject":function(){define(["require","exports","./Texture"],function(A,t,f){return function(){function a(d,h,p,m){this._colorAttachment=this._stencilAttachment=this._depthAttachment=this._glName=this._context=null;this._initialized=!1;this._context=d;this._desc={colorTarget:h.colorTarget,depthStencilTarget:h.depthStencilTarget,width:h.width,height:h.height,multisampled:h.multisampled};
this._id=a._nextId++;p&&(d=void 0,p instanceof f?(this._colorAttachment=p,d=p.descriptor):(d=p,this._colorAttachment=new f(this._context,d)),0!==this._desc.colorTarget&&console.error("Framebuffer is initialized with a texture however the descriptor indicates using a renderbuffer color attachment!"),a._validateTextureDimensions(d,this._desc));m&&(this._context.extensions.depthTexture||console.error("Extension WEBGL_depth_texture isn't supported therefore it is no possible to set the depth/stencil texture as an attachment!"),
p=void 0,m instanceof f?(this._depthStencilTexture=m,p=this._depthStencilTexture.descriptor):(p=m,this._depthStencilTexture=new f(this._context,p)),a._validateTextureDimensions(p,this._desc))}a.create=function(d,f){return new a(d,f)};a.createWithAttachments=function(d,f,p,m){return new a(d,p,f,m)};Object.defineProperty(a.prototype,"id",{get:function(){return this._id},enumerable:!0,configurable:!0});Object.defineProperty(a.prototype,"glName",{get:function(){return this._glName},enumerable:!0,configurable:!0});
Object.defineProperty(a.prototype,"descriptor",{get:function(){return this._desc},enumerable:!0,configurable:!0});Object.defineProperty(a.prototype,"colorTexture",{get:function(){return this._colorAttachment instanceof f?this._colorAttachment:null},enumerable:!0,configurable:!0});Object.defineProperty(a.prototype,"depthStencilTexture",{get:function(){return this._depthStencilTexture},enumerable:!0,configurable:!0});Object.defineProperty(a.prototype,"width",{get:function(){return this._desc.width},
enumerable:!0,configurable:!0});Object.defineProperty(a.prototype,"height",{get:function(){return this._desc.height},enumerable:!0,configurable:!0});a.prototype.dispose=function(){this._context&&this._glName&&(this._disposeColorAttachment(),this._disposeDepthStencilAttachments(),this._context.gl.deleteFramebuffer(this._glName),this._glName=null)};a.prototype.attachColorTexture=function(d){if(d){a._validateTextureDimensions(d.descriptor,this._desc);this._disposeColorAttachment();if(this._initialized){this._context.bindFramebuffer(this);
var f=this._context.gl;f.framebufferTexture2D(f.FRAMEBUFFER,f.COLOR_ATTACHMENT0,f.TEXTURE_2D,d.glName,0)}this._colorAttachment=d}};a.prototype.detachColorTexture=function(){var a=void 0;if(this._colorAttachment instanceof f){a=this._colorAttachment;if(this._initialized){this._context.bindFramebuffer(this);var h=this._context.gl;this._context.gl.framebufferTexture2D(h.FRAMEBUFFER,h.COLOR_ATTACHMENT0,h.TEXTURE_2D,null,0)}this._colorAttachment=null}return a};a.prototype.attachDepthStencilTexture=function(d){if(d){var f=
d.descriptor;34041!==f.pixelFormat&&console.error("Depth/Stencil texture must have a pixel type of DEPTH_STENCIL!");34042!==f.dataType&&console.error("Depth/Stencil texture must have data type of UNSIGNED_INT_24_8_WEBGL!");this._context.extensions.depthTexture||console.error("Extension WEBGL_depth_texture isn't supported therefore it is no possible to set the depth/stencil texture!");a._validateTextureDimensions(f,this._desc);4!==this._desc.depthStencilTarget&&(this._desc.depthStencilTarget=4);this._disposeDepthStencilAttachments();
this._initialized&&(this._context.bindFramebuffer(this),f=this._context.gl,f.framebufferTexture2D(f.FRAMEBUFFER,f.DEPTH_STENCIL_ATTACHMENT,f.TEXTURE_2D,d.glName,0));this._depthStencilTexture=d}};a.prototype.detachDepthStencilTexture=function(){var a=this._depthStencilTexture;if(a&&this._initialized){this._context.bindFramebuffer(this);var f=this._context.gl;this._context.gl.framebufferTexture2D(f.FRAMEBUFFER,f.DEPTH_STENCIL_ATTACHMENT,f.TEXTURE_2D,null,0)}this._depthStencilTexture=null;return a};
a.prototype.copyToTexture=function(a,f,p,m,l,q,r){(0>a||0>f||0>l||0>q)&&console.error("Offsets cannot be negative!");(0>=p||0>=m)&&console.error("Copy width and height must be greater than zero!");var d=this._desc,h=r.descriptor;3553!==r.descriptor.target&&console.error("Texture target must be TEXTURE_2D!");(a+p>d.width||f+m>d.height||l+p>h.width||q+m>h.height)&&console.error("Bad dimensions, the current input values will attempt to read or copy out of bounds!");d=this._context;d.bindTexture(r);d.bindFramebuffer(this);
d.gl.copyTexSubImage2D(3553,0,l,q,a,f,p,m)};a.prototype.readPixels=function(a,f,p,m,l,q,r){(0>=p||0>=m)&&console.error("Copy width and height must be greater than zero!");r||console.error("Target memory is not initialized!");this._context.bindFramebuffer(this);this._context.gl.readPixels(a,f,p,m,l,q,r)};a.prototype.resize=function(d,h){var p=this._desc;if(p.width!==d||p.height!==h)if(this._initialized)p.width=d,p.height=h,this._colorAttachment instanceof f?(m=this._colorAttachment,p=m.descriptor,
p.width=d,p.height=h,this._colorAttachment.dispose(),this._colorAttachment=new f(this._context,p),a._validateTextureDimensions(m.descriptor,this._desc)):this._colorAttachment&&this._disposeColorAttachment(),null!=this._depthStencilTexture?(p=this._depthStencilTexture.descriptor,p.width=d,p.height=h,this._depthStencilTexture.dispose(),this._depthStencilTexture=new f(this._context,p)):(this._depthAttachment||this._stencilAttachment)&&this._disposeDepthStencilAttachments(),this._initialized=!1;else{p.width=
d;p.height=h;if(this._colorAttachment instanceof f){var m=this._colorAttachment;m.resize(d,h)}this._depthStencilTexture&&this._depthStencilTexture.resize(d,h)}};a.prototype.initialize=function(){if(this._initialized)return!1;var a=this._context.gl;this._glName&&a.deleteFramebuffer(this._glName);var h=a.createFramebuffer(),p=this._desc;a.bindFramebuffer(a.FRAMEBUFFER,h);if(!this._colorAttachment)if(0===p.colorTarget)this._colorAttachment=new f(this._context,{target:3553,pixelFormat:6408,dataType:5121,
samplingMode:9728,wrapMode:33071,width:p.width,height:p.height});else{var m=a.createRenderbuffer();a.bindRenderbuffer(a.RENDERBUFFER,m);a.renderbufferStorage(a.RENDERBUFFER,a.RGBA4,p.width,p.height);a.framebufferRenderbuffer(a.FRAMEBUFFER,a.COLOR_ATTACHMENT0,a.RENDERBUFFER,m);this._colorAttachment=m}this._colorAttachment instanceof f&&a.framebufferTexture2D(a.FRAMEBUFFER,a.COLOR_ATTACHMENT0,a.TEXTURE_2D,this._colorAttachment.glName,0);switch(p.depthStencilTarget){case 1:case 3:m=a.createRenderbuffer();
a.bindRenderbuffer(a.RENDERBUFFER,m);var l=1===p.depthStencilTarget?a.DEPTH_ATTACHMENT:a.DEPTH_STENCIL_ATTACHMENT;a.renderbufferStorage(a.RENDERBUFFER,1===p.depthStencilTarget?a.DEPTH_COMPONENT16:a.DEPTH_STENCIL,p.width,p.height);a.framebufferRenderbuffer(a.FRAMEBUFFER,l,a.RENDERBUFFER,m);this._depthAttachment=m;break;case 2:m=a.createRenderbuffer();a.bindRenderbuffer(a.RENDERBUFFER,m);a.renderbufferStorage(a.RENDERBUFFER,a.STENCIL_INDEX8,p.width,p.height);a.framebufferRenderbuffer(a.FRAMEBUFFER,
a.STENCIL_ATTACHMENT,a.RENDERBUFFER,m);this._stencilAttachment=m;break;case 4:this._depthStencilTexture||(this._context.extensions.depthTexture||console.error("Extension WEBGL_depth_texture isn't supported therefore it is no possible to set the depth/stencil texture as an attachment!"),this._depthStencilTexture=new f(this._context,{target:3553,pixelFormat:34041,dataType:34042,samplingMode:9728,wrapMode:33071,width:p.width,height:p.height})),a.framebufferTexture2D(a.FRAMEBUFFER,a.DEPTH_STENCIL_ATTACHMENT,
a.TEXTURE_2D,this._depthStencilTexture.glName,0)}a.checkFramebufferStatus(a.FRAMEBUFFER)!==a.FRAMEBUFFER_COMPLETE&&console.error("Framebuffer is incomplete!");this._glName=h;return this._initialized=!0};a.prototype._disposeColorAttachment=function(){if(this._colorAttachment instanceof f){var a=this._colorAttachment;if(this._initialized){this._context.bindFramebuffer(this);var h=this._context.gl;h.framebufferTexture2D(h.FRAMEBUFFER,h.COLOR_ATTACHMENT0,h.TEXTURE_2D,null,0)}a.dispose()}else this._colorAttachment instanceof
WebGLRenderbuffer&&(a=this._colorAttachment,h=this._context.gl,this._initialized&&(this._context.bindFramebuffer(this),h.framebufferRenderbuffer(h.FRAMEBUFFER,h.COLOR_ATTACHMENT0,h.RENDERBUFFER,null)),this._context.gl.deleteRenderbuffer(a));this._colorAttachment=null};a.prototype._disposeDepthStencilAttachments=function(){var a=this._context.gl;if(this._depthAttachment){if(this._initialized){this._context.bindFramebuffer(this);var f=this._context.gl;f.framebufferRenderbuffer(f.FRAMEBUFFER,1===this._desc.depthStencilTarget?
f.DEPTH_ATTACHMENT:f.DEPTH_STENCIL_ATTACHMENT,f.RENDERBUFFER,null)}a.deleteRenderbuffer(this._depthAttachment);this._depthAttachment=null}this._stencilAttachment&&(this._initialized&&(this._context.bindFramebuffer(this),f=this._context.gl,f.framebufferRenderbuffer(f.FRAMEBUFFER,f.STENCIL_ATTACHMENT,f.RENDERBUFFER,null)),a.deleteRenderbuffer(this._stencilAttachment),this._stencilAttachment=null);this._depthStencilTexture&&(this._initialized&&(this._context.bindFramebuffer(this),a=this._context.gl,
a.framebufferTexture2D(a.FRAMEBUFFER,a.DEPTH_STENCIL_ATTACHMENT,a.TEXTURE_2D,null,0)),this._depthStencilTexture.dispose(),this._depthStencilTexture=null)};a._validateTextureDimensions=function(a,f){console.assert(0<=a.width&&0<=a.height);3553!==a.target&&console.error("Texture type must be TEXTURE_2D!");void 0!==f.width&&0<=f.width&&void 0!==f.height&&0<=f.height?f.width===a.width&&f.height===a.height||console.error("Color attachment texture must match the framebuffer's!"):(f.width=a.width,f.height=
a.height)};a._nextId=0;return a}()})},"esri/views/webgl/Texture":function(){define(["require","exports"],function(A,t){return function(){function f(a,d,h){this._glName=this._context=null;this._id=-1;this._desc=void 0;this._wrapModeDirty=this._samplingModeDirty=!1;this._boundToUnits=new Set;this._context=a;this._desc={pixelFormat:d.pixelFormat,internalFormat:d.internalFormat,dataType:d.dataType,target:d.target?d.target:3553,samplingMode:d.samplingMode?d.samplingMode:9729,wrapMode:d.wrapMode?d.wrapMode:
10497,maxAnisotropy:d.maxAnisotropy,flipped:void 0!==d.flipped?d.flipped:!1,hasMipmap:void 0!==d.hasMipmap?d.hasMipmap:!1,level:void 0!==d.level?d.level:0,unpackAlignment:d.unpackAlignment?d.unpackAlignment:4,width:d.width,height:d.height,preMultiplyAlpha:void 0!==d.preMultiplyAlpha?d.preMultiplyAlpha:!1};this._id=++f._nextId;this.setData(h)}Object.defineProperty(f.prototype,"id",{get:function(){return this._id},enumerable:!0,configurable:!0});Object.defineProperty(f.prototype,"glName",{get:function(){return this._glName},
enumerable:!0,configurable:!0});Object.defineProperty(f.prototype,"descriptor",{get:function(){return this._desc},enumerable:!0,configurable:!0});f.prototype.dispose=function(){var a=this;if(this._context){if(this._glName){var d=this._context.gl;this._boundToUnits.forEach(function(d){a._context.bindTexture(null,d)});d.deleteTexture(this._glName);this._glName=null}this._context=null}};f.prototype.resize=function(a,d){var f=this._desc;if(f.width!==a||f.height!==d)f.width=a,f.height=d,this.setData(null)};
f.prototype.setData=function(a){var d=this._context.gl;this._glName||(this._glName=d.createTexture());void 0===a&&(a=null);null===a&&(this._desc.width=this._desc.width||4,this._desc.height=this._desc.height||4);var h=this._context.getBoundTexture(0);this._context.bindTexture(this,0);var p=this._desc;f._validateTexture(p);d.pixelStorei(d.UNPACK_ALIGNMENT,p.unpackAlignment);d.pixelStorei(d.UNPACK_FLIP_Y_WEBGL,p.flipped?1:0);d.pixelStorei(d.UNPACK_PREMULTIPLY_ALPHA_WEBGL,p.preMultiplyAlpha);a instanceof
ImageData||a instanceof HTMLImageElement||a instanceof HTMLCanvasElement||a instanceof HTMLVideoElement?(p.width&&p.height&&console.assert(a.width===p.width&&a.height===p.height),d.texImage2D(d.TEXTURE_2D,p.level,p.internalFormat?p.internalFormat:p.pixelFormat,p.pixelFormat,p.dataType,a),void 0===this._desc.width&&(this._desc.width=a.width),void 0===this._desc.height&&(this._desc.height=a.height)):(null!=p.width&&null!=p.height||console.error("Width and height must be specified!"),d.texImage2D(d.TEXTURE_2D,
p.level,p.internalFormat?p.internalFormat:p.pixelFormat,p.width,p.height,0,p.pixelFormat,p.dataType,a));p.hasMipmap&&this.generateMipmap();f._applySamplingMode(d,this._desc);f._applyWrapMode(d,this._desc);f._applyAnisotropicFilteringParameters(this._context,this._desc);this._context.bindTexture(h,0)};f.prototype.updateData=function(a,d,f,p,m,l){l||console.error("An attempt to use uninitialized data!");this._glName||console.error("An attempt to update uninitialized texture!");var h=this._context.gl,
r=this._desc,v=this._context.getBoundTexture(0);this._context.bindTexture(this,0);(0>d||0>f||p>r.width||m>r.height||d+p>r.width||f+m>r.height)&&console.error("An attempt to update out of bounds of the texture!");l instanceof ImageData||l instanceof HTMLImageElement||l instanceof HTMLCanvasElement||l instanceof HTMLVideoElement?(console.assert(l.width===p&&l.height===m),h.texSubImage2D(h.TEXTURE_2D,a,d,f,r.pixelFormat,r.dataType,l)):h.texSubImage2D(h.TEXTURE_2D,a,d,f,p,m,r.pixelFormat,r.dataType,l);
this._context.bindTexture(v,0)};f.prototype.generateMipmap=function(){var a=this._desc;a.hasMipmap||(a.hasMipmap=!0,f._validateTexture(a));9729===a.samplingMode?(this._samplingModeDirty=!0,a.samplingMode=9985):9728===a.samplingMode&&(this._samplingModeDirty=!0,a.samplingMode=9984);a=this._context.getBoundTexture(0);this._context.bindTexture(this,0);var d=this._context.gl;d.generateMipmap(d.TEXTURE_2D);this._context.bindTexture(a,0)};f.prototype.setSamplingMode=function(a){a!==this._desc.samplingMode&&
(this._desc.samplingMode=a,f._validateTexture(this._desc),this._samplingModeDirty=!0)};f.prototype.setWrapMode=function(a){a!==this._desc.wrapMode&&(this._desc.wrapMode=a,f._validateTexture(this._desc),this._wrapModeDirty=!0)};f.prototype.applyChanges=function(){var a=this._context.gl,d=this._desc;this._samplingModeDirty&&(f._applySamplingMode(a,d),this._samplingModeDirty=!1);this._wrapModeDirty&&(f._applyWrapMode(a,d),this._wrapModeDirty=!1)};f.prototype.setBoundToUnit=function(a,d){d?this._boundToUnits.add(a):
this._boundToUnits.delete(a)};f._isPowerOfTwo=function(a){return 0===(a&a-1)};f._validateTexture=function(a){(0>a.width||0>a.height)&&console.error("Negative dimension parameters are not allowed!");f._isPowerOfTwo(a.width)&&f._isPowerOfTwo(a.height)||(33071!==a.wrapMode&&console.error("Non-power-of-two textures must have a wrap mode of CLAMP_TO_EDGE!"),a.hasMipmap&&console.error("Mipmapping requires power-of-two textures!"))};f._applySamplingMode=function(a,d){var f=d.samplingMode;if(9985===f||9987===
f)f=9729;else if(9984===f||9986===f)f=9728;a.texParameteri(a.TEXTURE_2D,a.TEXTURE_MAG_FILTER,f);a.texParameteri(a.TEXTURE_2D,a.TEXTURE_MIN_FILTER,d.samplingMode)};f._applyWrapMode=function(a,d){a.texParameteri(a.TEXTURE_2D,a.TEXTURE_WRAP_S,d.wrapMode);a.texParameteri(a.TEXTURE_2D,a.TEXTURE_WRAP_T,d.wrapMode)};f._applyAnisotropicFilteringParameters=function(a,d){if(null!=d.maxAnisotropy){var f=a.extensions.textureFilterAnisotropic;f&&(a=a.gl,a.texParameterf(a.TEXTURE_2D,f.TEXTURE_MAX_ANISOTROPY_EXT,
d.maxAnisotropy))}};f._nextId=0;return f}()})},"esri/views/webgl/webgl-utils":function(){define([],function(){var A=function(t,f){for(var a=["webgl","experimental-webgl","webkit-3d","moz-webgl"],d=null,h=0;h<a.length;++h){try{d=t.getContext(a[h],f)}catch(p){}if(d)break}return d};return{create3DContext:A,setupWebGL:function(t,f){function a(a){var d=t.parentNode;d&&(d.innerHTML='\x3ctable style\x3d"background-color: #8CE; width: 100%; height: 100%;"\x3e\x3ctr\x3e\x3ctd align\x3d"center"\x3e\x3cdiv style\x3d"display: table-cell; vertical-align: middle;"\x3e\x3cdiv style\x3d""\x3e'+
a+"\x3c/div\x3e\x3c/div\x3e\x3c/td\x3e\x3c/tr\x3e\x3c/table\x3e")}if(!window.WebGLRenderingContext)return a('This page requires a browser that supports WebGL.\x3cbr/\x3e\x3ca href\x3d"http://get.webgl.org"\x3eClick here to upgrade your browser.\x3c/a\x3e'),[null,'This page requires a browser that supports WebGL.\x3cbr/\x3e\x3ca href\x3d"http://get.webgl.org"\x3eClick here to upgrade your browser.\x3c/a\x3e'];f=A(t,f);return f?[f]:(a('It doesn\'t appear your computer can support WebGL.\x3cbr/\x3e\x3ca href\x3d"http://get.webgl.org/troubleshooting/"\x3eClick here for more information.\x3c/a\x3e'),
[null,'It doesn\'t appear your computer can support WebGL.\x3cbr/\x3e\x3ca href\x3d"http://get.webgl.org/troubleshooting/"\x3eClick here for more information.\x3c/a\x3e'])},detectWebGL:function(){var t;try{t=window.WebGLRenderingContext}catch(a){t=[!1,0]}var f;try{f=A(document.createElement("canvas"))}catch(a){f=[!1,1]}t?f?(t=f,t=[!0,{VERSION:t.getParameter(t.VERSION),SHADING_LANGUAGE_VERSION:t.getParameter(t.SHADING_LANGUAGE_VERSION),VENDOR:t.getParameter(t.VENDOR),RENDERER:t.getParameter(t.RENDERER),
EXTENSIONS:t.getSupportedExtensions(),MAX_TEXTURE_SIZE:t.getParameter(t.MAX_TEXTURE_SIZE),MAX_RENDERBUFFER_SIZE:t.getParameter(t.MAX_RENDERBUFFER_SIZE),MAX_VERTEX_TEXTURE_IMAGE_UNITS:t.getParameter(t.MAX_VERTEX_TEXTURE_IMAGE_UNITS)}]):t=[!1,1]:t=[!1,0];return t}}})},"esri/views/2d/engine/webgl/painter/WGLPainter":function(){define("require exports dojo/has ../../../../../core/libs/gl-matrix/mat4 ../../../../webgl/FramebufferObject ../Dispatcher ../TextureManager ../GeometryUtils ../MaterialManager ../enums ./WGLTextPainter ./WGLIconPainter ./WGLFillPainter ./WGLLinePainter ./WGLBackgroundPainter ./TileInfoRenderer ./WGLHighlightPainter ./WGLHeatmapPainter ../Utils".split(" "),
function(A,t,f,a,d,h,p,m,l,q,r,v,x,y,C,E,D,F,H){var K=new Uint8Array(4*H.C_HITTEST_SEARCH_SIZE*H.C_HITTEST_SEARCH_SIZE),w=new Uint32Array(K.buffer),L=new h;return function(){function h(){this._textPainter=new r;this._iconPainter=new v;this._fillPainter=new x;this._linePainter=new y;this._backgroundPainter=new C;this._hlPainter=new D;this._heatmapPainter=new F;this._extrudeMatrix=new Float32Array(16);this._extrudeNoRotationMatrix=new Float32Array(16);this._extrudeRotateVector=new Float32Array([0,0,
1]);this._extrudeScaleVector=new Float32Array([1,1,1]);this._state={rotation:0,width:0,height:0};this._cachedRotation=this._cachedHeight=this._cachedWidth=0;this._textureManager=new p;this._materialManager=new l}h.prototype.initialize=function(a){this._materialManager.initialize(a)};h.prototype.update=function(d,f){this._state=d;if(this._state.width!==this._cachedWidth||this._state.height!==this._cachedHeight||this._state.rotation!==this._cachedRotation)this._extrudeScaleVector[0]=2/d.width,this._extrudeScaleVector[1]=
-2/d.height,a.identity(this._extrudeMatrix),a.rotate(this._extrudeMatrix,this._extrudeMatrix,-d.rotation*m.C_DEG_TO_RAD,this._extrudeRotateVector),a.scale(this._extrudeMatrix,this._extrudeMatrix,this._extrudeScaleVector),a.transpose(this._extrudeMatrix,this._extrudeMatrix),a.identity(this._extrudeNoRotationMatrix),a.scale(this._extrudeNoRotationMatrix,this._extrudeNoRotationMatrix,this._extrudeScaleVector),a.transpose(this._extrudeNoRotationMatrix,this._extrudeNoRotationMatrix),this._cachedWidth=
this._state.width,this._cachedHeight=this._state.height,this._cachedRotation=this._state.rotation};Object.defineProperty(h.prototype,"textureManager",{get:function(){return this._textureManager},enumerable:!0,configurable:!0});h.prototype.setHighlightOptions=function(a){this._hlPainter.setHighlightOptions(a)};h.prototype.drawHeatmap=function(a,d,h,l){var m=this;this._heatmapPainter.bindHeatmapSurface(a,d.displayWidth*l,d.displayHeight*l);this._drawClippingRects(a,d.children);a.setBlendingEnabled(!0);
a.setStencilWriteMask(0);a.setBlendFunctionSeparate(1,1,1,0);a.setStencilTestEnabled(!0);d.wglRendererInfo.symbolLevels.forEach(function(f){d.children.forEach(function(g){L.replayList(a,g.displayList,f,m,g,d.wglRendererInfo,q.WGLDrawPhase.GEOMETRY,h,l,!1)})});a.setStencilTestEnabled(!1);this._heatmapPainter.drawHeatmap(a,d.wglRendererInfo,.75);if(f("esri-feature-tiles-debug")){this._tileInforenderer||(this._tileInforenderer=new E);for(var p=this._tileInforenderer,r=0,v=d.children;r<v.length;r++){var x=
v[r];x.attached&&x.visible&&p.render(a,x)}}};h.prototype.draw=function(a,d,h,l,m){var p=this;this._drawClippingRects(a,d.children);a.setBlendingEnabled(!0);a.setStencilWriteMask(0);a.setBlendFunctionSeparate(1,771,1,771);a.setStencilTestEnabled(!0);d.wglRendererInfo.symbolLevels.forEach(function(g){d.children.forEach(function(f){f.displayList&&!f.displayList.empty&&L.replayList(a,f.displayList,g,p,f,d.wglRendererInfo,q.WGLDrawPhase.GEOMETRY,h,l,m)})});a.setStencilTestEnabled(!1);if(f("esri-feature-tiles-debug")){this._tileInforenderer||
(this._tileInforenderer=new E);for(var r=this._tileInforenderer,v=0,x=d.children;v<x.length;v++){var y=x[v];y.attached&&y.visible&&r.render(a,y)}}};h.prototype.highlight=function(a,d,f,h){var l=this,m=a.getViewport();this._hlPainter.setup(a,m.width,m.height);this._hlPainter.startMaskDraw(a);this._drawClippingRects(a,d.children);a.setBlendingEnabled(!0);a.setStencilWriteMask(0);a.setBlendFunctionSeparate(1,771,1,771);a.setStencilTestEnabled(!0);d.wglRendererInfo.symbolLevels.forEach(function(m){d.children.forEach(function(p){p.hlDisplayList&&
!p.hlDisplayList.empty&&L.replayList(a,p.hlDisplayList,m,l,p,d.wglRendererInfo,q.WGLDrawPhase.HIGHLIGHT,f,h,!1)})});this._hlPainter.draw(a)};h.prototype.hitTest=function(a,f,h,l,m){var p=this,r=H.C_HITTEST_SEARCH_SIZE,v=[0,0],x=[0,0];f=a.state;f.toMap(v,[0,0]);f.toMap(x,[r,r]);var y=l.children.filter(function(b){return!(v[0]>b.bounds[2]||x[0]<b.bounds[0]||v[1]<b.bounds[1]||x[1]>b.bounds[3])});if(0===y.length)return[];var g=a.context;this._hittestFBO||(this._hittestFBO=d.create(g,{colorTarget:0,depthStencilTarget:3,
width:r,height:r}));f=g.getViewport();h=g.getBoundFramebufferObject();g.bindFramebuffer(this._hittestFBO);g.setViewport(0,0,r,r);var t=g.gl;g.setClearColor(1,1,1,1);g.clear(t.COLOR_BUFFER_BIT);this._drawClippingRects(g,y);g.setBlendingEnabled(!1);g.setStencilWriteMask(0);g.setStencilTestEnabled(!0);l.wglRendererInfo.symbolLevels.forEach(function(b){y.forEach(function(c){c.displayList&&!c.displayList.empty&&L.replayList(g,c.displayList,b,p,c,l.wglRendererInfo,q.WGLDrawPhase.HITTEST,m,a.devicePixelRatio,
!1)})});g.setStencilTestEnabled(!1);g.setBlendingEnabled(!0);this._hittestFBO.readPixels(0,0,r,r,6408,5121,K);for(var r=r*r,t=new Set,C=0;C<r;C++){var c=w[C];4294967295!==c&&t.add(c)}g.bindFramebuffer(h);g.setViewport(f.x,f.y,f.width,f.height);var b=[];t.forEach(function(c){b.push(c)});return b};h.prototype.drawFill=function(a,d,f,h,l,m,p,q,r,v){this._fillPainter.draw(a,d,f,h,l,m,p,q,r,v,this._materialManager,this._textureManager)};h.prototype.drawLine=function(a,d,f,h,l,m,p,q,r){this._linePainter.draw(a,
d,f,h,l,m,p,q,r,this._materialManager,this._textureManager,this._extrudeMatrix)};h.prototype.drawIcon=function(a,d,f,h,l,m,p){this._iconPainter.draw(a,d,f,h,l,m,p,this._materialManager,this._textureManager,this._extrudeMatrix,this._extrudeNoRotationMatrix)};h.prototype.drawText=function(a,d,f,h,l,m,p){this._textPainter.draw(a,d,f,h,l,m,p,this._materialManager,this._textureManager,this._extrudeMatrix,this._extrudeNoRotationMatrix)};h.prototype._drawClippingRects=function(a,d){if(0!==d.length){a.setDepthWriteEnabled(!1);
a.setDepthTestEnabled(!1);a.setStencilTestEnabled(!0);a.setBlendingEnabled(!1);a.setColorMask(!1,!1,!1,!1);a.setStencilOp(7680,7680,7681);a.setClearStencil(0);a.clear(a.gl.STENCIL_BUFFER_BIT);a.setStencilWriteMask(255);for(var f=d.length,h,l=f,m=0;m<f;m++)h=d[m],h.stencilRef=l,a.setStencilFunctionSeparate(1032,519,l,255),l--,this._backgroundPainter.draw(a,h);a.setColorMask(!0,!0,!0,!0)}};return h}()})},"esri/core/libs/gl-matrix/mat4":function(){define(["./common"],function(A){var t={scalar:{},SIMD:{},
create:function(){var f=new A.ARRAY_TYPE(16);f[0]=1;f[1]=0;f[2]=0;f[3]=0;f[4]=0;f[5]=1;f[6]=0;f[7]=0;f[8]=0;f[9]=0;f[10]=1;f[11]=0;f[12]=0;f[13]=0;f[14]=0;f[15]=1;return f},clone:function(f){var a=new A.ARRAY_TYPE(16);a[0]=f[0];a[1]=f[1];a[2]=f[2];a[3]=f[3];a[4]=f[4];a[5]=f[5];a[6]=f[6];a[7]=f[7];a[8]=f[8];a[9]=f[9];a[10]=f[10];a[11]=f[11];a[12]=f[12];a[13]=f[13];a[14]=f[14];a[15]=f[15];return a},copy:function(f,a){f[0]=a[0];f[1]=a[1];f[2]=a[2];f[3]=a[3];f[4]=a[4];f[5]=a[5];f[6]=a[6];f[7]=a[7];f[8]=
a[8];f[9]=a[9];f[10]=a[10];f[11]=a[11];f[12]=a[12];f[13]=a[13];f[14]=a[14];f[15]=a[15];return f},fromValues:function(f,a,d,h,p,m,l,q,r,v,x,y,t,E,D,F){var C=new A.ARRAY_TYPE(16);C[0]=f;C[1]=a;C[2]=d;C[3]=h;C[4]=p;C[5]=m;C[6]=l;C[7]=q;C[8]=r;C[9]=v;C[10]=x;C[11]=y;C[12]=t;C[13]=E;C[14]=D;C[15]=F;return C},set:function(f,a,d,h,p,m,l,q,r,v,x,y,t,E,D,F,H){f[0]=a;f[1]=d;f[2]=h;f[3]=p;f[4]=m;f[5]=l;f[6]=q;f[7]=r;f[8]=v;f[9]=x;f[10]=y;f[11]=t;f[12]=E;f[13]=D;f[14]=F;f[15]=H;return f},identity:function(f){f[0]=
1;f[1]=0;f[2]=0;f[3]=0;f[4]=0;f[5]=1;f[6]=0;f[7]=0;f[8]=0;f[9]=0;f[10]=1;f[11]=0;f[12]=0;f[13]=0;f[14]=0;f[15]=1;return f}};t.scalar.transpose=function(f,a){if(f===a){var d=a[1],h=a[2],p=a[3],m=a[6],l=a[7],q=a[11];f[1]=a[4];f[2]=a[8];f[3]=a[12];f[4]=d;f[6]=a[9];f[7]=a[13];f[8]=h;f[9]=m;f[11]=a[14];f[12]=p;f[13]=l;f[14]=q}else f[0]=a[0],f[1]=a[4],f[2]=a[8],f[3]=a[12],f[4]=a[1],f[5]=a[5],f[6]=a[9],f[7]=a[13],f[8]=a[2],f[9]=a[6],f[10]=a[10],f[11]=a[14],f[12]=a[3],f[13]=a[7],f[14]=a[11],f[15]=a[15];return f};
t.SIMD.transpose=function(f,a){var d,h,p,m,l,q;d=SIMD.Float32x4.load(a,0);h=SIMD.Float32x4.load(a,4);p=SIMD.Float32x4.load(a,8);a=SIMD.Float32x4.load(a,12);m=SIMD.Float32x4.shuffle(d,h,0,1,4,5);l=SIMD.Float32x4.shuffle(p,a,0,1,4,5);q=SIMD.Float32x4.shuffle(m,l,0,2,4,6);m=SIMD.Float32x4.shuffle(m,l,1,3,5,7);SIMD.Float32x4.store(f,0,q);SIMD.Float32x4.store(f,4,m);m=SIMD.Float32x4.shuffle(d,h,2,3,6,7);l=SIMD.Float32x4.shuffle(p,a,2,3,6,7);d=SIMD.Float32x4.shuffle(m,l,0,2,4,6);h=SIMD.Float32x4.shuffle(m,
l,1,3,5,7);SIMD.Float32x4.store(f,8,d);SIMD.Float32x4.store(f,12,h);return f};t.transpose=A.USE_SIMD?t.SIMD.transpose:t.scalar.transpose;t.scalar.invert=function(f,a){var d=a[0],h=a[1],p=a[2],m=a[3],l=a[4],q=a[5],r=a[6],v=a[7],x=a[8],y=a[9],t=a[10],E=a[11],D=a[12],F=a[13],H=a[14];a=a[15];var A=d*q-h*l,w=d*r-p*l,L=d*v-m*l,J=h*r-p*q,M=h*v-m*q,S=p*v-m*r,N=x*F-y*D,O=x*H-t*D,T=x*a-E*D,R=y*H-t*F,W=y*a-E*F,U=t*a-E*H,P=A*U-w*W+L*R+J*T-M*O+S*N;if(!P)return null;P=1/P;f[0]=(q*U-r*W+v*R)*P;f[1]=(p*W-h*U-m*R)*
P;f[2]=(F*S-H*M+a*J)*P;f[3]=(t*M-y*S-E*J)*P;f[4]=(r*T-l*U-v*O)*P;f[5]=(d*U-p*T+m*O)*P;f[6]=(H*L-D*S-a*w)*P;f[7]=(x*S-t*L+E*w)*P;f[8]=(l*W-q*T+v*N)*P;f[9]=(h*T-d*W-m*N)*P;f[10]=(D*M-F*L+a*A)*P;f[11]=(y*L-x*M-E*A)*P;f[12]=(q*O-l*R-r*N)*P;f[13]=(d*R-h*O+p*N)*P;f[14]=(F*w-D*J-H*A)*P;f[15]=(x*J-y*w+t*A)*P;return f};t.SIMD.invert=function(f,a){var d,h,p,m,l,q,r,v;l=SIMD.Float32x4.load(a,0);q=SIMD.Float32x4.load(a,4);r=SIMD.Float32x4.load(a,8);v=SIMD.Float32x4.load(a,12);a=SIMD.Float32x4.shuffle(l,q,0,1,
4,5);h=SIMD.Float32x4.shuffle(r,v,0,1,4,5);d=SIMD.Float32x4.shuffle(a,h,0,2,4,6);h=SIMD.Float32x4.shuffle(h,a,1,3,5,7);a=SIMD.Float32x4.shuffle(l,q,2,3,6,7);m=SIMD.Float32x4.shuffle(r,v,2,3,6,7);p=SIMD.Float32x4.shuffle(a,m,0,2,4,6);m=SIMD.Float32x4.shuffle(m,a,1,3,5,7);a=SIMD.Float32x4.mul(p,m);a=SIMD.Float32x4.swizzle(a,1,0,3,2);l=SIMD.Float32x4.mul(h,a);q=SIMD.Float32x4.mul(d,a);a=SIMD.Float32x4.swizzle(a,2,3,0,1);l=SIMD.Float32x4.sub(SIMD.Float32x4.mul(h,a),l);q=SIMD.Float32x4.sub(SIMD.Float32x4.mul(d,
a),q);q=SIMD.Float32x4.swizzle(q,2,3,0,1);a=SIMD.Float32x4.mul(h,p);a=SIMD.Float32x4.swizzle(a,1,0,3,2);l=SIMD.Float32x4.add(SIMD.Float32x4.mul(m,a),l);v=SIMD.Float32x4.mul(d,a);a=SIMD.Float32x4.swizzle(a,2,3,0,1);l=SIMD.Float32x4.sub(l,SIMD.Float32x4.mul(m,a));v=SIMD.Float32x4.sub(SIMD.Float32x4.mul(d,a),v);v=SIMD.Float32x4.swizzle(v,2,3,0,1);a=SIMD.Float32x4.mul(SIMD.Float32x4.swizzle(h,2,3,0,1),m);a=SIMD.Float32x4.swizzle(a,1,0,3,2);p=SIMD.Float32x4.swizzle(p,2,3,0,1);l=SIMD.Float32x4.add(SIMD.Float32x4.mul(p,
a),l);r=SIMD.Float32x4.mul(d,a);a=SIMD.Float32x4.swizzle(a,2,3,0,1);l=SIMD.Float32x4.sub(l,SIMD.Float32x4.mul(p,a));r=SIMD.Float32x4.sub(SIMD.Float32x4.mul(d,a),r);r=SIMD.Float32x4.swizzle(r,2,3,0,1);a=SIMD.Float32x4.mul(d,h);a=SIMD.Float32x4.swizzle(a,1,0,3,2);r=SIMD.Float32x4.add(SIMD.Float32x4.mul(m,a),r);v=SIMD.Float32x4.sub(SIMD.Float32x4.mul(p,a),v);a=SIMD.Float32x4.swizzle(a,2,3,0,1);r=SIMD.Float32x4.sub(SIMD.Float32x4.mul(m,a),r);v=SIMD.Float32x4.sub(v,SIMD.Float32x4.mul(p,a));a=SIMD.Float32x4.mul(d,
m);a=SIMD.Float32x4.swizzle(a,1,0,3,2);q=SIMD.Float32x4.sub(q,SIMD.Float32x4.mul(p,a));r=SIMD.Float32x4.add(SIMD.Float32x4.mul(h,a),r);a=SIMD.Float32x4.swizzle(a,2,3,0,1);q=SIMD.Float32x4.add(SIMD.Float32x4.mul(p,a),q);r=SIMD.Float32x4.sub(r,SIMD.Float32x4.mul(h,a));a=SIMD.Float32x4.mul(d,p);a=SIMD.Float32x4.swizzle(a,1,0,3,2);q=SIMD.Float32x4.add(SIMD.Float32x4.mul(m,a),q);v=SIMD.Float32x4.sub(v,SIMD.Float32x4.mul(h,a));a=SIMD.Float32x4.swizzle(a,2,3,0,1);q=SIMD.Float32x4.sub(q,SIMD.Float32x4.mul(m,
a));v=SIMD.Float32x4.add(SIMD.Float32x4.mul(h,a),v);d=SIMD.Float32x4.mul(d,l);d=SIMD.Float32x4.add(SIMD.Float32x4.swizzle(d,2,3,0,1),d);d=SIMD.Float32x4.add(SIMD.Float32x4.swizzle(d,1,0,3,2),d);a=SIMD.Float32x4.reciprocalApproximation(d);d=SIMD.Float32x4.sub(SIMD.Float32x4.add(a,a),SIMD.Float32x4.mul(d,SIMD.Float32x4.mul(a,a)));d=SIMD.Float32x4.swizzle(d,0,0,0,0);if(!d)return null;SIMD.Float32x4.store(f,0,SIMD.Float32x4.mul(d,l));SIMD.Float32x4.store(f,4,SIMD.Float32x4.mul(d,q));SIMD.Float32x4.store(f,
8,SIMD.Float32x4.mul(d,r));SIMD.Float32x4.store(f,12,SIMD.Float32x4.mul(d,v));return f};t.invert=A.USE_SIMD?t.SIMD.invert:t.scalar.invert;t.scalar.adjoint=function(f,a){var d=a[0],h=a[1],p=a[2],m=a[3],l=a[4],q=a[5],r=a[6],v=a[7],x=a[8],y=a[9],t=a[10],E=a[11],D=a[12],F=a[13],H=a[14];a=a[15];f[0]=q*(t*a-E*H)-y*(r*a-v*H)+F*(r*E-v*t);f[1]=-(h*(t*a-E*H)-y*(p*a-m*H)+F*(p*E-m*t));f[2]=h*(r*a-v*H)-q*(p*a-m*H)+F*(p*v-m*r);f[3]=-(h*(r*E-v*t)-q*(p*E-m*t)+y*(p*v-m*r));f[4]=-(l*(t*a-E*H)-x*(r*a-v*H)+D*(r*E-v*
t));f[5]=d*(t*a-E*H)-x*(p*a-m*H)+D*(p*E-m*t);f[6]=-(d*(r*a-v*H)-l*(p*a-m*H)+D*(p*v-m*r));f[7]=d*(r*E-v*t)-l*(p*E-m*t)+x*(p*v-m*r);f[8]=l*(y*a-E*F)-x*(q*a-v*F)+D*(q*E-v*y);f[9]=-(d*(y*a-E*F)-x*(h*a-m*F)+D*(h*E-m*y));f[10]=d*(q*a-v*F)-l*(h*a-m*F)+D*(h*v-m*q);f[11]=-(d*(q*E-v*y)-l*(h*E-m*y)+x*(h*v-m*q));f[12]=-(l*(y*H-t*F)-x*(q*H-r*F)+D*(q*t-r*y));f[13]=d*(y*H-t*F)-x*(h*H-p*F)+D*(h*t-p*y);f[14]=-(d*(q*H-r*F)-l*(h*H-p*F)+D*(h*r-p*q));f[15]=d*(q*t-r*y)-l*(h*t-p*y)+x*(h*r-p*q);return f};t.SIMD.adjoint=
function(f,a){var d,h,p,m,l,q,r,v;d=SIMD.Float32x4.load(a,0);h=SIMD.Float32x4.load(a,4);p=SIMD.Float32x4.load(a,8);m=SIMD.Float32x4.load(a,12);q=SIMD.Float32x4.shuffle(d,h,0,1,4,5);l=SIMD.Float32x4.shuffle(p,m,0,1,4,5);a=SIMD.Float32x4.shuffle(q,l,0,2,4,6);l=SIMD.Float32x4.shuffle(l,q,1,3,5,7);q=SIMD.Float32x4.shuffle(d,h,2,3,6,7);h=SIMD.Float32x4.shuffle(p,m,2,3,6,7);d=SIMD.Float32x4.shuffle(q,h,0,2,4,6);h=SIMD.Float32x4.shuffle(h,q,1,3,5,7);q=SIMD.Float32x4.mul(d,h);q=SIMD.Float32x4.swizzle(q,1,
0,3,2);p=SIMD.Float32x4.mul(l,q);m=SIMD.Float32x4.mul(a,q);q=SIMD.Float32x4.swizzle(q,2,3,0,1);p=SIMD.Float32x4.sub(SIMD.Float32x4.mul(l,q),p);m=SIMD.Float32x4.sub(SIMD.Float32x4.mul(a,q),m);m=SIMD.Float32x4.swizzle(m,2,3,0,1);q=SIMD.Float32x4.mul(l,d);q=SIMD.Float32x4.swizzle(q,1,0,3,2);p=SIMD.Float32x4.add(SIMD.Float32x4.mul(h,q),p);v=SIMD.Float32x4.mul(a,q);q=SIMD.Float32x4.swizzle(q,2,3,0,1);p=SIMD.Float32x4.sub(p,SIMD.Float32x4.mul(h,q));v=SIMD.Float32x4.sub(SIMD.Float32x4.mul(a,q),v);v=SIMD.Float32x4.swizzle(v,
2,3,0,1);q=SIMD.Float32x4.mul(SIMD.Float32x4.swizzle(l,2,3,0,1),h);q=SIMD.Float32x4.swizzle(q,1,0,3,2);d=SIMD.Float32x4.swizzle(d,2,3,0,1);p=SIMD.Float32x4.add(SIMD.Float32x4.mul(d,q),p);r=SIMD.Float32x4.mul(a,q);q=SIMD.Float32x4.swizzle(q,2,3,0,1);p=SIMD.Float32x4.sub(p,SIMD.Float32x4.mul(d,q));r=SIMD.Float32x4.sub(SIMD.Float32x4.mul(a,q),r);r=SIMD.Float32x4.swizzle(r,2,3,0,1);q=SIMD.Float32x4.mul(a,l);q=SIMD.Float32x4.swizzle(q,1,0,3,2);r=SIMD.Float32x4.add(SIMD.Float32x4.mul(h,q),r);v=SIMD.Float32x4.sub(SIMD.Float32x4.mul(d,
q),v);q=SIMD.Float32x4.swizzle(q,2,3,0,1);r=SIMD.Float32x4.sub(SIMD.Float32x4.mul(h,q),r);v=SIMD.Float32x4.sub(v,SIMD.Float32x4.mul(d,q));q=SIMD.Float32x4.mul(a,h);q=SIMD.Float32x4.swizzle(q,1,0,3,2);m=SIMD.Float32x4.sub(m,SIMD.Float32x4.mul(d,q));r=SIMD.Float32x4.add(SIMD.Float32x4.mul(l,q),r);q=SIMD.Float32x4.swizzle(q,2,3,0,1);m=SIMD.Float32x4.add(SIMD.Float32x4.mul(d,q),m);r=SIMD.Float32x4.sub(r,SIMD.Float32x4.mul(l,q));q=SIMD.Float32x4.mul(a,d);q=SIMD.Float32x4.swizzle(q,1,0,3,2);m=SIMD.Float32x4.add(SIMD.Float32x4.mul(h,
q),m);v=SIMD.Float32x4.sub(v,SIMD.Float32x4.mul(l,q));q=SIMD.Float32x4.swizzle(q,2,3,0,1);m=SIMD.Float32x4.sub(m,SIMD.Float32x4.mul(h,q));v=SIMD.Float32x4.add(SIMD.Float32x4.mul(l,q),v);SIMD.Float32x4.store(f,0,p);SIMD.Float32x4.store(f,4,m);SIMD.Float32x4.store(f,8,r);SIMD.Float32x4.store(f,12,v);return f};t.adjoint=A.USE_SIMD?t.SIMD.adjoint:t.scalar.adjoint;t.determinant=function(f){var a=f[0],d=f[1],h=f[2],p=f[3],m=f[4],l=f[5],q=f[6],r=f[7],v=f[8],x=f[9],y=f[10],t=f[11],E=f[12],D=f[13],F=f[14];
f=f[15];return(a*l-d*m)*(y*f-t*F)-(a*q-h*m)*(x*f-t*D)+(a*r-p*m)*(x*F-y*D)+(d*q-h*l)*(v*f-t*E)-(d*r-p*l)*(v*F-y*E)+(h*r-p*q)*(v*D-x*E)};t.SIMD.multiply=function(f,a,d){var h=SIMD.Float32x4.load(a,0),p=SIMD.Float32x4.load(a,4),m=SIMD.Float32x4.load(a,8);a=SIMD.Float32x4.load(a,12);var l=SIMD.Float32x4.load(d,0),l=SIMD.Float32x4.add(SIMD.Float32x4.mul(SIMD.Float32x4.swizzle(l,0,0,0,0),h),SIMD.Float32x4.add(SIMD.Float32x4.mul(SIMD.Float32x4.swizzle(l,1,1,1,1),p),SIMD.Float32x4.add(SIMD.Float32x4.mul(SIMD.Float32x4.swizzle(l,
2,2,2,2),m),SIMD.Float32x4.mul(SIMD.Float32x4.swizzle(l,3,3,3,3),a))));SIMD.Float32x4.store(f,0,l);l=SIMD.Float32x4.load(d,4);l=SIMD.Float32x4.add(SIMD.Float32x4.mul(SIMD.Float32x4.swizzle(l,0,0,0,0),h),SIMD.Float32x4.add(SIMD.Float32x4.mul(SIMD.Float32x4.swizzle(l,1,1,1,1),p),SIMD.Float32x4.add(SIMD.Float32x4.mul(SIMD.Float32x4.swizzle(l,2,2,2,2),m),SIMD.Float32x4.mul(SIMD.Float32x4.swizzle(l,3,3,3,3),a))));SIMD.Float32x4.store(f,4,l);l=SIMD.Float32x4.load(d,8);l=SIMD.Float32x4.add(SIMD.Float32x4.mul(SIMD.Float32x4.swizzle(l,
0,0,0,0),h),SIMD.Float32x4.add(SIMD.Float32x4.mul(SIMD.Float32x4.swizzle(l,1,1,1,1),p),SIMD.Float32x4.add(SIMD.Float32x4.mul(SIMD.Float32x4.swizzle(l,2,2,2,2),m),SIMD.Float32x4.mul(SIMD.Float32x4.swizzle(l,3,3,3,3),a))));SIMD.Float32x4.store(f,8,l);d=SIMD.Float32x4.load(d,12);h=SIMD.Float32x4.add(SIMD.Float32x4.mul(SIMD.Float32x4.swizzle(d,0,0,0,0),h),SIMD.Float32x4.add(SIMD.Float32x4.mul(SIMD.Float32x4.swizzle(d,1,1,1,1),p),SIMD.Float32x4.add(SIMD.Float32x4.mul(SIMD.Float32x4.swizzle(d,2,2,2,2),
m),SIMD.Float32x4.mul(SIMD.Float32x4.swizzle(d,3,3,3,3),a))));SIMD.Float32x4.store(f,12,h);return f};t.scalar.multiply=function(f,a,d){var h=a[0],p=a[1],m=a[2],l=a[3],q=a[4],r=a[5],v=a[6],x=a[7],y=a[8],t=a[9],E=a[10],D=a[11],F=a[12],H=a[13],A=a[14];a=a[15];var w=d[0],L=d[1],J=d[2],M=d[3];f[0]=w*h+L*q+J*y+M*F;f[1]=w*p+L*r+J*t+M*H;f[2]=w*m+L*v+J*E+M*A;f[3]=w*l+L*x+J*D+M*a;w=d[4];L=d[5];J=d[6];M=d[7];f[4]=w*h+L*q+J*y+M*F;f[5]=w*p+L*r+J*t+M*H;f[6]=w*m+L*v+J*E+M*A;f[7]=w*l+L*x+J*D+M*a;w=d[8];L=d[9];J=
d[10];M=d[11];f[8]=w*h+L*q+J*y+M*F;f[9]=w*p+L*r+J*t+M*H;f[10]=w*m+L*v+J*E+M*A;f[11]=w*l+L*x+J*D+M*a;w=d[12];L=d[13];J=d[14];M=d[15];f[12]=w*h+L*q+J*y+M*F;f[13]=w*p+L*r+J*t+M*H;f[14]=w*m+L*v+J*E+M*A;f[15]=w*l+L*x+J*D+M*a;return f};t.multiply=A.USE_SIMD?t.SIMD.multiply:t.scalar.multiply;t.mul=t.multiply;t.scalar.translate=function(f,a,d){var h=d[0],p=d[1];d=d[2];var m,l,q,r,v,x,y,t,E,D,F,H;a===f?(f[12]=a[0]*h+a[4]*p+a[8]*d+a[12],f[13]=a[1]*h+a[5]*p+a[9]*d+a[13],f[14]=a[2]*h+a[6]*p+a[10]*d+a[14],f[15]=
a[3]*h+a[7]*p+a[11]*d+a[15]):(m=a[0],l=a[1],q=a[2],r=a[3],v=a[4],x=a[5],y=a[6],t=a[7],E=a[8],D=a[9],F=a[10],H=a[11],f[0]=m,f[1]=l,f[2]=q,f[3]=r,f[4]=v,f[5]=x,f[6]=y,f[7]=t,f[8]=E,f[9]=D,f[10]=F,f[11]=H,f[12]=m*h+v*p+E*d+a[12],f[13]=l*h+x*p+D*d+a[13],f[14]=q*h+y*p+F*d+a[14],f[15]=r*h+t*p+H*d+a[15]);return f};t.SIMD.translate=function(f,a,d){var h=SIMD.Float32x4.load(a,0),p=SIMD.Float32x4.load(a,4),m=SIMD.Float32x4.load(a,8),l=SIMD.Float32x4.load(a,12);d=SIMD.Float32x4(d[0],d[1],d[2],0);a!==f&&(f[0]=
a[0],f[1]=a[1],f[2]=a[2],f[3]=a[3],f[4]=a[4],f[5]=a[5],f[6]=a[6],f[7]=a[7],f[8]=a[8],f[9]=a[9],f[10]=a[10],f[11]=a[11]);h=SIMD.Float32x4.mul(h,SIMD.Float32x4.swizzle(d,0,0,0,0));p=SIMD.Float32x4.mul(p,SIMD.Float32x4.swizzle(d,1,1,1,1));m=SIMD.Float32x4.mul(m,SIMD.Float32x4.swizzle(d,2,2,2,2));a=SIMD.Float32x4.add(h,SIMD.Float32x4.add(p,SIMD.Float32x4.add(m,l)));SIMD.Float32x4.store(f,12,a);return f};t.translate=A.USE_SIMD?t.SIMD.translate:t.scalar.translate;t.scalar.scale=function(f,a,d){var h=d[0],
p=d[1];d=d[2];f[0]=a[0]*h;f[1]=a[1]*h;f[2]=a[2]*h;f[3]=a[3]*h;f[4]=a[4]*p;f[5]=a[5]*p;f[6]=a[6]*p;f[7]=a[7]*p;f[8]=a[8]*d;f[9]=a[9]*d;f[10]=a[10]*d;f[11]=a[11]*d;f[12]=a[12];f[13]=a[13];f[14]=a[14];f[15]=a[15];return f};t.SIMD.scale=function(f,a,d){var h;d=SIMD.Float32x4(d[0],d[1],d[2],0);h=SIMD.Float32x4.load(a,0);SIMD.Float32x4.store(f,0,SIMD.Float32x4.mul(h,SIMD.Float32x4.swizzle(d,0,0,0,0)));h=SIMD.Float32x4.load(a,4);SIMD.Float32x4.store(f,4,SIMD.Float32x4.mul(h,SIMD.Float32x4.swizzle(d,1,1,
1,1)));h=SIMD.Float32x4.load(a,8);SIMD.Float32x4.store(f,8,SIMD.Float32x4.mul(h,SIMD.Float32x4.swizzle(d,2,2,2,2)));f[12]=a[12];f[13]=a[13];f[14]=a[14];f[15]=a[15];return f};t.scale=A.USE_SIMD?t.SIMD.scale:t.scalar.scale;t.rotate=function(f,a,d,h){var p=h[0],m=h[1];h=h[2];var l=Math.sqrt(p*p+m*m+h*h),q,r,v,x,y,t,E,D,F,H,K,w,L,J,M,S,N,O,T,R;if(Math.abs(l)<A.EPSILON)return null;l=1/l;p*=l;m*=l;h*=l;q=Math.sin(d);r=Math.cos(d);v=1-r;d=a[0];l=a[1];x=a[2];y=a[3];t=a[4];E=a[5];D=a[6];F=a[7];H=a[8];K=a[9];
w=a[10];L=a[11];J=p*p*v+r;M=m*p*v+h*q;S=h*p*v-m*q;N=p*m*v-h*q;O=m*m*v+r;T=h*m*v+p*q;R=p*h*v+m*q;p=m*h*v-p*q;m=h*h*v+r;f[0]=d*J+t*M+H*S;f[1]=l*J+E*M+K*S;f[2]=x*J+D*M+w*S;f[3]=y*J+F*M+L*S;f[4]=d*N+t*O+H*T;f[5]=l*N+E*O+K*T;f[6]=x*N+D*O+w*T;f[7]=y*N+F*O+L*T;f[8]=d*R+t*p+H*m;f[9]=l*R+E*p+K*m;f[10]=x*R+D*p+w*m;f[11]=y*R+F*p+L*m;a!==f&&(f[12]=a[12],f[13]=a[13],f[14]=a[14],f[15]=a[15]);return f};t.scalar.rotateX=function(f,a,d){var h=Math.sin(d);d=Math.cos(d);var p=a[4],m=a[5],l=a[6],q=a[7],r=a[8],v=a[9],
x=a[10],y=a[11];a!==f&&(f[0]=a[0],f[1]=a[1],f[2]=a[2],f[3]=a[3],f[12]=a[12],f[13]=a[13],f[14]=a[14],f[15]=a[15]);f[4]=p*d+r*h;f[5]=m*d+v*h;f[6]=l*d+x*h;f[7]=q*d+y*h;f[8]=r*d-p*h;f[9]=v*d-m*h;f[10]=x*d-l*h;f[11]=y*d-q*h;return f};t.SIMD.rotateX=function(f,a,d){var h=SIMD.Float32x4.splat(Math.sin(d));d=SIMD.Float32x4.splat(Math.cos(d));a!==f&&(f[0]=a[0],f[1]=a[1],f[2]=a[2],f[3]=a[3],f[12]=a[12],f[13]=a[13],f[14]=a[14],f[15]=a[15]);var p=SIMD.Float32x4.load(a,4);a=SIMD.Float32x4.load(a,8);SIMD.Float32x4.store(f,
4,SIMD.Float32x4.add(SIMD.Float32x4.mul(p,d),SIMD.Float32x4.mul(a,h)));SIMD.Float32x4.store(f,8,SIMD.Float32x4.sub(SIMD.Float32x4.mul(a,d),SIMD.Float32x4.mul(p,h)));return f};t.rotateX=A.USE_SIMD?t.SIMD.rotateX:t.scalar.rotateX;t.scalar.rotateY=function(f,a,d){var h=Math.sin(d);d=Math.cos(d);var p=a[0],m=a[1],l=a[2],q=a[3],r=a[8],v=a[9],x=a[10],y=a[11];a!==f&&(f[4]=a[4],f[5]=a[5],f[6]=a[6],f[7]=a[7],f[12]=a[12],f[13]=a[13],f[14]=a[14],f[15]=a[15]);f[0]=p*d-r*h;f[1]=m*d-v*h;f[2]=l*d-x*h;f[3]=q*d-y*
h;f[8]=p*h+r*d;f[9]=m*h+v*d;f[10]=l*h+x*d;f[11]=q*h+y*d;return f};t.SIMD.rotateY=function(f,a,d){var h=SIMD.Float32x4.splat(Math.sin(d));d=SIMD.Float32x4.splat(Math.cos(d));a!==f&&(f[4]=a[4],f[5]=a[5],f[6]=a[6],f[7]=a[7],f[12]=a[12],f[13]=a[13],f[14]=a[14],f[15]=a[15]);var p=SIMD.Float32x4.load(a,0);a=SIMD.Float32x4.load(a,8);SIMD.Float32x4.store(f,0,SIMD.Float32x4.sub(SIMD.Float32x4.mul(p,d),SIMD.Float32x4.mul(a,h)));SIMD.Float32x4.store(f,8,SIMD.Float32x4.add(SIMD.Float32x4.mul(p,h),SIMD.Float32x4.mul(a,
d)));return f};t.rotateY=A.USE_SIMD?t.SIMD.rotateY:t.scalar.rotateY;t.scalar.rotateZ=function(f,a,d){var h=Math.sin(d);d=Math.cos(d);var p=a[0],m=a[1],l=a[2],q=a[3],r=a[4],v=a[5],x=a[6],y=a[7];a!==f&&(f[8]=a[8],f[9]=a[9],f[10]=a[10],f[11]=a[11],f[12]=a[12],f[13]=a[13],f[14]=a[14],f[15]=a[15]);f[0]=p*d+r*h;f[1]=m*d+v*h;f[2]=l*d+x*h;f[3]=q*d+y*h;f[4]=r*d-p*h;f[5]=v*d-m*h;f[6]=x*d-l*h;f[7]=y*d-q*h;return f};t.SIMD.rotateZ=function(f,a,d){var h=SIMD.Float32x4.splat(Math.sin(d));d=SIMD.Float32x4.splat(Math.cos(d));
a!==f&&(f[8]=a[8],f[9]=a[9],f[10]=a[10],f[11]=a[11],f[12]=a[12],f[13]=a[13],f[14]=a[14],f[15]=a[15]);var p=SIMD.Float32x4.load(a,0);a=SIMD.Float32x4.load(a,4);SIMD.Float32x4.store(f,0,SIMD.Float32x4.add(SIMD.Float32x4.mul(p,d),SIMD.Float32x4.mul(a,h)));SIMD.Float32x4.store(f,4,SIMD.Float32x4.sub(SIMD.Float32x4.mul(a,d),SIMD.Float32x4.mul(p,h)));return f};t.rotateZ=A.USE_SIMD?t.SIMD.rotateZ:t.scalar.rotateZ;t.fromTranslation=function(f,a){f[0]=1;f[1]=0;f[2]=0;f[3]=0;f[4]=0;f[5]=1;f[6]=0;f[7]=0;f[8]=
0;f[9]=0;f[10]=1;f[11]=0;f[12]=a[0];f[13]=a[1];f[14]=a[2];f[15]=1;return f};t.fromScaling=function(f,a){f[0]=a[0];f[1]=0;f[2]=0;f[3]=0;f[4]=0;f[5]=a[1];f[6]=0;f[7]=0;f[8]=0;f[9]=0;f[10]=a[2];f[11]=0;f[12]=0;f[13]=0;f[14]=0;f[15]=1;return f};t.fromRotation=function(f,a,d){var h=d[0],p=d[1];d=d[2];var m=Math.sqrt(h*h+p*p+d*d),l;if(Math.abs(m)<A.EPSILON)return null;m=1/m;h*=m;p*=m;d*=m;m=Math.sin(a);a=Math.cos(a);l=1-a;f[0]=h*h*l+a;f[1]=p*h*l+d*m;f[2]=d*h*l-p*m;f[3]=0;f[4]=h*p*l-d*m;f[5]=p*p*l+a;f[6]=
d*p*l+h*m;f[7]=0;f[8]=h*d*l+p*m;f[9]=p*d*l-h*m;f[10]=d*d*l+a;f[11]=0;f[12]=0;f[13]=0;f[14]=0;f[15]=1;return f};t.fromXRotation=function(f,a){var d=Math.sin(a);a=Math.cos(a);f[0]=1;f[1]=0;f[2]=0;f[3]=0;f[4]=0;f[5]=a;f[6]=d;f[7]=0;f[8]=0;f[9]=-d;f[10]=a;f[11]=0;f[12]=0;f[13]=0;f[14]=0;f[15]=1;return f};t.fromYRotation=function(f,a){var d=Math.sin(a);a=Math.cos(a);f[0]=a;f[1]=0;f[2]=-d;f[3]=0;f[4]=0;f[5]=1;f[6]=0;f[7]=0;f[8]=d;f[9]=0;f[10]=a;f[11]=0;f[12]=0;f[13]=0;f[14]=0;f[15]=1;return f};t.fromZRotation=
function(f,a){var d=Math.sin(a);a=Math.cos(a);f[0]=a;f[1]=d;f[2]=0;f[3]=0;f[4]=-d;f[5]=a;f[6]=0;f[7]=0;f[8]=0;f[9]=0;f[10]=1;f[11]=0;f[12]=0;f[13]=0;f[14]=0;f[15]=1;return f};t.fromRotationTranslation=function(f,a,d){var h=a[0],p=a[1],m=a[2],l=a[3],q=h+h,r=p+p,v=m+m;a=h*q;var x=h*r,h=h*v,y=p*r,p=p*v,m=m*v,q=l*q,r=l*r,l=l*v;f[0]=1-(y+m);f[1]=x+l;f[2]=h-r;f[3]=0;f[4]=x-l;f[5]=1-(a+m);f[6]=p+q;f[7]=0;f[8]=h+r;f[9]=p-q;f[10]=1-(a+y);f[11]=0;f[12]=d[0];f[13]=d[1];f[14]=d[2];f[15]=1;return f};t.getTranslation=
function(f,a){f[0]=a[12];f[1]=a[13];f[2]=a[14];return f};t.getRotation=function(f,a){var d=a[0]+a[5]+a[10],h=0;0<d?(h=2*Math.sqrt(d+1),f[3]=.25*h,f[0]=(a[6]-a[9])/h,f[1]=(a[8]-a[2])/h,f[2]=(a[1]-a[4])/h):a[0]>a[5]&a[0]>a[10]?(h=2*Math.sqrt(1+a[0]-a[5]-a[10]),f[3]=(a[6]-a[9])/h,f[0]=.25*h,f[1]=(a[1]+a[4])/h,f[2]=(a[8]+a[2])/h):a[5]>a[10]?(h=2*Math.sqrt(1+a[5]-a[0]-a[10]),f[3]=(a[8]-a[2])/h,f[0]=(a[1]+a[4])/h,f[1]=.25*h,f[2]=(a[6]+a[9])/h):(h=2*Math.sqrt(1+a[10]-a[0]-a[5]),f[3]=(a[1]-a[4])/h,f[0]=(a[8]+
a[2])/h,f[1]=(a[6]+a[9])/h,f[2]=.25*h);return f};t.fromRotationTranslationScale=function(f,a,d,h){var p=a[0],m=a[1],l=a[2],q=a[3],r=p+p,v=m+m,x=l+l;a=p*r;var y=p*v,p=p*x,t=m*v,m=m*x,l=l*x,r=q*r,v=q*v,q=q*x,x=h[0],E=h[1];h=h[2];f[0]=(1-(t+l))*x;f[1]=(y+q)*x;f[2]=(p-v)*x;f[3]=0;f[4]=(y-q)*E;f[5]=(1-(a+l))*E;f[6]=(m+r)*E;f[7]=0;f[8]=(p+v)*h;f[9]=(m-r)*h;f[10]=(1-(a+t))*h;f[11]=0;f[12]=d[0];f[13]=d[1];f[14]=d[2];f[15]=1;return f};t.fromRotationTranslationScaleOrigin=function(f,a,d,h,p){var m=a[0],l=a[1],
q=a[2],r=a[3],v=m+m,x=l+l,y=q+q;a=m*v;var t=m*x,m=m*y,E=l*x,l=l*y,q=q*y,v=r*v,x=r*x,r=r*y,y=h[0],D=h[1];h=h[2];var F=p[0],H=p[1];p=p[2];f[0]=(1-(E+q))*y;f[1]=(t+r)*y;f[2]=(m-x)*y;f[3]=0;f[4]=(t-r)*D;f[5]=(1-(a+q))*D;f[6]=(l+v)*D;f[7]=0;f[8]=(m+x)*h;f[9]=(l-v)*h;f[10]=(1-(a+E))*h;f[11]=0;f[12]=d[0]+F-(f[0]*F+f[4]*H+f[8]*p);f[13]=d[1]+H-(f[1]*F+f[5]*H+f[9]*p);f[14]=d[2]+p-(f[2]*F+f[6]*H+f[10]*p);f[15]=1;return f};t.fromQuat=function(f,a){var d=a[0],h=a[1],p=a[2];a=a[3];var m=d+d,l=h+h,q=p+p,d=d*m,r=
h*m,h=h*l,v=p*m,x=p*l,p=p*q,m=a*m,l=a*l;a*=q;f[0]=1-h-p;f[1]=r+a;f[2]=v-l;f[3]=0;f[4]=r-a;f[5]=1-d-p;f[6]=x+m;f[7]=0;f[8]=v+l;f[9]=x-m;f[10]=1-d-h;f[11]=0;f[12]=0;f[13]=0;f[14]=0;f[15]=1;return f};t.frustum=function(f,a,d,h,p,m,l){var q=1/(d-a),r=1/(p-h),v=1/(m-l);f[0]=2*m*q;f[1]=0;f[2]=0;f[3]=0;f[4]=0;f[5]=2*m*r;f[6]=0;f[7]=0;f[8]=(d+a)*q;f[9]=(p+h)*r;f[10]=(l+m)*v;f[11]=-1;f[12]=0;f[13]=0;f[14]=l*m*2*v;f[15]=0;return f};t.perspective=function(f,a,d,h,p){a=1/Math.tan(a/2);var m=1/(h-p);f[0]=a/d;
f[1]=0;f[2]=0;f[3]=0;f[4]=0;f[5]=a;f[6]=0;f[7]=0;f[8]=0;f[9]=0;f[10]=(p+h)*m;f[11]=-1;f[12]=0;f[13]=0;f[14]=2*p*h*m;f[15]=0;return f};t.perspectiveFromFieldOfView=function(f,a,d,h){var p=Math.tan(a.upDegrees*Math.PI/180),m=Math.tan(a.downDegrees*Math.PI/180),l=Math.tan(a.leftDegrees*Math.PI/180);a=Math.tan(a.rightDegrees*Math.PI/180);var q=2/(l+a),r=2/(p+m);f[0]=q;f[1]=0;f[2]=0;f[3]=0;f[4]=0;f[5]=r;f[6]=0;f[7]=0;f[8]=-((l-a)*q*.5);f[9]=(p-m)*r*.5;f[10]=h/(d-h);f[11]=-1;f[12]=0;f[13]=0;f[14]=h*d/(d-
h);f[15]=0;return f};t.ortho=function(f,a,d,h,p,m,l){var q=1/(a-d),r=1/(h-p),v=1/(m-l);f[0]=-2*q;f[1]=0;f[2]=0;f[3]=0;f[4]=0;f[5]=-2*r;f[6]=0;f[7]=0;f[8]=0;f[9]=0;f[10]=2*v;f[11]=0;f[12]=(a+d)*q;f[13]=(p+h)*r;f[14]=(l+m)*v;f[15]=1;return f};t.lookAt=function(f,a,d,h){var p,m,l,q,r,v,x,y,C=a[0],E=a[1];a=a[2];l=h[0];q=h[1];m=h[2];x=d[0];h=d[1];p=d[2];if(Math.abs(C-x)<A.EPSILON&&Math.abs(E-h)<A.EPSILON&&Math.abs(a-p)<A.EPSILON)return t.identity(f);d=C-x;h=E-h;x=a-p;y=1/Math.sqrt(d*d+h*h+x*x);d*=y;h*=
y;x*=y;p=q*x-m*h;m=m*d-l*x;l=l*h-q*d;(y=Math.sqrt(p*p+m*m+l*l))?(y=1/y,p*=y,m*=y,l*=y):l=m=p=0;q=h*l-x*m;r=x*p-d*l;v=d*m-h*p;(y=Math.sqrt(q*q+r*r+v*v))?(y=1/y,q*=y,r*=y,v*=y):v=r=q=0;f[0]=p;f[1]=q;f[2]=d;f[3]=0;f[4]=m;f[5]=r;f[6]=h;f[7]=0;f[8]=l;f[9]=v;f[10]=x;f[11]=0;f[12]=-(p*C+m*E+l*a);f[13]=-(q*C+r*E+v*a);f[14]=-(d*C+h*E+x*a);f[15]=1;return f};t.str=function(f){return"mat4("+f[0]+", "+f[1]+", "+f[2]+", "+f[3]+", "+f[4]+", "+f[5]+", "+f[6]+", "+f[7]+", "+f[8]+", "+f[9]+", "+f[10]+", "+f[11]+", "+
f[12]+", "+f[13]+", "+f[14]+", "+f[15]+")"};t.frob=function(f){return Math.sqrt(Math.pow(f[0],2)+Math.pow(f[1],2)+Math.pow(f[2],2)+Math.pow(f[3],2)+Math.pow(f[4],2)+Math.pow(f[5],2)+Math.pow(f[6],2)+Math.pow(f[7],2)+Math.pow(f[8],2)+Math.pow(f[9],2)+Math.pow(f[10],2)+Math.pow(f[11],2)+Math.pow(f[12],2)+Math.pow(f[13],2)+Math.pow(f[14],2)+Math.pow(f[15],2))};t.add=function(f,a,d){f[0]=a[0]+d[0];f[1]=a[1]+d[1];f[2]=a[2]+d[2];f[3]=a[3]+d[3];f[4]=a[4]+d[4];f[5]=a[5]+d[5];f[6]=a[6]+d[6];f[7]=a[7]+d[7];
f[8]=a[8]+d[8];f[9]=a[9]+d[9];f[10]=a[10]+d[10];f[11]=a[11]+d[11];f[12]=a[12]+d[12];f[13]=a[13]+d[13];f[14]=a[14]+d[14];f[15]=a[15]+d[15];return f};t.subtract=function(f,a,d){f[0]=a[0]-d[0];f[1]=a[1]-d[1];f[2]=a[2]-d[2];f[3]=a[3]-d[3];f[4]=a[4]-d[4];f[5]=a[5]-d[5];f[6]=a[6]-d[6];f[7]=a[7]-d[7];f[8]=a[8]-d[8];f[9]=a[9]-d[9];f[10]=a[10]-d[10];f[11]=a[11]-d[11];f[12]=a[12]-d[12];f[13]=a[13]-d[13];f[14]=a[14]-d[14];f[15]=a[15]-d[15];return f};t.sub=t.subtract;t.multiplyScalar=function(f,a,d){f[0]=a[0]*
d;f[1]=a[1]*d;f[2]=a[2]*d;f[3]=a[3]*d;f[4]=a[4]*d;f[5]=a[5]*d;f[6]=a[6]*d;f[7]=a[7]*d;f[8]=a[8]*d;f[9]=a[9]*d;f[10]=a[10]*d;f[11]=a[11]*d;f[12]=a[12]*d;f[13]=a[13]*d;f[14]=a[14]*d;f[15]=a[15]*d;return f};t.multiplyScalarAndAdd=function(f,a,d,h){f[0]=a[0]+d[0]*h;f[1]=a[1]+d[1]*h;f[2]=a[2]+d[2]*h;f[3]=a[3]+d[3]*h;f[4]=a[4]+d[4]*h;f[5]=a[5]+d[5]*h;f[6]=a[6]+d[6]*h;f[7]=a[7]+d[7]*h;f[8]=a[8]+d[8]*h;f[9]=a[9]+d[9]*h;f[10]=a[10]+d[10]*h;f[11]=a[11]+d[11]*h;f[12]=a[12]+d[12]*h;f[13]=a[13]+d[13]*h;f[14]=
a[14]+d[14]*h;f[15]=a[15]+d[15]*h;return f};t.exactEquals=function(f,a){return f[0]===a[0]&&f[1]===a[1]&&f[2]===a[2]&&f[3]===a[3]&&f[4]===a[4]&&f[5]===a[5]&&f[6]===a[6]&&f[7]===a[7]&&f[8]===a[8]&&f[9]===a[9]&&f[10]===a[10]&&f[11]===a[11]&&f[12]===a[12]&&f[13]===a[13]&&f[14]===a[14]&&f[15]===a[15]};t.equals=function(f,a){var d=f[0],h=f[1],p=f[2],m=f[3],l=f[4],q=f[5],r=f[6],v=f[7],x=f[8],y=f[9],t=f[10],E=f[11],D=f[12],F=f[13],H=f[14];f=f[15];var K=a[0],w=a[1],L=a[2],J=a[3],M=a[4],S=a[5],N=a[6],O=a[7],
T=a[8],R=a[9],W=a[10],U=a[11],P=a[12],Y=a[13],g=a[14];a=a[15];return Math.abs(d-K)<=A.EPSILON*Math.max(1,Math.abs(d),Math.abs(K))&&Math.abs(h-w)<=A.EPSILON*Math.max(1,Math.abs(h),Math.abs(w))&&Math.abs(p-L)<=A.EPSILON*Math.max(1,Math.abs(p),Math.abs(L))&&Math.abs(m-J)<=A.EPSILON*Math.max(1,Math.abs(m),Math.abs(J))&&Math.abs(l-M)<=A.EPSILON*Math.max(1,Math.abs(l),Math.abs(M))&&Math.abs(q-S)<=A.EPSILON*Math.max(1,Math.abs(q),Math.abs(S))&&Math.abs(r-N)<=A.EPSILON*Math.max(1,Math.abs(r),Math.abs(N))&&
Math.abs(v-O)<=A.EPSILON*Math.max(1,Math.abs(v),Math.abs(O))&&Math.abs(x-T)<=A.EPSILON*Math.max(1,Math.abs(x),Math.abs(T))&&Math.abs(y-R)<=A.EPSILON*Math.max(1,Math.abs(y),Math.abs(R))&&Math.abs(t-W)<=A.EPSILON*Math.max(1,Math.abs(t),Math.abs(W))&&Math.abs(E-U)<=A.EPSILON*Math.max(1,Math.abs(E),Math.abs(U))&&Math.abs(D-P)<=A.EPSILON*Math.max(1,Math.abs(D),Math.abs(P))&&Math.abs(F-Y)<=A.EPSILON*Math.max(1,Math.abs(F),Math.abs(Y))&&Math.abs(H-g)<=A.EPSILON*Math.max(1,Math.abs(H),Math.abs(g))&&Math.abs(f-
a)<=A.EPSILON*Math.max(1,Math.abs(f),Math.abs(a))};return t})},"esri/core/libs/gl-matrix/common":function(){define([],function(){var A={EPSILON:1E-6};A.ARRAY_TYPE="undefined"!==typeof Float32Array?Float32Array:Array;A.RANDOM=Math.random;A.ENABLE_SIMD=!1;A.SIMD_AVAILABLE=A.ARRAY_TYPE===Float32Array&&"SIMD"in this;A.USE_SIMD=A.ENABLE_SIMD&&A.SIMD_AVAILABLE;A.setMatrixArrayType=function(f){A.ARRAY_TYPE=f};var t=Math.PI/180;A.toRadian=function(f){return f*t};A.equals=function(f,a){return Math.abs(f-a)<=
A.EPSILON*Math.max(1,Math.abs(f),Math.abs(a))};return A})},"esri/views/2d/engine/webgl/Dispatcher":function(){define(["require","exports","./enums"],function(A,t,f){return function(){function a(){}a.prototype.replayList=function(a,f,p,m,l,q,r,v,x,y){var d=this;f=f.symbolLevels;f.length<=p||!(p=f[p])||(a.setStencilTestEnabled(!0),a.setStencilFunction(514,l.stencilRef,255),p.zLevels.forEach(function(f){f=f.geometryDPInfo;f.fill&&d._draw(a,f.fill,m,l,v,x,q,r,y);f.line&&d._draw(a,f.line,m,l,v,x,q,r,y);
f.marker&&d._draw(a,f.marker,m,l,v,x,q,r,y);f.text&&d._draw(a,f.text,m,l,v,x,q,r,y)}))};a.prototype._draw=function(a,h,p,m,l,q,r,v,x){h.forEach(function(d){switch(d.geometryType){case f.WGLGeometryType.FILL:p.drawFill(a,d.materialInfo,m,r,v,l,q,x,d.indexFrom,d.indexCount);break;case f.WGLGeometryType.LINE:p.drawLine(a,d.materialInfo,m,r,v,l,q,d.indexFrom,d.indexCount);break;case f.WGLGeometryType.MARKER:p.drawIcon(a,d.materialInfo,m,r,v,d.indexFrom,d.indexCount);break;case f.WGLGeometryType.TEXT:p.drawText(a,
d.materialInfo,m,r,v,d.indexFrom,d.indexCount)}})};return a}()})},"esri/views/2d/engine/webgl/enums":function(){define(["require","exports"],function(A,t){Object.defineProperty(t,"__esModule",{value:!0});(function(f){f[f.FILL=0]="FILL";f[f.LINE=1]="LINE";f[f.MARKER=2]="MARKER";f[f.TEXT=3]="TEXT";f[f.UNKNOWN=4]="UNKNOWN"})(t.WGLGeometryType||(t.WGLGeometryType={}));(function(f){f[f.SUCCEEDED=0]="SUCCEEDED";f[f.FAILED_OUT_OF_MEMORY=1]="FAILED_OUT_OF_MEMORY"})(t.WGLGeometryTransactionStatus||(t.WGLGeometryTransactionStatus=
{}));(function(f){f[f.GEOMETRY=1]="GEOMETRY";f[f.TEXT=2]="TEXT";f[f.HITTEST=3]="HITTEST";f[f.HIGHLIGHT=4]="HIGHLIGHT"})(t.WGLDrawPhase||(t.WGLDrawPhase={}));(function(f){f[f.NONE=0]="NONE";f[f.OPACITY=1]="OPACITY";f[f.COLOR=2]="COLOR";f[f.ROTATION=4]="ROTATION";f[f.SIZE_MINMAX_VALUE=8]="SIZE_MINMAX_VALUE";f[f.SIZE_SCALE_STOPS=16]="SIZE_SCALE_STOPS";f[f.SIZE_FIELD_STOPS=32]="SIZE_FIELD_STOPS";f[f.SIZE_UNIT_VALUE=64]="SIZE_UNIT_VALUE"})(t.WGLVVFlag||(t.WGLVVFlag={}))})},"esri/views/2d/engine/webgl/TextureManager":function(){define("require exports dojo/Deferred ../../../../core/promiseUtils ../../../3d/support/imageUtils ./SpriteMosaic ./Utils ./CIMSymbolHelper ./SDFHelper ./GlyphSource ./GlyphMosaic".split(" "),
function(A,t,f,a,d,h,p,m,l,q,r){var v=[];return function(){function x(){this._rasterizeQueue=new Map;this._spriteMosaic=new h(1024,1024,250);this._glyphSource=new q("https://basemaps.arcgis.com/v1/arcgis/rest/services/World_Basemap/VectorTileServer/resources/fonts/{fontstack}/{range}.pbf");this._glyphMosaic=new r(1024,1024,this._glyphSource)}Object.defineProperty(x.prototype,"sprites",{get:function(){return this._spriteMosaic},enumerable:!0,configurable:!0});Object.defineProperty(x.prototype,"glyphs",
{get:function(){return this._glyphMosaic},enumerable:!0,configurable:!0});x.prototype.processItems=function(a){var d=this;if(a.done)return!1;for(;this._spriteMosaic.hasItemsToProcess();)this._spriteMosaic.processNextItem();this._rasterizeQueue.forEach(function(f,h){if(a.done)return!1;var l=d._rasterizeJSON(h);f.resolve(l);v.push(h)});for(var f=0;f<v.length;f++)this._rasterizeQueue.delete(v[f]);v.length=0;return!0};x.prototype.rasterizeItem=function(d,f){void 0===f&&(f=null);return d?d.type&&"text"===
d.type?this._rasterizeTextSymbol(d,f).then(function(a){return{glyphMosaicItems:a}}):this._rasterizeSpriteSymbol(d).then(function(a){return{spriteMosaicItem:a}}):a.resolve(null)};x.prototype.bindSpritePage=function(a,d,f,h){h||(h=9729);this._spriteMosaic.bind(a,h,d,f)};x.prototype.bindGlyphsPage=function(a,d,f){this._glyphMosaic.bind(a,9729,d,f)};x.prototype._rasterizeTextSymbol=function(a,d){return this._glyphMosaic.getGlyphItems(a,d)};x.prototype._rasterizeSpriteSymbol=function(f){var h=this;return!p.isFillSymbol(f)&&
!p.isLineSymbol(f)||"solid"!==f.style&&"none"!==f.style?this._spriteMosaic.has(f)?a.resolve(this._spriteMosaic.getSpriteItem(f)):f.url?d.requestImage(f.url).then(function(a){return h._rasterizeResource(a).then(function(a){return h._addItemToMosaic(f,a.size,a.anchor,a.image,!p.isMarkerSymbol(f),a.sdf)})}):this._rasterizeResource(f).then(function(a){return h._addItemToMosaic(f,a.size,a.anchor,a.image,!p.isMarkerSymbol(f),a.sdf)}):a.resolve(null)};x.prototype._rasterizeResource=function(a){var d=this;
if(this._rasterizeQueue.has(a))return this._rasterizeQueue.get(a).promise;var h=new f(function(){d._rasterizeQueue.has(a)&&d._rasterizeQueue.delete(a)});if(a instanceof HTMLImageElement){this._rasterizationCanvas||(this._rasterizationCanvas=document.createElement("canvas"));this._rasterizationCanvas.width=a.width;this._rasterizationCanvas.height=a.height;var l=this._rasterizationCanvas.getContext("2d");l.drawImage(a,0,0,a.width,a.height);for(var l=l.getImageData(0,0,a.width,a.height),l=new Uint8Array(l.data),
m=void 0,p=0;p<l.length;p+=4)m=l[p+3]/255,l[p]*=m,l[p+1]*=m,l[p+2]*=m;h.resolve({size:[a.width,a.height],anchor:[0,0],image:new Uint32Array(l.buffer),sdf:!1})}else l=this._rasterizeJSON(a),h.resolve(l);return h.promise};x.prototype._addItemToMosaic=function(a,d,f,h,l,m){return this._spriteMosaic.addSpriteItem(a,d,f,h,l,m)};x.prototype._rasterizeJSON=function(a){this._rasterizationCanvas||(this._rasterizationCanvas=document.createElement("canvas"));if("simple-fill"===a.type){var d=m.SymbolHelper.rasterizeSimpleFill(this._rasterizationCanvas,
a.style);a=d[0];var f=d[1],d=d[2];return{size:[f,d],anchor:[0,0],image:new Uint32Array(a.buffer),sdf:!1}}if("simple-line"===a.type)return d=m.SymbolHelper.rasterizeSimpleLine(this._rasterizationCanvas,a.style),a=d[0],f=d[1],d=d[2],{size:[f,d],anchor:[0,0],image:new Uint32Array(a.buffer),sdf:!0};"simple-marker"===a.type?(a=m.CIMSymbolHelper.fromSimpleMarker(a),f=!0):f=l.SDFHelper.checkSDF(a);if(f)return f=(new l.SDFHelper).buildSDF(a),a=f[0],{size:[f[1],f[2]],anchor:[0,0],image:new Uint32Array(a.buffer),
sdf:!0};var h=m.CIMSymbolHelper.rasterize(this._rasterizationCanvas,a);a=h[0];f=h[1];d=h[2];return{size:[f,d],anchor:[h[3],h[4]],image:new Uint32Array(a.buffer),sdf:!1}};return x}()})},"esri/views/3d/support/imageUtils":function(){define(["require","exports","dojo/Deferred","../../../core/urlUtils","../../../request"],function(A,t,f,a,d){function h(a){var d=!1,h=new Image,p=new f(function(){d=!0;h.src=""}),r=function(){d||p.reject()};h.onload=function(){d||p.resolve(h)};h.onerror=r;h.onabort=r;h.src=
a;return p.promise}Object.defineProperty(t,"__esModule",{value:!0});t.dataURItoBlob=function(a){var d=atob(a.split(",")[1]);a=a.split(",")[0].split(":")[1].split(";")[0];for(var f=new ArrayBuffer(d.length),h=new Uint8Array(f),p=0;p<d.length;p++)h[p]=d.charCodeAt(p);return new Blob([f],{type:a})};t.dataUriToImage=h;t.requestImage=function(f){return a.isDataProtocol(f)?h(f):d(f,{responseType:"image",allowImageDataAccess:!0}).then(function(a){return a.data})}})},"esri/views/2d/engine/webgl/SpriteMosaic":function(){define("require exports ./Rect ./GeometryUtils ./RectangleBinPack ../../../webgl/Texture".split(" "),
function(A,t,f,a,d,h){return function(){function p(a,f,h){void 0===h&&(h=0);this._size=[];this._mosaicsData=[];this._textures=[];this._dirties=[];this._pageHeight=this._pageWidth=this._currentPage=this._maxItemSize=0;this._mosaicRects=new Map;this._spriteCopyQueue=[];this.pixelRatio=1;(0>=a||0>=f)&&console.error("Sprites mosaic defaultWidth and defaultHeight must be greater than zero!");this._pageWidth=a;this._pageHeight=f;0<h&&(this._maxItemSize=h);this.pixelRatio=window.devicePixelRatio|1;this._binPack=
new d(this._pageWidth,this._pageHeight);this._mosaicsData[0]=new Uint32Array(Math.floor(this._pageWidth)*Math.floor(this._pageHeight));this._dirties.push(!0);this._size.push([this._pageWidth,this._pageHeight]);this._textures.push(void 0)}p.prototype.getWidth=function(a){return a>=this._size.length?-1:this._size[a][0]};p.prototype.getHeight=function(a){return a>=this._size.length?-1:this._size[a][1]};p.prototype.getPage=function(a){return a<this._textures.length?this._textures[a]:null};p.prototype.has=
function(a){return this._mosaicRects.has(a)};p.prototype.getSpriteItem=function(a){return this._mosaicRects.get(a)};p.prototype.addSpriteItem=function(a,d,f,h,p,x){if(this._mosaicRects.has(a))return this._mosaicRects.get(a);var l=this._allocateImage(d[0],d[1]),m=l[0],q=l[1],l=l[2];if(0>=m.width||0>=m.height)return null;f={rect:m,width:d[0],height:d[1],anchorX:f[0],anchorY:f[1],sdf:x,pixelRatio:1,page:q};this._mosaicRects.set(a,f);this._copy({rect:m,spriteSize:d,spriteData:h,page:q,pageSize:l,repeat:p,
sdf:x});return f};p.prototype.hasItemsToProcess=function(){return 0!==this._spriteCopyQueue.length};p.prototype.processNextItem=function(){var a=this._spriteCopyQueue.pop();a&&this._copy(a)};p.prototype.getSpriteItems=function(a){for(var d={},f=0;f<a.length;f++){var h=a[f];d[h]=this.getSpriteItem(h)}return d};p.prototype.getMosaicItemPosition=function(a,d){d=(a=this.getSpriteItem(a))&&a.rect;if(!d)return null;d.width=a.width;d.height=a.height;return{size:[a.width,a.height],tl:[(d.x+1)/this._size[a.page][0],
(d.y+1)/this._size[a.page][1]],br:[(d.x+1+a.width)/this._size[a.page][0],(d.y+1+a.height)/this._size[a.page][1]],page:a.page}};p.prototype.bind=function(a,d,f,p){void 0===f&&(f=0);void 0===p&&(p=0);this._textures[f]||(this._textures[f]=new h(a,{pixelFormat:6408,dataType:5121,width:this._size[f][0],height:this._size[f][1]},new Uint8Array(this._mosaicsData[f].buffer)));var l=this._textures[f];l.setSamplingMode(d);this._dirties[f]&&(l.setData(new Uint8Array(this._mosaicsData[f].buffer)),l.generateMipmap());
a.bindTexture(l,p);this._dirties[f]=!1};p._copyBits=function(a,d,f,h,p,x,y,t,E,D,F){var l=h*d+f;y=t*x+y;if(F)for(y-=x,F=-1;F<=D;F++,l=((F+D)%D+h)*d+f,y+=x)for(t=-1;t<=E;t++)p[y+t]=a[l+(t+E)%E];else for(F=0;F<D;F++){for(t=0;t<E;t++)p[y+t]=a[l+t];l+=d;y+=x}};p.prototype._copy=function(a){if(!(a.page>=this._mosaicsData.length)){var d=a.spriteData,f=this._mosaicsData[a.page];f&&d||console.error("Source or target images are uninitialized!");p._copyBits(d,a.spriteSize[0],0,0,f,a.pageSize[0],a.rect.x+1,
a.rect.y+1,a.spriteSize[0],a.spriteSize[1],a.repeat);this._dirties[a.page]=!0}};p.prototype._allocateImage=function(h,l){h+=2;l+=2;var m=Math.max(h,l);if(this._maxItemSize&&this._maxItemSize<m){var m=Math.pow(2,Math.ceil(a.log2(h))),p=Math.pow(2,Math.ceil(a.log2(l)));h=new f(0,0,h,l);this._mosaicsData.push(new Uint32Array(m*p));this._dirties.push(!0);this._size.push([m,p]);this._textures.push(void 0);return[h,this._mosaicsData.length-1,[m,p]]}m=this._binPack.allocate(h+(h%4?4-h%4:0),l+(l%4?4-l%4:
0));return 0>=m.width?(this._dirties[this._currentPage]||(this._mosaicsData[this._currentPage]=null),this._currentPage=this._mosaicsData.length,this._mosaicsData.push(new Uint32Array(this._pageWidth*this._pageHeight)),this._dirties.push(!0),this._size.push([this._pageWidth,this._pageHeight]),this._textures.push(void 0),this._binPack=new d(this._pageWidth,this._pageHeight),this._allocateImage(h,l)):[m,this._currentPage,[this._pageWidth,this._pageHeight]]};p.prototype._dispose=function(){this._binPack=
null;this._mosaicRects.clear()};return p}()})},"esri/views/2d/engine/webgl/Rect":function(){define(["require","exports"],function(A,t){return function(){function f(a,d,f,p){void 0===a&&(a=0);void 0===d&&(d=0);void 0===f&&(f=0);void 0===p&&(p=0);this.x=a;this.y=d;this.width=f;this.height=p}Object.defineProperty(f.prototype,"isEmpty",{get:function(){return 0>=this.width||0>=this.height},enumerable:!0,configurable:!0});return f}()})},"esri/views/2d/engine/webgl/GeometryUtils":function(){define(["require",
"exports"],function(A,t){function f(a,f){a%=f;return 0<=a?a:a+f}Object.defineProperty(t,"__esModule",{value:!0});t.C_INFINITY=Number.POSITIVE_INFINITY;t.C_PI=Math.PI;t.C_2PI=2*t.C_PI;t.C_PI_BY_2=t.C_PI/2;t.C_RAD_TO_256=128/t.C_PI;t.C_256_TO_RAD=t.C_PI/128;t.C_DEG_TO_256=256/360;t.C_DEG_TO_RAD=t.C_PI/180;t.C_SQRT2=1.414213562;t.C_SQRT2_INV=1/t.C_SQRT2;var a=1/Math.LN2;t.positiveMod=f;t.radToByte=function(a){return f(a*t.C_RAD_TO_256,256)};t.degToByte=function(a){return f(a*t.C_DEG_TO_256,256)};t.log2=
function(d){return Math.log(d)*a};t.sqr=function(a){return a*a};t.clamp=function(a,f,p){return Math.min(Math.max(a,f),p)};t.interpolate=function(a,f,p){return a*(1-p)+f*p};t.between=function(a,f,p){return a>=f&&a<=p||a>=p&&a<=f}})},"esri/views/2d/engine/webgl/RectangleBinPack":function(){define(["require","exports","./Rect"],function(A,t,f){return function(){function a(a,h){this._height=this._width=0;this._free=[];this._width=a;this._height=h;this._free.push(new f(0,0,a,h))}a.prototype.allocate=function(a,
h){for(var d=null,m=-1,l=0;l<this._free.length;++l){var q=this._free[l];a<=q.width&&h<=q.height&&(null===d||q.y<=d.y&&q.x<=d.x)&&(d=q,m=l)}if(null===d)return new f;this._free.splice(m,1);d.width<d.height?(d.width>a&&this._free.push(new f(d.x+a,d.y,d.width-a,h)),d.height>h&&this._free.push(new f(d.x,d.y+h,d.width,d.height-h))):(d.width>a&&this._free.push(new f(d.x+a,d.y,d.width-a,d.height)),d.height>h&&this._free.push(new f(d.x,d.y+h,a,d.height-h)));return new f(d.x,d.y,a,h)};a.prototype.release=function(a){for(var d=
0;d<this._free.length;++d){var f=this._free[d];if(f.y===a.y&&f.height===a.height&&f.x+f.width===a.x)f.width+=a.width;else if(f.x===a.x&&f.width===a.width&&f.y+f.height===a.y)f.height+=a.height;else if(a.y===f.y&&a.height===f.height&&a.x+a.width===f.x)f.x=a.x,f.width+=a.width;else if(a.x===f.x&&a.width===f.width&&a.y+a.height===f.y)f.y=a.y,f.height+=a.height;else continue;this._free.splice(d,1);this.release(a)}this._free.push(a)};return a}()})},"esri/views/2d/engine/webgl/Utils":function(){define(["require",
"exports","./enums"],function(A,t,f){function a(a){for(var d={},f=0;f<a.length;f++){var h=a[f];d[h.name]=h.strideInBytes}return d}function d(a){if(a.type){switch(a.type){case "simple-marker":case "picture-marker":return!0;case "CIMPointSymbol":return!0}return!1}}function h(a){if(a.type){switch(a.type){case "simple-fill":case "picture-fill":return!0;case "CIMPolygonSymbol":return!0}return!1}}function p(a){if(a.type){switch(a.type){case "simple-line":case "picture-line":return!0;case "CIMLineSymbol":return!0}return!1}}
function m(a){if(a.type){switch(a.type){case "text":return!0;case "CIMTextSymbol":return!0}return!1}}function l(a){return a&&a.length||0}function q(a,d,f){var h=0;do{var l=a%128;a-=l;a/=128;0<a&&(l+=128);d&&(d[f+h]=l);++h}while(0<a);return h}function r(a,d,f){for(var h=0,l=0,m=!0,p=1;m;){var q=d[f+h];++h;128<=q?(q-=128,m=!0):m=!1;l+=q*p;p*=128}a.n=l;return h}function v(a,d,f){void 0===d&&(d=0);void 0===f&&(f=!1);var h=a[d+3];a[d+0]*=h;a[d+1]*=h;a[d+2]*=h;f||(a[d+3]*=255);return a}function x(a){return"string"===
typeof a}Object.defineProperty(t,"__esModule",{value:!0});t.C_HITTEST_SEARCH_SIZE=4;t.C_TILE_SIZE=512;t.C_VBO_GEOMETRY="geometry";t.C_VBO_PERINSTANCE="per_instance";t.C_VBO_PERINSTANCE_VV="per_instance_vv";t.C_VBO_VISIBILITY="visibility";t.C_ICON_VERTEX_DEF=[{name:t.C_VBO_GEOMETRY,strideInBytes:24,divisor:0}];t.C_ICON_VERTEX_DEF_VV=[{name:t.C_VBO_GEOMETRY,strideInBytes:40,divisor:0}];t.C_ICON_HEATMAP=[{name:t.C_VBO_GEOMETRY,strideInBytes:28,divisor:0}];t.C_FILL_VERTEX_DEF=[{name:t.C_VBO_GEOMETRY,
strideInBytes:24,divisor:0}];t.C_FILL_VERTEX_DEF_VV=[{name:t.C_VBO_GEOMETRY,strideInBytes:32,divisor:0}];t.C_LINE_VERTEX_DEF=[{name:t.C_VBO_GEOMETRY,strideInBytes:32,divisor:0}];t.C_LINE_VERTEX_DEF_VV=[{name:t.C_VBO_GEOMETRY,strideInBytes:44,divisor:0}];t.C_TEXT_VERTEX_DEF=[{name:t.C_VBO_GEOMETRY,strideInBytes:24,divisor:0},{name:t.C_VBO_VISIBILITY,strideInBytes:1,divisor:0}];t.C_TEXT_VERTEX_DEF_VV=[{name:t.C_VBO_GEOMETRY,strideInBytes:40,divisor:0},{name:t.C_VBO_VISIBILITY,strideInBytes:1,divisor:0}];
t.C_ICON_STRIDE_SPEC=a(t.C_ICON_VERTEX_DEF);t.C_ICON_STRIDE_SPEC_VV=a(t.C_ICON_VERTEX_DEF_VV);t.C_ICON_STRIDE_SPEC_HEATMAP=a(t.C_ICON_HEATMAP);t.C_FILL_STRIDE_SPEC=a(t.C_FILL_VERTEX_DEF);t.C_FILL_STRIDE_SPEC_VV=a(t.C_FILL_VERTEX_DEF_VV);t.C_LINE_STRIDE_SPEC=a(t.C_LINE_VERTEX_DEF);t.C_LINE_STRIDE_SPEC_VV=a(t.C_LINE_VERTEX_DEF_VV);t.C_TEXT_STRIDE_SPEC=a(t.C_TEXT_VERTEX_DEF);t.C_TEXT_STRIDE_SPEC_VV=a(t.C_TEXT_VERTEX_DEF_VV);t.getStrides=function(a,d,h){void 0===h&&(h=!1);switch(a){case f.WGLGeometryType.MARKER:return d?
t.C_ICON_STRIDE_SPEC_VV:h?t.C_ICON_STRIDE_SPEC_HEATMAP:t.C_ICON_STRIDE_SPEC;case f.WGLGeometryType.FILL:return d?t.C_FILL_STRIDE_SPEC_VV:t.C_FILL_STRIDE_SPEC;case f.WGLGeometryType.LINE:return d?t.C_LINE_STRIDE_SPEC_VV:t.C_LINE_STRIDE_SPEC;case f.WGLGeometryType.TEXT:return d?t.C_TEXT_STRIDE_SPEC_VV:t.C_TEXT_STRIDE_SPEC}return null};t.getSymbolGeometryType=function(a){return d(a)?f.WGLGeometryType.MARKER:p(a)?f.WGLGeometryType.LINE:h(a)?f.WGLGeometryType.FILL:m(a)?f.WGLGeometryType.TEXT:f.WGLGeometryType.UNKNOWN};
t.isMarkerSymbol=d;t.isFillSymbol=h;t.isLineSymbol=p;t.isPictureSymbol=function(a){if(a.type)switch(a.type){case "picture-marker":case "picture-line":case "picture-fill":return!0}return!1};t.isTextSymbol=m;t.isSameUniformValue=function(a,d){return!1};t.isSameMaterialInfo=function(a,d){if(a.materialKey!==d.materialKey||l(a.texBindingInfo)!==l(d.texBindingInfo)||l(a.materialParams)!==l(d.materialParams))return!1;for(var f=a.texBindingInfo.length,h=0;h<f;++h){var m=a.texBindingInfo[h],p=d.texBindingInfo[h];
if(m.unit!==p.unit||m.pageId!==p.pageId||m.semantic!==p.semantic)return!1}a=a.materialParams.length;for(h=0;h<a;)return!1;return!0};t.i1616to32=function(a,d){return 65535&a|d<<16};t.i8888to32=function(a,d,f,h){return a&255|(d&255)<<8|(f&255)<<16|h<<24};t.i8816to32=function(a,d,f){return a&255|(d&255)<<8|f<<16};t.numTo32=function(a){return a|0};t.serializeInteger=q;t.deserializeInteger=r;t.serializeString=function(a,d,f){for(var h=0,l=a.length,m=0;m<l;++m)d&&(d[f+h]=a.charCodeAt(m)),++h;d&&(d[f+h]=
0);++h;return h};t.deserializeString=function(a,d,f){var h=0;a.s="";for(var l=!0;l;){var m=d[f+h];++h;0!==m?a.s+=String.fromCharCode(m):l=!1}return h};t.serializeUniform=function(a,d,f){return q(a,d,f)};t.deserializeUniform=function(a,d,f){return r(a,d,f)};t.premultiplyAlpha=v;t.copyAndPremultiply=function(a){a=Array.isArray(a)?[a[0],a[1],a[2],a[3]]:[a.r,a.g,a.b,a.a];v(a);return a};t.nextHighestPowerOfTwo=function(a){a--;a|=a>>1;a|=a>>2;a|=a>>4;a|=a>>8;a|=a>>16;a++;return a};t.isDefined=function(a){return null!==
a&&void 0!==a};t.isNumber=function(a){return"number"===typeof a};t.isString=x;t.isStringOrNull=function(a){return null==a||x(a)};t.lerp=function(a,d,f){return a+(d-a)*f}})},"esri/views/2d/engine/webgl/CIMSymbolHelper":function(){define(["require","exports","../../../vectorTiles/GeometryUtils","./CIMSymbolDrawHelper","./SDFHelper"],function(A,t,f,a,d){Object.defineProperty(t,"__esModule",{value:!0});A=function(){function d(){}d.getEnvelope=function(d){if("CIMPointSymbol"!==d.type)return null;var f=
new a.EnvDrawHelper;f.drawSymbol(d,{type:"point",x:0,y:0});return f.envelope()};d.rasterize=function(d,f){var h=this.getEnvelope(f);if(!h||0>=h.width||0>=h.height)return[null,0,0,0,0];var m=96/72,p=(h.x+.5*h.width)*m,v=-(h.y+.5*h.height)*m;d.width=h.width*m+2;d.height=h.height*m+2;h=d.getContext("2d");m=a.Transformation.createScale(m,-m);m.translate(.5*d.width-p,.5*d.height-v);(new a.CanvasDrawHelper(h,m)).drawSymbol(f,{type:"point",x:0,y:0});f=h.getImageData(0,0,d.width,d.height);f=new Uint8Array(f.data);
for(h=0;h<f.length;h+=4)m=f[h+3]/255,f[h]*=m,f[h+1]*=m,f[h+2]*=m;return[f,d.width,d.height,p/d.width,v/d.height]};d.fromSimpleMarker=function(a){var d,h,p=a.style;if("circle"===p){d=Math.acos(.995);h=Math.ceil(f.C_PI/d/4);0===h&&(h=1);d=f.C_PI_BY_2/h;h*=4;p=[];p.push([50,0]);for(var r=1;r<h;r++)p.push([50*Math.cos(r*d),-50*Math.sin(r*d)]);p.push([50,0]);d={rings:[p]};h={xmin:-50,ymin:-50,xmax:50,ymax:50}}else"cross"===p?(d=10,d={rings:[[[d,50],[d,d],[50,d],[50,-d],[d,-d],[d,-50],[-d,-50],[-d,-d],
[-50,-d],[-50,d],[-d,d],[-d,50],[d,50]]]},h={xmin:-50,ymin:-50,xmax:50,ymax:50}):"diamond"===p?(d={rings:[[[-50,0],[0,50],[50,0],[0,-50],[-50,0]]]},h={xmin:-50,ymin:-50,xmax:50,ymax:50}):"square"===p?(d={rings:[[[-50,-50],[-50,50],[50,50],[50,-50],[-50,-50]]]},h={xmin:-50,ymin:-50,xmax:50,ymax:50}):"x"===p?(d=14.142135623730951,d={rings:[[[0,d],[50-d,50],[50,50-d],[d,0],[50,d-50],[50-d,-50],[0,-d],[d-50,-50],[-50,d-50],[-d,0],[-50,50-d],[d-50,50],[0,d]]]},h={xmin:-50,ymin:-50,xmax:50,ymax:50}):"triangle"===
p&&(h=2/3*100,p=h-100,d={rings:[[[-57.735026918962575,p],[0,h],[57.735026918962575,p],[-57.735026918962575,p]]]},h={xmin:-57.735026918962575,ymin:p,xmax:57.735026918962575,ymax:h});var v;d&&h&&(v=[{type:"CIMSolidFill",enable:!0,color:a.color}],a.outline&&v.push({type:"CIMSolidStroke",enable:!0,width:a.outline.width,color:a.outline.color}),v={type:"CIMPointSymbol",symbolLayers:[{type:"CIMVectorMarker",enable:!0,rotation:a.angle,size:a.size,offsetX:a.xoffset,offsetY:a.yoffset,frame:h,markerGraphics:[{type:"CIMMarkerGraphic",
geometry:d,symbol:{type:"CIMPolygonSymbol",symbolLayers:v}}]}]});return v};return d}();t.CIMSymbolHelper=A;A=function(){function a(){}a.rasterizeSimpleFill=function(a,d){"solid"!==d&&"none"!==d||console.error("Unexpected: style does not require rasterization");a.width=8;a.height=8;var f=a.getContext("2d");f.strokeStyle="#FFFFFF";f.beginPath();if("vertical"===d||"cross"===d)f.moveTo(0,0),f.lineTo(0,8);if("horizontal"===d||"cross"===d)f.moveTo(0,0),f.lineTo(8,0);if("forward-diagonal"===d||"diagonal-cross"===
d)f.moveTo(0,0),f.lineTo(8,8);if("backward-diagonal"===d||"diagonal-cross"===d)f.moveTo(8,0),f.lineTo(0,8);f.stroke();d=f.getImageData(0,0,a.width,a.height);d=new Uint8Array(d.data);for(var h=0;h<d.length;h+=4)f=d[h+3]/255,d[h]*=f,d[h+1]*=f,d[h+2]*=f;return[d,a.width,a.height]};a.rasterizeSimpleLine=function(a,f){var h;switch(f){case "dash":h=[3,2];break;case "dash-dot":h=[2,2,0,2];break;case "dot":h=[0,3];break;case "long-dash":h=[6,3];break;case "long-dash-dot":h=[6,3,0,3];break;case "long-dash-dot-dot":h=
[2,2,0,2,0,2];break;case "short-dash":h=[2,2];break;case "short-dash-dot":h=[2,2,0,2];break;case "short-dash-dot-dot":h=[2,2,0,2,0,2];break;case "short-dot":h=[0,2];break;case "solid":throw Error("Unexpected: style does not require rasterization");case "none":throw Error("Unexpected: style does not require rasterization");}f=a=0;for(var m=h;f<m.length;f++){var p=m[f];a+=p}a*=16;m=31*a;f=new Float32Array(m);for(p=0;p<m;++p)f[p]=257;for(var v=m=.5,x=!0,y=0;y<h.length;y++){for(var p=h[y],m=v,v=v+16*
p,t=m;t<v;){for(var E=.5;31>E;){var p=(31-E+1.5)*a+t-.5,D=(E-15.5)*(E-15.5);f[p]=x?D:Math.min((t-m)*(t-m)+D,(t-v)*(t-v)+D);E++}t++}x=!x}h=f.length;m=new Uint8Array(4*h);for(p=0;p<h;++p)d.packFloat(Math.sqrt(f[p])/15,m,4*p);return[m,a,31]};return a}();t.SymbolHelper=A})},"esri/views/vectorTiles/GeometryUtils":function(){define(["require","exports"],function(A,t){function f(a,f){a%=f;return 0<=a?a:a+f}Object.defineProperty(t,"__esModule",{value:!0});t.C_INFINITY=Number.POSITIVE_INFINITY;t.C_PI=Math.PI;
t.C_2PI=2*t.C_PI;t.C_PI_BY_2=t.C_PI/2;t.C_RAD_TO_256=128/t.C_PI;t.C_256_TO_RAD=t.C_PI/128;t.C_DEG_TO_256=256/360;t.C_DEG_TO_RAD=t.C_PI/180;t.C_SQRT2=1.414213562;t.C_SQRT2_INV=1/t.C_SQRT2;var a=1/Math.LN2;t.positiveMod=f;t.radToByte=function(a){return f(a*t.C_RAD_TO_256,256)};t.degToByte=function(a){return f(a*t.C_DEG_TO_256,256)};t.log2=function(d){return Math.log(d)*a};t.sqr=function(a){return a*a};t.clamp=function(a,f,p){return Math.min(Math.max(a,f),p)};t.interpolate=function(a,f,p){return a*(1-
p)+f*p};t.between=function(a,f,p){return a>=f&&a<=p||a>=p&&a<=f}})},"esri/views/2d/engine/webgl/CIMSymbolDrawHelper":function(){define("require exports ../../../../core/tsSupport/extendsHelper ../../../../core/tsSupport/decorateHelper ./Rect ./GeometryUtils".split(" "),function(A,t,f,a,d,h){Object.defineProperty(t,"__esModule",{value:!0});var p=function(){function a(a){this._t=a}a.createIdentity=function(){return new a([1,0,0,0,1,0])};a.prototype.clone=function(){return new a(this._t.slice())};a.prototype.transform=
function(a){var d=this._t;return[d[0]*a[0]+d[1]*a[1]+d[2],d[3]*a[0]+d[4]*a[1]+d[5]]};a.createScale=function(d,f){return new a([d,0,0,0,f,0])};a.prototype.scale=function(a,d){var f=this._t;f[0]*=a;f[1]*=a;f[2]*=a;f[3]*=d;f[4]*=d;f[5]*=d;return this};a.prototype.scaleRatio=function(){return Math.sqrt(this._t[0]*this._t[0]+this._t[1]*this._t[1])};a.createTranslate=function(d,f){return new a([0,0,d,0,0,f])};a.prototype.translate=function(a,d){var f=this._t;f[2]+=a;f[5]+=d;return this};a.createRotate=
function(d){var f=Math.cos(d);d=Math.sin(d);return new a([f,-d,0,d,f,0])};a.prototype.rotate=function(d){return this.multiply(a.createRotate(d))};a.prototype.multiply=function(a){var d=this._t;a=a._t;var f=d[1]*a[0]+d[4]*a[1],h=d[2]*a[0]+d[5]*a[1]+a[2],l=d[0]*a[3]+d[3]*a[4],m=d[1]*a[3]+d[4]*a[4],p=d[2]*a[3]+d[5]*a[4]+a[5];d[0]=d[0]*a[0]+d[3]*a[1];d[1]=f;d[2]=h;d[3]=l;d[4]=m;d[5]=p;return this};return a}();t.Transformation=p;A=function(){function a(a){this._transfos=[];this._sizeTransfos=[];this._transfos.push(a||
p.createIdentity());this._sizeTransfos.push(a?a.scaleRatio():1)}a.prototype.transformPt=function(a){return this._transfos[this._transfos.length-1].transform(a)};a.prototype.transformSize=function(a){return a*this._sizeTransfos[this._sizeTransfos.length-1]};a.prototype.back=function(){return this._transfos[this._transfos.length-1]};a.prototype.push=function(a){var d=a.scaleRatio();a.multiply(this.back());this._transfos.push(a);this._sizeTransfos.push(this._sizeTransfos[this._sizeTransfos.length-1]*
d)};a.prototype.pop=function(){this._transfos.splice(-1,1);this._sizeTransfos.splice(-1,1)};a.prototype.drawSolidFill=function(a,d){};a.prototype.drawSolidStroke=function(a,d,f){};a.prototype.drawSymbol=function(a,d){if(a)switch(a.type){case "CIMPointSymbol":case "CIMLineSymbol":case "CIMPolygonSymbol":this.drawMultiLayerSymbol(a,d)}};a.prototype.drawMultiLayerSymbol=function(a,d){if(a&&(a=a.symbolLayers))for(var f=a.length;f--;){var h=a[f];if(h&&h.enable)switch(h.type){case "CIMSolidFill":this.drawSolidFill(d,
h.color);break;case "CIMSolidStroke":this.drawSolidStroke(d,h.color,h.width);break;case "CIMVectorMarker":this.drawVectorMarker(h,d)}}};a.prototype.drawVectorMarker=function(a,d){if(a){var f=a.markerGraphics;if(f){var l=a.size,m=a.frame,q=m?m.ymax-m.ymin:0,q=l&&q?l/q:1,t=p.createIdentity();m&&t.translate(.5*-(m.xmax+m.xmin),.5*-(m.ymax+m.ymin));var E=a.anchorPt;if(E){var D=E.x,E=E.y;"relative"===a.anchorPtUnits&&m&&(D*=(m.xmax-m.xmin)*q,E*=l);t.translate(-D,-E)}1!==q&&t.scale(q,q);a.rotation&&t.rotate(a.rotation*
h.C_DEG_TO_RAD);t.translate(a.offsetX||0,a.offsetY||0);t.translate(d.x,d.y);this.push(t);for(a=0;a<f.length;a++)(d=f[a])&&this.drawSymbol(d.symbol,d.geometry);this.pop()}}};return a}();t.CIMSymbolDrawHelper=A;a=function(a){function h(){var d=a.call(this)||this;d._xmin=d._ymin=Infinity;d._xmax=d._ymax=-Infinity;return d}f(h,a);h.prototype.envelope=function(){return new d(this._xmin,this._ymin,this._xmax-this._xmin,this._ymax-this._ymin)};h.prototype._merge=function(a,d){a[0]-d<this._xmin&&(this._xmin=
a[0]-d);a[0]+d>this._xmax&&(this._xmax=a[0]+d);a[1]-d<this._ymin&&(this._ymin=a[1]-d);a[1]+d>this._ymax&&(this._ymax=a[1]+d)};h.prototype.drawSolidFill=function(a,d){d=0;for(a=a.rings;d<a.length;d++){var f=a[d],h=f?f.length:0;if(2<h){this._merge(this.transformPt(f[0]),0);for(var l=1;l<h;++l)this._merge(this.transformPt(f[l]),0)}}};h.prototype.drawSolidStroke=function(a,d,f){d=.5*this.transformSize(f);f=0;for(a=a.rings||a.paths;f<a.length;f++){var h=a[f],l=h?h.length:0;if(1<l){this._merge(this.transformPt(h[0]),
d);for(var m=1;m<l;++m)this._merge(this.transformPt(h[m]),d)}}};return h}(A);t.EnvDrawHelper=a;A=function(a){function d(d,f){f=a.call(this,f)||this;f._ctx=d;return f}f(d,a);d.prototype.drawSolidFill=function(a,d){var f=this._ctx;f.fillStyle="rgba("+Math.round(d[0])+","+Math.round(d[1])+","+Math.round(d[2])+","+d[3]/255+")";f.beginPath();d=0;for(a=a.rings;d<a.length;d++){var h=a[d],l=h?h.length:0;if(2<l){var m=this.transformPt(h[0]);f.moveTo(m[0],m[1]);for(var p=1;p<l;++p)m=this.transformPt(h[p]),
f.lineTo(m[0],m[1]);f.closePath()}}f.fill("evenodd")};d.prototype.drawSolidStroke=function(a,d,f){var h=this._ctx;h.strokeStyle="rgba("+Math.round(d[0])+","+Math.round(d[1])+","+Math.round(d[2])+","+d[3]/255+")";h.lineWidth=this.transformSize(f)+.5;h.beginPath();d=!!a.rings;f=0;for(a=a.rings||a.paths;f<a.length;f++){var l=a[f],m=l?l.length:0;if(1<m){var p=this.transformPt(l[0]);h.moveTo(p[0],p[1]);for(var q=1;q<m;++q)p=this.transformPt(l[q]),h.lineTo(p[0],p[1]);d&&h.closePath()}}h.stroke()};return d}(A);
t.CanvasDrawHelper=A})},"esri/views/2d/engine/webgl/SDFHelper":function(){define(["require","exports","./Geometry","./Rect"],function(A,t,f,a){function d(a){return a-Math.floor(a)}function h(a,f,h){0>a?a=0:.9999991<a&&(a=.9999991);var l=d(a*p[0]),q=d(a*p[1]),r=d(a*p[2]);a=d(a*p[3]);f[h+0]=256*(l-l*m[0]);f[h+1]=256*(q-l*m[1]);f[h+2]=256*(r-q*m[2]);f[h+3]=256*(a-r*m[3])}Object.defineProperty(t,"__esModule",{value:!0});var p=[16777216,65536,256,1],m=[0,1/256,1/256,1/256];t.packFloat=h;A=function(){function d(){}
d.checkSDF=function(a){return!0};d.prototype._extractGeometry=function(a){if(!a)return null;a=a.symbolLayers;if(!a||1!==a.length)return null;a=a[0];if(!a)return null;a=a.markerGraphics;if(!a||1!==a.length)return null;a=a[0];if(!a)return null;var d=a.geometry;if(!d||!d.rings)return null;a=[];for(var h=0,d=d.rings;h<d.length;h++){for(var l=[],m=0,p=d[h];m<p.length;m++){var q=p[m];l.push(new f.Point(q[0],q[1]))}a.push(l)}return a};d.prototype._getEnvelope=function(d){for(var f=Infinity,h=-Infinity,l=
Infinity,m=-Infinity,p=0;p<d.length;p++)for(var q=0,t=d[p];q<t.length;q++){var F=t[q];F.x<f&&(f=F.x);F.x>h&&(h=F.x);F.y<l&&(l=F.y);F.y>m&&(m=F.y)}return new a(f,l,h-f,m-l)};d.prototype.buildSDF=function(a){a=this._extractGeometry(a);if(!a)return null;var d=this._getEnvelope(a);if(0>=d.width||0>=d.height)return null;for(var f=Math.floor(31.5),h=(128-2*(f+0+1))/Math.max(d.width,d.height),l=Math.round(d.width*h),m=Math.round(d.height*h),p=l+2*f,q=m+2*f,t=0;t<a.length;t++)for(var A=0,K=a[t];A<K.length;A++){var w=
K[A];w.x-=d.x;w.y-=d.y;w.x*=h;w.y*=h;w.x+=f-.5;w.y+=f-.5}d=this._dist_map(a,p,q,f);this._sign_dist_map(a,p,q,f,d);return[this._encodeDistMap(d,f),p,q,l,m,h]};d.prototype._dist_map=function(a,d,f,h){for(var l=d*f,m=new Float32Array(l),p=h*h+1,q=0;q<l;++q)m[q]=p;for(p=0;p<a.length;p++)for(var r=a[p],v=r.length,q=1;q<v;++q){var x=r[q-1],t=r[q],A=void 0,J=void 0;x.x<t.x?(A=x.x,J=t.x):(A=t.x,J=x.x);var M=void 0,S=void 0;x.y<t.y?(M=x.y,S=t.y):(M=t.y,S=x.y);var N=Math.floor(A)-h,J=Math.floor(J)+h,M=Math.floor(M)-
h,S=Math.floor(S)+h;0>N&&(N=0);J>d&&(J=d);0>M&&(M=0);S>f&&(S=f);for(var A=t.x-x.x,O=t.y-x.y,T=A*A+O*O;N<J;N++)for(var R=M;R<S;R++){var W=(N-x.x)*A+(R-x.y)*O,U=void 0,P=void 0;0>W?(U=x.x,P=x.y):W>T?(U=t.x,P=t.y):(W/=T,U=x.x+W*A,P=x.y+W*O);W=(N-U)*(N-U)+(R-P)*(R-P);U=(f-R-1)*d+N;W<m[U]&&(m[U]=W)}}for(q=0;q<l;++q)m[q]=Math.sqrt(m[q]);return m};d.prototype._sign_dist_map=function(a,d,f,h,l){for(var m=0;m<a.length;m++)for(var p=a[m],q=p.length,r=1;r<q;++r){var v=p[r-1],x=p[r],y=void 0,t=void 0;v.x<x.x?
(y=v.x,t=x.x):(y=x.x,t=v.x);var A=void 0,M=void 0;v.y<x.y?(A=v.y,M=x.y):(A=x.y,M=v.y);y=Math.floor(y);t=Math.floor(t)+1;A=Math.floor(A);M=Math.floor(M)+1;y<h&&(y=h);t>d-h&&(t=d-h);A<h&&(A=h);for(M>f-h&&(M=f-h);A<M;++A)if(v.y>A!==x.y>A){for(var S=(f-A-1)*d,N=y;N<t;++N)N<(x.x-v.x)*(A-v.y)/(x.y-v.y)+v.x&&(l[S+N]=-l[S+N]);for(N=h;N<y;++N)l[S+N]=-l[S+N]}}};d.prototype._encodeDistMap=function(a,d){d*=2;for(var f=a.length,l=new Uint8Array(4*f),m=0;m<f;++m)h(.5-a[m]/d,l,4*m);return l};return d}();t.SDFHelper=
A})},"esri/views/2d/engine/webgl/Geometry":function(){define(["require","exports"],function(A,t){Object.defineProperty(t,"__esModule",{value:!0});A=function(){function f(a,d){this.x=a;this.y=d}f.prototype.clone=function(){return new f(this.x,this.y)};f.prototype.equals=function(a,d){return a===this.x&&d===this.y};f.prototype.isEqual=function(a){return a.x===this.x&&a.y===this.y};f.prototype.setCoords=function(a,d){this.x=a;this.y=d};f.prototype.normalize=function(){var a=this.x,d=this.y,a=Math.sqrt(a*
a+d*d);this.x/=a;this.y/=a};f.prototype.rightPerpendicular=function(){var a=this.x;this.x=this.y;this.y=-a};f.prototype.move=function(a,d){this.x+=a;this.y+=d};f.prototype.assign=function(a){this.x=a.x;this.y=a.y};f.prototype.assignAdd=function(a,d){this.x=a.x+d.x;this.y=a.y+d.y};f.prototype.assignSub=function(a,d){this.x=a.x-d.x;this.y=a.y-d.y};f.prototype.rotate=function(a,d){var f=this.x,p=this.y;this.x=f*a-p*d;this.y=f*d+p*a};f.prototype.scale=function(a){this.x*=a;this.y*=a};f.prototype.length=
function(){var a=this.x,d=this.y;return Math.sqrt(a*a+d*d)};f.distance=function(a,d){var f=d.x-a.x;a=d.y-a.y;return Math.sqrt(f*f+a*a)};f.add=function(a,d){return new f(a.x+d.x,a.y+d.y)};f.sub=function(a,d){return new f(a.x-d.x,a.y-d.y)};return f}();t.Point=A})},"esri/views/2d/engine/webgl/GlyphSource":function(){define(["require","exports","../../../../core/promiseUtils","../../../../request","../../../../core/pbf"],function(A,t,f,a,d){var h=function(){function a(a){this._metrics=[];for(this._bitmaps=
[];a.next();)switch(a.tag()){case 1:for(var d=a.getMessage();d.next();)switch(d.tag()){case 3:for(var f=d.getMessage(),h=void 0,l=void 0,m=void 0,p=void 0,t=void 0,D=void 0,F=void 0;f.next();)switch(f.tag()){case 1:h=f.getUInt32();break;case 2:l=f.getBytes();break;case 3:m=f.getUInt32();break;case 4:p=f.getUInt32();break;case 5:t=f.getSInt32();break;case 6:D=f.getSInt32();break;case 7:F=f.getUInt32();break;default:f.skip()}h&&(this._metrics[h]={width:m,height:p,left:t,top:D,advance:F},this._bitmaps[h]=
l);break;default:d.skip()}break;default:a.skip()}}a.prototype.getMetrics=function(a){return this._metrics[a]};a.prototype.getBitmap=function(a){return this._bitmaps[a]};return a}(),p=function(){function a(){this._ranges=[]}a.prototype.getRange=function(a){return this._ranges[a]};a.prototype.addRange=function(a,d){this._ranges[a]=d};return a}();return function(){function m(a){this._glyphInfo={};this._baseURL=a}m.prototype.getRange=function(l,m){var p=this._getFontStack(l);if(p.getRange(m))return f.resolve();
var q=256*m,x=q+255;l=this._baseURL.replace("{fontstack}",l).replace("{range}",q+"-"+x);return a(l,{callbackParamName:"callback",responseType:"array-buffer"}).then(function(a){p.addRange(m,new h(new d(new Uint8Array(a.data),new DataView(a.data))))})};m.prototype.getGlyph=function(a,d){if(a=this._getFontStack(a)){var f=Math.floor(d/256);if(!(256<f)&&(a=a.getRange(f)))return{metrics:a.getMetrics(d),bitmap:a.getBitmap(d)}}};m.prototype._getFontStack=function(a){var d=this._glyphInfo[a];d||(d=this._glyphInfo[a]=
new p);return d};return m}()})},"esri/core/pbf":function(){define(["require","exports"],function(A,t){return function(){function f(a,d,f,p){this._tag=0;this._dataType=99;this._data=a;this._dataView=d;this._pos=f||0;this._end=p||a.byteLength}f.prototype.clone=function(){return new f(this._data,this._dataView,this._pos,this._end)};f.prototype.next=function(a){for(;;){if(this._pos===this._end)return!1;var d=this._decodeVarint();this._tag=d>>3;this._dataType=d&7;if(!a||a===this._tag)break;this.skip()}return!0};
f.prototype.empty=function(){return this._pos>=this._end};f.prototype.tag=function(){return this._tag};f.prototype.getInt32=function(){return this._decodeVarint()};f.prototype.getInt64=function(){return this._decodeVarint()};f.prototype.getUInt32=function(){return this._decodeVarint()};f.prototype.getUInt64=function(){return this._decodeVarint()};f.prototype.getSInt32=function(){return this._decodeSVarint()};f.prototype.getSInt64=function(){return this._decodeSVarint()};f.prototype.getBool=function(){var a=
0!==this._data[this._pos];this._skip(1);return a};f.prototype.getEnum=function(){return this._decodeVarint()};f.prototype.getFixed64=function(){var a=this._dataView,d=this._pos,a=a.getUint32(d,!0)+4294967296*a.getUint32(d+4,!0);this._skip(8);return a};f.prototype.getSFixed64=function(){var a=this._dataView,d=this._pos,a=a.getUint32(d,!0)+4294967296*a.getInt32(d+4,!0);this._skip(8);return a};f.prototype.getDouble=function(){var a=this._dataView.getFloat64(this._pos,!0);this._skip(8);return a};f.prototype.getFixed32=
function(){var a=this._dataView.getUint32(this._pos,!0);this._skip(4);return a};f.prototype.getSFixed32=function(){var a=this._dataView.getInt32(this._pos,!0);this._skip(4);return a};f.prototype.getFloat=function(){var a=this._dataView.getFloat32(this._pos,!0);this._skip(4);return a};f.prototype.getString=function(){var a=this._getLength(),d=this._pos,d=this._toString(this._data,d,d+a);this._skip(a);return d};f.prototype.getBytes=function(){var a=this._getLength(),d=this._pos,d=this._toBytes(this._data,
d,d+a);this._skip(a);return d};f.prototype.getMessage=function(){var a=this._getLength(),d=this._pos,d=new f(this._data,this._dataView,d,d+a);this._skip(a);return d};f.prototype.skip=function(){switch(this._dataType){case 0:this._decodeVarint();break;case 1:this._skip(8);break;case 2:this._skip(this._getLength());break;case 5:this._skip(4);break;default:throw Error("Invalid data type!");}};f.prototype._skip=function(a){if(this._pos+a>this._end)throw Error("Attempt to skip past the end of buffer!");
this._pos+=a};f.prototype._decodeVarint=function(){var a=this._data,d=this._pos,f=0,p;if(10<=this._end-d){if(p=a[d++],f|=p&127,0!==(p&128)&&(p=a[d++],f|=(p&127)<<7,0!==(p&128)&&(p=a[d++],f|=(p&127)<<14,0!==(p&128)&&(p=a[d++],f|=(p&127)<<21,0!==(p&128)&&(p=a[d++],f+=268435456*(p&127),0!==(p&128)&&(p=a[d++],f+=34359738368*(p&127),0!==(p&128)&&(p=a[d++],f+=4398046511104*(p&127),0!==(p&128)&&(p=a[d++],f+=562949953421312*(p&127),0!==(p&128)&&(p=a[d++],f+=72057594037927936*(p&127),0!==(p&128)&&(p=a[d++],
f+=0x7fffffffffffffff*(p&127),0!==(p&128)))))))))))throw Error("Varint too long!");}else{for(var m=1;d!==this._end;){p=a[d];if(0===(p&128))break;++d;f+=(p&127)*m;m*=128}if(d===this._end)throw Error("Varint overrun!");++d;f+=p*m}this._pos=d;return f};f.prototype._decodeSVarint=function(){var a=this._decodeVarint();return a%2?-(a+1)/2:a/2};f.prototype._getLength=function(){if(2!==this._dataType)throw Error("Not a delimited data type!");return this._decodeVarint()};f.prototype._toString=function(a,d,
f){var h="",m="";for(f=Math.min(this._end,f);d<f;++d){var l=a[d];l&128?m+="%"+l.toString(16):(h+=decodeURIComponent(m)+String.fromCharCode(l),m="")}m.length&&(h+=decodeURIComponent(m));return h};f.prototype._toBytes=function(a,d,f){f=Math.min(this._end,f);return new Uint8Array(a.buffer,d,f-d)};return f}()})},"esri/views/2d/engine/webgl/GlyphMosaic":function(){define("require exports dojo/promise/all dojo/has ../../../webgl/Texture ./Rect ./RectangleBinPack".split(" "),function(A,t,f,a,d,h,p){var m;
a("stable-symbol-rendering")&&(m=new Set);return function(){function l(a,d,f){this.height=this.width=0;this._dirties=[];this._glyphData=[];this._currentPage=0;this._glyphIndex={};this._textures=[];this._rangePromises=new Map;(0>=a||0>=d)&&console.error("Glyph mosaic width and height must be greater than zero!");this.width=a;this.height=d;this._glyphSource=f;this._binPack=new p(a-4,d-4);this._glyphData.push(new Uint8Array(a*d));this._dirties.push(!0);this._textures.push(void 0)}l.prototype.getGlyphItems=
function(d,l){var q=this,r=[],y=this._glyphSource,t=new Set;d=1/256;for(var E=0;E<l.length;E++)t.add(Math.floor(l[E]*d));var D=[];t.forEach(function(a){if(256>=a){var d="Arial Regular"+a;q._rangePromises.has(d)?D.push(q._rangePromises.get(d)):(a=y.getRange("Arial Regular",a).always(function(){q._rangePromises["delete"](d)}),q._rangePromises.set(d,a),D.push(a))}});return f(D).then(function(d){d=q._glyphIndex["Arial Regular"];d||(d={},q._glyphIndex["Arial Regular"]=d);var f;if(a("stable-symbol-rendering")){m.clear();
for(var v=0;v<l.length;v++)f=l[v],m.add(f);var x=[];t.forEach(function(a){x.push(a)});x.sort();f=[];for(v=0;v<x.length;v++)for(var C=x[v],D=0;256>D;++D)f.push(256*C+D)}else f=l;v=0;for(C=f;v<C.length;v++)if(f=C[v],D=d[f]){if(!a("stable-symbol-rendering")||m.has(f))r[f]={rect:D.rect,metrics:D.metrics,page:D.page}}else{var E=y.getGlyph("Arial Regular",f);if(E&&E.metrics){var D=E.metrics,F=void 0;if(0===D.width)F=new h(0,0,0,0);else{var A=D.width+6,O=D.height+6,T=A%4?4-A%4:4,R=O%4?4-O%4:4;1===T&&(T=
5);1===R&&(R=5);F=q._binPack.allocate(A+T,O+R);F.isEmpty&&(q._dirties[q._currentPage]||(q._glyphData[q._currentPage]=null),q._currentPage=q._glyphData.length,q._glyphData.push(new Uint8Array(q.width*q.height)),q._dirties.push(!0),q._textures.push(void 0),q._binPack=new p(q.width-4,q.height-4),F=q._binPack.allocate(A+T,O+R));var T=q._glyphData[q._currentPage],E=E.bitmap,W=R=void 0;if(E)for(var U=0;U<O;U++)for(var R=A*U,W=q.width*(F.y+U+1)+F.x,P=0;P<A;P++)T[W+P+1]=E[R+P]}d[f]={rect:F,metrics:D,tileIDs:null,
page:q._currentPage};if(!a("stable-symbol-rendering")||m.has(f))r[f]={rect:F,metrics:D,page:q._currentPage};q._dirties[q._currentPage]=!0}}return r})};l.prototype.bind=function(a,f,h,l){this._textures[h]||(this._textures[h]=new d(a,{pixelFormat:6406,dataType:5121,width:this.width,height:this.height},new Uint8Array(this.width*this.height)));var m=this._textures[h];m.setSamplingMode(f);this._dirties[h]&&m.setData(this._glyphData[h]);a.bindTexture(m,l);this._dirties[h]=!1};l.prototype.dispose=function(){this._binPack=
null;for(var a=0,d=this._textures;a<d.length;a++){var f=d[a];f&&f.dispose()}this._textures.length=0};return l}()})},"esri/views/2d/engine/webgl/MaterialManager":function(){define("require exports ../../../webgl/ShaderVariations ./shaders/textShaderSnippets ./shaders/iconShaderSnippets ./shaders/fillShaderSnippets ./shaders/lineShaderSnippets ./MaterialInfoUtils ./enums".split(" "),function(A,t,f,a,d,h,p,m,l){return function(){function q(){this._programRep=new Map;this.isInitialize=!1}q.prototype.initialize=
function(l){if(!this.isInitialize){var m=new f("icon",["iconVS","iconFS"],[],a,l);m.addDefine("ID","ID",[!1,!1],"ID");m.addDefine("HIGHLIGHT","HIGHLIGHT",[!1,!1],"HIGHLIGHT");m.addDefine("SDF","SDF",[!1,!1],"SDF");m.addDefine("VV_SIZE_MIN_MAX_VALUE","VV_SIZE_MIN_MAX_VALUE",[!1,!1],"VV_SIZE_MIN_MAX_VALUE");m.addDefine("VV_SIZE_SCALE_STOPS","VV_SIZE_SCALE_STOPS",[!1,!1],"VV_SIZE_SCALE_STOPS");m.addDefine("VV_SIZE_FIELD_STOPS","VV_SIZE_FIELD_STOPS",[!1,!1],"VV_SIZE_FIELD_STOPS");m.addDefine("VV_SIZE_UNIT_VALUE",
"VV_SIZE_UNIT_VALUE",[!1,!1],"VV_SIZE_UNIT_VALUE");m.addDefine("VV_COLOR","VV_COLOR",[!1,!1],"VV_COLOR");m.addDefine("VV_ROTATION","VV_ROTATION",[!1,!1],"VV_ROTATION");m.addDefine("VV_OPACITY","VV_OPACITY",[!1,!1],"VV_OPACITY");m.addDefine("VERTEX_VISIBILITY","VERTEX_VISIBILITY",[!1,!1],"VERTEX_VISIBILITY");m.addDefine("PATTERN","PATTERN",[!1,!1],"PATTERN");m.addDefine("HEATMAP","HEATMAP",[!1,!1],"HEATMAP");var q=new f("icon",["iconVS","iconFS"],[],d,l);q.addDefine("ID","ID",[!0,!0],"ID");q.addDefine("HIGHLIGHT",
"HIGHLIGHT",[!0,!0],"HIGHLIGHT");q.addDefine("SDF","SDF",[!0,!0],"SDF");q.addDefine("VV_SIZE_MIN_MAX_VALUE","VV_SIZE_MIN_MAX_VALUE",[!0,!1],"VV_SIZE_MIN_MAX_VALUE");q.addDefine("VV_SIZE_SCALE_STOPS","VV_SIZE_SCALE_STOPS",[!0,!1],"VV_SIZE_SCALE_STOPS");q.addDefine("VV_SIZE_FIELD_STOPS","VV_SIZE_FIELD_STOPS",[!0,!1],"VV_SIZE_FIELD_STOPS");q.addDefine("VV_SIZE_UNIT_VALUE","VV_SIZE_UNIT_VALUE",[!0,!1],"VV_SIZE_UNIT_VALUE");q.addDefine("VV_COLOR","VV_COLOR",[!0,!1],"VV_COLOR");q.addDefine("VV_ROTATION",
"VV_ROTATION",[!0,!1],"VV_ROTATION");q.addDefine("VV_OPACITY","VV_OPACITY",[!0,!1],"VV_OPACITY");q.addDefine("VERTEX_VISIBILITY","VERTEX_VISIBILITY",[!1,!1],"VERTEX_VISIBILITY");q.addDefine("PATTERN","PATTERN",[!0,!0],"PATTERN");q.addDefine("HEATMAP","HEATMAP",[!0,!0],"HEATMAP");var r=new f("fill",["fillVS","fillFS"],[],h,l);r.addDefine("ID","ID",[!0,!0],"ID");r.addDefine("HIGHLIGHT","HIGHLIGHT",[!0,!0],"HIGHLIGHT");r.addDefine("SDF","SDF",[!1,!1],"SDF");r.addDefine("VV_SIZE_MIN_MAX_VALUE","VV_SIZE_MIN_MAX_VALUE",
[!1,!1],"VV_SIZE_MIN_MAX_VALUE");r.addDefine("VV_SIZE_SCALE_STOPS","VV_SIZE_SCALE_STOPS",[!1,!1],"VV_SIZE_SCALE_STOPS");r.addDefine("VV_SIZE_FIELD_STOPS","VV_SIZE_FIELD_STOPS",[!1,!1],"VV_SIZE_FIELD_STOPS");r.addDefine("VV_SIZE_UNIT_VALUE","VV_SIZE_UNIT_VALUE",[!1,!1],"VV_SIZE_UNIT_VALUE");r.addDefine("VV_COLOR","VV_COLOR",[!0,!1],"VV_COLOR");r.addDefine("VV_ROTATION","VV_ROTATION",[!1,!1],"VV_ROTATION");r.addDefine("VV_OPACITY","VV_OPACITY",[!0,!1],"VV_OPACITY");r.addDefine("VERTEX_VISIBILITY","VERTEX_VISIBILITY",
[!1,!1],"VERTEX_VISIBILITY");r.addDefine("PATTERN","PATTERN",[!0,!0],"PATTERN");r.addDefine("HEATMAP","HEATMAP",[!1,!1],"HEATMAP");l=new f("line",["lineVS","lineFS"],[],p,l);l.addDefine("ID","ID",[!0,!0],"ID");l.addDefine("HIGHLIGHT","HIGHLIGHT",[!0,!0],"HIGHLIGHT");l.addDefine("SDF","SDF",[!0,!0],"SDF");l.addDefine("VV_SIZE_MIN_MAX_VALUE","VV_SIZE_MIN_MAX_VALUE",[!0,!1],"VV_SIZE_MIN_MAX_VALUE");l.addDefine("VV_SIZE_SCALE_STOPS","VV_SIZE_SCALE_STOPS",[!0,!1],"VV_SIZE_SCALE_STOPS");l.addDefine("VV_SIZE_FIELD_STOPS",
"VV_SIZE_FIELD_STOPS",[!0,!1],"VV_SIZE_FIELD_STOPS");l.addDefine("VV_SIZE_UNIT_VALUE","VV_SIZE_UNIT_VALUE",[!0,!1],"VV_SIZE_UNIT_VALUE");l.addDefine("VV_COLOR","VV_COLOR",[!0,!1],"VV_COLOR");l.addDefine("VV_ROTATION","VV_ROTATION",[!0,!1],"VV_ROTATION");l.addDefine("VV_OPACITY","VV_OPACITY",[!0,!1],"VV_OPACITY");l.addDefine("VERTEX_VISIBILITY","VERTEX_VISIBILITY",[!1,!1],"VERTEX_VISIBILITY");l.addDefine("PATTERN","PATTERN",[!0,!0],"PATTERN");l.addDefine("HEATMAP","HEATMAP",[!1,!1],"HEATMAP");this._textShaderVariations=
m;this._fillShaderVariations=r;this._iconShaderVariations=q;this._lineShaderVariations=l;this.isInitialize=!0}};q.prototype.getProgram=function(a,d,f){a|=d===l.WGLDrawPhase.HITTEST?4:0;a|=d===l.WGLDrawPhase.HIGHLIGHT?8:0;if(this._programRep[a])return this._programRep[a];if(!this._iconShaderVariations||!this._fillShaderVariations||!this._lineShaderVariations)return null;d=m.getMaterialVariations(a);var h;switch(d.geometryType){case l.WGLGeometryType.MARKER:h=this._iconShaderVariations.getProgram(d.variations,
null,null,f);break;case l.WGLGeometryType.TEXT:h=this._textShaderVariations.getProgram(d.variations,null,null,f);break;case l.WGLGeometryType.FILL:h=this._fillShaderVariations.getProgram(d.variations,null,null,f);break;case l.WGLGeometryType.LINE:h=this._lineShaderVariations.getProgram(d.variations,null,null,f)}h&&(this._programRep[a]=h);return h};return q}()})},"esri/views/webgl/ShaderVariations":function(){define(["require","exports","./Program","./Util","./ShaderSourceVariator"],function(A,t,f,
a,d){function h(a){return a.reduce(function(a,d,f){d&&(a|=1<<f);return a},0)}return function(){function p(a,d,f,h,p,x){"string"===typeof a?this._initParams(a,d,f,h,p,x):this._initObject({programNamePrefix:a.programNamePrefix,shaderSnippetPrefixes:a.shaderSnippetPrefixes,baseDefines:a.baseDefines,snippets:a.snippets,rctx:a.rctx,vertexAttribLocs:a.vertexAttribLocs})}p.prototype._initObject=function(a){this._initParams(a.programNamePrefix,a.shaderSnippetPrefixes,a.baseDefines,a.snippets,a.rctx,a.vertexAttribLocs)};
p.prototype._initParams=function(a,f,h,p,v,x){this._defaultSnippets=p;this._defaultRctx=v;this._defaultVertexAttribLocs=x;this._sealed=!1;this._programCache=new Map;this._variationInfo=new Map;this._shaderSourceVariator=new d(a,f,h)};p.prototype.addDefine=function(a,d,f,h){this._shaderSourceVariator.addDefine(a,d,f,h)};p.prototype.addBinaryShaderSnippetSuffix=function(a,d,f){this._shaderSourceVariator.addBinaryShaderSnippetSuffix(a,d,f)};p.prototype.addNaryShaderSnippetSuffix=function(a,d){this._shaderSourceVariator.addNaryShaderSnippetSuffix(a,
d)};p.prototype.getProgram=function(d,l,p,r){l=l||this._defaultSnippets;p=p||this._defaultRctx;r=r||this._defaultVertexAttribLocs;if(!l)throw Error("No ShaderSnippets provided to getProgram nor to ShaderVariations constructor.");if(!p)throw Error("No RenderingContext provided to getProgram nor to ShaderVariations constructor.");if(!r)throw Error("No VertexAttributeLocations provided to getProgram nor to ShaderVariations constructor.");this._sealed=!0;var m=h(d);if(this._programCache[m])return this._programCache[m];
d=this._shaderSourceVariator.getShaderVariation(d);var q,t;q=d.shaderSnippetNames[0];t=l[q];a.assert(null!=t,"shader snippet '"+q+"' does not exist");q=d.shaderSnippetNames[1];l=l[q];a.assert(null!=l,"shader snippet '"+q+"' does not exist");p=new f(p,t,l,r,d.defines);return this._programCache[m]=p};p.prototype.getProgramByKey=function(d){if(this._programCache[d])return this._programCache[d];if(!this._variationInfo[d])return null;var h=this._variationInfo[d],m=this._defaultSnippets,p=this._defaultRctx,
v=this._defaultVertexAttribLocs,x,t;x=h.shaderSnippetNames[0];t=m[x];a.assert(null!=t,"shader snippet '"+x+"' does not exist");x=h.shaderSnippetNames[1];m=m[x];a.assert(null!=m,"shader snippet '"+x+"' does not exist");h=new f(p,t,m,v,h.defines);return this._programCache[d]=h};p.prototype.getProgramInfo=function(a){var d=this._shaderSourceVariator.getShaderVariation(a);a=h(a);this._variationInfo[a]||(this._variationInfo[a]=d);return{name:d.programName,key:a}};return p}()})},"esri/views/webgl/Util":function(){define(["require",
"exports","../../core/tsSupport/assignHelper","../../core/Error"],function(A,t,f,a){return function(){function d(){}d.vertexCount=function(a,f){return a.vertexBuffers[f].size/d.getStride(a.layout[f])};d.getStride=function(a){return a[0].stride};d.getBytesPerElement=function(a){switch(a){case 5126:return 4;case 5124:return 4;case 5125:return 4;case 5122:return 2;case 5123:return 2;case 5120:return 1;case 5121:return 1;default:throw Error("Unknown data type");}};d.addDescriptor=function(a,f,m,l,q,r){var h=
d.getBytesPerElement(l);if(0<a.length){var p=a[0].stride,t=p+h*m;a.forEach(function(a){return a.stride=t});a.push({name:f,count:m,type:l,offset:p,stride:t,normalized:q,divisor:r})}else a.push({name:f,count:m,type:l,offset:0,stride:h*m,normalized:q,divisor:r})};d.assertCompatibleVertexAttributeLocations=function(a,d){(a=a.locations===d.locations)||console.error("VertexAttributeLocations are incompatible");return a};d.hasAttribute=function(a,d){for(var f=0;f<a.length;f++)if(a[f].name===d)return!0;return!1};
d.findAttribute=function(a,d){for(var f=0;f<a.length;f++)if(a[f].name===d)return a[f];return null};d.copyFramebufferToTexture=function(a,d,f,l,q){void 0===q&&(q=0);var h=a.getBoundFramebufferObject(),m=a.getBoundTexture(0);a.bindFramebuffer(d);a.bindTexture(f,0);a.gl.copyTexImage2D(a.gl.TEXTURE_2D,q,f.descriptor.pixelFormat,l[0],l[1],l[2],l[3],0);a.gl.flush();a.bindFramebuffer(h);a.bindTexture(m,0)};d.assert=function(d,f){if(!d)throw new a(f);};d.setBaseInstanceOffset=function(a,d){var h={},l;for(l in a)h[l]=
a[l].map(function(a){return a.divisor?f({},a,{baseInstance:d}):a});return h};return d}()})},"esri/views/webgl/ShaderSourceVariator":function(){define(["require","exports","dojo/_base/lang","./Util"],function(A,t,f,a){return function(){function d(d,f,m){var h;"string"===typeof d?h=d:(h=d.programNamePrefix,f=d.shaderSnippetPrefixes,m=d.baseDefines);a.assert(f,"you must specify shader snippet prefixes");a.assert(2===f.length,"you must specify shader snippet prefixes for vertex and fragment shaders");
m&&0!==m.length||(m=[]);this.programNamePrefix=h;this.shaderSnippetPrefixes=f;this.baseDefines=m;this.variables=[];this.sealed=!1}d.prototype.addDefine=function(d,f,m,l){a.assert(!this.sealed,"you cannot add another variable after the first program has been generated");a.assert(d,"you must specify a program name suffix");this.variables.push({programNameSuffixes:["",d],shaderNameSuffixes:l||d,defineStr:f,affectsShaderTypes:m||[!0,!0]})};d.prototype.addBinaryShaderSnippetSuffix=function(d,f,m){a.assert(!this.sealed,
"you cannot add another variable after the first program has been generated");a.assert(d,"you must specify a program name suffix");this.variables.push({programNameSuffixes:["",d],shaderSnippetSuffixes:["",f],affectsShaderTypes:m||[!0,!0]})};d.prototype.addNaryShaderSnippetSuffix=function(d,f){a.assert(!this.sealed,"you cannot add another variable after the first program has been generated");var h=d.map(function(d){a.assert(null!=d.value,"value must always be specified");return d.value});this.variables.push({values:h,
programNameSuffixes:d.map(function(a,d){return null!=a.programNameSuffix?a.programNameSuffix:h[d]}),shaderSnippetSuffixes:d.map(function(a,d){return null!=a.shaderSnippetSuffix?a.shaderSnippetSuffix:h[d]}),affectsShaderTypes:f||[!0,!0]})};d.prototype.getShaderVariation=function(d){a.assert(d.length===this.variables.length,"you must specify a value for each variable");for(var h=this.programNamePrefix,m=f.clone(this.shaderSnippetPrefixes),l=f.clone(this.shaderSnippetPrefixes),q=f.clone(this.baseDefines),
r=0;r<this.variables.length;r++){var v=this.variables[r],x=d[r],t=void 0;v.values?(t=v.values.indexOf(x),a.assert(0<=t,"invalid value "+x+" for variable "+r)):t=x?1:0;h+=v.programNameSuffixes[t];for(x=0;2>x;x++)v.affectsShaderTypes[x]&&(v.shaderSnippetSuffixes&&(m[x]+=v.shaderSnippetSuffixes[t],l[x]+=v.shaderSnippetSuffixes[t]),v.defineStr&&t&&(q.push(v.defineStr),l[x]+=v.shaderNameSuffixes))}return{programName:h,shaderSnippetNames:m,shaderNames:l,defines:q}};return d}()})},"esri/views/2d/engine/webgl/shaders/textShaderSnippets":function(){define(["require",
"exports","../../../../webgl/ShaderSnippets","dojo/text!./textShaders.xml"],function(A,t,f,a){A=new f;f.parse(a,A);return A})},"esri/views/2d/engine/webgl/shaders/iconShaderSnippets":function(){define(["require","exports","../../../../webgl/ShaderSnippets","dojo/text!./iconShaders.xml"],function(A,t,f,a){A=new f;f.parse(a,A);return A})},"esri/views/2d/engine/webgl/shaders/fillShaderSnippets":function(){define(["require","exports","../../../../webgl/ShaderSnippets","dojo/text!./fillShaders.xml"],function(A,
t,f,a){A=new f;f.parse(a,A);return A})},"esri/views/2d/engine/webgl/shaders/lineShaderSnippets":function(){define(["require","exports","../../../../webgl/ShaderSnippets","dojo/text!./lineShaders.xml"],function(A,t,f,a){A=new f;f.parse(a,A);return A})},"esri/views/2d/engine/webgl/MaterialInfoUtils":function(){define(["require","exports","./MaterialKeyInfo","./enums","./MaterialInfo"],function(A,t,f,a,d){function h(a){var d=[];d[0]=a.sdf?!0:!1;d[1]=a.vvSizeMinMaxValue?!0:!1;d[2]=a.vvSizeScaleStops?
!0:!1;d[3]=a.vvSizeFieldStops?!0:!1;d[4]=a.vvSizeUnitValue?!0:!1;d[5]=a.vvColor?!0:!1;d[6]=a.vvRotation?!0:!1;d[7]=a.vvOpacity?!0:!1;d[8]=a.visibility?!0:!1;d[9]=a.pattern?!0:!1;d[10]=a.heatmap?!0:!1;return d.reduce(function(a,d,f){d&&(a|=1<<f+2);return a},0)}function p(d){if(d.geometryType===a.WGLGeometryType.UNKNOWN)return-1;var f=h(d)<<2;return d.geometryType+f}Object.defineProperty(t,"__esModule",{value:!0});t.createTextMaterialInfo=function(h,l){var m=d.pool.acquire(),r=f.pool.acquire();r.geometryType=
a.WGLGeometryType.TEXT;r.sdf=!0;r.pattern=!1;r.visibility=!0;r.heatmap=!1;m.texBindingInfo.push({unit:2,pageId:l.page,semantic:"u_texture"});h.vvFields?(r.vvOpacity=null!=h.vvFields.opacity,r.vvSizeMinMaxValue=null!=h.vvFields.size,r.vvColor=null!=h.vvFields.color,r.vvRotation=null!=h.vvFields.rotation):r.vvOpacity=r.vvSizeMinMaxValue=r.vvColor=r.vvRotation=!1;m.materialKey=p(r);m.materialKeyInfo=r;return m};t.createMaterialInfo=function(h,l,q,r){var m=d.pool.acquire(),x=f.pool.acquire();x.geometryType=
q;(l=l.spriteMosaicItem)?(x.sdf=l.sdf,x.pattern=!0,m.texBindingInfo.push({unit:1,pageId:l.page,semantic:"u_texture"})):(x.sdf=!1,x.pattern=!1);0===r?x.vvOpacity=x.vvSizeMinMaxValue=x.vvSizeScaleStops=x.vvSizeFieldStops=x.vvSizeUnitValue=x.vvColor=x.vvRotation=!1:(x.vvOpacity=0!==(r&a.WGLVVFlag.OPACITY),x.vvSizeMinMaxValue=0!==(r&a.WGLVVFlag.SIZE_MINMAX_VALUE),x.vvSizeScaleStops=0!==(r&a.WGLVVFlag.SIZE_SCALE_STOPS),x.vvSizeFieldStops=0!==(r&a.WGLVVFlag.SIZE_FIELD_STOPS),x.vvSizeUnitValue=0!==(r&a.WGLVVFlag.SIZE_UNIT_VALUE),
x.vvColor=0!==(r&a.WGLVVFlag.COLOR),x.vvRotation=0!==(r&a.WGLVVFlag.ROTATION));x.visibility=!1;x.heatmap=null!=h.heatmapInfo;m.materialKey=p(x);m.materialKeyInfo=x;return m};t.getMaterialKey=p;t.getMaterialVariations=function(a){var d=a&3;a>>=2;return{geometryType:d,variations:[0!==(a&1),0!==(a&2),0!==(a&4),0!==(a&8),0!==(a&16),0!==(a&32),0!==(a&64),0!==(a&128),0!==(a&256),0!==(a&512),0!==(a&1024),0!==(a&2048),0!==(a&4096)]}}})},"esri/views/2d/engine/webgl/MaterialKeyInfo":function(){define(["require",
"exports","../../../../core/ObjectPool","./enums"],function(A,t,f,a){return function(){function d(){this.heatmap=this.pattern=this.visibility=this.vvOpacity=this.vvRotation=this.vvColor=this.vvSizeUnitValue=this.vvSizeFieldStops=this.vvSizeScaleStops=this.vvSizeMinMaxValue=this.sdf=!1}d.prototype.copy=function(a){this.geometryType=a.geometryType;this.sdf=a.sdf;this.vvSizeMinMaxValue=a.vvSizeMinMaxValue;this.vvSizeScaleStops=a.vvSizeScaleStops;this.vvSizeFieldStops=a.vvSizeFieldStops;this.vvSizeUnitValue=
a.vvSizeUnitValue;this.vvColor=a.vvColor;this.vvRotation=a.vvRotation;this.vvOpacity=a.vvOpacity;this.visibility=a.visibility;this.pattern=a.pattern;this.heatmap=a.heatmap};d.prototype.release=function(){this.geometryType=a.WGLGeometryType.UNKNOWN;this.heatmap=this.pattern=this.visibility=this.vvOpacity=this.vvRotation=this.vvColor=this.vvSizeUnitValue=this.vvSizeFieldStops=this.vvSizeScaleStops=this.vvSizeMinMaxValue=this.sdf=!1};d.pool=new f(d);return d}()})},"esri/views/2d/engine/webgl/MaterialInfo":function(){define(["require",
"exports","../../../../core/ObjectPool","./MaterialKeyInfo","./Utils"],function(A,t,f,a,d){return function(){function h(){this.texBindingInfo=[];this.materialParams=[]}h.prototype.release=function(){this.materialKey=null;this.texBindingInfo.length=0;this.materialParams.length=0;this.materialKeyInfo&&a.pool.release(this.materialKeyInfo)};h.prototype.copy=function(d){var f=this;d.materialParams.forEach(function(a,d){f.materialParams[d]={name:a.name,value:a.value}});d.texBindingInfo.forEach(function(a,
d){f.texBindingInfo[d]={unit:a.unit,pageId:a.pageId,semantic:a.semantic}});this.materialKeyInfo&&(a.pool.release(this.materialKeyInfo),this.materialKeyInfo=null);d.materialKeyInfo&&(this.materialKeyInfo=a.pool.acquire(),this.materialKeyInfo.copy(d.materialKeyInfo));this.materialKey=d.materialKey};h.serialize=function(a,f,l){var m=0,m=m+d.serializeInteger(a.materialKey,f,l+m),m=m+h._serializeTexBindingInfo(a.texBindingInfo,f,l+m);return m+=h._serializeMaterialParams(a.materialParams,f,l+m)};h.deserialize=
function(f,m,l){var p=0;f.materialInfo=h.pool.acquire();var r={n:0},p=p+d.deserializeInteger(r,m,l+p);f.materialInfo.materialKey=r.n;p+=h._deserializeTexBindingInfo(f.materialInfo.texBindingInfo,m,l+p);p+=h._deserializeMaterialParams(f.materialInfo.materialParams,m,l+p);f.materialInfo.materialKeyInfo=a.pool.acquire();return p};h._serializeTexBindingInfo=function(a,f,h){for(var l=0,m=a.length,l=l+d.serializeInteger(m,f,h+l),p=0;p<m;++p)f&&(f[h+l]=a[p].unit),++l,l+=d.serializeInteger(a[p].pageId,f,
h+l),l+=d.serializeString(a[p].semantic,f,h+l);return l};h._serializeMaterialParams=function(a,f,h){for(var l=0,m=a.length,l=l+d.serializeInteger(m,f,h+l),p=0;p<m;++p)l+=d.serializeString(a[p].name,f,h+l),l+=d.serializeUniform(a[p].value,f,h+l);return l};h._deserializeTexBindingInfo=function(a,f,h){var l=0,m={n:void 0},l=l+d.deserializeInteger(m,f,h+l);a.length=m.n;for(var p={n:void 0},x={s:void 0},t=0;t<m.n;++t)a[t]={unit:void 0,pageId:void 0,semantic:void 0},a[t].unit=f[h+l],++l,l+=d.deserializeInteger(p,
f,h+l),a[t].pageId=p.n,l+=d.deserializeString(x,f,h+l),a[t].semantic=x.s;return l};h._deserializeMaterialParams=function(a,f,h){var l=0,m={n:void 0},l=l+d.deserializeInteger(m,f,h+l);a.length=m.n;for(var p={s:void 0},x={n:void 0},t=0;t<m.n;++t)a[t]={name:void 0,value:void 0},l+=d.deserializeString(p,f,h+l),a[t].name=p.s,l+=d.deserializeUniform(x,f,h+l),a[t].value=x.n;return l};h.pool=new f(h);return h}()})},"esri/views/2d/engine/webgl/painter/WGLTextPainter":function(){define(["require","exports",
"../../../../webgl/VertexArrayObject","../Utils"],function(A,t,f,a){return function(){function d(){this._attributeLocations={a_pos:0,a_id:1,a_color:2,a_offsetAndNormal:3,a_texFontSize:4,a_visible:5};this._attributeLocationsVV={a_pos:0,a_id:1,a_color:2,a_offsetAndNormal:3,a_texFontSize:4,a_visible:5,a_vv:6};this._vertexAttributeLayout={geometry:[{name:"a_pos",count:2,type:5122,offset:0,stride:20,normalized:!1,divisor:0},{name:"a_id",count:4,type:5121,offset:4,stride:20,normalized:!0,divisor:0},{name:"a_color",
count:4,type:5121,offset:8,stride:20,normalized:!0,divisor:0},{name:"a_offsetAndNormal",count:4,type:5120,offset:12,stride:20,normalized:!1,divisor:0},{name:"a_texFontSize",count:4,type:5120,offset:16,stride:20,normalized:!1,divisor:0}],visibility:[{name:"a_visible",count:1,type:5120,offset:0,stride:1,normalized:!1,divisor:0}]};this._vertexAttributeLayoutVV={geometry:[{name:"a_pos",count:2,type:5122,offset:0,stride:36,normalized:!1,divisor:0},{name:"a_id",count:4,type:5121,offset:4,stride:36,normalized:!0,
divisor:0},{name:"a_color",count:4,type:5121,offset:8,stride:36,normalized:!0,divisor:0},{name:"a_offsetAndNormal",count:4,type:5120,offset:12,stride:36,normalized:!1,divisor:0},{name:"a_texFontSize",count:4,type:5120,offset:16,stride:36,normalized:!1,divisor:0},{name:"a_vv",count:4,type:5126,offset:20,stride:36,normalized:!1,divisor:0}],visibility:[{name:"a_visible",count:1,type:5120,offset:0,stride:1,normalized:!1,divisor:0}]};this._glyphsTextureSize=new Float32Array(2)}d.prototype.draw=function(a,
d,f,l,q,r,v,x,t,C,E){if(f.canDisplay){var h=d.materialKeyInfo,m=h.vvSizeMinMaxValue||h.vvSizeScaleStops||h.vvSizeFieldStops||h.vvSizeUnitValue||h.vvColor||h.vvRotation||h.vvOpacity;if(q=x.getProgram(d.materialKey,q,m?this._attributeLocationsVV:this._attributeLocations))a.bindProgram(q),m=this._getVAO(a,f,m),a.bindVAO(m),d=d.texBindingInfo[0],t.bindGlyphsPage(a,d.pageId,d.unit),q.setUniform1i(d.semantic,d.unit),t=t.glyphs,this._glyphsTextureSize[0]=t.width/4,this._glyphsTextureSize[1]=t.height/4,C=
l.vvMaterialParameters.vvRotationEnabled&&"geographic"===l.vvMaterialParameters.vvRotationType?C:E,q.setUniformMatrix4fv("u_transformMatrix",f.tileTransform.transform),q.setUniformMatrix4fv("u_extrudeMatrix",C),q.setUniform2fv("u_normalized_origin",f.tileTransform.displayCoord),q.setUniform2fv("u_mosaicSize",this._glyphsTextureSize),q.setUniform1f("u_pixelRatio",1),q.setUniform1f("u_opacity",1),h.vvSizeMinMaxValue&&q.setUniform4fv("u_vvSizeInfo",l.vvSizeMinMaxValue),h.vvColor&&(q.setUniform1fv("u_vvColorValues",
l.vvColorValues),q.setUniform4fv("u_vvColors",l.vvColors)),h.vvOpacity&&(q.setUniform1fv("u_vvOpacityValues",l.vvOpacityValues),q.setUniform1fv("u_vvOpacities",l.vvOpacities)),a.drawElements(4,v,5125,4*r),a.bindVAO(null)}};d.prototype._getVAO=function(d,p,m){if(p.iconGeometry.vao)return p.iconGeometry.vao;var h=p.iconGeometry.vertexBufferMap[a.C_VBO_GEOMETRY],q=p.iconGeometry.vertexBufferMap[a.C_VBO_VISIBILITY],r=p.iconGeometry.indexBuffer;if(!h||!r)return null;p.iconGeometry.vao=m?new f(d,this._attributeLocationsVV,
this._vertexAttributeLayoutVV,{geometry:h,visibility:q},r):new f(d,this._attributeLocations,this._vertexAttributeLayout,{geometry:h,visibility:q},r);return p.iconGeometry.vao};return d}()})},"esri/views/2d/engine/webgl/painter/WGLIconPainter":function(){define(["require","exports","../../../../webgl/VertexArrayObject","../../../../webgl/Texture","../Utils"],function(A,t,f,a,d){return function(){function h(){this._iconAttributeLocations={a_pos:0,a_vertexOffsetAndTex:1,a_id:2,a_color:3,a_outlineColor:4,
a_sizeAndOutlineWidth:5};this._iconAttributeLocationsVV={a_pos:0,a_vertexOffsetAndTex:1,a_id:2,a_color:3,a_outlineColor:4,a_sizeAndOutlineWidth:5,a_vv:6};this._iconAttributeLocationsHeatmap={a_pos:0,a_vertexOffsetAndTex:1,a_id:2,a_color:3,a_outlineColor:4,a_sizeAndOutlineWidth:5,a_weight:6};this._iconVertexAttributes={geometry:[{name:"a_pos",count:2,type:5122,offset:0,stride:24,normalized:!1,divisor:0},{name:"a_vertexOffsetAndTex",count:4,type:5120,offset:4,stride:24,normalized:!1,divisor:0},{name:"a_id",
count:4,type:5121,offset:8,stride:24,normalized:!0,divisor:0},{name:"a_color",count:4,type:5121,offset:12,stride:24,normalized:!0,divisor:0},{name:"a_outlineColor",count:4,type:5121,offset:16,stride:24,normalized:!0,divisor:0},{name:"a_sizeAndOutlineWidth",count:4,type:5121,offset:20,stride:24,normalized:!1,divisor:0}]};this._iconVertexAttributesWithVV={geometry:[{name:"a_pos",count:2,type:5122,offset:0,stride:40,normalized:!1,divisor:0},{name:"a_vertexOffsetAndTex",count:4,type:5120,offset:4,stride:40,
normalized:!1,divisor:0},{name:"a_id",count:4,type:5121,offset:8,stride:40,normalized:!0,divisor:0},{name:"a_color",count:4,type:5121,offset:12,stride:40,normalized:!0,divisor:0},{name:"a_outlineColor",count:4,type:5121,offset:16,stride:40,normalized:!0,divisor:0},{name:"a_sizeAndOutlineWidth",count:4,type:5121,offset:20,stride:40,normalized:!1,divisor:0},{name:"a_vv",count:4,type:5126,offset:24,stride:40,normalized:!1,divisor:0}]};this._iconVertexAttributesWithHeatmap={geometry:[{name:"a_pos",count:2,
type:5122,offset:0,stride:28,normalized:!1,divisor:0},{name:"a_vertexOffsetAndTex",count:4,type:5120,offset:4,stride:28,normalized:!1,divisor:0},{name:"a_id",count:4,type:5121,offset:8,stride:28,normalized:!0,divisor:0},{name:"a_color",count:4,type:5121,offset:12,stride:28,normalized:!0,divisor:0},{name:"a_outlineColor",count:4,type:5121,offset:16,stride:28,normalized:!0,divisor:0},{name:"a_sizeAndOutlineWidth",count:4,type:5121,offset:20,stride:28,normalized:!1,divisor:0},{name:"a_weight",count:1,
type:5126,offset:24,stride:28,normalized:!1,divisor:0}]};this._spritesTextureSize=new Float32Array(2)}h.prototype.draw=function(d,f,h,q,r,v,x,t,C,E,D){if(h.canDisplay){var l=f.materialKeyInfo,m=l.heatmap,p=l.vvSizeMinMaxValue||l.vvSizeScaleStops||l.vvSizeFieldStops||l.vvSizeUnitValue||l.vvColor||l.vvRotation||l.vvOpacity;if(r=t.getProgram(f.materialKey,r,p?this._iconAttributeLocationsVV:this._iconAttributeLocations)){d.bindProgram(r);p=this._getVAO(d,h,p,m);d.bindVAO(p);if(m){C=q.heatmapParameters;
if(C.intensityKernel&&!C.refreshIntensityKernel)C=C.intensityKernel;else{C.intensityKernel&&(C.intensityKernel.dispose(),C.intensityKernel=null);t=C.radius;f=C.kernelSize;for(var y=C.blurRadius,A=t*t,m=[],p=-1;++p<f;)m[p]=Math.exp(-Math.pow(p-y,2)/(2*A))/(t/2*Math.sqrt(2*Math.PI));t=[];for(var J,M=0;M<f;M++)for(A=m[M],p=0;p<f;p++)J=M*f+p,y=m[p],t[4*J+0]=A*y,t[4*J+1]=0,t[4*J+2]=0,t[4*J+3]=1;f=new a(d,{target:3553,pixelFormat:6408,internalFormat:34836,dataType:5126,samplingMode:d.extensions.textureFloatLinear?
9729:9728,wrapMode:33071,width:f,height:f},new Float32Array(t));C.intensityKernel=f;C.refreshIntensityKernel=!1;C=f}d.bindTexture(C,1);r.setUniform1i("u_texture",1);this._spritesTextureSize[0]=Math.round(q.heatmapParameters.radius);this._spritesTextureSize[1]=Math.round(q.heatmapParameters.radius)}else m=f.texBindingInfo[0],f=m.pageId,C.bindSpritePage(d,f,m.unit),r.setUniform1i(m.semantic,m.unit),C=C.sprites,this._spritesTextureSize[0]=C.getWidth(f)/4,this._spritesTextureSize[1]=C.getHeight(f)/4;
E=q.vvMaterialParameters.vvRotationEnabled&&"geographic"===q.vvMaterialParameters.vvRotationType?E:D;r.setUniformMatrix4fv("u_transformMatrix",h.tileTransform.transform);r.setUniformMatrix4fv("u_extrudeMatrix",E);r.setUniform2fv("u_normalized_origin",h.tileTransform.displayCoord);r.setUniform2fv("u_mosaicSize",this._spritesTextureSize);r.setUniform1f("u_opacity",1);l.vvSizeMinMaxValue&&r.setUniform4fv("u_vvSizeMinMaxValue",q.vvSizeMinMaxValue);l.vvSizeScaleStops&&r.setUniform1f("u_vvSizeScaleStopsValue",
q.vvSizeScaleStopsValue);l.vvSizeFieldStops&&(r.setUniform1fv("u_vvSizeFieldStopsValues",q.vvSizeFieldStopsValues),r.setUniform1fv("u_vvSizeFieldStopsSizes",q.vvSizeFieldStopsSizes));l.vvSizeUnitValue&&r.setUniform1f("u_vvSizeUnitValueWorldToPixelsRatio",q.vvSizeUnitValueToPixelsRatio);l.vvColor&&(r.setUniform1fv("u_vvColorValues",q.vvColorValues),r.setUniform4fv("u_vvColors",q.vvColors));l.vvOpacity&&(r.setUniform1fv("u_vvOpacityValues",q.vvOpacityValues),r.setUniform1fv("u_vvOpacities",q.vvOpacities));
d.drawElements(4,x,5125,4*v);d.bindVAO(null)}}};h.prototype._getVAO=function(a,h,l,q){if(h.iconGeometry.vao)return h.iconGeometry.vao;var m=h.iconGeometry.vertexBufferMap[d.C_VBO_GEOMETRY],p=h.iconGeometry.indexBuffer;if(!m||!p)return null;h.iconGeometry.vao=l?new f(a,this._iconAttributeLocationsVV,this._iconVertexAttributesWithVV,{geometry:m},p):q?new f(a,this._iconAttributeLocationsHeatmap,this._iconVertexAttributesWithHeatmap,{geometry:m},p):new f(a,this._iconAttributeLocations,this._iconVertexAttributes,
{geometry:m},p);return h.iconGeometry.vao};return h}()})},"esri/views/2d/engine/webgl/painter/WGLFillPainter":function(){define(["require","exports","../../../../webgl/VertexArrayObject","../Utils"],function(A,t,f,a){return function(){function d(){this._isInitialized=!1;this._fillAttributeLocations={a_pos:0,a_id:1,a_color:2,a_tlbr:3,a_aux:4};this._fillAttributeLocationsVV={a_pos:0,a_id:1,a_color:2,a_tlbr:3,a_aux:4,a_vv:5};this._spritesTextureSize=new Float32Array(2)}d.prototype.draw=function(d,f,
m,l,q,r,v,x,t,C,E,D){if(m.canDisplay){this._initialize();var h=f.materialKeyInfo,p=h.vvColor||h.vvOpacity;if(q=E.getProgram(f.materialKey,q,p?this._fillAttributeLocationsVV:this._fillAttributeLocations))d.bindProgram(q),p=this._getVAO(d,m,p),d.bindVAO(p),0<f.texBindingInfo.length&&(f=f.texBindingInfo[0],p=f.pageId,E=D.sprites,this._spritesTextureSize[0]=E.getWidth(p),this._spritesTextureSize[1]=E.getHeight(p),q.setUniform1f("u_zoomFactor",m.coordRange/a.C_TILE_SIZE/Math.pow(2,r-m.key.level)/v),D.bindSpritePage(d,
p,f.unit,x?9728:9729),q.setUniform1i(f.semantic,f.unit),q.setUniform2fv("u_mosaicSize",this._spritesTextureSize)),q.setUniformMatrix4fv("u_transformMatrix",m.tileTransform.transform),q.setUniform2fv("u_normalized_origin",m.tileTransform.displayCoord),q.setUniform1f("u_opacity",1),h.vvColor&&(q.setUniform1fv("u_vvColorValues",l.vvColorValues),q.setUniform4fv("u_vvColors",l.vvColors)),h.vvOpacity&&(q.setUniform1fv("u_vvOpacityValues",l.vvOpacityValues),q.setUniform1fv("u_vvOpacities",l.vvOpacities)),
d.drawElements(4,C,5125,4*t),d.bindVAO(null)}};d.prototype._initialize=function(){if(this._isInitialized)return!0;this._fillVertexAttributeLayout={geometry:[{name:"a_pos",count:2,type:5122,offset:0,stride:24,normalized:!1,divisor:0},{name:"a_id",count:4,type:5121,offset:4,stride:24,normalized:!0,divisor:0},{name:"a_color",count:4,type:5121,offset:8,stride:24,normalized:!0,divisor:0},{name:"a_tlbr",count:4,type:5123,offset:12,stride:24,normalized:!1,divisor:0},{name:"a_aux",count:4,type:5121,offset:20,
stride:24,normalized:!1,divisor:0}]};this._fillVertexAttributeLayoutVV={geometry:[{name:"a_pos",count:2,type:5122,offset:0,stride:32,normalized:!1,divisor:0},{name:"a_id",count:4,type:5121,offset:4,stride:32,normalized:!0,divisor:0},{name:"a_color",count:4,type:5121,offset:8,stride:32,normalized:!0,divisor:0},{name:"a_tlbr",count:4,type:5123,offset:12,stride:32,normalized:!1,divisor:0},{name:"a_aux",count:4,type:5121,offset:20,stride:32,normalized:!1,divisor:0},{name:"a_vv",count:2,type:5126,offset:24,
stride:32,normalized:!1,divisor:0}]};this._isInitialized=!0};d.prototype._getVAO=function(d,p,m){if(p.fillGeometry.vao)return p.fillGeometry.vao;var h=p.fillGeometry.vertexBufferMap[a.C_VBO_GEOMETRY],q=p.fillGeometry.indexBuffer;if(!h||!q)return null;p.fillGeometry.vao=m?new f(d,this._fillAttributeLocationsVV,this._fillVertexAttributeLayoutVV,{geometry:h},q):new f(d,this._fillAttributeLocations,this._fillVertexAttributeLayout,{geometry:h},q);return p.fillGeometry.vao};return d}()})},"esri/views/2d/engine/webgl/painter/WGLLinePainter":function(){define(["require",
"exports","../../../../webgl/VertexArrayObject","../Utils"],function(A,t,f,a){return function(){function d(){this._lineAttributeLocations={a_pos:0,a_id:1,a_color:2,a_offsetAndNormal:3,a_accumulatedDistanceAndHalfWidth:4,a_tlbr:5,a_segmentDirection:6};this._lineAttributeLocationsVV={a_pos:0,a_id:1,a_color:2,a_offsetAndNormal:3,a_accumulatedDistanceAndHalfWidth:4,a_tlbr:5,a_segmentDirection:6,a_vv:7};this._lineVertexAttributeLayout={geometry:[{name:"a_pos",count:2,type:5122,offset:0,stride:32,normalized:!1,
divisor:0},{name:"a_id",count:4,type:5121,offset:4,stride:32,normalized:!0,divisor:0},{name:"a_color",count:4,type:5121,offset:8,stride:32,normalized:!0,divisor:0},{name:"a_offsetAndNormal",count:4,type:5120,offset:12,stride:32,normalized:!1,divisor:0},{name:"a_accumulatedDistanceAndHalfWidth",count:2,type:5123,offset:16,stride:32,normalized:!1,divisor:0},{name:"a_tlbr",count:4,type:5123,offset:20,stride:32,normalized:!1,divisor:0},{name:"a_segmentDirection",count:4,type:5120,offset:28,stride:32,
normalized:!1,divisor:0}]};this._lineVertexAttributeLayoutVV={geometry:[{name:"a_pos",count:2,type:5122,offset:0,stride:44,normalized:!1,divisor:0},{name:"a_id",count:4,type:5121,offset:4,stride:44,normalized:!0,divisor:0},{name:"a_color",count:4,type:5121,offset:8,stride:44,normalized:!0,divisor:0},{name:"a_offsetAndNormal",count:4,type:5120,offset:12,stride:44,normalized:!1,divisor:0},{name:"a_accumulatedDistanceAndHalfWidth",count:2,type:5123,offset:16,stride:44,normalized:!1,divisor:0},{name:"a_tlbr",
count:4,type:5123,offset:20,stride:44,normalized:!1,divisor:0},{name:"a_segmentDirection",count:4,type:5120,offset:28,stride:44,normalized:!1,divisor:0},{name:"a_vv",count:3,type:5126,offset:32,stride:44,normalized:!1,divisor:0}]};this._spritesTextureSize=new Float32Array(2)}d.prototype.draw=function(d,f,m,l,q,r,v,x,t,C,E,D){var h=f.materialKeyInfo,p=h.vvSizeMinMaxValue||h.vvSizeScaleStops||h.vvSizeFieldStops||h.vvSizeUnitValue||h.vvColor||h.vvOpacity;if(q=C.getProgram(f.materialKey,q,p?this._lineAttributeLocationsVV:
this._lineAttributeLocations)){d.bindProgram(q);p=this._getVAO(d,m,p);d.bindVAO(p);p=1/v;if(0<f.texBindingInfo.length){f=f.texBindingInfo[0];C=f.pageId;var y=E.sprites;this._spritesTextureSize[0]=y.getWidth(C);this._spritesTextureSize[1]=y.getHeight(C);E.bindSpritePage(d,C,f.unit);q.setUniform1i(f.semantic,f.unit);q.setUniform2fv("u_mosaicSize",this._spritesTextureSize);q.setUniform1f("u_zoomFactor",Math.pow(2,r-m.key.level)/v);q.setUniform1f("u_tileCoordRatio",a.C_TILE_SIZE/m.coordRange)}q.setUniformMatrix4fv("u_transformMatrix",
m.tileTransform.transform);q.setUniformMatrix4fv("u_extrudeMatrix",D);q.setUniform2fv("u_normalized_origin",m.tileTransform.displayCoord);q.setUniform1f("u_opacity",1);q.setUniform1f("u_blur",0+p);q.setUniform1f("u_antialiasing",p);h.vvSizeMinMaxValue&&q.setUniform4fv("u_vvSizeMinMaxValue",l.vvSizeMinMaxValue);h.vvSizeScaleStops&&q.setUniform1f("u_vvSizeScaleStopsValue",l.vvSizeScaleStopsValue);h.vvSizeFieldStops&&(q.setUniform1fv("u_vvSizeFieldStopsValues",l.vvSizeFieldStopsValues),q.setUniform1fv("u_vvSizeFieldStopsSizes",
l.vvSizeFieldStopsSizes));h.vvSizeUnitValue&&q.setUniform1f("u_vvSizeUnitValueWorldToPixelsRatio",l.vvSizeUnitValueToPixelsRatio);h.vvColor&&(q.setUniform1fv("u_vvColorValues",l.vvColorValues),q.setUniform4fv("u_vvColors",l.vvColors));h.vvOpacity&&(q.setUniform1fv("u_vvOpacityValues",l.vvOpacityValues),q.setUniform1fv("u_vvOpacities",l.vvOpacities));d.setFaceCullingEnabled(!0);d.setFrontFace(2305);d.setCullFace(1029);d.drawElements(4,t,5125,4*x);d.setFaceCullingEnabled(!1);d.bindVAO(null)}};d.prototype._getVAO=
function(d,p,m){if(p.lineGeometry.vao)return p.lineGeometry.vao;var h=p.lineGeometry.vertexBufferMap[a.C_VBO_GEOMETRY],q=p.lineGeometry.indexBuffer;if(!h||!q)return null;p.lineGeometry.vao=m?new f(d,this._lineAttributeLocationsVV,this._lineVertexAttributeLayoutVV,{geometry:h},q):new f(d,this._lineAttributeLocations,this._lineVertexAttributeLayout,{geometry:h},q);return p.lineGeometry.vao};return d}()})},"esri/views/2d/engine/webgl/painter/WGLBackgroundPainter":function(){define("require exports ../../../../../core/libs/gl-matrix/vec4 ../../../../webgl/Program ../../../../webgl/VertexArrayObject ../../../../webgl/BufferObject ../shaders/glShaderSnippets".split(" "),
function(A,t,f,a,d,h,p){return function(){function m(){this._color=f.create();this._initialized=!1;this._color.set([1,0,0,1])}m.prototype.dispose=function(){this._solidProgram&&(this._solidProgram.dispose(),this._solidProgram=null);this._solidVertexArrayObject&&(this._solidVertexArrayObject.dispose(),this._solidVertexArrayObject=null)};m.prototype.draw=function(a,d,f){this._initialized||this._initialize(a);f&&(this._color[0]=f[0],this._color[1]=f[1],this._color[2]=f[2],this._color[3]=f[3]);a.bindVAO(this._solidVertexArrayObject);
a.bindProgram(this._solidProgram);this._solidProgram.setUniformMatrix4fv("u_transformMatrix",d.tileTransform.transform);this._solidProgram.setUniform2fv("u_normalized_origin",d.tileTransform.displayCoord);this._solidProgram.setUniform1f("u_coord_range",d.coordRange);this._solidProgram.setUniform1f("u_depth",0);this._solidProgram.setUniform4fv("u_color",this._color);a.drawArrays(5,0,4);a.bindVAO()};m.prototype._initialize=function(f){if(this._initialized)return!0;var l={a_pos:0},m=new a(f,p.backgroundVS,
p.backgroundFS,l);if(!m)return!1;var v={geometry:[{name:"a_pos",count:2,type:5120,offset:0,stride:2,normalized:!1,divisor:0}]},x=new Int8Array([0,0,1,0,0,1,1,1]),x=h.createVertex(f,35044,x);f=new d(f,l,v,{geometry:x});this._solidProgram=m;this._vertexAttributes=v;this._solidVertexArrayObject=f;return this._initialized=!0};return m}()})},"esri/core/libs/gl-matrix/vec4":function(){define(["./common"],function(A){var t={create:function(){var f=new A.ARRAY_TYPE(4);f[0]=0;f[1]=0;f[2]=0;f[3]=0;return f},
clone:function(f){var a=new A.ARRAY_TYPE(4);a[0]=f[0];a[1]=f[1];a[2]=f[2];a[3]=f[3];return a},fromValues:function(f,a,d,h){var p=new A.ARRAY_TYPE(4);p[0]=f;p[1]=a;p[2]=d;p[3]=h;return p},copy:function(f,a){f[0]=a[0];f[1]=a[1];f[2]=a[2];f[3]=a[3];return f},set:function(f,a,d,h,p){f[0]=a;f[1]=d;f[2]=h;f[3]=p;return f},add:function(f,a,d){f[0]=a[0]+d[0];f[1]=a[1]+d[1];f[2]=a[2]+d[2];f[3]=a[3]+d[3];return f},subtract:function(f,a,d){f[0]=a[0]-d[0];f[1]=a[1]-d[1];f[2]=a[2]-d[2];f[3]=a[3]-d[3];return f}};
t.sub=t.subtract;t.multiply=function(f,a,d){f[0]=a[0]*d[0];f[1]=a[1]*d[1];f[2]=a[2]*d[2];f[3]=a[3]*d[3];return f};t.mul=t.multiply;t.divide=function(f,a,d){f[0]=a[0]/d[0];f[1]=a[1]/d[1];f[2]=a[2]/d[2];f[3]=a[3]/d[3];return f};t.div=t.divide;t.ceil=function(f,a){f[0]=Math.ceil(a[0]);f[1]=Math.ceil(a[1]);f[2]=Math.ceil(a[2]);f[3]=Math.ceil(a[3]);return f};t.floor=function(f,a){f[0]=Math.floor(a[0]);f[1]=Math.floor(a[1]);f[2]=Math.floor(a[2]);f[3]=Math.floor(a[3]);return f};t.min=function(f,a,d){f[0]=
Math.min(a[0],d[0]);f[1]=Math.min(a[1],d[1]);f[2]=Math.min(a[2],d[2]);f[3]=Math.min(a[3],d[3]);return f};t.max=function(f,a,d){f[0]=Math.max(a[0],d[0]);f[1]=Math.max(a[1],d[1]);f[2]=Math.max(a[2],d[2]);f[3]=Math.max(a[3],d[3]);return f};t.round=function(f,a){f[0]=Math.round(a[0]);f[1]=Math.round(a[1]);f[2]=Math.round(a[2]);f[3]=Math.round(a[3]);return f};t.scale=function(f,a,d){f[0]=a[0]*d;f[1]=a[1]*d;f[2]=a[2]*d;f[3]=a[3]*d;return f};t.scaleAndAdd=function(f,a,d,h){f[0]=a[0]+d[0]*h;f[1]=a[1]+d[1]*
h;f[2]=a[2]+d[2]*h;f[3]=a[3]+d[3]*h;return f};t.distance=function(f,a){var d=a[0]-f[0],h=a[1]-f[1],p=a[2]-f[2];f=a[3]-f[3];return Math.sqrt(d*d+h*h+p*p+f*f)};t.dist=t.distance;t.squaredDistance=function(f,a){var d=a[0]-f[0],h=a[1]-f[1],p=a[2]-f[2];f=a[3]-f[3];return d*d+h*h+p*p+f*f};t.sqrDist=t.squaredDistance;t.length=function(f){var a=f[0],d=f[1],h=f[2];f=f[3];return Math.sqrt(a*a+d*d+h*h+f*f)};t.len=t.length;t.squaredLength=function(f){var a=f[0],d=f[1],h=f[2];f=f[3];return a*a+d*d+h*h+f*f};t.sqrLen=
t.squaredLength;t.negate=function(f,a){f[0]=-a[0];f[1]=-a[1];f[2]=-a[2];f[3]=-a[3];return f};t.inverse=function(f,a){f[0]=1/a[0];f[1]=1/a[1];f[2]=1/a[2];f[3]=1/a[3];return f};t.normalize=function(f,a){var d=a[0],h=a[1],p=a[2];a=a[3];var m=d*d+h*h+p*p+a*a;0<m&&(m=1/Math.sqrt(m),f[0]=d*m,f[1]=h*m,f[2]=p*m,f[3]=a*m);return f};t.dot=function(f,a){return f[0]*a[0]+f[1]*a[1]+f[2]*a[2]+f[3]*a[3]};t.lerp=function(f,a,d,h){var p=a[0],m=a[1],l=a[2];a=a[3];f[0]=p+h*(d[0]-p);f[1]=m+h*(d[1]-m);f[2]=l+h*(d[2]-
l);f[3]=a+h*(d[3]-a);return f};t.random=function(f,a){a=a||1;f[0]=A.RANDOM();f[1]=A.RANDOM();f[2]=A.RANDOM();f[3]=A.RANDOM();t.normalize(f,f);t.scale(f,f,a);return f};t.transformMat4=function(f,a,d){var h=a[0],p=a[1],m=a[2];a=a[3];f[0]=d[0]*h+d[4]*p+d[8]*m+d[12]*a;f[1]=d[1]*h+d[5]*p+d[9]*m+d[13]*a;f[2]=d[2]*h+d[6]*p+d[10]*m+d[14]*a;f[3]=d[3]*h+d[7]*p+d[11]*m+d[15]*a;return f};t.transformQuat=function(f,a,d){var h=a[0],p=a[1],m=a[2],l=d[0],q=d[1],r=d[2];d=d[3];var v=d*h+q*m-r*p,x=d*p+r*h-l*m,t=d*m+
l*p-q*h,h=-l*h-q*p-r*m;f[0]=v*d+h*-l+x*-r-t*-q;f[1]=x*d+h*-q+t*-l-v*-r;f[2]=t*d+h*-r+v*-q-x*-l;f[3]=a[3];return f};t.forEach=function(){var f=t.create();return function(a,d,h,p,m,l){d||(d=4);h||(h=0);for(p=p?Math.min(p*d+h,a.length):a.length;h<p;h+=d)f[0]=a[h],f[1]=a[h+1],f[2]=a[h+2],f[3]=a[h+3],m(f,f,l),a[h]=f[0],a[h+1]=f[1],a[h+2]=f[2],a[h+3]=f[3];return a}}();t.str=function(f){return"vec4("+f[0]+", "+f[1]+", "+f[2]+", "+f[3]+")"};t.exactEquals=function(f,a){return f[0]===a[0]&&f[1]===a[1]&&f[2]===
a[2]&&f[3]===a[3]};t.equals=function(f,a){var d=f[0],h=f[1],p=f[2];f=f[3];var m=a[0],l=a[1],q=a[2];a=a[3];return Math.abs(d-m)<=A.EPSILON*Math.max(1,Math.abs(d),Math.abs(m))&&Math.abs(h-l)<=A.EPSILON*Math.max(1,Math.abs(h),Math.abs(l))&&Math.abs(p-q)<=A.EPSILON*Math.max(1,Math.abs(p),Math.abs(q))&&Math.abs(f-a)<=A.EPSILON*Math.max(1,Math.abs(f),Math.abs(a))};return t})},"esri/views/2d/engine/webgl/painter/TileInfoRenderer":function(){define("require exports ../../../../webgl/Program ../../../../webgl/VertexArrayObject ../../../../webgl/BufferObject ../../../../webgl/Texture ../GeometryUtils ../shaders/glShaderSnippets".split(" "),
function(A,t,f,a,d,h,p,m){return function(){function l(){this._initialized=!1;this._maxWidth=0;this._color=new Float32Array([1,0,0,1])}l.prototype.render=function(a,d){this._initialized||this._initialize(a);a.bindVAO(this._outlineVertexArrayObject);a.bindProgram(this._outlineProgram);this._outlineProgram.setUniformMatrix4fv("u_transformMatrix",d.tileTransform.transform);this._outlineProgram.setUniform2fv("u_normalized_origin",d.tileTransform.displayCoord);this._outlineProgram.setUniform1f("u_coord_range",
d.coordRange);this._outlineProgram.setUniform1f("u_depth",0);this._outlineProgram.setUniform4fv("u_color",this._color);a.setLineWidth(2);a.drawArrays(3,0,4);a.bindVAO();var f=this._getTexture(a,d);f&&(a.bindVAO(this._tileInfoVertexArrayObject),a.bindProgram(this._tileInfoProgram),a.bindTexture(f,0),this._tileInfoProgram.setUniformMatrix4fv("u_transformMatrix",d.tileTransform.transform),this._tileInfoProgram.setUniform2fv("u_normalized_origin",d.tileTransform.displayCoord),this._tileInfoProgram.setUniform1f("u_depth",
0),this._tileInfoProgram.setUniform1f("u_coord_ratio",d.coordRange/512),this._tileInfoProgram.setUniform2f("u_delta",8,8),this._tileInfoProgram.setUniform2f("u_dimensions",f.descriptor.width,f.descriptor.height),a.drawArrays(5,0,4),a.bindVAO())};l.prototype._initialize=function(h){if(this._initialized)return!0;var l={a_pos:0},p=new f(h,m.backgroundVS,m.backgroundFS,l),q=new f(h,m.tileInfoVS,m.tileInfoFS,l),t={geometry:[{name:"a_pos",count:2,type:5120,offset:0,stride:2,normalized:!1,divisor:0}]},C=
new Int8Array([0,0,1,0,1,1,0,1]),C=d.createVertex(h,35044,C),C=new a(h,l,t,{geometry:C}),E=new Int8Array([0,0,1,0,0,1,1,1]),E=d.createVertex(h,35044,E);h=new a(h,l,t,{geometry:E});this._outlineProgram=p;this._tileInfoProgram=q;this._vertexAttributes=t;this._outlineVertexArrayObject=C;this._tileInfoVertexArrayObject=h;return this._initialized=!0};l.prototype._getTexture=function(a,d){if(d.texture)return d.texture;this._canvas||(this._canvas=document.createElement("canvas"),this._canvas.setAttribute("id",
"canvas2d"),this._canvas.setAttribute("width","256"),this._canvas.setAttribute("height","32"),this._canvas.setAttribute("style","display:none"));var f=d.key.id,l=this._canvas.getContext("2d");l.font="24px sans-serif";l.textAlign="left";l.textBaseline="middle";var m=l.measureText(f),m=Math.pow(2,Math.ceil(p.log2(m.width+2)));m>this._maxWidth&&(this._maxWidth=m);l.clearRect(0,0,this._maxWidth,32);l.fillStyle="blue";l.fillText(f,0,16);d.texture=new h(a,{target:3553,pixelFormat:6408,dataType:5121,samplingMode:9728},
this._canvas);return d.texture};return l}()})},"esri/views/2d/engine/webgl/painter/WGLHighlightPainter":function(){define(["require","exports","dojo/has","./highlight/HighlightRenderer","./highlight/HighlightSurfaces"],function(A,t,f,a,d){return function(){function h(){this._hlRenderer=new a;this._hlSurfaces=new d;this._height=this._width=void 0}h.prototype.setup=function(a,d,f){this._width=d;this._height=f;d=Math.round(.7*d);f=Math.round(.7*f);this._hlRenderer.setup(a,d,f);this._hlSurfaces.setup(a,
d,f)};h.prototype.setHighlightOptions=function(a){this._hlRenderer.setHighlightOptions({fillColor:a.fillColor,outlineColor:a.outlineColor,outlineWidth:.7*a.outlineWidth,outerHaloWidth:.7*a.outerHaloWidth,innerHaloWidth:.7*a.innerHaloWidth,outlinePosition:.7*a.outlinePosition})};h.prototype.startMaskDraw=function(a){a.bindFramebuffer(this._hlSurfaces.sharedBlur1Fbo);a.setClearColor(0,0,0,0);a.setClearStencil(0);a.clear(a.gl.COLOR_BUFFER_BIT|a.gl.STENCIL_BUFFER_BIT);a.setViewport(0,0,.7*this._width,
.7*this._height)};h.prototype.draw=function(a){a.setStencilTestEnabled(!1);a.setBlendingEnabled(!1);a.bindFramebuffer(this._hlSurfaces.sharedBlur2Fbo);a.setClearColor(0,0,0,0);a.clear(a.gl.COLOR_BUFFER_BIT);this._hlRenderer.preBlur(a,this._hlSurfaces.sharedBlur1Tex);f("esri-feature-highlight-debug")?(a.bindFramebuffer(null),a.clear(a.gl.COLOR_BUFFER_BIT),this._hlRenderer.finalBlur(a,this._hlSurfaces.sharedBlur2Tex)):(a.bindFramebuffer(this._hlSurfaces.sharedBlur1Fbo),a.setClearColor(0,0,0,0),a.clear(a.gl.COLOR_BUFFER_BIT),
this._hlRenderer.finalBlur(a,this._hlSurfaces.sharedBlur2Tex),a.setBlendingEnabled(!0),a.bindFramebuffer(null),a.setViewport(0,0,this._width,this._height),this._hlRenderer.renderHighlight(a,this._hlSurfaces.sharedBlur1Tex))};return h}()})},"esri/views/2d/engine/webgl/painter/highlight/HighlightRenderer":function(){define("require exports ../../../../../webgl/BufferObject ../../../../../webgl/VertexArrayObject ../../../../../webgl/Texture ../../../../../webgl/enums ../../../../../webgl/ShaderVariations ../../shaders/hlShaderSnippets".split(" "),
function(A,t,f,a,d,h,p,m){var l=[void 0,void 0,void 0,1],q=[3,4],r=[0,0,0,0,0,0,0,0,0,0,0,0,1,1,1,1],v=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1];return function(){function h(){this._height=this._width=void 0;this._highlightOptions={fillColor:[.2,.6,.9,.75],outlineColor:[.2,.6,.9,.9],outlinePosition:0,outlineWidth:3.4,innerHaloWidth:2,outerHaloWidth:3.3};this._resources=null}h.prototype._initialize=function(h,r,v){this._width=r;this._height=v;r=new f(h,34962,35044,(new Int8Array([-128,-128,0,0,127,-128,255,
0,-128,127,0,255,127,127,255,255])).buffer);v=new a(h,{a_position:0,a_texcoord:1},{geometry:[{name:"a_position",count:2,type:5120,offset:0,stride:4,normalized:!0},{name:"a_texcoord",count:2,type:5121,offset:2,stride:4,normalized:!0}]},{geometry:r});var x=(new p("hl",["texturedVS","highlightFS"],[],m,h,{a_position:0,a_texcoord:1})).getProgram([]),t=(new p("hl",["texturedVS","blurFS"],[],m,h,{a_position:0,a_texcoord:1})).getProgram([]);x.setUniform1i("u_texture",q[0]);x.setUniform1i("u_shade",q[1]);
x.setUniform4fv("u_sigmas",l);t.setUniform1i("u_texture",q[0]);t.setUniform4fv("u_sigmas",l);h=new d(h,{target:3553,pixelFormat:6408,dataType:5121,wrapMode:33071,width:256,height:1,samplingMode:9728});this._resources={quadGeometry:r,quadVAO:v,highlightProgram:x,blurProgram:t,shadeTex:h}};h.prototype.setHighlightOptions=function(a){function d(a,d,f){v[0]=(1-f)*a[0]+f*d[0];v[1]=(1-f)*a[1]+f*d[1];v[2]=(1-f)*a[2]+f*d[2];v[3]=(1-f)*a[3]+f*d[3]}this._highlightOptions=a;if(this._resources){var f=a.outlinePosition-
a.outlineWidth/2-a.outerHaloWidth,h=a.outlinePosition-a.outlineWidth/2,m=a.outlinePosition+a.outlineWidth/2,p=a.outlinePosition+a.outlineWidth/2+a.innerHaloWidth,q=Math.sqrt(Math.PI/2)*l[3],r=Math.abs(f)>q?Math.round(10*(Math.abs(f)-q))/10:0,q=Math.abs(p)>q?Math.round(10*(Math.abs(p)-q))/10:0;r&&!q?console.warn("The outer rim of the highlight is "+r+"px away from the edge of the feature; consider reducing some width values or shifting the outline position towards positive values (inwards)."):!r&&
q?console.warn("The inner rim of the highlight is "+q+"px away from the edge of the feature; consider reducing some width values or shifting the outline position towards negative values (outwards)."):r&&q&&console.warn("The highlight is "+Math.max(r,q)+"px away from the edge of the feature; consider reducing some width values.");for(var r=new Uint8Array(1024),v=[void 0,void 0,void 0,void 0],x=0;256>x;++x)q=f+x/255*(p-f),q<f?(r[4*x+0]=0,r[4*x+1]=0,r[4*x+2]=0,r[4*x+3]=0):q<h?d([0,0,0,0],a.outlineColor,
(q-f)/(h-f)):q<m?(v[0]=a.outlineColor[0],v[1]=a.outlineColor[1],v[2]=a.outlineColor[2],v[3]=a.outlineColor[3]):q<p?d(a.outlineColor,a.fillColor,(q-m)/(p-m)):(r[4*x+0]=a.fillColor[0],r[4*x+1]=a.fillColor[1],r[4*x+2]=a.fillColor[2],r[4*x+3]=a.fillColor[3]),r[4*x+0]=255*v[0]*v[3],r[4*x+1]=255*v[1]*v[3],r[4*x+2]=255*v[2]*v[3],r[4*x+3]=255*v[3];this._resources.highlightProgram.setUniform2fv("u_minMaxDistance",[f,p]);this._resources.shadeTex.updateData(0,0,0,256,1,r)}};h.prototype.setup=function(a,d,f){this._resources?
(this._width=d,this._height=f):(this._initialize(a,d,f),this.setHighlightOptions(this._highlightOptions))};h.prototype._teardown=function(){this._resources.quadGeometry.dispose();this._resources.quadVAO.dispose();this._resources.highlightProgram.dispose();this._resources.blurProgram.dispose();this._resources.shadeTex.dispose();this._resources=null};h.prototype.dispose=function(){this._resources&&this._teardown()};h.prototype.preBlur=function(a,d){a.bindTexture(d,q[0]);a.bindProgram(this._resources.blurProgram);
this._resources.blurProgram.setUniform4fv("u_direction",[1,0,1/this._width,0]);this._resources.blurProgram.setUniformMatrix4fv("u_channelSelector",r);a.bindVAO(this._resources.quadVAO);a.drawArrays(5,0,4);a.bindVAO()};h.prototype.finalBlur=function(a,d){a.bindTexture(d,q[0]);a.bindProgram(this._resources.blurProgram);this._resources.blurProgram.setUniform4fv("u_direction",[0,1,0,1/this._height]);this._resources.blurProgram.setUniformMatrix4fv("u_channelSelector",v);a.bindVAO(this._resources.quadVAO);
a.drawArrays(5,0,4);a.bindVAO()};h.prototype.renderHighlight=function(a,d){a.bindTexture(d,q[0]);a.bindTexture(this._resources.shadeTex,q[1]);a.bindProgram(this._resources.highlightProgram);a.bindVAO(this._resources.quadVAO);a.drawArrays(5,0,4);a.bindVAO()};return h}()})},"esri/views/2d/engine/webgl/shaders/hlShaderSnippets":function(){define(["require","exports","../../../../webgl/ShaderSnippets","dojo/text!./hlShaders.xml"],function(A,t,f,a){A=new f;f.parse(a,A);return A})},"esri/views/2d/engine/webgl/painter/highlight/HighlightSurfaces":function(){define(["require",
"exports","../../../../../webgl/FramebufferObject","../../../../../webgl/Texture"],function(A,t,f,a){function d(d,p,m){p=new a(d,{target:3553,pixelFormat:6408,dataType:5121,wrapMode:33071,width:p,height:m,samplingMode:9729});d=f.createWithAttachments(d,p,{colorTarget:0,depthStencilTarget:2});return[p,d]}return function(){function a(){this._height=this._width=void 0;this._resources=null}a.prototype._initialize=function(a,f,h){this._width=f;this._height=h;var l=d(a,f,h),m=l[0],l=l[1];a=d(a,f,h);this._resources=
{sharedBlur1Tex:m,sharedBlur1Fbo:l,sharedBlur2Tex:a[0],sharedBlur2Fbo:a[1]}};a.prototype.setup=function(a,d,f){!this._resources||this._width===d&&this._height===f||this._teardown();this._resources||this._initialize(a,d,f)};a.prototype._teardown=function(){this._resources.sharedBlur1Tex.dispose();this._resources.sharedBlur1Fbo.dispose();this._resources.sharedBlur2Tex.dispose();this._resources.sharedBlur2Fbo.dispose();this._resources=null};a.prototype.dispose=function(){this._resources&&this._teardown()};
Object.defineProperty(a.prototype,"sharedBlur1Tex",{get:function(){return this._resources.sharedBlur1Tex},enumerable:!0,configurable:!0});Object.defineProperty(a.prototype,"sharedBlur1Fbo",{get:function(){return this._resources.sharedBlur1Fbo},enumerable:!0,configurable:!0});Object.defineProperty(a.prototype,"sharedBlur2Tex",{get:function(){return this._resources.sharedBlur2Tex},enumerable:!0,configurable:!0});Object.defineProperty(a.prototype,"sharedBlur2Fbo",{get:function(){return this._resources.sharedBlur2Fbo},
enumerable:!0,configurable:!0});return a}()})},"esri/views/2d/engine/webgl/painter/WGLHeatmapPainter":function(){define("require exports ../../../../webgl/Program ../../../../webgl/VertexArrayObject ../../../../webgl/BufferObject ../../../../webgl/Texture ../../../../webgl/FramebufferObject dojo/text!../shaders/heatmap.vs.glsl dojo/text!../shaders/heatmap.fs.glsl dojo/_base/lang".split(" "),function(A,t,f,a,d,h,p,m,l,q){return function(){function r(){this._initWGLExtensions=this._initialized=!1}r.prototype.bindHeatmapSurface=
function(a,d,f){if(!this._initWGLExtensions){var l=a.extensions;if(!l.textureFloatLinear||!l.colorBufferFloat)throw Error("Required WebGL extensions needed for the heatmap drawing are not available!");this._initWGLExtensions=!0}d=Math.round(d/4);f=Math.round(f/4);this._intensityFBO&&this._intensityFBO.width===d&&this._intensityFBO.height===f||(this._intensityFBO&&this._intensityFBO.dispose(),l=new h(a,{target:3553,internalFormat:34836,pixelFormat:6408,dataType:5126,samplingMode:a.extensions.textureFloatLinear?
9729:9728,wrapMode:33071,width:d,height:f}),this._intensityFBO=p.createWithAttachments(a,l,{colorTarget:0,depthStencilTarget:3,width:d,height:f,multisampled:!1}));this._boundFBO=a.getBoundFramebufferObject();a.bindFramebuffer(this._intensityFBO);this._prevVP=a.getViewport();a.setViewport(0,0,d,f);a.setStencilWriteMask(255);a.setClearColor(0,0,0,0);a.setClearStencil(0);a.clear(a.gl.COLOR_BUFFER_BIT|a.gl.STENCIL_BUFFER_BIT)};r.prototype.drawHeatmap=function(a,d,f){a.bindFramebuffer(this._boundFBO);
this._boundFBO=null;a.setViewport(this._prevVP.x,this._prevVP.y,this._prevVP.width,this._prevVP.height);this._initialized||(this._initialized=this._initialize(a));a.setBlendFunctionSeparate(1,771,1,771);a.setBlendingEnabled(!0);a.bindVAO(this._vertexArrayObject);a.bindProgram(this._program);a.bindTexture(this._intensityFBO.colorTexture,2);this._program.setUniform1i("u_texture",2);this._program.setUniform1f("u_opacity",f);d=d.heatmapParameters;this._updateGradient(a,d);this._program.setUniform2f("u_minmax",
d.minPixelIntensity,d.maxPixelIntensity);a.setActiveTexture(5);a.bindTexture(this._gradientTex,5);this._program.setUniform1i("u_gradient",5);a.drawArrays(5,0,4);a.bindVAO()};r.prototype._initialize=function(h){if(this._initialized)return!0;var p={a_pos:0,a_tex:1},q=new f(h,m,l,p);if(!q)return!1;var r=new Int8Array(16);r[0]=-1;r[1]=-1;r[2]=0;r[3]=0;r[4]=1;r[5]=-1;r[6]=1;r[7]=0;r[8]=-1;r[9]=1;r[10]=0;r[11]=1;r[12]=1;r[13]=1;r[14]=1;r[15]=1;h=new a(h,p,{geometry:[{name:"a_pos",count:2,type:5120,offset:0,
stride:4,normalized:!1,divisor:0},{name:"a_tex",count:2,type:5120,offset:2,stride:4,normalized:!1,divisor:0}]},{geometry:d.createVertex(h,35044,r)});this._program=q;this._vertexArrayObject=h;return this._initialized=!0};r.prototype._updateGradient=function(a,d){if(!this._gradientTex||d.color.refreshColorRamp){this._gradientTex&&(this._gradientTex.dispose(),this._gradientTex=null);this._gradientTex=new h(a,{target:3553,internalFormat:6408,pixelFormat:6408,dataType:5121,samplingMode:9728,wrapMode:33071,
width:1,height:512});a=document.createElement("CANVAS");a.width=1;a.height=512;for(var f=a.getContext("2d"),l=d.color,m=[],p=0;p<l.values.length;++p)m.push({ratio:l.values[p],color:"rgba("+Math.floor(255*l.colors[4*p+0])+", "+Math.floor(255*l.colors[4*p+1])+", "+Math.floor(255*l.colors[4*p+2])+", "+l.colors[4*p+3]+")"});l=f.createLinearGradient(0,0,0,512);for(p=0;p<m.length;p++){var r=m[p];l.addColorStop(r.ratio,r.color)}f.fillStyle=l;f.fillRect(0,0,1,512);this._gradientTex.setData(a);this._heatmapColorParameters=
q.clone(d.color);d.color.refreshColorRamp=!1}};return r}()})},"esri/views/2d/layers/support/GraphicsView2D":function(){define("require exports ../../../../core/tsSupport/declareExtendsHelper ../../../../core/tsSupport/decorateHelper ../../../../core/accessorSupport/decorators ../../../../core/Collection ../../../../core/HandleRegistry ../../../../core/promiseUtils ../../../../Graphic ../../../layers/GraphicsView ../../engine/graphics/GFXSurface ../../engine/graphics/GFXGroup ../../engine/graphics/GFXObject".split(" "),
function(A,t,f,a,d,h,p,m,l,q,r,v,x){return function(q){function t(){for(var a=[],d=0;d<arguments.length;d++)a[d]=arguments[d];var f=q.apply(this,a)||this;f._frontGroup=new v;f._handles=new p;f._objects=new Map;f.container=new r;f.container.addChild(f._frontGroup);f.watch("graphics",function(){return f._reset()},!0);return f}f(t,q);t.prototype.hitTest=function(a,d){if(!this.view||!this.view.position)return null;a+=this.view.position[0]-window.pageXOffset;d+=this.view.position[1]-window.pageYOffset;
return(a=this.container.hitTest(a,d))?m.resolve(a.graphic):null};t.prototype._reset=function(){var a=this;this._handles.remove("graphics");this._objects.forEach(function(d,f){a._frontGroup.removeChild(d)});this._objects.clear();this.graphics&&(this.graphics.forEach(this._add,this),this._handles.add(this.graphics.on("change",function(d){return a._graphicsChangeHandler(d)}),"graphics"))};t.prototype._add=function(a){if(!this._objects.has(a)){var d=new x;d.graphic=a;d.renderingInfo={symbol:a.symbol};
this._objects.set(a,d);this._frontGroup.addChild(d)}};t.prototype._remove=function(a){var d=this._objects.get(a);d&&(this._objects.delete(a),this._frontGroup.removeChild(d))};t.prototype._graphicsChangeHandler=function(a){for(var d=a.removed,f=0,h=a.added;f<h.length;f++)a=h[f],this._add(a);for(f=0;f<d.length;f++)a=d[f],this._remove(a)};a([d.cast(h.ofType(l))],t.prototype,"graphics",void 0);a([d.property()],t.prototype,"view",void 0);return t=a([d.subclass("esri.views.2d.layers.support.GraphicsView2D")],
t)}(d.declared(q))})},"esri/views/layers/GraphicsView":function(){define("require exports ../../core/tsSupport/declareExtendsHelper ../../core/tsSupport/decorateHelper ../../core/accessorSupport/decorators ../../core/Accessor ../../core/Collection ../../Graphic".split(" "),function(A,t,f,a,d,h,p,m){return function(h){function l(){var a=null!==h&&h.apply(this,arguments)||this;a.graphics=null;a.renderer=null;a.view=null;return a}f(l,h);a([d.property({type:p.ofType(m)})],l.prototype,"graphics",void 0);
a([d.property()],l.prototype,"renderer",void 0);a([d.property()],l.prototype,"view",void 0);return l=a([d.subclass("esri.views.layers.GraphicsView")],l)}(d.declared(h))})},"esri/views/2d/engine/graphics/GFXSurface":function(){define("require exports ../../../../core/tsSupport/extendsHelper ../../../../core/tsSupport/assignHelper ../../libs/gl-matrix/mat2d ../../libs/gl-matrix/common ../../libs/gfx ../../viewpointUtils ../Container ./Projector ../cssUtils".split(" "),function(A,t,f,a,d,h,p,m,l,q,r){var v=
d.identity(d.create());return function(l){function x(){var a=null!==l&&l.apply(this,arguments)||this;a._transform=d.create();a._projector=new q;a._prevStateId=null;return a}f(x,l);x.prototype.createElement=function(){var a=document.createElement("div");a.setAttribute("class","esri-display-object");return a};x.prototype.setElement=function(a){this.surface&&(this.surface.destroy(),this.surface=null);if(this.element=a)this.surface=p.createSurface(this.element,400,400)};x.prototype.doRender=function(a){var f=
this.element.style;if(this.visible){f.display="block";f.opacity=""+this.opacity;var p=this._transform,q=a.state,x=this._prevStateId!==q.id;if(this.renderRequested||x){if(a.stationary)x&&(this._prevStateId=q.id),m.getMatrix(p,q.center,q.size,q.resolution,h.toRadian(q.rotation),1),this.surface.setDimensions(q.size[0],q.size[1]),this._projector.update(p,q.resolution),this.children.forEach(function(a){a.g&&a.g.setTransform(v)}),l.prototype.doRender.call(this,a);else{var t=d.invert(d.create(),p);d.multiply(t,
q.transform,t);this.children.forEach(function(a){a.g&&a.g.setTransform(t)})}r.clip(f,q.clipRect);f.transform=r.cssMatrix3d(d.fromRotation(d.create(),h.toRadian(q.rotation)));this.surface.rawNode.style.transform=r.cssMatrix(d.fromRotation(d.create(),h.toRadian(-q.rotation)))}}else f.display="none"};x.prototype.hitTest=function(a,d){if(!this.attached)return null;var f=this.surface.rawNode,f=f.parentElement||f.parentNode;f.style.zIndex="9000";a=document.elementFromPoint(a,d);f.style.zIndex="";return a&&
a.gfxObject||null};x.prototype.prepareChildrenRenderParameters=function(d){return a({},d,{projector:this._projector,surface:this.surface})};x.prototype.beforeRenderChildren=function(a,d){this.surface.openBatch()};x.prototype.attachChild=function(a,d){return a.attach(d)};x.prototype.detachChild=function(a,d){return a.detach()};x.prototype.renderChild=function(a,d){return a.processRender(d)};x.prototype.afterRenderChildren=function(a,d){this.surface.closeBatch()};return x}(l)})},"esri/views/2d/libs/gfx":function(){define("require exports ./gfx/svg ./gfx/Circle ./gfx/Group ./gfx/Path ./gfx/Image ./gfx/Rect ./gfx/Shape ./gfx/Surface ./gfx/Text".split(" "),
function(A,t,f,a,d,h,p,m,l,q,r){Object.defineProperty(t,"__esModule",{value:!0});t.createSurface=f.createSurface;t.Circle=a.default;t.Group=d.default;t.Path=h.default;t.Image=p.default;t.Rect=m.default;t.Shape=l.default;t.Surface=q.default;t.Text=r.default})},"esri/views/2d/libs/gfx/svg":function(){define(["require","exports","dojo/dom","./Surface"],function(A,t,f,a){function d(a,d){return document.createElementNS?document.createElementNS(a,d):document.createElement(d)}Object.defineProperty(t,"__esModule",
{value:!0});t.xmlns={xlink:"http://www.w3.org/1999/xlink",svg:"http://www.w3.org/2000/svg"};t.dasharray={solid:"none",shortdash:[4,1],shortdot:[1,1],shortdashdot:[4,1,1,1],shortdashdotdot:[4,1,1,1,1,1],dot:[1,3],dash:[4,3],longdash:[8,3],dashdot:[4,3,1,3],longdashdot:[8,3,1,3],longdashdotdot:[8,3,1,3,1,3]};t._createElementNS=d;t._setAttributeNS=function(a,d,f,l){return a.setAttributeNS?a.setAttributeNS(d,f,l):a.setAttribute(f,l)};t._createTextNode=function(a){return document.createTextNode(a)};t._createFragment=
function(){return document.createDocumentFragment()};t.getRef=function(a){return a&&"none"!==a?a.match(/^url\(#.+\)$/)?f.byId(a.slice(5,-1)):a.match(/^#dojoUnique\d+$/)?f.byId(a.slice(1)):null:null};t.createSurface=function(h,p,m){var l=new a.default;l.rawNode=d(t.xmlns.svg,"svg");l.rawNode.setAttribute("overflow","hidden");p&&l.rawNode.setAttribute("width",0>p?0:p);m&&l.rawNode.setAttribute("height",0>m?0:m);p=d(t.xmlns.svg,"defs");l.rawNode.appendChild(p);l.defNode=p;l._parent=f.byId(h);l._parent.appendChild(l.rawNode);
return l}})},"esri/views/2d/libs/gfx/Surface":function(){define("require exports ../../../../core/tsSupport/extendsHelper dojo/has dojo/_base/array dojo/dom-construct dojox/gfx/_base ./svg ./Container ./Circle ./Group ./Path ./Image ./Rect ./Text".split(" "),function(A,t,f,a,d,h,p,m,l,q,r,v,x,y,C){Object.defineProperty(t,"__esModule",{value:!0});var E=navigator.userAgent,D=534<function(){var a=/WebKit\/(\d*)/.exec(E);return a?parseInt(a[1],10):0}();A=function(l){function t(){var a=null!==l&&l.apply(this,
arguments)||this;a.rawNode=null;a._parent=null;a._nodes=[];a._events=[];return a}f(t,l);t.prototype.destroy=function(){d.forEach(this._nodes,h.destroy);this._nodes=[];d.forEach(this._events,function(a){a&&a.remove()});this._events=[];this.rawNode=null;if(a("ie"))for(;this._parent.lastChild;)h.destroy(this._parent.lastChild);else this._parent.innerHTML="";this.defNode=this._parent=null};t.prototype.setDimensions=function(a,d){if(!this.rawNode)return this;a=0>a?0:a;d=0>d?0:d;this.rawNode.setAttribute("width",
a);this.rawNode.setAttribute("height",d);D&&(this.rawNode.style.width=a,this.rawNode.style.height=d);return this};t.prototype.getDimensions=function(){return this.rawNode?{width:p.normalizedLength(this.rawNode.getAttribute("width")),height:p.normalizedLength(this.rawNode.getAttribute("height"))}:null};t.prototype.getEventSource=function(){return this.rawNode};t.prototype._getRealMatrix=function(){return null};t.prototype.createShape=function(a){switch(a.type){case p.defaultPath.type:return this.createPath(a);
case p.defaultRect.type:return this.createRect(a);case p.defaultCircle.type:return this.createCircle(a);case p.defaultImage.type:return this.createImage(a);case p.defaultText.type:return this.createText(a)}console.error("[gfx] unknown shape",a);return null};t.prototype.createGroup=function(){return this.createObject(r.default)};t.prototype.createRect=function(a){return this.createObject(y.default,a)};t.prototype.createCircle=function(a){return this.createObject(q.default,a)};t.prototype.createImage=
function(a){return this.createObject(x.default,a)};t.prototype.createText=function(a){return this.createObject(C.default,a)};t.prototype.createPath=function(a){return this.createObject(v.default,a)};t.prototype.createObject=function(a,d){if(!this.rawNode)return null;var f=new a;a=m._createElementNS(m.xmlns.svg,a.nodeType);f.setRawNode(a);f.setShape(d);this.add(f);return f};return t}(l.default);t.default=A})},"dojox/gfx/_base":function(){define("dojo/_base/kernel dojo/_base/lang dojo/_base/Color dojo/_base/sniff dojo/_base/window dojo/_base/array dojo/dom dojo/dom-construct dojo/dom-geometry".split(" "),
function(A,t,f,a,d,h,p,m,l){var q=t.getObject("dojox.gfx",!0),r=q._base={};q._hasClass=function(a,d){return(a=a.getAttribute("className"))&&0<=(" "+a+" ").indexOf(" "+d+" ")};q._addClass=function(a,d){var f=a.getAttribute("className")||"";(!f||0>(" "+f+" ").indexOf(" "+d+" "))&&a.setAttribute("className",f+(f?" ":"")+d)};q._removeClass=function(a,d){var f=a.getAttribute("className");f&&a.setAttribute("className",f.replace(new RegExp("(^|\\s+)"+d+"(\\s+|$)"),"$1$2"))};r._getFontMeasurements=function(){var f=
{"1em":0,"1ex":0,"100%":0,"12pt":0,"16px":0,"xx-small":0,"x-small":0,small:0,medium:0,large:0,"x-large":0,"xx-large":0},h,l;a("ie")&&(l=d.doc.documentElement.style.fontSize||"",l||(d.doc.documentElement.style.fontSize="100%"));var p=m.create("div",{style:{position:"absolute",left:"0",top:"-100px",width:"30px",height:"1000em",borderWidth:"0",margin:"0",padding:"0",outline:"none",lineHeight:"1",overflow:"hidden"}},d.body());for(h in f)p.style.fontSize=h,f[h]=16*Math.round(12*p.offsetHeight/16)/12/1E3;
a("ie")&&(d.doc.documentElement.style.fontSize=l);d.body().removeChild(p);return f};var v=null;r._getCachedFontMeasurements=function(a){if(a||!v)v=r._getFontMeasurements();return v};var x=null,y={};r._getTextBox=function(a,f,h){var p,q,r=arguments.length,v;x||(x=m.create("div",{style:{position:"absolute",top:"-10000px",left:"0",visibility:"hidden"}},d.body()));p=x;p.className="";q=p.style;q.borderWidth="0";q.margin="0";q.padding="0";q.outline="0";if(1<r&&f)for(v in f)v in y||(q[v]=f[v]);2<r&&h&&(p.className=
h);p.innerHTML=a;p.getBoundingClientRect?(q=p.getBoundingClientRect(),q={l:q.left,t:q.top,w:q.width||q.right-q.left,h:q.height||q.bottom-q.top}):q=l.getMarginBox(p);p.innerHTML="";return q};r._computeTextLocation=function(a,d,f,h){var l={};switch(a.align){case "end":l.x=a.x-d;break;case "middle":l.x=a.x-d/2;break;default:l.x=a.x}l.y=a.y-f*(h?.75:1);return l};r._computeTextBoundingBox=function(a){if(!q._base._isRendered(a))return{x:0,y:0,width:0,height:0};var d;d=a.getShape();var f=a.getFont()||q.defaultFont;
a=a.getTextWidth();f=q.normalizedLength(f.size);d=r._computeTextLocation(d,a,f,!0);return{x:d.x,y:d.y,width:a,height:f}};r._isRendered=function(a){for(a=a.parent;a&&a.getParent;)a=a.parent;return null!==a};var C=0;r._getUniqueId=function(){var a;do a=A._scopeName+"xUnique"+ ++C;while(p.byId(a));return a};var E=a("pointer-events")?"touchAction":a("MSPointer")?"msTouchAction":null;r._fixMsTouchAction=E?function(a){a.rawNode.style[E]="none"}:function(){};t.mixin(q,{defaultPath:{type:"path",path:""},
defaultPolyline:{type:"polyline",points:[]},defaultRect:{type:"rect",x:0,y:0,width:100,height:100,r:0},defaultEllipse:{type:"ellipse",cx:0,cy:0,rx:200,ry:100},defaultCircle:{type:"circle",cx:0,cy:0,r:100},defaultLine:{type:"line",x1:0,y1:0,x2:100,y2:100},defaultImage:{type:"image",x:0,y:0,width:0,height:0,src:""},defaultText:{type:"text",x:0,y:0,text:"",align:"start",decoration:"none",rotated:!1,kerning:!0},defaultTextPath:{type:"textpath",text:"",align:"start",decoration:"none",rotated:!1,kerning:!0},
defaultStroke:{type:"stroke",color:"black",style:"solid",width:1,cap:"butt",join:4},defaultLinearGradient:{type:"linear",x1:0,y1:0,x2:100,y2:100,colors:[{offset:0,color:"black"},{offset:1,color:"white"}]},defaultRadialGradient:{type:"radial",cx:0,cy:0,r:100,colors:[{offset:0,color:"black"},{offset:1,color:"white"}]},defaultPattern:{type:"pattern",x:0,y:0,width:0,height:0,src:""},defaultFont:{type:"font",style:"normal",variant:"normal",weight:"normal",size:"10pt",family:"serif"},getDefault:function(){var a=
{};return function(d){var f=a[d];if(f)return new f;f=a[d]=new Function;f.prototype=q["default"+d];return new f}}(),normalizeColor:function(a){return a instanceof f?a:new f(a)},normalizeParameters:function(a,d){var f;if(d){var h={};for(f in a)f in d&&!(f in h)&&(a[f]=d[f])}return a},makeParameters:function(a,d){var f=null;if(!d)return t.delegate(a);var h={};for(f in a)f in h||(h[f]=t.clone(f in d?d[f]:a[f]));return h},formatNumber:function(a,d){var f=a.toString();if(0<=f.indexOf("e"))f=a.toFixed(4);
else{var h=f.indexOf(".");0<=h&&5<f.length-h&&(f=a.toFixed(4))}return 0>a?f:d?" "+f:f},makeFontString:function(a){return a.style+" "+a.variant+" "+a.weight+" "+a.size+" "+a.family},splitFontString:function(a){var d=q.getDefault("Font");a=a.split(/\s+/);if(!(5>a.length)){d.style=a[0];d.variant=a[1];d.weight=a[2];var f=a[3].indexOf("/");d.size=0>f?a[3]:a[3].substring(0,f);var h=4;0>f&&("/"==a[4]?h=6:"/"==a[4].charAt(0)&&(h=5));h<a.length&&(d.family=a.slice(h).join(" "))}return d},cm_in_pt:72/2.54,mm_in_pt:7.2/
2.54,px_in_pt:function(){return q._base._getCachedFontMeasurements()["12pt"]/12},pt2px:function(a){return a*q.px_in_pt()},px2pt:function(a){return a/q.px_in_pt()},normalizedLength:function(a){if(0===a.length)return 0;if(2<a.length){var d=q.px_in_pt(),f=parseFloat(a);switch(a.slice(-2)){case "px":return f;case "pt":return f*d;case "in":return 72*f*d;case "pc":return 12*f*d;case "mm":return f*q.mm_in_pt*d;case "cm":return f*q.cm_in_pt*d}}return parseFloat(a)},pathVmlRegExp:/([A-Za-z]+)|(\d+(\.\d+)?)|(\.\d+)|(-\d+(\.\d+)?)|(-\.\d+)/g,
pathSvgRegExp:/([A-DF-Za-df-z])|([-+]?\d*[.]?\d+(?:[eE][-+]?\d+)?)/g,equalSources:function(a,d){return a&&d&&a===d},switchTo:function(a){var d="string"==typeof a?q[a]:a;d&&(h.forEach("Group Rect Ellipse Circle Line Polyline Image Text Path TextPath EsriPath Surface createSurface fixTarget".split(" "),function(a){q[a]=d[a]}),"string"==typeof a?q.renderer=a:h.some(["svg","vml","canvas","canvasWithEvents","silverlight"],function(a){return q.renderer=q[a]&&q[a].Surface===q.Surface?a:null}))}});return q})},
"esri/views/2d/libs/gfx/Container":function(){define("require exports ../../../../core/tsSupport/extendsHelper dojox/gfx/matrix ./Shape ./svg".split(" "),function(A,t,f,a,d,h){Object.defineProperty(t,"__esModule",{value:!0});A=function(d){function m(){var a=null!==d&&d.apply(this,arguments)||this;a.children=[];a._batch=0;return a}f(m,d);m.prototype.openBatch=function(){this._batch||(this.fragment=h._createFragment());++this._batch;return this};m.prototype.closeBatch=function(){this._batch=0<this._batch?
--this._batch:0;this.fragment&&!this._batch&&(this.rawNode.appendChild(this.fragment),this.fragment=null);return this};m.prototype.add=function(a){if(this===a.getParent())return this;this.fragment?this.fragment.appendChild(a.rawNode):this.rawNode.appendChild(a.rawNode);var d=a.getParent();d&&d.remove(a,!0);this.children.push(a);a._setParent(this,this._getRealMatrix());return this};m.prototype.remove=function(a,d){void 0===d&&(d=!1);if(this!==a.getParent())return this;this.rawNode===a.rawNode.parentNode&&
this.rawNode.removeChild(a.rawNode);this.fragment&&this.fragment===a.rawNode.parentNode&&this.fragment.removeChild(a.rawNode);for(var f=0;f<this.children.length;++f)if(this.children[f]===a){d||(a.parent=null,a.parentMatrix=null);this.children.splice(f,1);break}return this};m.prototype.clear=function(a){void 0===a&&(a=!1);for(var d=this.rawNode;d.lastChild;)d.removeChild(d.lastChild);var f=this.defNode;if(f){for(;f.lastChild;)f.removeChild(f.lastChild);d.appendChild(f)}for(f=0;f<this.children.length;++f)d=
this.children[f],d.parent=null,d.parentMatrix=null,a&&d.destroy();this.children=[];return this};m.prototype.getBoundingBox=function(){if(!this.children)return null;var d=null;this.children.forEach(function(f){var h=f.getBoundingBox();h&&((f=f.getTransform())&&(h=a.multiplyRectangle(f,h)),d?(d.x=Math.min(d.x,h.x),d.y=Math.min(d.y,h.y),d.endX=Math.max(d.endX,h.x+h.width),d.endY=Math.max(d.endY,h.y+h.height)):d={x:h.x,y:h.y,endX:h.x+h.width,endY:h.y+h.height,width:0,height:0})});d&&(d.width=d.endX-d.x,
d.height=d.endY-d.y);return d};m.prototype._moveChildToFront=function(a){for(var d=0;d<this.children.length;++d)if(this.children[d]===a){this.children.splice(d,1);this.children.push(a);break}return this};m.prototype._moveChildToBack=function(a){for(var d=0;d<this.children.length;++d)if(this.children[d]===a){this.children.splice(d,1);this.children.unshift(a);break}return this};return m}(d.default);t.default=A})},"dojox/gfx/matrix":function(){define(["./_base","dojo/_base/lang"],function(A,t){var f=
A.matrix={},a={};f._degToRad=function(d){return a[d]||(a[d]=Math.PI*d/180)};f._radToDeg=function(a){return a/Math.PI*180};f.Matrix2D=function(a){if(a)if("number"==typeof a)this.xx=this.yy=a;else if(a instanceof Array){if(0<a.length){for(var d=f.normalize(a[0]),p=1;p<a.length;++p){var m=d,l=f.normalize(a[p]),d=new f.Matrix2D;d.xx=m.xx*l.xx+m.xy*l.yx;d.xy=m.xx*l.xy+m.xy*l.yy;d.yx=m.yx*l.xx+m.yy*l.yx;d.yy=m.yx*l.xy+m.yy*l.yy;d.dx=m.xx*l.dx+m.xy*l.dy+m.dx;d.dy=m.yx*l.dx+m.yy*l.dy+m.dy}t.mixin(this,d)}}else t.mixin(this,
a)};t.extend(f.Matrix2D,{xx:1,xy:0,yx:0,yy:1,dx:0,dy:0});t.mixin(f,{identity:new f.Matrix2D,flipX:new f.Matrix2D({xx:-1}),flipY:new f.Matrix2D({yy:-1}),flipXY:new f.Matrix2D({xx:-1,yy:-1}),translate:function(a,h){return 1<arguments.length?new f.Matrix2D({dx:a,dy:h}):new f.Matrix2D({dx:a.x,dy:a.y})},scale:function(a,h){return 1<arguments.length?new f.Matrix2D({xx:a,yy:h}):"number"==typeof a?new f.Matrix2D({xx:a,yy:a}):new f.Matrix2D({xx:a.x,yy:a.y})},rotate:function(a){var d=Math.cos(a);a=Math.sin(a);
return new f.Matrix2D({xx:d,xy:-a,yx:a,yy:d})},rotateg:function(a){return f.rotate(f._degToRad(a))},skewX:function(a){return new f.Matrix2D({xy:Math.tan(a)})},skewXg:function(a){return f.skewX(f._degToRad(a))},skewY:function(a){return new f.Matrix2D({yx:Math.tan(a)})},skewYg:function(a){return f.skewY(f._degToRad(a))},reflect:function(a,h){1==arguments.length&&(h=a.y,a=a.x);var d=a*a,m=h*h,l=d+m,q=2*a*h/l;return new f.Matrix2D({xx:2*d/l-1,xy:q,yx:q,yy:2*m/l-1})},project:function(a,h){1==arguments.length&&
(h=a.y,a=a.x);var d=a*a,m=h*h,l=d+m,q=a*h/l;return new f.Matrix2D({xx:d/l,xy:q,yx:q,yy:m/l})},normalize:function(a){return a instanceof f.Matrix2D?a:new f.Matrix2D(a)},isIdentity:function(a){return 1==a.xx&&0==a.xy&&0==a.yx&&1==a.yy&&0==a.dx&&0==a.dy},clone:function(a){var d=new f.Matrix2D,p;for(p in a)"number"==typeof a[p]&&"number"==typeof d[p]&&d[p]!=a[p]&&(d[p]=a[p]);return d},invert:function(a){a=f.normalize(a);var d=a.xx*a.yy-a.xy*a.yx;return a=new f.Matrix2D({xx:a.yy/d,xy:-a.xy/d,yx:-a.yx/
d,yy:a.xx/d,dx:(a.xy*a.dy-a.yy*a.dx)/d,dy:(a.yx*a.dx-a.xx*a.dy)/d})},_multiplyPoint:function(a,f,p){return{x:a.xx*f+a.xy*p+a.dx,y:a.yx*f+a.yy*p+a.dy}},multiplyPoint:function(a,h,p){a=f.normalize(a);return"number"==typeof h&&"number"==typeof p?f._multiplyPoint(a,h,p):f._multiplyPoint(a,h.x,h.y)},multiplyRectangle:function(a,h){var d=f.normalize(a);h=h||{x:0,y:0,width:0,height:0};if(f.isIdentity(d))return{x:h.x,y:h.y,width:h.width,height:h.height};a=f.multiplyPoint(d,h.x,h.y);var m=f.multiplyPoint(d,
h.x,h.y+h.height),l=f.multiplyPoint(d,h.x+h.width,h.y);h=f.multiplyPoint(d,h.x+h.width,h.y+h.height);var d=Math.min(a.x,m.x,l.x,h.x),q=Math.min(a.y,m.y,l.y,h.y);return{x:d,y:q,width:Math.max(a.x,m.x,l.x,h.x)-d,height:Math.max(a.y,m.y,l.y,h.y)-q}},multiply:function(a){for(var d=f.normalize(a),p=1;p<arguments.length;++p){var m=d,l=f.normalize(arguments[p]),d=new f.Matrix2D;d.xx=m.xx*l.xx+m.xy*l.yx;d.xy=m.xx*l.xy+m.xy*l.yy;d.yx=m.yx*l.xx+m.yy*l.yx;d.yy=m.yx*l.xy+m.yy*l.yy;d.dx=m.xx*l.dx+m.xy*l.dy+m.dx;
d.dy=m.yx*l.dx+m.yy*l.dy+m.dy}return d},_sandwich:function(a,h,p){return f.multiply(f.translate(h,p),a,f.translate(-h,-p))},scaleAt:function(a,h,p,m){switch(arguments.length){case 4:return f._sandwich(f.scale(a,h),p,m);case 3:return"number"==typeof p?f._sandwich(f.scale(a),h,p):f._sandwich(f.scale(a,h),p.x,p.y)}return f._sandwich(f.scale(a),h.x,h.y)},rotateAt:function(a,h,p){return 2<arguments.length?f._sandwich(f.rotate(a),h,p):f._sandwich(f.rotate(a),h.x,h.y)},rotategAt:function(a,h,p){return 2<
arguments.length?f._sandwich(f.rotateg(a),h,p):f._sandwich(f.rotateg(a),h.x,h.y)},skewXAt:function(a,h,p){return 2<arguments.length?f._sandwich(f.skewX(a),h,p):f._sandwich(f.skewX(a),h.x,h.y)},skewXgAt:function(a,h,p){return 2<arguments.length?f._sandwich(f.skewXg(a),h,p):f._sandwich(f.skewXg(a),h.x,h.y)},skewYAt:function(a,h,p){return 2<arguments.length?f._sandwich(f.skewY(a),h,p):f._sandwich(f.skewY(a),h.x,h.y)},skewYgAt:function(a,h,p){return 2<arguments.length?f._sandwich(f.skewYg(a),h,p):f._sandwich(f.skewYg(a),
h.x,h.y)}});A.Matrix2D=f.Matrix2D;return f})},"esri/views/2d/libs/gfx/Shape":function(){define("require exports dojox/gfx/_base dojo/_base/lang dojo/_base/Color dojo/dom dojo/dom-attr ./svg ./Surface ../gl-matrix/mat2d".split(" "),function(A,t,f,a,d,h,p,m,l,q){Object.defineProperty(t,"__esModule",{value:!0});A=function(){function r(){this.parentMatrix=this.parent=this.bbox=this.strokeStyle=this.fillStyle=this.matrix=this.shape=this.rawNode=null}r.prototype.destroy=function(){if(this.fillStyle&&"type"in
this.fillStyle){var a=this.rawNode.getAttribute("fill");(a=m.getRef(a))&&a.parentNode.removeChild(a)}this.rawNode&&"__gfxObject__"in this.rawNode&&(this.rawNode.__gfxObject__=null);this.rawNode=null};r.prototype.getNode=function(){return this.rawNode};r.prototype.getShape=function(){return this.shape};r.prototype.getTransform=function(){return this.matrix};r.prototype.getFill=function(){return this.fillStyle};r.prototype.getStroke=function(){return this.strokeStyle};r.prototype.getParent=function(){return this.parent};
r.prototype.getBoundingBox=function(){return this.bbox};r.prototype.setTransform=function(a){this.matrix=this.matrix?q.copy(this.matrix,a):q.clone(a);return this._applyTransform()};r.prototype.setFill=function(a){if(!a)return this.fillStyle=null,this.rawNode.setAttribute("fill","none"),this.rawNode.setAttribute("fill-opacity",0),this;var d;if("object"===typeof a&&"type"in a){switch(a.type){case "linear":d=f.makeParameters(f.defaultLinearGradient,a);a=this._setFillObject(d,"linearGradient");a.setAttribute("x1",
d.x1.toFixed(8));a.setAttribute("y1",d.y1.toFixed(8));a.setAttribute("x2",d.x2.toFixed(8));a.setAttribute("y2",d.y2.toFixed(8));break;case "radial":d=f.makeParameters(f.defaultRadialGradient,a);a=this._setFillObject(d,"radialGradient");a.setAttribute("cx",d.cx.toFixed(8));a.setAttribute("cy",d.cy.toFixed(8));a.setAttribute("r",d.r.toFixed(8));break;case "pattern":d=f.makeParameters(f.defaultPattern,a),a=this._setFillObject(d,"pattern"),a.setAttribute("x",d.x.toFixed(8)),a.setAttribute("y",d.y.toFixed(8)),
a.setAttribute("width",d.width.toFixed(8)),a.setAttribute("height",d.height.toFixed(8))}this.fillStyle=d;return this}this.fillStyle=d=f.normalizeColor(a);this.rawNode.setAttribute("fill",d.toCss());this.rawNode.setAttribute("fill-opacity",d.a);this.rawNode.setAttribute("fill-rule","evenodd");return this};r.prototype.setStroke=function(h){var l=this.rawNode;if(!h)return this.strokeStyle=null,l.setAttribute("stroke","none"),l.setAttribute("stroke-opacity",0),this;if("string"===typeof h||a.isArray(h)||
h instanceof d)h={color:h};h=this.strokeStyle=f.makeParameters(f.defaultStroke,h);h.color=f.normalizeColor(h.color);if(h){var p=0>h.width?0:h.width;l.setAttribute("stroke",h.color.toCss());l.setAttribute("stroke-opacity",h.color.a);l.setAttribute("stroke-width",p);l.setAttribute("stroke-linecap",h.cap);"number"===typeof h.join?(l.setAttribute("stroke-linejoin","miter"),l.setAttribute("stroke-miterlimit",h.join)):l.setAttribute("stroke-linejoin",h.join);var q=h.style.toLowerCase();q in m.dasharray&&
(q=m.dasharray[q]);if(q instanceof Array){for(var q=a._toArray(q),r=0;r<q.length;++r)q[r]*=p;if("butt"!==h.cap){for(r=0;r<q.length;r+=2)q[r]-=p,1>q[r]&&(q[r]=1);for(r=1;r<q.length;r+=2)q[r]+=p}q=q.join(",")}l.setAttribute("stroke-dasharray",q);l.setAttribute("dojoGfxStrokeStyle",h.style)}return this};r.prototype._getParentSurface=function(){for(var a=this.parent;a&&!(a instanceof l.default);a=a.parent);return a};r.prototype._setFillObject=function(a,d){var h=m.xmlns.svg;this.fillStyle=a;var l=this._getParentSurface().defNode,
p=this.rawNode.getAttribute("fill");if(p=m.getRef(p))if(p.tagName.toLowerCase()!==d.toLowerCase()){var q=p.id;p.parentNode.removeChild(p);p=m._createElementNS(h,d);p.setAttribute("id",q);l.appendChild(p)}else for(;p.childNodes.length;)p.removeChild(p.lastChild);else p=m._createElementNS(h,d),p.setAttribute("id",f._base._getUniqueId()),l.appendChild(p);if("pattern"===d)p.setAttribute("patternUnits","userSpaceOnUse"),h=m._createElementNS(h,"image"),h.setAttribute("x",0),h.setAttribute("y",0),h.setAttribute("width",
(0>a.width?0:a.width).toFixed(8)),h.setAttribute("height",(0>a.height?0:a.height).toFixed(8)),m._setAttributeNS(h,m.xmlns.xlink,"xlink:href",a.src),p.appendChild(h);else for(p.setAttribute("gradientUnits","userSpaceOnUse"),d=0;d<a.colors.length;++d){var l=a.colors[d],q=m._createElementNS(h,"stop"),r=l.color=f.normalizeColor(l.color);q.setAttribute("offset",l.offset.toFixed(8));q.setAttribute("stop-color",r.toCss());q.setAttribute("stop-opacity",r.a);p.appendChild(q)}this.rawNode.setAttribute("fill",
"url(#"+p.getAttribute("id")+")");this.rawNode.removeAttribute("fill-opacity");this.rawNode.setAttribute("fill-rule","evenodd");return p};r.prototype._applyTransform=function(){var a=this.matrix;a?this.rawNode.setAttribute("transform","matrix("+a[0].toFixed(8)+","+a[1].toFixed(8)+","+a[2].toFixed(8)+","+a[3].toFixed(8)+","+a[4].toFixed(8)+","+a[5].toFixed(8)+")"):this.rawNode.removeAttribute("transform");return this};r.prototype.setRawNode=function(a){a=this.rawNode=a;"image"!==this.shape.type&&a.setAttribute("fill",
"none");a.setAttribute("fill-opacity",0);a.setAttribute("stroke","none");a.setAttribute("stroke-opacity",0);a.setAttribute("stroke-width",1);a.setAttribute("stroke-linecap","butt");a.setAttribute("stroke-linejoin","miter");a.setAttribute("stroke-miterlimit",4);a.__gfxObject__=this};r.prototype.setShape=function(a){this.shape=f.makeParameters(this.shape,a);for(var d in this.shape)if("type"!==d){a=this.shape[d];if("width"===d||"height"===d)a=0>a?0:a;this.rawNode.setAttribute(d,a)}this.bbox=null;return this};
r.prototype._moveToFront=function(){this.rawNode.parentNode.appendChild(this.rawNode);return this};r.prototype._moveToBack=function(){this.rawNode.parentNode.insertBefore(this.rawNode,this.rawNode.parentNode.firstChild);return this};r.prototype._removeClipNode=function(){var a,d=p.get(this.rawNode,"clip-path");d&&(a=h.byId(d.match(/gfx_clip[\d]+/)[0]))&&a.parentNode.removeChild(a);return a};r.prototype.moveToFront=function(){var a=this.getParent();a&&(a._moveChildToFront(this),this._moveToFront());
return this};r.prototype.moveToBack=function(){var a=this.getParent();a&&(a._moveChildToBack(this),this._moveToBack());return this};r.prototype.removeShape=function(a){this.parent&&this.parent.remove(this,a);return this};r.prototype._setParent=function(a,d){this.parent=a;return this._updateParentMatrix(d)};r.prototype._updateParentMatrix=function(a){this.parentMatrix=a?q.clone(a):null;return this._applyTransform()};r.prototype._getRealMatrix=function(){for(var a=q.clone(this.matrix||q.create()),d=
this.parent;d;)d.matrix&&a&&q.multiply(a,d.matrix,a),d=d.parent;return a};return r}();t.default=A})},"esri/views/2d/libs/gfx/Circle":function(){define(["require","exports","../../../../core/tsSupport/extendsHelper","./Shape","dojox/gfx/_base"],function(A,t,f,a,d){Object.defineProperty(t,"__esModule",{value:!0});A=function(a){function h(f){var h=a.call(this)||this;h.shape=d.getDefault("Circle");h.rawNode=f;return h}f(h,a);h.prototype.getBoundingBox=function(){if(!this.bbox){var a=this.shape;this.bbox=
{x:a.cx-a.r,y:a.cy-a.r,width:2*a.r,height:2*a.r}}return this.bbox};h.nodeType="circle";return h}(a.default);t.default=A})},"esri/views/2d/libs/gfx/Group":function(){define("require exports ../../../../core/tsSupport/extendsHelper ./Container dojox/gfx/_base ./svg ./Circle ./Path ./Image ./Rect ./Text".split(" "),function(A,t,f,a,d,h,p,m,l,q,r){Object.defineProperty(t,"__esModule",{value:!0});A=function(a){function v(){return null!==a&&a.apply(this,arguments)||this}f(v,a);v.prototype.setRawNode=function(a){this.rawNode=
a;this.rawNode.__gfxObject__=this};v.prototype.destroy=function(){a.prototype.clear.call(this,!0);a.prototype.destroy.call(this)};v.prototype.createShape=function(a){switch(a.type){case d.defaultPath.type:return this.createPath(a);case d.defaultRect.type:return this.createRect(a);case d.defaultCircle.type:return this.createCircle(a);case d.defaultImage.type:return this.createImage(a);case d.defaultText.type:return this.createText(a)}console.error("[gfx] unknown shape",a);return null};v.prototype.createGroup=
function(){return this.createObject(v)};v.prototype.createRect=function(a){return this.createObject(q.default,a)};v.prototype.createCircle=function(a){return this.createObject(p.default,a)};v.prototype.createImage=function(a){return this.createObject(l.default,a)};v.prototype.createText=function(a){return this.createObject(r.default,a)};v.prototype.createPath=function(a){return this.createObject(m.default,a)};v.prototype.createObject=function(a,d){if(!this.rawNode)return null;var f=new a;a=h._createElementNS(h.xmlns.svg,
a.nodeType);f.setRawNode(a);f.setShape(d);this.add(f);return f};v.nodeType="g";return v}(a.default);t.default=A})},"esri/views/2d/libs/gfx/Path":function(){define("require exports ../../../../core/tsSupport/extendsHelper dojo/_base/lang dojox/gfx/_base dojox/gfx/matrix ./Shape".split(" "),function(A,t,f,a,d,h,p){Object.defineProperty(t,"__esModule",{value:!0});A=function(m){function l(f){var h=m.call(this)||this;h.segments=[];h.tbbox=null;h.absolute=!0;h.last={};h.segmented=!1;h._validSegments={m:2,
l:2,h:1,v:1,c:6,s:4,q:4,t:2,a:7,z:0};h._2PI=2*Math.PI;h.rawNode=f;h.shape=a.clone(d.defaultPath);return h}f(l,m);l.prototype.setAbsoluteMode=function(a){this._confirmSegmented();this.absolute="string"===typeof a?"absolute"===a:a;return this};l.prototype.getAbsoluteMode=function(){this._confirmSegmented();return this.absolute};l.prototype.getBoundingBox=function(){this._confirmSegmented();return this.bbox&&"l"in this.bbox?{x:this.bbox.l,y:this.bbox.t,width:this.bbox.r-this.bbox.l,height:this.bbox.b-
this.bbox.t}:null};l.prototype._getRealBBox=function(){this._confirmSegmented();if(this.tbbox)return this.tbbox;var a=this.bbox,d=this._getRealMatrix();this.bbox=null;for(var f=this.segments.length,h=0;h<f;++h)this._updateWithSegment(this.segments[h],d);d=this.bbox;this.bbox=a;return this.tbbox=d?[{x:d.l,y:d.t},{x:d.r,y:d.t},{x:d.r,y:d.b},{x:d.l,y:d.b}]:null};l.prototype.getLastPosition=function(){this._confirmSegmented();return"x"in this.last?this.last:null};l.prototype._applyTransform=function(){this.tbbox=
null;m.prototype._applyTransform.call(this);return this};l.prototype._updateBBox=function(a,d,f){f&&(d=h.multiplyPoint(f,a,d),a=d.x,d=d.y);this.bbox&&"l"in this.bbox?(this.bbox.l>a&&(this.bbox.l=a),this.bbox.r<a&&(this.bbox.r=a),this.bbox.t>d&&(this.bbox.t=d),this.bbox.b<d&&(this.bbox.b=d)):this.bbox={l:a,b:d,r:a,t:d}};l.prototype._updateWithSegment=function(a,f){var h=a.args,l=h.length,m;switch(a.action){case "M":case "L":case "C":case "S":case "Q":case "T":for(m=0;m<l;m+=2)this._updateBBox(h[m],
h[m+1],f);this.last.x=h[l-2];this.last.y=h[l-1];this.absolute=!0;break;case "H":for(m=0;m<l;++m)this._updateBBox(h[m],this.last.y,f);this.last.x=h[l-1];this.absolute=!0;break;case "V":for(m=0;m<l;++m)this._updateBBox(this.last.x,h[m],f);this.last.y=h[l-1];this.absolute=!0;break;case "m":m=0;"x"in this.last||(this._updateBBox(this.last.x=h[0],this.last.y=h[1],f),m=2);for(;m<l;m+=2)this._updateBBox(this.last.x+=h[m],this.last.y+=h[m+1],f);this.absolute=!1;break;case "l":case "t":for(m=0;m<l;m+=2)this._updateBBox(this.last.x+=
h[m],this.last.y+=h[m+1],f);this.absolute=!1;break;case "h":for(m=0;m<l;++m)this._updateBBox(this.last.x+=h[m],this.last.y,f);this.absolute=!1;break;case "v":for(m=0;m<l;++m)this._updateBBox(this.last.x,this.last.y+=h[m],f);this.absolute=!1;break;case "c":for(m=0;m<l;m+=6)this._updateBBox(this.last.x+h[m],this.last.y+h[m+1],f),this._updateBBox(this.last.x+h[m+2],this.last.y+h[m+3],f),this._updateBBox(this.last.x+=h[m+4],this.last.y+=h[m+5],f);this.absolute=!1;break;case "s":case "q":for(m=0;m<l;m+=
4)this._updateBBox(this.last.x+h[m],this.last.y+h[m+1],f),this._updateBBox(this.last.x+=h[m+2],this.last.y+=h[m+3],f);this.absolute=!1;break;case "A":for(m=0;m<l;m+=7)this._updateBBox(h[m+5],h[m+6],f);this.last.x=h[l-2];this.last.y=h[l-1];this.absolute=!0;break;case "a":for(m=0;m<l;m+=7)this._updateBBox(this.last.x+=h[m+5],this.last.y+=h[m+6],f);this.absolute=!1}a=[a.action];for(m=0;m<l;++m)a.push(d.formatNumber(h[m],!0));if("string"===typeof this.shape.path)this.shape.path+=a.join("");else for(m=
0,l=a.length;m<l;++m)this.shape.path.push(a[m]);"string"===typeof this.shape.path&&this.rawNode.setAttribute("d",this.shape.path)};l.prototype._pushSegment=function(a,d){this.tbbox=null;var f=this._validSegments[a.toLowerCase()];"number"===typeof f&&(f?d.length>=f&&(a={action:a,args:d.slice(0,d.length-d.length%f)},this.segments.push(a),this._updateWithSegment(a)):(a={action:a,args:[]},this.segments.push(a),this._updateWithSegment(a)))};l.prototype._collectArgs=function(a,d){for(var f=0;f<d.length;++f){var h=
d[f];"boolean"===typeof h?a.push(h?1:0):"number"===typeof h?a.push(h):h instanceof Array?this._collectArgs(a,h):"x"in h&&"y"in h&&a.push(h.x,h.y)}};l.prototype._confirmSegmented=function(){if(!this.segmented){var a=this.shape.path;this.shape.path=[];this._setPath(a);this.shape.path=this.shape.path.join("");this.segmented=!0}};l.prototype._setPath=function(f){f=a.isArray(f)?f:f.match(d.pathSvgRegExp);this.segments=[];this.absolute=!0;this.bbox={};this.last={};if(f){for(var h="",l=[],m=f.length,p=0;p<
m;++p){var q=f[p],t=parseFloat(q);isNaN(t)?(h&&this._pushSegment(h,l),l=[],h=q):l.push(t)}this._pushSegment(h,l)}};l.prototype.setShape=function(a){m.prototype.setShape.call(this,"string"===typeof a?{path:a}:a);this.segmented=!1;this.segments=[];this.shape.path?this.rawNode.setAttribute("d",this.shape.path):this.rawNode.removeAttribute("d");return this};l.nodeType="path";return l}(p.default);t.default=A})},"esri/views/2d/libs/gfx/Image":function(){define("require exports ../../../../core/tsSupport/extendsHelper dojox/gfx/_base ./Shape ./svg".split(" "),
function(A,t,f,a,d,h){Object.defineProperty(t,"__esModule",{value:!0});A=function(d){function m(f){var h=d.call(this)||this;h.shape=a.getDefault("Image");h.rawNode=f;return h}f(m,d);m.prototype.setShape=function(d){this.shape=a.makeParameters(this.shape,d);this.bbox=null;d=this.rawNode;for(var f in this.shape)if("type"!==f&&"src"!==f){var l=this.shape[f];if("width"===f||"height"===f)l=0>l?0:l;d.setAttribute(f,l)}d.setAttribute("preserveAspectRatio","none");h._setAttributeNS(d,h.xmlns.xlink,"xlink:href",
this.shape.src);d.__gfxObject__=this;return this};m.prototype.getBoundingBox=function(){return this.shape};m.prototype.setStroke=function(){return this};m.prototype.setFill=function(){return this};m.nodeType="image";return m}(d.default);t.default=A})},"esri/views/2d/libs/gfx/Rect":function(){define(["require","exports","../../../../core/tsSupport/extendsHelper","dojox/gfx/_base","./Shape"],function(A,t,f,a,d){Object.defineProperty(t,"__esModule",{value:!0});A=function(d){function h(f){var h=d.call(this)||
this;h.shape=a.getDefault("Rect");h.rawNode=f;return h}f(h,d);h.prototype.getBoundingBox=function(){return this.shape};h.prototype.setShape=function(d){this.shape=a.makeParameters(this.shape,d);this.bbox=null;for(var f in this.shape)if("type"!==f&&"r"!==f){d=this.shape[f];if("width"===f||"height"===f)d=0>d?0:d;this.rawNode.setAttribute(f,d)}null!=this.shape.r&&(this.rawNode.setAttribute("ry",this.shape.r),this.rawNode.setAttribute("rx",this.shape.r));return this};h.nodeType="rect";return h}(d.default);
t.default=A})},"esri/views/2d/libs/gfx/Text":function(){define("require exports ../../../../core/tsSupport/extendsHelper dojo/has dojox/gfx/_base ./Shape ./svg".split(" "),function(A,t,f,a,d,h,p){Object.defineProperty(t,"__esModule",{value:!0});A=a("android");var m=a("chrome")||A&&4<=A?"auto":"optimizeLegibility";a=function(a){function h(f){var h=a.call(this)||this;h.fontStyle=null;h.shape=d.getDefault("Text");h.rawNode=f;return h}f(h,a);h.prototype.getFont=function(){return this.fontStyle};h.prototype.setFont=
function(a){this.fontStyle="string"===typeof a?d.splitFontString(a):d.makeParameters(d.defaultFont,a);this._setFont();return this};h.prototype._setFont=function(){var a=this.fontStyle;this.rawNode.setAttribute("font-style",a.style);this.rawNode.setAttribute("font-variant",a.variant);this.rawNode.setAttribute("font-weight",a.weight);this.rawNode.setAttribute("font-size",a.size);this.rawNode.setAttribute("font-family",a.family)};h.prototype.setShape=function(a){this.shape=d.makeParameters(this.shape,
a);this.bbox=null;a=this.rawNode;var f=this.shape;a.setAttribute("x",f.x);a.setAttribute("y",f.y);a.setAttribute("text-anchor",f.align);a.setAttribute("text-decoration",f.decoration);a.setAttribute("rotate",f.rotated?90:0);a.setAttribute("kerning",f.kerning?"auto":0);a.setAttribute("text-rendering",m);a.firstChild?a.firstChild.nodeValue=f.text:a.appendChild(p._createTextNode(f.text));return this};h.prototype.getTextWidth=function(){var a=this.rawNode,d=a.parentNode,a=a.cloneNode(!0);a.style.visibility=
"hidden";var f=0,h=a.firstChild.nodeValue;d.appendChild(a);if(""!==h)for(;!f;)f=a.getBBox?parseInt(a.getBBox().width,10):68;d.removeChild(a);return f};h.prototype.getBoundingBox=function(){var a=null;if(this.getShape().text)try{a=this.rawNode.getBBox()}catch(v){a={x:0,y:0,width:0,height:0}}return a};h.nodeType="text";return h}(h.default);t.default=a})},"esri/views/2d/engine/graphics/Projector":function(){define(["require","exports"],function(A,t){function f(a,m,l,q,r){void 0===q&&(q=0);void 0===r&&
(r=a.length);for(var p=a[q],x=a[r-1],t=0,C=0,E,D=q+1;D<r-1;D++){var A=a[D];E=A[0];var A=A[1],H=p[0],K=p[1],w=x[0],L=x[1];H===w?E=d(E-H):(w=(L-K)/(w-H),E=d(w*E-A+(K-w*H))/h(w*w+1));E>t&&(C=D,t=E)}t>m?(f(a,m,l,q,C+1),f(a,m,l,C,r)):(l(p[0],p[1]),l(x[0],x[1]))}var a=Math.round,d=Math.abs,h=Math.sqrt;return function(){function d(){this._transform=null}d.prototype.update=function(a,d){this._transform=a;this._resolution=d};d.prototype.toScreenPoint=function(a,d,f){this.transformPoint(d.x+f*this._resolution,
d.y,function(d,f){a.x=d;a.y=f});return a};d.prototype.toScreenPath=function(a,d){var h=this,l=null!=a.paths;a=l?a.paths:a.rings;var m="",p=function(a,f){a+=d*h._resolution;h.transformPoint(a,f,function(a,d){isNaN(a)||isNaN(d)||(m+=a,m+=",",m+=d,m+=" ")})};if(a)for(var t=a.length,C=0;C<t;C++)m+="M ",f(a[C],this._resolution,p),l||(m+="Z ");return m};d.prototype.transformPoint=function(d,f,h){var l=this._transform,m=l[1],p=l[3],q=l[5];h(a(l[0]*d+l[2]*f+l[4]),a(m*d+p*f+q))};return d}()})},"esri/views/2d/engine/cssUtils":function(){define(["require",
"exports","dojo/has"],function(A,t,f){function a(a){return"matrix3d(\n                    "+a[0].toFixed(10)+", "+a[1].toFixed(10)+", 0, 0,\n                    "+a[2].toFixed(10)+", "+a[3].toFixed(10)+", 0, 0,\n                    0, 0, 1, 0,\n                    "+Math.round(a[4]).toFixed(10)+", "+Math.round(a[5]).toFixed(10)+", 0, 1\n                  )"}function d(a){return"translate("+Math.round(a[0])+"px, "+Math.round(a[1])+"px)"}function h(a){return"rotateZ( "+a+" deg)"}Object.defineProperty(t,
"__esModule",{value:!0});A=f("ff");var p=f("ie"),m=f("webkit");f=f("opera");var l=m&&"-webkit-transform"||A&&"-moz-transform"||f&&"-o-transform"||p&&"-ms-transform"||"transform";t.clip=function(a,d){a.clip=d?"rect( "+d.top+"px, "+d.right+"px, "+d.bottom+"px, "+d.left+"px)":""};t.setTransform=function(f,h){var m=null;2===h.length&&(m=d(h));6===h.length&&(m=a(h));f.transform=f[l]=m};t.setOrigin=function(a,d){a.transformOrigin=d[0]+"px "+d[1]+"px 0"};t.cssMatrix=function(a){return"matrix(\n                  "+
a[0].toFixed(10)+", "+a[1].toFixed(10)+",\n                  "+a[2].toFixed(10)+", "+a[3].toFixed(10)+",\n                  "+a[4]+", "+a[5]+"\n                )"};t.cssMatrix3d=a;t.translate=d;t.rotate=function(a){return h(a.toFixed(3))};t.rotateZ=h})},"esri/views/2d/engine/graphics/GFXGroup":function(){define(["require","exports","../../../../core/tsSupport/extendsHelper","dojo/_base/lang","../Container"],function(A,t,f,a,d){return function(d){function h(){return null!==d&&d.apply(this,arguments)||
this}f(h,d);h.prototype.attach=function(a){this.g=a.surface.createGroup();return d.prototype.attach.call(this,a)};h.prototype.detach=function(a){d.prototype.detach.call(this,a);this.g.destroy();this.g=null};h.prototype.prepareChildrenRenderParameters=function(d){return a.mixin({},d,{surface:this.g})};h.prototype.detachChild=function(a,d){return a.detach(d)};h.prototype.attachChild=function(a,d){return a.attach(d)};h.prototype.renderChild=function(a,d){return a.processRender(d)};return h}(d)})},"esri/views/2d/engine/graphics/GFXObject":function(){define("require exports ../../../../core/tsSupport/extendsHelper ../../../../geometry/Extent ../../../../geometry/support/webMercatorUtils ../../../../geometry/support/spatialReferenceUtils ../DisplayObject ./gfxUtils".split(" "),
function(A,t,f,a,d,h,p,m){var l=new Set,q=[];return function(p){function r(){var a=null!==p&&p.apply(this,arguments)||this;a._prevStateId=null;a.visible=!0;return a}f(r,p);Object.defineProperty(r.prototype,"graphic",{get:function(){return this._graphic},set:function(a){this._geometry=(this._graphic=a)&&a.geometry||null;this._projected=null;this.requestRender()},enumerable:!0,configurable:!0});Object.defineProperty(r.prototype,"geometry",{get:function(){return this._geometry},enumerable:!0,configurable:!0});
Object.defineProperty(r.prototype,"isPolygonMarkerSymbol",{get:function(){var a=this.renderingInfo.symbol.type,d=this.geometry;return d&&"polygon"===d.type&&("simple-marker"===a||"picture-marker"===a||"text"===a)},enumerable:!0,configurable:!0});Object.defineProperty(r.prototype,"renderingInfo",{get:function(){return this._renderingInfo},set:function(a){this._renderingInfo=a;this.requestRender()},enumerable:!0,configurable:!0});r.prototype.detach=function(){this._removeShape();this._drawInfo=this._projected=
null};r.prototype.doRender=function(a){var d=a.surface,f=a.state,h=a.projector,l=this._prevStateId!==f.id;if(this.renderRequested||l)if(l&&a.stationary&&(this._prevStateId=f.id),l=this.visible&&this._projectGeometry(this.geometry,a.state.spatialReference),a=this._getScreenOffsets([],a.state),m.isShapeInvalid(this.renderingInfo.symbol,this._shape)&&this._removeShape(),a.length){var p=this._shape,q=l.type;if(!p||this._showRedraw(a,f))"point"===q?(p=m.drawPoint(h,d,l,p,this.renderingInfo,f.rotation,
a),m.stylePoint(p,this.renderingInfo)):"multipoint"===q?(p=m.drawMarkers(h,d,l,p,this.renderingInfo,f.rotation,a),m.styleMarkers(p,this.renderingInfo)):(p=m.drawShape(h,d,l,p,a),m.styleShape(p,this.renderingInfo)),this._shape=p,p.getNode().gfxObject=this}else this._removeShape()};r.prototype._getScreenOffsets=function(a,d){var f=d.clippedExtent,m=this._projected.outExtent,p=d.spatialReference;a.length=0;if(!m)return a;if(p.isWrappable){var p=h.getInfo(p),r=m.cache._partwise,f=f._getParts(p);q.length=
0;if(r&&r.length)for(m=0;m<r.length;m++)q.push.apply(q,r[m]._getParts(p));else q.push.apply(q,m._getParts(p));d=d.worldScreenWidth;a.length=0;l.clear();m=q.length;for(p=0;p<m;p++)for(var t=q[p],r=t.extent,t=t.frameIds,v=t.length,x=f.length,y=0;y<x;y++){var A=f[y];if(A.extent.intersects(r))for(var M=v,S=0;S<M;S++){var N=(A.frameIds[0]-t[S])*d;l.has(N)||(a.push(N),l.add(N))}}a.sort()}else f.intersects(m)&&a.push(0);return a};r.prototype._projectGeometry=function(a,f){var h=this._projected;a=this.isPolygonMarkerSymbol?
a.centroid:a;if(h&&h.inGeometry===a&&h.outSpatialReference===f)return h.outGeometry;a&&a.spatialReference.equals(f)?this._projected={inGeometry:a,outGeometry:a,outSpatialReference:f,outExtent:this._getExtent(a)}:d.canProject(a,f)?this._projected={inGeometry:a,outGeometry:d.project(a,f),outSpatialReference:f,outExtent:this._getExtent(a)}:this._projected={inGeometry:a,outGeometry:null,outSpatialReference:f,outExtent:null};return this._projected.outGeometry};r.prototype._getExtent=function(d){var f=
d.extent;if(!f){var h=f=void 0;"esri.geometry.Point"===d.declaredClass?(f=d.x,h=d.y):"esri.geometry.Multipoint"===d.declaredClass&&(f=d.points[0][0],h=d.points[0][1]);f=new a(f,h,f,h,d.spatialReference)}return f};r.prototype._removeShape=function(){var a=this._shape;a&&(a.removeShape(),a.getNode().gfxObject=null,a.destroy());this._shape=this._drawInfo=null};r.prototype._showRedraw=function(a,d){return!0};return r}(p)})},"esri/views/2d/engine/graphics/gfxUtils":function(){define("require exports dojo/_base/lang ../../libs/gl-matrix/mat2d ../../libs/gl-matrix/mat2dExtras ../../../../core/screenUtils ../../../../geometry/Polygon ../../../../symbols/SimpleMarkerSymbol ../../../../symbols/support/gfxUtils ../../../../Color".split(" "),
function(A,t,f,a,d,h,p,m,l,q){function r(a,d){d.toRgba?(a[0]=d.r,a[1]=d.g,a[2]=d.b,a[3]=d.a):(a[0]=d[0],a[1]=d[1],a[2]=d[2],a[3]=d[3]);return a}function v(a,d,f){null!=f&&(a[0]=d[0],a[1]=d[1],a[2]=d[2],a[3]=f);return a}function x(a,d,f){var h=d[0]/d[1];a[0]=a[1]=1;isNaN(f)||(1<h?(a[0]=f/d[0],a[1]=f/h/d[1]):(a[1]=f/d[1],a[0]=f*h/d[0]));return a}function y(f,p,q,r,t,v,w){var y=t.symbol;q=f.toScreenPoint(L,q,w[0]);w=[q.x,q.y];f=q.x;q=q.y;var g=t.heading,A=t.size&&t.size[0],z,c;a.identity(J);"number"===
typeof A&&(c=isFinite(A)&&A);c=(A=c&&isFinite(c)&&!isNaN(c))?h.pt2px(c):NaN;v&&d.rotategAt(J,J,v,w);g&&d.rotategAt(J,J,g,w);v=h.pt2px(y.xoffset);var g=h.pt2px(y.yoffset),b;if(0!==v||0!==g)b=[v,-g];v=null;0!==y.angle&&(v=a.create(),d.rotategAt(v,v,y.angle,w));var e;if("simple-marker"===y.type)switch(z=y.style,t=Math.round,c=A?c:h.pt2px(y.size),A=void 0,z){case m.STYLE_SQUARE:case m.STYLE_CROSS:case m.STYLE_X:case m.STYLE_DIAMOND:A=isNaN(c)?16:.5*c;z=D(p,r,K(z,f,q,t(f-A),t(f+A),t(q-A),t(q+A)));break;
case m.STYLE_PATH:z=e=D(p,r,y.path);e=e.getBoundingBox();y=x(a.create(),[e.width,e.height],c);1===y[0]&&1===y[3]||d.scaleAt(J,J,y,w);e=[-(e.x+.5*e.width)+f,-(e.y+.5*e.height)+q];break;default:A=isNaN(c)?16:.5*c,z=E(p,r,{cx:f,cy:q,r:A})}else if("picture-marker"===y.type){w=z=null;var g=h.pt2px(y.width),k=h.pt2px(y.height);A?(w=c,z=g/k*w):(z=g,w=k);b&&(null!=b[0]&&(b[0]=b[0]/g*z),null!=b[1]&&(b[1]=b[1]/k*w));z=C(p,r,{x:f-.5*z,y:q-.5*w,width:z,height:w,src:y.url});(c=z.getNode())&&(null!=t.opacity?c.setAttribute("opacity",
t.opacity.toString()):c.setAttribute("opacity","1"))}else if("text"===y.type){if(t=y.font&&y.font.clone())t.size=A?c:h.pt2px(t.size);z=F(p,r,{type:"text",text:y.text,x:f,y:q,align:l.getSVGAlign(y),decoration:y.decoration||t&&t.decoration,rotated:y.rotated,kerning:y.kerning});t&&z.setFont(t);c=z.getNode();p=l.getSVGBaseline(y);y=l.getSVGBaselineShift(y);c&&(c.setAttribute("dominant-baseline",p),y&&c.setAttribute("baseline-shift",y))}b&&a.translate(J,J,b);v&&a.multiply(J,J,v);e&&a.translate(J,J,e);
z.setTransform(J);return z}function C(a,d,f){return d?d.setShape(f):a.createImage(f)}function E(a,d,f){return d?d.setShape(f):a.createCircle(f)}function D(a,d,f){f=Array.isArray(f)?f.join(" "):f;return d?d.setShape(f):a.createPath(f)}function F(a,d,f){return d?d.setShape(f):a.createText(f)}function H(a,d){d=d&&d.shape&&d.shape.type;var f=a&&a.type;a=a&&a.style;f&&(a=M[f]||a);S[a]&&(a="path");return!(!d||!a||d===a)}function K(a,d,f,h,l,p,q,r){switch(a){case m.STYLE_SQUARE:return["M",h+","+p,l+","+
p,l+","+q,h+","+q,"Z"];case m.STYLE_CROSS:return["M",d+","+p,d+","+q,"M",h+","+f,l+","+f];case m.STYLE_X:return["M",h+","+p,l+","+q,"M",h+","+q,l+","+p];case m.STYLE_DIAMOND:return["M",d+","+p,l+","+f,d+","+q,h+","+f,"Z"];case m.STYLE_TARGET:return["M",h+","+p,l+","+p,l+","+q,h+","+q,h+","+p,"M",h-r+","+f,h+","+f,"M",d+","+(p-r),d+","+p,"M",l+r+","+f,l+","+f,"M",d+","+(q+r),d+","+q]}}function w(a,d){var h=d.symbol;if("picture-marker"!==h.type){var p=l.getFill(h);if("simple-marker"===h.type){var q=
h.style,t=(h=l.getStroke(h))&&h.color,q=q===m.STYLE_X||q===m.STYLE_CROSS,x=d.opacity;(d=d.color||r([0,0,0,0],q?t:p))&&null!=x&&(d=v([0,0,0,0],d,x));d&&(q?d!==t&&(h=h?f.mixin({},h):{},h.color=d):d!==p&&(p=d));a.setFill(p).setStroke(h)}else"text"===h.type&&(x=d.opacity,(d=d.color||r([0,0,0,0],p))&&null!=x&&(d=v([0,0,0,0],d,x)),d&&d!==p&&(p=d),a.setFill(p))}}Object.defineProperty(t,"__esModule",{value:!0});t.getScalingVector=x;var L={x:0,y:0},J=a.create();t.drawPoint=y;t.drawMarkers=function(a,d,f,h,
l,m,p){var q=l.symbol;f=f.points;d=h||d.createGroup();h=[0];d.children[0]&&H(q,d.children[0])&&d.clear();for(var g=0,r=f.length,q=0;q<r;q++)for(var t=f[q],c=p.length,b=0;b<c;b++)h[0]=p[b],d.add(y(a,d,{x:t[0],y:t[1]},d.children[g++],l,m,h));a=d.children.length;if(f.length*p.length<a)for(p=f.length*p.length,q=a-1;q>=p;q--)d.children[q].removeShape();return d};t.drawShape=function(a,d,f,h,l){var m=[];"extent"===f.type&&(f=p.fromExtent(f));if("polyline"===f.type||"polygon"===f.type){for(var q=l.length,
r=0;r<q;r++)m=m.concat(a.toScreenPath(f,l[r]));h=D(d,h,m)}return h};t.drawRect=function(a,d,f){return d?d.setShape(f):a.createRect(f)};t.drawImage=C;t.drawCircle=E;t.drawPath=D;t.drawText=F;var M={"picture-marker":"image","picture-fill":"path","simple-fill":"path","simple-line":"path",text:"text"},S={square:1,cross:1,x:1,diamond:1,target:1};t.isShapeInvalid=H;t.smsToPath=K;t.stylePoint=w;t.styleMarkers=function(a,d){for(var f=a.children.length,h=0;h<f;h++)w(a.children[h],d)};t.styleShape=function(a,
d){var m=d.symbol,p=d.size,t=d.color,x=d.opacity,w=l.getStroke(m),y=l.getFill(m),g=!1,C;"simple-line"===m.type?(g=!0,C="none"!==m.style):C=m.outline&&"none"!==m.outline.style;var z,c,b;p&&(b=isFinite(p[0])&&p[0]);null!=p&&(b=h.pt2px(b));d="picture-fill"===m.type;!t&&null==x||d||(g?(z=t||w&&w.color&&r([0,0,0,0],w.color))&&null!=x&&(z=v(z,z,x)):y&&(c=t||r([0,0,0,0],y))&&null!=x&&(c=v(c,c,x)));!C||null==p&&!z?a.setStroke(w):a.setStroke(f.mixin({},w,null!=b?{width:b}:null,z&&{color:z}));m=t&&new q(t)||
m.color;y&&"pattern"===y.type&&m&&!d?l.getPatternUrlWithColor(y.src,m.toCss(!0)).then(function(b){y.src=b;a.setFill(y)}):a.setFill(c||y);a.rawNode.setAttribute("vector-effect","non-scaling-stroke")}})},"esri/views/2d/libs/gl-matrix/mat2dExtras":function(){define(["require","exports","./mat2d","./vec2","./common"],function(A,t,f,a,d){Object.defineProperty(t,"__esModule",{value:!0});var h=function(){var d=f.create(),h=a.create();return function(l,m,p){f.fromTranslation(d,p);f.multiply(l,d,m);a.negate(h,
p);f.translate(l,l,h);return l}}();t.rotategAt=function(){var a=f.create();return function(m,l,p,r){f.fromRotation(a,d.toRadian(p));h(a,a,r);f.multiply(m,a,l);return m}}();t.scaleAt=function(){var a=f.create();return function(d,l,p,r){f.fromScaling(a,p);h(a,a,r);f.multiply(d,a,l);return d}}()})},"esri/symbols/support/gfxUtils":function(){define("require exports dojo/_base/lang dojox/gfx/_base ../../Color ../../core/screenUtils ../../request ../../core/promiseUtils ../../core/LRUMap".split(" "),function(A,
t,f,a,d,h,p,m,l){function q(a){if(!a)return null;var d,f=a.constructor,l=h.pt2px(a.width);switch(a.type){case "simple-fill":case "picture-fill":case "simple-marker":d=q(a.outline);break;case "simple-line":a.style!==f.STYLE_NULL&&0!==l&&(d={color:a.color,style:C(a.style),width:l,cap:a.cap,join:a.join===f.JOIN_MITER?h.pt2px(a.miterLimit):a.join});break;default:d=null}return d}Object.defineProperty(t,"__esModule",{value:!0});var r=A.toUrl("../../symbols/patterns/"),v={left:"start",center:"middle",right:"end",
justify:"start"},x={top:"text-before-edge",middle:"central",baseline:"alphabetic",bottom:"text-after-edge"},y=new l(1E3);t.getSVGAlign=function(a){return a=(a=a.horizontalAlignment)&&v[a.toLowerCase()]||"middle"};t.getSVGBaseline=function(a){return(a=a.verticalAlignment)&&x[a.toLowerCase()]||"alphabetic"};t.getSVGBaselineShift=function(a){return"bottom"===a.verticalAlignment?"super":null};t.getFill=function(d){var l=d.style,m=null;if(d){var p=d.constructor;switch(d.type){case "simple-marker":l!==
p.STYLE_CROSS&&l!==p.STYLE_X&&(m=d.color);break;case "simple-fill":l===p.STYLE_SOLID?m=d.color:l!==p.STYLE_NULL&&(m=f.mixin({},a.defaultPattern,{src:r+l+".png",width:8,height:8}));break;case "picture-fill":m=f.mixin({},a.defaultPattern,{src:d.url,width:h.pt2px(d.width)*d.xscale,height:h.pt2px(d.height)*d.yscale,x:h.pt2px(d.xoffset),y:h.pt2px(d.yoffset)});break;case "text":m=d.color}}return m};t.getPatternUrlWithColor=function(a,d){var f=a+"-"+d;return y.has(f)?m.resolve(y.get(f)):p(a,{responseType:"image",
allowImageDataAccess:!0}).then(function(a){a=a.data;var h=a.naturalWidth,l=a.naturalHeight,m=document.createElement("canvas");m.width=h;m.height=l;var p=m.getContext("2d");p.fillStyle=d;p.fillRect(0,0,h,l);p.globalCompositeOperation="destination-in";p.drawImage(a,0,0);a=m.toDataURL();y.set(f,a);return a})};t.getStroke=q;var C=function(){var a={};return function(d){if(a[d])return a[d];var f=d.replace(/-/g,"");return a[d]=f}}();t.defaultThematicColor=new d([128,128,128])})},"esri/views/2d/input/MapViewInputManager":function(){define("require exports ../../../core/tsSupport/declareExtendsHelper ../../../core/tsSupport/decorateHelper ../../../core/watchUtils ../../../core/Accessor ../../../core/HandleRegistry ../../../core/accessorSupport/decorators ../../input/InputManager ../../input/BrowserEventSource ../../input/ViewEvents ../../input/handlers/PreventContextMenu ../input/handlers/DoubleClickZoom ../input/handlers/DragPan ../input/handlers/DragRotate ../input/handlers/KeyPan ../input/handlers/KeyZoom ../input/handlers/KeyRotate ../input/handlers/MouseWheelZoom ../input/handlers/PinchAction".split(" "),
function(A,t,f,a,d,h,p,m,l,q,r,v,x,y,C,E,D,F,H,K){var w={left:"ArrowLeft",right:"ArrowRight",up:"ArrowUp",down:"ArrowDown"},L={zoomIn:["\x3d","+"],zoomOut:["-","_"]},J={dragRotate:"Alt",clockwiseOption1:"a",clockwiseOption2:"A",counterClockwiseOption1:"d",counterClockwiseOption2:"D",resetOption1:"n",resetOption2:"N"};return function(h){function t(){var a=null!==h&&h.apply(this,arguments)||this;a._handles=new p;return a}f(t,h);t.prototype.initialize=function(){var a=this;this.viewEvents=new r.ViewEvents(this.view);
this._handles.add([d.whenNot(this.view,"ready",function(){return a._disconnect()}),d.when(this.view,"ready",function(){return a._connect()})])};t.prototype.destroy=function(){this._handles&&(this._handles.removeAll(),this._handles=null);this._disconnect();this.viewEvents.destroy();this.viewEvents=null};t.prototype._disconnect=function(){this._inputManager&&(this.viewEvents.disconnect(),this._source.destroy(),this._inputManager.destroy(),this._inputManager=this._source=null)};t.prototype._connect=
function(){var a=new q.BrowserEventSource(this.view.surface),d=new l.InputManager(a);d.installHandlers("prevent-context-menu",[new v.PreventContextMenu]);d.installHandlers("navigation",[new K.PinchRotateAndZoom(this.view),new H.MouseWheelZoom(this.view),new x.DoubleClickZoom(this.view),new y.DragPan(this.view,"primary"),new E.KeyPan(this.view,w),new D.KeyZoom(this.view,L),new F.KeyRotate(this.view,J),new C.DragRotate(this.view,"secondary"),new x.DoubleClickZoom(this.view,["Ctrl"]),new C.DragRotate(this.view,
"primary",[J.dragRotate])]);this.viewEvents.connect(d);this._source=a;this._inputManager=d};a([m.property()],t.prototype,"view",void 0);return t=a([m.subclass("esri.views.2d.input.MapViewInputManager")],t)}(m.declared(h))})},"esri/views/input/InputManager":function(){define("require exports ../../core/tsSupport/declareExtendsHelper ../../core/tsSupport/decorateHelper ../../core/accessorSupport/decorators ../../core/Accessor ../../core/now ./keys ./recognizers ../../core/Logger ./handlers/LatestPointerType".split(" "),
function(A,t,f,a,d,h,p,m,l,q,r){Object.defineProperty(t,"__esModule",{value:!0});var v=q.getLogger("esri.views.input.InputManager");A=function(h){function q(a,d){a=h.call(this)||this;a._pointerCaptures=new Map;a._nameToGroup={};a._handlers=[];a._currentPropagation=null;a._sourceEvents=new Set;a._keyModifiers=new Set;a._activeKeyModifiers=new Set;a.primaryKey=m.primaryKey;a.latestPointerType="mouse";a._installRecognizers();return a}f(q,h);q.prototype.normalizeCtorArgs=function(a,d){this._browserEvents=
a;this._browserEvents.onEventReceived=this._onEventReceived.bind(this);this._recognizers=d;this._recognizers||(this._recognizers=l.defaults.map(function(a){return new a}));return{}};q.prototype.destroy=function(){for(var a=0,d=Object.keys(this._nameToGroup);a<d.length;a++)this.uninstallHandlers(d[a])};q.prototype.installHandlers=function(a,d){var f=this;if(this._nameToGroup[a])v.error("There is already an InputHandler group registered under the name `"+a+"`");else if(0===d.length)v.error("Can't register a group of zero handlers");
else{var h={name:a,handlers:d.map(function(a,d){return{handler:a,active:!0,removed:!1,priorityIndex:0,eventCallback:null,uninstallCallback:null}})};this._nameToGroup[a]=h;a=function(a){var d=h.handlers[a];l._handlers.push(d);d.handler.onInstall({updateDependencies:function(){f.updateDependencies()},emit:function(a,h,l,m){f._emitInputEvent(d.priorityIndex,a,h,l,m)},setPointerCapture:function(a,l){f._setPointerCapture(h,d,a,l)},setEventCallback:function(a){d.eventCallback=a},setUninstallCallback:function(a){d.uninstallCallback=
a}})};var l=this;for(d=h.handlers.length-1;0<=d;d--)a(d);this.updateDependencies()}};q.prototype.uninstallHandlers=function(a){var d=this._nameToGroup[a];d?(d.handlers.forEach(function(a){a.removed=!0;a.uninstallCallback()}),delete this._nameToGroup[a],this._currentPropagation?this._currentPropagation.needsHandlerGarbageCollect=!0:this._garbageCollectRemovedHandlers()):v.error("There is no InputHandler group registered under the name `"+a+"`")};q.prototype.hasHandlers=function(a){return void 0!==
this._nameToGroup[a]};q.prototype.updateDependencies=function(){var a=new Set,d=new Set;this._handlersPriority=[];for(var f=this._handlers.length-1;0<=f;f--){var h=this._handlers[f];h.priorityIndex=f;this._handlersPriority.push(h)}this._handlersPriority=this._sortHandlersPriority(this._handlersPriority);for(f=this._handlersPriority.length-1;0<=f;f--){h=this._handlersPriority[f];h.priorityIndex=f;var l=h.handler.hasSideEffects;if(!l)for(var p=0,q=h.handler.outgoingEventTypes;p<q.length;p++)if(a.has(q[p])){l=
!0;break}if(l)for(p=0,q=h.handler.incomingEventMatches;p<q.length;p++){var r=q[p];a.add(r.eventType);for(var t=0,r=r.keyModifiers;t<r.length;t++){var v=r[t];m.isSystemModifier(v)||d.add(v)}}h.active=l}this._sourceEvents=a;this._keyModifiers=d;0<this._pointerCaptures.size&&this._sourceEvents.add("pointer-capture-lost");0<this._keyModifiers.size&&(this._sourceEvents.add("key-down"),this._sourceEvents.add("key-up"));this._browserEvents&&(this._browserEvents.activeEvents=this._sourceEvents)};q.prototype._setLatestPointerType=
function(a){this._set("latestPointerType",a)};q.prototype._onEventReceived=function(a,d){"pointer-capture-lost"===a&&this._pointerCaptures.delete(d.native.pointerId);this._updateKeyModifiers(a,d);this._emitInputEventFromSource(a,d,d.native.timestamp)};q.prototype._updateKeyModifiers=function(a,d){var f=this;if(d){var h=!1,l=function(){if(!h){var a=new Set;f._activeKeyModifiers.forEach(function(d){a.add(d)});f._activeKeyModifiers=a;h=!0}},m=function(a,d){d&&!f._activeKeyModifiers.has(a)?(l(),f._activeKeyModifiers.add(a)):
!d&&f._activeKeyModifiers.has(a)&&(l(),f._activeKeyModifiers.delete(a))};if("key-down"===a||"key-up"===a){var p=d.key;this._keyModifiers.has(p)&&m(p,"key-down"===a)}a=d.native;m("Alt",!(!a||!a.altKey));m("Ctrl",!(!a||!a.ctrlKey));m("Shift",!(!a||!a.shiftKey));m("Meta",!(!a||!a.metaKey));m("Primary",this._activeKeyModifiers.has(this.primaryKey))}};q.prototype._installRecognizers=function(){var a=this;this._latestPointerTypeHandler=new r.LatestPointerType(function(d){return a._setLatestPointerType(d)});
0<this._recognizers.length&&this.installHandlers("default",this._recognizers);this.installHandlers("input-manager-logic",[this._latestPointerTypeHandler])};q.prototype._setPointerCapture=function(a,d,f,h){a=a.name+"-"+d.priorityIndex;d=this._pointerCaptures.get(f.pointerId)||new Set;this._pointerCaptures.set(f.pointerId,d);h?(d.add(a),1===d.size&&this._browserEvents&&this._browserEvents.setPointerCapture(f,!0)):(d.delete(a),0===d.size&&(this._pointerCaptures.delete(f.pointerId),this._browserEvents&&
this._browserEvents.setPointerCapture(f,!1)))};q.prototype._garbageCollectRemovedHandlers=function(){this._handlers=this._handlers.filter(function(a){return!a.removed});this.updateDependencies()};q.prototype._emitInputEventFromSource=function(a,d,f){this._emitInputEvent(0,a,d,f)};q.prototype._emitInputEvent=function(a,d,f,h,l){h=void 0!==h?h:this._currentPropagation?this._currentPropagation.timestamp:p();d=new x(d,f,h,l||this._activeKeyModifiers);this._currentPropagation?this._currentPropagation.addedEvents.push(d):
this._doNewPropagation(a,d)};q.prototype._doNewPropagation=function(a,d){for(a=this._currentPropagation={events:[d],addedEvents:[],currentHandler:this._handlersPriority[a],needsHandlerGarbageCollect:!1,timestamp:d.timestamp};a.currentHandler;){if(a.currentHandler.removed)a.needsHandlerGarbageCollect=!0;else{d=a.events;var f=[];a.addedEvents=[];for(var h=0;h<d.length;h++){var l=d[h];a.currentHandler.active&&a.currentHandler.eventCallback(l);l.shouldStopPropagation()||f.push(l)}a.events=f.concat(a.addedEvents)}a.currentHandler=
this._handlersPriority[a.currentHandler.priorityIndex+1]}a.needsHandlerGarbageCollect&&this._garbageCollectRemovedHandlers();this._currentPropagation=null};q.prototype._compareHandlerPriority=function(a,d){if(a.handler.hasSideEffects!==d.handler.hasSideEffects)return a.handler.hasSideEffects?1:-1;for(var f=0,h=a.handler.incomingEventMatches;f<h.length;f++)for(var l=h[f],m=function(a){if(l.eventType!==a.eventType)return"continue";var d=l.keyModifiers.filter(function(d){return-1!==a.keyModifiers.indexOf(d)});
if(d.length===l.keyModifiers.length!==(d.length===a.keyModifiers.length))return{value:l.keyModifiers.length>a.keyModifiers.length?-1:1}},p=0,q=d.handler.incomingEventMatches;p<q.length;p++){var r=m(q[p]);if("object"===typeof r)return r.value}return a.priorityIndex>d.priorityIndex?-1:1};q.prototype._sortHandlersPriority=function(a){for(var d=[],f=0;f<a.length;f++){for(var h=a[f],l=0;l<d.length&&0<=this._compareHandlerPriority(h,d[l]);)l++;d.splice(l,0,h)}return d};a([d.property({readOnly:!0})],q.prototype,
"latestPointerType",void 0);return q=a([d.subclass("esri.views.input.InputManager")],q)}(d.declared(h));t.InputManager=A;var x=function(){function a(a,d,f,h){this.type=a;this.data=d;this.timestamp=f;this.modifiers=h;this._stopPropagation=!1}a.prototype.stopPropagation=function(){this._stopPropagation=!0};a.prototype.shouldStopPropagation=function(){return this._stopPropagation};return a}()})},"esri/views/input/keys":function(){define(["require","exports","../../core/sniff"],function(A,t,f){Object.defineProperty(t,
"__esModule",{value:!0});t.primaryKey=f("mac")?"Meta":"Ctrl";var a={8:"Backspace",9:"Tab",13:"Enter",27:"Escape",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete"};for(A=48;58>A;A++)a[A]=String.fromCharCode(A);for(A=1;25>A;A++)a[111+A]="F"+A;for(A=65;91>A;A++)a[A]=[String.fromCharCode(A+32),String.fromCharCode(A)];var d={Left:"ArrowLeft",Right:"ArrowRight",Up:"ArrowUp",Down:"ArrowDown"};t.eventKey=function(f){if(void 0!==
f.key)return d[f.key]||f.key;var h=a[f.keyCode];return Array.isArray(h)?f.shiftKey?h[1]:h[0]:h};t.isSystemModifier=function(a){switch(a){case "Ctrl":case "Alt":case "Shift":case "Meta":case "Primary":return!0}}})},"esri/views/input/recognizers":function(){define("require exports ./recognizers/Drag ./recognizers/PointerClickHoldAndDrag ./recognizers/SingleAndDoubleClick ./recognizers/VerticalTwoFingerDrag".split(" "),function(A,t,f,a,d,h){Object.defineProperty(t,"__esModule",{value:!0});t.defaults=
[a.PointerClickHoldAndDrag,d.SingleAndDoubleClick,f.Drag,h.VerticalTwoFingerDrag]})},"esri/views/input/recognizers/Drag":function(){define("require exports ../../../core/tsSupport/extendsHelper ../InputHandler ./support ../../../core/now".split(" "),function(A,t,f,a,d,h){Object.defineProperty(t,"__esModule",{value:!0});A=function(a){function m(){var d=a.call(this,"recognizers.Drag",!1)||this;d._startStateModifiers=new Set;d._activePointers=[];d._activePointerMap=new Map;d._isDragging=!1;d._drag=d.registerOutgoing("drag");
d.registerIncoming("pointer-drag",d._handlePointerDrag.bind(d));d.registerIncoming("pointer-down",d._handlePointerDown.bind(d));d.registerIncoming("pointer-up",d._handlePointerUpAndPointerLost.bind(d));d.registerIncoming("pointer-capture-lost",d._handlePointerUpAndPointerLost.bind(d));return d}f(m,a);m.prototype._createPayload=function(a,d){return{action:a,pointers:this._activePointers.map(function(a){return a.data}),startState:this._startState,previousState:this._previousState,currentState:d}};m.prototype._fitCircleLSQ=
function(){var a=this._activePointers.map(function(a){return a.data.currentEvent});return d.fitCircleLSQ(a)};m.prototype._createDragState=function(){for(var a=this._fitCircleLSQ(),d=0,f=0,m=this._activePointers;f<m.length;f++){for(var p=m[f],t=this._pointerAngle(p,a),t=t-p.lastAngle;t>Math.PI;)t-=2*Math.PI;for(;t<-Math.PI;)t+=2*Math.PI;t=p.lastAngle+t;p.lastAngle=t;d+=t-p.initialAngle}d/=this._activePointers.length;return{angle:d,radius:a.radius,center:a.center,timestamp:h()}};m.prototype._updateMultiPointer=
function(a){var d=a.startEvent.native.pointerId,f=this._activePointerMap.get(d),h=!f;h?(f={data:null,initialAngle:0,lastAngle:0},this._activePointers.push(f),this._activePointerMap.set(d,f),f.data={startEvent:a.startEvent,previousEvent:a.previousEvent,currentEvent:a.currentEvent},a=this._fitCircleLSQ(),f.initialAngle=this._pointerAngle(f,a),f.lastAngle=f.initialAngle):f.data={startEvent:f.data.startEvent,previousEvent:a.previousEvent,currentEvent:a.currentEvent};h&&this._isDragging&&this._updateInitialAngles();
return f};m.prototype._pointerAngle=function(a,d){a=a.data.currentEvent;return Math.atan2(a.y-d.center.y,a.x-d.center.x)};m.prototype._updateInitialAngles=function(){for(var a=this._createDragState(),d=0,f=this._activePointers;d<f.length;d++){var h=f[d];h.initialAngle=this._pointerAngle(h,a)}};m.prototype._emitStart=function(a){this._updateInitialAngles();var d=this._createDragState();this._previousState=this._startState=d;this._startStateModifiers=a.modifiers;this._isDragging=!0;for(var f=0,h=this._activePointers;f<
h.length;f++){var l=h[f];l.data={previousEvent:l.data.currentEvent,startEvent:l.data.currentEvent,currentEvent:l.data.currentEvent}}this._drag.emit(this._createPayload("start",d),a.timestamp)};m.prototype._emitUpdate=function(a){a=this._createDragState();this._drag.emit(this._createPayload("update",a),void 0,this._startStateModifiers);this._previousState=a};m.prototype._emitEnd=function(){var a=this._createDragState();this._drag.emit(this._createPayload("end",a),void 0,this._startStateModifiers);
this._startState=this._previousState=null;this._isDragging=!1};m.prototype._handlePointerDown=function(a){a=a.data;this._isDragging&&this._emitEnd();this._updateMultiPointer({startEvent:a,previousEvent:a,currentEvent:a})};m.prototype._removeMultiPointer=function(a){var d=a.native.pointerId,f=this._activePointerMap.get(d);f&&(this._isDragging&&(this._updateMultiPointer({startEvent:f.data.startEvent,previousEvent:f.data.currentEvent,currentEvent:a}),this._emitEnd()),this._activePointerMap.delete(d),
a=this._activePointers.indexOf(f),this._activePointers.splice(a,1),this._isDragging&&this._updateInitialAngles())};m.prototype._handlePointerUpAndPointerLost=function(a){this._removeMultiPointer(a.data)};m.prototype._handlePointerDrag=function(a){var d=a.data;switch(d.action){case "start":this._isDragging||this._emitStart(a);break;case "update":this._isDragging||this._emitStart(a),this._updateMultiPointer(d),this._emitUpdate(a)}};return m}(a.InputHandler);t.Drag=A})},"esri/views/input/InputHandler":function(){define(["require",
"exports","./EventMatch","../../core/Logger"],function(A,t,f,a){Object.defineProperty(t,"__esModule",{value:!0});var d=a.getLogger("esri.views.input.InputHandler");A=function(){function a(a,d){this._manager=null;this._incoming={};this._outgoing={};this._outgoingEventTypes=this._incomingEventTypes=this._incomingEventMatches=null;this._name=a;this._hasSideEffects=d}Object.defineProperty(a.prototype,"incomingEventMatches",{get:function(){if(!this._incomingEventMatches){this._incomingEventMatches=[];
for(var a in this._incoming)for(var d=0,f=this._incoming[a];d<f.length;d++)this._incomingEventMatches.push(f[d].match)}return this._incomingEventMatches},enumerable:!0,configurable:!0});Object.defineProperty(a.prototype,"incomingEventTypes",{get:function(){this._incomingEventTypes||(this._incomingEventTypes=this.incomingEventMatches.map(function(a){return a.eventType}));return this._incomingEventTypes},enumerable:!0,configurable:!0});Object.defineProperty(a.prototype,"outgoingEventTypes",{get:function(){this._outgoingEventTypes||
(this._outgoingEventTypes=Object.keys(this._outgoing));return this._outgoingEventTypes},enumerable:!0,configurable:!0});Object.defineProperty(a.prototype,"hasSideEffects",{get:function(){return this._hasSideEffects},enumerable:!0,configurable:!0});a.prototype.onInstall=function(a){var f=this;this._manager?d.error("This InputHandler has already been registered with an InputManager"):(a.setEventCallback(function(a){return f._handleEvent(a)}),a.setUninstallCallback(function(){return f._onUninstall()}),
this._manager=a)};a.prototype.onUninstall=function(){};a.prototype.registerIncoming=function(a,d,m){var l=this;"function"===typeof d?(m=d,d=[]):d=d||[];a="string"===typeof a?new f.EventMatch(a,d):a;var p=function(){l._incomingEventTypes=null;l._incomingEventMatches=null};d=function(a){var d=l._incoming[a.match.eventType];d&&(a=d.indexOf(a),d.splice(a,1),p(),l._manager&&l._manager.updateDependencies())};m=new h(a,m,{onPause:d,onRemove:d,onResume:function(a){var d=l._incoming[a.match.eventType];d&&
-1===d.indexOf(a)&&(d.push(a),p(),l._manager&&l._manager.updateDependencies())}});d=this._incoming[a.eventType];d||(d=[],this._incoming[a.eventType]=d);d.push(m);p();this._manager&&this._manager.updateDependencies();return m};a.prototype.registerOutgoing=function(a){var d=this;if(this._outgoing[a])throw Error("There is already a callback registered for this outgoing InputEvent: "+a);var f=new p(a,{onEmit:function(a,f,h,l){d._manager.emit(a.eventType,f,h,l)},onRemove:function(a){delete d._outgoing[a.eventType];
d._manager.updateDependencies()}});this._outgoing[a]=f;this._outgoingEventTypes=null;this._manager&&this._manager.updateDependencies();return f};a.prototype.startCapturingPointer=function(a){this._manager.setPointerCapture(a,!0)};a.prototype.stopCapturingPointer=function(a){this._manager.setPointerCapture(a,!1)};a.prototype._onUninstall=function(){this._manager?(this.onUninstall(),this._manager=null):d.error("This InputHandler is not registered with an InputManager")};a.prototype._handleEvent=function(a){var d=
this._incoming[a.type];if(d)for(var f=0;f<d.length;f++){var h=d[f];if(h.match.matches(a)&&(h.callback(a),a.shouldStopPropagation()))break}};return a}();t.InputHandler=A;var h=function(){function a(a,d,f){this.match=a;this._callback=d;this._handler=f}a.prototype.pause=function(){this._handler.onPause(this)};a.prototype.resume=function(){this._handler.onResume(this)};a.prototype.remove=function(){this._handler.onRemove(this)};Object.defineProperty(a.prototype,"callback",{get:function(){return this._callback},
enumerable:!0,configurable:!0});return a}(),p=function(){function a(a,d){this.eventType=a;this._removed=!1;this._handler=d}a.prototype.emit=function(a,d,f){if(!this._removed)this._handler.onEmit(this,a,d,f)};a.prototype.remove=function(){this._removed=!0;this._handler.onRemove(this)};return a}()})},"esri/views/input/EventMatch":function(){define(["require","exports"],function(A,t){Object.defineProperty(t,"__esModule",{value:!0});A=function(){function f(a,d){void 0===d&&(d=[]);this.eventType=a;this.keyModifiers=
d}f.prototype.matches=function(a){if(a.type!==this.eventType)return!1;if(0===this.keyModifiers.length)return!0;a=a.modifiers;for(var d=0,f=this.keyModifiers;d<f.length;d++)if(!a.has(f[d]))return!1;return!0};return f}();t.EventMatch=A})},"esri/views/input/recognizers/support":function(){define(["require","exports"],function(A,t){Object.defineProperty(t,"__esModule",{value:!0});t.manhattanDistance=function(f,a){return Math.abs(a.x-f.x)+Math.abs(a.y-f.y)};t.fitCircleLSQ=function(f,a){a?(a.radius=0,a.center.x=
0,a.center.y=0):a={radius:0,center:{x:0,y:0}};if(0===f.length)return a;if(1===f.length)return a.center.x=f[0].x,a.center.y=f[0].y,a;if(2===f.length){var d=f[0];f=f[1];var h=[f.x-d.x,f.y-d.y],p=h[0],h=h[1];a.radius=Math.sqrt(p*p+h*h)/2;a.center.x=(d.x+f.x)/2;a.center.y=(d.y+f.y)/2;return a}for(var m=0,l=0,q=0;q<f.length;q++)m+=f[q].x,l+=f[q].y;for(var m=m/f.length,l=l/f.length,r=f.map(function(a){return a.x-m}),t=f.map(function(a){return a.y-l}),x=d=a=0,y=0,C=p=0,q=h=0;q<r.length;q++){var A=r[q],D=
t[q],F=A*A,H=D*D;a+=F;d+=H;x+=A*D;y+=F*A;p+=H*D;C+=A*H;h+=D*F}q=a;r=x;t=d;y=.5*(y+C);p=.5*(p+h);h=q*t-x*r;C=(y*t-p*r)/h;p=(q*p-x*y)/h;return{radius:Math.sqrt(C*C+p*p+(a+d)/f.length),center:{x:C+m,y:p+l}}}})},"esri/views/input/recognizers/PointerClickHoldAndDrag":function(){define(["require","exports","../../../core/tsSupport/extendsHelper","../InputHandler","./support"],function(A,t,f,a,d){Object.defineProperty(t,"__esModule",{value:!0});t.DefaultParameters={maximumClickDelay:300,movementUntilDrag:1.5,
holdDelay:500};A=function(a){function h(d,f,h){void 0===d&&(d=t.DefaultParameters.maximumClickDelay);void 0===f&&(f=t.DefaultParameters.movementUntilDrag);void 0===h&&(h=t.DefaultParameters.holdDelay);var l=a.call(this,"recognizers.PointerClickHoldAndDrag",!1)||this;l.maximumClickDelay=d;l.movementUntilDrag=f;l.holdDelay=h;l._pointerState=new Map;l._modifiers=new Set;l._pointerDrag=l.registerOutgoing("pointer-drag");l._pointerClick=l.registerOutgoing("pointer-click");l._pointerHold=l.registerOutgoing("hold");
l.registerIncoming("pointer-down",l._handlePointerDown.bind(l));l.registerIncoming("pointer-up",l._handlePointerUpOrLost.bind(l));l.registerIncoming("pointer-capture-lost",l._handlePointerUpOrLost.bind(l));l._moveHandle=l.registerIncoming("pointer-move",l._handlePointerMove.bind(l));l._moveHandle.pause();return l}f(h,a);h.prototype.onUninstall=function(){this._pointerState.forEach(function(a){0!==a.holdTimeout&&(clearTimeout(a.holdTimeout),a.holdTimeout=0)});a.prototype.onUninstall.call(this)};h.prototype._handlePointerDown=
function(a){var d=this,f=a.data,h=f.native.pointerId,m=0;0===this._pointerState.size&&(m=setTimeout(function(){var f=d._pointerState.get(h);f&&(f.isDragging||(d._pointerHold.emit(f.previousEvent,void 0,a.modifiers),f.holdEmitted=!0),f.holdTimeout=0)},this.holdDelay));1===this._pointerState.size&&this._pointerState.forEach(function(a){0!==a.holdTimeout&&(clearTimeout(a.holdTimeout),a.holdTimeout=0)});this._pointerState.set(h,{startEvent:f,previousEvent:f,startTimestamp:a.timestamp,totalMovement:0,
isDragging:!1,downButton:f.native.button,holdTimeout:m});this.startCapturingPointer(f.native);this._moveHandle.resume()};h.prototype._createPointerDragData=function(a,d,f){return{action:a,startEvent:d.startEvent,previousEvent:d.previousEvent,currentEvent:f}};h.prototype._handlePointerMove=function(a){var f=a.data,h=this._pointerState.get(f.native.pointerId);h&&(h.isDragging?this._pointerDrag.emit(this._createPointerDragData("update",h,f),void 0,this._modifiers):(h.totalMovement+=d.manhattanDistance(f,
h.previousEvent),h.totalMovement>this.movementUntilDrag&&(h.isDragging=!0,h.previousEvent=h.startEvent,this._modifiers=a.modifiers,0!==h.holdTimeout&&clearTimeout(h.holdTimeout),this._pointerDrag.emit(this._createPointerDragData("start",h,h.startEvent),h.startTimestamp),this._pointerDrag.emit(this._createPointerDragData("update",h,f)))),h.previousEvent=f)};h.prototype._handlePointerUpOrLost=function(a){var d=a.data,f=d.native.pointerId,h=this._pointerState.get(f);h&&(0!==h.holdTimeout&&clearTimeout(h.holdTimeout),
h.isDragging?this._pointerDrag.emit(this._createPointerDragData("end",h,d),void 0,this._modifiers):h.downButton===d.native.button&&a.timestamp-h.startTimestamp<=this.maximumClickDelay&&!h.holdEmitted&&this._pointerClick.emit(d),this._pointerState.delete(f),this.stopCapturingPointer(d.native),0===this._pointerState.size&&this._moveHandle.pause())};return h}(a.InputHandler);t.PointerClickHoldAndDrag=A})},"esri/views/input/recognizers/SingleAndDoubleClick":function(){define(["require","exports","../../../core/tsSupport/extendsHelper",
"../InputHandler","./support"],function(A,t,f,a,d){Object.defineProperty(t,"__esModule",{value:!0});A=function(a){function h(d,f,h){void 0===d&&(d=250);void 0===f&&(f=10);void 0===h&&(h=35);var l=a.call(this,"recognizers.SingleAndDoubleClick",!1)||this;l.maximumDoubleClickDelay=d;l.maximumDoubleClickDistance=f;l.maximumDoubleTouchDistance=h;l._pointerState=new Map;l._click=l.registerOutgoing("click");l._doubleClick=l.registerOutgoing("double-click");l.registerIncoming("pointer-click",l._handlePointerClick.bind(l));
return l}f(h,a);h.prototype.onUninstall=function(){this._pointerState.forEach(function(a){0!==a.doubleClickTimeout&&(clearTimeout(a.doubleClickTimeout),a.doubleClickTimeout=0)})};h.prototype._pointerId=function(a){a=a.native;return"mouse"===a.pointerType?a.pointerId+":"+a.button:""+a.pointerType};h.prototype._handlePointerClick=function(a){var f=a.data,h=this._pointerId(f),m=this._pointerState.get(h);if(m){clearTimeout(m.doubleClickTimeout);m.doubleClickTimeout=0;var p="touch"===f.native.pointerType?
this.maximumDoubleTouchDistance:this.maximumDoubleClickDistance;d.manhattanDistance(m.event.data,f)>p?(this._doubleClickTimeoutExceeded(h),this._startClick(a)):(this._doubleClick.emit(f,void 0,m.event.modifiers),this._pointerState.delete(h))}else this._startClick(a)};h.prototype._startClick=function(a){var d=this,f=this._pointerId(a.data);this._pointerState.set(f,{event:a,doubleClickTimeout:setTimeout(function(){return d._doubleClickTimeoutExceeded(f)},this.maximumDoubleClickDelay)})};h.prototype._doubleClickTimeoutExceeded=
function(a){var d=this._pointerState.get(a);this._click.emit(d.event.data,void 0,d.event.modifiers);d.doubleClickTimeout=0;this._pointerState.delete(a)};return h}(a.InputHandler);t.SingleAndDoubleClick=A})},"esri/views/input/recognizers/VerticalTwoFingerDrag":function(){define(["require","exports","../../../core/tsSupport/extendsHelper","../InputHandler"],function(A,t,f,a){Object.defineProperty(t,"__esModule",{value:!0});A=function(a){function d(d,f){void 0===d&&(d=20);void 0===f&&(f=40);var h=a.call(this,
"recognizers.VerticalTwoFingerDrag",!1)||this;h._threshold=d;h._maxDelta=f;h._failed=!1;h._active=!1;h._vertical=h.registerOutgoing("vertical-two-finger-drag");h._artificalDragEnd=h.registerOutgoing("drag");h.registerIncoming("drag",h._handleDrag.bind(h));return h}f(d,a);Object.defineProperty(d.prototype,"failed",{get:function(){return this._failed},enumerable:!0,configurable:!0});d.prototype._handleDrag=function(a){if(2===a.data.pointers.length)switch(a.data.action){case "start":this._handleDragStart(a);
break;case "update":this._handleDragUpdate(a);break;case "end":this._handleDragEnd(a)}};d.prototype._handleDragStart=function(a){this._failed=!1;this._dragStartCenter=a.data.currentState.center};d.prototype._handleDragUpdate=function(a){this._failed||(this._active?(this._vertical.emit({delta:a.data.currentState.center.y-this._thresholdReachedCenter.y,action:"update"}),a.stopPropagation()):(this._failed=!this._checkDeltaConstraint(a.data),!this._failed&&this._checkThresholdReached(a.data)&&(this._active=
!0,this._thresholdReachedCenter=a.data.currentState.center,this._artificalDragEnd.emit({action:"end",currentState:a.data.currentState,previousState:a.data.previousState,startState:a.data.startState,pointers:a.data.pointers}),this._vertical.emit({delta:a.data.currentState.center.y-this._thresholdReachedCenter.y,action:"begin"}),a.stopPropagation())))};d.prototype._handleDragEnd=function(a){this._active&&(this._vertical.emit({delta:a.data.currentState.center.y-this._thresholdReachedCenter.y,action:"end"}),
a.stopPropagation());this._active=!1};d.prototype._checkDeltaConstraint=function(a){var d=Math.abs(a.pointers[0].startEvent.x-a.pointers[1].startEvent.x),f=Math.abs(a.pointers[0].startEvent.y-a.pointers[1].startEvent.y),h=Math.abs(a.pointers[0].currentEvent.y-a.pointers[1].currentEvent.y),p=Math.abs(a.pointers[0].currentEvent.x-a.pointers[1].currentEvent.x);return Math.abs(a.currentState.center.x-a.startState.center.x)<this._threshold&&Math.abs(p-d)<=this._maxDelta&&Math.abs(h-f)<=this._maxDelta};
d.prototype._checkThresholdReached=function(a){return Math.min(Math.abs(a.pointers[0].currentEvent.y-a.pointers[0].startEvent.y),Math.abs(a.pointers[1].currentEvent.y-a.pointers[1].startEvent.y),Math.abs(a.currentState.center.y-a.startState.center.y))>=this._threshold};return d}(a.InputHandler);t.VerticalTwoFingerDrag=A})},"esri/views/input/handlers/LatestPointerType":function(){define(["require","exports","../../../core/tsSupport/extendsHelper","../InputHandler"],function(A,t,f,a){Object.defineProperty(t,
"__esModule",{value:!0});A=function(a){function d(d){var f=a.call(this,"LatestPointerInteraction",!0)||this;f._onChange=d;f._value="mouse";f.registerIncoming("pointer-down",function(a){f._setValue("touch"===a.data.native.pointerType?"touch":"mouse")});f._moveHandler=f.registerIncoming("pointer-move",function(a){f._setValue("touch"===a.data.native.pointerType?"touch":"mouse")});f._moveHandler.pause();return f}f(d,a);d.prototype._setValue=function(a){a!==this._value&&("touch"===a?this._moveHandler.resume():
this._moveHandler.pause(),this._value=a,this._onChange(a))};return d}(a.InputHandler);t.LatestPointerType=A})},"esri/views/input/BrowserEventSource":function(){define(["require","exports","./keys","../../core/libs/pep/pep","dojo/sniff"],function(A,t,f,a,d){Object.defineProperty(t,"__esModule",{value:!0});var h=d("trident"),p=d("edge"),m=d("chrome"),l=d("ff"),q=d("safari");A=function(){function d(d){this._active={};this._activePointerCaptures=new Set;this._keyDownState=new Set;this._element=d;a.applyLocal(d);
d.getAttribute("tabindex")||d.setAttribute("tabindex","0");this._eventHandlers={"key-down":this._handleKey,"key-up":this._handleKey,"pointer-down":this._handlePointerDown,"pointer-move":this._handlePointer,"pointer-up":this._handlePointer,"mouse-wheel":this._handleMouseWheel,"pointer-capture-lost":this._handlePointerCaptureLost};this._initialCssTouchAction=d.style.touchAction;d.style.touchAction="none"}d.prototype.destroy=function(){var a=this;this.activeEvents=this._callback=null;this._activePointerCaptures.forEach(function(d){a._element.releasePointerCapture(d)});
this._activePointerCaptures=null;this._element.style.touchAction=this._initialCssTouchAction};Object.defineProperty(d.prototype,"onEventReceived",{set:function(a){this._callback=a},enumerable:!0,configurable:!0});Object.defineProperty(d.prototype,"activeEvents",{set:function(a){var d=this,f;for(f in this._active)a&&a.has(f)||(this._element.removeEventListener(r[f],this._active[f]),delete this._active[f]);a&&a.forEach(function(a){if(!d._active[a]&&r[a]){var f=(d._eventHandlers[a]||d._handleDefault).bind(d,
a);d._element.addEventListener(r[a],f);d._active[a]=f}})},enumerable:!0,configurable:!0});d.prototype.setPointerCapture=function(a,d){d?(this._element.setPointerCapture(a.pointerId),this._activePointerCaptures.add(a.pointerId)):(this._element.releasePointerCapture(a.pointerId),this._activePointerCaptures.delete(a.pointerId))};d.prototype._updateNormalizedPointerLikeEvent=function(a,d){var f=this._element.getBoundingClientRect();d.x=a.clientX-Math.round(f.left);d.y=a.clientY-Math.round(f.top);return d};
d.prototype._handleKey=function(a,d){var h=f.eventKey(d);h&&"key-up"===a&&this._keyDownState.delete(h);d={native:d,key:h,repeat:h&&this._keyDownState.has(h)};h&&"key-down"===a&&this._keyDownState.add(d.key);this._callback(a,d)};d.prototype._handlePointerDown=function(a,d){d=this._updateNormalizedPointerLikeEvent(d,{native:d,x:0,y:0});this._callback(a,d)};d.prototype._handlePointer=function(a,d){var f=this._updateNormalizedPointerLikeEvent(d,{native:d,x:0,y:0});d.preventDefault();this._callback(a,
f)};d.prototype._handleMouseWheel=function(a,d){d.preventDefault();var f=d.deltaY;switch(d.deltaMode){case 0:if(h||p)f=f/document.documentElement.clientHeight*600;break;case 1:f*=30;break;case 2:f*=900}h||p?f*=.7:m||q?f*=.6:l&&(f*=1.375);var r=Math.abs(f);100<r&&(f=f/r*200/(1+Math.exp(-.02*(r-100))));d=this._updateNormalizedPointerLikeEvent(d,{native:d,x:0,y:0,deltaY:f});this._callback(a,d)};d.prototype._handlePointerCaptureLost=function(a,d){this._activePointerCaptures.delete(d.pointerId);this._handleDefault(a,
d)};d.prototype._handleDefault=function(a,d){var f={native:d};d.preventDefault();this._callback(a,f)};return d}();t.BrowserEventSource=A;var r={"key-down":"keydown","key-up":"keyup","pointer-down":"pointerdown","pointer-up":"pointerup","pointer-move":"pointermove","mouse-wheel":"wheel","pointer-capture-got":"gotpointercapture","pointer-capture-lost":"lostpointercapture","context-menu":"contextmenu"}})},"esri/core/libs/pep/pep":function(){define(function(){function A(a,b){b=b||Object.create(null);
var c=document.createEvent("Event");c.initEvent(a,b.bubbles||!1,b.cancelable||!1);a=2;for(var d;a<q.length;a++)d=q[a],c[d]=b[d]||r[a];c.buttons=b.buttons||0;a=0;a=b.pressure?b.pressure:c.buttons?.5:0;c.x=c.clientX;c.y=c.clientY;c.pointerId=b.pointerId||0;c.width=b.width||0;c.height=b.height||0;c.pressure=a;c.tiltX=b.tiltX||0;c.tiltY=b.tiltY||0;c.pointerType=b.pointerType||"";c.hwTimestamp=b.hwTimestamp||0;c.isPrimary=b.isPrimary||!1;return c}function t(){this.array=[];this.size=0}function f(a,b,c,
d){this.addCallback=a.bind(d);this.removeCallback=b.bind(d);this.changedCallback=c.bind(d);J&&(this.observer=new J(this.mutationWatcher.bind(this)))}function a(a){return"body /shadow-deep/ "+d(a)}function d(a){return'[touch-action\x3d"'+a+'"]'}function h(a){return"{ -ms-touch-action: "+a+"; touch-action: "+a+"; touch-action-delay: none; }"}function p(){if(O){S.forEach(function(b){String(b)===b?(N+=d(b)+h(b)+"\n",T&&(N+=a(b)+h(b)+"\n")):(N+=b.selectors.map(d)+h(b.rule)+"\n",T&&(N+=b.selectors.map(a)+
h(b.rule)+"\n"))});var b=document.createElement("style");b.textContent=N;document.head.appendChild(b)}}function m(a){if(!D.pointermap.has(a))throw a=Error("InvalidPointerId"),a.name="InvalidPointerId",a;}function l(a){if(!a.ownerDocument.contains(a))throw a=Error("InvalidStateError"),a.name="InvalidStateError",a;}var q="bubbles cancelable view detail screenX screenY clientX clientY ctrlKey altKey shiftKey metaKey button relatedTarget pageX pageY".split(" "),r=[!1,!1,null,null,0,0,0,0,!1,!1,!1,!1,
0,null,0,0],v=window.Map&&window.Map.prototype.forEach?Map:t;t.prototype={set:function(a,b){if(void 0===b)return this.delete(a);this.has(a)||this.size++;this.array[a]=b},has:function(a){return void 0!==this.array[a]},delete:function(a){this.has(a)&&(delete this.array[a],this.size--)},get:function(a){return this.array[a]},clear:function(){this.size=this.array.length=0},forEach:function(a,b){return this.array.forEach(function(c,d){a.call(b,c,d,this)},this)}};var x="bubbles cancelable view detail screenX screenY clientX clientY ctrlKey altKey shiftKey metaKey button relatedTarget buttons pointerId width height pressure tiltX tiltY pointerType hwTimestamp isPrimary type target currentTarget which pageX pageY timeStamp".split(" "),
y=[!1,!1,null,null,0,0,0,0,!1,!1,!1,!1,0,null,0,0,0,0,0,0,0,"",0,!1,"",null,null,0,0,0,0],C={pointerover:1,pointerout:1,pointerenter:1,pointerleave:1},E="undefined"!==typeof SVGElementInstance,D={pointermap:new v,eventMap:Object.create(null),captureInfo:Object.create(null),eventSources:Object.create(null),eventSourceList:[],registerSource:function(a,b){var c=b.events;c&&(c.forEach(function(a){b[a]&&(this.eventMap[a]=b[a].bind(b))},this),this.eventSources[a]=b,this.eventSourceList.push(b))},register:function(a){for(var b=
this.eventSourceList.length,c=0,d;c<b&&(d=this.eventSourceList[c]);c++)d.register.call(d,a)},unregister:function(a){for(var b=this.eventSourceList.length,c=0,d;c<b&&(d=this.eventSourceList[c]);c++)d.unregister.call(d,a)},contains:function(a,b){try{return a.contains(b)}catch(Z){return!1}},down:function(a){a.bubbles=!0;this.fireEvent("pointerdown",a)},move:function(a){a.bubbles=!0;this.fireEvent("pointermove",a)},up:function(a){a.bubbles=!0;this.fireEvent("pointerup",a)},enter:function(a){a.bubbles=
!1;this.fireEvent("pointerenter",a)},leave:function(a){a.bubbles=!1;this.fireEvent("pointerleave",a)},over:function(a){a.bubbles=!0;this.fireEvent("pointerover",a)},out:function(a){a.bubbles=!0;this.fireEvent("pointerout",a)},cancel:function(a){a.bubbles=!0;this.fireEvent("pointercancel",a)},leaveOut:function(a){this.out(a);this.propagate(a,this.leave,!1)},enterOver:function(a){this.over(a);this.propagate(a,this.enter,!0)},eventHandler:function(a){if(!a._handledByPE){var b=a.type;(b=this.eventMap&&
this.eventMap[b])&&b(a);a._handledByPE=!0}},listen:function(a,b){b.forEach(function(b){this.addEvent(a,b)},this)},unlisten:function(a,b){b.forEach(function(b){this.removeEvent(a,b)},this)},addEvent:function(a,b){a.addEventListener(b,this.boundHandler)},removeEvent:function(a,b){a.removeEventListener(b,this.boundHandler)},makeEvent:function(a,b){this.captureInfo[b.pointerId]&&(b.relatedTarget=null);a=new A(a,b);b.preventDefault&&(a.preventDefault=b.preventDefault);a._target=a._target||b.target;return a},
fireEvent:function(a,b){a=this.makeEvent(a,b);return this.dispatchEvent(a)},cloneEvent:function(a){for(var b=Object.create(null),c,d=0;d<x.length;d++)c=x[d],b[c]=a[c]||y[d],E&&("target"===c||"relatedTarget"===c)&&b[c]instanceof SVGElementInstance&&(b[c]=b[c].correspondingUseElement);a.preventDefault&&(b.preventDefault=function(){a.preventDefault()});return b},getTarget:function(a){var b=this.captureInfo[a.pointerId];if(!b)return a._target;if(a._target===b||!(a.type in C))return b},propagate:function(a,
b,c){for(var d=a.target,e=[];!d.contains(a.relatedTarget)&&d!==document;)e.push(d),d=d.parentNode;c&&e.reverse();e.forEach(function(c){a.target=c;b.call(this,a)},this)},setCapture:function(a,b){this.captureInfo[a]&&this.releaseCapture(a);this.captureInfo[a]=b;var c=new A("gotpointercapture");c.pointerId=a;this.implicitRelease=this.releaseCapture.bind(this,a);document.addEventListener("pointerup",this.implicitRelease);document.addEventListener("pointercancel",this.implicitRelease);c._target=b;this.asyncDispatchEvent(c)},
releaseCapture:function(a){var b=this.captureInfo[a];if(b){var c=new A("lostpointercapture");c.pointerId=a;this.captureInfo[a]=void 0;document.removeEventListener("pointerup",this.implicitRelease);document.removeEventListener("pointercancel",this.implicitRelease);c._target=b;this.asyncDispatchEvent(c)}},dispatchEvent:function(a){var b=this.getTarget(a);if(b)return b.dispatchEvent(a)},asyncDispatchEvent:function(a){requestAnimationFrame(this.dispatchEvent.bind(this,a))}};D.boundHandler=D.eventHandler.bind(D);
var F={shadow:function(a){if(a)return a.shadowRoot||a.webkitShadowRoot},canTarget:function(a){return a&&!!a.elementFromPoint},targetingShadow:function(a){a=this.shadow(a);if(this.canTarget(a))return a},olderShadow:function(a){var b=a.olderShadowRoot;!b&&(a=a.querySelector("shadow"))&&(b=a.olderShadowRoot);return b},allShadows:function(a){var b=[];for(a=this.shadow(a);a;)b.push(a),a=this.olderShadow(a);return b},searchRoot:function(a,b,c){if(a){var d=a.elementFromPoint(b,c),e;for(e=this.targetingShadow(d);e;){if(a=
e.elementFromPoint(b,c))return d=this.targetingShadow(a),this.searchRoot(d,b,c)||a;e=this.olderShadow(e)}return d}},owner:function(a){for(;a.parentNode;)a=a.parentNode;a.nodeType!==Node.DOCUMENT_NODE&&a.nodeType!==Node.DOCUMENT_FRAGMENT_NODE&&(a=document);return a},findTarget:function(a){var b=a.clientX,c=a.clientY;a=this.owner(a.target);a.elementFromPoint(b,c)||(a=document);return this.searchRoot(a,b,c)}},H=Array.prototype.forEach.call.bind(Array.prototype.forEach),K=Array.prototype.map.call.bind(Array.prototype.map),
w=Array.prototype.slice.call.bind(Array.prototype.slice),L=Array.prototype.filter.call.bind(Array.prototype.filter),J=window.MutationObserver||window.WebKitMutationObserver,M={subtree:!0,childList:!0,attributes:!0,attributeOldValue:!0,attributeFilter:["touch-action"]};f.prototype={watchSubtree:function(a){this.observer&&F.canTarget(a)&&this.observer.observe(a,M)},enableOnSubtree:function(a){this.watchSubtree(a);a===document&&"complete"!==document.readyState?this.installOnLoad():this.installNewSubtree(a)},
installNewSubtree:function(a){H(this.findElements(a),this.addElement,this)},findElements:function(a){return a.querySelectorAll?a.querySelectorAll("[touch-action]"):[]},removeElement:function(a){this.removeCallback(a)},addElement:function(a){this.addCallback(a)},elementChanged:function(a,b){this.changedCallback(a,b)},concatLists:function(a,b){return a.concat(w(b))},installOnLoad:function(){document.addEventListener("readystatechange",function(){"complete"===document.readyState&&this.installNewSubtree(document)}.bind(this))},
isElement:function(a){return a.nodeType===Node.ELEMENT_NODE},flattenMutationTree:function(a){var b=K(a,this.findElements,this);b.push(L(a,this.isElement));return b.reduce(this.concatLists,[])},mutationWatcher:function(a){a.forEach(this.mutationHandler,this)},mutationHandler:function(a){"childList"===a.type?(this.flattenMutationTree(a.addedNodes).forEach(this.addElement,this),this.flattenMutationTree(a.removedNodes).forEach(this.removeElement,this)):"attributes"===a.type&&this.elementChanged(a.target,
a.oldValue)}};var S=["none","auto","pan-x","pan-y",{rule:"pan-x pan-y",selectors:["pan-x pan-y","pan-y pan-x"]}],N="",O=window.PointerEvent||window.MSPointerEvent,T=!window.ShadowDOMPolyfill&&document.head.createShadowRoot,R=D.pointermap,W=[1,4,2,8,16],U=!1;try{U=1===(new MouseEvent("test",{buttons:1})).buttons}catch(G){}var P={POINTER_ID:1,POINTER_TYPE:"mouse",events:["mousedown","mousemove","mouseup","mouseover","mouseout"],register:function(a){D.listen(a,this.events)},unregister:function(a){D.unlisten(a,
this.events)},lastTouches:[],isEventSimulatedFromTouch:function(a){var b=this.lastTouches,c=a.clientX;a=a.clientY;for(var d=0,e=b.length,f;d<e&&(f=b[d]);d++){var g=Math.abs(a-f.y);if(25>=Math.abs(c-f.x)&&25>=g)return!0}},prepareEvent:function(a){var b=D.cloneEvent(a),c=b.preventDefault;b.preventDefault=function(){a.preventDefault();c()};b.pointerId=this.POINTER_ID;b.isPrimary=!0;b.pointerType=this.POINTER_TYPE;return b},prepareButtonsForMove:function(a,b){var c=R.get(this.POINTER_ID);a.buttons=0!==
b.which&&c?c.buttons:0;b.buttons=a.buttons},mousedown:function(a){if(!this.isEventSimulatedFromTouch(a)){var b=R.get(this.POINTER_ID),c=this.prepareEvent(a);U||(c.buttons=W[c.button],b&&(c.buttons|=b.buttons),a.buttons=c.buttons);R.set(this.POINTER_ID,a);b&&0!==b.buttons?D.move(c):D.down(c)}},mousemove:function(a){if(!this.isEventSimulatedFromTouch(a)){var b=this.prepareEvent(a);U||this.prepareButtonsForMove(b,a);b.button=-1;R.set(this.POINTER_ID,a);D.move(b)}},mouseup:function(a){if(!this.isEventSimulatedFromTouch(a)){var b=
R.get(this.POINTER_ID),c=this.prepareEvent(a);if(!U){var d=W[c.button];c.buttons=b?b.buttons&~d:0;a.buttons=c.buttons}R.set(this.POINTER_ID,a);c.buttons&=~W[c.button];0===c.buttons?D.up(c):D.move(c)}},mouseover:function(a){if(!this.isEventSimulatedFromTouch(a)){var b=this.prepareEvent(a);U||this.prepareButtonsForMove(b,a);b.button=-1;R.set(this.POINTER_ID,a);D.enterOver(b)}},mouseout:function(a){if(!this.isEventSimulatedFromTouch(a)){var b=this.prepareEvent(a);U||this.prepareButtonsForMove(b,a);b.button=
-1;D.leaveOut(b)}},cancel:function(a){a=this.prepareEvent(a);D.cancel(a);this.deactivateMouse()},deactivateMouse:function(){R.delete(this.POINTER_ID)}},Y=D.captureInfo,g=F.findTarget.bind(F),Q=F.allShadows.bind(F),z=D.pointermap,c,b={events:["touchstart","touchmove","touchend","touchcancel"],register:function(a){c.enableOnSubtree(a)},unregister:function(a){},elementAdded:function(a){var b=a.getAttribute("touch-action"),c=this.touchActionToScrollType(b);c&&(a._scrollType=c,D.listen(a,this.events),
Q(a).forEach(function(a){a._scrollType=c;D.listen(a,this.events)},this))},elementRemoved:function(a){a._scrollType=void 0;D.unlisten(a,this.events);Q(a).forEach(function(a){a._scrollType=void 0;D.unlisten(a,this.events)},this)},elementChanged:function(a,b){var c=a.getAttribute("touch-action"),d=this.touchActionToScrollType(c);b=this.touchActionToScrollType(b);d&&b?(a._scrollType=d,Q(a).forEach(function(a){a._scrollType=d},this)):b?this.elementRemoved(a):d&&this.elementAdded(a)},scrollTypes:{EMITTER:"none",
XSCROLLER:"pan-x",YSCROLLER:"pan-y",SCROLLER:/^(?:pan-x pan-y)|(?:pan-y pan-x)|auto$/},touchActionToScrollType:function(a){var b=this.scrollTypes;if("none"===a)return"none";if(a===b.XSCROLLER)return"X";if(a===b.YSCROLLER)return"Y";if(b.SCROLLER.exec(a))return"XY"},POINTER_TYPE:"touch",firstTouch:null,isPrimaryTouch:function(a){return this.firstTouch===a.identifier},setPrimaryTouch:function(a){if(0===z.size||1===z.size&&z.has(1))this.firstTouch=a.identifier,this.firstXY={X:a.clientX,Y:a.clientY},this.scrolling=
!1,this.cancelResetClickCount()},removePrimaryPointer:function(a){a.isPrimary&&(this.firstXY=this.firstTouch=null,this.resetClickCount())},clickCount:0,resetId:null,resetClickCount:function(){var a=function(){this.clickCount=0;this.resetId=null}.bind(this);this.resetId=setTimeout(a,200)},cancelResetClickCount:function(){this.resetId&&clearTimeout(this.resetId)},typeToButtons:function(a){var b=0;if("touchstart"===a||"touchmove"===a)b=1;return b},touchToPointer:function(a){var b=this.currentTouchEvent,
c=D.cloneEvent(a),d=c.pointerId=a.identifier+2;c.target=Y[d]||g(c);c.bubbles=!0;c.cancelable=!0;c.detail=this.clickCount;c.button=0;c.buttons=this.typeToButtons(b.type);c.width=a.radiusX||a.webkitRadiusX||0;c.height=a.radiusY||a.webkitRadiusY||0;c.pressure=a.force||a.webkitForce||.5;c.isPrimary=this.isPrimaryTouch(a);c.pointerType=this.POINTER_TYPE;c.altKey=b.altKey;c.ctrlKey=b.ctrlKey;c.metaKey=b.metaKey;c.shiftKey=b.shiftKey;var e=this;c.preventDefault=function(){e.scrolling=!1;e.firstXY=null;b.preventDefault()};
return c},processTouches:function(a,b){var c=a.changedTouches;this.currentTouchEvent=a;a=0;for(var d;a<c.length;a++)d=c[a],b.call(this,this.touchToPointer(d))},shouldScroll:function(a){if(this.firstXY){var b;b=a.currentTarget._scrollType;if("none"===b)b=!1;else if("XY"===b)b=!0;else{a=a.changedTouches[0];var c="Y"===b?"X":"Y";b=Math.abs(a["client"+b]-this.firstXY[b])>=Math.abs(a["client"+c]-this.firstXY[c])}this.firstXY=null;return b}},findTouch:function(a,b){for(var c=0,d=a.length,e;c<d&&(e=a[c]);c++)if(e.identifier===
b)return!0},vacuumTouches:function(a){var b=a.touches;if(z.size>=b.length){var c=[];z.forEach(function(a,d){1===d||this.findTouch(b,d-2)||c.push(a.out)},this);c.forEach(this.cancelOut,this)}},touchstart:function(a){this.vacuumTouches(a);this.setPrimaryTouch(a.changedTouches[0]);this.dedupSynthMouse(a);this.scrolling||(this.clickCount++,this.processTouches(a,this.overDown))},overDown:function(a){z.set(a.pointerId,{target:a.target,out:a,outTarget:a.target});D.enterOver(a);D.down(a)},touchmove:function(a){this.scrolling||
(this.shouldScroll(a)?(this.scrolling=!0,this.touchcancel(a)):(a.preventDefault(),this.processTouches(a,this.moveOverOut)))},moveOverOut:function(a){var b=z.get(a.pointerId);if(b){var c=b.out,d=b.outTarget;D.move(a);c&&d!==a.target&&(c.relatedTarget=a.target,a.relatedTarget=d,c.target=d,a.target?(D.leaveOut(c),D.enterOver(a)):(a.target=d,a.relatedTarget=null,this.cancelOut(a)));b.out=a;b.outTarget=a.target}},touchend:function(a){this.dedupSynthMouse(a);this.processTouches(a,this.upOut)},upOut:function(a){this.scrolling||
(D.up(a),D.leaveOut(a));this.cleanUpPointer(a)},touchcancel:function(a){this.processTouches(a,this.cancelOut)},cancelOut:function(a){D.cancel(a);D.leaveOut(a);this.cleanUpPointer(a)},cleanUpPointer:function(a){z.delete(a.pointerId);this.removePrimaryPointer(a)},dedupSynthMouse:function(a){var b=P.lastTouches;a=a.changedTouches[0];this.isPrimaryTouch(a)&&(a={x:a.clientX,y:a.clientY},b.push(a),b=function(a,b){b=a.indexOf(b);-1<b&&a.splice(b,1)}.bind(null,b,a),setTimeout(b,2500))}};c=new f(b.elementAdded,
b.elementRemoved,b.elementChanged,b);var e=D.pointermap,k=window.MSPointerEvent&&"number"===typeof window.MSPointerEvent.MSPOINTER_TYPE_MOUSE,n={events:"MSPointerDown MSPointerMove MSPointerUp MSPointerOut MSPointerOver MSPointerCancel MSGotPointerCapture MSLostPointerCapture".split(" "),register:function(a){D.listen(a,this.events)},unregister:function(a){D.unlisten(a,this.events)},POINTER_TYPES:["","unavailable","touch","pen","mouse"],prepareEvent:function(a){var b=a;k&&(b=D.cloneEvent(a),b.pointerType=
this.POINTER_TYPES[a.pointerType]);return b},cleanup:function(a){e.delete(a)},MSPointerDown:function(a){e.set(a.pointerId,a);a=this.prepareEvent(a);D.down(a)},MSPointerMove:function(a){a=this.prepareEvent(a);D.move(a)},MSPointerUp:function(a){var b=this.prepareEvent(a);D.up(b);this.cleanup(a.pointerId)},MSPointerOut:function(a){a=this.prepareEvent(a);D.leaveOut(a)},MSPointerOver:function(a){a=this.prepareEvent(a);D.enterOver(a)},MSPointerCancel:function(a){var b=this.prepareEvent(a);D.cancel(b);this.cleanup(a.pointerId)},
MSLostPointerCapture:function(a){a=D.makeEvent("lostpointercapture",a);D.dispatchEvent(a)},MSGotPointerCapture:function(a){a=D.makeEvent("gotpointercapture",a);D.dispatchEvent(a)}},u,B;window.navigator.msPointerEnabled?(u=function(a){m(a);l(this);0!==D.pointermap.get(a).buttons&&this.msSetPointerCapture(a)},B=function(a){m(a);this.msReleasePointerCapture(a)}):(u=function(a){m(a);l(this);0!==D.pointermap.get(a).buttons&&D.setCapture(a,this)},B=function(a){m(a);D.releaseCapture(a,this)});var I=window.PointerEvent||
window.MSPointerEvent;return{dispatcher:D,Installer:f,PointerEvent:A,PointerMap:v,targetFinding:F,applyGlobal:function(){p();window.PointerEvent||(window.PointerEvent=A,window.navigator.msPointerEnabled?(Object.defineProperty(window.navigator,"maxTouchPoints",{value:window.navigator.msMaxTouchPoints,enumerable:!0}),D.registerSource("ms",n)):(D.registerSource("mouse",P),void 0!==window.ontouchstart&&D.registerSource("touch",b)),D.register(document));window.Element&&!Element.prototype.setPointerCapture&&
Object.defineProperties(Element.prototype,{setPointerCapture:{value:u},releasePointerCapture:{value:B}})},applyLocal:function(a){I||(window.PointerEvent||(window.navigator.msPointerEnabled?D.registerSource("ms",n):(D.registerSource("mouse",P),void 0!==window.ontouchstart&&D.registerSource("touch",b)),D.register(document)),window.Element&&!Element.prototype.setPointerCapture&&(a.setPointerCapture=u.bind(a),a.releasePointerCapture=B.bind(a)),a.getAttribute("touch-action")||a.setAttribute("touch-action",
"none"))}}})},"esri/views/input/ViewEvents":function(){define(["require","exports","../../core/tsSupport/extendsHelper","./InputHandler","../../geometry/ScreenPoint"],function(A,t,f,a,d){function h(a){return!!m[a]}function p(a){for(var d=0;d<a.length;d++)if(!h(a[d]))return!1;return!0}Object.defineProperty(t,"__esModule",{value:!0});var m={click:!0,"double-click":!0,hold:!0,drag:!0,"key-down":!0,"key-up":!0,"pointer-down":!0,"pointer-move":!0,"pointer-up":!0,"mouse-wheel":!0},l;(function(a){a[a.Left=
0]="Left";a[a.Middle=1]="Middle";a[a.Right=2]="Right"})(l||(l={}));A=function(){function a(a){this.handlers=new Map;this.counter=0;this.view=a;this.inputManager=null}a.prototype.connect=function(a){var d=this;a&&this.disconnect();this.inputManager=a;this.handlers.forEach(function(a,f){return d.inputManager.installHandlers(f,[a])})};a.prototype.disconnect=function(){var a=this;this.inputManager&&this.handlers.forEach(function(d,f){return a.inputManager.uninstallHandlers(f)});this.inputManager=null};
a.prototype.destroy=function(){this.disconnect();this.handlers.clear();this.view=null};a.prototype.register=function(a,d,f){var l=this;a=Array.isArray(a)?a:a.split(",");if(!p(a))return a.some(h)&&console.error("Error: registering input events and other events on the view at the same time is not supported."),null;var m=Array.isArray(d)?d:[];f=Array.isArray(d)?f:d;var r=this.createUniqueGroupName();d=new q(this.view,a,m,f);this.handlers.set(r,d);this.inputManager&&this.inputManager.installHandlers(r,
[d]);return{remove:function(){return l.removeHandler(r)}}};a.prototype.removeHandler=function(a){this.handlers.has(a)&&this.handlers.delete(a);this.inputManager&&this.inputManager.uninstallHandlers(a)};a.prototype.createUniqueGroupName=function(){this.counter+=1;return"viewEvents_"+this.counter};return a}();t.ViewEvents=A;var q=function(a){function h(d,f,h,l){var m=a.call(this,"esri.views.input.ViewEventHandler",!0)||this;m.view=d;for(d=0;d<f.length;d++)switch(f[d]){case "click":m.registerIncoming("click",
h,function(a){return l(m.wrapClick(a))});break;case "double-click":m.registerIncoming("double-click",h,function(a){return l(m.wrapDoubleClick(a))});break;case "hold":m.registerIncoming("hold",h,function(a){return l(m.wrapHold(a))});break;case "drag":m.registerIncoming("drag",h,function(a){return l(m.wrapDrag(a))});break;case "key-down":m.registerIncoming("key-down",h,function(a){return l(m.wrapKeyDown(a))});break;case "key-up":m.registerIncoming("key-up",h,function(a){return l(m.wrapKeyUp(a))});break;
case "pointer-down":m.registerIncoming("pointer-down",h,function(a){return l(m.wrapPointer(a,"pointer-down"))});break;case "pointer-move":m.registerIncoming("pointer-move",h,function(a){return l(m.wrapPointer(a,"pointer-move"))});break;case "pointer-up":m.registerIncoming("pointer-up",h,function(a){return l(m.wrapPointer(a,"pointer-up"))});break;case "mouse-wheel":m.registerIncoming("mouse-wheel",h,function(a){return l(m.wrapMouseWheel(a))})}return m}f(h,a);h.prototype.wrapClick=function(a){var f=
a.data.x,h=a.data.y;return{type:"click",button:"touch"===a.data.native.pointerType?0:a.data.native.button,x:f,y:h,native:a.data.native,timestamp:a.timestamp,screenPoint:new d(f,h),mapPoint:this.view.toMap(f,h),stopPropagation:function(){return a.stopPropagation()}}};h.prototype.wrapDoubleClick=function(a){var d=a.data.x,f=a.data.y;return{type:"double-click",button:"touch"===a.data.native.pointerType?0:a.data.native.button,x:d,y:f,native:a.data.native,timestamp:a.timestamp,mapPoint:this.view.toMap(d,
f),stopPropagation:function(){return a.stopPropagation()}}};h.prototype.wrapHold=function(a){var d=a.data.x,f=a.data.y;return{type:"hold",button:"touch"===a.data.native.pointerType?0:a.data.native.button,x:d,y:f,native:a.data.native,timestamp:a.timestamp,mapPoint:this.view.toMap(d,f),stopPropagation:function(){return a.stopPropagation()}}};h.prototype.wrapDrag=function(a){return{type:"drag",action:a.data.action,x:a.data.currentState.center.x,y:a.data.currentState.center.y,origin:{x:a.data.startState.center.x,
y:a.data.startState.center.y},native:a.data.pointers[0].currentEvent.native,timestamp:a.timestamp,stopPropagation:function(){return a.stopPropagation()}}};h.prototype.wrapKeyDown=function(a){return{type:"key-down",key:a.data.key,repeat:a.data.repeat,native:a.data.native,timestamp:a.timestamp,stopPropagation:function(){return a.stopPropagation()}}};h.prototype.wrapKeyUp=function(a){return{type:"key-up",key:a.data.key,native:a.data.native,timestamp:a.timestamp,stopPropagation:function(){return a.stopPropagation()}}};
h.prototype.wrapPointer=function(a,d){return{type:d,x:a.data.x,y:a.data.y,pointerId:a.data.native.pointerId,pointerType:a.data.native.pointerType,native:a.data.native,timestamp:a.timestamp,stopPropagation:function(){return a.stopPropagation()}}};h.prototype.wrapMouseWheel=function(a){return{type:"mouse-wheel",x:a.data.x,y:a.data.y,deltaY:a.data.deltaY,native:a.data.native,timestamp:a.timestamp,stopPropagation:function(){return a.stopPropagation()}}};return h}(a.InputHandler)})},"esri/views/input/handlers/PreventContextMenu":function(){define(["require",
"exports","../../../core/tsSupport/extendsHelper","../InputHandler"],function(A,t,f,a){Object.defineProperty(t,"__esModule",{value:!0});A=function(a){function d(){var d=a.call(this,"PreventContextMenu",!0)||this;d.registerIncoming("context-menu",function(a){a.data.native.preventDefault()});return d}f(d,a);return d}(a.InputHandler);t.PreventContextMenu=A;t.default=A})},"esri/views/2d/input/handlers/DoubleClickZoom":function(){define(["require","exports","../../../../core/tsSupport/extendsHelper","../../../input/InputHandler",
"../../../input/handlers/support"],function(A,t,f,a,d){Object.defineProperty(t,"__esModule",{value:!0});A=function(a){function h(d,f){var h=a.call(this,"esri.views.2d.input.handlers.DoubleClickZoom",!0)||this;h.view=d;h.registerIncoming("double-click",f,function(a){return h._handleDoubleClick(a,f)});return h}f(h,a);h.prototype._handleDoubleClick=function(a,f){d.eventMatchesPointerType(a.data.native,"primary")&&(a.stopPropagation(),f?this.view.navigation.zoomOut([a.data.x,a.data.y]):this.view.navigation.zoomIn([a.data.x,
a.data.y]))};return h}(a.InputHandler);t.DoubleClickZoom=A})},"esri/views/input/handlers/support":function(){define(["require","exports"],function(A,t){Object.defineProperty(t,"__esModule",{value:!0});t.eventMatchesPointerType=function(f,a){switch(a){case "primary":return"touch"===f.pointerType||0===f.button;case "secondary":return"touch"!==f.pointerType&&2===f.button;case "tertiary":return"touch"!==f.pointerType&&1===f.button}}})},"esri/views/2d/input/handlers/DragPan":function(){define(["require",
"exports","../../../../core/tsSupport/extendsHelper","../../../input/InputHandler","../../../input/handlers/support"],function(A,t,f,a,d){Object.defineProperty(t,"__esModule",{value:!0});A=function(a){function h(d,f,h){var l=a.call(this,"esri.views.2d.input.handlers.DragPan - "+f,!0)||this;l.view=d;l.pointerType=f;l.registerIncoming("drag",h,function(a){return l._handleDrag(a)});l.registerIncoming("pointer-down",function(a){return l.stopMomentumNavigation()});return l}f(h,a);h.prototype._handleDrag=
function(a){var f=a.data,h=this.view.navigation;if(1<f.pointers.length||h.pinch.zoomMomentum||h.pinch.rotateMomentum)this.stopMomentumNavigation();else if(d.eventMatchesPointerType(f.pointers[0].startEvent.native,this.pointerType)){h=h.pan;switch(f.action){case "start":h.begin(this.view,f);break;case "update":h.update(this.view,f);break;case "end":h.end(this.view,f)}a.stopPropagation()}};h.prototype.stopMomentumNavigation=function(){this.view.navigation.pan.stopMomentumNavigation()};return h}(a.InputHandler);
t.DragPan=A})},"esri/views/2d/input/handlers/DragRotate":function(){define(["require","exports","../../../../core/tsSupport/extendsHelper","../../../input/InputHandler","../../../input/handlers/support"],function(A,t,f,a,d){Object.defineProperty(t,"__esModule",{value:!0});A=function(a){function h(d,f,h){var l=a.call(this,"esri.views.2d.input.handlers.DragRotate - "+f,!0)||this;l.view=d;l.pointerType=f;l.registerIncoming("drag",h,function(a){return l._handleDrag(a)});return l}f(h,a);h.prototype._handleDrag=
function(a){var f=a.data;if(!(1<f.pointers.length)&&d.eventMatchesPointerType(f.pointers[0].startEvent.native,this.pointerType)){var h=this.view.navigation.rotate;switch(f.action){case "start":h.begin(this.view,f);break;case "update":h.update(this.view,f);break;case "end":h.end(this.view,f)}a.stopPropagation()}};return h}(a.InputHandler);t.DragRotate=A})},"esri/views/2d/input/handlers/KeyPan":function(){define(["require","exports","../../../../core/tsSupport/extendsHelper","../../../input/InputHandler"],
function(A,t,f,a){Object.defineProperty(t,"__esModule",{value:!0});A=function(a){function d(d,f,h){var l=a.call(this,"esri.views.2d.input.handlers.KeyPan",!0)||this;l.view=d;l.keys=f;l._keyMap=(m={},m[f.left]="left",m[f.right]="right",m[f.up]="up",m[f.down]="down",m);l.registerIncoming("key-down",h,function(a){return l._handleKeyDown(a)});l.registerIncoming("key-up",h,function(a){return l._handleKeyUp(a)});return l;var m}f(d,a);d.prototype._handleKeyDown=function(a){a.data.repeat||this._handleKey(a,
!0)};d.prototype._handleKeyUp=function(a){this._handleKey(a,!1)};d.prototype._handleKey=function(a,d){var f=this._keyMap[a.data.key];if(null!=f){if(d)switch(f){case "left":this.view.navigation.continousPanLeft();break;case "right":this.view.navigation.continousPanRight();break;case "up":this.view.navigation.continousPanUp();break;case "down":this.view.navigation.continousPanDown()}else this.view.navigation.stop();a.stopPropagation()}};return d}(a.InputHandler);t.KeyPan=A})},"esri/views/2d/input/handlers/KeyZoom":function(){define(["require",
"exports","../../../../core/tsSupport/extendsHelper","../../../input/InputHandler"],function(A,t,f,a){Object.defineProperty(t,"__esModule",{value:!0});var d;(function(a){a[a.IN=0]="IN";a[a.OUT=1]="OUT"})(d||(d={}));A=function(a){function h(f,h,p){var l=a.call(this,"esri.views.2d.input.handlers.KeyZoom",!0)||this;l.view=f;l.keys=h;l._keysToZoomAction={};l.registerIncoming("key-down",p,function(a){return l._handleKeyDown(a)});h.zoomIn.forEach(function(a){return l._keysToZoomAction[a]=d.IN});h.zoomOut.forEach(function(a){return l._keysToZoomAction[a]=
d.OUT});return l}f(h,a);h.prototype._handleKeyDown=function(a){this._handleKey(a)};h.prototype._handleKey=function(a){var f=a.modifiers;0<f.size&&!f.has("Shift")||(f=this._keysToZoomAction[a.data.key],f===d.IN?(this.view.navigation.zoomIn(),a.stopPropagation()):f===d.OUT&&(this.view.navigation.zoomOut(),a.stopPropagation()))};return h}(a.InputHandler);t.KeyZoom=A})},"esri/views/2d/input/handlers/KeyRotate":function(){define(["require","exports","../../../../core/tsSupport/extendsHelper","../../../input/InputHandler"],
function(A,t,f,a){Object.defineProperty(t,"__esModule",{value:!0});A=function(a){function d(d,f,h){var l=a.call(this,"esri.views.2d.input.handlers.KeyRotate",!0)||this;l.view=d;l.keys=f;l._keyToDirection=(m={},m[f.clockwiseOption1]="clockwise",m[f.clockwiseOption2]="clockwise",m[f.counterClockwiseOption1]="counterClockwise",m[f.counterClockwiseOption2]="counterClockwise",m[f.resetOption1]="reset",m[f.resetOption2]="reset",m);l.registerIncoming("key-down",h,function(a){return l._handleKeyDown(a)});
l.registerIncoming("key-up",h,function(a){return l._handleKeyUp(a)});return l;var m}f(d,a);d.prototype._handleKeyDown=function(a){a.data.repeat||this._handleKey(a,!0)};d.prototype._handleKeyUp=function(a){this._handleKey(a,!1)};d.prototype._handleKey=function(a,d){var f=a.modifiers;0<f.size&&!f.has("Shift")||!this.view.constraints.rotationEnabled||!(f=this._keyToDirection[a.data.key])||(d?"clockwise"===f?this.view.navigation.continousRotateClockwise():"counterClockwise"===f?this.view.navigation.continousRotateCounterclockwise():
this.view.navigation.resetRotation():this.view.navigation.stop(),a.stopPropagation())};return d}(a.InputHandler);t.KeyRotate=A})},"esri/views/2d/input/handlers/MouseWheelZoom":function(){define(["require","exports","../../../../core/tsSupport/extendsHelper","../../../input/InputHandler"],function(A,t,f,a){Object.defineProperty(t,"__esModule",{value:!0});A=function(a){function d(d,f){var h=a.call(this,"esri.views.2d.input.handlers.MouseWheelZoom",!0)||this;h.view=d;h._canZoom=!0;h.registerIncoming("mouse-wheel",
f,function(a){return h._handleMouseWheel(a)});return h}f(d,a);d.prototype._handleMouseWheel=function(a){var d=this;if(this._canZoom){var f=a.data;if(f=this.view.navigation.zoom(1/Math.pow(.6,1/60*f.deltaY),[f.x,f.y]))this._canZoom=!1,f.always(function(){d._canZoom=!0});a.stopPropagation()}};return d}(a.InputHandler);t.MouseWheelZoom=A})},"esri/views/2d/input/handlers/PinchAction":function(){define(["require","exports","../../../../core/tsSupport/extendsHelper","../../../input/InputHandler"],function(A,
t,f,a){Object.defineProperty(t,"__esModule",{value:!0});A=function(a){function d(d){var f=a.call(this,"esri.views.2d.input.handlers.PinchZoom",!0)||this;f.view=d;f.registerIncoming("drag",function(a){return f._handleDrag(a)});f.registerIncoming("pointer-down",function(a){return f.stopMomentumNavigation()});return f}f(d,a);d.prototype._handleDrag=function(a){var d=a.data;if(!(2>d.pointers.length)){var f=this.view.navigation.pinch;switch(d.action){case "start":f.begin(this.view,d);break;case "update":f.update(this.view,
d);break;case "end":f.end(this.view,d)}a.stopPropagation()}};d.prototype.stopMomentumNavigation=function(){this.view.navigation.pinch.stopMomentumNavigation()};return d}(a.InputHandler);t.PinchRotateAndZoom=A})},"esri/views/2d/navigation/MapViewNavigation":function(){define("require exports ../../../core/tsSupport/declareExtendsHelper ../../../core/tsSupport/decorateHelper ../../../core/accessorSupport/decorators ../../../core/Accessor ../../../Viewpoint ../../../geometry/Point ./actions/Pan ./actions/Rotate ./actions/Pinch ./ZoomBox ../viewpointUtils".split(" "),
function(A,t,f,a,d,h,p,m,l,q,r,v,x){var y=new p({targetGeometry:new m}),C=[0,0];return function(h){function m(a){a=h.call(this)||this;a.animationManager=null;return a}f(m,h);m.prototype.initialize=function(){this.pan=new l({navigation:this});this.rotate=new q({navigation:this});this.pinch=new r({navigation:this});this.zoomBox=new v({view:this.view,navigation:this})};m.prototype.destroy=function(){this.zoomBox.destroy();this.animationManager=this.zoomBox=null};m.prototype.begin=function(){this._set("interacting",
!0)};m.prototype.end=function(){this._set("interacting",!1)};m.prototype.zoom=function(a,d){void 0===d&&(d=this._getDefaultAnchor());this.stop();this.begin();if(this.view.constraints.snapToZoom&&this.view.constraints.effectiveLODs)return 1>a?this.zoomIn(d):this.zoomOut(d);this.setViewpoint(d,a,0)};m.prototype.zoomIn=function(a){void 0===a&&(a=this._getDefaultAnchor());this.begin();var d=this.view,f=d.scale,h=d.constraints.snapToNextScale(f);a=d.goTo(this._scaleAndRotateViewpoint(y,a,h/f,0));this.end();
return a};m.prototype.zoomOut=function(a){void 0===a&&(a=this._getDefaultAnchor());this.begin();var d=this.view,f=d.scale,h=d.constraints.snapToPreviousScale(f);a=d.goTo(this._scaleAndRotateViewpoint(y,a,h/f,0));this.end();return a};m.prototype.setViewpoint=function(a,d,f){this.begin();this.view.state.viewpoint=this._scaleAndRotateViewpoint(y,a,d,f);this.end()};m.prototype.animateViewpoint=function(a,d,f){return this.view.goTo(this._scaleAndRotateViewpoint(y,a,d,f))};m.prototype.continousRotateClockwise=
function(){var a=this.get("view.viewpoint");this.animationManager.animateContinous(a,function(a){x.rotateBy(a,a,-1)})};m.prototype.continousRotateCounterclockwise=function(){var a=this.get("view.viewpoint");this.animationManager.animateContinous(a,function(a){x.rotateBy(a,a,1)})};m.prototype.resetRotation=function(){this.view.rotation=0};m.prototype.continousPanLeft=function(){var a=this.get("view.viewpoint");this.animationManager.animateContinous(a,function(a){x.translateBy(a,a,[-10,0])})};m.prototype.continousPanRight=
function(){var a=this.get("view.viewpoint");this.animationManager.animateContinous(a,function(a){x.translateBy(a,a,[10,0])})};m.prototype.continousPanUp=function(){var a=this.get("view.viewpoint");this.animationManager.animateContinous(a,function(a){x.translateBy(a,a,[0,10])})};m.prototype.continousPanDown=function(){var a=this.get("view.viewpoint");this.animationManager.animateContinous(a,function(a){x.translateBy(a,a,[0,-10])})};m.prototype.stop=function(){this.pan.stopMomentumNavigation();this.animationManager.stop();
this.end()};m.prototype._getDefaultAnchor=function(){var a=this.view.size;C[0]=.5*a[0];C[1]=.5*a[1];return C};m.prototype._scaleAndRotateViewpoint=function(a,d,f,h){var l=this.view,m=l.size,p=l.padding,q=l.constraints,r=l.viewpoint,t=l.scale*f,l=q.canZoomInTo(t),q=q.canZoomOutTo(t);return 1>f&&!l||1<f&&!q?r:x.padAndScaleAndRotateBy(a,r,f,h,d,m,p)};a([d.property()],m.prototype,"animationManager",void 0);a([d.property({type:Boolean,readOnly:!0})],m.prototype,"interacting",void 0);a([d.property()],m.prototype,
"pan",void 0);a([d.property()],m.prototype,"pinch",void 0);a([d.property()],m.prototype,"rotate",void 0);a([d.property()],m.prototype,"view",void 0);a([d.property()],m.prototype,"zoomBox",void 0);return m=a([d.subclass("esri.views.2d.navigation.MapViewNavigation")],m)}(d.declared(h))})},"esri/views/2d/navigation/actions/Pan":function(){define("require exports ../../../../core/tsSupport/declareExtendsHelper ../../../../core/tsSupport/decorateHelper ../../../../core/accessorSupport/decorators ../../../../core/Accessor ../../viewpointUtils ../../../navigation/Momentum ../../../3d/lib/glMatrix".split(" "),
function(A,t,f,a,d,h,p,m,l){return function(h){function q(a){var d=h.call(this)||this;d.animationTime=0;d.momentumEstimator=new m.ScreenspaceMomentumEstimator(.05,600,6,.92);d.momentum=null;d.momentumVelocityX=0;d.momentumVelocityY=0;d.momentumFinished=!1;d.viewpoint=p.create();d.watch("momentumFinished",function(a){a&&d.navigation.stop()});return d}f(q,h);q.prototype.begin=function(a,d){this.navigation.begin();this.momentumEstimator.reset();this.addToEstimator(d)};q.prototype.update=function(a,d){this.addToEstimator(d);
var f=d.pointers[0];d=f.currentEvent.x;var h=f.currentEvent.y;d=(f=f.previousEvent)?f.x-d:-d;h=f?h-f.y:h;a.viewpoint=p.translateBy(this.viewpoint,a.viewpoint,[d||0,h||0])};q.prototype.end=function(a,d){this.addToEstimator(d);this.momentum=this.momentumEstimator.evaluateMomentum();this.animationTime=0;this.momentum&&(this.momentumVelocityX=(this.momentum.dataNewest[0]-this.momentum.dataOldest[0])/this.momentum.dataTimeDelta,this.momentumVelocityY=(this.momentum.dataNewest[1]-this.momentum.dataOldest[1])/
this.momentum.dataTimeDelta,this.onAnimationUpdate(a));this.navigation.end()};q.prototype.addToEstimator=function(a){var d=a.pointers[0],f=d.currentEvent.x,d=d.currentEvent.y;this.momentumEstimator.add(f,d,l.vec3.createFrom(f,d,0),.001*a.currentState.timestamp)};q.prototype.onAnimationUpdate=function(a){var d=this;this.navigation.animationManager.animateContinous(a.viewpoint,function(f,h){d.momentumFinished=!d.momentum||d.momentum.isFinished(d.animationTime);h*=.001;if(!d.momentumFinished){var l=
d.momentum.velocityFactor(d.animationTime);a.viewpoint=p.translateBy(f,f,[-(l*d.momentumVelocityX*h),l*d.momentumVelocityY*h])}d.animationTime+=h})};q.prototype.stopMomentumNavigation=function(){this.momentum&&(this.momentumEstimator.reset(),this.momentum=null,this.navigation.stop())};a([d.property()],q.prototype,"momentumFinished",void 0);a([d.property()],q.prototype,"viewpoint",void 0);a([d.property()],q.prototype,"navigation",void 0);return q=a([d.subclass("esri.views.2d.navigation.actions.Pan")],
q)}(d.declared(h))})},"esri/views/navigation/Momentum":function(){define(["require","exports","../../core/tsSupport/extendsHelper","./ValueHistory","../3d/lib/glMatrix"],function(A,t,f,a,d){Object.defineProperty(t,"__esModule",{value:!0});var h=function(){function a(a,d,f){this._initialVelocity=a;this._stopVelocity=d;this._friction=f;this._duration=Math.abs(Math.log(Math.abs(this._initialVelocity)/this._stopVelocity)/Math.log(1-this._friction))}Object.defineProperty(a.prototype,"duration",{get:function(){return this._duration},
enumerable:!0,configurable:!0});a.prototype.isFinished=function(a){return a>this.duration};Object.defineProperty(a.prototype,"friction",{get:function(){return this._friction},enumerable:!0,configurable:!0});a.prototype.value=function(a){a=Math.min(a,this.duration);var d=1-this._friction;return this._initialVelocity*(Math.pow(d,a)-1)/Math.log(d)};a.prototype.valueDelta=function(a,d){var f=this.value(a);return this.value(a+d)-f};return a}();t.Momentum=h;A=function(){function d(d,f,h,l){void 0===d&&
(d=.05);this._minimumInitialVelocity=f;this._stopVelocity=h;this._friction=l;this._history=new a.ValueHistory(1E3*d)}d.prototype.add=function(a,d){void 0!==d&&(d*=1E3);this._history.add(a,d)};d.prototype.reset=function(){this._history.reset()};Object.defineProperty(d.prototype,"stopVelocity",{get:function(){return this._stopVelocity},enumerable:!0,configurable:!0});Object.defineProperty(d.prototype,"friction",{get:function(){return this._friction},enumerable:!0,configurable:!0});d.prototype.evaluateMomentum=
function(){var a=this._evaluateVelocity();return null!==a?new h(a,this._stopVelocity,this._friction):null};d.prototype._evaluateVelocity=function(){var a=this._history,d=a.oldest,a=a.newest;if(d&&a){var f=(a.timeStamp-d.timeStamp)/1E3;if(0<f&&(d=(a.value-d.value)/f,Math.abs(d)>=this._minimumInitialVelocity))return d}return null};return d}();t.MomentumEstimator=A;var p=function(a){function d(d,f,h){return a.call(this,d,f,h)||this}f(d,a);d.prototype.value=function(d){d=a.prototype.value.call(this,d);
return Math.exp(d)};d.prototype.valueDelta=function(d,f){var h=a.prototype.value.call(this,d);d=a.prototype.value.call(this,d+f);return Math.exp(d-h)};return d}(h);t.ZoomMomentum=p;var m=function(a){function d(d,f,h,l){void 0===d&&(d=.05);void 0===f&&(f=4);void 0===h&&(h=.01);void 0===l&&(l=.95);return a.call(this,d,f,h,l)||this}f(d,a);d.prototype.add=function(d,f){a.prototype.add.call(this,Math.log(d),f)};d.prototype.evaluateMomentum=function(){var a=this._evaluateVelocity();return null!==a?new p(a,
this.stopVelocity,this.friction):null};return d}(A);t.ZoomMomentumEstimator=m;A=function(a){function d(d,f,h,l){void 0===d&&(d=.05);void 0===f&&(f=4);void 0===h&&(h=.01);void 0===l&&(l=.95);return a.call(this,d,f,h,l)||this}f(d,a);d.prototype.add=function(d,f){var h=this._history.newest;if(h){h=h.value;for(d-=h;d>Math.PI;)d-=2*Math.PI;for(;d<-Math.PI;)d+=2*Math.PI;d=h+d}a.prototype.add.call(this,d,f)};return d}(A);t.RotationMomentumEstimator=A;var l=function(a){function d(d,f,h,l,m,p){d=a.call(this,
d,f,h)||this;d.dataOldest=l;d.dataNewest=m;d.dataTimeDelta=p;return d}f(d,a);d.prototype.velocityFactor=function(a){a=Math.min(a,this.duration);return Math.pow(1-this.friction,a)};d.prototype.valueFromInitialVelocity=function(a,d){d=Math.min(d,this.duration);var f=1-this.friction;return a*(Math.pow(f,d)-1)/Math.log(f)};return d}(h);t.ScreenspaceMomentum=l;A=function(){function f(d,f,h,l){void 0===d&&(d=.05);this._minimumInitialVelocity=f;this._stopVelocity=h;this._friction=l;this._entryPool=[];this._history=
new a.ValueHistory(1E3*d)}f.prototype.add=function(a,f,h,l){void 0!==l&&(l*=1E3);var m;0!==this._entryPool.length?(m=this._entryPool.pop(),m.x=a,m.y=f,d.vec3d.set(h,m.data)):m={x:a,y:f,data:d.vec3d.create(h)};this._history.add(m,l)};f.prototype.reset=function(){for(var a=0,d=this._history.values;a<d.length;a++)this._entryPool.push(d[a].value);this._history.reset()};Object.defineProperty(f.prototype,"stopVelocity",{get:function(){return this._stopVelocity},enumerable:!0,configurable:!0});Object.defineProperty(f.prototype,
"friction",{get:function(){return this._friction},enumerable:!0,configurable:!0});f.prototype.evaluateMomentum=function(){var a=this._evaluateVelocity(),d=this._history.oldest,f=this._history.newest;return null!==a?new l(a,this._stopVelocity,this._friction,d.value.data,f.value.data,.001*(f.timeStamp-d.timeStamp)):null};f.prototype._evaluateVelocity=function(){var a=this._history,d=a.oldest,f=a.newest;if(d&&f&&(a=.001*(f.timeStamp-d.timeStamp),0<a)){var h=f.value.x-d.value.x,d=f.value.y-d.value.y,
d=Math.sqrt(h*h+d*d)/a;if(Math.abs(d)>=this._minimumInitialVelocity)return d}return null};return f}();t.ScreenspaceMomentumEstimator=A})},"esri/views/navigation/ValueHistory":function(){define(["require","exports","../../core/now"],function(A,t,f){Object.defineProperty(t,"__esModule",{value:!0});A=function(){function a(a){this._maximumAge=a;this._values=[]}Object.defineProperty(a.prototype,"values",{get:function(){return this._values},enumerable:!0,configurable:!0});a.prototype.reset=function(){this._values=
[]};a.prototype.add=function(a,h){h=void 0!==h?h:f();this._values.push({value:a,timeStamp:h});this._cleanup(h)};Object.defineProperty(a.prototype,"newest",{get:function(){var a=this._values.length;if(0<a)return this._values[a-1]},enumerable:!0,configurable:!0});Object.defineProperty(a.prototype,"oldest",{get:function(){if(0<this._values.length)return this._values[0]},enumerable:!0,configurable:!0});a.prototype._cleanup=function(a){for(;0<this._values.length;)if(this._values[0].timeStamp+this._maximumAge<
a)this._values.shift();else break};return a}();t.ValueHistory=A})},"esri/views/2d/navigation/actions/Rotate":function(){define("require exports ../../../../core/tsSupport/declareExtendsHelper ../../../../core/tsSupport/decorateHelper ../../../../core/accessorSupport/decorators ../../../../core/Accessor ../../viewpointUtils ../../libs/gl-matrix/vec2".split(" "),function(A,t,f,a,d,h,p,m){return function(h){function l(a){a=h.call(this)||this;a.animationTime=0;a.viewpoint=p.create();return a}f(l,h);l.prototype.begin=
function(a,d){this.navigation.begin()};l.prototype.update=function(a,d){var f=d.pointers[0];d=m.create();m.set(d,f.currentEvent.x+a.padding.left,a.height-f.currentEvent.y+a.padding.top);var f=f.previousEvent,h=m.create();m.set(h,f.x+a.padding.left,a.height-f.y+a.padding.top);d=p.angleBetween(a.state.paddedScreenCenter,d,h);a.viewpoint=p.rotateBy(this.viewpoint,a.content.viewpoint,d)};l.prototype.end=function(a,d){this.navigation.end()};a([d.property()],l.prototype,"viewpoint",void 0);a([d.property()],
l.prototype,"navigation",void 0);return l=a([d.subclass("esri.views.2d.actions.Rotate")],l)}(d.declared(h))})},"esri/views/2d/navigation/actions/Pinch":function(){define("require exports ../../../../core/tsSupport/declareExtendsHelper ../../../../core/tsSupport/decorateHelper ../../../../core/accessorSupport/decorators ../../../../core/Accessor ../../viewpointUtils ../../../navigation/Momentum ../../libs/gl-matrix/vec2".split(" "),function(A,t,f,a,d,h,p,m,l){return function(h){function q(a){var d=
h.call(this,a)||this;d.animationTime=0;d.momentumFinished=!1;d.rotateMomentumEstimator=new m.RotationMomentumEstimator(.05,6,.15,.95);d.rotateMomentum=null;d.rotationDirection=1;d.zoomMomentumEstimator=new m.ZoomMomentumEstimator(.05);d.zoomMomentum=null;d.zoomDirection=1;d.viewpoint=p.create();d.watch("momentumFinished",function(a){a&&d.navigation.stop()});return d}f(q,h);q.prototype.begin=function(a,d){this.navigation.begin();this.rotateMomentumEstimator.reset();this.zoomMomentumEstimator.reset();
this.addToRotateEstimator(d,0);this.addToZoomEstimator(d,d.startState.radius/d.currentState.radius)};q.prototype.update=function(a,d){var f=d.currentState,h=f.angle,l=f.radius,f=f.center,m=d.previousState,p=m.radius,q=m.angle,m=d.startState.radius/l;p&&(l/=p,h=180*(h-q)/Math.PI,this.rotationDirection=0<=h?1:-1,this.zoomDirection=1<=l?1:-1,a.constraints.rotationEnabled||(h=0),this.addToRotateEstimator(d,h),this.addToZoomEstimator(d,m),this.center=f,this.navigation.setViewpoint([f.x,f.y],1/l,h))};q.prototype.end=
function(a,d){this.addToRotateEstimator(d,0);this.addToZoomEstimator(d,d.startState.radius/d.currentState.radius);this.rotateMomentum=this.rotateMomentumEstimator.evaluateMomentum();this.zoomMomentum=this.zoomMomentumEstimator.evaluateMomentum();this.animationTime=0;if(this.rotateMomentum||this.zoomMomentum)this.onAnimationUpdate(a);this.navigation.end()};q.prototype.addToRotateEstimator=function(a,d){this.rotateMomentumEstimator.add(d,.001*a.currentState.timestamp)};q.prototype.addToZoomEstimator=
function(a,d){this.zoomMomentumEstimator.add(d,.001*a.currentState.timestamp)};q.prototype.canZoomIn=function(a){var d=a.scale;a=a.constraints.effectiveMaxScale;return 0===a||d>a};q.prototype.canZoomOut=function(a){var d=a.scale;a=a.constraints.effectiveMinScale;return 0===a||d<a};q.prototype.onAnimationUpdate=function(a){var d=this;this.navigation.animationManager.animateContinous(a.viewpoint,function(f,h){var m=!d.canZoomIn(a)&&1<d.zoomDirection||!d.canZoomOut(a)&&1>d.zoomDirection;d.momentumFinished=
!d.rotateMomentum||d.rotateMomentum.isFinished(d.animationTime)||m;h*=.001;d.notifyChange("momentumFinished");if(!d.momentumFinished){var m=Math.abs(d.rotateMomentum.valueDelta(d.animationTime,h))*d.rotationDirection*2,q=d.zoomMomentum?Math.abs(d.zoomMomentum.valueDelta(d.animationTime,h)):1,r=l.create(),t=l.create();l.set(r,d.center.x,d.center.y);p.getPaddingScreenTranslation(t,a.size,a.padding);l.add(r,r,t);p.scaleAndRotateBy(f,a.viewpoint,q,m,r,a.size)}d.animationTime+=h})};q.prototype.stopMomentumNavigation=
function(){if(this.rotateMomentum||this.zoomMomentum)this.rotateMomentum&&(this.rotateMomentumEstimator.reset(),this.rotateMomentum=null),this.zoomMomentum&&(this.zoomMomentumEstimator.reset(),this.zoomMomentum=null),this.navigation.stop()};a([d.property()],q.prototype,"viewpoint",void 0);a([d.property()],q.prototype,"navigation",void 0);return q=a([d.subclass("esri.views.2d.navigation.actions.Pinch")],q)}(d.declared(h))})},"esri/views/2d/navigation/ZoomBox":function(){define("require exports ../../../core/tsSupport/declareExtendsHelper ../../../core/tsSupport/decorateHelper ../../../core/accessorSupport/decorators ../../../core/Accessor".split(" "),
function(A,t,f,a,d,h){return function(h){function m(a){a=h.call(this,a)||this;a._container=null;a._overlay=null;a._backgroundShape=null;a._boxShape=null;a._box={x:0,y:0,width:0,height:0};a._redraw=a._redraw.bind(a);return a}f(m,h);m.prototype.destroy=function(){this.view=null};Object.defineProperty(m.prototype,"view",{set:function(a){var d=this;this._handles&&this._handles.forEach(function(a){a.remove()});this._handles=null;this._destroyOverlay();this._set("view",a);a&&(a.on("drag",["Shift"],function(a){return d._handleDrag(a,
1)}),a.on("drag",["Shift","Ctrl"],function(a){return d._handleDrag(a,-1)}))},enumerable:!0,configurable:!0});m.prototype._start=function(a,d,f,h){this._createContainer();this._createOverlay();this.navigation.begin()};m.prototype._update=function(a,d,f,h){this._box.x=a;this._box.y=d;this._box.width=f;this._box.height=h;this._rafId||(this._rafId=requestAnimationFrame(this._redraw))};m.prototype._end=function(a,d,f,h,m){var l=this.view;a=l.toMap(a+.5*f,d+.5*h);f=Math.min(f/l.width,h/l.height);-1===m&&
(f=1/f);this._destroyOverlay();this.navigation.end();l.goTo({center:a,scale:l.scale*f})};m.prototype._updateBox=function(a,d,f,h){var l=this._boxShape;l.setAttributeNS(null,"x",""+a);l.setAttributeNS(null,"y",""+d);l.setAttributeNS(null,"width",""+f);l.setAttributeNS(null,"height",""+h);l.setAttributeNS(null,"class","esri-zoom-box__outline")};m.prototype._updateBackground=function(a,d,f,h){this._backgroundShape.setAttributeNS(null,"d",this._toSVGPath(a,d,f,h,this.view.width,this.view.height))};m.prototype._createContainer=
function(){var a=document.createElement("div");a.className="esri-zoom-box__container";this.view.root.appendChild(a);this._container=a};m.prototype._createOverlay=function(){var a=this.view.width,d=this.view.height,f=document.createElementNS("http://www.w3.org/2000/svg","path");f.setAttributeNS(null,"d","M 0 0 L "+a+" 0 L "+a+" "+d+" L 0 "+d+" Z");f.setAttributeNS(null,"class","esri-zoom-box__overlay-background");a=document.createElementNS("http://www.w3.org/2000/svg","rect");d=document.createElementNS("http://www.w3.org/2000/svg",
"svg");d.setAttributeNS("http://www.w3.org/2000/xmlns/","xmlns:xlink","http://www.w3.org/1999/xlink");d.setAttributeNS(null,"class","esri-zoom-box__overlay");d.appendChild(f);d.appendChild(a);this._container.appendChild(d);this._backgroundShape=f;this._boxShape=a;this._overlay=d};m.prototype._destroyOverlay=function(){this._container&&this._container.parentNode&&this._container.parentNode.removeChild(this._container);this._container=this._backgroundShape=this._boxShape=this._overlay=null};m.prototype._toSVGPath=
function(a,d,f,h,m,p){f=a+f;h=d+h;return"M 0 0 L "+m+" 0 L "+m+" "+p+" L 0 "+p+" ZM "+a+" "+d+" L "+a+" "+h+" L "+f+" "+h+" L "+f+" "+d+" Z"};m.prototype._handleDrag=function(a,d){var f=a.x,h=a.y,l=a.origin.x,m=a.origin.y,p;f>l?(p=l,l=f-l):(p=f,l-=f);h>m?(f=m,h-=m):(f=h,h=m-h);switch(a.action){case "start":this._start(p,f,l,h);break;case "update":this._update(p,f,l,h);break;case "end":this._end(p,f,l,h,d)}a.stopPropagation()};m.prototype._redraw=function(){if(this._rafId&&(this._rafId=null,this._overlay)){var a=
this._box,d=a.x,f=a.y,h=a.width,a=a.height;this._updateBox(d,f,h,a);this._updateBackground(d,f,h,a);this._rafId=requestAnimationFrame(this._redraw)}};a([d.property()],m.prototype,"navigation",void 0);a([d.property()],m.prototype,"view",null);return m=a([d.subclass("esri.views.2d.navigation.ZoomBox")],m)}(d.declared(h))})},"esri/views/2d/support/HighlightOptions":function(){define("require exports ../../../core/tsSupport/declareExtendsHelper ../../../core/tsSupport/decorateHelper ../../../core/accessorSupport/decorators ../../../core/Accessor ../../../Color".split(" "),
function(A,t,f,a,d,h,p){return function(h){function l(){var a=null!==h&&h.apply(this,arguments)||this;a.color=new p([0,255,255]);a.haloOpacity=1;a.fillOpacity=.5;return a}f(l,h);a([d.property({type:p})],l.prototype,"color",void 0);a([d.property()],l.prototype,"haloOpacity",void 0);a([d.property()],l.prototype,"fillOpacity",void 0);return l=a([d.subclass("esri.views.2d.support.HighlightOptions")],l)}(d.declared(h))})},"esri/views/BreakpointsOwner":function(){define("require exports ../core/tsSupport/declareExtendsHelper ../core/tsSupport/decorateHelper ../core/tsSupport/assignHelper ../core/accessorSupport/decorators ../core/watchUtils ./DOMContainer ../core/Accessor ../core/ArrayPool ../core/HandleRegistry dojo/dom-class".split(" "),
function(A,t,f,a,d,h,p,m,l,q,r,v){var x={widthBreakpoint:{getValue:function(a){var d=a.viewSize[0];a=a.breakpoints;var f=this.values;return d<=a.xsmall?f.xsmall:d<=a.small?f.small:d<=a.medium?f.medium:d<=a.large?f.large:f.xlarge},values:{xsmall:"xsmall",small:"small",medium:"medium",large:"large",xlarge:"xlarge"},valueToClassName:{xsmall:"esri-view-width-xsmall esri-view-width-less-than-small esri-view-width-less-than-medium esri-view-width-less-than-large esri-view-width-less-than-xlarge",small:"esri-view-width-small esri-view-width-greater-than-xsmall esri-view-width-less-than-medium esri-view-width-less-than-large esri-view-width-less-than-xlarge",
medium:"esri-view-width-medium esri-view-width-greater-than-xsmall esri-view-width-greater-than-small esri-view-width-less-than-large esri-view-width-less-than-xlarge",large:"esri-view-width-large esri-view-width-greater-than-xsmall esri-view-width-greater-than-small esri-view-width-greater-than-medium esri-view-width-less-than-xlarge",xlarge:"esri-view-width-xlarge esri-view-width-greater-than-xsmall esri-view-width-greater-than-small esri-view-width-greater-than-medium esri-view-width-greater-than-large"}},
heightBreakpoint:{getValue:function(a){var d=a.viewSize[1];a=a.breakpoints;var f=this.values;return d<=a.xsmall?f.xsmall:d<=a.small?f.small:d<=a.medium?f.medium:d<=a.large?f.large:f.xlarge},values:{xsmall:"xsmall",small:"small",medium:"medium",large:"large",xlarge:"xlarge"},valueToClassName:{xsmall:"esri-view-height-xsmall esri-view-height-less-than-small esri-view-height-less-than-medium esri-view-height-less-than-large esri-view-height-less-than-xlarge",small:"esri-view-height-small esri-view-height-greater-than-xsmall esri-view-height-less-than-medium esri-view-height-less-than-large esri-view-height-less-than-xlarge",
medium:"esri-view-height-medium esri-view-height-greater-than-xsmall esri-view-height-greater-than-small esri-view-height-less-than-large esri-view-height-less-than-xlarge",large:"esri-view-height-large esri-view-height-greater-than-xsmall esri-view-height-greater-than-small esri-view-height-greater-than-medium esri-view-height-less-than-xlarge",xlarge:"esri-view-height-xlarge esri-view-height-greater-than-xsmall esri-view-height-greater-than-small esri-view-height-greater-than-medium esri-view-height-greater-than-large"}},
orientation:{getValue:function(a){a=a.viewSize;var d=this.values;return a[1]>=a[0]?d.portrait:d.landscape},values:{portrait:"portrait",landscape:"landscape"},valueToClassName:{portrait:"esri-view-orientation-portrait",landscape:"esri-view-orientation-landscape"}}},y={xsmall:544,small:768,medium:992,large:1200};return function(l){function m(){var a=null!==l&&l.apply(this,arguments)||this;a._breakpointsHandles=new r;a.breakpoints=y;a.orientation=null;a.widthBreakpoint=null;a.heightBreakpoint=null;return a}
f(m,l);m.prototype.initialize=function(){this._breakpointsHandles.add([p.init(this,["breakpoints","size"],this._updateClassNames)])};m.prototype.destroy=function(){this.destroyed||(this._removeActiveClassNames(),this._breakpointsHandles.destroy(),this._breakpointsHandles=null)};m.prototype._updateClassNames=function(){if(this.container){var a=q.acquire(),d=q.acquire(),f=!1,h,l,m;for(h in x)l=this[h],m=x[h].getValue({viewSize:this.size,breakpoints:this.breakpoints}),l!==m&&(f=!0,this[h]=m,d.push(x[h].valueToClassName[l]),
a.push(x[h].valueToClassName[m]));f&&(this._applyClassNameChanges(a,d),q.release(a),q.release(d))}};m.prototype._applyClassNameChanges=function(a,d){var f=this.container;f&&(v.remove(f,d),v.add(f,a))};m.prototype._removeActiveClassNames=function(){var a=this.container;if(a)for(var d in x)v.remove(a,x[d].valueToClassName[this[d]])};a([h.property({set:function(a){var f=this._get("breakpoints");if(a!==f){f=(f=a)&&f.xsmall<f.small&&f.small<f.medium&&f.medium<f.large;if(!f){var h=JSON.stringify(y,null,
2);console.warn("provided breakpoints are not valid, using defaults:"+h)}a=f?a:y;this._set("breakpoints",d({},a))}}})],m.prototype,"breakpoints",void 0);a([h.property()],m.prototype,"orientation",void 0);a([h.property()],m.prototype,"widthBreakpoint",void 0);a([h.property()],m.prototype,"heightBreakpoint",void 0);return m=a([h.subclass("esri.views.BreakpointsOwner")],m)}(h.declared(l,m))})},"esri/views/2d/layers/GraphicsLayerView2D":function(){define("require exports ../../../core/tsSupport/extendsHelper ../../../core/tsSupport/decorateHelper ../../../core/accessorSupport/decorators ./LayerView2D ./support/GraphicsView2D".split(" "),
function(A,t,f,a,d,h,p){return function(h){function l(){var a=null!==h&&h.apply(this,arguments)||this;a.graphicsView=new p;a.container=a.graphicsView.container;return a}f(l,h);l.prototype.hitTest=function(a,d){return this.graphicsView.hitTest(a,d)};l.prototype.attach=function(){var a=this;this.layer.createGraphicsController({layerView:this}).then(function(d){a.graphicsView.view=a.view;a.graphicsView.graphics=d.graphics})};l.prototype.detach=function(){this.graphicsView.graphics=null};l.prototype.update=
function(a){};l.prototype.moveStart=function(){};l.prototype.viewChange=function(){};l.prototype.moveEnd=function(){};return l=a([d.subclass("esri.views.2d.layers.GraphicsLayerView2D")],l)}(d.declared(h))})},"esri/views/2d/layers/LayerView2D":function(){define("require exports ../../../core/tsSupport/extendsHelper ../../../core/tsSupport/decorateHelper ../../../core/accessorSupport/decorators ../../../core/watchUtils ../../layers/LayerView".split(" "),function(A,t,f,a,d,h,p){return function(m){function l(){var a=
null!==m&&m.apply(this,arguments)||this;a.attached=!1;a.moving=!1;a.updateRequested=!1;return a}f(l,m);l.prototype.initialize=function(){var a=this;this.then(function(){a.requestUpdate()});h.init(this,"suspended",function(d){a.container.visible=!d;!d&&a.updateRequested&&a.view.requestLayerViewUpdate(a)},!0);h.init(this,"fullOpacity",function(d){a.container.opacity=d},!0);var d=function(){this.notifyChange("rendering")}.bind(this);this.container.on("post-render",d);this.container.on("will-render",
d)};l.prototype.destroy=function(){this.attached&&(this.attached=!1,this.detach());this.updateRequested=!1;this.layer=null};Object.defineProperty(l.prototype,"rendering",{get:function(){return this.isRendering()},enumerable:!0,configurable:!0});Object.defineProperty(l.prototype,"updating",{get:function(){return!this.suspended&&(!this.attached||this.updateRequested||this.isUpdating())},enumerable:!0,configurable:!0});l.prototype.requestUpdate=function(){this.updateRequested||(this.updateRequested=
!0,this.suspended||this.view.requestLayerViewUpdate(this))};l.prototype.processUpdate=function(a){this.isFulfilled()&&!this.isResolved()?this.updateRequested=!1:(this._set("updateParameters",a),this.updateRequested&&!this.suspended&&(this.updateRequested=!1,this.update(a)))};l.prototype.isUpdating=function(){return!1};l.prototype.isRendering=function(){return this.attached&&(this.moving||this.container.renderRequested)};l.prototype.canResume=function(){var a=this.inherited(arguments),d=this.layer;
if(a&&null!=d.minScale&&null!=d.minScale){var a=this.view.scale,f=d.minScale,d=d.maxScale,h=!f,l=!d;!h&&a<=f&&(h=!0);!l&&a>=d&&(l=!0);a=h&&l}return a};a([d.property()],l.prototype,"attached",void 0);a([d.property()],l.prototype,"container",void 0);a([d.property()],l.prototype,"moving",void 0);a([d.property({dependsOn:["moving"]})],l.prototype,"rendering",null);a([d.property({dependsOn:["view.scale","layer.minScale","layer.maxScale"]})],l.prototype,"suspended",void 0);a([d.property({readOnly:!0})],
l.prototype,"updateParameters",void 0);a([d.property()],l.prototype,"updateRequested",void 0);a([d.property({dependsOn:["updateRequested","attached"]})],l.prototype,"updating",null);a([d.property()],l.prototype,"view",void 0);return l=a([d.subclass("esri.views.2d.layers.LayerView2D")],l)}(d.declared(p))})},"esri/views/2d/layers/FeatureLayerView2D":function(){define("require exports ../../../core/tsSupport/declareExtendsHelper ../../../core/tsSupport/decorateHelper dojo/has ../../../core/accessorSupport/decorators ../../../core/Collection ../../../core/Error ../../../core/HandleRegistry ../../../core/promiseUtils ../../../core/requireUtils ../../../Graphic ../../../layers/graphics/QueryEngine ./LayerView2D ../../layers/RefreshableLayerView ./support/FeaturesView2D ../engine/DOMContainer".split(" "),
function(A,t,f,a,d,h,p,m,l,q,r,v,x,y,C,E,D){function F(a){return a&&a.update}return function(t){function y(){var a=null!==t&&t.apply(this,arguments)||this;a._handles=new l;a.container=new D;return a}f(y,t);y.prototype.highlight=function(a,d){var f=this;d=this.featuresView;var h;a instanceof v?h=[a.getAttribute(this.layer.objectIdField)]:"number"===typeof a?h=[a]:p.isCollection(a)?h=a.map(function(a){return a.getAttribute(f.layer.objectIdField)}).toArray():Array.isArray(a)&&0<a.length&&(h="number"===
typeof a[0]?a:a.map(function(a){return a.getAttribute(f.layer.objectIdField)}));return h&&h.length&&d&&d.highlight?d.highlight(h):{remove:function(){}}};y.prototype.queryGraphics=function(){return this._queryEngine?this._queryEngine.queryFeatures():this._rejectQuery()};y.prototype.queryFeatures=function(a){return this._queryEngine?this._queryEngine.queryFeatures(a):this._rejectQuery()};y.prototype.queryObjectIds=function(a){return this._queryEngine?this._queryEngine.queryObjectIds(a):this._rejectQuery()};
y.prototype.queryFeatureCount=function(a){return this._queryEngine?this._queryEngine.queryFeatureCount(a):this._rejectQuery()};y.prototype.queryExtent=function(a){return this._queryEngine?this._queryEngine.queryExtent(a):this._rejectQuery()};y.prototype.hitTest=function(a,d){return this.suspended||!this.featuresView?q.resolve():this.featuresView.hitTest(a,d)};y.prototype.update=function(a){F(this.controller)?this.controller.update(a):F(this.featuresView)&&this.featuresView.update(a)};y.prototype.attach=
function(){var a=this;this._canUseWebGL()?r.when(A,["./support/FeatureLayerView2DWebGL"]).then(function(d){a.attached&&(d=new d[0]({layer:a.layer,view:a.view}),a.featuresView=d,a.container.addChild(d.container),d.attached=!0,d.attach())}):this.layer.createGraphicsController({layerView:this}).then(function(d){if(a.attached){a._set("controller",d);a.requestUpdate();var f=new E;f.mapView=a.view;f.graphics=d.graphics;f.layer=a.layer;f.renderer=a.layer.renderer;a.featuresView=f;a._handles.add(a.layer.watch("renderer",
function(){f.renderer=a.layer.renderer}));a._queryEngine=new x;a._queryEngine.features=d.graphics;a._queryEngine.objectIdField=a.layer.objectIdField;a.container.addChild(f.container)}})};y.prototype.detach=function(){this.container.removeAllChildren();this._handles.removeAll();this.featuresView&&(this.featuresView.destroy(),this.featuresView=null);this.controller&&(this.controller.destroy&&this.controller.destroy(),this._set("controller",null))};y.prototype.moveStart=function(){this.requestUpdate()};
y.prototype.viewChange=function(){this.requestUpdate()};y.prototype.moveEnd=function(){this.requestUpdate()};y.prototype.isUpdating=function(){return null==this.featuresView||!0===this.get("controller.updating")||F(this.featuresView)&&this.featuresView.isUpdating()};y.prototype._canUseWebGL=function(){return!!d("esri-featurelayer-webgl")&&!!d("esri-webgl")&&this.layer.capabilities.query.supportsQuantization&&("polygon"!==this.layer.geometryType||this.layer.capabilities.query.supportsCentroid)&&this._isRendererWebGLCompatible()};
y.prototype._isRendererWebGLCompatible=function(){var a=this.layer.renderer;return a&&-1!==["simple","class-breaks","unique-value"].indexOf(a.type)?!0:!1};y.prototype._rejectQuery=function(){return q.reject(new m("FeatureLayerView2D","Not ready to execute query"))};a([h.property({readOnly:!0})],y.prototype,"controller",void 0);a([h.property()],y.prototype,"featuresView",void 0);a([h.property({dependsOn:["controller.updating","featuresView","featuresView.updating"]})],y.prototype,"updating",void 0);
return y=a([h.subclass("esri.views.2d.layers.FeatureLayerView2D")],y)}(h.declared(y,C))})},"esri/views/layers/RefreshableLayerView":function(){define("require exports ../../core/tsSupport/declareExtendsHelper ../../core/tsSupport/decorateHelper ../../core/accessorSupport/decorators ../../core/Accessor".split(" "),function(A,t,f,a,d,h){return function(h){function m(){return null!==h&&h.apply(this,arguments)||this}f(m,h);m.prototype.refresh=function(){};a([d.property()],m.prototype,"layer",void 0);
a([d.aliasOf("layer.refreshInterval")],m.prototype,"refreshInterval",void 0);return m=a([d.subclass("esri.layers.mixins.RefreshableLayerView")],m)}(d.declared(h))})},"esri/views/2d/layers/support/FeaturesView2D":function(){define("require exports ../../../../core/tsSupport/declareExtendsHelper ../../../../core/tsSupport/decorateHelper ../../../../core/accessorSupport/decorators ../../../../core/Collection ../../../../core/HandleRegistry ../../../../core/promiseUtils ../../../../core/Logger ../../../../renderers/support/renderingInfoUtils ../../../../Graphic ../../../layers/GraphicsView ../../engine/graphics/GFXSurface ../../engine/graphics/GFXGroup ../../engine/graphics/GFXObject ../../../../symbols/Symbol3D".split(" "),
function(A,t,f,a,d,h,p,m,l,q,r,v,x,y,C,E){var D=l.getLogger("esri.views.2d.layers.support.FeaturesView2D");return function(l){function t(){for(var a=[],d=0;d<arguments.length;d++)a[d]=arguments[d];var f=l.apply(this,a)||this;f._handles=new p;f._backgroundGroup=new y;f._frontGroup=new y;f._frontObjects=new Map;f._backgroundObjects=new Map;f._scale=0;f.container=new x;f.layer=null;f.container.addChild(f._backgroundGroup);f.container.addChild(f._frontGroup);f.watch("graphics",function(){return f._reset()});
f.watch("renderer",function(){return f._resymbolize()});f.watch("mapView.scale, mapView.stationary",function(){return f._applyScale()});return f}f(t,l);t.prototype.destroy=function(){this.renderer=this.graphics=null};t.prototype.hitTest=function(a,d){a+=this.mapView.position[0]-window.pageXOffset;d+=this.mapView.position[1]-window.pageYOffset;return(a=this.container.hitTest(a,d))?m.resolve(a.graphic):m.resolve()};t.prototype._reset=function(){var a=this;this._handles.remove("graphics");this.graphics&&
(this.graphics.forEach(this._add,this),this._handles.add(this.graphics.on("change",function(d){return a._graphicsChangeHandler(d)}),"graphics"))};t.prototype._applyScale=function(){var a=this.get("mapView.scale"),d=this.get("mapView.stationary");a!==this._scale&&d&&(this._scale=a,this._resymbolize())};t.prototype._resymbolize=function(){var a=this;this.graphics&&this.graphics.forEach(function(d){return a._resymbolizeGraphic(d)})};t.prototype._add=function(a){if(!this._frontObjects.has(a)){var d=q.getRenderingInfo(a,
{renderer:this.renderer,viewingMode:"map",scale:this.mapView.state.scale,resolution:this.mapView.state.resolution,spatialReference:this.mapView.spatialReference});if(d)if(d.symbol instanceof E)D.error("3D symbols are not supported with MapView");else{var f=new C;f.graphic=a;f.renderingInfo=d;this._frontObjects.set(a,f);this._frontGroup.addChild(f);var h=d.renderer&&d.renderer.backgroundFillSymbol;h&&f.isPolygonMarkerSymbol&&(f=new C,f.graphic=a,f.renderingInfo=null!=d.outlineSize?{symbol:h,size:[d.outlineSize,
d.outlineSize,d.outlineSize]}:{symbol:h},this._backgroundObjects.set(a,f),this._backgroundGroup.addChild(f))}}};t.prototype._remove=function(a){var d=this._frontObjects.get(a);d&&(this._frontObjects.delete(a),this._frontGroup.removeChild(d),this._backgroundObjects.has(a)&&(d=this._backgroundObjects.get(a),this._backgroundObjects.delete(a),this._backgroundGroup.removeChild(d)))};t.prototype._resymbolizeGraphic=function(a){if(this._frontObjects.has(a)){var d=q.getRenderingInfo(a,{renderer:this.renderer,
viewingMode:"map",scale:this.mapView.state.scale,resolution:this.mapView.state.resolution,spatialReference:this.mapView.spatialReference});if(d)if(d.symbol instanceof E)D.error("3D symbols are not supported with MapView");else{var f=this._frontObjects.get(a);f&&(f.renderingInfo=d);var h=d.renderer&&d.renderer.backgroundFillSymbol,l=this._backgroundObjects.get(a);h&&f.isPolygonMarkerSymbol?(l||(l=new C,l.graphic=a,this._backgroundObjects.set(a,l),this._backgroundGroup.addChild(l)),l.renderingInfo=
null!=d.outlineSize?{symbol:h,size:[d.outlineSize,d.outlineSize,d.outlineSize]}:{symbol:h}):!h&&l&&(this._backgroundObjects.delete(a),this._backgroundGroup.removeChild(l))}}};t.prototype._graphicsChangeHandler=function(a){for(var d=a.removed,f=0,h=a.added;f<h.length;f++)a=h[f],this._add(a);for(f=0;f<d.length;f++)a=d[f],this._remove(a)};a([d.property()],t.prototype,"container",void 0);a([d.property(),d.cast(h.ofType(r))],t.prototype,"graphics",void 0);a([d.property()],t.prototype,"layer",void 0);a([d.property()],
t.prototype,"mapView",void 0);return t=a([d.subclass("esri.views.2d.layers.support.FeaturesView2D")],t)}(d.declared(v))})},"esri/renderers/support/renderingInfoUtils":function(){define(["require","exports"],function(A,t){function f(a,f){if(!a||a.symbol)return null;f=f.renderer;return a&&f&&f.getObservationRenderer?f.getObservationRenderer(a):f}function a(a,h){if(a.symbol)return a.symbol;var d=f(a,h);return d&&d.getSymbol(a,h)}Object.defineProperty(t,"__esModule",{value:!0});t.getRenderer=f;t.getSymbol=
a;t.getRenderingInfo=function(d,h){var p=f(d,h),m=a(d,h);if(!m)return null;m={renderer:p,symbol:m};if(p){p.colorInfo&&(m.color=p.getColor(d).toRgba());if(p.sizeInfo){var l=p.getSize(d);m.size=[l,l,l]}if(p.visualVariables){d=p.getVisualVariableValues(d,h);l=["proportional","proportional","proportional"];for(h=0;h<d.length;h++){var q=d[h],p=q.variable,r=q.value;"color"===p.type?m.color=r.toRgba():"size"===p.type?"outline"===p.target?m.outlineSize=r:(q=p.axis,p=p.useSymbolValue?"symbolValue":r,"width"===
q?l[0]=p:"depth"===q?l[1]=p:"height"===q?l[2]=p:l[0]="width-and-depth"===q?l[1]=p:l[1]=l[2]=p):"opacity"===p.type?m.opacity=r:"rotation"===p.type&&"tilt"===p.axis?m.tilt=r:"rotation"===p.type&&"roll"===p.axis?m.roll=r:"rotation"===p.type&&(m.heading=r)}if(isFinite(l[0])||isFinite(l[1])||isFinite(l[2]))m.size=l}}return m}})},"esri/views/2d/layers/TiledLayerView2D":function(){define("require exports ../../../core/tsSupport/extendsHelper ../../../core/tsSupport/decorateHelper ../../../core/accessorSupport/decorators ../../../core/ObjectPool ../../../core/Error ../../../core/promiseUtils ./LayerView2D ../tiling/TileInfoView ../tiling/TileKey ../tiling/TileQueue ../tiling/TileStrategy ../engine/Bitmap ../engine/BitmapSource ../engine/BitmapContainer ../engine/Canvas2DContainer ../engine/Tiled ../../layers/RefreshableLayerView".split(" "),
function(A,t,f,a,d,h,p,m,l,q,r,v,x,y,C,E,D,F,H){var K=function(a){function d(d){d=a.call(this,d)||this;d.key=new r(0,0,0,0);return d}f(d,a);d.prototype.acquire=function(a){};d.prototype.release=function(){this.key.set(0,0,0,0)};d.pool=new h(d,!0);return d}(F(y));return function(h){function l(){var a=null!==h&&h.apply(this,arguments)||this;a._tileStrategy=null;a._tileInfoView=null;a._fetchQueue=null;a._tileRequests=new Map;a.container=new D;a.layer=null;return a}f(l,h);l.prototype.initialize=function(){var a=
this.layer.tileInfo,a=a&&a.spatialReference,d;a||(d=new p("layerview:tiling-information-missing","The layer doesn't provide tiling information",{layer:this.layer}));a.equals(this.view.spatialReference)||(d=new p("layerview:spatial-reference-incompatible","The spatial reference of this layer does not meet the requirements of the view",{layer:this.layer}));d&&this.addResolvingPromise(m.reject(d))};l.prototype.hitTest=function(a,d){return null};l.prototype.update=function(a){this._fetchQueue.pause();
this._fetchQueue.state=a.state;this._tileStrategy.update(a);this._fetchQueue.resume();this.notifyChange("updating")};l.prototype.attach=function(){var a=this;this._tileContainer=new E;this.container.addChild(this._tileContainer);this._tileInfoView=new q(this.layer.tileInfo,this.layer.fullExtent);this._fetchQueue=new v({tileInfoView:this._tileInfoView,process:function(d){return a.fetchTile(d)}});this._tileStrategy=new x({cachePolicy:"keep",acquireTile:function(d){return a.acquireTile(d)},releaseTile:function(d){return a.releaseTile(d)},
tileInfoView:this._tileInfoView})};l.prototype.detach=function(){this._tileStrategy.destroy();this._fetchQueue.clear();this.container.removeChild(this._tileContainer);this._fetchQueue=this._tileStrategy=this._tileInfoView=this._tileContainer=null};l.prototype.moveStart=function(){this.requestUpdate()};l.prototype.viewChange=function(){this.requestUpdate()};l.prototype.moveEnd=function(){this.requestUpdate()};l.prototype.getTileBounds=function(a,d){return this._tileStrategy.tileInfoView.getTileBounds(a,
d)};l.prototype.getTileCoords=function(a,d){return this._tileStrategy.tileInfoView.getTileCoords(a,d)};l.prototype.getTileResolution=function(a){return this._tileStrategy.tileInfoView.getTileResolution(a)};l.prototype.acquireTile=function(a){var d=this,f=K.pool.acquire();f.key.set(a);this._tileInfoView.getTileCoords(f.coords,f.key);f.resolution=this._tileInfoView.getTileResolution(f.key);a=this._tileInfoView.tileInfo.size;f.width=a[0];f.height=a[1];a=this._fetchQueue.push(f.key).then(function(a){f.source=
a;f.once("attach",function(){return d.requestUpdate()});d._tileContainer.addChild(f);d.notifyChange("updating");d.requestUpdate()});this._tileRequests.set(f,a);this.requestUpdate();return f};l.prototype.releaseTile=function(a){var d=this,f=this._tileRequests.get(a);f.isFulfilled()||f.cancel();this._tileRequests.delete(a);this._tileContainer.removeChild(a);a.once("detach",function(){K.pool.release(a);d.requestUpdate()});this.requestUpdate();this.notifyChange("updating")};l.prototype.fetchTile=function(a){var d=
this,f=this.layer.tilemapCache;if(f){var h=a.level,l=a.row,m=a.col;return f.fetchAvailabilityUpsample(h,l,m,a).then(function(){return d._fetchImage(a)}).otherwise(function(){a.level=h;a.row=l;a.col=m;return d._fetchImage(a)})}return this._fetchImage(a)};l.prototype._fetchImage=function(a){var d=this;return this.layer.fetchTile(a.level,a.row,a.col).then(function(f){f=C.pool.acquire(f);f.coords=d.getTileCoords(f.coords,a);f.resolution=d.getTileResolution(a);return f})};a([d.property({dependsOn:["updateRequested",
"attached"]})],l.prototype,"updating",void 0);return l=a([d.subclass("esri.views.2d.layers.TiledLayerView2D")],l)}(d.declared(l,H))})},"esri/views/2d/engine/Bitmap":function(){define(["require","exports","../../../core/tsSupport/extendsHelper","./DisplayObject"],function(A,t,f,a){var d=[0,0];return function(a){function h(d){var f=a.call(this)||this;f.source=d;f.coords=[0,0];f.resolution=0;f.rotation=0;f.width=0;f.height=0;return f}f(h,a);h.prototype.doRender=function(a){this.source&&this.source.ready&&
null!=a.context&&this.renderCanvas2D(a)};h.prototype.renderCanvas2D=function(a){var f=this.source,h=a.context,m=a.state;a=m.rotation;var p=this.resolution/m.resolution*m.pixelRatio;if(!(.05>p)){h.save();var t=m.toScreen(d,this.coords),m=t[0],t=t[1];.99<p&&1.01>p?h.translate(Math.round(m),Math.round(t)):(h.translate(m,t),h.scale(p,p));a&&h.rotate(a*Math.PI/180);f.rotation&&(h.translate(.5*this.width,.5*this.height),h.rotate(-f.rotation*Math.PI/180),h.translate(.5*-this.width,.5*-this.height));a=(this.coords[0]-
f.coords[0])/f.resolution;p=-(this.coords[1]-f.coords[1])/f.resolution;m=this.resolution/f.resolution*f.width;t=this.resolution/f.resolution*f.height;h.clearRect(0,0,this.width,this.height);f.draw(h,Math.round(a),Math.round(p),Math.round(m),Math.round(t),0,0,this.width,this.height);h.restore()}};return h}(a)})},"esri/views/2d/engine/BitmapSource":function(){define(["require","exports","../../../core/ObjectPool"],function(A,t,f){return function(){function a(a){this.coords=[0,0];this._height=0;this.pixelRatio=
1;this._width=this.rotation=this.resolution=0;this.data=a}a.prototype.release=function(){this.data=null};Object.defineProperty(a.prototype,"data",{get:function(){return this._data},set:function(a){this._data=a;this._width=this._height=0;a&&(a instanceof HTMLImageElement?(this._width=a.naturalWidth,this._height=a.naturalHeight):0<a.width&&0<a.height&&(this._width=a.width,this._height=a.height))},enumerable:!0,configurable:!0});Object.defineProperty(a.prototype,"height",{get:function(){return this._height},
enumerable:!0,configurable:!0});Object.defineProperty(a.prototype,"ready",{get:function(){return 0<this._width},enumerable:!0,configurable:!0});Object.defineProperty(a.prototype,"width",{get:function(){return this._width},enumerable:!0,configurable:!0});a.prototype.draw=function(a,f,p,m,l,q,r,t,x){this.ready&&a.drawImage(this._data,f,p,m,l,q,r,t,x)};a.pool=new f(a,!0);return a}()})},"esri/views/2d/engine/BitmapContainer":function(){define("require exports ../../../core/tsSupport/extendsHelper ../../../core/tsSupport/decorateHelper ./Container ../ViewState ../viewStateUtils".split(" "),
function(A,t,f,a,d,h,p){var m=[0,0];return function(a){function d(){var d=null!==a&&a.apply(this,arguments)||this;d._childrenCanvas=null;d._childrenRenderParameters={budget:null,context:null,devicePixelRatio:1,state:new h,stationary:!0};return d}f(d,a);d.prototype.attach=function(d){this._childrenCanvas||(this._childrenCanvas=document.createElement("canvas"),this._childrenRenderParameters.context=this._childrenCanvas.getContext("2d"));return a.prototype.attach.call(this,d)};d.prototype.detach=function(d){a.prototype.detach.call(this,
d);this._childrenCanvas=null;this._childrenRenderParameters.context=null};d.prototype.doRender=function(d){this.visible&&a.prototype.doRender.call(this,d)};d.prototype.prepareChildrenRenderParameters=function(a){var d=this._childrenCanvas,f=this._childrenRenderParameters,h=a.state,l=h.pixelRatio,q=f.state;q.copy(h);var r=p.getOuterSize(m,h),h=r[0],r=r[1],h=h*l,r=r*l;q.size=m;q.viewpoint.rotation=0;d.width!==h||d.height!==r?(d.width=h,d.height=r):f.context.clearRect(0,0,h,r);f.budget=a.budget;f.devicePixelRatio=
a.devicePixelRatio;return f};d.prototype.beforeRenderChildren=function(a,d){this.sortChildren(function(a,d){return d.resolution-a.resolution})};d.prototype.afterRenderChildren=function(a,d){var f=a.context;a=a.state;var h=d.context;d=d.state;0===a.rotation?f.drawImage(h.canvas,0,0):(f.save(),f.translate(.5*a.width,.5*a.height),f.rotate(a.rotation*Math.PI/180),f.translate(.5*-a.width,.5*-a.height),f.drawImage(h.canvas,.5*(a.width-d.width),.5*(a.height-d.height)),f.restore())};return d}(d)})},"esri/views/2d/viewStateUtils":function(){define(["require",
"exports"],function(A,t){Object.defineProperty(t,"__esModule",{value:!0});var f=Math.PI/180;t.snapToPixel=function(a,d,f){var h=f.resolution;f=f.size;a[0]=h*(Math.round(d[0]/h)+f[0]%2*.5);a[1]=h*(Math.round(d[1]/h)+f[1]%2*.5);return a};t.getOuterSize=function(a,d){var h=d.rotation*f,p=Math.abs(Math.cos(h)),h=Math.abs(Math.sin(h)),m=d.size;d=m[0];m=m[1];a[0]=Math.round(m*h+d*p);a[1]=Math.round(m*p+d*h);return a};t.getBBox=function(a,d,f,p){var h=d[0];d=d[1];var l=p[0];p=p[1];f*=.5;a[0]=h-f*l;a[1]=
d-f*p;a[2]=h+f*l;a[3]=d+f*p;return a};t.bboxIntersects=function(a,d){var f=a[1],p=a[2],m=a[3],l=d[0],q=d[1],r=d[3];return!(a[0]>d[2]||p<l||f>r||m<q)}})},"esri/views/2d/engine/Canvas2DContainer":function(){define(["require","exports","../../../core/tsSupport/extendsHelper","../ViewState","./Container"],function(A,t,f,a,d){return function(d){function h(){var f=null!==d&&d.apply(this,arguments)||this;f._childrenRenderParameters={budget:null,context:null,devicePixelRatio:1,state:new a,stationary:!0};
f.hidpi=!1;return f}f(h,d);h.prototype.createElement=function(){var a=document.createElement("canvas");a.setAttribute("class","esri-display-object");return a};h.prototype.setElement=function(a){this.element=a};h.prototype.doRender=function(a){var f=this.element,h=f.style;if(this.visible){var m=a.state,p=a.devicePixelRatio,t=m.width,m=m.height;f.width=t*(this.hidpi?p:1);f.height=m*(this.hidpi?p:1);h.display="block";h.opacity=""+this.opacity;h.width=t+"px";h.height=m+"px";d.prototype.doRender.call(this,
a)}else h.display="none"};h.prototype.prepareChildrenRenderParameters=function(a){var d=this._childrenRenderParameters;d.budget=a.budget;d.context=this.element.getContext("2d");d.devicePixelRatio=a.devicePixelRatio;d.state.copy(a.state);d.state.pixelRatio=this.hidpi?a.devicePixelRatio:1;d.stationary=a.stationary;return d};h.prototype.beforeRenderChildren=function(a,d){a=d.context;var f=d.state;a.save();if(f.spatialReference.isWrappable){var h=f.width;d=f.height;var l=f.pixelRatio,m=this.hidpi?l:1,
l=f.rotation*Math.PI/180,p=Math.round(h*m*Math.abs(Math.cos(l))+d*m*Math.abs(Math.sin(l))),f=f.worldScreenWidth*m;f<p&&(h=h*m*.5,d=d*m*.5,l&&(a.translate(h,d),a.rotate(l),a.translate(-h,-d)),a.beginPath(),a.rect(h-.5*f,d-.5*p,f,p),a.closePath(),l&&(a.translate(h,d),a.rotate(-l),a.translate(-h,-d)),a.clip("evenodd"))}};h.prototype.afterRenderChildren=function(a,d){d.context.restore()};h.prototype.renderChild=function(a,d){d.context.save();a.processRender(d);d.context.restore()};return h}(d)})},"esri/views/2d/engine/Tiled":function(){define(["require",
"exports","../../../core/tsSupport/extendsHelper","./Evented"],function(A,t,f,a){return function(d){d=function(a){function d(){for(var d=0;d<arguments.length;d++);return a.call(this)||this}f(d,a);return d}(d);return a.EventedMixin(d)}})},"url:esri/views/2d/engine/webgl/shaders/bitblit.vs.glsl":"attribute vec2 a_pos;\r\nattribute vec2 a_tex;\r\n\r\nvarying mediump vec2 v_uv;\r\n\r\nvoid main(void) {\r\n  gl_Position \x3d vec4(a_pos, 0.0, 1.0);\r\n  v_uv \x3d a_tex;\r\n}\r\n","url:esri/views/2d/engine/webgl/shaders/bitblit.fs.glsl":"\tuniform lowp sampler2D u_tex;\r\n\tuniform lowp float u_opacity;\r\n\r\n\tvarying mediump vec2 v_uv;\r\n\r\n\tvoid main() {\r\n\t\tlowp vec4 color \x3d texture2D(u_tex, v_uv);\r\n\r\n    // Note: output in pre-multiplied alpha for correct alpha compositing\r\n\t\tgl_FragColor \x3d color *  u_opacity;\r\n\t}\r\n",
"url:esri/views/2d/engine/webgl/shaders/stencil.vs.glsl":"attribute vec2 a_pos;\r\n\r\nvoid main() {\r\n  gl_Position \x3d vec4(a_pos, 0.0, 1.0);\r\n}\r\n","url:esri/views/2d/engine/webgl/shaders/stencil.fs.glsl":"void main() {\r\n  gl_FragColor \x3d vec4(1.0, 1.0, 1.0, 1.0);\r\n}\r\n","url:esri/views/2d/engine/webgl/shaders/background.vs.glsl":"attribute vec2 a_pos;\r\n\r\nuniform highp mat4 u_transformMatrix;\r\nuniform mediump vec2 u_normalized_origin;\r\nuniform mediump float u_coord_range;\r\nuniform mediump float u_depth;\r\n\r\nvoid main() {\r\n  gl_Position \x3d vec4(u_normalized_origin, u_depth, 0.0) + u_transformMatrix * vec4(u_coord_range * a_pos, 0.0, 1.0);\r\n}\r\n",
"url:esri/views/2d/engine/webgl/shaders/background.fs.glsl":"uniform lowp vec4 u_color;\r\nvoid main() {\r\n  gl_FragColor \x3d u_color;\r\n}","url:esri/views/2d/engine/webgl/shaders/tileInfo.vs.glsl":"attribute vec2 a_pos;\r\n\r\nuniform highp mat4 u_transformMatrix;\r\nuniform mediump vec2 u_normalized_origin;\r\nuniform mediump float u_depth;\r\nuniform mediump float u_coord_ratio;\r\nuniform mediump vec2 u_delta; // in tile coordinates\r\nuniform mediump vec2 u_dimensions; // in tile coordinates\r\n\r\nvarying mediump vec2 v_tex;\r\n\r\nvoid main() {\r\n  mediump vec2 offests \x3d u_coord_ratio * vec2(u_delta + a_pos * u_dimensions);\r\n  gl_Position \x3d vec4(u_normalized_origin, u_depth, 0.0) + u_transformMatrix * vec4(offests, 0.0, 1.0);\r\n\r\n  v_tex \x3d a_pos;\r\n}\r\n",
"url:esri/views/2d/engine/webgl/shaders/tileInfo.fs.glsl":"uniform mediump sampler2D u_texture;\r\nvarying mediump vec2 v_tex;\r\n\r\nvoid main(void) {\r\n  lowp vec4 color \x3d texture2D(u_texture, v_tex);\r\n  gl_FragColor \x3d 0.75 * color;\r\n}\r\n","url:esri/views/2d/engine/webgl/shaders/textShaders.xml":'\x3c?xml version\x3d"1.0" encoding\x3d"UTF-8"?\x3e\r\n\x3c!--\r\n  Add your GLSL snippets to this file. You should start from\r\n  importing your old GLSL files. For instance, if you have a\r\n  file such as myShader.vs.glsl you should create a new \x3csnippet name\x3d"myShaderVS"\x3e\r\n  and then copy and paste the GLSL source as the content. You will then convert your\r\n  code to use the {@link esri/views/2d/engine/webgl/glShaderSnippets glShaderSnippets}\r\n  instance to access the GLSL code, instead of importing it directly with require("dojo/text!...").\r\n--\x3e\r\n\x3csnippets\x3e\r\n\r\n  \x3csnippet name\x3d"textVS"\x3e\r\n    \x3c![CDATA[\r\n      precision mediump float;\r\n\r\n      attribute vec2 a_pos;           // 2 * 2 (2 x signed 16)\r\n      attribute vec4 a_id;            // 4 (4 x unsigned byte)\r\n      attribute vec4 a_color;         // 4 (4 x unsigned byte)\r\n      attribute vec4 a_vertexOffset; // 2 * 2 // (2 x signed 16) offset from the anchor point of the string\r\n      attribute vec4 a_texFontSize; // 4 (4 x unsigned byte) texture coordinatesm and font size\r\n\r\n      attribute lowp float  a_visible; // --\x3e a one byte controlling the visibility of the vertex (a separate visibility buffer), values are 0 or 1 (visible)\r\n\r\n      // the relative transformation of a vertex given in tile coordinates to a relative normalized coordinate\r\n      // relative to the tile\'s upper left corner\r\n      // the extrusion vector.\r\n      uniform highp mat4 u_transformMatrix;\r\n      // the extrude matrix which is responsible for the \'anti-zoom\' as well as the rotation\r\n      uniform highp mat4 u_extrudeMatrix;\r\n      // u_normalized_origin is the tile\'s upper left corner given in normalized coordinates\r\n      uniform highp vec2 u_normalized_origin;\r\n      // the size of the mosaic given in pixels\r\n      uniform vec2 u_mosaicSize;\r\n      uniform float u_pixelRatio;\r\n\r\n      // the opacity of the layer\r\n      uniform mediump float u_opacity;\r\n\r\n      varying mediump vec4 v_color;\r\n      varying mediump float v_antialiasingWidth;\r\n\r\n      // the interpolated texture coordinate value to be used by the fragment shader in order to sample the sprite texture\r\n      varying mediump vec2 v_tex;\r\n      // the calculated transparency to be applied by the fragment shader. It is incorporating both the fade as well as the\r\n      // opacity of the layer given by the painter\r\n      varying lowp float v_transparency;\r\n\r\n      // the vertex offsets are given in integers, therefore in order to maintain a reasonable precission we multiply the values\r\n      // by 16 and then at the shader devide by the same number\r\n      const float offsetPrecision \x3d 1.0 / 32.0;\r\n      const float sdfFontSize \x3d 24.0;\r\n\r\n      void main()\r\n      {\r\n        float fontScale \x3d a_texFontSize.z / sdfFontSize;\r\n        // we need to scale the extrude matrix by the font-scale in order to get the right text size\r\n        mat4 extrudeMatrix \x3d fontScale * u_extrudeMatrix;\r\n\r\n        // If the label rotates with the map, and if the rotated label is upside down, hide it\r\n        gl_Position \x3d vec4(u_normalized_origin, 0.0, 0.0) + u_transformMatrix * vec4(a_pos, 0.0, 1.0) + extrudeMatrix * vec4(offsetPrecision * a_vertexOffset, 0.0, 0.0);\r\n\r\n        v_transparency *\x3d u_opacity;\r\n        v_tex \x3d a_texFontSize.xy / u_mosaicSize;\r\n        v_color \x3d a_color;\r\n        v_antialiasingWidth \x3d 0.1 * sdfFontSize / a_texFontSize.z / u_pixelRatio;\r\n      }\r\n    ]]\x3e\r\n  \x3c/snippet\x3e\r\n\r\n  \x3csnippet name\x3d"textFS"\x3e\r\n    \x3c![CDATA[\r\n      precision lowp float;\r\n\r\n      uniform lowp sampler2D u_texture;\r\n\r\n      varying mediump vec4 v_color;\r\n      varying mediump float v_antialiasingWidth;\r\n      varying mediump vec2 v_tex;\r\n      varying lowp float v_transparency;\r\n\r\n      // 0.75 is the value of the edge of the geometry in the SDF glyphs\r\n      const float glyphEdgeDistance \x3d 0.75;\r\n\r\n      void main()\r\n      {\r\n        // read the distance from the SDF texture\r\n        lowp float dist \x3d texture2D(u_texture, v_tex).a;\r\n        // use a smooth-step in order to calculate the geometry of the shape given by the distance field\r\n        lowp float alpha \x3d smoothstep(glyphEdgeDistance - v_antialiasingWidth, glyphEdgeDistance + v_antialiasingWidth, dist) * v_transparency;\r\n\r\n        gl_FragColor \x3d alpha * v_color;\r\n      }\r\n    ]]\x3e\r\n  \x3c/snippet\x3e\r\n\r\n\x3c/snippets\x3e\r\n',
"url:esri/views/2d/engine/webgl/shaders/iconShaders.xml":'\x3c?xml version\x3d"1.0" encoding\x3d"UTF-8"?\x3e\r\n\x3c!--\r\n  Add your GLSL snippets to this file. You should start from\r\n  importing your old GLSL files. For instance, if you have a\r\n  file such as myShader.vs.glsl you should create a new \x3csnippet name\x3d"myShaderVS"\x3e\r\n  and then copy and paste the GLSL source as the content. You will then convert your\r\n  code to use the {@link esri/views/2d/engine/webgl/glShaderSnippets glShaderSnippets}\r\n  instance to access the GLSL code, instead of importing it directly with require("dojo/text!...").\r\n--\x3e\r\n\x3csnippets\x3e\r\n\r\n  \x3csnippet name\x3d"rgba2floatFunc"\x3e\r\n    \x3c![CDATA[\r\n    float rgba2float(vec4 rgba) {\r\n      return dot(rgba,  vec4(1.0/16777216.0, 1.0/65535.0, 1.0/256.0, 1.0));\r\n    }\r\n    ]]\x3e\r\n  \x3c/snippet\x3e\r\n\r\n  \x3csnippet name\x3d"iconVVUniformsVS"\x3e\r\n    \x3c![CDATA[\r\n  #if defined(VV_COLOR) || defined(VV_SIZE_MIN_MAX_VALUE) || defined(VV_SIZE_SCALE_STOPS) || defined(VV_SIZE_FIELD_STOPS) || defined(VV_SIZE_UNIT_VALUE) || defined(VV_OPACITY) || defined(VV_ROTATION)\r\n    attribute vec4 a_vv;\r\n  #endif // VV_COLOR || VV_SIZE_MIN_MAX_VALUE || VV_SIZE_SCALE_STOPS || VV_SIZE_FIELD_STOPS || VV_SIZE_UNIT_VALUE || VV_OPACITY || VV_ROTATION\r\n\r\n  #ifdef VV_COLOR\r\n    uniform float u_vvColorValues[8];\r\n    uniform vec4 u_vvColors[8];\r\n  #endif // VV_COLOR\r\n\r\n  #ifdef VV_SIZE_MIN_MAX_VALUE\r\n    uniform vec4 u_vvSizeMinMaxValue;\r\n  #endif // VV_SIZE_MIN_MAX_VALUE\r\n\r\n  #ifdef VV_SIZE_SCALE_STOPS\r\n    uniform float u_vvSizeScaleStopsValue;\r\n  #endif // VV_SIZE_SCALE_STOPS\r\n\r\n  #ifdef VV_SIZE_FIELD_STOPS\r\n    uniform float u_vvSizeFieldStopsValues[6];\r\n    uniform float u_vvSizeFieldStopsSizes[6];\r\n  #endif // VV_SIZE_FIELD_STOPS\r\n\r\n  #ifdef VV_SIZE_UNIT_VALUE\r\n    uniform float u_vvSizeUnitValueWorldToPixelsRatio;\r\n  #endif // VV_SIZE_UNIT_VALUE\r\n\r\n  #ifdef VV_OPACITY\r\n    uniform float u_vvOpacityValues[8];\r\n    uniform float u_vvOpacities[8];\r\n  #endif // VV_OPACITY\r\n\r\n    ]]\x3e\r\n  \x3c/snippet\x3e\r\n\r\n  \x3csnippet name\x3d"iconVVFunctions"\x3e\r\n    \x3c![CDATA[\r\n  #ifdef VV_SIZE_MIN_MAX_VALUE\r\n    float getVVMinMaxSize(float sizeValue) {\r\n      // we need to multiply by 8 in order to translate to tile coordinates\r\n      float interpolationRatio \x3d (sizeValue  - u_vvSizeMinMaxValue.x) / (u_vvSizeMinMaxValue.y - u_vvSizeMinMaxValue.x);\r\n      return clamp(u_vvSizeMinMaxValue.z + interpolationRatio * (u_vvSizeMinMaxValue.w - u_vvSizeMinMaxValue.z), u_vvSizeMinMaxValue.z, u_vvSizeMinMaxValue.w);\r\n    }\r\n  #endif // VV_SIZE_MIN_MAX_VALUE\r\n\r\n  #ifdef VV_SIZE_FIELD_STOPS\r\n    const int VV_SIZE_N \x3d 6;\r\n    float getVVStopsSize(float sizeValue) {\r\n      if (sizeValue \x3c\x3d u_vvSizeFieldStopsValues[0]) {\r\n        return u_vvSizeFieldStopsSizes[0];\r\n      }\r\n\r\n      for (int i \x3d 1; i \x3c VV_SIZE_N; ++i) {\r\n        if (u_vvSizeFieldStopsValues[i] \x3e\x3d sizeValue) {\r\n          float f \x3d (sizeValue - u_vvSizeFieldStopsValues[i-1]) / (u_vvSizeFieldStopsValues[i] - u_vvSizeFieldStopsValues[i-1]);\r\n          return mix(u_vvSizeFieldStopsSizes[i-1], u_vvSizeFieldStopsSizes[i], f);\r\n        }\r\n      }\r\n\r\n      return u_vvSizeFieldStopsSizes[VV_SIZE_N - 1];\r\n    }\r\n  #endif // VV_SIZE_FIELD_STOPS\r\n\r\n  #ifdef VV_SIZE_UNIT_VALUE\r\n    float getVVUnitValue(float sizeValue) {\r\n      return u_vvSizeUnitValueWorldToPixelsRatio * sizeValue;\r\n    }\r\n  #endif // VV_SIZE_UNIT_VALUE\r\n\r\n  #ifdef VV_OPACITY\r\n    const int VV_OPACITY_N \x3d 8;\r\n    float getVVOpacity(float opacityValue) {\r\n      if (opacityValue \x3c\x3d u_vvOpacityValues[0]) {\r\n        return u_vvOpacities[0];\r\n      }\r\n\r\n      for (int i \x3d 1; i \x3c VV_OPACITY_N; ++i) {\r\n        if (u_vvOpacityValues[i] \x3e\x3d opacityValue) {\r\n          float f \x3d (opacityValue - u_vvOpacityValues[i-1]) / (u_vvOpacityValues[i] - u_vvOpacityValues[i-1]);\r\n          return mix(u_vvOpacities[i-1], u_vvOpacities[i], f);\r\n        }\r\n      }\r\n\r\n      return u_vvOpacities[VV_OPACITY_N - 1];\r\n    }\r\n  #endif // VV_OPACITY\r\n\r\n  #ifdef VV_ROTATION\r\n    mat4 getVVRotation(float rotationValue) {\r\n      // YF TODO: if the symbol has rotation we need to combine the symbo\'s rotation with the VV one\r\n      float angle \x3d C_DEG_TO_RAD * rotationValue;\r\n\r\n      float sinA \x3d sin(angle);\r\n      float cosA \x3d cos(angle);\r\n\r\n      return mat4(cosA, sinA, 0, 0,\r\n                  -sinA,  cosA, 0, 0,\r\n                  0,     0, 1, 0,\r\n                  0,     0, 0, 1);\r\n    }\r\n  #endif // VV_ROTATION\r\n\r\n  #ifdef VV_COLOR\r\n    const int VV_COLOR_N \x3d 8;\r\n\r\n    vec4 getVVColor(float colorValue) {\r\n      if (colorValue \x3c\x3d u_vvColorValues[0]) {\r\n        return u_vvColors[0];\r\n      }\r\n\r\n      for (int i \x3d 1; i \x3c VV_COLOR_N; ++i) {\r\n        if (u_vvColorValues[i] \x3e\x3d colorValue) {\r\n          float f \x3d (colorValue - u_vvColorValues[i-1]) / (u_vvColorValues[i] - u_vvColorValues[i-1]);\r\n          return mix(u_vvColors[i-1], u_vvColors[i], f);\r\n        }\r\n      }\r\n\r\n      return u_vvColors[VV_COLOR_N - 1];\r\n    }\r\n  #endif // VV_COLOR\r\n    ]]\x3e\r\n  \x3c/snippet\x3e\r\n\r\n\r\n  \x3csnippet name\x3d"iconVS"\x3e\r\n  \x3c![CDATA[\r\n    precision mediump float;\r\n\r\n    //const float C_256_TO_RAD \x3d 3.14159265359 / 128.0;\r\n    const float C_DEG_TO_RAD \x3d 3.14159265359 / 180.0;\r\n    const float C_OFFSET_PRECISION \x3d 1.0 / 64.0;\r\n\r\n    // per-vertex attributes (4 bytes)\r\n    attribute vec4 a_vertexOffsetAndTex;\r\n\r\n    // per quad (instance) attributes (20 bytes \x3d\x3d\x3e equivalent of 5 bytes per vertex)\r\n    attribute vec2 a_pos;\r\n    attribute vec4 a_id; // since we need to render the Id as a color we need to break it into RGBA components. so just like a color, the Id is normalized.\r\n    attribute vec4 a_color;\r\n    attribute vec4 a_outlineColor;\r\n    attribute vec4 a_sizeAndOutlineWidth;\r\n\r\n    // the relative transformation of a vertex given in tile coordinates to a relative normalized coordinate\r\n    // relative to the tile\'s upper left corner\r\n    // the extrusion vector.\r\n    uniform highp mat4 u_transformMatrix;\r\n    // the extrude matrix which is responsible for the \'anti-zoom\' as well as the rotation\r\n    uniform highp mat4 u_extrudeMatrix;\r\n    // u_normalized_origin is the tile\'s upper left corner given in normalized coordinates\r\n    uniform highp vec2 u_normalized_origin;\r\n\r\n    // the size of the mosaic given in pixels\r\n    uniform vec2 u_mosaicSize;\r\n\r\n    // the opacity of the layer given by the painter\r\n    uniform mediump float u_opacity;\r\n\r\n    // the interpolated texture coordinate value to be used by the fragment shader in order to sample the sprite texture\r\n    varying mediump vec2 v_tex;\r\n    // the calculated transparency to be applied by the fragment shader. It is incorporating both the fade as well as the\r\n    // opacity of the layer given by the painter\r\n    varying lowp float v_transparency;\r\n    // the of the icon given in pixels\r\n    varying mediump vec2 v_size;\r\n\r\n    // icon color. If is a picture-marker it is used to tint the texture color\r\n    varying lowp vec4 v_color;\r\n\r\n #ifdef SDF\r\n    varying lowp vec4 v_outlineColor;\r\n    varying mediump float v_outlineWidth;\r\n #endif // SDF\r\n\r\n #ifdef ID\r\n    varying highp vec4 v_id;\r\n #endif // ID\r\n\r\n #ifdef HEATMAP\r\n    attribute float a_heatmapWeight;\r\n    varying mediump float v_heatmapWeight;\r\n #endif // HEATMAP\r\n\r\n    // import the VV inputs and functions (they are #ifdefed, so if the proper #define is not set it will end-up being a no-op)\r\n    $iconVVUniformsVS\r\n    $iconVVFunctions\r\n\r\n    void main()\r\n    {\r\n      vec2 a_offset \x3d a_vertexOffsetAndTex.xy;\r\n      vec2 a_tex \x3d a_vertexOffsetAndTex.zw;\r\n      vec2 a_size \x3d a_sizeAndOutlineWidth.xy;\r\n\r\n      // default values (we need them for the variations to come)\r\n      float a_angle \x3d 0.0;\r\n      float delta_z \x3d 0.0;\r\n      float depth \x3d 0.0;\r\n      v_transparency \x3d 1.0;\r\n\r\n  #if defined(VV_SIZE_MIN_MAX_VALUE) || defined(VV_SIZE_SCALE_STOPS) || defined(VV_SIZE_FIELD_STOPS) || defined(VV_SIZE_UNIT_VALUE)\r\n\r\n  #ifdef VV_SIZE_MIN_MAX_VALUE\r\n      // vv size override the original symbol\'s size\r\n      vec2 size \x3d vec2(getVVMinMaxSize(a_vv.x));\r\n  #endif // VV_SIZE_MIN_MAX_VALUE\r\n\r\n  #ifdef VV_SIZE_SCALE_STOPS\r\n      vec2 size \x3d vec2(u_vvSizeScaleStopsValue);\r\n  #endif // VV_SIZE_SCALE_STOPS\r\n\r\n  #ifdef VV_SIZE_FIELD_STOPS\r\n      vec2 size \x3d vec2(getVVStopsSize(a_vv.x));\r\n  #endif // VV_SIZE_FIELD_STOPS\r\n\r\n  #ifdef VV_SIZE_UNIT_VALUE\r\n      vec2 size \x3d vec2(getVVUnitValue(a_vv.x));\r\n  #endif // VV_SIZE_UNIT_VALUE\r\n\r\n      vec2 offset \x3d C_OFFSET_PRECISION * a_offset * size;\r\n      v_size \x3d size;\r\n  #else\r\n  #ifdef HEATMAP\r\n      // reconstruct the kernel size\r\n      a_size \x3d 9.0 * a_size + 1.0;\r\n  #endif // HEATMAP\r\n\r\n      vec2 offset \x3d C_OFFSET_PRECISION * a_offset * a_size;\r\n      v_size \x3d a_size;\r\n  #endif // defined(VV_SIZE_MIN_MAX_VALUE) || defined(VV_SIZE_SCALE_STOPS) || defined(VV_SIZE_FIELD_STOPS) || defined(VV_SIZE_UNIT_VALUE)\r\n\r\n  #ifdef SDF\r\n    offset *\x3d 2.0;\r\n  #endif // SDF\r\n\r\n  #ifdef VV_ROTATION\r\n      gl_Position \x3d vec4(u_normalized_origin, depth, 0.0) + u_transformMatrix * vec4(a_pos, 0.0, 1.0) + u_extrudeMatrix * getVVRotation(a_vv.w) * vec4(offset, delta_z, 0.0);\r\n  #else\r\n      gl_Position \x3d vec4(u_normalized_origin, depth, 0.0) + u_transformMatrix * vec4(a_pos, 0.0, 1.0) + u_extrudeMatrix * vec4(offset, delta_z, 0.0);\r\n  #endif // VV_ROTATION\r\n\r\n  #ifdef VV_OPACITY\r\n      v_transparency \x3d getVVOpacity(a_vv.z);\r\n  #else\r\n      v_transparency \x3d u_opacity;\r\n  #endif // VV_OPACITY\r\n\r\n  #ifdef VV_COLOR\r\n      v_color \x3d getVVColor(a_vv.y);\r\n  #else\r\n      v_color \x3d a_color;\r\n  #endif // VV_COLOR\r\n\r\n      // output the texture coordinates and the transparency\r\n      v_tex \x3d a_tex / u_mosaicSize;\r\n\r\n #ifdef SDF\r\n      v_outlineColor \x3d a_outlineColor;\r\n      v_outlineWidth \x3d a_sizeAndOutlineWidth.z;\r\n #endif // SDF\r\n\r\n #ifdef ID\r\n      v_id \x3d a_id;\r\n #endif // ID\r\n\r\n #ifdef HEATMAP\r\n    v_heatmapWeight \x3d a_heatmapWeight;\r\n #endif // HEATMAP\r\n    }\r\n  ]]\x3e\r\n  \x3c/snippet\x3e\r\n\r\n  \x3csnippet name\x3d"iconFS"\x3e\r\n   \x3c![CDATA[\r\n    precision mediump float;\r\n\r\n    uniform lowp sampler2D u_texture;\r\n\r\n    varying lowp vec2 v_tex;\r\n    varying lowp float v_transparency;\r\n    varying mediump vec2 v_size;\r\n    varying lowp vec4 v_color;\r\n\r\n #ifdef SDF\r\n    varying lowp vec4 v_outlineColor;\r\n    varying mediump float v_outlineWidth;\r\n\r\n    // we need the conversion function from RGBA to float\r\n    $rgba2floatFunc\r\n #endif // SDF\r\n\r\n #ifdef ID\r\n    varying highp vec4 v_id;\r\n #endif // ID\r\n\r\n #ifdef HEATMAP\r\n    varying mediump float v_heatmapWeight;\r\n #endif // HEATMAP\r\n\r\n    const float softEdgeRatio \x3d 1.0; // use blur here if needed\r\n\r\n    void main()\r\n    {\r\n #ifdef SDF\r\n      lowp vec4 fillPixelColor \x3d v_color;\r\n\r\n      // calculate the distance from the edge [-0.5, 0.5]\r\n      float d \x3d 0.5 - rgba2float(texture2D(u_texture, v_tex));\r\n\r\n      // Work around loss of precision for \'d \x3d 0.0\'.\r\n      // \'0\' gets normalised to 0.5 * 256 \x3d 128 before float packing, but can only\r\n      // be stored in the texture as 128 / 255 \x3d 0.502.\r\n      // see: https://devtopia.esri.com/WebGIS/arcgis-js-api/issues/7058#issuecomment-603110\r\n      const float diff \x3d (128.0/255.0 - 0.5);\r\n\r\n      // adjust all values, not just those close to 0, to avoid discontinuities in\r\n      // the outlines of other shapes e.g. circles\r\n      d \x3d d - diff;\r\n\r\n      // the soft edge ratio is about 1.5 pixels allocated for the soft edge.\r\n      float size \x3d max(v_size.x, v_size.y);\r\n      float dist \x3d d * size * softEdgeRatio;\r\n\r\n      // set the fragment\'s transparency according to the distance from the edge\r\n      fillPixelColor *\x3d clamp(0.5 - dist, 0.0, 1.0);\r\n\r\n      // count for the outline\r\n      // therefore tint the entire icon area.\r\n      if (v_outlineWidth \x3e 0.25) {\r\n        lowp vec4 outlinePixelColor \x3d v_outlineColor;\r\n\r\n        // outlines can\'t be larger than the size of the symbol\r\n        float clampedOutlineSize \x3d min(v_outlineWidth, size);\r\n\r\n        outlinePixelColor *\x3d clamp(0.5 - abs(dist) + clampedOutlineSize * 0.5, 0.0, 1.0);\r\n\r\n        // finally combine the outline and the fill colors (outline draws on top of fill)\r\n        gl_FragColor \x3d v_transparency * ((1.0 - outlinePixelColor.a) * fillPixelColor + outlinePixelColor);\r\n      }\r\n      else {\r\n        gl_FragColor \x3d v_transparency * fillPixelColor;\r\n      }\r\n #else // not an SDF\r\n      lowp vec4 texColor \x3d texture2D(u_texture, v_tex);\r\n\r\n #ifdef HEATMAP\r\n      texColor.r *\x3d v_heatmapWeight;\r\n #endif // HEATMAP\r\n\r\n      gl_FragColor \x3d v_transparency * texColor;\r\n #endif // SDF\r\n\r\n #ifdef HIGHLIGHT\r\n      gl_FragColor.a \x3d step(1.0 / 255.0, gl_FragColor.a);\r\n #endif // HIGHLIGHT\r\n\r\n #ifdef ID\r\n      if (gl_FragColor.a \x3c 1.0 / 255.0) {\r\n        discard;\r\n      }\r\n      gl_FragColor \x3d v_id;\r\n #endif // ID\r\n    }\r\n   ]]\x3e\r\n  \x3c/snippet\x3e\r\n\x3c/snippets\x3e\r\n\r\n',
"url:esri/views/2d/engine/webgl/shaders/fillShaders.xml":'\x3c?xml version\x3d"1.0" encoding\x3d"UTF-8"?\x3e\r\n\x3c!--\r\n  // YF TODO: (doc)\r\n--\x3e\r\n\x3csnippets\x3e\r\n  \x3csnippet name\x3d"fillVVUniformsVS"\x3e\r\n    \x3c![CDATA[\r\n  #if defined(VV_COLOR)|| defined(VV_OPACITY)\r\n    attribute vec4 a_vv;\r\n  #endif // VV_COLOR || VV_OPACITY\r\n\r\n  #ifdef VV_COLOR\r\n    uniform float u_vvColorValues[8];\r\n    uniform vec4 u_vvColors[8];\r\n  #endif // VV_COLOR\r\n\r\n  #ifdef VV_OPACITY\r\n    uniform float u_vvOpacityValues[8];\r\n    uniform float u_vvOpacities[8];\r\n  #endif // VV_OPACITY\r\n\r\n    ]]\x3e\r\n  \x3c/snippet\x3e\r\n\r\n  \x3csnippet name\x3d"fillVVFunctions"\x3e\r\n    \x3c![CDATA[\r\n  #ifdef VV_OPACITY\r\n    const int VV_OPACITY_N \x3d 8;\r\n\r\n    float getVVOpacity(float opacityValue) {\r\n      if (opacityValue \x3c\x3d u_vvOpacityValues[0]) {\r\n        return u_vvOpacities[0];\r\n      }\r\n\r\n      for (int i \x3d 1; i \x3c VV_OPACITY_N; ++i) {\r\n        if (u_vvOpacityValues[i] \x3e\x3d opacityValue) {\r\n          float f \x3d (opacityValue - u_vvOpacityValues[i-1]) / (u_vvOpacityValues[i] - u_vvOpacityValues[i-1]);\r\n          return mix(u_vvOpacities[i-1], u_vvOpacities[i], f);\r\n        }\r\n      }\r\n\r\n      return u_vvOpacities[VV_OPACITY_N - 1];\r\n    }\r\n  #endif // VV_OPACITY\r\n\r\n  #ifdef VV_COLOR\r\n    const int VV_COLOR_N \x3d 8;\r\n\r\n    vec4 getVVColor(float colorValue) {\r\n      if (colorValue \x3c\x3d u_vvColorValues[0]) {\r\n        return u_vvColors[0];\r\n      }\r\n\r\n      for (int i \x3d 1; i \x3c VV_COLOR_N; ++i) {\r\n        if (u_vvColorValues[i] \x3e\x3d colorValue) {\r\n          float f \x3d (colorValue - u_vvColorValues[i-1]) / (u_vvColorValues[i] - u_vvColorValues[i-1]);\r\n          return mix(u_vvColors[i-1], u_vvColors[i], f);\r\n        }\r\n      }\r\n\r\n      return u_vvColors[VV_COLOR_N - 1];\r\n    }\r\n  #endif // VV_COLOR\r\n    ]]\x3e\r\n  \x3c/snippet\x3e\r\n\r\n  \x3csnippet name\x3d"fillVS"\x3e\r\n    \x3c![CDATA[\r\n      precision mediump float;\r\n\r\n      attribute vec2 a_pos;\r\n      attribute vec4 a_id; // since we need to render the Id as a color we need to break it into RGBA components. so just like a color, the Id is normalized.\r\n      attribute vec4 a_color;\r\n      attribute vec4 a_tlbr;\r\n      attribute vec4 a_aux;\r\n\r\n      uniform highp mat4 u_transformMatrix;\r\n      uniform highp vec2 u_normalized_origin;\r\n\r\n      varying lowp vec4 v_color;\r\n      varying lowp float v_opacity;\r\n\r\n      // import the VV inputs and functions (they are #ifdefed, so if the proper #define is not set it will end-up being a no-op)\r\n      $fillVVUniformsVS\r\n      $fillVVFunctions\r\n\r\n  #ifdef PATTERN\r\n    uniform mediump float u_zoomFactor;\r\n    uniform mediump vec2 u_mosaicSize;\r\n\r\n    varying mediump vec4 v_tlbr;\r\n    varying mediump vec2 v_tileTextureCoord;\r\n  #endif // PATTERN\r\n\r\n  #ifdef ID\r\n    varying highp vec4 v_id;\r\n  #endif // ID\r\n\r\n      void main()\r\n      {\r\n  #ifdef VV_OPACITY\r\n        v_opacity \x3d getVVOpacity(a_vv.y);\r\n  #else\r\n        v_opacity \x3d 1.0;\r\n  #endif\r\n\r\n    #ifdef VV_COLOR\r\n       v_color \x3d getVVColor(a_vv.x);\r\n  #else\r\n       v_color \x3d a_color;\r\n  #endif // VV_COLOR\r\n\r\n  #ifdef ID\r\n      v_id \x3d a_id;\r\n  #endif // ID\r\n\r\n  #ifdef PATTERN\r\n       // calculate the pattern matrix\r\n       mat3 patternMatrix \x3d mat3(1.0, 0.0, 0.0,\r\n                                 0.0, 1.0, 0.0,\r\n                                 0.0, 0.0, 1.0);\r\n       patternMatrix[0][0] \x3d 1.0 / (u_zoomFactor * a_aux.x);\r\n       patternMatrix[1][1] \x3d 1.0 / (u_zoomFactor * a_aux.y);\r\n\r\n       // calculate the texture coordinates of the current vertex. It will of course get interpolated.\r\n       // The pattern matrix is a 3x3 scale matrix which \'tiles\' the texture inside the tile, translating from\r\n       // tile coordinates to texture coordinates.\r\n       v_tileTextureCoord \x3d (patternMatrix * vec3(a_pos, 1.0)).xy;\r\n       v_tlbr \x3d vec4(a_tlbr.x / u_mosaicSize.x, a_tlbr.y / u_mosaicSize.y, a_tlbr.z / u_mosaicSize.x, a_tlbr.w / u_mosaicSize.y);\r\n  #endif // PATTERN\r\n\r\n        gl_Position \x3d vec4(u_normalized_origin, 0.0, 0.0) + u_transformMatrix * vec4(a_pos, 0, 1.0);\r\n      }\r\n    ]]\x3e\r\n  \x3c/snippet\x3e\r\n\r\n  \x3csnippet name\x3d"fillFS"\x3e\r\n    \x3c![CDATA[\r\n      precision lowp float;\r\n      uniform lowp float u_opacity;\r\n\r\n  #ifdef PATTERN\r\n      uniform lowp sampler2D u_texture;\r\n\r\n      varying mediump vec4 v_tlbr;\r\n      varying mediump vec2 v_tileTextureCoord;\r\n  #endif // PATTERN\r\n\r\n  #ifdef ID\r\n    varying highp vec4 v_id;\r\n  #endif // ID\r\n\r\n      varying lowp vec4 v_color;\r\n      varying lowp float v_opacity;\r\n\r\n      void main()\r\n      {\r\n  #ifdef PATTERN\r\n         // normalize the calculated texture coordinate such that it fits in the range of 0 to 1.\r\n         mediump vec2 normalizedTextureCoord \x3d mod(v_tileTextureCoord, 1.0);\r\n         // interpolate the image coordinate between the top-left and the bottom right to get the actual position to sample.\r\n         // after normalizing the position, we get a value ranging between 0 and 1 which refers to the entire texture, however\r\n         // we need to only sample from area that has our sprite in the mosaic.\r\n         mediump vec2 samplePos \x3d mix(v_tlbr.xy, v_tlbr.zw, normalizedTextureCoord);\r\n         // sample the sprite mosaic\r\n         lowp vec4 color \x3d texture2D(u_texture, samplePos);\r\n         gl_FragColor \x3d u_opacity * v_opacity * v_color * color;\r\n  #else\r\n        gl_FragColor \x3d u_opacity * v_opacity * v_color;\r\n  #endif // PATTERN\r\n\r\n  #ifdef HIGHLIGHT\r\n        gl_FragColor.a \x3d step(1.0 / 255.0, gl_FragColor.a);\r\n  #endif // HIGHLIGHT\r\n\r\n  #ifdef ID\r\n      if (gl_FragColor.a \x3c 1.0 / 255.0) {\r\n        discard;\r\n      }\r\n      gl_FragColor \x3d v_id;\r\n  #endif // ID\r\n      }\r\n    ]]\x3e\r\n  \x3c/snippet\x3e\r\n\x3c/snippets\x3e\r\n',
"url:esri/views/2d/engine/webgl/shaders/lineShaders.xml":'\x3c?xml version\x3d"1.0" encoding\x3d"UTF-8"?\x3e\r\n\x3c!--\r\n  // YF TODO: (doc)\r\n--\x3e\r\n\x3csnippets\x3e\r\n  \x3csnippet name\x3d"lineVVUniformsVS"\x3e\r\n    \x3c![CDATA[\r\n  #if defined(VV_COLOR) || defined(VV_SIZE_MIN_MAX_VALUE) || defined(VV_SIZE_SCALE_STOPS) || defined(VV_SIZE_FIELD_STOPS) || defined(VV_SIZE_UNIT_VALUE) || defined(VV_OPACITY)\r\n    attribute vec3 a_vv;\r\n  #endif // VV_COLOR || VV_SIZE_MIN_MAX_VALUE || VV_SIZE_SCALE_STOPS || VV_SIZE_FIELD_STOPS || VV_SIZE_UNIT_VALUE || VV_OPACITY\r\n\r\n  #ifdef VV_COLOR\r\n    uniform float u_vvColorValues[8];\r\n    uniform vec4 u_vvColors[8];\r\n  #endif // VV_COLOR\r\n\r\n  #ifdef VV_SIZE_MIN_MAX_VALUE\r\n    uniform vec4 u_vvSizeMinMaxValue;\r\n  #endif // VV_SIZE_MIN_MAX_VALUE\r\n\r\n  #ifdef VV_SIZE_SCALE_STOPS\r\n    uniform float u_vvSizeScaleStopsValue;\r\n  #endif\r\n\r\n  #ifdef VV_SIZE_FIELD_STOPS\r\n    uniform float u_vvSizeFieldStopsValues[6];\r\n    uniform float u_vvSizeFieldStopsSizes[6];\r\n  #endif // VV_SIZE_FIELD_STOPS\r\n\r\n  #ifdef VV_SIZE_UNIT_VALUE\r\n    uniform float u_vvSizeUnitValueWorldToPixelsRatio;\r\n  #endif // VV_SIZE_UNIT_VALUE\r\n\r\n  #ifdef VV_OPACITY\r\n    uniform float u_vvOpacityValues[8];\r\n    uniform float u_vvOpacities[8];\r\n  #endif // VV_OPACITY\r\n    ]]\x3e\r\n  \x3c/snippet\x3e\r\n\r\n  \x3csnippet name\x3d"lineVVFunctions"\x3e\r\n    \x3c![CDATA[\r\n  #ifdef VV_SIZE_MIN_MAX_VALUE\r\n    float getVVMinMaxSize(float sizeValue) {\r\n      float f \x3d (sizeValue - u_vvSizeMinMaxValue.x) / (u_vvSizeMinMaxValue.y - u_vvSizeMinMaxValue.x);\r\n      return clamp(mix(u_vvSizeMinMaxValue.z, u_vvSizeMinMaxValue.w, f), u_vvSizeMinMaxValue.z, u_vvSizeMinMaxValue.w);\r\n    }\r\n  #endif // VV_SIZE_MIN_MAX_VALUE\r\n\r\n  #ifdef VV_SIZE_FIELD_STOPS\r\n    const int VV_SIZE_N \x3d 6;\r\n    float getVVStopsSize(float sizeValue) {\r\n      if (sizeValue \x3c\x3d u_vvSizeFieldStopsValues[0]) {\r\n        return u_vvSizeFieldStopsSizes[0];\r\n      }\r\n\r\n      for (int i \x3d 1; i \x3c VV_SIZE_N; ++i) {\r\n        if (u_vvSizeFieldStopsValues[i] \x3e\x3d sizeValue) {\r\n          float f \x3d (sizeValue - u_vvSizeFieldStopsValues[i-1]) / (u_vvSizeFieldStopsValues[i] - u_vvSizeFieldStopsValues[i-1]);\r\n          return mix(u_vvSizeFieldStopsSizes[i-1], u_vvSizeFieldStopsSizes[i], f);\r\n        }\r\n      }\r\n\r\n      return u_vvSizeFieldStopsSizes[VV_SIZE_N - 1];\r\n    }\r\n  #endif // VV_SIZE_FIELD_STOPS\r\n\r\n  #ifdef VV_SIZE_UNIT_VALUE\r\n    float getVVUnitValue(float sizeValue) {\r\n      return u_vvSizeUnitValueWorldToPixelsRatio * sizeValue;\r\n    }\r\n  #endif // VV_SIZE_UNIT_VALUE\r\n\r\n  #ifdef VV_OPACITY\r\n    const int VV_OPACITY_N \x3d 8;\r\n    float getVVOpacity(float opacityValue) {\r\n      if (opacityValue \x3c\x3d u_vvOpacityValues[0]) {\r\n        return u_vvOpacities[0];\r\n      }\r\n\r\n      for (int i \x3d 1; i \x3c VV_OPACITY_N; ++i) {\r\n        if (u_vvOpacityValues[i] \x3e\x3d opacityValue) {\r\n          float f \x3d (opacityValue - u_vvOpacityValues[i-1]) / (u_vvOpacityValues[i] - u_vvOpacityValues[i-1]);\r\n          return mix(u_vvOpacities[i-1], u_vvOpacities[i], f);\r\n        }\r\n      }\r\n\r\n      return u_vvOpacities[VV_OPACITY_N - 1];\r\n    }\r\n  #endif // VV_OPACITY\r\n\r\n  #ifdef VV_COLOR\r\n    const int VV_COLOR_N \x3d 8;\r\n\r\n    vec4 getVVColor(float colorValue) {\r\n      if (colorValue \x3c\x3d u_vvColorValues[0]) {\r\n        return u_vvColors[0];\r\n      }\r\n\r\n      for (int i \x3d 1; i \x3c VV_COLOR_N; ++i) {\r\n        if (u_vvColorValues[i] \x3e\x3d colorValue) {\r\n          float f \x3d (colorValue - u_vvColorValues[i-1]) / (u_vvColorValues[i] - u_vvColorValues[i-1]);\r\n          return mix(u_vvColors[i-1], u_vvColors[i], f);\r\n        }\r\n      }\r\n\r\n      return u_vvColors[VV_COLOR_N - 1];\r\n    }\r\n  #endif // VV_COLOR\r\n    ]]\x3e\r\n  \x3c/snippet\x3e\r\n\r\n  \x3csnippet name\x3d"lineVS"\x3e\r\n    \x3c![CDATA[\r\n     precision mediump float;\r\n\r\n     attribute vec2 a_pos;\r\n     attribute vec4 a_id;\r\n     attribute vec4 a_color;\r\n     attribute vec4 a_offsetAndNormal;\r\n     attribute vec2 a_accumulatedDistanceAndHalfWidth;\r\n     attribute vec4 a_tlbr;\r\n     attribute vec4 a_segmentDirection;\r\n\r\n     // the relative transformation of a vertex given in tile coordinates to a relative normalized coordinate\r\n     // relative to the tile\'s upper left corner\r\n     // the extrusion vector.\r\n     uniform highp mat4 u_transformMatrix;\r\n     // the extrude matrix which is responsible for the \'anti-zoom\' as well as the rotation\r\n     uniform highp mat4 u_extrudeMatrix;\r\n     // u_normalized_origin is the tile\'s upper left corner given in normalized coordinates\r\n     uniform highp vec2 u_normalized_origin;\r\n     uniform lowp float u_opacity; // the layer\'s opacity\r\n     uniform mediump float u_tileCoordRatio;\r\n     uniform mediump float u_antialiasing;\r\n\r\n     // the interpolated normal to the line. the information is packed into the two LSBs of the vertex coordinate\r\n     varying mediump vec2 v_normal;\r\n     // the accumulated distance along the line. We need this information in order to render the dashes.\r\n     varying highp float v_accumulatedDistance;\r\n     varying mediump float v_lineHalfWidth;\r\n     varying lowp vec4 v_color;\r\n     varying lowp float v_transparency;\r\n\r\n#ifdef SDF\r\n     const float scale \x3d 1.0 / 15.5;\r\n#else\r\n     const float scale \x3d 1.0 / 31.0;\r\n#endif\r\n\r\n\r\n#ifdef PATTERN\r\n     uniform mediump vec2 u_mosaicSize;\r\n\r\n     varying mediump vec4 v_tlbr; // normalized pattern coordinates [0, 1]\r\n     varying mediump vec2 v_patternSize;\r\n#endif // PATTERN\r\n\r\n#ifdef ID\r\n     varying highp vec4 v_id;\r\n#endif // ID\r\n\r\n     // import the VV inputs and functions (they are #ifdefed, so if the proper #define is not set it will end-up being a no-op)\r\n     $lineVVUniformsVS\r\n     $lineVVFunctions\r\n\r\n     void main()\r\n     {\r\n     // size VV block\r\n#if defined(VV_SIZE_MIN_MAX_VALUE) || defined(VV_SIZE_SCALE_STOPS) || defined(VV_SIZE_FIELD_STOPS) || defined(VV_SIZE_UNIT_VALUE)\r\n\r\n#ifdef VV_SIZE_MIN_MAX_VALUE\r\n       mediump float lineHalfWidth \x3d 0.5 * getVVMinMaxSize(a_vv.x);\r\n#endif // VV_SIZE_MIN_MAX_VALUE\r\n\r\n#ifdef VV_SIZE_SCALE_STOPS\r\n       mediump float lineHalfWidth \x3d 0.5 * u_vvSizeScaleStopsValue;\r\n#endif // VV_SIZE_SCALE_STOPS\r\n\r\n#ifdef VV_SIZE_FIELD_STOPS\r\n        mediump float lineHalfWidth \x3d 0.5 * getVVStopsSize(a_vv.x);\r\n#endif // VV_SIZE_FIELD_STOPS\r\n\r\n#ifdef VV_SIZE_UNIT_VALUE\r\n  mediump float lineHalfWidth \x3d 0.5 * getVVUnitValue(a_vv.x);\r\n#endif // VV_SIZE_UNIT_VALUE\r\n\r\n#else // no VV\r\n       mediump float lineHalfWidth \x3d a_accumulatedDistanceAndHalfWidth.y * scale;\r\n#endif // defined(VV_SIZE_MIN_MAX_VALUE) || defined(VV_SIZE_SCALE_STOPS) || defined(VV_SIZE_FIELD_STOPS) || defined(VV_SIZE_UNIT_VALUE)\r\n\r\n#ifdef HIGHLIGHT\r\n       // TODO: Decide what to do here. Do we want the\r\n       // highlight of line features to be slighly larger\r\n       // than the feature itself, when the line is too\r\n       // thin?\r\n       // lineHalfWidth \x3d max(lineHalfWidth, 3.0);\r\n#endif\r\n\r\n#ifdef VV_OPACITY\r\n      v_transparency \x3d u_opacity * getVVOpacity(a_vv.z);\r\n#else\r\n    v_transparency \x3d u_opacity;\r\n#endif // VV_OPACITY\r\n\r\n #ifdef VV_COLOR\r\n    v_color \x3d getVVColor(a_vv.y);\r\n#else\r\n    v_color \x3d a_color;\r\n#endif // VV_COLOR\r\n\r\n       // make sure to clip the vertices in case that the width of the line is 0 (or negative)\r\n       float z \x3d 2.0 * step(lineHalfWidth, 0.0);\r\n\r\n       // add the antialiasing factor to the line width. Limit the line width to 0.5 pixels (otherwise it does not look good)\r\n       lineHalfWidth \x3d max(lineHalfWidth, 0.5) + u_antialiasing;\r\n\r\n       v_lineHalfWidth \x3d lineHalfWidth;\r\n\r\n       // calculate the relative distance from the centerline to the edge of the line. Since offset is given in integers (for the\r\n       // sake of using less attribute memory, we need to scale it back to the original range of ~ 0: 1)\r\n       mediump vec2 dist \x3d lineHalfWidth * a_offsetAndNormal.xy * scale;\r\n\r\n       // transform the vertex\r\n       gl_Position \x3d vec4(u_normalized_origin, 0.0, 0.0) + u_transformMatrix * vec4(a_pos, z, 1.0) + u_extrudeMatrix * vec4(dist, 0.0, 0.0);\r\n\r\n       // the accumulated distance will be used to calculate the dashes (or the no-data...)\r\n       v_accumulatedDistance \x3d a_accumulatedDistanceAndHalfWidth.x + dot(scale * a_segmentDirection.xy, dist / u_tileCoordRatio);\r\n       v_normal \x3d a_offsetAndNormal.zw * scale;\r\n\r\n#ifdef PATTERN\r\n      v_tlbr \x3d vec4(a_tlbr.x / u_mosaicSize.x, a_tlbr.y / u_mosaicSize.y, a_tlbr.z / u_mosaicSize.x, a_tlbr.w / u_mosaicSize.y);\r\n      v_patternSize \x3d vec2(a_tlbr.z - a_tlbr.x, a_tlbr.w - a_tlbr.y);\r\n#endif // PATTERN\r\n\r\n#ifdef ID\r\n      v_id \x3d a_id;\r\n#endif // ID\r\n     }\r\n    ]]\x3e\r\n  \x3c/snippet\x3e\r\n\r\n  \x3csnippet name\x3d"lineFS"\x3e\r\n    \x3c![CDATA[\r\n       precision lowp float;\r\n\r\n       uniform lowp float u_blur;\r\n       uniform mediump float u_antialiasing;\r\n\r\n       varying mediump vec2 v_normal;\r\n       varying highp float v_accumulatedDistance;\r\n       varying mediump float v_lineHalfWidth;\r\n       varying lowp vec4 v_color;\r\n       varying lowp float v_transparency;\r\n\r\n#if defined(PATTERN) || defined(SDF)\r\n      uniform sampler2D u_texture;\r\n\r\n      varying mediump vec4 v_tlbr; // normalized pattern coordinates [0, 1]\r\n      varying mediump vec2 v_patternSize;\r\n      uniform mediump float u_zoomFactor;\r\n      uniform mediump float u_tileCoordRatio;\r\n#endif // PATTERN\r\n\r\n#ifdef SDF\r\n      const float sdfPatternHalfWidth \x3d 15.5; // YF: assumed that the width will be set to 32\r\n\r\n      float rgba2float(vec4 rgba) {\r\n        return dot(rgba,  vec4(1.0/16777216.0, 1.0/65535.0, 1.0/256.0, 1.0));\r\n      }\r\n#endif // SDF\r\n\r\n#ifdef ID\r\n     varying highp vec4 v_id;\r\n#endif // ID\r\n\r\n       void main()\r\n       {\r\n          // add an antialiasing factor as long as we are under two pixels\r\n          mediump float antialiasingFactor \x3d u_antialiasing * step(v_lineHalfWidth, 2.0);\r\n\r\n         // dist represent the distance of the fragment from the line. 1.0 or -1.0 will be the values on the edge of the line,\r\n         // and any value in between will be inside the line (the sign represent the direction - right or left).\r\n         // since u_linewidth.s (half line width) is represented in pixels, dist is also given in pixels\r\n         mediump float fragDist \x3d length(v_normal) * v_lineHalfWidth;\r\n\r\n         // calculate the alpha given the difference between the line-width and the distance of the fragment from the center-line.\r\n         lowp float alpha \x3d clamp((v_lineHalfWidth - fragDist - 0.5 * antialiasingFactor) / (u_blur + 2.0 * antialiasingFactor), 0.0, 1.0);\r\n\r\n#if defined(SDF)\r\n         mediump float lineWidthRatio \x3d v_lineHalfWidth / sdfPatternHalfWidth;\r\n         mediump float relativeTexX \x3d mod((u_zoomFactor * u_tileCoordRatio * v_accumulatedDistance + v_normal.x * v_lineHalfWidth) / (lineWidthRatio * v_patternSize.x), 1.0);\r\n         mediump float relativeTexY \x3d 0.5 + 0.5 * v_normal.y;\r\n\r\n          // claculate the actual texture coordinates by interpolating between the TL/BR pattern coordinates\r\n         mediump vec2 texCoord \x3d mix(v_tlbr.xy, v_tlbr.zw, vec2(relativeTexX, relativeTexY));\r\n\r\n         // calculate the distance from the edge [-0.5, 0.5]\r\n         mediump float d \x3d rgba2float(texture2D(u_texture, texCoord)) - 0.5;\r\n\r\n         // the distance is a proportional to the line width\r\n         float dist \x3d d * v_lineHalfWidth;\r\n\r\n         lowp vec4 fillPixelColor \x3d v_transparency * alpha * clamp(0.5 - dist, 0.0, 1.0) * v_color;\r\n        gl_FragColor \x3d fillPixelColor;\r\n#elif defined(PATTERN)\r\n         // we need to calculate the relative portion of the line texture along the line given the accumulated distance along the line\r\n         // The computed value should is anumber btween 0 and 1 which will later be used to interpolate btween the BR and TL values\r\n         mediump float relativeTexX \x3d mod((u_zoomFactor * u_tileCoordRatio * v_accumulatedDistance + v_normal.x * v_lineHalfWidth) / v_patternSize.x, 1.0);\r\n\r\n         // in order to calculate the texture coordinates prependicular to the line (Y axis), we use the interpolated normal values\r\n         // which range from -1.0 to 1.0. On the line\'s centerline, the value of the interpolated normal is 0.0, however the relative\r\n         // texture value shpould be 0.5 (given that at the bottom of the line, the texture coordinate must be equal to 0.0)\r\n         // (TL) ---------------------------      --\x3e left edge of line. Interpolatedf normal is 1.0\r\n         //              | -\x3e line-width / 2\r\n         //      - - - - - - - - - - - - - -\r\n         //              | -\x3e line-width / 2\r\n         //      ---------------------------- (BR)--\x3e right edge of line. Interpolatedf normal is -1.0\r\n\r\n         mediump float relativeTexY \x3d 0.5 + (v_normal.y * v_lineHalfWidth / v_patternSize.y);\r\n\r\n         // claculate the actual texture coordinates by interpolating between the TL/BR pattern coordinates\r\n         mediump vec2 texCoord \x3d mix(v_tlbr.xy, v_tlbr.zw, vec2(relativeTexX, relativeTexY));\r\n\r\n         // get the color from the texture\r\n         lowp vec4 color \x3d texture2D(u_texture, texCoord);\r\n\r\n         gl_FragColor \x3d v_transparency * alpha * v_color * color;\r\n#else // solid line (no texture, no pattern)\r\n         // output the fragment color\r\n         gl_FragColor \x3d v_transparency * alpha * v_color;\r\n#endif // SDF\r\n\r\n#ifdef HIGHLIGHT\r\n         gl_FragColor.a \x3d step(1.0 / 255.0, gl_FragColor.a);\r\n#endif // HIGHLIGHT\r\n\r\n #ifdef ID\r\n         if (gl_FragColor.a \x3c 1.0 / 255.0) {\r\n           discard;\r\n         }\r\n         gl_FragColor \x3d v_id;\r\n #endif // ID\r\n       }\r\n    ]]\x3e\r\n  \x3c/snippet\x3e\r\n\r\n\x3c/snippets\x3e\r\n',
"url:esri/views/2d/engine/webgl/shaders/hlShaders.xml":'\x3c?xml version\x3d"1.0" encoding\x3d"UTF-8"?\x3e\r\n\x3c!--\r\n  Highlight generation and rendering shaders.\r\n\r\n  These shader sources are loaded by hlShaderSnippets.ts which in turn\r\n  is used by HighlightRenderer to instantiate the programs needed for\r\n  generating and rendering the highlights.\r\n\r\n  These shaders are intended to be used with full screen quads.\r\n--\x3e\r\n\x3csnippets\x3e\r\n  \x3c!--\r\n    Vertex shader: texturedVS\r\n\r\n    Identity vertex shader that outputs an untransformed 2-D vertex\r\n    and passes its texture coordinates unchanged to the interpolator.\r\n  --\x3e\r\n  \x3csnippet name\x3d"texturedVS"\x3e\r\n    \x3c![CDATA[\r\n    // Vertex position.\r\n    attribute mediump vec2 a_position;\r\n\r\n    // Texture coordinates.\r\n    attribute mediump vec2 a_texcoord;\r\n\r\n    // Texture coordinates to be interpolated.\r\n    varying mediump vec2 v_texcoord;\r\n\r\n    void main(void) {\r\n      // Pass the position unchanged.\r\n      gl_Position \x3d vec4(a_position, 0.0, 1.0);\r\n\r\n      // Pass the texture coordinates unchanged.\r\n      v_texcoord \x3d a_texcoord;\r\n    }\r\n    ]]\x3e\r\n  \x3c/snippet\x3e\r\n\r\n  \x3c!--\r\n    Fragment shader: blurFS\r\n\r\n    A gaussian blur shader. It blurs the alpha channel of its input\r\n    according to 4 different sigma and stores the results into the\r\n    four channel of the target framebuffer.\r\n\r\n    It is intended to be called twice; the first time to perform an\r\n    horizontal blur, and a second time to perform a vertical blur.\r\n\r\n    This shader is used to turn the highlight mask into a highlight\r\n    map. The highlight map is an approximation of the signed distance\r\n    field of the mask.\r\n  --\x3e\r\n  \x3csnippet name\x3d"blurFS"\x3e\r\n    \x3c![CDATA[\r\n    // Interpolated texture coordinates.\r\n    varying mediump vec2 v_texcoord;\r\n\r\n    // Blur direction information. There are two possible\r\n    // configurations that the host code can use.\r\n    //  - [1, 0, 1/WIDTH, 0] Used when blurring horizontally. In this\r\n    //    case u_direction[0] \x3d 1 is expressed in pixel and is fed to\r\n    //    the gauss function to produce the value of the gaussian weight\r\n    //    for that pixel, while u_direction[2] \x3d 1/WIDTH is in texel units\r\n    //    and is used to sample the right texel from the texture map.\r\n    //  - [0, 1, 0, 1/HEIGHT] Used when blurring vertically. In this\r\n    //    case u_direction[1] \x3d 1 is expressed in pixel and is fed to\r\n    //    the gauss function to produce the value of the gaussian weight\r\n    //    for that pixel, while u_direction[3] \x3d 1/HEIGHT is in texel units\r\n    //    and is used to sample the right texel from the texture map.\r\n    uniform mediump vec4 u_direction;\r\n\r\n    // Source to destination channel selection matrix.\r\n    uniform mediump mat4 u_channelSelector;\r\n\r\n    // The highlight map is obtained by blurring the alpha channel of the highlight\r\n    // mask accroding to these 4 values of the gaussian\'s sigma parameter.\r\n    uniform mediump vec4 u_sigmas;\r\n\r\n    // This is the highlight mask if we have not blurred horizontally yet, otherwise\r\n    // it is the horizontally blurred highlight map and blurring it one more time\r\n    // vertically will complete the process.\r\n    uniform sampler2D u_texture;\r\n\r\n    // The gaussian kernel. Note that it lacks the normalization constant, because\r\n    // we want to store it unnormalized in the highlight map (i.e. having a peak\r\n    // value of 1). Note also that we are using the SIMD (single instruction, multiple\r\n    // data) capabilities of the GPU to compute four different gaussian kernels, one\r\n    // for each sigma.\r\n    mediump vec4 gauss(mediump vec2 dir) {\r\n      return exp(-dot(dir, dir) / (2.0 * u_sigmas * u_sigmas));\r\n    }\r\n\r\n    mediump vec4 selectChannel(mediump vec4 sample) {\r\n      return u_channelSelector * sample;\r\n    }\r\n\r\n    // Sample the input texture and accumulated its gaussian weighted value and the\r\n    // total weight.\r\n    void accumGauss(mediump float i, inout mediump vec4 tot, inout mediump vec4 weight) {\r\n      // Computes the gaussian weights, one for each sigma.\r\n      // Note that u_direction.xy is [1, 0] when blurring horizontally and [0, 1] when blurring vertically.\r\n      mediump vec4 w \x3d gauss(i * u_direction.xy);\r\n\r\n      // Accumumates the values.\r\n      // Note that u_direction.xy is [1/WIDTH, 0] when blurring horizontally and [0, 1/HEIGHT] when blurring vertically.\r\n      tot +\x3d selectChannel(texture2D(u_texture, v_texcoord + i * u_direction.zw)) * w;\r\n\r\n      // Accumulates the weights.\r\n      weight +\x3d w;\r\n    }\r\n\r\n    void main(void) {\r\n      // Initialize accumulated values and weights to zero.\r\n      mediump vec4 tot \x3d vec4(0.0, 0.0, 0.0, 0.0);\r\n      mediump vec4 weight \x3d vec4(0.0, 0.0, 0.0, 0.0);\r\n\r\n      // Accumulates enough samples. These will be taken\r\n      // horizontally or vertically depending on the value\r\n      // of u_direction.\r\n      accumGauss(-5.0, tot, weight);\r\n      accumGauss(-4.0, tot, weight);\r\n      accumGauss(-3.0, tot, weight);\r\n      accumGauss(-2.0, tot, weight);\r\n      accumGauss(-1.0, tot, weight);\r\n      accumGauss(0.0, tot, weight);\r\n      accumGauss(1.0, tot, weight);\r\n      accumGauss(2.0, tot, weight);\r\n      accumGauss(3.0, tot, weight);\r\n      accumGauss(4.0, tot, weight);\r\n      accumGauss(5.0, tot, weight);\r\n\r\n      // Compute blurred values.\r\n      mediump vec4 rgba \x3d tot / weight;\r\n\r\n      // Return the values. Note that each channel will contain\r\n      // the result of a different blur operation, one for each\r\n      // of the four chosen sigma.\r\n      gl_FragColor \x3d vec4(rgba);\r\n    }\r\n    ]]\x3e\r\n  \x3c/snippet\x3e\r\n\r\n  \x3c!--\r\n    Fragment shader: highlightFS\r\n\r\n    Takes as input the highlight map, estimated the signed distance field,\r\n    and shades the fragments according to their estimated distance from the\r\n    edge of the highlighted feature.\r\n\r\n    A shade texture is used to turn distance values into colors; the shade\r\n    texture is basically a color gradient and is recomputed on the host\r\n    every time that the user alters the highlight options.\r\n  --\x3e\r\n  \x3csnippet name\x3d"highlightFS"\x3e\r\n    \x3c![CDATA[\r\n    // Interpolated texture coordinates.\r\n    varying mediump vec2 v_texcoord;\r\n\r\n    // The highlight map. Each channel is a blurred\r\n    // version of the alpha channel of the highlight mask.\r\n    //  - Channel 0 (red) corresponds to a gaussian blur with sigma \x3d u_sigmas[0];\r\n    //  - Channel 1 (green) corresponds to a gaussian blur with sigma \x3d u_sigmas[1];\r\n    //  - Channel 2 (blue) corresponds to a gaussian blur with sigma \x3d u_sigmas[2];\r\n    //  - Channel 3 (alpha) corresponds to a gaussian blur with sigma \x3d u_sigmas[3];\r\n    // As of today, only channel 3 is used for distance estimation.\r\n    // But the availability of different amounts of blur leaves the\r\n    // door open to multi-scale approaches.\r\n    uniform sampler2D u_texture;\r\n\r\n    // The highlight map was obtained by blurring the alpha channel of the highlight\r\n    // mask accroding to these 4 values of the gaussian\'s sigma parameter.\r\n    uniform mediump vec4 u_sigmas;\r\n\r\n    // A 1-D texture used to shade the highlight.\r\n    uniform sampler2D u_shade;\r\n\r\n    // The 1-D shade texture is spreaded between u_minMaxDistance[0] and u_minMaxDistance[1].\r\n    uniform mediump vec2 u_minMaxDistance;\r\n\r\n    // Signed distance estimation.\r\n    mediump float distance() {\r\n      // Use the largest sigma and the corresponding distance value stored in the\r\n      // last channel of the highlight map.\r\n      mediump float sigma \x3d u_sigmas[3];\r\n      mediump float y \x3d texture2D(u_texture, v_texcoord)[3];\r\n\r\n      // Estimates the distance by linearization and local inversion around\r\n      // the inflection point. The inflection point is in x \x3d 0.\r\n      const mediump float y0 \x3d 0.5;                           // Value of the convolution at the inflection point.\r\n      mediump float m0 \x3d 1.0 / (sqrt(2.0 * 3.1415) * sigma);  // Slope of the convolution at the inflection point.\r\n      mediump float d \x3d (y - y0) / m0;                        // Inversion of a local linearization.\r\n\r\n      // Return the estimated distance.\r\n      return d;\r\n    }\r\n\r\n    // Shading based on estimated distance.\r\n    mediump vec4 shade(mediump float d) {\r\n      // Maps the sampled distance from the [A, D] range (see HighlightRenderer::setHighlightOptions) to [0, 1].\r\n      mediump float mappedDistance \x3d (d - u_minMaxDistance.x) / (u_minMaxDistance.y - u_minMaxDistance.x);\r\n\r\n      // Force to [0, 1]; it should not be necessary because the shade texture uses the CLAMP address mode, so\r\n      // this should happen anyway internally to the sampler, but in practice it is needed to avoid weird\r\n      // banding artifacts.\r\n      // We don\'t really know if we need this or not.\r\n      mappedDistance \x3d clamp(mappedDistance, 0.0, 1.0);\r\n\r\n      // Sample the 1-D shade texture on its center line (i.e. on t\x3d0.5).\r\n      return texture2D(u_shade, vec2(mappedDistance, 0.5));\r\n    }\r\n\r\n    void main(void) {\r\n      // Estimate the distance.\r\n      mediump float d \x3d distance();\r\n\r\n      // Shade the distance.\r\n      gl_FragColor \x3d shade(d);\r\n    }\r\n    ]]\x3e\r\n  \x3c/snippet\x3e\r\n\x3c/snippets\x3e\r\n',
"url:esri/views/2d/engine/webgl/shaders/heatmap.vs.glsl":"attribute vec2 a_pos;\r\nattribute vec2 a_tex;\r\n\r\nuniform mediump vec2 u_minmax;\r\n\r\nvarying mediump vec2 v_uv;\r\nvarying mediump float v_slope;\r\n\r\nvoid main(void) {\r\n  gl_Position \x3d vec4(a_pos, 0.0, 1.0);\r\n  v_uv \x3d a_tex;\r\n  v_slope \x3d 1.0 / (u_minmax.y - u_minmax.x);\r\n}\r\n","url:esri/views/2d/engine/webgl/shaders/heatmap.fs.glsl":"\tprecision mediump float;\r\n\r\n\tuniform lowp sampler2D u_texture;\r\n\tuniform lowp float u_opacity;\r\n\tuniform mediump vec2 u_minmax;\r\n\tuniform lowp sampler2D u_gradient;\r\n\r\n\tvarying mediump vec2 v_uv;\r\n  varying mediump float v_slope;\r\n\r\n\tvec4 getColor(float intensity) {\r\n\t  float normalizedIntensity \x3d clamp((intensity - u_minmax.x) * v_slope, 0.0, 1.0);\r\n\r\n\t\treturn texture2D(u_gradient, vec2(0.5, normalizedIntensity));\r\n  }\r\n\r\n\tvoid main() {\r\n\t// sample the intnsity value\r\n\t\tlowp vec4 color \x3d texture2D(u_texture, v_uv);\r\n\r\n    // interpolate the color from the ramp using the intensity value\r\n\t\tgl_FragColor \x3d getColor(color.r) *  u_opacity;\r\n\t}\r\n",
"*now":function(A){A(['dojo/i18n!*preload*esri/views/nls/MapView*["ar","ca","cs","da","de","el","en-gb","en-us","es-es","fi-fi","fr-fr","he-il","hu","it-it","ja-jp","ko-kr","nl-nl","nb","pl","pt-br","pt-pt","ru","sk","sl","sv","th","tr","zh-tw","zh-cn","ROOT"]'])},"*noref":1}});
define("require exports ../core/tsSupport/declareExtendsHelper ../core/tsSupport/decorateHelper dojo/promise/all ../core/accessorSupport/decorators ../core/HandleRegistry ../core/promiseUtils ./MapViewBase ./DOMContainer ../geometry/ScreenPoint ./ui/2d/DefaultUI2D ./2d/engine/Stage ./2d/layers/support/GraphicsView2D ./2d/input/MapViewInputManager ./2d/navigation/MapViewNavigation ./2d/support/HighlightOptions ./BreakpointsOwner ./support/screenshotUtils".split(" "),function(A,t,f,a,d,h,p,m,l,q,r,
v,x,y,C,E,D,F,H){return function(l){function q(a){a=l.call(this,a)||this;a._graphicsView=null;a._mapViewHandles=new p;a._stage=null;a.highlightOptions=new D;a.inputManager=new C({view:a});a.navigation=null;a.ui=null;a.rendering=!1;return a}f(q,l);Object.defineProperty(q.prototype,"interacting",{get:function(){return this.navigation&&this.navigation.interacting||!1},enumerable:!0,configurable:!0});q.prototype.hitTest=function(a,f){if(!this._setup)return null;var h;h=null!=a&&a.x?a:new r({x:a,y:f});
var l=this.toMap(h);a=[this._graphicsView];a.push.apply(a,this.allLayerViews.toArray().reverse());return d(a.map(function(a){return a&&a.hitTest?a.hitTest(h.x,h.y):null})).then(function(a){return{screenPoint:h,results:a.filter(function(a){return null!=a}).map(function(a){return{mapPoint:l,graphic:a}})}})};q.prototype.takeScreenshot=function(a){if(!this._setup)return m.reject("Map view cannot be used before it is ready");a=H.adjustScreenshotSettings(a,this);return this._stage.takeScreenshot(a)};q.prototype.on=
function(a,d,f){var h=this.inputManager&&this.inputManager.viewEvents.register(a,d,f);return h?h:this.inherited(arguments)};q.prototype.destroyLayerViews=function(){this.inherited(arguments);this._stage&&(this._stage.destroy(),this._stage=null)};q.prototype._startup=function(){var a=this;this.inherited(arguments);var d=new x(this.surface),f=new y({view:this,graphics:this.graphics}),h=new E({view:this,animationManager:this.animationManager});this._stage=d;this._graphicsView=f;this._set("navigation",
h);this._mapViewHandles.add([this.allLayerViews.on("change",function(){return a._updateStageChildren()}),d.on("post-render",function(){return a._set("rendering",a.allLayerViews.some(function(a){return!0===a.rendering}))}),this.watch("stationary",function(a){return d.stationary=a},!0),this.watch("state.viewpoint",function(f){return d.state=a.state},!0)]);d.state=this.state;this._updateStageChildren()};q.prototype._tearDown=function(){this._setup&&(this._graphicsView.destroy(),this._mapViewHandles.removeAll(),
this._stage.destroy(),this.navigation.destroy(),this._graphicsView=this._stage=null,this._set("navigation",null),this.inherited(arguments))};q.prototype._updateStageChildren=function(){var a=this;this._stage.removeAllChildren();this.allLayerViews.filter(function(a){return null!=a.container}).forEach(function(d,f){a._stage.addChildAt(d.container,f)});this._stage.addChild(this._graphicsView.container)};a([h.property({readOnly:!0})],q.prototype,"inputManager",void 0);a([h.property({readOnly:!0})],q.prototype,
"navigation",void 0);a([h.property({dependsOn:["navigation.interacting"],type:Boolean})],q.prototype,"interacting",null);a([h.property({type:v})],q.prototype,"ui",void 0);a([h.property({readOnly:!0})],q.prototype,"rendering",void 0);return q=a([h.subclass("esri.views.MapView")],q)}(h.declared(l,q,F))});